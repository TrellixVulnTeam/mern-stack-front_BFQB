/** 
 * RealGrid v2.4.1.1357
 * Copyright (C) 2013-2021 WooriTech Inc.
 * All Rights Reserved.
 */
var t;!function(t){t.Developer="developer",t.Evaluation="evaluation",t.Limited="limited",t.Enterprise="enterprise"}(t||(t={}));var e={name:"RealGrid",version:"2.4.1.1357",license:"enterprise",code:null};global._dp=function(t,e,i){i.enumerable=!0,i.configurable=!0,Object.defineProperty(t.prototype,e,i)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function o(t,e){function o(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}var r,n,s,a,l,h,u,c=function(){return(c=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t}).apply(this,arguments)};!function(t){t.TEXT="text",t.NUMBER="number",t.BOOLEAN="boolean",t.DATETIME="datetime",t.OBJECT="object",t.CHAR="char",t.UNUM="unum",t.INT="int",t.UINT="uint",t.DATE="date"}(r||(r={})),function(t){t.ASCENDING="ascending",t.DESCENDING="descending",t.NONE="none"}(n||(n={})),function(t){t.SENSITIVE="sensitive",t.INSENSITIVE="insensitive"}(s||(s={})),function(t){t.ROWS="rows",t.ITEMS="items"}(a||(a={})),function(t){t.AUTO="auto",t.EXPLICIT="explicit"}(l||(l={})),function(t){t.AUTO="auto",t.EXPLICIT="explicit"}(h||(h={})),function(t){t.NONE="none",t.HEADER="header",t.FOOTER="footer",t.SUMMARY="summary",t.BOTH="both"}(u||(u={}));var d,p;!function(t){t.ALWAYS="always",t.UPDATE="update",t.INSERT="insert"}(d||(d={})),function(t){t.ERROR="error",t.WARNING="warning",t.INFO="info",t.IGNORE="ignore"}(p||(p={}));var _,f,g,y,m,b,v,w,C,x,I,E,S,O,R,D,k,P,T,M,L={error:1,warning:2,info:3,ignore:4},F=function(t,e){return L[t]-L[e]};!function(t){t.NONE="none",t.AGGREGATE="aggregate",t.STATISTICAL="statistical"}(_||(_={})),function(t){t.NONE="none",t.LEFT_EDGE="leftEdge",t.RIGHT_EDGE="rightEdge",t.TOP_EDGE="topEdge",t.BOTTOM_EDGE="bottomEdge",t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom",t.CENTER="center"}(f||(f={})),function(t){t.NONE="none",t.HEAD="head",t.BODY="body",t.TAIL="tail"}(g||(g={})),function(t){t.NONE="none",t.EVEN="even",t.EVEN_FILL="evenFill",t.FILL="fill"}(y||(y={})),function(t){t.NONE="none",t.ROW="row",t.DATA="data",t.FILL="fill",t.CELL="cell"}(m||(m={})),function(t){t.NORMAL="normal",t.UPPER="upper",t.LOWER="lower",t.DEFAULT="default"}(b||(b={})),function(t){t.NEAR="near",t.CENTER="center",t.FAR="far"}(v||(v={})),function(t){t.NORMAL="normal",t.TODAY="today",t.TODAY_WHEN_NULL="todayWhenNull",t.DEFAULT="default",t.DEFAULT_WHEN_NULL="defaultWhenNull"}(w||(w={})),function(t){t.NONE="none",t.EXCLUSIVE="exclusive",t.INCLUSIVE="inclusive",t.REVERSE="reverse"}(C||(C={})),function(t){t.NORMAL="normal",t.CHECK="check",t.RADIO="radio",t.SEPARATOR="separator"}(x||(x={})),function(t){t.VISIBLE="visible",t.HOVERED="hovered",t.ALWAYS="always",t.HIDDEN="hidden"}(I||(I={})),function(t){t.NONE="none",t.ACTION="action",t.POPUP="popup"}(E||(E={})),function(t){t.ALWAYS="always",t.DEFAULT="default",t.VISIBLE="visible",t.HIDDEN="hidden",t.ROWFOCUSED="rowfocused"}(S||(S={})),function(t){t.LEFT="left",t.RIGHT="right",t.LEFT_EDGE="leftEdge",t.RIGHT_EDGE="rightEdge",t.TOP="top",t.BOTTOM="bottom",t.TOP_EDGE="topEdge",t.BOTTOM_EDGE="bottomEdge",t.CENTER="center"}(O||(O={})),function(t){t.ALL="all",t.VISIBLE_ONLY="visibleOnly"}(R||(R={})),function(t){t.CANCEL="cancel",t.COMMIT="commit",t.DEFAULT="default"}(D||(D={})),function(t){t.ROW="row",t.GROUP="group",t.FOOTER="footer",t.TREE="tree"}(k||(k={})),function(t){t.COUNT="count",t.SUM="sum",t.MAX="max",t.MIN="min",t.AVG="avg",t.VAR="var",t.VARP="varp",t.STDEV="stdev",t.STDEVP="stdevp",t.DATACOUNT="datacount",t.DATAAVG="dataavg"}(P||(P={})),function(t){t.ALWAYS="always",t.DEFAULT="default",t.NONE="none"}(T||(T={})),function(t){t.ROW="row",t.GRID="grid",t.NONE="none"}(M||(M={}));var N=function(){function t(t,e,i,o){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===o&&(o=0),this.x=t,this.y=e,this.width=i,this.height=o}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x},set:function(t){var e=t-this.x;this.x+=e,this.width-=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},set:function(t){var e=t-(this.x+this.width);this.width+=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},set:function(t){var e=t-this.y;this.y+=e,this.height-=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){var e=t-(this.y+this.height);this.height+=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.width||0===this.height},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.getInner=function(){return new t(0,0,this.width,this.height)},t.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height},t.prototype.leftBy=function(t){return this.x+=t,this.width-=t,this},t.prototype.rightBy=function(t){return this.width+=t,this},t.prototype.topBy=function(t){return this.y+=t,this.height-=t,this},t.prototype.bottomBy=function(t){return this.height+=t,this},t.prototype.shrink=function(t,e){return this.width-=t,this.height-=e,this},t.prototype.expand=function(t,e){return this.width+=t,this.height+=e,this},t.prototype.contains=function(t,e){return t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height},t.prototype.setEmpty=function(){return this.width=this.height=0,this},t.prototype.move=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e,this},t.prototype.set=function(t,e,i,o){return this.x=t,this.y=e,this.width=i,this.height=o,this},t.prototype.setWidth=function(t){return this.width=t,this},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.copyHorz=function(t){return this.x=t.x,this.width=t.width,this},t.prototype.copyVert=function(t){return this.y=t.y,this.height=t.height,this},t.prototype.inflate=function(t,e,i,o){return void 0===t&&(t=0),void 0===e&&(e=void 0),void 0===i&&(i=void 0),void 0===o&&(o=void 0),e=void 0!==e?e:t,i=void 0!==i?i:t,o=void 0!==o?o:e,t&&(this.left=this.x-t),e&&(this.top=this.y-e),i&&(this.right=this.right+i),o&&(this.bottom=this.bottom+o),this},t.prototype.offset=function(t,e){return this.x+=t,this.y+=e,this},t.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t.width>>>=0,t.height>>>=0,t},t.prototype.union=function(t){var e=this.clone();return e.left=Math.min(this.x,t.x),e.right=Math.max(this.right,t.right),e.top=Math.min(this.y,t.y),e.bottom=Math.max(this.bottom,t.bottom),e},t.prototype.normalize=function(){return this.width<0&&(this.x-=this.width,this.width*=-1),this.height<0&&(this.y-=this.height,this.height*=-1),this},t.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+", width: "+this.width+", height: "+this.height+"}"},t.Temp=new t,t}(),V=navigator.userAgent,B=navigator.platform.toUpperCase().indexOf("MAC")>=0,$=!!window.opera||V.indexOf(" OPR/")>=0,A=!!window.whale,j=!!window.chrome&&!$,H=void 0!==window.InstallTrigger,W=Object.prototype.toString.call(HTMLElement).indexOf("Constructor")>0||!j&&!$&&V.indexOf("Safari")>=0,G=W&&("Win32"==navigator.platform||V.indexOf("Windows")>=0),U=V.toLowerCase().indexOf("edge/")>=0,z=/iPad|iPhone|iPod/.test(V)&&!window.MSStream,Y=V.toLowerCase().indexOf("edg/")>=0&&V.toLowerCase().indexOf("chrome/")>=0,q=function(){for(var t=3,e=document.createElement("div"),i=e.getElementsByTagName("i");e.innerHTML="\x3c!--[if gt IE "+ ++t+"]><i></i><![endif]--\x3e",i[0];);return t>4?t:void 0}(),K=void 0!==q&&q<=9,X=void 0!==q&&q<=8,Z=!!V.match(/Trident.*rv\:11\./),J=-1!==navigator.appVersion.indexOf("MSIE 10"),Q=-1!==navigator.appVersion.indexOf("MSIE 9"),tt=Z||J||Q,et=(new Date).getTime(),it=void 0,ot=void 0;function rt(t){return t&&t.ownerDocument&&(t.ownerDocument.defaultView||t.ownerDocument.parentWindow)}function nt(t){return t&&t.ownerDocument}function st(t){return t.defaultView||t.parentWindow}var at,lt=function(){function t(){}return t.stopEvent=function(t,e){void 0===e&&(e=!1),t.preventDefault?(t.preventDefault(),t.stopPropagation()):t.returnValue=!1,e&&t.stopImmediatePropagation()},t.setDebugging=function(e,i,o){t.$$_trace=e,t.$$_debugging=i,t.$$_keyLog=o},t.isDebugging=function(){return t.$$_debugging},t.isTrace=function(){return this.$$_trace},t.log=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t.isDebugging()&&console.log(e,i)},t.keyLog=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t.$$_keyLog&&console.log(e,i)},t.trace=function(e){for(var i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t.isTrace()&&console.log(e,i)},t.isArray=function(t){return Array.isArray(t)},t.isObject=function(t){return null!=t&&"object"==typeof t},t.makeArray=function(e,i){return void 0===i&&(i=!1),null!=e?t.isArray(e)?e:[e]:i?[]:void 0},t.isNumber=function(t){return"number"==typeof t},t.getTimer=function(){return(new Date).getTime()-et},t.isWhiteSpace=function(t){return!t||!t.trim()},t.pad=function(t,e,i){return e=Math.max(e||2,1),i=i||"0",new Array(e-String(t).length+1).join(i)+t},t.pick=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i,o=t.length,r=0;r<o;r++)if(null!=(i=t[r]))return i},t.included=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var o=e.length,r=0;r<o;r++)if(e[r]==t)return!0;return!1},t.compareTextValue=function(t,e,i,o){if(t===e)return!0;var r=String(t),n=null==e?void 0:String(e);return!r&&!n||!(!r||!n)&&(i||(r=r.toLowerCase(),n=n.toLowerCase()),o?n.indexOf(r)>=0:r==n)},t.cast=function(t,e){return t instanceof e?t:null},t.alert=function(t){window.alert(t)},t.toInt=function(t,e){var i=parseInt(t,e||10);return isNaN(i)?0:i},t.toFloat=function(t){var e=parseFloat(t);return isNaN(e)?0:e},t.hex=function(t,e,i){void 0===e&&(e=2),void 0===i&&(i="0"),e=Math.max(e||2,1);var o=t.toString(16);return i=i||"0",new Array(e-o.length+1).join(i)+o},t.deepCopy=function(e){if(null==e||"object"!=typeof e)return e;if(e instanceof Date)return new Date(e);for(var i=t.isArray(e)?[]:{},o=0,r=Object.keys(e);o<r.length;o++){var n=r[o];e.hasOwnProperty(n)&&(i[n]=t.deepCopy(e[n]))}return i},t.extendObj=function(t,e){if(null==t||"object"!=typeof t||null==e||"object"!=typeof e)return e;for(var i=0,o=Object.keys(t);i<o.length;i++){var r=o[i];t.hasOwnProperty(r)&&void 0===e[r]&&(e[r]=t[r])}},t.getBounds=function(t){var e=new N;return e.x=t.offsetLeft,e.y=t.offsetTop,e.width=t.offsetWidth,e.height=t.offsetHeight,e},t.toStr=function(t){return"number"==typeof t?isNaN(t)?"":String(t):null!=t?String(t):""},t.setBounds=function(t,e,i,o,r){var n=t.style;n.left=e+"px",n.top=i+"px",n.width=o+"px",n.height=r+"px"},t.getClientRect=function(t){var e=t.getBoundingClientRect();return e.cx=t.offsetLeft,e.cy=t.offsetTop,e},t.getChildIndex=function(t){if(t){var e=t.parentNode;if(e)for(var i=e.children,o=i.length;o--;)if(i[o]===t)return o}return-1},t.clearChildren=function(t){for(var e;e=t.lastChild;)t.removeChild(e)},t.clearElements=function(e){for(var i;i=e.lastChild;)t.clearElements(i),e.removeChild(i)},t.addChild=function(t,e){return!(!t||!e||e.parentNode===t)&&(t.appendChild(e),!0)},t.removeChild=function(t,e){return!(!t||!e||e.parentNode!==t)&&(t.removeChild(e),!0)},t.disableSelection=function(t){var e=t.style;e["-moz-user-select"]="-moz-none",e["-khtml-user-select"]="none",e["-webkit-user-select"]="none",e["-o-user-select"]="none",e["-ms-user-select"]="none",e["user-select"]="none"},t.setMobile=function(t){it=t},t.isMobile=function(){return void 0!==it?it:(void 0===ot&&(ot=this.$_checkMobile()),ot)},t.$_checkMobile=function(){var t=!1,e=navigator.userAgent;return(e.match(/Android/i)||e.match(/webOS/i)||e.match(/iPhone/i)||e.match(/iPad/i)||e.match(/iPod/i)||e.match(/BlackBerry/i)||e.match(/Windows Phone/i))&&(t=!0),t||(t="ontouchstart"in window&&e.indexOf("Macintosh")>=0),t},t.getBrowserSize=function(t){var e=t?t.ownerDocument:document,i=e.defaultView;return{width:i.innerWidth||e.documentElement.clientWidth||e.body.clientWidth,height:i.innerHeight||e.documentElement.clientHeight||e.body.clientHeight}},t.move=function(t,e,i){t.style.left=e+"px",t.style.top=i+"px"},t.htmlEncode=function(t){return document.createElement("a").appendChild(document.createTextNode(t)).parentNode.innerHTML},t.detach=function(t){t&&t.parentNode&&t.parentNode.removeChild(t)},t.getSize=function(t){var e=t.getBoundingClientRect();return{width:e.width,height:e.height}},t.getScrolled=function(t){var e=t.body,i=st(t),o=t.documentElement;return{sx:i.pageXOffset||o.scrollLeft||e.scrollLeft,sy:i.pageYOffset||o.scrollTop||e.scrollTop}},t.getOffset=function(t){var e=t.ownerDocument,i=e.defaultView,o=t.getBoundingClientRect(),r=e.body,n=e.documentElement,s=i.pageYOffset||n.scrollTop||r.scrollTop,a=i.pageXOffset||n.scrollLeft||r.scrollLeft,l=n.clientTop||r.clientTop||0,h=n.clientLeft||r.clientLeft||0,u=o.left+a-h,c=o.top+s-l;return{x:Math.round(u),y:Math.round(c)}},t.isAncestorOf=function(t,e){for(var i=e.parentElement;i;){if(i==t)return!0;i=i.parentElement}return!1},t.equalNumbers=function(t,e){return isNaN(t)&&isNaN(e)||!isNaN(t)&&t==e},t.equalArrays=function(t,e){if(t===e)return!0;if(null==t||null==e)return!1;var i=t.length;if(i!=e.length)return!1;for(var o=0;o<i;++o)if(t[o]!==e[o])return!1;return!0},t.isLeapYear=function(t){return t%4==0&&t%100!=0||t%400==0},t.incMonth=function(e,i){var o=e.getDate();return e.setDate(1),e.setMonth(e.getMonth()+i),e.setDate(Math.min(o,t.month_days[t.isLeapYear(e.getFullYear())?1:0][e.getMonth()])),e},t.minDate=function(t,e){return null!==t?t:null!==e?e:t.getTime()<e.getTime()?t:e},t.maxDate=function(t,e){return null!==t?e:null!==e||t.getTime()>e.getTime()?t:e},t.setClassName=function(t,e){(e=e||"")!=t.className&&(t.className=e)},t.addClassName=function(t,e){if(e=e||"",t.classList)t.classList.add(e);else{var i=t.className.split(" ");i.indexOf(e)<0&&i.push(e),t.className=i.join(" ")}},t.removeClassName=function(t,e){if(t.classList)t.classList.remove(e);else{var i,o=t.className.split(" ");(i=o.indexOf(e))>=0&&o.splice(i,1),t.className=o.join(" ")}},t.setStyle=function(t,e){var i=e.style;for(var o in t)null!=t[o]?i[o]=t[o]:(i.removeProperty?i.removeProperty(o):i.removeAttribute&&i.removeAttribute(o),i[o]="")},t.getBoundingClientRect2=function(t){var e=t.getBoundingClientRect();return{left:e.left,right:e.right,width:e.right-e.left,top:e.top,bottom:e.bottom,height:e.bottom-e.top}},t.getTextLength=function(t){for(var e=0,i=0,o=0;t&&(o=t.charCodeAt(i++));e+=o>>7?2:1);return e},t.setTextProp=function(t){t.textProp=this.ieAll?"textContent":"innerText"},t.isEmpty=function(t){if(t)for(var e in t)return!1;return!0},t.isPassive=function(){if(null===t.$_supportPassive){t.$_supportPassive=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t.$_supportPassive=!0}}))}catch(t){}}return t.$_supportPassive},t.hangulToChosungAll=function(t){for(var e=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],i="",o=0;o<t.length;o++){var r=t.charCodeAt(o)-44032;i+=r>-1&&r<11172?e[Math.floor(r/588)]:t[o]}return i},t.hangulToChosung=function(t){var e={cho:t,org:t};if(/[ㄱ-힝]/.test(t)){var i=["ㄱ","ㄲ","ㄴ","ㄷ","ㄸ","ㄹ","ㅁ","ㅂ","ㅃ","ㅅ","ㅆ","ㅇ","ㅈ","ㅉ","ㅊ","ㅋ","ㅌ","ㅍ","ㅎ"],o=t.charCodeAt(0)-44032,r=o%28,n=(o-r)/28%21,s=((o-r)/28-n)/21;e.cho=i[s]?i[s]:t,e.org=["ㅏ","ㅐ","ㅑ","ㅒ","ㅓ","ㅔ","ㅕ","ㅖ","ㅗ","ㅘ","ㅙ","ㅚ","ㅛ","ㅜ","ㅝ","ㅞ","ㅟ","ㅠ","ㅡ","ㅢ","ㅣ"][n]?t:void 0}return e},t.addQuot=function(t,e){return t&&(t.indexOf("\n")>=0||t.indexOf("\r\n")>=0||'"'==t.charAt(0))&&(t='"'+(t=t.replace(/\"/g,'""'))+'"'),t},t.isIE=tt,t.isEdge=U,t.ieAll=tt||U,t.ieOld=K,t.isMac=B,t.isSafari=W,t.isWinSafari=G,t.isChrome=j,t.isFirefox=H,t.isOpera=$,t.ieLeg=X,t.ieTen=J,t.ieNine=Q,t.isiOS=z,t.isChromium=j||Y||A||$,t.TextProp=t.ieAll?"innerText":"textContent",t.week_days=window.RG_CONST&&window.RG_CONST.WEEKDAYS?window.RG_CONST.WEEKDAYS:["일","월","화","수","목","금","토"],t.month_days=[[31,28,31,30,31,30,31,31,30,31,30,31],[31,29,31,30,31,30,31,31,30,31,30,31]],t.colonreg=/;(?=(?:[^"]*"[^"]*")*(?![^"]*"))/,t.$_INVISIBLE_EDIT_BOUNDS=new N(-1e4,-1e4,100,100),t.$$_debugging=!1,t.$$_keyLog=!1,t.$$_trace=null,t.$_supportPassive=null,t}();!function(t){t.NONE="none",t.CREATED="created",t.UPDATED="updated",t.DELETED="deleted",t.CREATE_AND_DELETED="createAndDeleted"}(at||(at={}));var ht=function(t){return t==at.DELETED||t==at.CREATE_AND_DELETED},ut=function(){function t(t){this.format=t}return Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))},enumerable:!0,configurable:!0}),t.prototype.toBool=function(t){return!!this.toBoolStrict(t)},t.prototype.toBoolEx=function(t){var e=this._sensitive?t:t.toLowerCase(),i=this.$_toBool(t);return null!=i?i:e?Boolean(e):void 0},t.prototype.toBoolStrict=function(t){return this.$_toBool(t)},t.prototype.toText=function(t){return t?this._trueText:this._falseText},t.prototype.$_toBool=function(t){if(this._values){var e=this._sensitive?t:t.toLowerCase();if(e in this._values)return this._values[e]}},t.prototype.parse=function(t){var e=this;if(this._values={},t){this._trueText=this._falseText=null;var i=t.split(/[;\:]/),o="0"!=i[2],r=i[0]?o?i[0].split(","):i[0].toLowerCase().split(","):null,n=i[1]?o?i[1].split(","):i[1].toLowerCase().split(","):null;r&&r.forEach((function(t){e._values[t]=!1,e._falseText=e._falseText||t})),n&&n.forEach((function(t){e._values[t]=!0,e._trueText=e._trueText||t}))}else this._values[this._trueText="true"]=!0,this._values[this._falseText="false"]=!1},t.Default=new t("false,f,0:true,t,1:0"),t}(),ct=function(){function t(t){this._format=null,this._baseYear=2e3,this._patterns=[],this._amText="AM",this._pmText="PM",t&&(this.format=t)}return Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){if(t!=this._format){if(!t)throw new Error("Invalid empty date format");this._format=t,this.parseFormat(t)}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t)},enumerable:!0,configurable:!0}),t.prototype.parse=function(e){try{for(var i=0,o=1,r=1,n=0,s=0,a=0,l=0,h=0,u=0,c=this._patterns.length,d=0,p=e.length,_=0;_<c&&d<p;_++){var f=this._patterns[_],g=f.c,y=f.len;switch(g){case"y":i=parseInt(e.substr(d,y));break;case"M":o=parseInt(e.substr(d,y));break;case"d":r=parseInt(e.substr(d,y));break;case"a":if(this._amText&&e.indexOf(this._amText,d)==d)h=12,y=this._amText.length;else{if(!this._pmText||e.indexOf(this._pmText,d)!=d)return null;u=12,y=this._pmText.length}break;case"H":case"h":n=parseInt(e.substr(d,y));break;case"m":s=parseInt(e.substr(d,y));break;case"s":a=parseInt(e.substr(d,y));break;case"S":l=parseInt(e.substr(d,y));break;case".":case"/":case"-":case":":case" ":if(t.DATE_SEPARATORS.indexOf(e.charAt(d))<0)return null;break;default:return null}d+=y}return i<100&&(i+=this._baseYear),h>0?12==n&&(n=0):u>0&&n<12&&(n+=12),new Date(i,o-1,r,n,s,a,l)}catch(t){return null}},t.prototype.parseFormat=function(t){var e,i,o,r=t,n=r.length,s=0;for(this._patterns=[];s<n;)if(e=s,i=r.charAt(s),lt.isWhiteSpace(i)){for(s++;s<n&&lt.isWhiteSpace(r.charAt(s));)s++;this._patterns.push({c:" ",p:e,len:s-e})}else{switch(o=0,i){case"y":4!=(o=this.getPattern(r,s,i))&&2!=o&&this.throwInvalidFormat(r);break;case"M":case"d":case"H":case"h":case"m":case"s":2!=(o=this.getPattern(r,s,i))&&this.throwInvalidFormat(r);break;case"S":3!=(o=this.getPattern(r,s,i))&&this.throwInvalidFormat(r);break;case"a":case".":case"/":case"-":case":":1!=(o=this.getPattern(r,s,i))&&this.throwInvalidFormat(r);break;default:this.throwInvalidFormat(r)}o>0&&(this._patterns.push({c:i,p:s,len:o}),s+=o)}},t.prototype.throwInvalidFormat=function(t){throw new Error("Invalid date format: "+t)},t.prototype.throwInvalidValue=function(t){throw new Error("Invalid date format: "+t)},t.prototype.getPattern=function(t,e,i){for(var o=1;++e<t.length&&t.charAt(e)==i;)o++;return o},t.DATE_SEPARATORS="./-: ",t}(),dt=function(){function t(t){this._format="",this._type=0,this._parser=new ct(null),this.format=t}return t.initialize=function(){t.Default.amText="AM",t.Default.pmText="PM",t.Default.baseYear=2e3},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"amText",{get:function(){return this._parser.amText},set:function(t){this._parser.amText=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pmText",{get:function(){return this._parser.pmText},set:function(t){this._parser.pmText=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseYear",{get:function(){return this._parser.baseYear},set:function(t){this._parser.baseYear=t},enumerable:!0,configurable:!0}),t.prototype.toDate=function(t){if(!t)return null;var e=null;switch(this._type){case 0:e=this._parser.parse(t);break;case 2:var i=parseInt(t);e=new Date(i);break;case 1:case 3:default:e=new Date(t)}return e&&!isNaN(e.getTime())?e:null},t.prototype.parse=function(e){if(e){var i=e.toLowerCase();this._type=Math.max(0,t.Formats.indexOf(i)),0==this._type&&(this._parser.format=e)}},t.Formats=["custom","iso","timestamp","platform"],t.Default=new t("yyyy/MM/dd HH:mm:ss"),t}();dt.initialize();var pt,_t=0,ft=function(){function t(t){this.$_disposed=!1,t||(this.$_hash=_t++)}return t.prototype.dispose=function(){return this.$_disposed||this.$_disposing||(this.$_disposed=!0,this.$_disposing=!0,this._doDispose()),null},t.prototype._doDispose=function(){},Object.defineProperty(t.prototype,"disposing",{get:function(){return this.$_disposing},enumerable:!0,configurable:!0}),t.prototype.isMe=function(t){return t==this.$_hash},t.prototype.$_getters=function(t){for(var e=[],i=Object.getOwnPropertyNames(t),o=0,r=i.length;o<r;o++){var n=i[o],s=Object.getOwnPropertyDescriptor(t,n);s&&s.get&&e.push(n)}return e},t.prototype.doAssignSimple=function(t){return!1},t.prototype.assignFrom=function(e){var i=Object.getPrototypeOf(this);if(e instanceof t)for(var o=Object.getPrototypeOf(e),r={};o&&o.constructor!=t;){for(var n=this.$_getters(o),s=0,a=n.length;s<a;s++){if(!((c=n[s])in r))if(r[c]=null,d=Object.getOwnPropertyDescriptor(i,c)){if(d.set)(u=Object.getOwnPropertyDescriptor(o,c).get)&&d.set.call(this,u.call(e))}else for(var l=Object.getPrototypeOf(i);l;){var h=Object.getOwnPropertyDescriptor(l,c);if(h){var u;if(h.set)(u=Object.getOwnPropertyDescriptor(o,c).get)&&h.set.call(this,u.call(e));l=null}else l=Object.getPrototypeOf(l)}}o=Object.getPrototypeOf(o)}else if(!this.doAssignSimple(e))for(var c in e){var d;if(d=Object.getOwnPropertyDescriptor(i,c))d.set&&d.set.call(this,e[c]);else for(l=Object.getPrototypeOf(i);l;){var p=Object.getOwnPropertyDescriptor(l,c);p?(p.set&&p.set.call(this,e[c]),l=null):l=Object.getPrototypeOf(l)}}},t.prototype.extend=function(t){for(var e in t)this.hasOwnProperty(e)&&(this[e]=t[e])},t.prototype.toProxy=function(e){void 0===e&&(e=!0);for(var i={},o=Object.getPrototypeOf(this);o&&o.constructor!=t;){for(var r=this.$_getters(o),n=0,s=r.length;n<s;n++){var a=r[n],l=Object.getOwnPropertyDescriptor(o,a);if(l){if(l.get&&l.set){var h=l.get.call(this);(e||void 0!==h)&&(i[a]=h)}}else for(var u=Object.getPrototypeOf(o);u;){var c=Object.getOwnPropertyDescriptor(u,a);if(c){if(c.get&&c.set){h=c.get.call(this);(e||void 0!==h)&&(i[a]=c.get.call(this))}u=null}else u=Object.getPrototypeOf(u)}}o=Object.getPrototypeOf(o)}return i},t}(),gt=function(t){function e(e,i){var o=t.call(this,e)||this;return o.message=e,o.tokenPos=i,o}return o(e,t),e}(Error),yt=function(t){function e(e){var i=t.call(this,e)||this;return i.message=e,i}return o(e,t),e}(Error),mt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=[],o=0,r=t;o<r.length;o++){var n=r[o];i[n]=!0}return i},bt=mt(26,27),vt=mt(40,45,46,47,48,49,50,51,52,53,41,42,43,44),wt=mt(4,5,18,19),Ct=mt(11,3,2,14,15,16,17),xt=function(){function t(){this.IS_IDENT=[],this.IS_INTEGER=[],this.IS_NUMBER=[],this.IS_WHITE=[],this.IS_END=[],this.QUOTATION='"'.charCodeAt(0),this.SQUOTATION="'".charCodeAt(0),this.BACKSLASH="\\".charCodeAt(0),this.Keywords={str:20,num:21,bool:23,not:13,len:24,and:11,in:12,mod:15,or:18,div:14,shl:16,shr:17,xor:19,is:26,like:46,ilike:48,match:50,imatch:52,defined:35,null:34,empty:36,nan:37,datestr:90,year:91,month:92,day:93,hour:94,rounddown:95},this._procs=null,this._source=null,this._len=0,this._tokenId=0,this._run=0,this._runAhead=0,this._nextRun=0,this._lineNo=0,this._linePos=0,this._tokenPos=0;for(var t=0;t<256;t++)this.IS_IDENT[t]=t=="_".charCodeAt(0)||t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="z".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="Z".charCodeAt(0),this.IS_INTEGER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t>="a".charCodeAt(0)&&t<="f".charCodeAt(0)||t>="A".charCodeAt(0)&&t<="F".charCodeAt(0),this.IS_NUMBER[t]=t>="0".charCodeAt(0)&&t<="9".charCodeAt(0)||t==".".charCodeAt(0)||t=="e".charCodeAt(0)||t=="E".charCodeAt(0),this.IS_WHITE[t]=t>=1&&t<=9||11==t||t>=14&&t<=32,this.IS_END[t]=0==t;this.initProcs()}return t.prototype.clear=function(){this._source=null},t.prototype.next=function(){var t=this._source.charCodeAt(this._run);this._tokenPos=this._run,t<256?this._procs[t].call(this):this.identProc()},t.prototype.unkownProc=function(){this._tokenId=0,this._run++},t.prototype.symbolProc=function(){this._tokenId=80,this._run++},t.prototype.commaProc=function(){this._tokenId=32,this._run++},t.prototype.crProc=function(){this._tokenId=33,10==this._source.charCodeAt(this._run+1)?this._run+=2:this._run++,this._lineNo++,this._linePos=this._run},t.prototype.lfProc=function(){this._tokenId=33,this._run++,this._lineNo++,this._linePos=this._run},t.prototype.equalProc=function(){this._tokenId=40,this._run++},t.prototype.greaterProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=42,this._run+=2):(this._tokenId=41,this._run++)},t.prototype.lowerProc=function(){"="==this._source.charAt(this._run+1)?(this._tokenId=44,this._run+=2):">"==this._source.charAt(this._run+1)?(this._tokenId=45,this._run+=2):(this._tokenId=43,this._run++)},t.prototype.nextIdent=function(){for(var t=this._run;t<this._len&&!this.IS_IDENT[this._source.charCodeAt(t)];)t++;for(var e=t;t<this._len&&this.IS_IDENT[this._source.charCodeAt(t)];)t++;return t>e?(this._nextRun=t,this._source.substr(e,t-e).toLowerCase()):null},t.prototype.identProc=function(){for(var t=this._run;this._run<this._len&&(this.IS_IDENT[this._source.charCodeAt(this._run)]||this._source.charCodeAt(this._run)>255);)this._run++;var e=this._source.substr(t,this._run-t).toLowerCase();if(this.Keywords.hasOwnProperty(e))switch(this._tokenId=this.Keywords[e],this._tokenId){case 13:if(e=this.nextIdent())switch(e){case"like":this._tokenId=47,this._run=this._nextRun;break;case"ilike":this._tokenId=49,this._run=this._nextRun;break;case"match":this._tokenId=51,this._run=this._nextRun;break;case"imatch":this._tokenId=53,this._run=this._nextRun}break;case 26:"not"==(e=this.nextIdent())&&(this._tokenId=27,this._run=this._nextRun)}else this._tokenId=10},t.prototype.integerProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_INTEGER[this._source.charCodeAt(this._run)];)this._run++},t.prototype.numberProc=function(){for(this._tokenId=64,this._run++;this._run<this._len&&this.IS_NUMBER[this._source.charCodeAt(this._run)];){if("."==this._source.charAt(this._run)){if("."==this._source.charAt(this._run+1))break;this._tokenId=63}this._run++}},t.prototype.minusProc=function(){this._tokenId=4,this._run++},t.prototype.plusProc=function(){this._tokenId=5,this._run++},t.prototype.pointProc=function(){"."==this._source.charAt(this._run+1)?(this._tokenId=68,this._run+=2):(this._tokenId=65,this._run++)},t.prototype.roundOpenProc=function(){this._tokenId=66,this._run++},t.prototype.roundCloseProc=function(){this._tokenId=67,this._run++},t.prototype.slashProc=function(){this._tokenId=2,this._run++},t.prototype.spaceProc=function(){for(this._tokenId=71,this._run++;this._run<this._len&&this.IS_WHITE[this._source.charCodeAt(this._run)];)this._run++},t.prototype.bracketOpenProc=function(){this._tokenId=69,this._run++},t.prototype.bracketCloseProc=function(){this._tokenId=70,this._run++},t.prototype.starProc=function(){this._tokenId=3,this._run++},t.prototype.modProc=function(){this._tokenId=15,this._run++},t.prototype.stringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new gt("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.QUOTATION);this._run++},t.prototype.smallStringProc=function(){this._tokenId=61;do{var t=this._source.charCodeAt(this._run);if(this.IS_END[t])throw new gt("Untermintated string",t);t==this.BACKSLASH&&this._run++,this._run++}while(this._run<this._len&&this._source.charCodeAt(this._run)!=this.SQUOTATION);this._run++},t.prototype.initProcs=function(){this._procs=[];for(var t=1;t<=255;t++)this._procs[t]=this.symbolProc;for(t=1;t<=32;t++)this._procs[t]=this.spaceProc;this._procs[10]=this.lfProc,this._procs[13]=this.crProc,this._procs["$".charCodeAt(0)]=this.integerProc,this._procs[this.QUOTATION]=this.stringProc,this._procs[this.SQUOTATION]=this.smallStringProc;for(t=0;t<=9;t++)this._procs["0".charCodeAt(0)+t]=this.numberProc;for(t="A".charCodeAt(0);t<="Z".charCodeAt(0);t++)this._procs[t]=this.identProc;for(t="a".charCodeAt(0);t<="z".charCodeAt(0);t++)this._procs[t]=this.identProc;this._procs["_".charCodeAt(0)]=this.identProc,this._procs["(".charCodeAt(0)]=this.roundOpenProc,this._procs[")".charCodeAt(0)]=this.roundCloseProc,this._procs["*".charCodeAt(0)]=this.starProc,this._procs["+".charCodeAt(0)]=this.plusProc,this._procs[",".charCodeAt(0)]=this.commaProc,this._procs["-".charCodeAt(0)]=this.minusProc,this._procs[".".charCodeAt(0)]=this.pointProc,this._procs["/".charCodeAt(0)]=this.slashProc,this._procs["%".charCodeAt(0)]=this.modProc,this._procs["<".charCodeAt(0)]=this.lowerProc,this._procs["=".charCodeAt(0)]=this.equalProc,this._procs[">".charCodeAt(0)]=this.greaterProc,this._procs["[".charCodeAt(0)]=this.bracketOpenProc,this._procs["]".charCodeAt(0)]=this.bracketCloseProc},Object.defineProperty(t.prototype,"tokenId",{get:function(){return this._tokenId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tokenLoc",{get:function(){return{x:this._tokenPos-this._linePos,y:this._lineNo}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"tokenLen",{get:function(){return this._run-this._tokenPos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"token",{get:function(){return this._source.substr(this._tokenPos,this.tokenLen)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isSpace",{get:function(){return 71==this._tokenId},enumerable:!0,configurable:!0}),t.prototype.init=function(t){this._source=t,this._len=t.length,this._lineNo=0,this._linePos=0,this._tokenPos=0,this._runAhead=this._run=0,this._tokenId=0},t.prototype.charAhread=function(){for(this._runAhead=this._run;this._runAhead<this._len&&this._source.charCodeAt(this._runAhead)>0&&this._source.charCodeAt(this._runAhead)<=32;)this._runAhead++;return this._source.charCodeAt(this._runAhead)},t.prototype.nextId=function(t){do{this.next()}while(this._run<this._len&&this._tokenId!=t)},t.prototype.nextNoSpace=function(){if(this._run<this._len)do{this.next()}while(this._run<this._len&&this.isSpace)},t.prototype.isFirstInLine=function(){if(0==this._tokenPos)return!0;var t,e=this._tokenPos;for(e--;e>0&&this.IS_WHITE[this._source.charCodeAt(e)];)e--;return 0==e||(10==(t=this._source.charCodeAt(e))||13==t)},t}(),It=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.isIdentifier=function(t){throw new Error("Token is not a valid Identifier: "+t)},e.prototype.evaluateIdentifier=function(t){throw new Error("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,e){throw new Error("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,e,i){throw new Error("Invalid identifier indexer: "+t)},e}(ft),Et=function(){function t(){}return Object.defineProperty(t.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"asLiteral",{get:function(){return null},enumerable:!0,configurable:!0}),t.prototype.prepareValue=function(){},t.prototype.getLiteral=function(){},t.prototype.isIdentifier=function(t){return!1},t.prototype.toString=function(){return String(this)},t}(),St=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(Et),Ot=(function(t){function e(){return t.call(this)||this}o(e,t),e.prototype.evaluate=function(t){},e.prototype.toString=function(){return""},e.Default=new e}(Et),function(t){function e(){var e=t.call(this)||this;return e._operator=0,e}return o(e,t),e.prototype.evaluate=function(t){if(this._literal)return this._literal.value;if(!this._rightExpr)return this._leftExpr.evaluate(t);var e=this._leftExpr.evaluate(t),i=this._rightExpr.evaluate(t);switch(this._operator){case 40:return e==i;case 45:return e!=i;case 41:return e>i;case 42:return e>=i;case 43:return e<i;case 44:return e<=i;case 46:return this.calcLike(e,i,!1);case 47:return!this.calcLike(e,i,!1);case 48:return this.calcLike(e,i,!0);case 49:return!this.calcLike(e,i,!0);case 50:return this.calcMatch(e,i,!1);case 51:return!this.calcMatch(e,i,!1);case 52:return this.calcMatch(e,i,!0);case 53:return!this.calcMatch(e,i,!0);default:throw new yt("Unknown operator: "+this._operator)}},e.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(this._rightExpr){var e,i=this._leftExpr.toString(),o=this._rightExpr.toString();switch(this._operator){case 40:e="=";break;case 45:e="<>";break;case 41:e=">";break;case 42:e=">=";break;case 43:e="<";break;case 44:e="<=";break;case 46:e="like";break;case 47:e="not like";break;case 48:e="ilike";break;case 49:e="not ilike";break;case 50:e="match";break;case 51:e="not match";break;case 52:e="imatch";break;case 53:e="not imatch";break;case 32:e=",";break;default:e="<<ERROR>>"}t="("+i+" "+e+" "+o+")"}else t=this._leftExpr.toString();return t},e.prototype.isIdentifier=function(t){return this._leftExpr&&!this._rightExpr&&this._leftExpr.isIdentifier(t)},e.prototype.prepareValue=function(){this._leftExpr.prepareValue(),null==this._rightExpr?this._literal=this._leftExpr.getLiteral():this._rightExpr.prepareValue()},e.prototype.getLiteral=function(){return this._literal},e.prototype.calcLike=function(t,e,i){var o=String(t),r=String(e);if(o&&r){i&&(o=o.toLowerCase(),r=r.toLowerCase());var n=r.length;if(n>1){var s="%"==r.charAt(0),a="%"==r.charAt(n-1);return s&&a?(r=r.substr(1,n-2),o.indexOf(r,0)>=0):s?(r=r.substr(1,n-1),o.lastIndexOf(r)==o.length-r.length):a?(r=r.substr(0,n-1),0==o.indexOf(r,0)):o==r}return"%"!=r&&o==r}return!1},e.prototype.calcMatch=function(t,e,i){return new RegExp(e,"m"+(i?"i":"")).test(t)},e}(Et)),Rt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t){},e}(Et),Dt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toString=function(){return"defined"},e}(Rt),kt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toString=function(){return"empty"},e}(Rt),Pt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return NaN},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return"null"},e}(Rt),Tt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.toString=function(){return"NaN"},e}(Rt),Mt=function(t){function e(i,o,r){var n=t.call(this)||this;return n._leftExpr=i,n._operator=o,n._isNot=27==o,n._value=-1,r instanceof Dt?n._value=e.DEFINED:r instanceof Pt?n._value=e.NULL:r instanceof kt?n._value=e.EMPTY:r instanceof Tt&&(n._value=e.NAN),n}return o(e,t),e.prototype.prepareValue=function(){this._leftExpr.prepareValue(),this._literal=this._leftExpr.getLiteral()},e.prototype.getLiteral=function(){return null},e.prototype.evaluate=function(t){var i,o=this._literal?this._literal.value:this._leftExpr.evaluate(t);switch(this._value){case e.DEFINED:i=void 0!==o;break;case e.NULL:i=null==o;break;case e.EMPTY:i=null==o||0==String(o).length;break;case e.NAN:i=null===o||isNaN(o);break;default:return}return this._isNot?!i:i},e.prototype.toString=function(){var t="<<ERROR>>";switch(this._value){case e.DEFINED:t="defined";break;case e.NULL:t="null";break;case e.EMPTY:t="empty";break;case e.NAN:t="NaN"}return"("+(this._isNot?"is not ":"is ")+t+")"},e.DEFINED=0,e.NULL=1,e.EMPTY=2,e.NAN=3,e}(Ot),Lt=function(t){function e(e){var i=t.call(this)||this;return i._value=Number(e),i}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t){return this._value},e.prototype.toString=function(){return String(this._value)},e}(St),Ft=function(t){function e(e){var i=t.call(this)||this;return i._value="string"==typeof e?parseInt(e):Math.floor(e),i}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t){return this._value},e.prototype.toString=function(){return String(this._value)},e}(St),Nt=function(t){function e(e){var i=t.call(this)||this;i._value=e.substr(1,e.length-2);for(var o="",r=0,n=!1;r<i._value.length;)"\\"!=i._value[r]||n?(n=!1,o+=i._value[r++]):(n=!0,r++);return i._value=o,i}return o(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"asLiteral",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t){return this._value},e.prototype.toString=function(){return"'"+this._value+"'"},e}(St),Vt=function(t){function e(e){var i=t.call(this)||this;return i._idKey=-651212,i._literal=e,i}return o(e,t),Object.defineProperty(e.prototype,"identifier",{get:function(){return this._literal},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t){return-651212==this._idKey&&(this._idKey=t.isIdentifier(this._literal)),t.evaluateIdentifier(this._idKey)},e.prototype.toString=function(){return this._literal},e}(Et),Bt=function(t){function e(e,i,o){var r=t.call(this)||this;return r._idKey=-1490313,r._intIndex=NaN,r._strIndex=null,r._ident=e,r._indexer=i,r._capital=o,r}return o(e,t),e.prototype.prepareValue=function(){var t=this._indexer.asLiteral;if(t||this._indexer instanceof Ot&&(this._indexer.prepareValue(),t=this._indexer.getLiteral()),t){var e=t.value;"string"==typeof e?this._strIndex=e:this._intIndex=parseInt(e),this._capital&&this._strIndex&&(this._strIndex=this._strIndex.toUpperCase())}},e.prototype.getLiteral=function(){return null},e.prototype.evaluate=function(t){if(-1490313==this._idKey&&(this._idKey=t.isIdentifier(this._ident)),this._strIndex)return t.evaluateIndexerS(this._idKey,this._strIndex,this._capital);if(isNaN(this._intIndex)){var e=this._indexer.evaluate(t);return"string"==typeof e?t.evaluateIndexerS(this._idKey,e,this._capital):t.evaluateIndexerI(this._idKey,e)}return t.evaluateIndexerI(this._idKey,this._intIndex)},e.prototype.toString=function(){return this._ident+"["+this._indexer.toString()+"]"},e}(Ot),$t=function(t){function e(e){var i=t.call(this)||this;return i._factor=e,i}return o(e,t),e.prototype.prepareValue=function(){this._literal=this._factor.asLiteral,!this._literal&&this._factor instanceof Et&&(this._factor.prepareValue(),this._literal=this._factor.getLiteral())},e.prototype.getLiteral=function(){return null},e}(Et),At=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof St?this._literal.value:this._factor.evaluate(t);return e?e.length:0},e.prototype.toString=function(){return"(len "+this._factor+")"},e}($t),jt=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){return-(this._literal instanceof St?this._literal.value:this._factor.evaluate(t))},e.prototype.toString=function(){return"-"+this._factor},e}($t),Ht=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){return this._literal instanceof St?this._literal.value:this._factor.evaluate(t)},e.prototype.toString=function(){return"+"+this._factor},e}($t),Wt=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){return!(this._literal instanceof St?this._literal.value:this._factor.evaluate(t))},e.prototype.toString=function(){return"(not "+this._factor+")"},e}($t),Gt=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof St?this._literal.value:this._factor.evaluate(t);return Boolean(e)},e.prototype.toString=function(){return"(bool "+this._factor+")"},e}($t),Ut=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof St?this._literal.value:this._factor.evaluate(t);return Number(e)},e.prototype.toString=function(){return"(num "+this._factor+")"},e}($t),zt=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof St?this._literal.value:this._factor.evaluate(t);return String(e)},e.prototype.toString=function(){return"(str "+this._factor+")"},e}($t),Yt=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof St?this._literal.value:this._factor.evaluate(t);if(e instanceof Date){var i=lt.pad;e=i(e.getFullYear(),4)+i(e.getMonth()+1,2)+i(e.getDate(),2)+i(e.getHours(),2)+i(e.getMinutes(),2)+i(e.getSeconds(),2)+i(e.getMilliseconds(),3)}return String(e)},e.prototype.toString=function(){return"(datestr "+this._factor+")"},e}($t),qt=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof St?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getFullYear():null},e.prototype.toString=function(){return"(year "+this._factor+")"},e}($t),Kt=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof St?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getMonth()+1:null},e.prototype.toString=function(){return"(month "+this._factor+")"},e}($t),Xt=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof St?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getDate():null},e.prototype.toString=function(){return"(day "+this._factor+")"},e}($t),Zt=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._literal instanceof St?this._literal.value:this._factor.evaluate(t);return e instanceof Date?e.getHours():null},e.prototype.toString=function(){return"(hour "+this._factor+")"},e}($t),Jt=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.evaluate=function(t){var e=this._factor,i=e.getLiteral();if(e.getLiteral())return i.value;if(!e._rightExpr)return e._leftExpr.evaluate(t);var o=e._leftExpr.evaluate(t),r=e._rightExpr.evaluate(t);switch(e._operator){case 32:var n=Math.pow(10,r);return Math.floor(o*n)/n;default:throw new yt("Unknown operator: "+e._operator)}},e.prototype.toString=function(){return"(rounddown "+this._factor+")"},e}($t),Qt=function(t){function e(){var e=t.call(this)||this;return e._factors=[],e._operators=[],e._literal=null,e}return o(e,t),e.prototype.addFactor=function(t){this._factors.push(t)},e.prototype.addOperator=function(t){this._operators.push(t)},e.prototype.isIdentifier=function(t){return 1==this._factors.length&&this._factors[0]instanceof Vt&&this._factors[0].identifier==t},e.prototype.prepareValue=function(){var t,e,i;for(t=0,e=this._factors.length;t<e;t++)this._factors[t].prepareValue();0==this._operators.length&&(i=this._factors[0],this._literal=i.asLiteral,this._literal||(this._literal=i.getLiteral()))},e.prototype.getLiteral=function(){return this._literal},e.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._factors.length,i=this._factors[0].evaluate(t),o=1;o<e;o++){var r=this._factors[o].evaluate(t);switch(this._operators[o-1]){case 11:i=i&&r;break;case 3:i*=r;break;case 2:i/=r;break;case 14:i=Math.floor(Math.floor(i)/Math.floor(r));break;case 15:i%=r;break;case 16:i<<=r;break;case 17:i>>=r}}return i},e.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._factors.length)t=this._factors[0].toString();else{var e,i=this._factors.length;for(t="("+this._factors[0].toString(),e=1;e<i;e++){switch(this._operators[e-1]){case 11:t+=" and ";break;case 3:t+=" * ";break;case 2:case 14:t+=" / ";break;case 15:t+=" mod ";break;case 16:t+=" shl ";break;case 17:t+=" shr "}t+=this._factors[e].toString()}t+=")"}return t},e}(Et),te=function(t){function e(){var e=t.call(this)||this;return e._terms=[],e._operators=[],e._literal=null,e}return o(e,t),e.prototype.addTerm=function(t){this._terms.push(t)},e.prototype.addOperator=function(t){this._operators.push(t)},e.prototype.isIdentifier=function(t){return 1==this._terms.length&&this._terms[0].isIdentifier(t)},e.prototype.prepareValue=function(){for(var t=0,e=this._terms.length;t<e;t++)this._terms[t].prepareValue();0==this._operators.length&&(this._literal=this._terms[0].getLiteral())},e.prototype.getLiteral=function(){return this._literal},e.prototype.evaluate=function(t){if(this._literal)return this._literal.value;for(var e=this._terms.length,i=this._terms[0].evaluate(t),o=1;o<e;o++){var r=this._terms[o].evaluate(t);switch(this._operators[o-1]){case 4:i-=r;break;case 5:i+=r;break;case 18:i=i||r;break;case 19:i^=r}}return i},e.prototype.toString=function(){var t="";if(this._literal)t=this._literal.toString();else if(1==this._terms.length)t=this._terms[0].toString();else{var e,i=this._terms.length;for(t="("+this._terms[0].toString(),e=1;e<i;e++){switch(this._operators[e-1]){case 4:t+=" - ";break;case 5:t+=" + ";break;case 18:t+=" or ";break;case 19:t+=" xor ";break;default:t+=" <<ERROR>> "}t+=this._terms[e].toString()}t+=")"}return t},e}(Et),ee=function(){function t(){this._node=null,this._capitalIndexers=null,this._lexer=new xt}return t.prototype.syntaxError=function(t,e){throw new gt(t,e)},t.prototype.expected=function(t){if(t!=this._lexer.tokenId)throw new gt("Token is not a expected kind ["+t+"]: "+this._lexer.tokenId,this._lexer.tokenLoc);this.nextToken()},t.prototype.nextToken=function(){this._lexer.nextNoSpace()},t.prototype.doExpression=function(){var t,e=null,i=this.doSimpleExpression();if(bt[t=this._lexer.tokenId]){this.nextToken();var o=this.doSimpleExpression();o.prepareValue();var r=o.getLiteral();if(!(r instanceof Rt))throw new gt("is operator's operand must be defined, null or empty: "+this._lexer.tokenId,null);e=new Mt(i,t,r)}else(e=new Ot)._leftExpr=i,(vt[this._lexer.tokenId]||32==this._lexer.tokenId)&&(e._operator=this._lexer.tokenId,this.nextToken(),e._rightExpr=this.doSimpleExpression());return e},t.prototype.doSimpleExpression=function(){var t=new te;for(t.addTerm(this.doTerm());wt[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addTerm(this.doTerm());return t},t.prototype.doTerm=function(){var t=new Qt;for(t.addFactor(this.doFactor());Ct[this._lexer.tokenId];)t.addOperator(this._lexer.tokenId),this.nextToken(),t.addFactor(this.doFactor());return t},t.prototype.doFactor=function(){var t=this._lexer.tokenId;switch(t){case 61:return this.doCharString();case 66:return this.doRoundOpen();case 10:return this.doIdentifier();case 64:return this.doInteger();case 63:return this.doNumber();case 4:return this.doMinus();case 5:return this.doPlus();case 13:return this.doNot();case 35:return this.doDefined();case 34:return this.doNull();case 36:return this.doEmpty();case 37:return this.doNaN();case 23:return this.doToBool();case 21:return this.doToNumber();case 20:return this.doToString();case 24:return this.doLength();case 90:return this.doToDateString();case 91:return this.doToYear();case 92:return this.doToMonth();case 93:return this.doToDay();case 94:return this.doToHour();case 95:return this.doRoundDown()}throw new gt("Unkown token: "+t,this._lexer.tokenLoc)},t.prototype.doCharString=function(){var t=this._lexer.token;return this.nextToken(),new Nt(t)},t.prototype.doRoundOpen=function(){this.nextToken();var t=this.doExpression();return this.expected(67),t},t.prototype.doIdentifier=function(){var t=this._lexer.token;if(this.nextToken(),69==this._lexer.tokenId){this.nextToken();var e=this.doExpression();return this.expected(70),new Bt(t,e,this._capitalIndexers.indexOf(t)>=0)}return new Vt(t)},t.prototype.doNumber=function(){var t=this._lexer.token;return this.nextToken(),new Lt(t)},t.prototype.doInteger=function(){var t=this._lexer.token;return this.nextToken(),new Ft(t)},t.prototype.doMinus=function(){return this.nextToken(),new jt(this.doFactor())},t.prototype.doPlus=function(){return this.nextToken(),new Ht(this.doFactor())},t.prototype.doNot=function(){return this.nextToken(),new Wt(this.doFactor())},t.prototype.doDefined=function(){return this.nextToken(),new Dt},t.prototype.doNull=function(){return this.nextToken(),new Pt},t.prototype.doEmpty=function(){return this.nextToken(),new kt},t.prototype.doNaN=function(){return this.nextToken(),new Tt},t.prototype.doToBool=function(){return this.nextToken(),new Gt(this.doFactor())},t.prototype.doToNumber=function(){return this.nextToken(),new Ut(this.doFactor())},t.prototype.doToString=function(){return this.nextToken(),new zt(this.doFactor())},t.prototype.doLength=function(){return this.nextToken(),new At(this.doFactor())},t.prototype.doToDateString=function(){return this.nextToken(),new Yt(this.doFactor())},t.prototype.doToYear=function(){return this.nextToken(),new qt(this.doFactor())},t.prototype.doToMonth=function(){return this.nextToken(),new Kt(this.doFactor())},t.prototype.doToDay=function(){return this.nextToken(),new Xt(this.doFactor())},t.prototype.doToHour=function(){return this.nextToken(),new Zt(this.doFactor())},t.prototype.doRoundDown=function(){return this.nextToken(),new Jt(this.doFactor())},t.prototype.parse=function(t,e){if(t){this._capitalIndexers=e||[],this._lexer.init(t),this.nextToken();var i=this.doExpression();return i&&i.prepareValue(),this._lexer.clear(),this._capitalIndexers=null,i}return null},t.prototype.evaluate=function(t,e,i){return this.parse(t,i).evaluate(e)},t.Default=new t,t}(),ie=["value","values"],oe=function(t){function e(e,i,o){void 0===i&&(i=r.TEXT),void 0===o&&(o=0);var n=t.call(this)||this;return n._index=-1,n._dataType=r.TEXT,n._subType=null,n._runType=r.TEXT,n._length=0,n._subTypeEnabled=!0,n._required=!1,n._updatable=!0,n._ranged=!1,n._runSet=null,n._typeLock=!1,n._objectKey=null,n._objectCallback=null,e&&(n.fieldName=e),null!=i&&(i===r.DATE&&(i=r.DATETIME,n._subType=r.DATE,n._subTypeEnabled=!0),n._dataType=i),n._length=o,n}return o(e,t),Object.defineProperty(e.prototype,"hash",{get:function(){return this._fieldName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){if(!(t=t&&t.trim()))throw new Error("Field name must be exists.");t!=this._orgFieldName&&(this._orgFieldName=t,this._orgAttrName="@"+t,this._fieldName=t.toUpperCase(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orgFieldName",{get:function(){return this._orgFieldName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"orgAttrName",{get:function(){return this._orgAttrName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataType",{get:function(){return this._dataType},set:function(t){t!=this._dataType&&(this._dataType=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"runType",{get:function(){return this._runType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subType",{get:function(){return this._subType},set:function(t){(t=t||null)!=this._subType&&(this._subType=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){t!=this._subTypeEnabled&&(this._subTypeEnabled=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseField",{get:function(){return this._baseField},set:function(t){t!=this._orgBaseField&&(this._orgBaseField=t,this._baseField=t&&t.toUpperCase(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._length},set:function(t){(t=t||0)!=this._length&&(this._length=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"set",{get:function(){return this._set},set:function(t){t!==this._set&&(this._set=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this.resetTypes(),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._header},set:function(t){t!=this._header&&(this._header=t,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(t){t!=this._defaultValue&&(this._defaultValue=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nullValue",{get:function(){return this._nullValue},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new ut(t):null,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,t?(this._dateParser=new dt(t),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=null,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this._dateParser&&(this._dateParser.amText=t),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this._dateParser&&(this._dateParser.pmText=t),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){t!=this._baseYear&&(this._baseYear=t,this._dateParser&&(this._dateParser.baseYear=t),this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueExpression",{get:function(){return this._valueExpression},set:function(t){t!=this._valueExpression&&(this._valueExpression=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!=this._valueCallback&&(this._valueCallback=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectKey",{get:function(){return this._objectKey},set:function(t){this._objectKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectCallback",{get:function(){return this._objectCallback},set:function(t){this._objectCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"calculated",{get:function(){return!!this._valueExpression||!!this._valueCallback},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updatable",{get:function(){return!this._valueExpression&&!this._valueCallback&&this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t)},enumerable:!0,configurable:!0}),e.prototype.isEmpty=function(t){var e=null==t||""===t;return e||this._dataType!=r.NUMBER||(e=isNaN(t)),e},e.prototype.isNull=function(t){if(null==t)return!0;switch(this._runType){case r.TEXT:case r.CHAR:if(0==t.length)return!0;break;case r.NUMBER:case r.UNUM:case r.INT:case r.UINT:if(isNaN(t))return!0}return!1},e.prototype.equalValues=function(t,e){return this._equalValues(t,e)},e.prototype.sameValues=function(t,e){return this._sameValues(t,e)},e.prototype.readValue=function(t){return this._readValue(t)},e.prototype.getBool=function(t,e){if("boolean"==typeof e)return e;var i=e;return this._boolParser?this._boolParser.toBool(i):t.toBool(i)},e.prototype.getDate=function(t,e){return e instanceof Date?new Date(e.getTime()):"number"==typeof e?new Date(e):this._dateParser?this._dateParser.toDate(e):t.toDate(e)},e.prototype.clone=function(){var t=new e(this.fieldName,this.dataType,this.length);return t._orgFieldName=this._orgFieldName,t._orgAttrName=this._orgAttrName,t._boolParser=this._boolParser,t._dateParser=this._dateParser,t._orgBaseField=this._orgBaseField,t._baseField=this._baseField,t._defaultValue=this._defaultValue,t._valueCallback=this._valueCallback,t._valueExpression=this._valueExpression,t},e.prototype.$_resetTypes=function(t){this.resetTypes(t)},e.prototype.assignFrom=function(t){"fieldName"in t&&(this.fieldName=t.fieldName),"subType"in t&&(this._subType=t.subType),"set"in t&&(this._set=t.set instanceof Array?t.set.slice():null),"defaultValue"in t&&(this._defaultValue=t.defaultValue),"baseField"in t&&(this.baseField=t.baseField),"booleanFormat"in t&&(this.booleanFormat=t.booleanFormat),"amText"in t&&(this._amText=t.amText),"pmText"in t&&(this._pmText=t.pmText),"baseYear"in t&&(this._baseYear=t.baseYear),"header"in t&&(this._header=t.header),"datetimeFormat"in t&&(this.datetimeFormat=t.datetimeFormat),"objectKey"in t&&(this._objectKey=t.objectKey),"objectCallback"in t&&(this._objectCallback=t.objectCallback),"required"in t&&(this._required=t.required),"minimum"in t&&(this._minimum=t.minimum),"maximum"in t&&(this._maximum=t.maximum),"valueExpression"in t&&(this.valueExpression=t.valueExpression),"valueCallback"in t&&(this._valueCallback=t.valueCallback),"tag"in t&&(this._tag=t.tag)},e.prototype.$_setIndex=function(t){this._index=t},e.prototype.$_prepare=function(t){this._owner=t},e.prototype.changed=function(){this._owner},e.prototype.resetTypes=function(t){if(!this._typeLock){t&&(this._ownerBoolParser=t.boolParser,this._ownerDateParser=t.dateParser);var e=this._dataType,i=this._subType;if(this._runType=e,this._ranged=!1,(!this._owner||this._owner.subTypeEnabled)&&this._subTypeEnabled){if(i)switch(e){case r.TEXT:i==r.CHAR&&this._length>0&&(e=i);break;case r.NUMBER:i!=r.UNUM&&i!=r.INT&&i!=r.UINT||(e=i);break;case r.DATETIME:i==r.DATE&&(e=i)}if(this._runType=e,this._runSet=null,this._set&&this._set.length){if(this._runType==r.DATETIME){this._runSet=[];for(var o=0;o<this._set.length;o++){(n=this.getDate(this._ownerDateParser,this._set[o]))&&this._runSet.push(n.getTime())}this._runSet.length<1&&(this._runSet=null)}else if(this._runType==r.DATE){this._runSet=[];for(o=0;o<this._set.length;o++){var n;if(n=this.getDate(this._ownerDateParser,this._set[o])){var s=new Date(n.getDate());this._runSet.push(s.setHours(0,0,0,0))}}this._runSet.length<1&&(this._runSet=null)}else this._runSet=this._set;this._ranged=!0}if(!this._ranged)switch(this._dataType){case r.NUMBER:this._runMin=Number(this._minimum),this._runMax=Number(this._maximum),isNaN(this._runMin)||isNaN(this._runMax)?this._ranged=!isNaN(this._runMin)||!isNaN(this._runMax):this._ranged=this._runMin<=this._runMax;break;case r.DATETIME:case r.DATE:this._runMin=this.getDate(this._ownerDateParser,this._minimum),this._runMax=this.getDate(this._ownerDateParser,this._maximum),this._runMin&&this._runMax?this._ranged=this._runMin.getTime()<=this._runMax.getTime():this._ranged=this._runMin||this._runMax}switch(this._runType){case r.TEXT:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readTextValue,this._nullValue=null;break;case r.CHAR:this._equalValues=this.equalTextValues,this._sameValues=this.sameTextValues,this._readValue=this.readCharValue,this._nullValue=null;break;case r.NUMBER:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readNumberValue,this._nullValue=NaN;break;case r.UNUM:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUnumValue,this._nullValue=NaN;break;case r.INT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readIntValue,this._nullValue=NaN;break;case r.UINT:this._equalValues=this.equalNumberValues,this._sameValues=this.sameNumberValues,this._readValue=this.readUintValue,this._nullValue=NaN;break;case r.DATETIME:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDatetimeValue,this._nullValue=null;break;case r.DATE:this._equalValues=this.equalDateValues,this._sameValues=this.sameDateValues,this._readValue=this.readDateValue,this._nullValue=null;break;case r.BOOLEAN:this._equalValues=this.equalBoolValues,this._sameValues=this.sameBoolValues,this._readValue=this.readBooleanValue,this._nullValue=!1;break;case r.OBJECT:this._equalValues=this.equalObjectValues,this._sameValues=this.sameObjectValues,this._readValue=this.readObjectValues,this._nullValue=!1;break;default:this._equalValues=this.equalDummyValues,this._sameValues=this.sameDummyValues,this._readValue=this.readDummyValue,this._nullValue=void 0}}}},e.prototype.$_refreshFormats=function(t){this._owner=t,this._dateParser&&(this._dateParser.baseYear||(this._dateParser.baseYear=t.baseYear),this._dateParser.amText||(this._dateParser.amText=t.amText),this._dateParser.pmText||(this._dateParser.pmText=t.pmText)),this._ownerBoolParser=t.boolParser,this._ownerDateParser=t.dateParser},e.prototype.equalDummyValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},e.prototype.sameDummyValues=function(t,e){return null==t?null==e:null!=e&&t==e},e.prototype.equalTextValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&t==e},e.prototype.sameTextValues=function(t,e){return null==t||""==t?null==e||""==e:null!=e&&""!=e&&t==e},e.prototype.equalNumberValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(isNaN(t)?isNaN(e):!isNaN(e)&&t==e)},e.prototype.sameNumberValues=function(t,e){return isNaN(t)?isNaN(e):!isNaN(e)&&t==e},e.prototype.equalDateValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&(t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date))},e.prototype.sameDateValues=function(t,e){return t instanceof Date?e instanceof Date&&t.getTime()==e.getTime():!(e instanceof Date)},e.prototype.equalBoolValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&Boolean(t)==Boolean(e)},e.prototype.sameBoolValues=function(t,e){return void 0===t?void 0===e:void 0!==e&&Boolean(t)==Boolean(e)},e.prototype.equalObjectValues=function(t,e){return void 0===t||void 0===e?void 0===t==(void 0===e):JSON.stringify(t)===JSON.stringify(e)},e.prototype.sameObjectValues=function(t,e){return null==t||null==e?null==t&&null==e:JSON.stringify(t)===JSON.stringify(e)},e.prototype.readDummyValue=function(t){return t},e.prototype.readTextValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},e.prototype.readCharValue=function(t){if(void 0===t)return t;var e=null===t?null:String(t);return e&&(e=e.substr(0,this._length)),this._ranged&&this._runSet&&this._runSet.indexOf(e)<0?void 0:e},e.prototype.readNumberValue=function(t){if(null!=t&&""!==t){var e=Number(t);if(this._ranged)if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));return e}},e.prototype.readUnumValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Number(t));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,e)}return e}},e.prototype.readIntValue=function(t){if(null!=t&&""!==t){var e=t>=0?Math.floor(t):Math.ceil(t);if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=e>=0?Math.floor(e):Math.ceil(e)}return e}},e.prototype.readUintValue=function(t){if(null!=t&&""!==t){var e=Math.max(0,Math.floor(Math.floor(t)));if(this._ranged){if(this._runSet){if(this._runSet.indexOf(e)<0)return}else isNaN(this._runMin)||(e=Math.max(this._runMin,e)),isNaN(this._runMax)||(e=Math.min(this._runMax,e));e=Math.max(0,Math.floor(Math.floor(e)))}return e}},e.prototype.readDatetimeValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&this._ranged)if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},e.prototype.readDateValue=function(t){if(void 0!==t){if(null===t)return this._nullValue;var e=this.getDate(this._ownerDateParser,t);if(e&&(e.setHours(0,0,0,0),this._ranged))if(this._runSet){for(var i=!1,o=this._runSet.length;o--;)if(e.getTime()==this._runSet[o]){i=!0;break}if(!i)return}else this._runMin&&e.getTime()<this._runMin.getTime()&&(e=new Date(this._runMin)),this._runMax&&e.getTime()>this._runMax.getTime()&&(e=new Date(this._runMax));return e}},e.prototype.readBooleanValue=function(t){return void 0===t?t:null!==t&&this.getBool(this._ownerBoolParser,t)},e.prototype.readObjectValues=function(t){if("string"==typeof t)try{t=JSON.parse(t)}catch(e){throw new Error("Invalid Object String "+e+"\r\n"+t)}else if("object"!=typeof t)try{t=JSON.parse(t)}catch(t){}return lt.deepCopy(t)},e.prototype.$_compareObject=function(t,e,i,o){var r=this._objectKey,n=this._objectCallback,s=n?n(this.orgFieldName,i,t):r&&t.hasOwnProperty(r)?t[r]:null,a=n?n(this.orgFieldName,o,e):r&&e.hasOwnProperty(r)?e[r]:null;return s>a?1:s<a?-1:0},e.prototype.$_calculateValue=function(t,e,i,o,r,n,s){return this._valueCallback?this._valueCallback(t.handler,i,o,n,s):this._valueExpression?(this._exprNode||(this._exprNode=ee.Default.parse(this._valueExpression,ie)),e.setValues(s,r),this._exprNode.evaluate(e)):void 0},e}(ft);!function(t){t.NONE="none",t.EXPLICIT="explicit",t.AUTO="auto"}(pt||(pt={}));var re,ne=function(t){function e(){var e=t.call(this)||this;return e._values=null,e._fields=null,e._fieldCount=0,e}return o(e,t),e.prototype.setValues=function(t,e){this._values=t,this._fields=e,this._fieldCount=e?e.length:0},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){throw new yt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(this._values){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new yt("Data field index out of bounds:"+i);return this._values[i]}throw new yt("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new yt("Invalid identifier indexer: "+t);if(this._values&&this._fields){var r=this._fields.indexOf(i);if(r<0||r>=this._fieldCount)throw new yt("Data field is not exists:"+i);return this._values[r]}},e.ID_VALUE=0,e.ID_VALUES=1,e.IDENTS={value:e.ID_VALUE,values:e.ID_VALUES},e}(It),se=function(t){function e(){var e=t.call(this)||this;return e._listeners=[],e}return o(e,t),e.prototype._doDispose=function(){return this._listeners=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"listenerCount",{get:function(){return this._listeners.length},enumerable:!0,configurable:!0}),e.prototype.addListener=function(t,e){return null!=t&&this._listeners&&this._listeners.indexOf(t)<0&&(null!=e&&e>=0?this._listeners.splice(e,0,t):this._listeners.push(t)),this},e.prototype.removeListener=function(t){if(null!=t&&this._listeners){var e=this._listeners.indexOf(t);e>=0&&this._listeners.splice(e,1)}return this},e.prototype.clearListener=function(){this._listeners.length=0},e.prototype.fireEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=Array.prototype.slice.call(arguments,0);o[0]=this;for(var r=0,n=this._listeners.length;r<n;r++){var s=this._listeners[r],a=s[t];a&&a.apply(s,o)}},e.prototype.fireConfirmEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=Array.prototype.slice.call(arguments,0);o[0]=this;for(var r=0,n=this._listeners.length;r<n;r++){var s=this._listeners[r],a=s[t];if(a){var l=a.apply(s,o);if("boolean"==typeof l&&!l)return!1}}return!0},e.prototype.fireMessageEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=Array.prototype.slice.call(arguments,0);o[0]=this;for(var r=0,n=this._listeners.length;r<n;r++){var s=this._listeners[r],a=s[t];if(a){var l=a.apply(s,o);if("string"==typeof l&&l)return l}}return null},e.prototype.fireObjectEvent=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];var o=Array.prototype.slice.call(arguments,0);o[0]=this;for(var r=0,n=this._listeners.length;r<n;r++){var s=this._listeners[r],a=s[t];if(a){var l=a.apply(s,o);if(null!=l)return l}}return null},e}(ft),ae=["yy","yyyy","M","MM","d","dd","a","H","HH","h","hh","m","mm","s","ss","S","SS","SSS"],le=[".","/","-",":"],he="Z".charCodeAt(0),ue="z".charCodeAt(0),ce="A".charCodeAt(0),de="a".charCodeAt(0),pe="y".charCodeAt(0),_e="M".charCodeAt(0),fe="m".charCodeAt(0),ge="d".charCodeAt(0),ye="H".charCodeAt(0),me="h".charCodeAt(0),be="S".charCodeAt(0),ve="s".charCodeAt(0),we=function(t){return t<10?"0"+t:String(t)},Ce=function(t){return t<10?"00"+t:t<100?"0":String(t)},xe=function(){function t(t){this._hasAmPm=!1,this.format=t}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t,"Default",{get:function(){return t.getFormatter(t.DEFAULT_FORMAT)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(e){(e=e||t.DEFAULT_FORMAT)!=this._format&&(this._tokens=[],this.parse(e),this._format=e)},enumerable:!0,configurable:!0}),t.prototype.getText=function(t){if(!this._tokens)return"";for(var e=t instanceof Date?t:new Date(t),i=this._tokens,o="",r=0,n=i.length;r<n;r++){var s=i[r],a=s.length;switch(s.charCodeAt(0)){case pe:o+=a>2?e.getFullYear():we(e.getFullYear()%100);break;case _e:o+=a>1?we(e.getMonth()+1):e.getMonth()+1;break;case ge:o+=a>1?we(e.getDate()):e.getDate();break;case ye:o+=a>1?we(e.getHours()):e.getHours();break;case me:if(this._hasAmPm){var l=e.getHours();0==l?l=12:l>12&&(l-=12),o+=a>1?we(l):l}else o+=a>1?we(e.getHours()):e.getHours();break;case fe:o+=a>1?we(e.getMinutes()):e.getMinutes();break;case ve:o+=a>1?we(e.getSeconds()):e.getSeconds();break;case de:case ce:e.getHours()<12?o+=this._amText:o+=this._pmText;break;case be:var h=e.getMilliseconds();o+=3==a?Ce(h):2==a?we(h):h.toString().substr(0,a);break;default:o+=s}}return o},t.prototype.parseDateFormatTokens=function(t){var e=[];if(t)for(var i=t.trim(),o=i.length,r=0;r<o;){var n=i.charAt(r);if(le.indexOf(n)>=0)e.push(n),r++;else{for(var s=r++;r<o&&i.charAt(r)==n;)r++;if(n=i.substring(s,r),ae.indexOf(n)<0){var a=n.charCodeAt(0);if(a>=ce&&a<=he||a>=de&&a<=ue)throw new Error("Invalid datetime write format: "+t)}e.push(n)}if(r<o&&lt.isWhiteSpace(n=i.charAt(r)))for(e.push(n);r<o&&lt.isWhiteSpace(i.charAt(r));)r++}return e},t.prototype.parse=function(e){if(this._amText="AM",this._pmText="PM",e){var i=e.split(";");if(this._format=i[0]||t.DEFAULT_FORMAT,this._tokens=this.parseDateFormatTokens(this._format),this._hasAmPm=this._tokens.indexOf("a")>=0||this._tokens.indexOf("A")>=0,i.length>1&&i[1]){var o=i[1].split(",");o.length>0&&o[0]&&(this._amText=o[0]),o.length>1&&o[1]&&(this._pmText=o[1])}}},t.DEFAULT_FORMAT="yyyy/MM/dd",t.Formatters={},t}(),Ie=function(){function t(t){this.$_parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!0,configurable:!0}),t.prototype.formatValue=function(t){return void 0===t?this._nullText:t?this._trueText:this._falseText},t.prototype.$_parse=function(t){if(this._falseText=this._trueText=null,t){var e=t.split(/[;\:]/);this._falseText=e[0],e.length>0&&(this._trueText=e[1]),e.length>1&&(this._nullText=e[2])}},t.Formatters={},t}(),Ee=function(t){return lt.included(t,"c","f","C","F","a","A")},Se=function(){function t(t){this._groupPos=0,this._replacement="$&,",this.parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t,"Default",{get:function(){return t.getFormatter(t.DEFAULT_FORMAT)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"separator",{get:function(){return this._seperator},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupSep",{get:function(){return this._groupSep},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minDigits",{get:function(){return this._minDigits},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxDigits",{get:function(){return this._maxDigits},enumerable:!0,configurable:!0}),t.prototype.parse=function(t){this._minDigits=0,this._maxDigits=0,this._parse(t)},t.prototype.getText=function(t,e){void 0===e&&(e=!0);var i=Number(t);if(isNaN(i))return"";var o=this._minDigits,r=0;if(this._optDecimal){var n=(a=(""+i).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/))?Math.max(0,(a[1]?a[1].length:0)-(a[2]?+a[2]:0)):0;o=Math.min(Math.max(n,this._minDigits),this._maxDigits)}if(this._round)switch(r=Math.pow(10,o),this._round){case"c":i=Math.ceil(r*i)/r;break;case"f":var s=i.toString().split(".");i=parseFloat(s.length>1?s[0]+"."+s[1].substr(0,o):s[0])}i="a"===this._round?Math.abs(i):i;var a,l=(i=Number(i.toPrecision(15))).toFixed(o);try{!e&&(r=parseFloat(l))===Math.abs(parseFloat(l))&&0===r&&(l=Math.abs(i).toFixed(o))}catch(t){}return this._seperator&&(l=l.replace(".",this._seperator)),this._reg?o?l.replace(this._regDecimal,this._replacement):l.replace(this._reg,this._replacement):l},t.prototype._parse=function(t){if(t&&(t=t.trim()),t){var e=".",i=",";if(t.indexOf(";")>-1){var o=t.split(";");t=o[0],o.length>1&&o[1]&&!Ee(o[1])&&(e=o[1]),o.length>2&&o[2]&&!Ee(o[2])&&(i=o[2]),this._round=o[3]||o[2]||o[1],this._round=Ee(this._round)?this._round.toLowerCase():this._round}this._seperator="."==e?null:e,this._groupSep=","==i?null:i;var r=t.length,n=t.indexOf(".");if(this._optDecimal=t.indexOf("#",n)>0,n>=0){for(var s=n+1;s<r&&"0"==t.charAt(s);s++)this._minDigits++,this._maxDigits++;for(;s<r&&"#"==t.charAt(s);s++)this._maxDigits++;t=t.substr(0,n)}if(t){var a=t.length;","==t.charAt(a-1)&&(this._groupPos=3,t=t.substr(0,a-1))}if(t){var l=t.length,h=!0;for(s=l-1;s>=0;s--){var u=t.charAt(s);if("0"==u&&h);else if(0==this._groupPos&&","==u)this._groupPos=l-s-1;else{if("#"!=u)break;h=!1}}}this._groupPos>0&&(this._replacement="$&"+i,this._reg=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+($|\\"+e+"))","g"),this._regDecimal=new RegExp("\\d(?=(\\d{"+this._groupPos+"})+\\"+e+")","g"))}},t.DEFAULT_FORMAT="#,##0.0",t.Formatters={},t}(),Oe=function(t){function e(e){var i=t.call(this)||this;return i._datetimeWriter=null,i._booleanFormatter=null,i._numberFormatter=null,i.assignFrom(e),i}return o(e,t),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?xe.getFormatter(t):null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?Ie.getFormatter(t):null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?Se.getFormatter(t):null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeCallback",{get:function(){return this._datetimeCallback},set:function(t){this._datetimeCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanCallback",{get:function(){return this._booleanCallback},set:function(t){this._booleanCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberCallback",{get:function(){return this._numberCallback},set:function(t){this._numberCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nullDateText",{get:function(){return this._nullDateText},set:function(t){this._nullDateText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nullText",{get:function(){return this._nullText},set:function(t){this._nullText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nanText",{get:function(){return this._nanText},set:function(t){this._nanText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowState",{get:function(){return this._rowState},set:function(t){this._rowState=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormatter",{get:function(){return this._booleanFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!0,configurable:!0}),e}(ft),Re=function(){function t(){}return t.prototype.compare=function(t,e,i){return t.dataType==r.NUMBER?Number(e)-Number(i):e>i?1:e<i?-1:0},t}(),De=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(Error),ke=function(t){function e(){return t.call(this,"Client is editing (call grid.commit() or grid.cancel() first)")||this}return o(e,t),e}(Error),Pe=function(t){function e(){var e=t.call(this)||this;return e._subTypeEnabled=!0,e._undoable=!1,e._insertable=!0,e._updatable=!0,e._deletable=!0,e._softDeleting=!1,e._deleteCreated=!1,e._checkStates=!0,e._restoreMode=pt.NONE,e._strictRestore=!1,e._booleanFormat=null,e._datetimeFormat=null,e._baseYear=2e3,e._amText="AM",e._pmText="PM",e._alertClientError=!0,e._throwClientError=!1,e._commitBeforeDataEdit=!1,e._fields=[],e._calcFields=[],e._fieldNames=[],e._fieldMap={},e._defComparer=new Re,e._comparers=[],e._boolParser=ut.Default,e._dateParser=dt.Default,e._eventLock=0,e._resetLock=0,e._countLock=0,e._clients=[],e}return o(e,t),e.prototype._doDispose=function(){try{this.$_internalClearFields(),this._fieldMap=null}catch(t){}this._fields=null,this._calcFields=null,this._fieldNames=null,this._fieldMap=null,this._boolParser=this._dateParser=null,this._comparers=null,this._clients=null,this._defComparer=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"subTypeEnabled",{get:function(){return this._subTypeEnabled},set:function(t){if(t!=this._subTypeEnabled){this._subTypeEnabled=t;for(var e=0,i=this._fields;e<i.length;e++){i[e].$_resetTypes()}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoable",{get:function(){return this._undoable},set:function(t){this._undoable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"insertable",{get:function(){return this._insertable},set:function(t){this._insertable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updatable",{get:function(){return this._updatable},set:function(t){this._updatable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deletable",{get:function(){return this._deletable},set:function(t){this._deletable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"softDeleting",{get:function(){return this._softDeleting},set:function(t){this._softDeleting=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deleteCreated",{get:function(){return this._deleteCreated},set:function(t){this._deleteCreated=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkStates",{get:function(){return this._checkStates},set:function(t){t!=this._checkStates&&(this._checkStates=t,this._doCheckStatesChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"restoreMode",{get:function(){return this._restoreMode},set:function(t){if(t!=this._restoreMode){var e=this._restoreMode;this._restoreMode=t,this._doRestoreModeChanged(e,t)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strictRestore",{get:function(){return this._strictRestore},set:function(t){this._strictRestore=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolParser=t?new ut(t):ut.Default)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this.$_createDateReader())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseYear",{get:function(){return this._baseYear},set:function(t){this._baseYear=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amText",{get:function(){return this._amText},set:function(t){t!=this._amText&&(this._amText=t,this.$_createDateReader())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pmText",{get:function(){return this._pmText},set:function(t){t!=this._pmText&&(this._pmText=t,this.$_createDateReader())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alertClientError",{get:function(){return this._alertClientError},set:function(t){this._alertClientError=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"throwClientError",{get:function(){return this._throwClientError},set:function(t){this._throwClientError=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeDataEdit",{get:function(){return this._commitBeforeDataEdit},set:function(t){this._commitBeforeDataEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"calculateRuntime",{get:function(){return this._calculateRuntime||(this._calculateRuntime=new ne),this._calculateRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"local",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"immediateUpdate",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summarized",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldCount",{get:function(){return this._fields.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boolParser",{get:function(){return this._boolParser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateParser",{get:function(){return this._dateParser},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventLocked",{get:function(){return this._eventLock>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canUndo",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redoing",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.registerClient=function(t){t&&this._clients.indexOf(t)<0&&this._clients.push(t)},e.prototype.unregisterClient=function(t){if(t){var e=this._clients.indexOf(t);e>=0&&this._clients.splice(e,1)}},e.prototype.cancelClients=function(){for(var t=0,e=this._clients;t<e.length;t++){e[t].cancelDataEditing()}},e.prototype.commitClients=function(){for(var t=0,e=this._clients;t<e.length;t++){e[t].commitDataEditing()}},e.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},e.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(this._resetLock>0?this._fireReset():this._fireRefresh(),this._countLock>0&&this._fireRowCountChanged()),this._resetLock=this._countLock=0)},e.prototype.addField=function(t,e,i){if(this._checkClientState()){var o=null;this.beginUpdate();try{(o=this.$_internalAddField(t))&&o.$_resetTypes(this)}finally{e&&this._doFieldsReset(),this.endUpdate()}return o}},e.prototype.clearFields=function(){this._checkClientState()&&this._fields.length>0&&(this.$_internalClearFields(),this._doFieldsReset())},e.prototype.setFields=function(t){if(this._checkClientState()){this.beginUpdate();try{if(this.$_internalClearFields(),t)for(var e=0,i=t.length;e<i;e++){var o=this.$_internalAddField(t[e]);o&&o.$_resetTypes(this)}}finally{this.endUpdate(),this._doFieldsReset()}}},e.prototype.getField=function(t){return this._fields[t]},e.prototype.getFields=function(){return this._fields.slice()},e.prototype.fieldByName=function(t){if(t)for(var e=t.toUpperCase(),i=0,o=this._fields;i<o.length;i++){var r=o[i];if(r.fieldName==e)return r}return null},e.prototype.getFieldNames=function(){var t,e=this._fields.length,i=[];for(t=0;t<e;t++)i.push(this._fields[t].fieldName);return i},e.prototype.getOrgFieldNames=function(){var t,e=this._fields.length,i=[];for(t=0;t<e;t++)i.push(this._fields[t].orgFieldName);return i},e.prototype.getFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].fieldName},e.prototype.getOrgFieldName=function(t){return this._checkFieldIndex(t),this._fields[t].orgFieldName},e.prototype.getFieldIndex=function(t){if("number"==typeof t)return t;if(t){var e=t.toUpperCase();if(e in this._fieldMap)return this._fieldMap[e]}return-1},e.prototype.getFieldIndexC=function(t){return t in this._fieldMap?this._fieldMap[t]:-1},e.prototype.getBaseField=function(t){return t>=0&&t<this._fields.length?this.getFieldIndex(this._fields[t].baseField):-1},e.prototype.getValueType=function(t){return this._fields[t].dataType},e.prototype.getDefaultValue=function(t){return this._fields[t].defaultValue()},e.prototype.hasData=function(t){return!1},e.prototype.objectToRow=function(t){var e=[];if(t)for(var i=0,o=this.fieldCount;i<o;i++){var r=this.getOrgFieldName(i);t.hasOwnProperty(r)&&(e[i]=t[r])}return e},e.prototype.canUpdateField=function(t,e){if(e>=0&&e<this._fields.length){if(!this._fields[e].updatable&&t>=0)try{var i=this.getRowState(t);return!i||i==at.CREATED||i==at.CREATE_AND_DELETED}catch(t){return!1}return!0}return!1},e.prototype.getDataComparer=function(t){if(t>=0){var e=this._comparers[t];return e||null}},e.prototype.setDataComparer=function(t,e){this._comparers[t]=e||void 0},e.prototype.canSummarize=function(t){if(t>=0&&t<this.fieldCount){var e=this.getValueType(t);if(e==r.BOOLEAN||e==r.NUMBER||r.DATE)return!0}return!1},e.prototype.getDistinctValues=function(t,e,i){return void 0===i&&(i=n.ASCENDING),null},e.prototype.exportToJson=function(){},e.prototype.exportToCsv=function(t){},e.prototype.exportToXml=function(){},e.prototype.canUpdateRow=function(t){return!1},e.prototype.canAppendRow=function(){return!1},e.prototype.canInsertRow=function(t){return!1},e.prototype.canDeleteRow=function(t){return!1},e.prototype.undo=function(){},e.prototype.redo=function(){},e.prototype.clearCommandStack=function(){},e.prototype._convertValues=function(t,e){var i="*"in e&&"*"==e["*"]?t:{};for(var o in e)i[e[o]]=t[o];return i},e.prototype.getClientsBusy=function(){var t={busy:!1,cnt:0,client:null};if(this.disposing)return t;for(var e=this._clients.length;e--;)this._clients[e].isDataEditing()&&(t.busy=!0,t.cnt++,t.client=this._clients[e]);return t},e.prototype._checkClientState=function(){if(this.getClientsBusy().busy){if(this._throwClientError)throw new ke;return this._alertClientError&&lt.alert((new ke).message),!1}return!0},e.prototype._checkFieldIndex=function(t){if(t<0||t>=this._fields.length)throw new De("Invalid field index: "+t)},e.prototype.$_internalClearFields=function(){this._checkClientState();for(var t=0,e=this._fields;t<e.length;t++){e[t].$_setIndex(-1)}this._fields.splice(0,this._fields.length),this._calcFields.splice(0,this._calcFields.length),this._fieldNames.splice(0,this._fieldNames.length),this._fieldMap={}},e.prototype.$_internalInsertField=function(t,e){this._checkClientState();var i=this._fields.length;if(t<0||t>i)throw lt.isDebugging(),new De("index is out of bounds:"+t);if(e){e.$_prepare(this),this._fields.splice(t,0,e),this._fieldNames.splice(t,0,e.fieldName),e.calculated&&this._calcFields.push(e),e.$_setIndex(t),this._fieldMap[e.fieldName]=t;for(var o=t+1;o<=i;o++)(e=this._fields[o]).$_setIndex(o),this._fieldMap[e.fieldName]=o;return t}return-1},e.prototype.$_addField=function(t,e,i,o){if(!t)throw new De("fieldName must be exists.");if(this.getFieldIndex(t)>=0)throw new De("fieldName is already exists: "+t);var r=new oe(t,e,i);return o&&r.assignFrom(o),this.$_internalInsertField(this._fields.length,r),r},e.prototype.$_internalAddField=function(t){var e=null;return"string"==typeof t?e=this.$_addField(t,r.TEXT,0):t instanceof oe?(e=t.clone(),this.$_internalInsertField(this._fields.length,e)):t&&(e=this.$_addField(t.fieldName,t.dataType||r.TEXT,t.length,t)),e},e.prototype._internalCalculateValues=function(t,e){var i=this._calcFields;if(i.length>0){for(var o=[],r=0;r<t.length;r++)o[r]=this.getField(r).readValue(t[r]);r=0;for(var n=i.length;r<n;r++){var s=i[r],a=this._fieldMap[s.fieldName];t[a]=o[a]=s.readValue(s.$_calculateValue(this,this.calculateRuntime,e,s.orgFieldName,this._fieldNames,this.getOrgFieldNames(),o))}}},e.prototype.refreshFieldFormats=function(){for(var t=0,e=this._fields;t<e.length;t++){e[t].$_refreshFormats(this)}},e.prototype.refreshFieldFormat=function(t){t&&t.$_refreshFormats(this)},e.prototype._getRowValues=function(){return new Array(this.fieldCount)},e.prototype.$_createOutputRows=function(t,e,i){void 0===i&&(i=0);var o=this.fieldCount,n=t.length;e instanceof Oe||(e=new Oe(e));var s=e.nullDateText,a=e.nullText,l=e.nanText;try{for(var h=0;h<o;h++){var u=this.getField(h),c=u.dataType,d=u.orgFieldName,p=void 0,_=void 0,f=void 0,g=void 0,y=void 0,m=void 0;if(c==r.DATETIME&&((p=e.datetimeCallback)||(g=e.datetimeWriter)||s))if(p)for(var b=0;b<n;b++){(C=t[b])[d]=p(this.handler,b+i,d,C[d])}else for(b=0;b<n;b++){var v=(C=t[b])[d];C[d]=v?g?g.getText(C[d]):v:s}else if(c==r.BOOLEAN&&((_=e.booleanCallback)||(y=e.booleanFormatter)))if(_)for(b=0;b<n;b++){(C=t[b])[d]=_(this.handler,b+i,d,C[d])}else for(b=0;b<n;b++){(C=t[b])[d]=y.formatValue(C[d])}else if(c==r.NUMBER&&((f=e.numberCallback)||(m=e.numberFormatter)||l))if(f)for(b=0;b<n;b++){(C=t[b])[d]=f(this.handler,b+i,d,C[d])}else for(b=0;b<n;b++){var w=(C=t[b])[d];C[d]=null==w||isNaN(w)?l:m?m.getText(w):w}else if(null!=a&&null!=a)for(b=0;b<n;b++){var C,x=(C=t[b])[d];C[d]=null==x||null==x?a:x}}}finally{e&&e.dispose()}},e.prototype.$_sortRows=function(t,e,i,o,r){do{var n=o,s=r,a=t[Math.floor((o+r)/2)];do{for(;n<=s&&!(i(e,a,t[n])<=0);)n++;for(;n<=s&&!(i(e,a,t[s])>=0);)s--;if(n<=s){if(n!=s){var l=t[n];t[n]=t[s],t[s]=l}n++,s--}}while(n<=s);o<s&&this.$_sortRows(t,e,i,o,s),o=n}while(o<r)},e.prototype.$_createDateReader=function(){this._datetimeFormat?(this._dateParser=new dt(this._datetimeFormat),this._dateParser.amText=this._amText,this._dateParser.pmText=this._pmText,this._dateParser.baseYear=this._baseYear):this._dateParser=dt.Default},e.prototype._doCheckStatesChanged=function(){},e.prototype._doRestoreModeChanged=function(t,e){},e.prototype._doFieldsReset=function(){},e.prototype._refreshClients=function(){},e.prototype._fireReset=function(){},e.prototype._fireRowCountChanged=function(){},e.prototype._fireRefresh=function(){},e.prototype._fireCommandStackChanged=function(t,i){this._eventLock<=0&&this.fireEvent(e.COMMAND_STACK_CHANGED,t,i)},e.COMMAND_STACK_CHANGED="onDataSourceCommandStackChanged",e}(se),Te=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.connect=function(t){},e.prototype.disconnect=function(){},e.prototype.clearRows=function(){},e.prototype.setRows=function(){},e.prototype.setRowCount=function(t){},e.prototype.insertRow=function(t){},e.prototype.insertRows=function(t,e){},e.prototype.removeRow=function(t){},e.prototype.removeRows=function(t){},e.prototype.updateRow=function(t){},e.prototype.updateRows=function(t,e){},e.prototype.updateRowList=function(t){},e.prototype.setValue=function(t,e){},e.prototype.moveRow=function(t,e){},e.prototype.moveRows=function(t,e,i){},e.prototype.moveRowList=function(t,e){},e.prototype.changeStates=function(t){},e}(ft),Me=function(t){function e(e){var i=t.call(this)||this;return i._tags=[],i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){this._owner=null,this._tags=null,t.prototype._doDispose.call(this)},e.prototype.add=function(t){null!=this._tags&&t&&this._tags.indexOf(t)<0&&(this._tags.push(t),t.connect(this._owner))},e.prototype.remove=function(t){if(null!=this._tags&&t){var e=this._tags.indexOf(t);e>=0&&(this._tags.splice(e,1),t.disconnect())}},e.prototype.clearRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++){e[t].clearRows()}},e.prototype.setRows=function(){if(null!=this._tags)for(var t=0,e=this._tags;t<e.length;t++){e[t].setRows()}},e.prototype.setRowCount=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].setRowCount(t)}},e.prototype.insertRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].insertRow(t)}},e.prototype.insertRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].insertRows(t,e)}},e.prototype.removeRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].removeRow(t)}},e.prototype.removeRows=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].removeRows(t)}},e.prototype.updateRow=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].updateRow(t)}},e.prototype.updateRows=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].updateRows(t,e)}},e.prototype.updateRowList=function(t){if(null!=this._tags)for(var e=0,i=this._tags;e<i.length;e++){i[e].updateRowList(t)}},e.prototype.setValue=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].setValue(t,e)}},e.prototype.moveRow=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].moveRow(t,e)}},e.prototype.moveRows=function(t,e,i){if(null!=this._tags)for(var o=0,r=this._tags;o<r.length;o++){r[o].moveRows(t,e,i)}},e.prototype.moveRowList=function(t,e){if(null!=this._tags)for(var i=0,o=this._tags;i<o.length;i++){o[i].moveRowList(t,e)}},e}(ft),Le=function(){function t(t){this._active=!1,this._exprNode=null,this.criteria=t}return t.prototype.dispose=function(){this._exprNode=null},Object.defineProperty(t.prototype,"criteria",{get:function(){return this._criteria},set:function(e){e!=this._criteria&&(this._criteria=e,this._exprNode=e?ee.Default.parse(e,t.CAPITAL_INDEXERS):null)},enumerable:!0,configurable:!0}),t.prototype.select=function(t,e,i){return!this._exprNode||(t.setRow(e,i),this._exprNode.evaluate(t))},t.CAPITAL_INDEXERS=["value","values","len"],t}(),Fe=function(){function t(e,i){this._filterMode=t.FILTER_AND,this._or=!1,this.load(e),i&&(this.filterMode=i)}return t.prototype.dispose=function(){return this._filters&&this._filters.forEach((function(t,e){t.dispose()})),this._filters=null,null},Object.defineProperty(t.prototype,"filterMode",{get:function(){return this._filterMode},set:function(e){var i=e?e.toLocaleLowerCase():e;i!=this._filterMode&&(this._filterMode=i,this._or=this._filterMode==t.FILTER_OR)},enumerable:!0,configurable:!0}),t.prototype.load=function(t){if(!t||t instanceof Array||(t=[t]),this._filters=[],t instanceof Array)for(var e=0,i=t.length;e<i;e++){var o=null,r=t[e];r&&("string"==typeof r?o=new Le(r):r.criteria&&(o=new Le(r.criteria))),o&&this._filters.push(o)}},t.prototype.prepare=function(t,e){t.prepare(e)},t.prototype.select=function(t,e,i){var o=this._filters,r=o.length;if(this._or){for(var n=0;n<r;n++)if(1==o[n].select(t,e,i))return!0;return!1}for(n=0;n<r;n++)if(0==o[n].select(t,e,i))return!1;return!0},t.FILTER_AND="and",t.FILTER_OR="or",t}(),Ne=function(t){function e(){var e=t.call(this)||this;return e._ds=null,e._fieldCount=0,e._row=-1,e._values=null,e}return o(e,t),e.prototype._doDispose=function(){this._ds=null,t.prototype._doDispose.call(this)},e.prototype.prepare=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},e.prototype.setRow=function(t,e){this._row=t,this._values=e},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_ROW:return this._row}throw new yt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(i<0||i>=this._fieldCount)throw new yt("Data field index out of bounds:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._values[i]}throw new yt("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,o){switch(t){case e.ID_VALUE:case e.ID_VALUES:var r=this.getField(i,o);return this._values[r]}throw new yt("Invalid identifier indexer: "+t)},e.prototype.getField=function(t,e){var i=e?this._ds.getFieldIndexC(t):this._ds.getFieldIndex(t);if(i<0||i>=this._fieldCount)throw new yt("Data field is not exits:"+t);return i},e.ID_ROW=0,e.ID_VALUE=1,e.ID_VALUES=2,e.IDENTS={row:e.ID_ROW,value:e.ID_VALUE,values:e.ID_VALUES},e}(It),Ve=function(t){function e(){var e=t.call(this)||this;return e._tags=new Me(e),e._filterRuntime=new Ne,e._commandListeners=[],e}return o(e,t),e.prototype._doDispose=function(){this._tags=this._tags.dispose(),this._filters=this._filters&&this._filters.dispose(),this._filterRuntime=this._filterRuntime.dispose(),this._commandListeners=null,t.prototype._doDispose.call(this)},e.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterRuntime",{get:function(){return this._filterRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deletedCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tags",{get:function(){return this._tags},enumerable:!0,configurable:!0}),e.prototype.addTag=function(t){this._tags.add(t)},e.prototype.removeTag=function(t){this._tags.remove(t)},e.prototype.setFilterMode=function(t){this._filters&&t==this._filters.filterMode||(this._filters?this._filters.filterMode=t:this._filters=new Fe(null,t))},e.prototype.setFilters=function(t,e){!t||t instanceof Fe?(this._filters=t,this._filters&&e&&(this._filters.filterMode=e)):this._filters=new Fe(t,e)},e.prototype.getRowObject=function(t){if(t<0||t>=this.rowCount)throw new De("row is out of range: "+t);for(var e={},i=0,o=this.fieldCount;i<o;i++){var r=this.getOrgFieldName(i),n=this.getValue(t,i);e[r]=n}return e},e.prototype.objectToRow=function(t){var e=[];if(t)for(var i=0,o=this.fieldCount;i<o;i++){var r=this.getOrgFieldName(i);t.hasOwnProperty(r)&&(e[i]=t[r])}return e},e.prototype.compareValues=function(t,e,i){return 0},e.prototype.compareTexts=function(t,e,i,o){return 0},e.prototype.compareNumbers=function(t,e,i){return 0},e.prototype.compareBools=function(t,e,i){return 0},e.prototype.compareObjects=function(t,e,i){return 0},e.prototype.summarize=function(t,e){return!1},e.prototype.summarizeRange=function(t,e,i){return!1},e.prototype.copyRows=function(t,e,i,o){},Object.defineProperty(e.prototype,"hiddenCount",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.isHiddenRow=function(t){return!1},e.prototype.registerCommandListener=function(t){t&&this._commandListeners&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},e.prototype.unregisterCommandListener=function(t){var e=this._commandListeners?this._commandListeners.indexOf(t):-1;e>=0&&this._commandListeners.splice(e,1)},e.prototype.findRow=function(t,e,i){},e.prototype._doFieldsReset=function(){this._fireReset()},e.prototype._refreshClients=function(){this.fireRefreshClients()},e.prototype._keepCommandStates=function(t){if(this._commandListeners.length>0)return this._commandListeners[0].getCommandStates(t)},e.prototype._yieldCommandStates=function(t,e){if(this._commandListeners.length>0)return this._commandListeners[0].setCommandStates(t,e)},e.prototype.fireDisposed=function(){this._eventLock<=0&&this.fireEvent(e.DISPOSED)},e.prototype._fireReset=function(){this._eventLock<=0?this.fireEvent(e.RESET):this._resetLock++},e.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent(e.REFRESH)},e.prototype.fireRefreshClients=function(){this._eventLock<=0&&this.fireEvent(e.REFRESH)},e.prototype._fireRowCountChanged=function(){this._eventLock<=0?this.fireEvent(e.ROW_COUNT_CHANGED):this._countLock++},e.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent(e.DATA_LOAD_COMPLATED)},e.prototype.fireRowInserting=function(t,i){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROW_INSERTING,t,i)},e.prototype.fireRowInserted=function(t){this._eventLock<=0&&(this.fireEvent(e.ROW_INSERTED,t),this.fireEvent(e.DATA_CHANGED))},e.prototype.fireRowsInserted=function(t,i){this._eventLock<=0&&(this.fireEvent(e.ROWS_INSERTED,t,i),this.fireEvent(e.DATA_CHANGED))},e.prototype.fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROW_REMOVING,t)},e.prototype.fireRowRemoved=function(t){this._eventLock<=0&&(this.fireEvent(e.ROW_REMOVED,t),this.fireEvent(e.DATA_CHANGED))},e.prototype.fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROWS_REMOVING,t)},e.prototype.fireRowsRemoved=function(t){this._eventLock<=0&&(this.fireEvent(e.ROWS_REMOVED,t),this.fireEvent(e.DATA_CHANGED))},e.prototype.fireRowUpdating=function(t,i){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROW_UPDATING,t,i)},e.prototype.fireRowUpdated=function(t){this._eventLock<=0&&(this.fireEvent(e.ROW_UPDATED,t),this.fireEvent(e.DATA_CHANGED))},e.prototype.fireRowsUpdated=function(t,i){this._eventLock<=0&&(this.fireEvent(e.ROWS_UPDATED,t,i),this.fireEvent(e.DATA_CHANGED))},e.prototype.fireRowListUpdated=function(t){this._eventLock<=0&&(this.fireEvent(e.ROW_LIST_UPDATED,t),this.fireEvent(e.DATA_CHANGED))},e.prototype.fireRowMoving=function(t,i){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROW_MOVING,t,i)},e.prototype.fireRowMoved=function(t,i){this._eventLock<=0&&this.fireEvent(e.ROW_MOVED,t,i)},e.prototype.fireRowsMoving=function(t,i,o){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROWS_MOVING,t,i,o)},e.prototype.fireRowsMoved=function(t,i,o){this._eventLock<=0&&this.fireEvent(e.ROWS_MOVED,t,i,o)},e.prototype.fireRowListMoving=function(t,i){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROW_LIST_MOVING,t,i)},e.prototype.fireRowListMoved=function(t,i){this._eventLock<=0&&this.fireEvent(e.ROW_LIST_MOVED,t,i)},e.prototype.fireValueChanging=function(t,i,o){return!(this._eventLock<=0)||this.fireConfirmEvent(e.VALUE_CHANGING,t,i,o)},e.prototype.fireValueChanged=function(t,i){this._eventLock<=0&&(this.fireEvent(e.VALUE_CHANGED,t,i),this.fireEvent(e.DATA_CHANGED))},e.prototype.fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent(e.STATE_CHANGED,t)},e.prototype.fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent(e.STATES_CHANGED,t)},e.prototype.fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent(e.STATES_CLEARED)},e.prototype.fireRestoreRows=function(t){this._eventLock<=0&&this.fireEvent(e.RESTOREROWS,t)},e.prototype.fireRowHided=function(t,i){this._eventLock<=0&&this.fireEvent(e.ROW_HIDED,t,i)},e.DISPOSED="onDataProvderDisposed",e.RESET="onDataProviderReset",e.REFRESH="onDataProviderRefresh",e.REFRESH_CLIENT="onDataProviderRefreshClient",e.ROW_COUNT_CHANGED="onDataProviderRowCountChanged",e.ROW_INSERTING="onDataProviderRowInserting",e.ROW_INSERTED="onDataProviderRowInserted",e.ROWS_INSERTED="onDataProviderRowsInserted",e.ROW_REMOVING="onDataProviderRowRemoving",e.ROW_REMOVED="onDataProviderRowRemoved",e.ROWS_REMOVING="onDataProviderRowsRemoving",e.ROWS_REMOVED="onDataProviderRowsRemoved",e.ROW_UPDATING="onDataProviderRowUpdating",e.ROW_UPDATED="onDataProviderRowUpdated",e.ROWS_UPDATED="onDataProviderRowsUpdated",e.ROW_LIST_UPDATED="onDataProviderRowListUpdated",e.ROW_MOVING="onDataProviderRowMoving",e.ROW_MOVED="onDataProviderRowMoved",e.ROWS_MOVING="onDataProviderRowsMoving",e.ROWS_MOVED="onDataProviderRowsMoved",e.ROW_LIST_MOVING="onDataProviderRowListMoving",e.ROW_LIST_MOVED="onDataProviderRowListMoved",e.VALUE_CHANGING="onDataProviderValueChanging",e.VALUE_CHANGED="onDataProviderValueChanged",e.DATA_CHANGED="onDataProviderDataChanged",e.STATE_CHANGED="onDataProviderStateChanged",e.STATES_CHANGED="onDataProviderStatesChanged",e.STATES_CLEARED="onDataProviderStatesCleared",e.RESTOREROWS="onDataProviderRestoreRows",e.ROW_HIDED="onDataProviderRowHided",e.DATA_LOAD_COMPLATED="onDataProviderDataLoadComplated",e}(Pe),Be=["yy","yyyy","M","MM","d","dd","a","A","H","HH","h","hh","m","mm","s","ss"],$e=[".","/","-",":"],Ae="0".charCodeAt(0),je="9".charCodeAt(0),He=[31,28,31,30,31,30,31,31,30,31,30],We=["am","pm","AM","PM","Am","Pm","aM","pM"];!function(t){t[t.YEAR=0]="YEAR",t[t.HALF=1]="HALF",t[t.QUARTER=2]="QUARTER",t[t.MONTH=3]="MONTH",t[t.WEEK=4]="WEEK",t[t.DAY=5]="DAY",t[t.HOUR=6]="HOUR"}(re||(re={}));var Ge=function(){function t(t){this._baseYear=2e3,this.format=t}return t.getSimpleDateNull=function(t){if(t instanceof Date)return t;if("number"==typeof t)return new Date(t);var e=(t=8===t.length&&/^[0-9]*$/.test(t)?t.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"):t).split(/[.//-]/);if(3!=e.length)return null;var i=parseInt(e[0]),o=parseInt(e[1])-1,r=parseInt(e[2]);return i==(t=new Date(i,o,r)).getFullYear()&&o==t.getMonth()&&r==t.getDate()?t:null},t.getDateProperty=function(t,e){if(!t)return null;switch(e){case re.YEAR:return t.getFullYear();case re.HALF:return t.getMonth()>5?2:1;case re.QUARTER:return Math.floor(t.getMonth()/3);case re.MONTH:return t.getMonth();case re.WEEK:var i=new Date(t.getFullYear(),t.getMonth(),1);return i.setDate(i.getDate()-i.getDay()),Math.floor((t.getTime()-i.getTime())/6048e5)+1;case re.DAY:return t.getDate();case re.HOUR:return t.getHours()}},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},set:function(t){t!=this._format&&(this._format=t,this.parse(t))},enumerable:!0,configurable:!0}),t.prototype.getDate=function(t){var e;if(t=t.trim()){for(var i=this.parseDateFormatTokens(this._format),o=this.parseDateValueTokens(t,this._amText,this._pmText),r=i.length,n=o.length,s=0,a=1,l=1,h=0,u=0,c=0,d=0,p=0,_=0,f=0;_<r&&f<n;){var g=i[_],y=o[f];switch(g.charAt(0)){case"L":var m=String(y);for(_++;_<r&&"E"!=(t=i[_]);){var b=m?parseInt(m.substr(0,t.length)):-1;switch(m=m.substr(t.length),t.charAt(0)){case"Y":case"y":s=Math.max(0,b);break;case"M":a=b>=0?b:1;break;case"D":case"d":l=b>=0?b:1;break;case"H":case"h":h=Math.max(0,b);break;case"m":u=Math.max(0,b);break;case"s":c=Math.max(0,b)}_++}break;case"Y":case"y":s=parseInt(y);break;case"M":a=parseInt(y);break;case"D":case"d":l=parseInt(y);break;case"H":case"h":h=parseInt(y);break;case"m":u=parseInt(y);break;case"s":c=parseInt(y);break;case"a":(t=String(y))&&(t=t.toLowerCase(),this._amText&&t==this._amText.toLowerCase()||"am"==t?d=12:(this._pmText&&t==this._pmText.toLowerCase()||"pm"==t)&&(p=12))}_++,f++}if(s<100&&s>=0&&(s+=this._baseYear),s<0||s>9999)return null;if(lt.included(a,1,3,5,7,8,10,12)){if(l<1||l>31)return null}else if(lt.included(a,4,6,9,11)){if(l<1||l>30)return null}else{if(2!=a)return null;if(l>29)return null;if(29==l&&(s%4!=0||s%100==0)&&s%400!=0)return null}if(h<0||h>24)return null;if((d>0||p>0)&&h>12)return null;if(u<0||u>59)return null;if(c<0||c>59)return null;d>0?h%=12:p>0&&(h=h%12+12),e=new Date(s,a-1,l,h,u,c)}return e},t.prototype.getDateNull=function(t){try{return this.getDate(t)}catch(t){}return null},t.prototype.getText=function(t){var e=t;e instanceof Date||(e=new Date(t));for(var i=this.parseDateFormatTokens(this._format),o=i.indexOf("a")>=0||i.indexOf("A")>=0,r="",n=0,s=i.length;n<s;n++){var a=i[n],l=a.length;switch(a.charAt(0)){case"L":break;case"Y":case"y":r+=l>2?e.getFullYear():lt.pad(e.getFullYear()%100);break;case"M":r+=l>1?lt.pad(e.getMonth()+1):e.getMonth()+1;break;case"D":case"d":r+=l>1?lt.pad(e.getDate()):e.getDate();break;case"H":r+=l>1?lt.pad(e.getHours()):e.getHours();break;case"h":if(o){var h=e.getHours();0==h?h=12:h>12&&(h-=12),r+=l>1?lt.pad(h):h}else r+=l>1?lt.pad(e.getHours()):e.getHours();break;case"m":r+=l>1?lt.pad(e.getMinutes()):e.getMinutes();break;case"s":r+=l>1?lt.pad(e.getSeconds()):e.getSeconds();break;case"A":case"a":e.getHours()<12?r+=this._amText:r+=this._pmText;break;default:r+=a}}return r},t.prototype.daysOfYear=function(t){for(var e=0,i=0;i<t.getMonth();i++)e+=He[i];if(t.getMonth()>=2){var o=t.getFullYear();(o%400==0||o%4==0&&o%100!=0)&&e++}return e+=t.getDate()},t.prototype.daysOfPriorYears=function(t){return t<=1900?0:365*(--t-1899)+(Math.floor(t/4)-Math.floor(t/100)+Math.floor(t/400)-460)},t.prototype.toExcelDate=function(t){var e=(1e3*(60*(60*t.getHours()+t.getMinutes())+t.getSeconds())+t.getMilliseconds())/864e5,i=this.daysOfPriorYears(t.getFullYear())+this.daysOfYear(t)+e;return i>=60&&i++,i},t.prototype.parseDateFormatTokens=function(t){var e=[],i=t&&t.trim();if(i){for(var o=i.length,r=0;r<o;){var n=i.charAt(r);if($e.indexOf(n)>=0)e.push(n),r++;else{for(var s=r++;r<o&&i.charAt(r)==n;)r++;if(n=i.substring(s,r),Be.indexOf(n)<0)throw new Error("Invalid datetime read format: "+t);e.push("A"==n?"a":n)}if(r<o&&lt.isWhiteSpace(n=i.charAt(r)))for(e.push(" ");r<o&&lt.isWhiteSpace(i.charAt(r));)r++}var a=[],l=0;for(o=e.length,r=0;r<o;r++){"a"==(n=e[r])||Be.indexOf(n)<0?(l>1&&a.push("E"),a.push(n),l=0):(1==l&&a.splice(a.length-2,0,"L"),a.push(n),l++)}e=a}return e},t.prototype.parseDateValueTokens=function(t,e,i){var o=[],r=t.trim();if(r){var n=We.slice();e&&n.push(e),i&&n.push(i);for(var s=r.length,a=0;a<s;){var l=r.charAt(a);if($e.indexOf(l)>=0)o.push(l),a++;else if(l.charCodeAt(0)>=Ae&&l.charCodeAt(0)<=je){for(var h=a++;a<s&&r.charCodeAt(a)>=Ae&&r.charCodeAt(a)<=je;)a++;l=r.substring(h,a),o.push(l)}else{for(var u=-1,c=0;c<n.length;c++)if(r.indexOf(n[c],a)==a){u=c;break}if(u<0)throw"Invalid date value: "+r;o.push(n[c]),a+=n[c].length}if(a<s&&lt.isWhiteSpace(l=r.charAt(a)))for(o.push(" ");a<s&&lt.isWhiteSpace(r.charAt(a));)a++}}return o},t.prototype.validateDateFormat=function(t){if(t=t&&t.trim()){var e=this.parseDateFormatTokens(t),i=e.indexOf("a")>=0;if(i&&e.indexOf("H")>=0)throw"Invalid datetime read format - 'H'와 'a'가 같이 존재할 수 없습니다: "+t;if(e.indexOf("h")>=0&&!i)throw"Invalid datetime read format - 'h'가 있으면 'a'가 반드시 있어야 합니다: "+t}},t.prototype.parse=function(e){if(this._amText="am",this._pmText="pm",this._baseYear=2e3,e){var i=e.split(";");if(this._format=i[0]?i[0]:t.DEFAULT_FORMAT,this.validateDateFormat(this._format),i.length>1&&i[1]&&(this._baseYear=parseInt(i[1])),i.length>2&&i[2]){var o=i[2].split(",");this._amText=o[0]?o[0]:"am",o.length>1&&(this._pmText=o[1]?o[1]:"pm")}}},t.DEFAULT_FORMAT="yyyy/MM/dd",t.Default=new t(t.DEFAULT_FORMAT),t}(),Ue=function(t){function e(e){var i=t.call(this)||this;return i.fields=[],i.values=[],i.startIndex=0,i.wrap=!0,i.select=!0,i.allFields=!0,i.caseSensitive=!1,i.partialMatch=!1,e&&i.extend(e),i}return o(e,t),e}(ft),ze=function(t){function e(e){var i=t.call(this)||this;return i.fields=null,i.value=null,i.startIndex=0,i.startFieldIndex=0,i.wrap=!0,i.select=!0,i.caseSensitive=!1,i.partialMatch=!1,i.columns=null,i.compareCallback=null,e&&i.extend(e),i}return o(e,t),e}(ft),Ye=(function(t){function e(e){return t.call(this,e)||this}o(e,t)}(Error),function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){},e.prototype.undo=function(){},e.prototype.redo=function(t){},e.prototype.execute=function(){return this.redo(!1)},e}(ft)),qe=(function(t){function e(){return t.call(this)||this}o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.undo=function(){},e.prototype.redo=function(t){},e.prototype.execute=function(){return this.redo(!1)}}(Ye),function(t){function e(e){var i=t.call(this)||this;return i._commands=[],i._current=-1,i._undoing=!1,i._redoing=!1,i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){this._owner=null,this._commands=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){return this._commands.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canUndo",{get:function(){return this._current>=0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this._commands.length>this._current+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoing",{get:function(){return this._undoing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redoing",{get:function(){return this._redoing},enumerable:!0,configurable:!0}),e.prototype.undo=function(){if(this.canUndo){var t=this._commands[this._current];this._undoing=!0;try{t.undo()}finally{this._undoing=!1}this._current=this._current-1,this._changed()}},e.prototype.redo=function(t){var e;if(this.canRedo){var i=this._current+1,o=this._commands[i];this._redoing=!0;try{e=o.redo(!0)}finally{this._redoing=!1}this._current=i,this._changed()}return e},e.prototype.execute=function(t){if(t){var e=t.execute();return this._current++,this._commands[this._current]=t,this.$_shrink(this._current+1),this._changed(),e}},e.prototype.flush=function(){var t=this._commands.length;if(t>0){for(;t--;)this._commands[t].dispose();this._commands=[],this._current=-1,this._changed()}},e.prototype._changed=function(){null!=this._owner&&this._owner.editCommandStackChanged(this,this.canUndo,this.canRedo)},e.prototype.$_shrink=function(t){if(t>=0&&t<this._commands.length){for(var e=this._commands.length-1;e>=t;e--)this._commands[e].dispose();this._commands.splice(t,this._commands.length-t)}},e}(se)),Ke=function(t){function e(e){var i=t.call(this)||this;return i._ds=e,i}return o(e,t),e.prototype._doDispose=function(){this._ds=null,this._save=null,t.prototype._doDispose.call(this)},e.prototype.redo=function(t){return t?this._doRedo(this._ds,this._save):this._save=this._doRun(this._ds),this._save&&this._save.result},e.prototype.undo=function(){this._doUndo(this._ds,this._save)},e.prototype._setSoftDeleting=function(t,e){t._softDeleting=e},e.prototype._setDeleteCreated=function(t,e){t._deleteCreated=e},e.prototype._cloneRow=function(t){if(lt.isArray(t))return t.slice();if(t){var e={};for(var i in t)e[i]=t[i];return e}},e.prototype._cloneValues=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),t){var o=t.length,r=[];i<0&&(i=o),e=Math.max(0,e);for(var n=Math.min(o,e+i),s=e;s<n;s++){var a=t[s];if(lt.isArray(a))r.push(a.slice());else if(a){var l={};for(var h in a)l[h]=a[h];r.push(l)}}return r}return null},e}(Ye),Xe=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e}(Ke),Ze=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(qe),Je=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._row=i,n._field=o,n._value=r,n}return o(e,t),e.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_setValue(this._row,this._field,this._value))&&(this._newState=t.getRowState(this._row)),e},e.prototype._doRedo=function(t,e){t.$_setValue(this._row,this._field,this._value)},e.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireValueChanged(this._row,this._field)},e}(Xe),Qe=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._row=i,n._values=n._cloneRow(o),n._strict=r,n}return o(e,t),e.prototype._doDispose=function(){this._values=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return e.row=t._keepRow(this._row),(e.result=t.$_updateRow(this._row,this._values,this._strict))&&(this._newState=t.getRowState(this._row)),e},e.prototype._doRedo=function(t,e){t.$_updateRow(this._row,this._values,this._strict)},e.prototype._doUndo=function(t,e){t._yieldRow(this._row,e.row),e.row.state!=this._newState&&t.fireRowStateChanged(this._row),t.fireRowUpdated(this._row)},e}(Xe),ti=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._row=i,lt.isArray(o)||(o=e.objectToRow(o)),r._values=o.slice(),r}return o(e,t),e.prototype._doRun=function(t){var e={};return e.result=t.$_insertRow(this._row,this._values),e},e.prototype._doRedo=function(t,e){t.$_insertRow(this._row,this._values)},e.prototype._doUndo=function(t,e){t.$_deleteRow(this._row)},e}(Xe),ei=function(t){function e(e,i){var o=t.call(this,e)||this;return o._row=i,o}return o(e,t),e.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,e.row=t._keepRow(this._row),e.result=t.$_deleteRow(this._row),e},e.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_deleteRow(this._row)}finally{this._setSoftDeleting(t,i)}},e.prototype._doUndo=function(t,e){t.$_insertRow(this._row,e.row.values),t._yieldStates(this._row,e.row),t._yieldCommandStates(this._row,e.row.outer)},e}(Xe),ii=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._row=i,n._state=o,n._force=r,n}return o(e,t),e.prototype._doRun=function(t){var e={};return e.row=t._keepStates(this._row),t.$_setRowState(this._row,this._state,this._force),e},e.prototype._doRedo=function(t,e){t.$_setRowState(this._row,this._state,this._force)},e.prototype._doUndo=function(t,e){t._yieldState(this._row,e.row),e.row.state!=this._state&&t.fireRowStateChanged(this._row)},e}(Xe),oi=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._row=i,r._state=o,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return e.state=t._keepState(this._row),t.$_changeRowState(this._row,this._state,!0,!0,!0),e},e.prototype._doRedo=function(t,e){t.$_changeRowState(this._row,this._state,!0,!0,!0)},e.prototype._doUndo=function(t,e){t._yieldState(this._row,e.state),e.state!=this._state&&t.fireRowStateChanged(this._row)},e}(Xe),ri=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._deleteRows=i,r._rowEvents=o,r}return o(e,t),e.prototype._doRun=function(t){var e={};e.rows=[];e.orgValues=t._keepOrgValues();var i=t.$_clearRowStates(this._deleteRows,this._rowEvents,!0);return e.rows=i.rows,e.states=i.states,e.values=i.values,e},e.prototype._doRedo=function(t,e){t.$_clearRowStates(this._deleteRows,this._rowEvents,!1)},e.prototype._doUndo=function(t,e){var i=e.rows,o=e.values,r=e.states,n=[];if(o)for(var s=0;s<i.length;s++)t.$_internalInsertRow(s,o[s],e.row,!0);if(r)for(s=0;s<r.length;s++)r[s]&&(t._yieldState(s,r[s]),r[s]!==at.NONE&&n.push(s));t._yieldOrgValues(e.rows),(i.length>0||r.length>0)&&t._fireRefresh()},e}(Xe),ni=function(t){function e(e,i,o,r,n,s,a){var l=t.call(this,e)||this;return l._row=i,l._values=l._cloneValues(o,r,n),l._start=0,l._count=l._values.length,l._rowEvents=s,l._strict=a,l}return o(e,t),e.prototype._doDispose=function(){this._values=null,t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,e),e},e.prototype._doRedo=function(t,e){t.$_updateRows(this._row,this._values,this._start,this._count,this._strict,this._rowEvents,null)},e.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,r=e.states,n=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],r[a],n[a])}t._fireRefresh()}},e}(Xe),si=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._rows=i.slice(),r._rowEvents=o,r}return o(e,t),e.prototype._doRun=function(t){var e={};return this._softDeleting=t.softDeleting,t.$_removeRows(this._rows,this._rowEvents,e),e},e.prototype._doRedo=function(t,e){var i=t.softDeleting;try{this._setSoftDeleting(t,this._softDeleting),t.$_removeRows(this._rows,this._rowEvents,null)}finally{this._setSoftDeleting(t,i)}},e.prototype._doUndo=function(t,e){var i=e.rows,o=e.statedRows;if(!(i.length<1&&o.length<1)){for(var r=e.rowSaves,n=e.states,s=0;s<i.length;s++){var a=i[s],l=r[s];t.$_internalInsertRow(a,l.values,!0),t._yieldRow(a,l,!1)}for(s=0;s<o.length;s++){a=o[s];t._yieldState(a,n[s])}t._fireRefresh();for(s=0;s<i.length;s++){a=i[s];var h=r[s];t._yieldCommandStates(a,h.outer)}}},e}(Xe),ai=function(t){function e(e,i,o,r,n,s){var a=t.call(this,e)||this;return a._row=i,a._values=a._cloneValues(o,r,n),a._start=0,a._count=a._values.length,a._rowEvents=s,a}return o(e,t),e.prototype._doRun=function(t){return t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents),{}},e.prototype._doRedo=function(t,e){t.$_insertRows(this._row,this._values,this._start,this._count,this._rowEvents)},e.prototype._doUndo=function(t,e){if(!this._rows){this._rows=[];for(var i=0;i<this._values.length;i++)this._rows.push(this._row+i)}var o=t.softDeleting;try{this._setSoftDeleting(t,!1),t.$_removeRows(this._rows,!1,null)}finally{this._setSoftDeleting(t,o)}},e}(Xe);function li(t,e){return t&&t.getAttribute(e)}var hi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.csvToArray=function(t,e,i,o,r,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===r&&(r=!1),void 0===n&&(n=",");for(var s=[],a=[],l=e.length,h=0,u=[],c=!1,d=!1;h<l;){var p=e.charAt(h);'"'==p?c?d&&'"'==e.charAt(h+1)?(u.push(p),h++):d?(d=!1,!r&&u.push(p)):u.push(p):(c=d=!0,!r&&u.push(p)):d||p!=n&&"\r"!=p&&"\n"!=p?(c=!0,u.push(p)):(p==n?a.push(u.join("")):"\r"!=p&&"\n"!=p||(a.push(u.join("")),s.push(a),a=[],"\n"==e.charAt(h+1)&&h++),u=[],c=!1),h++}d&&u.splice(0,0,'"'),u.length>0&&a.push(u.join("")),a.length>0&&s.push(a),i>0&&(o<=0?s.splice(0,i):s=s.splice(i,o));for(var _=t.getFields(),f=_.length,g=f>0,y=0,m=s.length;y<m;y++){a=s[y],g&&a.length>f&&(a.length=f);for(var b=0;b<f;b++)a[b]=_[b].readValue(a[b])}return s},e.xmlToRow=function(t,e,i){for(var o=t.childNodes,r=e.length,n=new Array(r),s=0,a=o.length;s<a;s++){var l,h=o[s];if((l=i.indexOf(h.tagName))>=0){var u=h.nodeValue;null==u&&h.hasChildNodes()&&(u=lt.included(h.childNodes[0].nodeType,3,4)?h.childNodes[0].nodeValue:void 0),null!=u&&(n[l]=u)}}for(s=0;s<r;s++)if(void 0===n[s]){var c=li(t,i[s]);null!=c&&(n[s]=c)}return n},e.xmlToArray=function(t,i,o,r){void 0===o&&(o=0),void 0===r&&(r=-1);var n=null,s=e.xmlToRow,a=i?i.length:0;if(a&&(o=Math.max(0,o),r<0&&(r=a),r=Math.min(a-o,r))){var l=t.getFields(),h=t.getOrgFieldNames();l.length;n=new Array(r);for(var u=0;u<r;u++){var c=s(i[u+o],l,h);n[u]=c}}return n},e}(ft),ui=function(t){function e(e,i,o){var r=t.call(this,e)||this;return r._row=i,r._newRow=o,r}return o(e,t),e.prototype._doRun=function(t){t.$_moveRow(this._row,this._newRow)},e.prototype._doRedo=function(t,e){t.$_moveRow(this._row,this._newRow)},e.prototype._doUndo=function(t,e){t.$_moveRow(this._newRow,this._row)},e}(Xe),ci=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._row=i,n._count=o,n._newRow=r,n}return o(e,t),e.prototype._doRun=function(t){t.$_moveRows(this._row,this._count,this._newRow)},e.prototype._doRedo=function(t,e){t.$_moveRows(this._row,this._count,this._newRow)},e.prototype._doUndo=function(t,e){t.$_moveRows(this._newRow,this._count,this._row)},e}(Xe),di=function(t){function e(e,i,o){var r=t.call(this,e)||this;r._rows=i,r._newRows=i.slice();for(var n=o-i[0],s=0;s<i.length;s++)r._newRows[s]+=n;return r}return o(e,t),e.prototype._doRun=function(t){var e={};return e.result=t.$_moveRowList(this._rows,this._newRows[0]),e},e.prototype._doRedo=function(t,e){return t.$_moveRowList(this._rows,this._newRows[0])},e.prototype._doUndo=function(t,e){return t.$_moveRowList(this._newRows,this._rows[0])},e}(Xe),pi=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._rows=i.slice(),n._fields=o.slice(),n._value=r,n}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRun=function(t){var e={};return t.$_fillValue(this._rows,this._fields,this._value,e),e},e.prototype._doRedo=function(t,e){t.$_fillValue(this._rows,this._fields,this._value,null)},e.prototype._doUndo=function(t,e){var i=e.rows;if(!(i.length<1)){for(var o=e.values,r=e.states,n=e.orgValues,s=0;s<i.length;s++){var a=i[s];t.$_restoreRow(a,o[s],r[a],n[a])}t._fireRefresh()}},e}(Xe),_i=function(t){function e(e,i,o,r,n){void 0===o&&(o=!1),void 0===r&&(r=null),void 0===n&&(n=at.NONE);var s=t.call(this,e)||this;return s._newCount=i,s._oldCount=e.rowCount,s._fillDefaults=o,s._defaultValues=r,s._rowState=n,s}return o(e,t),e.prototype._doRun=function(t){var e={};return t.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,e),e},e.prototype._doRedo=function(t,e){t.$_setRowCount(this._newCount,this._fillDefaults,this._defaultValues,this._rowState,null)},e.prototype._doUndo=function(t,e){if(this._oldCount<this._newCount)t.$_setRowCount(this._oldCount);else if(this._oldCount>this._newCount){var i=e.rows,o=e.statedRows;if(i.length<1&&o.length<1)return;for(var r=e.rowSaves,n=e.states,s=0;s<i.length;s++){var a=i[s],l=r[s];t.$_internalInsertRow(a,l.values,!0),t._yieldRow(a,l,!1)}for(s=0;s<o.length;s++){a=o[s];t._yieldState(a,n[s])}t._fireRefresh();for(s=0;s<i.length;s++){a=i[s];var h=r[s];t._yieldCommandStates(a,h.outer)}}},e}(Xe),fi=function(t){function e(e,i){var o=t.call(this)||this;return o._points=[],o._nextPoint=0,o._values=[],o._rowIds=[],o._rowStates=[],o._orgValues=null,o._needRestore=!1,o._deletedCount=0,o._nextRowId=0,o._hiddenIds=[],o.$_handler=i,e&&(o.undoable=!0,o._commands=new Ze(o)),o}return o(e,t),e.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._values=null,this._rowIds=null,this._rowStates=null,this._points=null,this._orgValues=null,this._hiddenIds=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"handler",{get:function(){return this.$_handler},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())},enumerable:!0,configurable:!0}),e.prototype.getDataRow=function(t){return this._rowIds.indexOf(t)},Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._values.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSummarized",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deletedCount",{get:function(){return this._deletedCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canUndo",{get:function(){return this._commands&&this._commands.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this._commands&&this._commands.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoing",{get:function(){return this._commands&&this._commands.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redoing",{get:function(){return this._commands&&this._commands.redoing},enumerable:!0,configurable:!0}),e.prototype.getRowId=function(t){return this._rowIds[t]},e.prototype.$_internalInsertField=function(e,i){if((e=t.prototype.$_internalInsertField.call(this,e,i))>=0){for(var o=this._values.length,r=0;r<o;r++){(n=this._values[r])&&n.splice(e,0,void 0)}if(this._orgValues){o=Math.min(o,this._orgValues.length);for(r=0;r<o;r++){var n;(n=this._orgValues[r])&&n.splice(e,0,void 0)}}}return e},e.prototype.$_internalClearFields=function(){t.prototype.$_internalClearFields.call(this),this.$_clearRows()},e.prototype.setRowCount=function(t,e,i,o){void 0===e&&(e=!1),void 0===i&&(i=null),void 0===o&&(o=at.NONE),this.undoable?this._commands.execute(new _i(this,t,e,i,o)):this.$_setRowCount(t,e,i,o)},e.prototype.$_setRowCount=function(t,e,i,o,r){if(void 0===e&&(e=!1),void 0===i&&(i=null),void 0===o&&(o=at.NONE),void 0===r&&(r=null),this._checkClientState()){var n=this._values,s=n.length,a=Math.max(0,t);if(a!=s){var l=this._rowIds,h=this._rowStates;if(this.refreshFieldFormats(),r&&(r.rows=[],r.rowSaves=[],r.statedRows=[],r.states=[]),a>s&&(e||i)){var u=this.fieldCount,c=i;if(!c||c instanceof Array||(c=this.objectToRow(c)),c&&c.length<1&&(c=null),e||c)for(var d=c?Math.min(c.length,u):0,p=s;p<a;p++){var _=[];if(e)for(var f=0;f<u;f++){var g=this.getField(f);_[f]=void 0!==g.defaultValue?g.defaultValue:g.nullValue}if(d>0)for(f=0;f<d;f++){var y=c[f];void 0!==y&&(_[f]=this.getField(f).readValue(y))}n[p]=_}}else if(a>s)for(p=s;p<a;p++)n[p]=[];else if(a<s){if(r)for(p=a;p<s;p++){var m=p;r.statedRows.push(m),r.states.push(h[p]),r.rows.push(m),r.rowSaves.push(this._keepRow(m))}if(this._deletedCount>0)for(p=s-1;p>=a;p--)ht(h[p])&&this._deletedCount--}o=this.checkStates&&o?o:at.NONE,n.length=l.length=h.length=a,this._orgValues&&this._orgValues.length>a&&(this._orgValues.length=a);for(p=s;p<a;p++)h[p]=o,l[p]=this._nextRowId++;for(p=this._hiddenIds.length-1;p>=0;p--){f=this._hiddenIds[p];l.indexOf(f)<0&&this._hiddenIds.splice(p,1)}this.tags.setRowCount(a),this._fireRefresh(),this._fireRowCountChanged()}}},e.prototype.$_clearRows=function(){this._values.length=0,this._values=[],this._rowIds.length=0,this._rowIds=[],this._rowStates.length=0,this._rowStates=[],this._hiddenIds.length=0,this._hiddenIds=[],this._orgValues?(this._orgValues.length=0,this._orgValues=[]):this._orgValues=null,this._deletedCount=0,this.clearCommandStack(),this.tags.clearRows()},e.prototype.clearRows=function(){this._checkClientState()&&(this.$_clearRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated())},e.prototype.setRows=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i){this.refreshFieldFormats(),this.beginUpdate();try{this.$_clearRows();var o=this.checkStates,r=this.filters,n=this.filterRuntime,s=void 0;if(t&&(s=t.length)>0&&e<s)if(e=Math.max(0,e),i=i<0?s:Math.min(i,s-e),r){this._values.length=this._rowIds.length=this._rowStates.length=i,r.prepare(n,this);for(var a=s,l=0,h=0,u=e;u<a&&l<i;u++){(c=t[u])instanceof Array||(c=this.objectToRow(c)),r.select(n,h++,c)&&this.$_internalSetRow(l++,c,o)}this._values.length=this._rowIds.length=this._rowStates.length=l}else{if((a=Math.min(s,e+i))>e){this._values.length=this._rowIds.length=this._rowStates.length=a-e;for(l=0,u=e;u<a;u++){var c;(c=t[u])instanceof Array||(c=this.objectToRow(c)),this.$_internalSetRow(l++,c,o)}}}}finally{this.endUpdate(!1),this.clearCommandStack()}this.tags.setRows(),this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()}},e.prototype.setXmlRows=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkClientState()&&0!=i&&(t=hi.xmlToArray(this,t,e,i),this.setRows(t))},e.prototype.insertRows=function(t,e,i,o,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===r&&(r=!1),this.undoable?this._commands.execute(new ai(this,t,e,i,o,r)):this.$_insertRows(t,e,i,o,r)},e.prototype.$_insertRows=function(t,e,i,o,r){if(this._checkClientState()&&e){var n=e.length;if(!(n<1)&&0!=(o=o<0?n:Math.min(n,o))){if(t<0||t>this._values.length)throw new De("row is out of bounds:"+t);this.refreshFieldFormats(),i=Math.max(0,i);var s=Math.min(n,i+o);if(r)for(var a=t,l=i;l<s;l++){(h=e[l])instanceof Array||(h=this.objectToRow(h)),this.fireRowInserting(a,h)&&(this.$_internalInsertRow(a,h,!0),this.fireRowInserted(a),this._fireRowCountChanged(),a++)}else{for(a=t,l=i;l<s;l++,a++){var h;(h=e[l])instanceof Array||(h=this.objectToRow(h)),this.$_internalInsertRow(a,h,!1)}this.tags.insertRows(t,o=s-i),this.fireRowsInserted(t,o),this._fireRowCountChanged()}}}},e.prototype.appendRows=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===o&&(o=!1),this.insertRows(this.rowCount,t,e,i,o)},e.prototype.insertRowsFrom=function(t,e,i,o){for(var r=[],n=0,s=i;n<s.length;n++){var a=s[n];r.push(t.getRowObject(a))}if(e)for(var l=i.length-1;l>=0;l--)r[l]=this._convertValues(r[l],e);this.insertRows(o,r)},e.prototype.appendRowsFrom=function(t,e,i){this.insertRowsFrom(t,e,i,this.rowCount)},e.prototype.insertXmlRows=function(t,e,i,o,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===r&&(r=!1),this._checkClientState()&&(e=hi.xmlToArray(this,e,i,o),this.insertRows(t,e,0,-1,r))},e.prototype.appendXmlRows=function(t,e,i,o){void 0===o&&(o=!1),this.insertXmlRows(this.rowCount,t,e,i,o)},e.prototype.fillValue=function(t,e,i){if(this.undoable)return this._commands.execute(new pi(this,t,e,i));this.$_fillValue(t,e,i)},e.prototype.updateRows=function(t,e,i,o,r,n){if(void 0===n&&(n=!1),this.undoable)return this._commands.execute(new ni(this,t,e,i,o,n,r));this.$_updateRows(t,e,i,o,r,n)},e.prototype.updateXmlRows=function(t,e,i,o,r){void 0===r&&(r=!1),this._checkClientState()&&(e=hi.xmlToArray(this,e,i,o),this.updateRows(t,e,0,-1,r))},e.prototype.getValue=function(t,e){this.$_checkRowIndex(t),this._checkFieldIndex(e);var i=this._values[t];return i?i[e]:void 0},e.prototype.setValue=function(t,e,i){return this.undoable?this._commands.execute(new Je(this,t,e,i)):this.$_setValue(t,e,i)},e.prototype.$_setValue=function(t,e,i){if(!this._checkClientState())return!1;this.$_checkRowIndex(t),this._checkFieldIndex(e);var o=this.getField(e),r=this._rowStates[t];if(!o)throw new De("Invalid field: "+e);if(!o.updatable&&(r==at.NONE||r==at.UPDATED))return!1;var n,s=this._values[t],a=o.readValue(i);if(s&&o.equalValues(a,s[e]))return!1;this.refreshFieldFormat(o);var l=this.checkStates&&(r==at.NONE||!r);return s||(this._values[t]=s=new Array(this.fieldCount)),l&&this._orgValues&&(n=s.concat()),s[e]=a,this._internalCalculateValues(s,t),l?(n&&(this._orgValues[t]=n),this.$_changeRowState(t,at.UPDATED,!0)):this._needRestore&&this.restoreState(t),this.tags.setValue(t,e),this.fireValueChanged(t,e),!0},e.prototype.updateRow=function(t,e,i){return this.undoable?this._commands.execute(new Qe(this,t,e,i)):this.$_updateRow(t,e,i)},e.prototype.getRow=function(t){this.$_checkRowIndex(t);var e=this._values[t];return e?e.slice():[]},e.prototype.getRows=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1);var i=this._values.length,o=Math.max(0,t),r=e<0?i-1:Math.min(i-1,e);if(o>=i||r<o)return[];for(var n=r-o+1,s=new Array(n),a=0;a<n;a++)s[a]=this._values[a+o]?this._values[a+o].slice():[];return s},e.prototype.getRowObject=function(t,e){return this.$_checkRowIndex(t),this.$_getRowObject(t,e)},e.prototype.getRowObjects=function(t,e,i){void 0===t&&(t=0),void 0===e&&(e=-1);var o=this._values.length,r=Math.max(0,t),n=e<0?o-1:Math.min(o-1,e);if(r>=o||n<r)return[];for(var s=n-r+1,a=new Array(s),l=0;l<s;l++)a[l]=this.$_getRowObject(l+r,i);return a},e.prototype.getOutputObject=function(t,e){var i=this.getRowObject(e,null==t?void 0:t.rowState);return t&&this.$_createOutputRows([i],t,e),i},e.prototype.getOutputObjects=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var o=this.getRowObjects(e,i,null==t?void 0:t.rowState);return t&&this.$_createOutputRows(o,t,e),o},e.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._checkFieldIndex(t);var o=this._values.length;if(i=i<0?o-1:Math.min(o-1,i),(e=Math.max(0,e))>=o||i<e)return null;for(var r=new Array(i-e+1),n=e;n<=i;n++){var s=this._values[n];r[n-e]=s&&s[t]}return r},e.prototype.hasData=function(t){return t>=0&&t<this._values.length&&void 0!==this._values[t]},e.prototype.insertRow=function(t,e){return this.undoable?this._commands.execute(new ti(this,t,e)):this.$_insertRow(t,e)},e.prototype.$_insertRow=function(t,e,i){if(void 0===i&&(i=void 0),!this._checkClientState())return!1;if(t<0||t>this._values.length)throw new De("row is out of bounds:"+t);return this.refreshFieldFormats(),!(!e||!this.fireRowInserting(t,e))&&(lt.isArray(e)||(e=this.objectToRow(e)),this.$_internalInsertRow(t,e,!0),i&&this._yieldStates(t,i),this.fireRowInserted(t),this._fireRowCountChanged(),!0)},e.prototype.appendRow=function(t){var e=this.rowCount;return this.insertRow(e,t)?e:-1},e.prototype.removeRow=function(t){if(this.undoable){if(this.softDeleting&&this.checkStates)switch(this._rowStates[t]){case at.CREATED:if(!this.deleteCreated)return this._commands.execute(new oi(this,t,at.CREATE_AND_DELETED));break;case at.DELETED:case at.CREATE_AND_DELETED:break;default:return this._commands.execute(new oi(this,t,at.DELETED))}return this._commands.execute(new ei(this,t))}return this.$_removeRow(t)},e.prototype.$_removeRow=function(t){if(!this._checkClientState())return!1;if(this.$_checkRowIndex(t),this.softDeleting&&this.checkStates){switch(this._rowStates[t]){case at.CREATED:this.deleteCreated?this.$_deleteRow(t):this.$_changeRowState(t,at.CREATE_AND_DELETED,!0,!0,!0);break;case at.DELETED:case at.CREATE_AND_DELETED:break;default:this.$_changeRowState(t,at.DELETED,!0,!0,!0)}return!0}return this.$_deleteRow(t)},e.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new si(this,t,e)):this.$_removeRows(t,e,null)},e.prototype.$_removeRows=function(t,e,i){if(this._checkClientState()){var o,r=this.deleteCreated;if(t&&!((o=t.length)<1)){if(t=t.slice(),i&&(i.rows=[],i.rowSaves=[],i.statedRows=[],i.states=[]),this.softDeleting&&this.checkStates){for(var n=e?null:[],s=o;s--;){var a=t[s],l=this._rowStates[a],h=!1;switch(this.$_checkRowIndex(a),l){case at.CREATED:r||(i&&(i.statedRows.push(a),i.states.push(l)),h=this.$_changeRowState(a,at.CREATE_AND_DELETED,e,!1,!0),t.splice(s,1));break;case at.DELETED:case at.CREATE_AND_DELETED:t.splice(s,1);break;default:i&&(i.statedRows.push(a),i.states.push(l)),h=this.$_changeRowState(a,at.DELETED,e,!1,!0),t.splice(s,1)}n&&h&&n.push(a)}e||n&&n.length>0&&this.fireRowStatesChanged(n)}if((o=t.length)>0){if(o>1&&t.sort((function(t,e){return t-e})),i)for(s=0;s<o;s++){a=t[s];i.rows.push(a),i.rowSaves.push(this._keepRow(a))}if(e)for(s=o;s--;){a=t[s];this.$_checkRowIndex(a),this.$_deleteRow(a)}else if(this.fireRowsRemoving(t)){for(s=o;s--;){a=t[s],l=this._rowStates[a];this.$_checkRowIndex(a),this.$_internalRemoveRow(a),ht(l)&&this._deletedCount--}this.tags.removeRows(t),this.fireRowsRemoved(t),this._fireRowCountChanged()}}}}},e.prototype.moveRow=function(t,e){if(t!=e)return this.undoable?this._commands.execute(new ui(this,t,e)):void this.$_moveRow(t,e)},e.prototype.$_moveRow=function(t,e){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(e),this.fireRowMoving(t,e)&&(this.$_internalMoveRow(t,e),this.tags.moveRow(t,e),this.fireRowMoved(t,e)))},e.prototype.moveRows=function(t,e,i){if(!(e<1||t==i))return this.undoable?this._commands.execute(new ci(this,t,e,i)):void this.$_moveRows(t,e,i)},e.prototype.$_moveRows=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this.$_checkRowIndex(i),this.fireRowsMoving(t,e,i)&&(this.$_internalMoveRows(t,e,i),this.tags.moveRows(t,e,i),this.fireRowsMoved(t,e,i)))},e.prototype.moveRowList=function(t,e){if(t&&!(t.length<1))return t=t.sort((function(t,e){return t-e})),this.undoable?this._commands.execute(new di(this,t,e)):this.$_moveRowList(t,e)},e.prototype.$_moveRowList=function(t,e){if(this._checkClientState()){var i=t[0];return this.$_checkRowIndex(i),this.$_checkRowIndex(e),this.fireRowListMoving(t,e)?(this.$_internalMoveRowList(t,e),this.tags.moveRowList(t,e),this.fireRowListMoved(t,e),!0):void 0}},e.prototype.getRowState=function(t){return this.$_checkRowIndex(t),this._rowStates[t]||at.NONE},e.prototype.$_checkDeleted=function(t,e){ht(e)?this._deletedCount++:ht(t)&&!ht(e)&&this._deletedCount--},e.prototype.setRowState=function(t,e,i){return this.undoable?this._commands.execute(new ii(this,t,e,i)):this.$_setRowState(t,e,i)},e.prototype.$_setRowState=function(t,e,i){this._checkClientState()&&(this.$_checkRowIndex(t),this._orgValues?this.$_changeRowStateEx(t,e,!0,i,!1):this.$_changeRowState(t,e,!0,i))},e.prototype.setRowStates=function(t,e,i,o){var r;if((void 0===o&&(o=!1),this._checkClientState())&&(t&&!((r=t.length)<1)))if(o)for(var n=0;n<r;n++){var s=t[n];this.$_checkRowIndex(s),this.$_changeRowStateEx(s,e,!0,i,!1)}else{var a=[],l=this._rowStates;for(n=0;n<r;n++){var h=l[s=t[n]];this.$_checkRowIndex(s),e!=h&&(l[s]=e,a.push(s),this.$_checkDeleted(h,e),this._orgValues&&this.prepareOrgValues(s,h,e))}a.length>0&&this.fireRowStatesChanged(a)}},e.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this.undoable?this._commands.execute(new ri(this,t,e)):this.$_clearRowStates(t,e)},e.prototype.$_clearRowStates=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),this._checkClientState()){for(var o=[],r=i?[]:null,n=i?[]:null,s=this._rowStates.length;s--;){var a=this._rowStates[s];switch(r&&(r[s]=a),n&&(n[s]=null),a){case at.CREATE_AND_DELETED:case at.DELETED:if(t){if(o.push(s),n){var l=this._keepRow(s);l&&(n[s]=l.values)}e?this.$_deleteRow(s):(this.$_internalRemoveRow(s),this.tags.removeRow(s),this._deletedCount--)}else this.$_changeRowState(s,at.NONE,e),this._deletedCount--;break;default:this.$_changeRowState(s,at.NONE,e)}}return this.$_resetOrgValues(),e||(o.length>0&&(this.fireRowsRemoved(o),this._fireRowCountChanged()),this.fireRowStatesCleared()),i?{rows:o,states:r,values:n}:void 0}},e.prototype.$_restoreStates=function(t,e){this.fireRowStatesChanged(t)},e.prototype.getStateRows=function(t){var e=[];if(t)for(var i=0,o=this._rowStates.length;i<o;i++){this._rowStates[i]==t&&e.push(i)}return e},e.prototype.getAllStateRows=function(){for(var t={},e=t[at.CREATED]=[],i=t[at.UPDATED]=[],o=t[at.DELETED]=[],r=t[at.CREATE_AND_DELETED]=[],n=0,s=this._rowStates.length;n<s;n++){var a=this._rowStates[n];a===at.CREATED?e.push(n):a===at.UPDATED?i.push(n):a===at.DELETED?o.push(n):a===at.CREATE_AND_DELETED&&r.push(n)}return t},e.prototype.getRowStateCount=function(t){var e=t?t.length:0,i=this._rowStates.length,o=0;if(e&&i)if(e>1)for(var r=0;r<i;r++){var n=this._rowStates[r];t.indexOf(n)>=0&&o++}else for(n=t[0],r=0;r<i;r++)this._rowStates[r]===n&&o++;return o},e.prototype.$_restoreState=function(t){if(this._rowStates[t]===at.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],o=this.strictRestore,r=0,n=this.fieldCount;r<n;r++){var s=i.length>r?i[r]:void 0,a=e.length>r?e[r]:void 0,l=this.getField(r);if(o){if(!l.equalValues(s,a))return!1}else if(!l.sameValues(s,a))return!1}return this._rowStates[t]=at.NONE,!0}}return!1},e.prototype.restoreUpdatedStates=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,o=t.length;i<o;i++){var r=t[i];r>=0&&r<this._values.length&&this.$_restoreState(r)&&e.push(r)}else for(i=0,o=this._values.length;i<o;i++)this.$_restoreState(i)&&e.push(i);e.length>0&&this.fireRowStatesChanged(e)}},e.prototype.$_restoreUpdatedRow=function(t){if(this._rowStates[t]===at.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],o=0,r=Math.min(e.length,this.fieldCount);o<r;o++)i[o]=e[o];return this._rowStates[t]=at.NONE,!0}}return!1},e.prototype.$_restoreRow=function(t,e,i,o){this._values[t]=e.slice(),this._rowStates[t]=i,this._orgValues&&(this._orgValues[t]=o&&o.slice())},e.prototype.restoreUpdatedRows=function(t){if(this._orgValues&&this._checkClientState()){var e=[];if(null!=t)for(var i=0,o=t.length;i<o;i++){var r=t[i];r>=0&&r<this._values.length&&this.$_restoreUpdatedRow(r)&&e.push(r)}else for(i=0,o=this._values.length;i<o;i++)this.$_restoreUpdatedRow(i)&&e.push(i);e.length>0&&(this.fireRestoreRows(e),this.fireRowStatesChanged(e))}},e.prototype.getUpdatedCells=function(t){var e=this.restoreMode;if(!this._orgValues||e!=pt.AUTO&&e!=pt.EXPLICIT)return null;if(null==t&&(t=this.getStateRows(at.UPDATED)),null==t)return null;for(var i=[],o=0,r=t.length;o<r;o++){var n=t[o],s=n>=0&&this._orgValues&&n<this._orgValues.length?this._orgValues[n]:null;if(s){for(var a=this._values[n],l=this.strictRestore,h=[],u=0,c=this.fieldCount;u<c;u++){var d=a.length>u?a[u]:void 0,p=s.length>u?s[u]:void 0,_=this.getField(u);_.calculated||(l?_.equalValues(d,p)||h.push({fieldName:this.getOrgFieldName(u),oldValue:s[u],newValue:a[u]}):_.sameValues(d,p)||h.push({fieldName:this.getOrgFieldName(u),oldValue:s[u],newValue:a[u]}))}h.length>0&&i.push({__rowId:n,updatedCells:h})}}return i},e.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},e.prototype.findRow=function(t,e,i){if(void 0===i&&(i=0),t.length<1||e.length<t.length)return-1;for(var o=[],r=[],n=this._values,s=0,a=t.length;s<a;s++){var l=void 0;(l="string"==typeof t[s]?this.getFieldIndex(t[s]):Number(t[s]))>=0&&l<this.fieldCount&&o.indexOf(l)<0&&(o.push(l),r.push(e[s]))}var h=o.length;for(s=0;s<h;s++)o[s]=this.getField(o[s]);for(s=i,a=n.length;s<a;s++){var u=n[s],c=!0;for(l=0;l<h;l++)if(!o[l].equalValues(r[l],u[l])){c=!1;break}if(c)return s}return-1},e.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){var e=this._values,i=this.fieldCount,o=e?e.length:0;if(i>0&&o>0){for(var r=new Array(o),n=0;n<o;n++){var s=e[n]&&e[n].concat();r[n]=s}var a=t?this._rowStates.concat():null,l=this._nextPoint++;return this._points.push({id:l,data:r,states:a}),l}return-1}},e.prototype.rollback=function(t){if(this._checkClientState())for(var e=this._points.length-1;e>=0;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this.setRows(i.data);var o=i.states;o&&(this._rowStates=o.concat());break}}},e.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;i>=t;i--){e[i].data=null,e.pop()}},e.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},e.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},e.prototype.canUpdateRow=function(t){return!(this._rowStates[t]===at.NONE&&!this.updatable)},e.prototype.canAppendRow=function(){return!0},e.prototype.canInsertRow=function(t){return!0},e.prototype.canDeleteRow=function(t){return!0},e.prototype.getDistinctValues=function(t,e,i){if(void 0===e&&(e=-1),void 0===i&&(i=n.ASCENDING),e=arguments.length>1?e:-1,this._checkFieldIndex(t),e<0&&(e=this._values.length),e>0){for(var o=this.getField(t).dataType,s=[],a=[],l=void 0,h=0,u=this.rowCount;h<u;h++)switch(l=this._values[h]?this._values[h][t]:void 0,o){case r.NUMBER:null!=l&&isNaN(l)||s.indexOf(l)<0&&s.push(l);break;case r.DATE:case r.DATETIME:l?a.indexOf(l.getTime())<0&&(a.push(l.getTime()),s.push(l)):a.indexOf(void 0)<0&&(a.push(void 0),s.push(void 0));break;case r.OBJECT:default:s.indexOf(l)<0&&s.push(l)}return i!==n.NONE&&(s=lt.included(o,r.DATETIME,r.DATE,r.NUMBER)?s.sort((function(t,e){return t-e})):s.sort(),i===n.DESCENDING&&(s=s.reverse())),s.slice(0,e)}return null},e.prototype.compareValues=function(t,e,i,o){var r=this._values[e],n=this._values[i];if(r===n)return 0;var s=r?r[t]:null,a=n?n[t]:null;return null==s?null==a?0:-1:null==a||(s=o?String(s).toLowerCase():s)>(a=o?String(a).toLowerCase():a)?1:s<a?-1:0},e.prototype.compareTexts=function(t,e,i){return this.compareValues(t,e,i,!0)},e.prototype.compareNumbers=function(t,e,i){var o=this._values[e],r=this._values[i];if(o===r)return 0;var n=o?o[t]:NaN,s=r?r[t]:NaN;return isNaN(n)?isNaN(s)?0:-1:isNaN(s)||n>s?1:n<s?-1:0},e.prototype.compareDates=function(t,e,i){var o=this._values[e],r=this._values[i];if(o===r)return 0;var n=o?o[t]:null,s=r?r[t]:null;return n instanceof Date?s instanceof Date?n>s?1:n<s?-1:0:1:s instanceof Date?-1:0},e.prototype.compareBools=function(t,e,i){var o=this._values[e],r=this._values[i];if(o===r)return 0;var n=!!o&&Boolean(o[t]),s=!!r&&Boolean(r[t]);return n&&!s?1:!n&&s?-1:0},e.prototype.compareObjects=function(t,e,i){var o=this._values[e],r=this._values[i];if(o===r)return 0;var n=o?o[t]:null,s=r?r[t]:null;return n?s?this.getField(t).$_compareObject(n,s,e,i):1:s?-1:0},e.prototype.summarize=function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount;if(i<1)return!1;for(var o=0,r=t.field,n=0,s=NaN,a=NaN,l=0;l<i;){var h=(p=this._values[l++])?null==p[r]?void 0:p[r]:NaN;if(!isNaN(h)){n=s=a=h,o++;break}}for(;l<i;){h=(p=this._values[l++])?null==p[r]?void 0:p[r]:NaN;isNaN(h)||(n+=h,h<s&&(s=h),h>a&&(a=h),o++)}if(t.count=i,o>0)if(t.sum=n,t.min=s,t.max=a,t.avg=n/i,t.dataCount=o,t.dataAvg=n/o,e){for(var u=0,c=t.avg,d=0;d<i;d++){var p;h=(p=this._values[d])?null==p[r]?void 0:p[r]:NaN;isNaN(h)||(u+=Math.pow(h-c,2))}t.varsp=u/i,t.vars=u/(i-1)}else t.varsp=NaN,t.vars=NaN;return!0},e.prototype.summarizeRange=function(t,e,i){if(null==t||null==e)return!1;t.clear();var o=e.length;if(o<1)return!1;for(var r=0,n=t.field,s=0,a=NaN,l=NaN,h=0;h<o;){var u=e[h++],c=(f=this._values[u])?null==f[n]?void 0:f[n]:NaN;if(!isNaN(c)){s=a=l=c,r++;break}}for(;h<o;){u=e[h++],c=(f=this._values[u])?null==f[n]?void 0:f[n]:NaN;isNaN(c)||(s+=c,c<a&&(a=c),c>l&&(l=c),r++)}if(t.count=o,r>0)if(t.sum=s,t.min=a,t.max=l,t.avg=s/o,t.dataCount=r,t.dataAvg=s/r,i){for(var d=0,p=t.avg,_=0;_<o;_++){var f;u=e[_],c=(f=this._values[u])?null==f[n]?void 0:f[n]:NaN;isNaN(c)||(d+=Math.pow(c-p,2))}t.varsp=d/o,t.vars=d/(o-1)}else t.varsp=NaN,t.vars=NaN;return!0},e.prototype._keepRow=function(t){var e={};return e.rowId=this._rowIds[t],e.values=this._values[t]&&this._values[t].slice(),e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e.outer=this._keepCommandStates(t),e},e.prototype._yieldRow=function(t,e,i){void 0===i&&(i=!0),this._rowIds[t]=e.rowId,this._values[t]=e.values&&e.values.slice(),this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice()),i&&this._yieldCommandStates(t,e.outer)},e.prototype._keepStates=function(t){var e={};return e.rowId=this._rowIds[t],e.state=this._rowStates[t],e.orgValues=this._orgValues&&this._orgValues[t]&&this._orgValues[t].slice(),e},e.prototype._yieldStates=function(t,e){this._rowIds[t]=e.rowId,this._rowStates[t]=e.state,this._orgValues&&(this._orgValues[t]=e.orgValues&&e.orgValues.slice())},e.prototype._keepState=function(t){return this._rowStates[t]},e.prototype._yieldState=function(t,e){this._rowStates[t]=e},e.prototype._keepOrgValues=function(){var t=this._orgValues;if(t){for(var e=[],i=0;i<t.length;i++)e.push(t[i]&&t[i].slice());return e}return null},e.prototype._yieldOrgValues=function(t){if(this._orgValues)if(t){this._orgValues=[];for(var e=0;e<t.length;e++)this._orgValues.push(t[e]&&t[e].slice())}else this._orgValues=t},e.prototype.$_checkRowIndex=function(t){if(t<0||t>=this._values.length)throw lt.isDebugging(),new De("row is out of bounds: "+t)},e.prototype.$_resetOrgValues=function(){var t=this.restoreMode;this._orgValues=this.checkStates&&t!=pt.NONE?[]:null,this._needRestore=this._orgValues&&t==pt.AUTO},e.prototype.arrayToRow=function(t,e){for(var i=Math.min(t?t.length:0,this.fieldCount),o=new Array(i),r=0;r<i;r++)o[r]=this.getField(r).readValue(t[r]);return this._internalCalculateValues(o,e),o},e.prototype.$_internalSetRow=function(t,e,i){var o=this.arrayToRow(e,t);this._values[t]=o,this._rowIds[t]=this._nextRowId++,this.checkStates&&(this._rowStates[t]=at.NONE)},e.prototype.$_internalInsertRow=function(t,e,i){var o=this.arrayToRow(e,t),r=t==this._values.length;r?(this._values.push(o),this._rowIds.push(this._nextRowId++)):(this._values.splice(t,0,o),this._rowIds.splice(t,0,this._nextRowId++)),i&&this.tags.insertRow(t),r?this._rowStates.push(this.checkStates?at.CREATED:at.NONE):(this._rowStates.splice(t,0,this.checkStates?at.CREATED:at.NONE),this._orgValues&&this._orgValues.splice(t,0,void 0))},e.prototype.$_updateRow=function(t,e,i){if(this._checkClientState())return this.$_checkRowIndex(t),this.refreshFieldFormats(),!(!e||!this.fireRowUpdating(t,e))&&(this.$_internalUpdateRow(t,e,i,!0,!0),this.fireRowUpdated(t),!0)},e.prototype.$_updateRows=function(t,e,i,o,r,n,s){if(void 0===s&&(s=null),this._checkClientState()&&e){var a=e.length;if(!(a<1)&&0!=(o=o<0?a:Math.min(a,o))){i=Math.max(0,i),this.refreshFieldFormats();var l=this.rowCount,h=Math.min(a,i+o);if(!(h<=i))if(s&&(s.rows=[],s.values=[],s.states=[],s.orgValues=[]),n)for(var u=t,c=i;c<h&&u<l;c++,u++){var d=e[c];!this._values[u]&&(this._values[u]=new Array(this.fieldCount)),this.fireRowUpdating(u,d)&&(s&&(s.rows.push(u),s.values.push(this._values[u].slice()),s.states.push(this._rowStates[u]),s.orgValues.push(this._orgValues&&this._orgValues[u])),this.$_internalUpdateRow(u,d,r,!0,!0),this.fireRowUpdated(u))}else{var p=[];for(u=t,c=i;c<h&&u<l;c++,u++){this._rowStates[u]==at.NONE&&p.push(u),!this._values[u]&&(this._values[u]=new Array(this.fieldCount)),s&&(s.rows.push(u),s.values.push(this._values[u].slice()),s.states.push(this._rowStates[u]),s.orgValues.push(this._orgValues&&this._orgValues[u]));d=e[c];this.$_internalUpdateRow(u,d,r,!1,!1)}p.length>0&&this.fireRowStatesChanged(p),this.tags.updateRows(t,o=h-i),this.fireRowsUpdated(t,o)}}}},e.prototype.$_fillValue=function(t,e,i,o){if(void 0===o&&(o=null),this._checkClientState()&&t&&t.length&&e&&e.length){this.refreshFieldFormats(),o&&(o.rows=[],o.values=[],o.states=[],o.orgValues=[]);for(var r=[],n=0,s=t;n<s.length;n++){var a=s[n];this._rowStates[a]==at.NONE&&r.push(a),!this._values[a]&&(this._values[a]=new Array(this.fieldCount)),o&&(o.rows.push(a),o.values.push(this._values[a].slice()),o.states.push(this._rowStates[a]),o.orgValues.push(this._orgValues&&this._orgValues[a]));for(var l=this._values[a].slice(),h=0,u=e;h<u.length;h++){l[u[h]]=i}this.$_internalUpdateRow(a,l,!1,!1,!1)}r.length>0&&this.fireRowStatesChanged(r),this.tags.updateRowList(t),this.fireRowListUpdated(t)}},e.prototype.$_internalUpdateRow=function(t,e,i,o,r){var n,s=this.getFields(),a=lt.isArray(e),l=Math.min(s.length,a?e.length:s.length),h=this._values[t],u=this._rowStates[t],c=this.checkStates&&(u==at.NONE||!u);h||(this._values[t]=h=new Array(this.fieldCount)),c&&this._orgValues&&(n=lt.deepCopy(h));for(var d=!1,p=0;p<l;p++){var _=s[p];if((_.updatable||u==at.CREATED||u==at.CREATE_AND_DELETED)&&(a||e.hasOwnProperty(_.orgFieldName))){var f=a?e[p]:e[_.orgFieldName];i&&void 0===f||(d=!this._needRestore||(d||(i?!_.equalValues(h[p],_.readValue(f)):!_.sameValues(h[p],_.readValue(f)))),h[p]=_.readValue(f))}}d&&this._internalCalculateValues(h,t),c&&d?(n&&(this._orgValues[t]=n),this.$_changeRowState(t,at.UPDATED,o)):this._needRestore&&this.restoreState(t),r&&this.tags.updateRow(t)},e.prototype.$_changeRowState=function(t,e,i,o,r){if(void 0===o&&(o=!1),void 0===r&&(r=!1),this.checkStates||o){var n=this._rowStates[t];if((e=e||at.NONE)!=n)return this._rowStates[t]=e,r&&(!ht(n)&&ht(e)?this._deletedCount++:ht(n)&&!ht(e)&&this._deletedCount--),i&&this.fireRowStateChanged(t),!0}return!1},e.prototype.restoreState=function(t){if(this._rowStates[t]===at.UPDATED){var e=this._orgValues[t];if(e){for(var i=this._values[t],o=this.strictRestore,r=0,n=this.fieldCount;r<n;r++){var s=i.length>r?i[r]:void 0,a=e.length>r?e[r]:void 0;if(o){if(!this.getField(r).equalValues(s,a))return!1}else if(!this.getField(r).sameValues(s,a))return!1}return this._rowStates[t]=at.NONE,!0}}return!1},e.prototype.prepareOrgValues=function(t,e,i){i==at.UPDATED?this._orgValues[t]=this._values[t]?this._values[t].concat():[]:e==at.UPDATED&&this._orgValues[t]&&(this._orgValues[t]=void 0)},e.prototype.$_changeRowStateEx=function(t,e,i,o,r){var n=this._rowStates[t];return!!this.$_changeRowState(t,e,!1,o,r)&&(this._orgValues&&this.prepareOrgValues(t,n,e),i&&this.fireRowStateChanged(t),!0)},e.prototype.$_getRowObject=function(t,e){var i={},o=this._values[t];if(o){for(var r=0;r<this.fieldCount;r++){i[this.getOrgFieldName(r)]=o[r]}e&&(i.__rowState=this.getRowState(t))}return i},e.prototype.$_deleteRow=function(t){if(this.fireRowRemoving(t)){var e=this._rowStates[t];return this.$_internalRemoveRow(t),ht(e)&&this._deletedCount--,this.tags.removeRow(t),this.fireRowRemoved(t),this._fireRowCountChanged(),!0}return!1},e.prototype.$_internalRemoveRow=function(t){var e=this._rowIds[t];this._hiddenIds.indexOf(e)>=0&&this._hiddenIds.splice(this._hiddenIds.indexOf(e),1),this._values.splice(t,1),this._rowIds.splice(t,1),this._orgValues&&this._orgValues.length>t&&this._orgValues.splice(t,1),this._rowStates.splice(t,1)},e.prototype.$_internalMoveRow=function(t,e){var i=this._values[t],o=this._rowIds[t],r=this._rowStates[t];this._values.splice(t,1),this._rowIds.splice(t,1),this._rowStates.splice(t,1),this._values.splice(e,0,i),this._rowIds.splice(e,0,o),this._rowStates.splice(e,0,r),this._orgValues&&this._orgValues.length>t&&(i=this._orgValues[t],this._orgValues.splice(t,1),this._orgValues.splice(e,0,i))},e.prototype.$_internalMoveRows=function(t,e,i){for(var o=this._values.splice(t,e),r=this._rowIds.splice(t,e),n=this._rowStates.splice(t,e),s=0,a=o.length;s<a;s++)this._values.splice(i+s,0,o[s]),this._rowIds.splice(i+s,0,r[s]),this._rowStates.splice(i+s,0,n[s]);if(this._orgValues&&this._orgValues.length>t)for(s=0,a=(o=this._orgValues.splice(t,e)).length;s<a;s++)this._orgValues.splice(i+s,0,o[s])},e.prototype.$_internalMoveRowList=function(t,e){for(var i=[],o=[],r=[],n=t.length-1;n>=0;n--){var s=t[n];i.push(this._values.splice(s,1)[0]),o.push(this._rowIds.splice(s,1)[0]),r.push(this._rowStates.splice(s,1)[0])}i=i.reverse(),o=o.reverse(),r=r.reverse();for(var a=0,l=t.length;a<l;a++)this._values.splice(e+a,0,i[a]),this._rowIds.splice(e+a,0,o[a]),this._rowStates.splice(e+a,0,r[a]);if(this._orgValues&&this._orgValues.length>t[0]){i=[];for(var h=t.length-1;h>=0;h--)i=this._orgValues.splice(t[h],1)[0];i=i.reverse();for(a=0,l=t.length;a<l;a++)this._orgValues.splice(e+a,0,i[a])}},e.prototype.$_searchDataRow=function(t,e,i,o,n){var s=this.rowCount;if(s<1)return-1;var a=Math.min(t.length,e.length);if(a<1)return-1;for(var l=!i||i.allFields,h=i&&i.caseSensitive,u=i&&i.partialMatch,c=null,d=[],p=i.compareCallback||lt.compareTextValue,_=0;_<a;_++)d[_]=this.getField(t[_]).dataType;o=Math.max(0,o),n=Math.min(s-1,n);for(var f=o;f<=n;f++){var g=!0;for(_=0;_<a;_++){var y=this.getValue(f,t[_]);switch(d[_]){case r.DATETIME:case r.DATE:if(e[_]instanceof Date)g=p.call(this.$_handler,e[_],y,h,u);else{if(!c){var m=/[.]/.test(e[_])?"yyyy.MM.dd":/[/]/.test(e[_])?"yyyy/MM/dd":/[-]/.test(e[_])?"yyyy-MM-dd":"yyyyMMdd";c=new Ge(m)}g=p.call(this.$_handler,e[_],y?c.getText(y):y,h,u)}break;default:g=p.call(this.$_handler,e[_],y,h,u)}if(g&&!l)return f;if(!g&&l)break}if(g)return f}return-1},e.prototype.searchDataRow=function(t){var e=-1;t instanceof Ue||(t=new Ue(t));var i=t.fields,o=t.values,r=t.startIndex;if(i&&i.length>0&&o&&o.length>0){for(var n=i.length,s=[],a=0;a<n;a++){var l=parseFloat(i[a]);if(isNaN(l)){var h=this.getFieldIndex(i[a]);h>=0&&s.push(h)}else s.push(l)}s.length>0&&(n=this.rowCount,(e=(r=Math.max(0,r))<n?this.$_searchDataRow(s,o,t,r,n-1):-1)<0&&t.wrap&&r>0&&(e=this.$_searchDataRow(s,o,t,0,r-1)))}return e},e.prototype.$_searchData=function(t,e,i,o,n,s){var a=this.rowCount;if(a<1)return null;for(var l=i&&i.caseSensitive,h=i&&i.partialMatch,u=this.fieldCount,c=t.length,d=null,p=[],_=0;_<u;_++)p[_]=this.getField(_).dataType;o=Math.max(0,o),n=Math.min(a-1,n),(s=Math.max(0,s))>=t.length&&(o++,s=0);for(var f=i.compareCallback||lt.compareTextValue,g=o;g<=n;g++)for(_=g>o?0:s;_<c;_++){var y=t[_];if(y>=0&&y<u){var m=this.getValue(g,y),b=!1;switch(p[y]){case r.DATETIME:case r.DATE:if(e instanceof Date)b=f.call(this.$_handler,e,m,l,h);else{if(!d){var v=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd";d=new Ge(v)}b=f.call(this.$_handler,e,m?d.getText(m):m,l,h)}break;default:b=f.call(this.$_handler,e,m,l,h)}if(b)return{dataRow:g,fieldIndex:y,searchFieldIndex:_}}}return null},e.prototype.searchData=function(t){t instanceof ze||(t=new ze(t));var e=null,i=t.fields,o=t.value,r=Math.max(0,t.startIndex),n=Math.max(0,t.startFieldIndex);if(!i||i.length<1){i=[];for(var s=this.getFields(),a=0;a<s.length;a++)i.push(s[a].orgFieldName)}if(i&&i.length>0&&null!=o){var l,h,u=i.length,c=[];for(l=0;l<u;l++)h=parseFloat(i[l]),isNaN(h)?c.push(this.getFieldIndex(i[l])):c.push(h);c.length>0&&(!(e=r<(u=this.rowCount)?this.$_searchData(c,o,t,r,u-1,n):null)&&t.wrap&&r>0&&(e=this.$_searchData(c,o,t,0,r-1,0)),e&&(e.fieldName=this.getOrgFieldName(e.fieldIndex)))}return e},e.prototype.isDataChanged=function(t,e){if(this._rowStates[t]!==at.UPDATED||!this._orgValues)return!1;if(this.$_checkRowIndex(t),this._checkFieldIndex(e),this._orgValues[t]){var i=this._orgValues[t][e],o=this.getValue(t,e),r=this.getField(e);return r&&!r.sameValues(i,o)}return!1},e.prototype.$_hideRows=function(t,e){if(null!=t){for(var i=lt.isArray(t)?t:[t],o=[],r=this._hiddenIds.length,n=0,s=i.length;n<s;n++){var a=this.getRowId(i[n]);if(null!=a)if(o.push(a),e)this._hiddenIds.indexOf(a)<0&&this._hiddenIds.push(a);else{var l=this._hiddenIds.indexOf(a);l>=0&&this._hiddenIds.splice(l,1)}}this._hiddenIds.length!==r&&this.fireRowHided(o,e)}},e.prototype.hideRows=function(t){this.$_hideRows(t,!0)},e.prototype.showRows=function(t){this.$_hideRows(t,!1)},e.prototype.clearHiddenRows=function(){this._hiddenIds.length>0&&(this._hiddenIds=[],this.fireRowHided([],!1))},e.prototype.getHiddenRows=function(){for(var t=[],e=0,i=this._hiddenIds.length;e<i;e++){var o=this._rowIds.indexOf(this._hiddenIds[e]);o>=0&&t.push(o)}return t.sort((function(t,e){return t-e})),t},e.prototype.isHiddenRow=function(t){var e=this._rowIds[t];return this._hiddenIds.indexOf(e)>=0},Object.defineProperty(e.prototype,"hiddenCount",{get:function(){return this._hiddenIds.length},enumerable:!0,configurable:!0}),e.prototype.undo=function(){this.canUndo&&this._commands.undo()},e.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},e.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},e}(Ve),gi=function(t){function e(e){var i=t.call(this)||this;return i._tags=new Array,i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.add=function(t){if(t){var e=this._tags||(this._tags=[]);e.indexOf(t)<0&&e.push(t),t.connect(this._owner)}},e.prototype.remove=function(t){if(t&&this._tags){var e=this._tags.indexOf(t);e>=0&&(this._tags.splice(e,1),t.disconnect())}},e.prototype.clearRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].clearRows()},e.prototype.setRows=function(){if(this._tags)for(var t=this._tags.length;t--;)this._tags[t].setRows()},e.prototype.addRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRow(t)},e.prototype.addRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].addRows(t)},e.prototype.removeRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRow(t)},e.prototype.removeRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].removeRows(t)},e.prototype.updateRow=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRow(t)},e.prototype.updateRows=function(t){if(this._tags)for(var e=this._tags.length;e--;)this._tags[e].updateRows(t)},e}(ft),yi=function(){function t(){}return t.parse=function(t){return(new window.DOMParser).parseFromString(t,"text/xml")},t.toString=function(t){return(new window.XMLSerializer).serializeToString(t)},t.getNodeValue=function(t){return t.firstChild.nodeValue},t.getAttr=function(t,e){return t.getAttribute(e)},t.setAttr=function(t,e,i){t.setAttribute(e,i)},t.addChild=function(t,e,i){var o=t.createElement(i);return e.appendChild(o),o},t.addChildWithAttr=function(t,e,i,o,r){var n=t.createElement(i);return n.setAttribute(o,r),e.appendChild(n),n},t.addChildWithValue=function(t,e,i,o){var r=t.createElement(i);return r.nodeValue=o,e.appendChild(r),r},t.parseXml=function(t){var e=null;try{(e=new ActiveXObject("Microsoft.XMLDOM")).async=!1,e.loadXML(t)}catch(i){if(e)throw i;e=(new window.DOMParser).parseFromString(t,"text/xml")}return e},t}();function mi(t,e){var i=[];if(t){var o=t.childNodes;if(o)for(var r=0,n=o.length;r<n;r++){var s=o[r];s.tagName===e&&i.push(s)}}return i}var bi,vi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.extractJson=function(t,e){var i=t;if(e=e&&e.trim())for(var o=e.split("."),r=0;r<o.length;r++){var n=o[r]&&o[r].trim();if(n){var s=n.indexOf("["),a=n.lastIndexOf("]");if(s>0&&a>s){var l=n.substring(0,s),h="$"!=l?i[l]:i;if(Array.isArray(h)){l=n.substring(s+1,a);var u=parseInt(l);i=u>=0&&u<h.length?h[u]:null}else i=null}else"$"!=n&&(i=i[n]);if(!i)break}}return Array.isArray(i)?i:null},e.extractXml=function(t,e){var i=null;if(e=e&&e.trim())for(var o=e.split("."),r=0;r<o.length;r++){var n=o[r]&&o[r].trim();if(n){var s=n.indexOf("["),a=n.lastIndexOf("]");if(s>0&&a>s){var l=n.substring(0,s);if(i=mi(i?i[0]:t,l))l=n.substring(s+1,a),i=i[parseInt(l)]}else i=mi(i?i[0]:t,n);if(!i)break}}return i},e}(ft);!function(t){t.SET="set",t.APPEND="append",t.INSERT="insert",t.UPDATE="update"}(bi||(bi={}));var wi,Ci=function(t){function e(e){var i=t.call(this)||this;if(i.fillMode=bi.SET,i.fillPos=0,i.count=-1,i.rootArray=!0,i.rows="row",i.start=0,i.delimiter=",",i.quoted=!1,i.parentId=0,i.childrenField=null,i.treeField=null,i.iconField=null,i.needSorting=!1,i.noStates=!1,e){for(var o in e.hasOwnProperty("append")&&(i.fillMode=bi.APPEND),e.hasOwnProperty("fillMode")&&(i.fillMode=e.fillMode),e.hasOwnProperty("fillPos")&&(i.fillPos=e.fillPos),e.hasOwnProperty("count")&&(i.count=e.count),e.hasOwnProperty("rootArray")&&(i.rootArray=e.rootArray),e.hasOwnProperty("rows")&&(i.rows=e.rows),e.hasOwnProperty("start")&&(i.start=e.start),e.hasOwnProperty("delimiter")&&(i.delimiter=e.delimiter),e.hasOwnProperty("quoted")&&(i.quoted=e.quoted),e)void 0!==e[o]&&(i[o]=e[o]);i.parentId=e.parentId||e.parent,i.childrenField=e.childrenField||e.children,i.treeField=e.treeField||e.tree,i.iconField=e.iconField||e.icon,i.needSorting=e.needSorting||e.sorting}return i}return o(e,t),e}(ft),xi=function(t){function e(e){var i=t.call(this)||this;return i._provider=e,i}return o(e,t),e.prototype._doDispose=function(){this._provider=null},e.prototype.load=function(t,e,i){var o=new Ci(i);if(this._checkEmpty(e,o))return 0;var r=this._provider.checkStates;o.noStates&&(this._provider.checkStates=!1);try{switch(t){case"json":return this._loadJson(e,o);case"xml":return this._loadXml(e,o);case"csv":return this._loadCsv(e,o)}}finally{this._provider.checkStates=r,this._provider.fireDataLoadComplated()}},e.prototype._loadJson=function(t,e){"string"==typeof t&&(t=JSON.parse(t));var i=null;if(e.rootArray&&(i=lt.isArray(t)?t:null),i||(i=vi.extractJson(t,e.rows)),i){var o=e.fillPos,r=e.start,n=e.count;switch(e.fillMode){case bi.APPEND:this._provider.appendRows(i,r,n);break;case bi.INSERT:this._provider.insertRows(o,i,r,n);break;case bi.UPDATE:this._provider.updateRows(o,i,r,n,!1);break;case bi.SET:default:this._provider.setRows(i,r,n)}return i.length}return this._fillEmpty(e),0},e.prototype._loadXml=function(t,e){if("string"==typeof t&&(t=yi.parse(t)),t&&t.documentElement){var i=e.fillPos,o=e.start,r=e.count,n=e.rows,s=vi.extractXml(t.documentElement,n);switch(e.fillMode){case bi.APPEND:this._provider.appendXmlRows(s,o,r);break;case bi.INSERT:this._provider.insertXmlRows(i,s,o,r);break;case bi.UPDATE:this._provider.updateXmlRows(i,s,o,r);break;case bi.SET:default:this._provider.setXmlRows(s,o,r)}return s.length}return this._fillEmpty(e),0},e.prototype._loadCsv=function(t,e){var i=e.fillPos,o=e.start,r=e.count,n=e.quoted,s=e.delimiter,a=hi.csvToArray(this._provider,t,o,r,n,s);if(a&&(r=a.length)>0){switch(e.fillMode){case bi.APPEND:this._provider.appendRows(a,0,r);break;case bi.INSERT:this._provider.insertRows(i,a,0,r);break;case bi.UPDATE:this._provider.updateRows(i,a,0,r,!1);break;case bi.SET:default:this._provider.setRows(a,0,r)}return a.length}return this._fillEmpty(e),0},e.prototype._fillEmpty=function(t){t.fillMode===bi.SET&&this._provider.setRows(null)},e.prototype._checkEmpty=function(t,e){return!t&&(this._fillEmpty(e),!0)},e}(ft),Ii=function(t){function e(e,i){var o=t.call(this)||this;return o._rowCount=0,o._ds=e,o._rootRow=i,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"provider",{get:function(){return this._ds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootRow",{get:function(){return this._rootRow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"insertedRows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"insertedCount",{get:function(){return this._rowCount},enumerable:!0,configurable:!0}),e.prototype._prepareLoad=function(t){this._rowCount=0,this._rows=[]},e.prototype._objectToArray=function(t,e){for(var i=e.fieldCount,o=new Array(i),r=0;r<i;r++){var n=e.getOrgFieldName(r);t.hasOwnProperty(n)&&(o[r]=t[n])}return o},e.prototype._createRow=function(t,e,i){return this._ds.createRow(i,i[e],i[t],!1)},e.prototype._createRow2=function(t,e,i){return this._ds.createRow(i,e,t,!1)},e.prototype._rowAdded=function(t,e){this._rowCount++,this._rows&&e.parent===t&&this._rows.push(e)},e.prototype._addRow=function(t,e,i,o,r){var n=this._createRow(i,o,r);return e._insertChild(e.count,n,!0,!0),this._rowAdded(t,n),n},e.prototype._addRow2=function(t,e,i,o,r){var n=this._createRow2(i,o,r);return e._insertChild(e.count,n,!0,!0),this._rowAdded(t,n),n},e}(ft),Ei=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype._loadData=function(t,e,i,o,r,n){if(this._prepareLoad(e),!t||t.length<1)return this._rowCount;for(var s=this.provider,a=t.length,l=[],h=new Array(t.length),u=0;u<a;u++)if(l[u]=u,Array.isArray(t[u])){if(Array.isArray(t[u]))for(var c=h[u]=new Array(s.fieldCount),d=0,p=s.fieldCount;d<p;d++)c[d]=t[u][d]}else h[u]=this._objectToArray(t[u],s);o&&this.$_sortRows(l,h,i,0,a-1),s.beginUpdate();try{this.$_buildTree(e||this.rootRow,l,h,i,r,n)}finally{s.endUpdate(!1)}return this.insertedCount},e.prototype.$_sortRows=function(t,e,i,o,r){function n(t,o){var r=e[t][i],n=e[o][i];return r==n?0:r<n?-1:1}do{var s=o,a=r,l=t[Math.floor((o+r)/2)];do{for(;!(n(l,t[s])<=0);)s++;for(;!(n(l,t[a])>=0);)a--;if(s<=a){if(s!=a){var h=t[s];t[s]=t[a],t[a]=h}s++,a--}}while(s<=a);o<a&&this.$_sortRows(t,e,i,o,a),o=s}while(o<r)},e.prototype.$_buildTree=function(t,e,i,o,r,n){function s(e,i,r,n){for(var s=n[o];i!=t;){var a=i.getValue(o);if(e.parentCallback){if(e.parentCallback(a,s))return i}else if(0==s.indexOf(a))return i;i=i.parent}return t}var a=e[0],l=this._createRow(r,n,i[a]),h=s(this,t,0,i[a]);if(h._insertChild(h.count,l,!0,!0),this._rowAdded(t,l),e.length>1)for(var u=e.length,c=l,d=1;d<u;d++)a=e[d],l=this._createRow(r,n,i[a]),(h=s(this,c,0,i[a]))._insertChild(h.count,l,!0,!0),this._rowAdded(t,l),c=l},e}(Ii),Si=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.load=function(t,e,i,o,r,n){return this._loadData(e,t,i,o,r,n)},e}(Ei),Oi=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.load=function(t,e,i,o,r,n){var s=hi.csvToArray(this.provider,e);return this._loadData(s,t,i,o,r,n)},e}(Ei),Ri=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.load=function(t,e,i,o,r){if(this._prepareLoad(t),e){var n=vi.extractJson(e,i);if(n&&n.length>0){this.provider.beginUpdate();try{this.$_buildJsonTree(this.provider,t||this.rootRow,n,i,o,r)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},e.prototype.load2=function(t,e,i,o,r,n){if(this._prepareLoad(t),e){var s=vi.extractJson(e,i);if(s&&s.length>0){this.provider.beginUpdate();try{this.$_buildJsonTree2(this.provider,t||this.rootRow,s,o,r,n)}finally{this.provider.endUpdate(!1)}}}return this._rowCount},e.prototype.$_buildJsonTree=function(t,e,i,o,r,n){var s=t.getOrgFieldNames();!function t(i,s,a,l){for(var h=l.length,u=0,c=a.length;u<c;u++){for(var d=a[u],p=new Array(h),_=0;_<h;_++){var f=l[_];d.hasOwnProperty(f)&&(p[_]=d[f])}var g=i._addRow(e,s,r,n,p);if(d.hasOwnProperty(o)){var y=d[o];Array.isArray(y)&&y.length>0&&t(i,g,y,l)}}}(this,e,i,s)},e.prototype.$_buildJsonTree2=function(t,e,i,o,r,n){var s=t.getOrgFieldNames();!function t(i,s,a,l){for(var h=l.length,u=0,c=a.length;u<c;u++){for(var d=a[u],p=new Array(h),_=0;_<h;_++){var f=l[_];d.hasOwnProperty(f)&&(p[_]=d[f])}var g=i._addRow2(e,s,d[r],d[n],p);if(d.hasOwnProperty(o)){var y=d[o];Array.isArray(y)&&y.length>0&&t(i,g,y,l)}}}(this,e,i,s)},e}(Ii),Di=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.load=function(t,e,i,o,r){if(this._prepareLoad(t),e){var n="string"==typeof e?yi.parseXml(e):e;if(n){var s=vi.extractXml(n.documentElement,i);if(s&&s.length>0){this.provider.beginUpdate();try{this.$_buildXmlTree(this.provider,t||this.rootRow,s,i,o,r)}finally{this.provider.endUpdate(!1)}}}}return this._rowCount},e.prototype.$_buildXmlTree=function(t,e,i,o,r,n){!function t(i,s,a,l,h){for(var u=0,c=a.length;u<c;u++){var d=a[u],p=hi.xmlToRow(d,l,h),_=i._addRow(e,s,r,n,p),f=vi.extractXml(d,o);f&&f.length>0&&t(i,_,f,l,h)}}(this,e,i,t.getFields(),t.getOrgFieldNames())},e}(Ei),ki=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e}(Ke),Pi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(qe),Ti=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._row=i,n._values=n._cloneRow(o),n._strict=r,n}return o(e,t),e.prototype._doRun=function(t){var e={};return e.row=this._row._keepRow(t),(e.result=this._row.$_update(t,this._values,this._strict,!1))&&(this._newState=this._row.rowState),e},e.prototype._doRedo=function(t,e){this._row.$_update(t,this._values,this._strict,!1)},e.prototype._doUndo=function(t,e){this._row._yieldRow(t,e.row),e.row.state!=this._newState&&t._fireRowStateChanged(this._row,!1),t._rowUpdated(this._row)},e}(ki),Mi=function(t){function e(e){var i=t.call(this)||this;return i._children=null,i._descendantCount=0,i._rowId=e&&e._nextRowId++,i}return o(e,t),e.getRowIds=function(t){if(!t)return null;for(var e=[],i=0,o=t;i<o.length;i++){var r=o[i];e.push(r.rowId)}return e},e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rowId",{get:function(){return this._rowId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"provider",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){var t=this.parent;return null!=t?t._children.indexOf(this):-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconIndex",{get:function(){return-1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasChildren",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._children?this._children.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descendantCount",{get:function(){return this._descendantCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children?this._children.concat():null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descendants",{get:function(){if(this._children){var t=[];return function t(e,i){for(var o=0,r=e.count;o<r;o++){var n=e.getChild(o);i.push(n),t(n,i)}}(this,t),t}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ancestors",{get:function(){var t=null,e=this.parent;if(e)for(t=[];e&&e.rowId>=0;)t.push(e),e=e.parent;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowState",{get:function(){return at.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.getChild=function(t){if(t>=0){if(!this._children||t>=this._children.length)throw new RangeError("Index is invalid: "+t);return this._children[t]}throw new RangeError("Index is invalid: "+t)},e.prototype.getChildObjects=function(t,e,i,o,r){var n=this._children;if(n){var s=[];e=e||"rows",i=i||"iconIndex";for(var a=0,l=n.length;a<l;a++){var h=n[a],u=h.getObject();o&&(u.__rowId=h._rowId),r&&(u.__rowState=h.rowState),o&&(u._rowId=h._rowId),t&&(u[e]=h.getChildObjects(t,e,i,o,r)),u[i]=h.iconIndex,s.push(u)}return s}return null},e.prototype.$_createTreeOutputRows=function(t,e,i){var o=[];!function t(e,i,o){for(var r=0,n=e.length;r<n;r++){var s=e[r];i.push(e[r]),o&&s[o]&&s[o].length&&t(s[o],i,o)}}(t,o,i);var n,s=this.provider,a=s.fieldCount,l=o.length;e instanceof Oe||(e=new Oe(e));for(var h=e.nullDateText,u=e.nullText,c=e.nanText,d=this.provider.handler,p=0;p<a;p++){var _=s.getField(p),f=_.orgFieldName,g=void 0,y=void 0;if(_.dataType==r.DATETIME&&((g=e.datetimeCallback)||(y=e.datetimeWriter)||null!=h&&null!=h))if(g)for(var m=0;m<l;m++)(n=o[m])[f]=g(d,n._rowId,f,n[f]);else for(m=0;m<l;m++){var b=(n=o[m])[f];n[f]=b?y?y.getText(n[f]):b:h}else if(_.dataType==r.BOOLEAN&&((g=e.booleanCallback)||(y=e.booleanFormatter)))if(g)for(m=0;m<l;m++)(n=o[m])[f]=g(d,n._rowId,f,n[f]);else for(m=0;m<l;m++)(n=o[m])[f]=y.formatValue(n[f]);else if(_.dataType==r.NUMBER&&((g=e.numberCallback)||(y=e.numberFormatter)||null!=c&&null!=c))if(g)for(m=0;m<l;m++)(n=o[m])[f]=g(d,n._rowId,f,n[f]);else for(m=0;m<l;m++){var v=(n=o[m])[f];n[f]=null==v||isNaN(v)?c:y?y.getText(v):v}else if(null!=u&&null!=u)for(m=0;m<l;m++){v=(n=o[m])[f];n[f]=null==v||null==v?u:v}}for(var w=0,C=o.length;w<C;w++)delete o[w]._rowId},e.prototype.getOutput=function(t,e){if(t){var i=this.getObject();return i[e||"iconIndex"]=this.iconIndex,i._rowId=this._rowId,t.rowState&&(i.__rowState=this.rowState),this.$_createTreeOutputRows([i],t),i}return null},e.prototype.getChildOutputObjects=function(t,e,i,o){var r=this.getChildObjects(e,i,o,!0,null==t?void 0:t.rowState);return r&&t&&this.$_createTreeOutputRows(r,t,i),r},e.prototype.findById=function(t){if(this._children)for(var e=0,i=this._children.length;e<i;e++){var o=this._children[e];if(o.rowId==t)return o;if(o=o.findById(t))return o}return null},e.prototype.indexOf=function(t){return this._children?this._children.indexOf(t):-1},e.prototype.insertChild=function(t,e,i){return this._insertChild(t,e,!1,i)},e.prototype.addChild=function(t,e){return this._insertChild(this.count,t,!1,e)},e.prototype.insertChildren=function(t,e,i){return this._insertChildren(t,e,!1,i)},e.prototype.removeChild=function(t){return this._removeChild(t,!1)},e.prototype.clearChildren=function(){var t=this.provider;t&&!t._checkClientState()||this._removeChildren()},e.prototype.findChild=function(t,e){var i=this.provider;if(!i||!t||t.length<1||!e||e.length<t.length)return null;for(var o=[],r=[],n=0,s=t.length;n<s;n++){var a=void 0;(a="string"==typeof t[n]?i.getFieldIndex(t[n]):Number(t[n]))>=0&&a<i.fieldCount&&o.indexOf(a)<0&&(o.push(a),r.push(e[n]))}n=0;for(var l=o.length;n<l;n++)o[n]=i.getField(o[n]);return this.$_findChild(o,r)},e.prototype.isAncestorOf=function(t){if(t&&t!==this){for(var e=t.parent;e&&e!==this;)e=e.parent;return e===this}return!1},e.prototype.clearRowStates=function(t,e){var i=this.provider;if(i){var o=[],r=t?[]:null;this._collectStateRows(o,r);var n=o.length,s=r?r.length:0;if(0!=n||0!=s){if(e)for(var a=0,l=o.length;a<l;a++)o[a]._changeRowState(at.NONE,!0,!1);else n&&i.changeRowStates(o,at.NONE);s&&i.deleteRows(r)}}},e.prototype.toTreeString=function(){for(var t=this.rowId+"",e=new Array(this.level+1).join("  "),i=0;i<this.count;i++)t+="\n"+e+this.getChild(i).toTreeString();return t},e.prototype._checkFieldIndex=function(t){var e=this.provider.fieldCount;if(t<0||t>=e)throw new De("Field index is out of bounds: "+t)},e.prototype._descendantCountChanged=function(t){this._descendantCount+=t;var e=this.parent;e&&e._descendantCountChanged(t)},e.prototype._moveChild=function(t,e){if(t!=e){if(t<0||t>=this._children.length)throw new RangeError("index is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);var i=this._children[t];if(t>e)for(var o=t;o>e;o--)this._children[o]=this._children[o-1];else for(o=t;o<e;o++)this._children[o]=this._children[o+1];this._children[e]=i}},e.prototype._moveChildren=function(t,e){var i=t[0];if(i!=e){if(i<0||i>=this._children.length)throw new RangeError("index is out of range: "+t[0]);if(e<0||e>=this._children.length)throw new RangeError("newIndex is out of range: "+e);for(var o=this._children,r=[],n=t.length-1;n>=0;n--)r.push(o.splice(t[n],1)[0]);for(n=0;n<r.length;n++)o.splice(e+n,0,r[n])}},e.prototype._changeParent=function(t,e){if(e<0||e>t._children.length)throw new RangeError("index is out of range: "+e);var i=this.parent,o=this.index;i._children.splice(o,1),i._descendantCountChanged(-1-this.descendantCount),i._detach(this),t._children.splice(e,0,this),t._descendantCountChanged(1+this.descendantCount),t._attach(this)},e.prototype._insertChild=function(t,e,i,o){var r=this.provider;if(r&&!i){if(!r._checkClientState())return!1;r.refreshFieldFormats()}if(!e)throw new Error("child is null");if(this._children=this._children||[],t<0||t>this._children.length)throw new RangeError("Insert index is invalid: "+t);return!(!i&&!this._doChildAdding(t,e))&&(this._children.splice(t,0,e),this._descendantCountChanged(1+e.descendantCount),this._attach(e),o||e._changeRowState(at.CREATED,!0,!1),this._doChildAdded(t,e),!0)},e.prototype._insertChildren=function(t,e,i,o){var r=this.provider;if(r&&!i){if(!r._checkClientState())return!1;r.refreshFieldFormats()}if(this._children=this._children||[],t<0||t>this._children.length)throw new RangeError("Insert index is invalid: "+t);if(i||this._doRowsAdding(t,e)){for(var n=0,s=0;s<e.length;s++){var a=e[s];this._children.splice(t+s,0,a),this._attach(a),n+=a.descendantCount,o||a._changeRowState(at.CREATED,!0,!1)}return this._descendantCountChanged(n),this._doRowsAdded(t,e),!0}return!1},e.prototype._addChild=function(t,e,i){return this._insertChild(this.count,t,e,i)},e.prototype.$_removeChild=function(t,e,i){return!(!i&&!this._doChildRemoving(t))&&(this._children.splice(e,1),this._descendantCountChanged(-1-t.descendantCount),this._detach(t),this._doChildRemoved(t),!0)},e.prototype._removeChild=function(t,e){var i=this.provider;if(!i||e||i._checkClientState()){if(t&&this._children)for(var o=this._children.length;o--;)if(this._children[o]===t){if(!i.softDeleting||!i.checkStates)return this.$_removeChild(t,o,e);switch(t.rowState){case at.CREATED:if(i.deleteCreated)return this.$_removeChild(t,o,e);t._changeRowState(at.CREATE_AND_DELETED,!0,!1);break;case at.DELETED:case at.CREATE_AND_DELETED:break;default:t._changeRowState(at.DELETED,!0,!1)}}return!1}},e.prototype._removeChildren=function(){this._children&&this._children.length>0&&(this._children.splice(0,this._children.length),this._descendantCountChanged(-this._descendantCount),this._doCleared())},e.prototype._setChildren=function(t){this._children&&this._children.length>0&&this._children.splice(0,this._children.length);var e,i=-this._descendantCount;if(t&&(e=t.length)>0){this._children||(this._children=[]);for(var o=0;o<e;o++){var r=t[o];this._children.push(r),i+=1+r.descendantCount,this._attach(r)}}this._descendantCountChanged(i)},e.prototype.$_findChild=function(t,e){for(var i=t.length,o=this.count,r=0;r<o;r++){for(var n=this._children[r],s=!0,a=0;a<i;a++)if(!t[a].equalValues(e[a],n.getValue(t[a].index))){s=!1;break}if(s)return n;if(n=n.$_findChild(t,e))return n}return null},e.prototype._collectStateRows=function(t,e){for(var i=this.count;i--;){var o=this.getChild(i),r=o.rowState;!e||r!=at.DELETED&&r!=at.CREATE_AND_DELETED?(r!=at.NONE&&t.push(o),o._collectStateRows(t,e)):e.push(o)}},e.prototype._clearOrgValues=function(){for(var t=this.count;t--;)this.getChild(t)._clearOrgValues()},e.prototype._restoreState=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i)._restoreState(!0,e);return!1},e.prototype.$_restoreRow=function(t,e){if(t)for(var i=this.count;i--;)this.getChild(i).$_restoreRow(!0,e);return!1},e.prototype._doChildAdding=function(t,e){var i=this.provider;return!i||i._rowAdding(this,t,e)},e.prototype._doChildAdded=function(t,e){var i=this.provider;i&&i._rowAdded(e)},e.prototype._doRowsAdding=function(t,e){var i=this.provider;return!i||i._rowsAdding(this,t,e)},e.prototype._doRowsAdded=function(t,e){var i=this.provider;i&&i._rowsAdded(this,e)},e.prototype._doChildRemoving=function(t){var e=this.provider;return!e||e._rowRemoving(t)},e.prototype._doChildRemoved=function(t){var e=this.provider;e&&e._rowRemoved(t)},e.prototype._doCleared=function(){var t=this.provider;t&&t._rowCleared(this)},e}(ft),Li=function(t){function e(e){var i=t.call(this,e)||this;return i._provider=e,i}return o(e,t),e.prototype._doDispose=function(){this._provider=null,t.prototype._doDispose.call(this)},e.prototype.set=function(t){for(var e=[],i=0;i<t.count;i++)e.push(t.getChild(i).copy());this._setChildren(e)},Object.defineProperty(e.prototype,"provider",{get:function(){return this._provider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowId",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasChildren",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.copy=function(){for(var t=new e(null),i=0,o=this.count;i<o;i++){var r=this.getChild(i).copy();t._addChild(r,!0,!0)}return t._provider=this._provider,t},e.prototype._changeRowState=function(t,e,i){return!1},e.prototype.getObject=function(){return null},e.prototype.getValue=function(t){},e.prototype.setValue=function(t,e,i){return!1},e.prototype._attach=function(t){t._parent=this},e.prototype._detach=function(t){t._parent===this&&(t._parent=null)},e.prototype.update=function(t,e){return!1},e.prototype.$_setHasChildren=function(t){},e.prototype.$_setIconIndex=function(t){},e.prototype._keepRow=function(t){},e.prototype._yieldRow=function(t,e){},e.prototype._keepStates=function(t){},e.prototype._yieldStates=function(t,e){},e}(Mi),Fi=function(t){function e(){var e=t.call(this)||this;return e._nextRowId=0,e._commandListeners=[],e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.editCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},e.prototype.registerCommandListener=function(t){t&&this._commandListeners.indexOf(t)<0&&this._commandListeners.push(t)},e.prototype.unregisterCommandListener=function(t){var e=this._commandListeners.indexOf(t);e>=0&&this._commandListeners.splice(e,1)},e.prototype._keepCommandStates=function(t){if(this._commandListeners.length>0)return this._commandListeners[0].getCommandStates(t)},e.prototype._yieldCommandStates=function(t,e){if(this._commandListeners.length>0)return this._commandListeners[0].setCommandStates(t,e)},e}(Pe),Ni=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._rows=i.slice(),n._fields=o.slice(),n._value=r,n}return o(e,t),e.prototype._doRun=function(t){for(var e=t,i=[],o=0,r=this._rows;o<r.length;o++){var n=r[o]._keepRow(e);i.push(n)}return e.$_fillValue(this._rows,this._fields,this._value),i},e.prototype._doRedo=function(t,e){t.$_fillValue(this._rows,this._fields,this._value)},e.prototype._doUndo=function(t,e){for(var i=0;i<this._rows.length;i++){this._rows[i]._yieldRow(t,e[i])}t._fireRefresh()},e}(ki),Vi=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._rows=i.slice(),n._values=n._cloneValues(o.slice()),n}return o(e,t),e.prototype._doRun=function(t){for(var e=t,i=[],o=0,r=this._rows;o<r.length;o++){var n=r[o]._keepRow(e);i.push(n)}return e.$_updateRows(this._rows,this._values,this._strict),i},e.prototype._doRedo=function(t,e){t.$_updateRows(this._rows,this._values,this._strict)},e.prototype._doUndo=function(t,e){for(var i=0;i<this._rows.length;i++){this._rows[i]._yieldRow(t,e[i])}t._fireRefresh()},e}(ki),Bi=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._row=i,n._field=o,n._value=r instanceof Date?new Date(r):r,n}return o(e,t),e.prototype._doRun=function(t){var e={};return e.row=this._row._keepRow(t),(e.result=this._row.$_setValue(this._field,this._value,!1))&&(this._newState=this._row.rowState),e},e.prototype._doRedo=function(t,e){this._row.$_setValue(this._field,this._value,!1)},e.prototype._doUndo=function(t,e){this._row._yieldRow(t,e.row),e.row.state!=this._newState&&t._fireRowStateChanged(this._row),t._valueChanged(this._row,this._field)},e}(ki),$i=function(t){function e(e,i){var o=t.call(this,e)||this;if(o._iconIndex=-1,o._hasChildren=!1,o._parent=null,o._values=null,o._orgValues=null,o._state=at.NONE,e&&i){var r=e.fieldCount;Math.min(i.length,r);o._values=new Array(r);for(var n=0,s=Math.min(i.length,r);n<s;n++)o._values[n]=e.getField(n).readValue(i[n])}return o}return o(e,t),e.prototype._doDispose=function(){this._values=null,this._orgValues=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"provider",{get:function(){return this._parent&&this._parent.provider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._parent?this._parent.indexOf(this):-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._parent?this._parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasChildren",{get:function(){return this._hasChildren},set:function(t){if(t!=this._hasChildren){this._hasChildren=t;var e=this.provider;e&&e._hasChildrenChanged(this)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconIndex",{get:function(){return this._iconIndex},set:function(t){if(isNaN(t)&&(t=-1),t!=this._iconIndex){this._iconIndex=t;var e=this.provider;e&&e._iconIndexChanged(this)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowState",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this._values&&this._values.slice()},enumerable:!0,configurable:!0}),e.prototype._attach=function(t){t._parent=this},e.prototype._detach=function(t){t._parent===this&&(t._parent=null)},e.prototype._changeRowState=function(t,e,i){var o=this.provider;if(o&&t!=this._state){var r=this._state;return this._state=t,t==at.UPDATED&&o._needOrgValues?this._orgValues=this._values.concat():r==at.UPDATED&&this._orgValues&&(this._orgValues=null),e&&o._stateChanged(this,i),!0}return!1},e.prototype.getValue=function(t){if(this.provider){if(this._checkFieldIndex(t),this._values)return this._values[t];throw new Error("Row data is not loaded")}},e.prototype.setValue=function(t,e,i){var o=this.provider;return!!o&&(o.undoable?o._commands.execute(new Bi(o,this,t,e)):this.$_setValue(t,e,i))},e.prototype.getObject=function(){var t=this.provider;if(t){for(var e=t.fieldCount,i={},o=0;o<e;o++){i[t.getOrgFieldName(o)]=this._values[o]}return i}return null},e.prototype.copy=function(){var t=new e(null,null);t._rowId=this._rowId,t._iconIndex=this._iconIndex,t._hasChildren=this._hasChildren,t._state=this._state,t._values=this._values?this._values.concat():null;for(var i=0,o=this.count;i<o;i++){var r=this.getChild(i).copy();t._addChild(r,!0,!0)}return t},e.prototype.update=function(t,e){var i=this.provider;return!!i&&(i.undoable?i._commands.execute(new Ti(i,this,t,e)):this.$_update(i,t,e,!1))},e.prototype._keepRow=function(t){var e={};return e.values=this._values&&this._values.slice(),e.state=this._state,e.orgValues=this._orgValues&&this._orgValues.slice(),e.outer=t._keepCommandStates(this),e},e.prototype._yieldRow=function(t,e){this._values=e.values&&e.values.slice(),this._state=e.state,this._orgValues=e.orgValues&&e.orgValues.slice(),t._yieldCommandStates(this,e.outer)},e.prototype._keepStates=function(t){},e.prototype._yieldStates=function(t,e){},e.prototype._keepState=function(){return this._state},e.prototype._yieldState=function(t){this._state=t},e.prototype.$_setValue=function(t,e,i){var o=this.provider;if(o){if(!o._checkClientState())return;if(o.refreshFieldFormats(),this._checkFieldIndex(t),this._values){if(e!=this._values[t]){var r=null,n=o.getField(t),s=o.checkStates&&(this._state==at.NONE||!this._state);!i&&s&&o._needOrgValues&&(r=this._values.concat()),this._values[t]=n.readValue(e),o._internalCalculateValues(this._values,this.rowId),!i&&s?(o._needOrgValues&&(this._orgValues=r),this._state=at.UPDATED,o._stateChanged(this,!1)):o._needRestore&&this.$_restoreState(o),o._valueChanged(this,t)}return!0}throw new Error("Row data is not loaded")}},e.prototype.$_update=function(t,e,i,o){if(!o){if(!t._checkClientState())return;t.refreshFieldFormats()}return!(!e||!o&&!t._rowUpdating(this))&&(this.$_internalUpdate(e,i,!0),t._rowUpdated(this),!0)},e.prototype._clearOrgValues=function(){this._orgValues&&(this._orgValues.length=0,this._orgValues=null),t.prototype._clearOrgValues.call(this)},e.prototype._restoreState=function(e,i){var o=this.$_restoreState(this.provider);return o&&i&&i.push(this),t.prototype._restoreState.call(this,e,i),o},e.prototype.$_restoreRow=function(e,i){var o=!1;if(this._state===at.UPDATED){var r=this._orgValues;if(r){for(var n=this._values,s=0,a=Math.min(r.length,this.provider.fieldCount);s<a;s++)n[s]=r[s];this._state=at.NONE,i&&i.push(this),o=!0}}return t.prototype.$_restoreRow.call(this,e,i),o},e.prototype.$_restoreState=function(t){if(this._state==at.UPDATED&&this._orgValues){for(var e=this._orgValues,i=this._values,o=this.provider,r=o.strictRestore,n=0,s=o.fieldCount;n<s;n++){var a=i.length>n?i[n]:void 0,l=e.length>n?e[n]:void 0;if(r){if(!o.getField(n).equalValues(a,l))return!1}else if(!o.getField(n).sameValues(a,l))return!1}return this._state=at.NONE,!0}return!1},e.prototype.$_getUpdatedCells=function(){var t=this._orgValues,e=this._values,i=this.provider,o=i.strictRestore,r=[];if(!t||t.length<=0)return null;for(var n=0,s=i.fieldCount;n<s;n++){var a=e.length>n?e[n]:void 0,l=t.length>n?t[n]:void 0,h=i.getField(n);h.calculated||(o?h.equalValues(a,l)||r.push({fieldName:i.getOrgFieldName(n),oldValue:t[n],newValue:e[n]}):h.sameValues(a,l)||r.push({fieldName:i.getOrgFieldName(n),oldValue:t[n],newValue:e[n]}))}return r},e.prototype.$_setHasChildren=function(t){this._hasChildren=t},e.prototype.$_setIconIndex=function(t){this._iconIndex=isNaN(t)?-1:t},e.prototype.$_internalUpdate=function(t,e,i){var o=!1,r=Array.isArray(t),n=this.provider;if(n){var s=Math.min(n.fieldCount,r?t.length:n.fieldCount),a=n.checkStates&&(this._state==at.NONE||!this._state),l=null;a&&n._needOrgValues&&(l=this._values.concat());for(var h=0;h<s;h++){var u=n.getField(h);if(r||t.hasOwnProperty(u.orgFieldName)){var c=r?t[h]:t[u.orgFieldName];e&&void 0===c||(o=!n._needRestore||(o||(e?!u.equalValues(this._values[h],u.readValue(c)):!u.sameValues(this._values[h],u.readValue(c)))),this._values[h]=n.getField(h).readValue(c))}}n._internalCalculateValues(this._values,this.rowId),a&&o?(l&&(this._orgValues=l),this._state=at.UPDATED,i&&n._stateChanged(this,!1)):n._needRestore&&this.$_restoreState(n)}},e}(Mi),Ai=function(t){function e(e,i){var o=t.call(this)||this;return o._countDirty=!1,o._tagLock=!1,o._points=[],o._nextPoint=0,o._rowMap=[],o._needOrgValues=!1,o._needRestore=!1,o._checkParentProc=null,o._hiddenRows=[],o.$_handler=i,e&&(o._commands=new Pi(o)),o._rootRow=new Li(o),o._tags=new gi(o),o}return o(e,t),e.prototype._doDispose=function(){this._commands=this._commands&&this._commands.dispose(),this._points=null,this._rootRow=null,this._rowMap=null,this._tags=null,this._hiddenRows=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rootRow",{get:function(){return this._rootRow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parentCallback",{get:function(){return this._parentCallback},set:function(t){this._parentCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needOrgValues",{get:function(){return this._needOrgValues},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"needRestore",{get:function(){return this._needRestore},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoable",{get:function(){return this._undoable&&!!this._commands},set:function(t){t!=this.undoable&&(this._undoable=t,this._commands&&this._commands.flush())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handler",{get:function(){return this.$_handler},enumerable:!0,configurable:!0}),e.prototype.addTag=function(t){this._tags.add(t)},e.prototype.removeTag=function(t){this._tags.remove(t)},e.prototype.setRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var n=0,s=this.getFieldIndex(e);if(s>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var a=new Si(this,this._rootRow);a.parentCallback=this._parentCallback,n=a.load(null,t,s,i,this.getFieldIndex(o),this.getFieldIndex(r)),this._checkSum(n)}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),n},e.prototype.setCsvRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var n=0,s=this.getFieldIndex(e);if(s>=0){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var a=new Oi(this,this._rootRow);a.parentCallback=this._parentCallback,n=a.load(null,t,s,i,this.getFieldIndex(o),this.getFieldIndex(r)),this._checkSum(n)}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),n},e.prototype.setXmlRows=function(t,e,i,o){if(!this._checkClientState())return-1;var r=0;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats(),r=new Di(this,this._rootRow).load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o)),this._checkSum(r)}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),r},e.prototype.setJsonRows=function(t,e,i,o){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var r=new Ri(this,this._rootRow);this._rowCount=r.load(null,t,e,this.getFieldIndex(i),this.getFieldIndex(o))}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},e.prototype.setJsonRows2=function(t,e,i,o,r){if(!this._checkClientState())return-1;if(t){this.beginUpdate();try{this._clearRows(),this.refreshFieldFormats();var n=new Ri(this,this._rootRow);this._rowCount=n.load2(null,t,e,i,o,r)}finally{this.endUpdate(!1),this.clearCommandStack()}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),this.fireDataLoadComplated(),this.rowCount},e.prototype.appendDataRows=function(t,e,i,o,r,n){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(i);if(a>=0){var l=new Si(this,this._rootRow);l.parentCallback=this._parentCallback,this.beginUpdate();try{this.refreshFieldFormats(),s=l.load(t,e,a,o,this.getFieldIndex(r),this.getFieldIndex(n))}finally{if(this.endUpdate(!1),s>0){var h=l.insertedRows;h&&(s=h.length)>0&&this._rowsAdded(t,h)}}}return s},e.prototype.appendCsvRows=function(t,e,i,o,r,n){if(!this._checkClientState())return-1;var s=0,a=this.getFieldIndex(i);if(a>=0){this.beginUpdate();try{this.refreshFieldFormats();var l=new Oi(this,this._rootRow);l.parentCallback=this._parentCallback,s=l.load(t,e,a,o,this.getFieldIndex(r),this.getFieldIndex(n))}finally{this.endUpdate(!1)}}return this._tags.setRows(),this._fireReset(),this._fireRowCountChanged(),s},e.prototype.appendXmlRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var n=0;if(e){var s=new Di(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),n=s.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(r))}finally{if(this.endUpdate(!1),n>0){var a=s.insertedRows;a&&(n=a.length)>0&&this._rowsAdded(t,a)}}}return this._fireRowCountChanged(),n},e.prototype.appendJsonRows=function(t,e,i,o,r){if(!this._checkClientState())return-1;var n=0;if(e){var s=new Ri(this,this._rootRow);this.beginUpdate();try{this.refreshFieldFormats(),n=s.load(t,e,i,this.getFieldIndex(o),this.getFieldIndex(r))}finally{if(this.endUpdate(!1),n>0){var a=s.insertedRows;a&&(n=a.length)>0&&this._rowsAdded(t,a)}}}return this._fireRowCountChanged(),n},e.prototype.setIconIndex=function(t,e){return t.iconIndex!=e&&(t.$_setIconIndex(e),!0)},e.prototype.setHasChildren=function(t,e){return e!=t.hasChildren&&(t.$_setHasChildren(e),!0)},e.prototype.getChildCount=function(t){return(t||this._rootRow).count},e.prototype.getRows=function(t){return(t||this._rootRow).children},e.prototype.getDescendantCount=function(t){return(t||this._rootRow).descendantCount},e.prototype.getDescendants=function(t,e){function i(t,e,o){for(var r=0,n=t.count;r<n;r++){var s;e.push(s=t.getChild(r)),o>s.level&&i(s,e,o)}}e=arguments.length>1?e:0;var o=t||this._rootRow;if(e<=0)return o.descendants;if(e>o.level){var r=[];return i(o,r,e),r}return null},e.prototype.getChild=function(t,e){return(t||this._rootRow).getChild(e)},e.prototype.hasData=function(t){return null!=this.rowById(t)},e.prototype.rowById=function(t){var e=this._rowMap[t];return e||(e=this._findRowById(t))&&(this._rowMap[t]=e),e},e.prototype.getDataRow=function(t){var e=this._rowMap[t];return null==e&&(e=this._findRowById(t)),null!=e?t:-1},e.prototype.rowsByIds=function(t,e){if(t){for(var i=[],o=0,r=t;o<r.length;o++){var n=r[o],s=this.rowById(n);(s||e)&&i.push(s)}return i}return null},e.prototype.createRow=function(t,e,i,o){void 0===o&&(o=!0);var r=null;if(o&&this.refreshFieldFormats(),Array.isArray(t))r=new $i(this,t);else if(t){var n=new Array(this.fieldCount);for(var s in t){var a=this.getFieldIndex(s);a>=0&&(n[a]=t[s])}r=new $i(this,n)}return r&&(this._internalCalculateValues(r._values,r.rowId),r._iconIndex=e,r._hasChildren=i),r},e.prototype.clearRows=function(){this._checkClientState()&&(this._clearRows(),this.clearCommandStack(),this._eventLock<=0&&(this._fireRefresh(),this._fireRowCountChanged(),this.fireDataLoadComplated()))},e.prototype.removeRows=function(t){for(var e=[],i=t.length;i--;){(s=this.rowById(t[i]))&&e.push(s)}function o(t,i){for(var o=i;o>=0;o--)if(e[o].isAncestorOf(t))return!1;return!0}if(this._checkClientState()&&e&&!(e.length<1)){e.sort((function(t,e){return t.level-e.level}));var r=e;for(i=e.length;i--;)e[i].level>1&&!o(e[i],i-1)&&e.splice(i,1);if(e.length<1||!this._rowsRemoving(e))return!1;if(this.softDeleting&&this.checkStates){var n=[];for(i=e.length-1;i>=0;i--){var s,a=!1;switch((s=e[i]).rowState){case at.CREATED:this.deleteCreated||(a=s._changeRowState(at.CREATE_AND_DELETED,!1,!1),e.splice(i,1));break;case at.DELETED:case at.CREATE_AND_DELETED:e.splice(i,1);break;default:a=s._changeRowState(at.DELETED,!0,!1),e.splice(i,1)}a&&n.push(s)}n.length>0&&this._fireRowStatesChanged(n)}return this.deleteRows(r),!0}},e.prototype.changeRowIndex=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t.parent,o=i.children.length,r=t.index,n=Math.min(Math.max(r+e,0),o-1);return 0!=(e=n-r)&&(!!this._fireRowSiblingMoving(t,e)&&(i._moveChild(r,n),this._fireRowSiblingMoved(t,e),!0))},e.prototype.changeRowsIndex=function(t,e){if(0==e)return!1;if(!this._checkClientState())return!1;var i=t[0].parent,o=i.children.length,r=t[0].index,n=Math.min(Math.max(r+e,0),o-1);if(0==(e=n-r))return!1;for(var s=[],a=0,l=t;a<l.length;a++){var h=l[a];s.push(h.index)}return!!this._fireRowsSiblingMoving(t,e)&&(i._moveChildren(s,n),this._fireRowsSiblingMoved(t,e),!0)},e.prototype.changeRowParent=function(t,e,i){if(t===e)throw new Error("Parent must not be self.");if(t.isAncestorOf(e))throw new Error("Can`t move to child of a descendant.");var o=t.parent;if(o===e&&i==t.index)return!1;if(!this._checkClientState())return!1;e._children||(e._children=[]);var r=e._children.length;return i=Math.min(Math.max(i,0),r),!!this._fireRowParentChanging(t,e,i)&&(t._changeParent(e,i),e instanceof Li||this.setHasChildren(e,!0),o instanceof Li||0!=o.count||this.setHasChildren(o,!1),this._fireRowParentChanged(t,e,i),!0)},e.prototype.moveRows=function(t,e){return this.changeRowsIndex(t,e.index-t[0].index),!1},e.prototype.toTreeString=function(){return this._rootRow.toTreeString()},e.prototype.beginUpdate=function(){this._checkClientState(),this._eventLock++},e.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._checkClientState(),this._eventLock=Math.max(0,this._eventLock-1),0==this._eventLock&&(t&&(this._resetLock>0?this._fireReset():this._fireRefresh(),this._countDirty&&this._fireRowCountChanged()),this._resetLock=0,this._countDirty=!1)},e.prototype.$_extractTreeRowIds=function(t){if(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++)i[o]=t[o].rowId;return i}return null},e.prototype.$_searchDataRow=function(t,e,i,o,n,s){var a=t.length;if(a<1)return-1;var l=Math.min(e.length,i.length);if(l<1)return-1;for(var h=!o||o.allFields,u=o&&o.caseSensitive,c=o&&o.partialMatch,d=null,p=[],_=0;_<l;_++)p[_]=this.getField(e[_]).dataType;n=Math.max(0,n),s=Math.min(a-1,s);for(var f=n;f<=s;f++){var g=!0;if(g)for(_=0;_<l;_++){var y=this.rowById(t[f]).getValue(e[_]);switch(p[_]){case r.DATETIME:case r.DATE:if(i[_]instanceof Date)g=lt.compareTextValue(i[_],y,u,c);else{if(!d){var m=/[.]/.test(i[_])?"yyyy.MM.dd":/[/]/.test(i[_])?"yyyy/MM/dd":/[-]/.test(i[_])?"yyyy-MM-dd":"yyyyMMdd";d=new Ge(m)}g=lt.compareTextValue(i[_],y?d.getText(y):y,u,c)}break;default:g=lt.compareTextValue(i[_],y,u,c)}if(g&&!h)return t[f];if(!g&&h)break}if(g)return t[f]}return-1},e.prototype.searchDataRow=function(t,e){var i;if(void 0===e&&(e=null),t instanceof Ue||(t=new Ue(t)),null!=e){var o=this.rowById(e);if(!o)return-1;i=this.$_extractTreeRowIds(o.descendants)}else i=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(i)||i.length<=0)return-1;var r=i.length,n=Math.max(0,i.indexOf(t.startIndex)),s=t.fields,a=t.values,l=-1;if(s&&s.length>0&&a&&a.length>0){for(var h=s.length,u=[],c=0;c<h;c++){var d=s[c];if(lt.isNumber(d))u.push(d);else{var p=this.getFieldIndex(s[c]);p>=0&&u.push(p)}}u.length>0&&(l=n<r?this.$_searchDataRow(i,u,a,t,n,r-1):-1)<0&&t.wrap&&n>0&&(l=this.$_searchDataRow(i,u,a,t,0,n-1))}return l},e.prototype.$_searchData=function(t,e,i,o,n,s,a){var l=this.rowCount;if(l<1)return null;for(var h=o&&o.caseSensitive,u=o&&o.partialMatch,c=this.fieldCount,d=e.length,p=null,_=[],f=0;f<c;f++)_[f]=this.getField(f).dataType;n=Math.max(0,n),s=Math.min(l-1,s),(a=Math.max(0,a))>=e.length&&(n++,a=0);for(var g=n;g<=s;g++)for(f=g>n?0:a;f<d;f++){var y=!1,m=e[f];if(m>=0&&m<c){var b=this.rowById(t[g]).getValue(m);switch(_[m]){case r.DATETIME:case r.DATE:if(i instanceof Date)y=lt.compareTextValue(i,b,h,u);else{if(!p){var v=/[.]/.test(i)?"yyyy.MM.dd":/[/]/.test(i)?"yyyy/MM/dd":/[-]/.test(i)?"yyyy-MM-dd":"yyyyMMdd";p=new Ge(v)}y=lt.compareTextValue(i,b?p.getText(b):b,h,u)}break;default:y=lt.compareTextValue(i,b,h,u)}if(y)return{dataRow:t[g],fieldIndex:m,searchFieldIndex:f}}}return null},e.prototype.searchData=function(t,e){var i;if(void 0===e&&(e=-1),t instanceof ze||(t=new ze(t)),e>=0){var o=this.rowById(e);if(!o)return null;i=this.$_extractTreeRowIds(o.descendants)}else i=this.$_extractTreeRowIds(this._rootRow.descendants);if(!Array.isArray(i)||i.length<=0)return null;var r=i.length,n=null,s=t.fields,a=t.value,l=Math.max(0,t.startFieldIndex),h=Math.max(0,i.indexOf(t.startIndex));if(!s||s.length<1){s=[];for(var u=this.getFields(),c=0;c<u.length;c++)s.push(u[c].orgFieldName)}if(s&&s.length>0&&null!=a){for(var d=s.length,p=[],_=0;_<d;_++){var f=s[_];lt.isNumber(f)?p.push(f):p.push(this.getFieldIndex(s[_]))}p.length>0&&(!(n=h<r?this.$_searchData(i,p,a,t,h,r-1,l):null)&&t.wrap&&h>0&&(n=this.$_searchData(i,p,a,t,0,h-1,0)),n&&(n.fieldName=this.getOrgFieldName(n.fieldIndex)))}return n},e.prototype.$_hideDataRows=function(t,e){if(null!=t){for(var i=lt.isArray(t)?t:[t],o=this._hiddenRows.length,r=[],n=0,s=i.length;n<s;n++){var a=i[n];if(null!=this._findRowById(a))if(r.push(a),e)this._hiddenRows.indexOf(a)<0&&this._hiddenRows.push(a);else{var l=this._hiddenRows.indexOf(a);l>=0&&this._hiddenRows.splice(l,1)}}this._hiddenRows.length!==o&&this._fireRowsHiddenChanged(r,e)}},e.prototype.hideRows=function(t){this.$_hideDataRows(t,!0)},e.prototype.showRows=function(t){this.$_hideDataRows(t,!1)},e.prototype.clearHiddenRows=function(){if(this._hiddenRows.length>0){var t=this._hiddenRows.concat();this._hiddenRows=[],this._fireRowsHiddenChanged(t,!1)}},e.prototype.getHiddenRows=function(){var t=this._hiddenRows.concat();return t.sort((function(t,e){return t-e})),t},e.prototype.isHiddenRow=function(t){return!!this.rowById(t)&&this._hiddenRows.indexOf(t)>=0},Object.defineProperty(e.prototype,"hiddenCount",{get:function(){return this._hiddenRows.length},enumerable:!0,configurable:!0}),e.prototype.summarize=function(t,e){if(null==t)return!1;t.clear();var i=this.rowCount;if(i<1)return!1;if(t.count=i,t.sum=0,t.min=Number.MAX_VALUE,t.max=Number.MIN_VALUE,t.dataCount=0,this.$_summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,t.dataAvg=0===t.dataCount?NaN:t.sum/t.dataCount,e){var o=this.$_summarizeVars(this._rootRow,t);t.varsp=o/t.count,t.vars=o/(t.count-1)}return!0},e.prototype.summarizeRange=function(t,e,i){if(null==t||null==e)return!1;t.clear();var o=e.length;if(o<1)return!1;for(var r=0,n=t.field,s=0,a=NaN,l=NaN,h=0;h<o;){var u=e[h++].getValue(n);if(!isNaN(u)){s=a=l=u,r++;break}}for(;h<o;){u=e[h++].getValue(n);isNaN(u)||(s+=u,u<a&&(a=u),u>l&&(l=u),r++)}if(t.count=o,r>0&&(t.sum=s,t.min=a,t.max=l,t.avg=s/o,t.dataCount=r,t.dataAvg=0===t.dataCount?NaN:t.sum/t.dataCount,i))if(o>1){for(var c=0,d=t.avg,p=0;p<o;p++){u=e[p++].getValue(n);isNaN(u)||(c+=Math.pow(u-d,2))}t.varsp=c/o,t.vars=c/(o-1)}else t.varsp=0,t.vars=0;return!0},Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._rootRow.descendantCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"immediateUpdate",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSummarized",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canUndo",{get:function(){return this._commands&&this._commands.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this._commands&&this._commands.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoing",{get:function(){return this._commands&&this._commands.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redoing",{get:function(){return this._commands&&this._commands.redoing},enumerable:!0,configurable:!0}),e.prototype.getRow=function(t){return this.rowById(t).values},e.prototype.deleteRows=function(t){if(this._checkClientState()&&t&&t.length>0){var e=this._softDeleting;this.beginUpdate();try{this._softDeleting=!1,this._tagLock=!0;try{for(var i=t.length-1;i>=0;i--){var o=t[i],r=o&&o.parent;r&&r._removeChild(o,!0)}}finally{this._tagLock=!1}}finally{this._softDeleting=e,this.endUpdate(!1)}this._rowsRemoved(t)}},e.prototype.equalValues=function(t,e,i){if(e!==i){var o=this._fields[t],r=e.getValue(t),n=i.getValue(t);return o.equalValues(r,n)}return!0},e.prototype.sameValues=function(t,e,i,o){if(e!==i){var r=this._fields[t],n=e.getValue(t),s=i.getValue(t);return o?String(n).toLowerCase()==String(s).toLowerCase():r.sameValues(n,s)}return!0},e.prototype.equalTexts=function(t,e,i){return this.sameValues(t,e,i,!0)},e.prototype.compareValues=function(t,e,i,o){if(e!==i){var r=e.getValue(t),n=i.getValue(t);return null==r?null==n?0:-1:null==n||(r=o?String(r).toLowerCase():r)>(n=o?String(n).toLowerCase():n)?1:r<n?-1:0}return 0},e.prototype.compareTexts=function(t,e,i){return this.compareValues(t,e,i,!0)},e.prototype.compareNumbers=function(t,e,i){if(e!==i){var o=e.getValue(t),r=i.getValue(t);return isNaN(o)?isNaN(r)?0:-1:isNaN(r)||o>r?1:o<r?-1:0}return 0},e.prototype.compareBools=function(t,e,i){if(e!==i){var o=e.getValue(t),r=i.getValue(t);return o&&!r?1:!o&&r?-1:0}return 0},e.prototype.compareDates=function(t,e,i){if(e!==i){var o=e.getValue(t),r=i.getValue(t);return o instanceof Date?r instanceof Date?o>r?1:o<r?-1:0:1:r instanceof Date?-1:0}return 0},e.prototype.compareObjects=function(t,e,i){var o=this._values[e],r=this._values[i];if(o===r)return 0;var n=o?o[t]:null,s=r?r[t]:null;return n?s?this.getField(t).$_compareObject(n,s,e,i):1:s?-1:0},e.prototype.getDistinctValues=function(t,e,i){if(void 0===e&&(e=-1),void 0===i&&(i=n.ASCENDING),this._checkFieldIndex(t),e<0&&(e=this.getDescendantCount(this._rootRow)),e>0){for(var o=this.getDescendants(this._rootRow,0),s=this.getField(t).dataType,a=[],l=[],h=void 0,u=0,c=o.length;u<c;u++)switch(h=o[u].values[t],s){case r.NUMBER:null!=h&&isNaN(h)||a.indexOf(h)<0&&a.push(h);break;case r.DATE:case r.DATETIME:h?l.indexOf(h.getTime())<0&&(l.push(h.getTime()),a.push(h)):(l.push(h),a.push(h));break;case r.OBJECT:default:a.indexOf(h)<0&&a.push(h)}return i!==n.NONE&&(a=lt.included(s,r.DATETIME,r.DATE)?a.sort((function(t,e){return t-e})):a.sort(),i===n.DESCENDING&&(a=a.reverse())),a.slice(0,e)}return null},e.prototype._doFieldsReset=function(){t.prototype._doFieldsReset.call(this),this._clearRows(),this._fireReset()},e.prototype.refreshClients=function(){this._fireRefreshClient()},e.prototype.savePoint=function(t){if(void 0===t&&(t=!0),this._checkClientState()){if(this.fieldCount>0&&this._rootRow.count>0){var e=this._rootRow.copy(),i=this._nextPoint++;return t||e.clearRowStates(!1,!1),this._points.push({id:i,data:e}),i}return-1}},e.prototype.rollback=function(t){if(void 0===t&&(t=0),this._checkClientState())for(var e=this._points.length-1;e>=0;e--){var i=this._points[e];if(i.id==t){this.$_removeSavePoints(e+1),this._rowMap=[],this._rootRow.set(i.data),this._fireReset();break}}},e.prototype.$_removeSavePoints=function(t){for(var e=this._points,i=e.length-1;i>=t;i--){e[i].data=null,e.pop()}},e.prototype.clearSavePoints=function(){this.$_removeSavePoints(0)},e.prototype.getSavePoints=function(){for(var t=[],e=0,i=this._points.length;e<i;e++)t.push(this._points[e].id);return t},e.prototype._doCheckStatesChanged=function(){this.$_resetOrgValues()},e.prototype._doRestoreModeChanged=function(){this.$_resetOrgValues()},e.prototype._hasChildrenChanged=function(t){this._fireHasChildrenChanged(t)},e.prototype._iconIndexChanged=function(t){this._fireIconIndexChanged(t)},e.prototype._stateChanged=function(t,e){this._fireRowStateChanged(t,e)},e.prototype._statesChanged=function(t){this._fireRowStatesChanged(t)},e.prototype._valueChanged=function(t,e){this._fireValueChanged(t,e)},e.prototype._rowAdding=function(t,e,i){return this._fireRowAdding(t,e,i)},e.prototype._rowAdded=function(t){this._tagLock||this._tags.addRow(t),this._eventLock<=0&&(this._fireRowAdded(t),this._fireRowCountChanged())},e.prototype._rowsAdding=function(t,e,i){return this._fireRowsAdding(t,e,i)},e.prototype._rowsAdded=function(t,e){this._tagLock||this._tags.addRows(e),this._eventLock<=0&&(this._fireRowsAdded(t,e),this._fireRowCountChanged())},e.prototype._rowRemoving=function(t){return this._fireRowRemoving(t)},e.prototype._rowRemoved=function(t){this._tagLock||this._tags.removeRow(t),this._eventLock<=0&&(this._fireRowRemoved(t),this._fireRowCountChanged())},e.prototype._rowsRemoving=function(t){return this._fireRowsRemoving(t)},e.prototype._rowsRemoved=function(t){this._tagLock||this._tags.removeRows(t),this._eventLock<=0&&(this._fireRowsRemoved(t),this._fireRowCountChanged())},e.prototype._rowCleared=function(t){if(t){var e=t.children;this._tags.removeRows(e),this._eventLock<=0&&(this._fireRowsRemoved(e),this._fireRowCountChanged())}},e.prototype._rowUpdating=function(t){return this._fireRowUpdating(t)},e.prototype._rowUpdated=function(t){this._tags.updateRow(t),this._eventLock<=0&&this._fireRowUpdated(t)},e.prototype._rowsUpdating=function(t){return this._fireRowsUpdating(t)},e.prototype._rowsUpdated=function(t){this._tags.updateRows(t),this._eventLock<=0&&this._fireRowsUpdated(t)},e.prototype.getRowId=function(t){throw new Error("Method not implemented.")},e.prototype.getValue=function(t,e){throw new Error("Method not implemented.")},e.prototype.setValue=function(t,e,i){var o=this.rowById(t);if(o)return o.setValue(e,i,!1)},e.prototype.getRowObject=function(t){var e=this.rowById(t),i=this.fieldCount,o={},r=e._values;if(r)for(var n=0;n<i;n++){o[this.getOrgFieldName(n)]=r[n]}return o},e.prototype.getRowState=function(t){var e=this.rowById(t);return e?e.rowState:at.NONE},e.prototype.setRowState=function(t,e,i){var o=this.rowById(t);if(o&&(this.checkStates||i)){var r=o.rowState;e!=r&&o._changeRowState(e,!0,!!ht(r)||void 0)}},e.prototype.changeRowStates=function(t,e){for(var i=t.length,o=[],r=0;r<i;r++){var n=t[r];n._changeRowState(e,!1,!1)&&o.push(n)}o.length>0&&this._fireRowStatesChanged(o)},e.prototype.clearRowStates=function(t,e){this._checkClientState()&&this._rootRow.clearRowStates(t,e)},e.prototype.$_collectStateRows=function(t,e,i){for(var o=0,r=t.count;o<r;o++){var n=t.getChild(o);n.rowState==e&&i.push(n.rowId),this.$_collectStateRows(n,e,i)}},e.prototype.getStateRows=function(t){var e=[];return this.$_collectStateRows(this._rootRow,t,e),e},e.prototype.$_collectAllStateRows=function(t,e){for(var i=0,o=t.count;i<o;i++){var r=t.getChild(i);switch(r.rowState){case at.CREATED:case at.UPDATED:case at.DELETED:case at.CREATE_AND_DELETED:e[r.rowState].push(r.rowId)}this.$_collectAllStateRows(r,e)}},e.prototype.getAllStateRows=function(){var t={};return t[at.CREATED]=[],t[at.UPDATED]=[],t[at.DELETED]=[],t[at.CREATE_AND_DELETED]=[],this.$_collectAllStateRows(this._rootRow,t),t},e.prototype.setRowStates=function(t,e,i,o){if(this._checkClientState()){for(var r=o?null:[],n=0,s=t.length;n<s;n++){var a=this.rowById(t[n]);a&&(this.checkStates||i)&&a._changeRowState(e,o,!1)&&!o&&r.push(a)}!o&&r.length>0&&this._fireRowStatesChanged(r)}},e.prototype.$_getRowStateCount=function(t,e){for(var i=0,o=0,r=t.count;o<r;o++){var n=t.getChild(o);e.indexOf(n.rowState)>=0&&i++,i+=this.$_getRowStateCount(n,e)}return i},e.prototype.getRowStateCount=function(t){return this.$_getRowStateCount(this._rootRow,t)},e.prototype.restoreUpdatedStates=function(t){this.restoreUpdatedRows(t)},e.prototype.restoreUpdatedRows=function(t){if(this._checkClientState()){var e=[];if(null==t)this._rootRow.$_restoreRow(!0,e);else for(var i=t.length;i--;){var o=this.rowById(t[i]);o&&o.$_restoreRow(!1,e)}1==e.length?this._fireRowStateChanged(e[0],!1):e.length>1&&this._fireRowStatesChanged(e)}},e.prototype.getUpdatedCells=function(t){var e=this.restoreMode;if(e!=pt.AUTO&&e!=pt.EXPLICIT)return null;if(null==t)t=this.getStateRows(at.UPDATED);else if(!Array.isArray(t)){if("number"!=typeof t)return null;t=[t]}if(!Array.isArray(t))return null;for(var i=[],o=0,r=t.length;o<r;o++){var n=this.rowById(t[o]);if(n){var s=n.$_getUpdatedCells();s&&s.length>0&&i.push({__rowId:n.rowId,updatedCells:s})}}return i},e.prototype.canUpdateRow=function(t){return!0},e.prototype.canInsertRow=function(t){return!0},e.prototype.canDeleteRow=function(t){return!0},e.prototype.isDataChanged=function(t,e){if(t<0)return!1;var i=this.rowById(t);!i&&lt.isDebugging();var o=i._orgValues;if(i.rowState!==at.UPDATED||!o)return!1;if(o){var r=o[e],n=i._values[e],s=this._fields[e];return s&&!s.sameValues(r,n)}return!1},e.prototype.$_createFrom=function(t,e){var i=t.getObject();e&&(i=this._convertValues(i,e));for(var o=this.objectToRow(i),r=new $i(this,o),n=0;n<t.count;n++){var s=this.$_createFrom(t.getChild(n),e);r.addChild(s,!1)}return r},e.prototype.$_insertRowsFrom=function(t,e,i,o){for(var r=[],n=0,s=t.rowsByIds(i,!1);n<s.length;n++){var a=s[n];r.push(this.$_createFrom(a,e))}var l=o>=0?this.rowById(o):null,h=l?l.parent:this.rootRow;if(o>=0){var u=h.indexOf(l);h.insertChildren(u,r,!1)}else h.insertChildren(h.count,r,!1)},e.prototype.insertRowsFrom=function(t,e,i,o){this.$_insertRowsFrom(t,e,i,o)},e.prototype.appendRowsFrom=function(t,e,i){this.$_insertRowsFrom(t,e,i,-1)},e.prototype.fillValue=function(t,e,i){if(t&&0!=t.length&&e&&0!=e.length){for(var o=[],r=0;r<t.length;r++){var n=this.rowById(t[r]);n&&o.push(n)}this.undoable?this._commands.execute(new Ni(this,o,e,i)):this.$_fillValue(o,e,i)}},e.prototype.updateRows=function(t,e,i){if(t&&0!=t.length){for(var o=[],r=0;r<t.length;r++){var n=this.rowById(t[r]);n&&o.push(n)}this.undoable?this._commands.execute(new Vi(this,o,e,i)):this.$_updateRows(o,e,i)}},e.prototype._findRowById=function(t){return this._rootRow.findById(t)},e.prototype._checkSum=function(t){if(t!=this.rowCount)throw new Error("Invalid row count: "+t+" <> "+this.rowCount)},e.prototype._clearRows=function(){this._rootRow._removeChildren(),this._rowMap=[],this._rootRow&&this._rootRow.descendantCount>0||(this._nextRowId=1),this._tags.clearRows(),this._checkSum(0)},e.prototype.$_fillValue=function(t,e,i){if(this._checkClientState()&&t&&t.length&&e&&e.length){this.refreshFieldFormats();for(var o=[],r=e.length,n=0,s=t;n<s.length;n++){var a=s[n];a.rowState==at.NONE&&o.push(a);for(var l=a.values,h=0;h<r;h++)l[e[h]]=i;a.$_internalUpdate(l,!1,!1)}o.length>0&&this._fireRowStatesChanged(o),this._tags.updateRows(t),this._fireRowsUpdated(t)}},e.prototype.$_updateRows=function(t,e,i){if(this._checkClientState()&&t&&e){var o=Math.min(t.length,e.length);if(!(o<1)){this.refreshFieldFormats();for(var r=[],n=0;n<o;n++){var s=t[n];s.rowState==at.NONE&&r.push(s),s.$_internalUpdate(e,i,!1)}r.length>0&&this._fireRowStatesChanged(r),this._tags.updateRows(t),this._fireRowsUpdated(t)}}},e.prototype.findRow=function(t,e){return t&&t.length>0&&e&&e.length>=t.length?this._rootRow.findChild(t,e):null},e.prototype.$_resetOrgValues=function(){this._needOrgValues=this.checkStates&&this.restoreMode!=pt.NONE,this._needRestore=this._needOrgValues&&this.restoreMode==pt.AUTO,this._rootRow._clearOrgValues()},e.prototype.$_summarizeChildren=function(t,e){for(var i=e.field,o=t.count,r=0;r<o;r++){var n=t.getChild(r),s=n.getValue(i);isNaN(s)||(e.sum+=s,e.dataCount++,s<e.min&&(e.min=s),s>e.max&&(e.max=s)),this.$_summarizeChildren(n,e)}},e.prototype.$_summarizeVars=function(t,e){for(var i=e.field,o=e.avg,r=t.count,n=0,s=0;s<r;s++){var a=t.getChild(s),l=a.getValue(i);isNaN(l)||(n+=Math.pow(l-o,2)),n+=this.$_summarizeVars(a,e)}return n},e.prototype._summarizeChildren=function(t,e){for(var i=e.field,o=t.count,r=0;r<o;r++){var n=t.getChild(r),s=n.getValue(i);isNaN(s)||(e.sum+=s,s<e.min&&(e.min=s),s>e.max&&(e.max=s)),this._summarizeChildren(n,e)}},e.prototype._summarizeVars=function(t,e){for(var i=e.field,o=e.avg,r=t.count,n=0,s=0;s<r;s++){var a=t.getChild(s),l=a.getValue(i);isNaN(l)||(n+=Math.pow(l-o,2)),n+=this._summarizeVars(a,e)}return n},e.prototype._summarize=function(t,e){if(null==t)return!1;if(t.clear(),this.rowCount<1)return!1;if(t.count=0,t.sum=0,t.min=Number.MIN_VALUE,t.max=Number.MAX_VALUE,this._summarizeChildren(this._rootRow,t),t.avg=t.sum/t.count,e){var i=this._summarizeVars(this._rootRow,t);t.vars=i/t.count}return!0},e.prototype._fireDisposed=function(){this._eventLock<=0&&this.fireEvent(e.DISPOSED)},e.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent(e.RESET)},e.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent(e.REFRESH)},e.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent(e.REFRESH_CLIENT)},e.prototype._fireCleared=function(){this._eventLock<=0&&this.fireEvent(e.CLEARED)},e.prototype._fireRowCountChanged=function(){this._eventLock<=0&&this.fireEvent(e.ROW_COUNT_CHANGED,this.rowCount)},e.prototype._fireRowAdding=function(t,i,o){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROW_ADDING,t,i,o)},e.prototype._fireRowAdded=function(t){this._eventLock<=0&&this.fireEvent(e.ROW_ADDED,t)},e.prototype._fireRowsAdding=function(t,i,o){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROWS_ADDING,t,i,o)},e.prototype._fireRowsAdded=function(t,i){this._eventLock<=0&&this.fireEvent(e.ROWS_ADDED,t,i)},e.prototype._fireRowRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROW_REMOVING,t)},e.prototype._fireRowRemoved=function(t){this._eventLock<=0&&this.fireEvent(e.ROW_REMOVED,t)},e.prototype._fireRowsRemoving=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROWS_REMOVING,t)},e.prototype._fireRowsRemoved=function(t){this._eventLock<=0&&this.fireEvent(e.ROWS_REMOVED,t)},e.prototype._fireRowUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROW_UPDATING,t)},e.prototype._fireRowUpdated=function(t){this._eventLock<=0&&this.fireEvent(e.ROW_UPDATED,t)},e.prototype._fireRowsUpdating=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROWS_UPDATING,t)},e.prototype._fireRowsUpdated=function(t){this._eventLock<=0&&this.fireEvent(e.ROWS_UPDATED,t)},e.prototype._fireValueChanging=function(t,i,o){return!(this._eventLock<=0)||this.fireConfirmEvent(e.VALUE_CHANGING,t,i,o)},e.prototype._fireValueChanged=function(t,i){this._eventLock<=0&&this.fireEvent(e.VALUE_CHANGED,t,i)},e.prototype._fireIconIndexChanged=function(t){this._eventLock<=0&&this.fireEvent(e.ICON_INDEX_CHANGED,t)},e.prototype._fireHasChildrenChanged=function(t){this._eventLock<=0&&this.fireEvent(e.HAS_CHILDREN_CHANGED,t)},e.prototype._fireRowStateChanged=function(t,i){this._eventLock<=0&&this.fireEvent(e.ROW_STATE_CHANGED,t,i)},e.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent(e.ROW_STATES_CHANGED,t)},e.prototype._fireRowSiblingMoving=function(t,i){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROW_SIBLING_MOVING,t,i)},e.prototype._fireRowSiblingMoved=function(t,i){this._eventLock<=0&&this.fireEvent(e.ROW_SIBLING_MOVED,t,i)},e.prototype._fireRowsSiblingMoving=function(t,i){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROWS_SIBLING_MOVING,t,i)},e.prototype._fireRowsSiblingMoved=function(t,i){this._eventLock<=0&&this.fireEvent(e.ROWS_SIBLING_MOVED,t,i)},e.prototype._fireRowParentChanging=function(t,i,o){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROW_PARENT_CHANGING,t,i,o)},e.prototype._fireRowParentChanged=function(t,i,o){this._eventLock<=0&&this.fireEvent(e.ROW_PARENT_CHANGED,t,i,o)},e.prototype._fireRowsParentChanging=function(t,i,o){return!(this._eventLock<=0)||this.fireConfirmEvent(e.ROWS_PARENT_CHANGING,t,i,o)},e.prototype._fireRowsParentChanged=function(t,i,o){this._eventLock<=0&&this.fireEvent(e.ROWS_PARENT_CHANGED,t,i,o)},e.prototype._fireRowsHiddenChanged=function(t,i){this._eventLock<=0&&this.fireEvent(e.ROWS_HIDDEN_CHANGED,t,i)},e.prototype.fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent(e.DATA_LOAD_COMPLATED)},e.prototype.undo=function(){this.canUndo&&this._commands.undo()},e.prototype.redo=function(){this.canRedo&&this._commands.redo(!0)},e.prototype.clearCommandStack=function(){this._commands&&this._commands.flush()},e.DISPOSED="onTreeDataProviderDisposed",e.RESET="onTreeDataProviderReset",e.REFRESH="onTreeDataProviderRefresh",e.REFRESH_CLIENT="onTreeDataProviderRefreshClient",e.CLEARED="onTreeDataProviderCleared",e.ROW_COUNT_CHANGED="onTreeDataProviderRowCountChanged",e.ROW_ADDING="onTreeDataProviderRowAdding",e.ROW_ADDED="onTreeDataProviderRowAdded",e.ROWS_ADDING="onTreeDataProviderRowsAdding",e.ROWS_ADDED="onTreeDataProviderRowsAdded",e.ROW_REMOVING="onTreeDataProviderRowRemoving",e.ROW_REMOVED="onTreeDataProviderRowRemoved",e.ROWS_REMOVING="onTreeDataProviderRowsRemoving",e.ROWS_REMOVED="onTreeDataProviderRowsRemoved",e.ROW_UPDATING="onTreeDataProviderRowUpdating",e.ROW_UPDATED="onTreeDataProviderRowUpdated",e.ROWS_UPDATING="onTreeDataProviderRowsUpdating",e.ROWS_UPDATED="onTreeDataProviderRowsUpdated",e.VALUE_CHANGING="onTreeDataProviderValueChanging",e.VALUE_CHANGED="onTreeDataProviderValueChanged",e.ICON_INDEX_CHANGED="onTreeDataProviderIconIndexChanged",e.HAS_CHILDREN_CHANGED="onTreeDataProviderHasChildrenChanged",e.ROW_STATE_CHANGED="onTreeDataProviderRowStateChanged",e.ROW_STATES_CHANGED="onTreeDataProviderRowStatesChanged",e.ROW_SIBLING_MOVING="onTreeDataProviderRowSiblingMoving",e.ROW_SIBLING_MOVED="onTreeDataProviderRowSiblingMoved",e.ROWS_SIBLING_MOVING="onTreeDataProviderRowsSiblingMoving",e.ROWS_SIBLING_MOVED="onTreeDataProviderRowsSiblingMoved",e.ROW_PARENT_CHANGING="onTreeDataProviderRowParentChanging",e.ROW_PARENT_CHANGED="onTreeDataProviderRowParentChanged",e.ROWS_PARENT_CHANGING="onTreeDataProviderRowsParentChanging",e.ROWS_PARENT_CHANGED="onTreeDataProviderRowsParentChanged",e.ROWS_HIDDEN_CHANGED="onTreeDataProviderRowsHideChanged",e.DATA_LOAD_COMPLATED="onTreeDataProviderDataLoadComplated",e}(Fi),ji=function(t){function e(e){var i=t.call(this)||this;return i._ds=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.load=function(t,e,i){var o=new Ci(i);if(this.$_checkEmpty(e,o))return 0;switch(this.$_prepareLoad(o),t=t&&t.toLowerCase()){case"json":return this.$_loadJson(e,o);case"xml":return this.$_loadXml(e,o);case"csv":return this.$_loadCsv(e,o)}return 0},e.prototype.$_loadJson=function(t,e){if("string"==typeof t&&(t=JSON.parse(t)),t){var i=e.childrenField,o=e.iconField;if(e.fillMode==bi.APPEND){var r=this._ds.rowById(e.parentId);return this._ds.appendJsonRows(r,t,e.rows,i,o)}return this._ds.setJsonRows(t,e.rows,i,o)}return 0},e.prototype.$_loadXml=function(t,e){if("string"==typeof t&&(t=yi.parseXml(t)),t&&t.documentElement){var i=e.childrenField,o=e.iconField;if(e.fillMode==bi.APPEND){var r=this._ds.rowById(e.parentId);return this._ds.appendXmlRows(r,t,e.rows,i,o)}return this._ds.setXmlRows(t,e.rows,i,o)}return 0},e.prototype.$_loadCsv=function(t,e){var i=e.start,o=e.count,r=e.quoted,n=e.delimiter,s=hi.csvToArray(this._ds,t,i,o,r,n);if(s&&(o=s.length)>0){var a=e.treeField,l=e.childrenField,h=e.iconField,u=e.needSorting;if(e.fillMode==bi.APPEND){var c=this._ds.rowById(e.parentId);this._ds.appendDataRows(c,s,a,u,l,h)}else this._ds.setRows(s,a,u,l,h);return s.length}return 0},e.prototype.$_fillEmpty=function(t){t.fillMode===bi.SET&&this._ds.setRows(null,null,!1,null,null)},e.prototype.$_checkEmpty=function(t,e){return!t&&(this.$_fillEmpty(e),!0)},e.prototype.$_prepareLoad=function(t){},e}(ft),Hi=function(){function t(){}return t.getFieldIndex=function(t,e){return"string"==typeof e?t.getFieldIndex(e):e},t.fillData=function(t,e,i,o){var r=new xi(t);try{r.load(e,i,o)}finally{r.dispose()}},t.fillTreeData=function(t,e,i,o){var r=new ji(t);try{r.load(e,i,o)}finally{r.dispose()}},t.extractTreeRows=function(t){if(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++)i[o]=t[o].rowId;return i}return null},t}(),Wi=function(){},Gi=function(){function t(t){this._dp=this._createProvider(t),this._listener=this._createListener(this._dp)}return t.prototype.dispose=function(){this._dp.dispose(),this._dp=null},Object.defineProperty(t.prototype,"subTypeEnabled",{get:function(){return this._dp.subTypeEnabled},set:function(t){this._dp.subTypeEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"undoable",{get:function(){return this._dp.undoable},set:function(t){this._dp.undoable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"insertable",{get:function(){return this._dp.insertable},set:function(t){this._dp.insertable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"updatable",{get:function(){return this._dp.updatable},set:function(t){this._dp.updatable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deletable",{get:function(){return this._dp.deletable},set:function(t){this._dp.deletable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"softDeleting",{get:function(){return this._dp.softDeleting},set:function(t){this._dp.softDeleting=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"deleteCreated",{get:function(){return this._dp.deleteCreated},set:function(t){this._dp.deleteCreated=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkStates",{get:function(){return this._dp.checkStates},set:function(t){this._dp.checkStates=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"restoreMode",{get:function(){return this._dp.restoreMode},set:function(t){this._dp.restoreMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strictRestore",{get:function(){return this._dp.strictRestore},set:function(t){this._dp.strictRestore=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"booleanFormat",{get:function(){return this._dp.booleanFormat},set:function(t){this._dp.booleanFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"datetimeFormat",{get:function(){return this._dp.datetimeFormat},set:function(t){this._dp.datetimeFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"baseYear",{get:function(){return this._dp.baseYear},set:function(t){this._dp.baseYear=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"amText",{get:function(){return this._dp.amText},set:function(t){this._dp.amText=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pmText",{get:function(){return this._dp.pmText},set:function(t){this._dp.pmText},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"commitBeforeDataEdit",{get:function(){return this._dp.commitBeforeDataEdit},set:function(t){this._dp.commitBeforeDataEdit=t},enumerable:!0,configurable:!0}),t.prototype.getOptions=function(){var t=this._dp;return{subTypeEnabled:t.subTypeEnabled,undoable:t.undoable,insertable:t.insertable,updatable:t.updatable,deletable:t.deletable,softDeleting:t.softDeleting,deleteCreated:t.deleteCreated,checkStates:t.checkStates,restoreMode:t.restoreMode.toString(),strictRestore:t.strictRestore,booleanFormat:t.booleanFormat,datetimeFormat:t.datetimeFormat,baseYear:t.baseYear,amText:t.amText,pmText:t.pmText,commitBeforeDataEdit:t.commitBeforeDataEdit}},t.prototype.setOptions=function(t){this._dp.assignFrom(t)},t.prototype.beginUpdate=function(){this._dp.beginUpdate()},t.prototype.endUpdate=function(t){void 0===t&&(t=!0),this._dp.endUpdate(t)},t.prototype.getFields=function(){return this._dp.getFields()},t.prototype.setFields=function(t){lt.isArray(t)&&this._dp.setFields(t)},t.prototype.addField=function(t,e,i){return this._dp.addField(t,e,i)},t.prototype.getFieldCount=function(){return this._dp.fieldCount},t.prototype.fieldByName=function(t){return this._dp.fieldByName(t)},t.prototype.getFieldNames=function(){return this._dp.getFieldNames()},t.prototype.getOrgFieldNames=function(){return this._dp.getOrgFieldNames()},t.prototype.getFieldName=function(t){return this._dp.getFieldName(t)},t.prototype.getOrgFieldName=function(t){return this._dp.getOrgFieldName(t)},t.prototype.getFieldIndex=function(t){return this._dp.getFieldIndex(t)},t.prototype.hasData=function(t){return this._dp.hasData(t)},t.prototype.getValues=function(t){return this._dp.getRow(t)},t.prototype.getJsonRow=function(t,e){return this._dp.getRowObject(t,e)},t.prototype.checkRowStates=function(t){this._dp.checkStates=t},t.prototype.getRowState=function(t){return this._dp.getRowState(t)},t.prototype.getStateRows=function(t){return void 0===t&&(t=at.NONE),this._dp.getStateRows(t)},t.prototype.getAllStateRows=function(){return this._dp.getAllStateRows()},t.prototype.clearRowStates=function(t,e){void 0===e&&(e=!1),this._dp.clearRowStates(t,e)},t.prototype.setRowState=function(t,e,i){void 0===e&&(e=at.NONE),void 0===i&&(i=!1),this._dp.setRowState(t,e,i)},t.prototype.setRowStates=function(t,e,i,o){void 0===e&&(e=at.NONE),void 0===i&&(i=!1),void 0===o&&(o=!1),this._dp.setRowStates(t,e,i,o)},t.prototype.getRowStateCount=function(t){if(!t)return 0;var e=[];if("*"==t||"all"==t)e.push(at.CREATED,at.UPDATED,at.DELETED,at.CREATE_AND_DELETED);else for(var i=Array.isArray(t)?t:[t],o=0,r=i.length;o<r;o++)e.push(i[o]);return e.length>0?this._dp.getRowStateCount(e):void 0},t.prototype.restoreUpdatedStates=function(t){return this._dp.restoreUpdatedStates(t)},t.prototype.restoreUpdatedRows=function(t){return this._dp.restoreUpdatedRows(lt.makeArray(t))},t.prototype.getUpdatedCells=function(t){return this._dp.getUpdatedCells(t)},t.prototype.getDistinctValues=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=n.ASCENDING);var o=i||n.ASCENDING,r="string"==typeof t?this._dp.getFieldIndex(t):t;return this._dp.getDistinctValues(r,e,o)},t.prototype.savePoint=function(t){return void 0===t&&(t=!0),this._dp.savePoint(t)},t.prototype.rollback=function(t){void 0===t&&(t=0),this._dp.rollback(t)},t.prototype.clearSavePoints=function(){this._dp.clearSavePoints()},t.prototype.getSavePoints=function(){return this._dp.getSavePoints()},t.prototype.setDataComparer=function(t,e){var i="string"==typeof t?this._dp.getFieldIndex(t):t;this._dp.setDataComparer(i,e)},t.prototype.exportToCsv=function(t){this._dp.exportToCsv(t)},t.prototype.destroy=function(){this.dispose()},t.prototype.undo=function(){this._dp.undo()},t.prototype.redo=function(){this._dp.redo()},t.prototype.clearCommandStack=function(){this._dp.clearCommandStack()},t.prototype.getProvider=function(){return this._dp},t}(),Ui=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onRowCountChanged=null,e.onRowUpdating=null,e.onRowUpdated=null,e.onRowsUpdated=null,e.onRowListUpdated=null,e.onRowInserting=null,e.onRowInserted=null,e.onRowsInserted=null,e.onRowDeleting=null,e.onRowDeleted=null,e.onRowsDeleted=null,e.onRowMoving=null,e.onRowMoved=null,e.onRowsMoving=null,e.onRowsMoved=null,e.onRowListMoving=null,e.onRowListMoved=null,e.onValueChanged=null,e.onDataChanged=null,e.onRowStateChanged=null,e.onRowStatesChanged=null,e.onRowStatesCleared=null,e.onRestoreRows=null,e}return o(e,t),e.prototype.getRowCount=function(){return this._dp.rowCount},e.prototype.setRowCount=function(t,e,i,o){void 0===e&&(e=!1),void 0===i&&(i=null),void 0===o&&(o=at.NONE);var r=o;return this._dp.setRowCount(t,e,i,r)},e.prototype.setFilterMode=function(t){void 0===t&&(t="and"),this._dp.setFilterMode(t)},e.prototype.setFilters=function(t,e){void 0===e&&(e="and"),this._dp.setFilters(t,e)},e.prototype.fillJsonData=function(t,e){var i=e instanceof Ci?e:new Ci(e);Hi.fillData(this._dp,"json",t,i)},e.prototype.fillXmlData=function(t,e){var i=e instanceof Ci?e:new Ci(e);Hi.fillData(this._dp,"xml",t,i)},e.prototype.fillCsvData=function(t,e){var i=e instanceof Ci?e:new Ci(e);Hi.fillData(this._dp,"csv",t,i)},e.prototype.setRows=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1),this._dp.setRows(t,e,i)},e.prototype.addRows=function(t,e,i,o){void 0===e&&(e=0),void 0===i&&(i=-1),void 0===o&&(o=!1),this._dp.appendRows(t,e,i,o)},e.prototype.insertRows=function(t,e,i,o,r){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===r&&(r=!1),this._dp.insertRows(t,e,i,o,r)},e.prototype.updateRows=function(t,e,i,o,r,n){void 0===i&&(i=0),void 0===o&&(o=-1),void 0===r&&(r=!1),void 0===n&&(n=!1),this._dp.updateRows(t,e,i,o,r,n)},e.prototype.clearRows=function(){this._dp.clearRows()},e.prototype.updateRow=function(t,e,i){this._dp.updateRow(t,e,i)},e.prototype.hideRows=function(t){this._dp.hideRows(t)},e.prototype.showHiddenRows=function(t){this._dp.showRows(t)},e.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},e.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},e.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},e.prototype.addRow=function(t){return this._dp.appendRow(t)},e.prototype.insertRow=function(t,e){return this._dp.insertRow(t,e)},e.prototype.removeRow=function(t){this._dp.removeRow(t)},e.prototype.removeRows=function(t,e){void 0===e&&(e=!1),this._dp.removeRows(t,e)},e.prototype.moveRow=function(t,e){this._dp.moveRow(t,e)},e.prototype.moveRows=function(t,e,i){this._dp.moveRows(t,e,i)},e.prototype.getValue=function(t,e){var i=Hi.getFieldIndex(this._dp,e);return this._dp.getValue(t,i)},e.prototype.setValue=function(t,e,i){var o=Hi.getFieldIndex(this._dp,e);this._dp.setValue(t,o,i)},e.prototype.getRows=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=-1),this._dp.getRows(t,e)},e.prototype.getJsonRows=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=-1),this._dp.getRowObjects(t,e,i)},e.prototype.getOutputRow=function(t,e){return this._dp.getOutputObject(t,e)},e.prototype.getOutputRows=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=-1),this._dp.getOutputObjects(t,e,i)},e.prototype.getFieldValues=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=-1);var o=Hi.getFieldIndex(this._dp,t);return this._dp.getFieldValues(o,e,i)},e.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t):-1},e.prototype.searchData=function(t){return t?this._dp.searchData(t):null},e.prototype._createProvider=function(t){return new fi(t,this)},e.prototype._createListener=function(t){return new Yi(this,t)},e}(Gi),zi=function(t){function e(e){void 0===e&&(e=!1);var i=t.call(this,e)||this;return i.onRowCountChanged=null,i.onRowAdding=null,i.onRowAdded=null,i.onRowsAdded=null,i.onRowDeleting=null,i.onRowDeleted=null,i.onRowsDeleted=null,i.onRowUpdating=null,i.onRowUpdated=null,i.onRowsUpdating=null,i.onRowsUpdated=null,i.onValueChanged=null,i.onDataChanged=null,i.onRowStateChanged=null,i.onRowStatesChanged=null,i.onRowSiblingMoving=null,i.onRowSiblingMoved=null,i.onRowsSiblingMoving=null,i.onRowsSiblingMoved=null,i.onRowParentChanging=null,i.onRowParentChanged=null,i}return o(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.getRowCount=function(){return this._dp.rowCount},e.prototype.setRows=function(t,e,i,o,r){this._dp.setRows(t,e,i,o,r)},e.prototype.setCsvRows=function(t,e,i,o,r){this._dp.setCsvRows(t,e,i,o,r)},e.prototype.setXmlRows=function(t,e,i,o){this._dp.setXmlRows(t,e,i,o)},e.prototype.setObjectRows=function(t,e,i,o){this._dp.setJsonRows(t,e,i,o)},e.prototype.setNestedRows=function(t,e,i,o,r){this._dp.setJsonRows2(t,e,i,o,r)},e.prototype.fillJsonData=function(t,e){var i=new Ci(e);try{Hi.fillTreeData(this._dp,"json",t,i)}finally{i.dispose(),i=null}},e.prototype.fillXmlData=function(t,e){var i=new Ci(e);try{Hi.fillTreeData(this._dp,"xml",t,i)}finally{i.dispose(),i=null}},e.prototype.fillCsvData=function(t,e){var i=new Ci(e);try{Hi.fillTreeData(this._dp,"csv",t,i)}finally{i.dispose(),i=null}},e.prototype.getIconIndex=function(t){return this._dp.rowById(t).iconIndex},e.prototype.setIconIndex=function(t,e){this._dp.rowById(t).iconIndex=e},e.prototype.getParent=function(t){var e=this._dp.rowById(t);return e&&e.parent?e.parent.rowId:-1},e.prototype.getLevel=function(t){return this._dp.rowById(t).level},e.prototype.getChildCount=function(t){if(null==t||-1==t)return this._dp.getChildCount(null);var e=this._dp.rowById(t);return e&&e.children?e.children.length:0},e.prototype.getChildren=function(t){var e;null==t||-1==t?e=this._dp.getRows(null):e=this._dp.rowById(t).children;return Hi.extractTreeRows(e)},e.prototype.getDescendantCount=function(t){return null==t||-1==t?this._dp.getDescendantCount(null):this._dp.rowById(t).descendantCount},e.prototype.getDescendants=function(t,e){void 0===e&&(e=-1);var i=null;null!=t&&-1!=t&&(i=this._dp.rowById(t));var o=this._dp.getDescendants(i,e);return Hi.extractTreeRows(o)},e.prototype.getAncestors=function(t){var e=this._dp.rowById(t);return e&&e.ancestors?Hi.extractTreeRows(e.ancestors):null},e.prototype.getJsonRow=function(t,e){var i=this._dp.rowById(t);if(i){var o=i.getObject();e&&(o.__rowState=i.rowState)}return i?i.getObject():null},e.prototype.getJsonRows=function(t,e,i,o,r){void 0===e&&(e=!1),void 0===i&&(i="rows"),void 0===o&&(o="iconIndex");var n=null==t?this._dp.rootRow:this._dp.rowById(t);return n?n.getChildObjects(e,i,o,!0,r):null},e.prototype.getOutputRow=function(t,e,i){void 0===i&&(i="iconIndex");var o,r=new Oe(t);try{var n=null==e?this._dp.rootRow:this._dp.rowById(e);o=n?n.getOutput(r,i):null}finally{r.dispose()}return o},e.prototype.getOutputRows=function(t,e,i,o,r){void 0===i&&(i=!1),void 0===o&&(o="rows"),void 0===r&&(r="iconIndex");var n,s=new Oe(t);try{var a=null==e||e<=-1?this._dp.rootRow:this._dp.rowById(e);n=a?a.getChildOutputObjects(s,i,o,r):null}finally{s.dispose()}return n},e.prototype.addChildRow=function(t,e,i,o){void 0===i&&(i=-1),void 0===o&&(o=!1);var r=this._dp,n=r.rowById(t)||r.rootRow,s=r.createRow(e,i,o);return n.addChild(s,!1)?s.rowId:-1},e.prototype.insertChildRow=function(t,e,i,o,r){void 0===o&&(o=-1),void 0===r&&(r=!1);var n=this._dp,s=n.rowById(t)||n.rootRow,a=n.createRow(i,o,r);return s.insertChild(e,a,!1)?a.rowId:-1},e.prototype.updateRow=function(t,e,i){var o=this._dp.rowById(t);return!!o&&o.update(e,i)},e.prototype.updateRows=function(t,e,i){this._dp.updateRows(t,e,i)},e.prototype.removeRow=function(t){var e=this._dp.rowById(t);return!(!e||!e.parent)&&e.parent.removeChild(e)},e.prototype.removeRows=function(t){return!!(t&&t.length>0)&&this._dp.removeRows(t)},e.prototype.clearRows=function(){this._dp.clearRows()},e.prototype.hideRows=function(t){this._dp.hideRows(t)},e.prototype.showHiddenRows=function(t){this._dp.showRows(t)},e.prototype.getHiddenRows=function(){return this._dp.getHiddenRows()},e.prototype.isHiddenRow=function(t){return this._dp.isHiddenRow(t)},e.prototype.resetHiddenRows=function(){this._dp.clearHiddenRows()},e.prototype.getValue=function(t,e){var i=this._dp.rowById(t),o=Hi.getFieldIndex(this._dp,e);return i?i.getValue(o):null},e.prototype.setValue=function(t,e,i){var o=this._dp.rowById(t),r=Hi.getFieldIndex(this._dp,e);o&&o.setValue(r,i,!1)},e.prototype.moveRowSibling=function(t,e){var i=this._dp.rowById(t);return!!i&&this._dp.changeRowIndex(i,e)},e.prototype.moveRowsSibling=function(t,e){var i=this._dp.rowById(t);return!!i&&this._dp.changeRowIndex(i,e)},e.prototype.changeRowParent=function(t,e,i){var o=this._dp.rowById(t),r=this._dp.rowById(e);return!(!o||!r)&&this._dp.changeRowParent(o,r,i)},e.prototype.searchDataRow=function(t){return t?this._dp.searchDataRow(t,t.parentId):-1},e.prototype.searchData=function(t){return t?this._dp.searchData(t,t.parentId):null},e.prototype._createProvider=function(t){return new Ai(t,this)},e.prototype._createListener=function(t){return new qi(this,t)},e}(Gi),Yi=function(t){function e(e,i){var o=t.call(this)||this;return o._del=e,o._provider=i,o._provider.addListener(o),o}return o(e,t),e.prototype.dispose=function(){this._del=null,this._provider.removeListener(this),this._provider=null},e.prototype.onDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):lt.log("onRowCountChanged: "+t.rowCount)},e.prototype.onDataProviderRowUpdating=function(t,e,i){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e):(lt.log("onRowUpdating: "+e),!0)},e.prototype.onDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e):lt.log("onRowUpdated: "+e)},e.prototype.onDataProviderRowsUpdated=function(t,e,i){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,e,i):lt.log("onRowsUpdated: "+e+", "+i)},e.prototype.onDataProviderRowListUpdated=function(t,e){this._del.onRowListUpdated?this._del.onRowListUpdated(this._del,e):lt.log("onRowListUpdated: "+e)},e.prototype.onDataProviderRowInserting=function(t,e,i){return this._del.onRowInserting?this._del.onRowInserting(this._del,e,i):(lt.log("onRowInserting: "+e),!0)},e.prototype.onDataProviderRowInserted=function(t,e){this._del.onRowInserted?this._del.onRowInserted(this._del,e):lt.log("onRowInserted: "+e)},e.prototype.onDataProviderRowsInserted=function(t,e,i){this._del.onRowsInserted?this._del.onRowsInserted(this._del,e,i):lt.log("onRowsInserted: "+e+", "+i)},e.prototype.onDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e):(lt.log("onRowDeleting: "+e),!0)},e.prototype.onDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e):lt.log("onRowDeleted: "+e)},e.prototype.onDataProviderRowsRemoving=function(t,e){return!0},e.prototype.onDataProviderRowsRemoved=function(t,e){this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,e):lt.log("onRowsDeleted: ",e)},e.prototype.onDataProviderRowMoving=function(t,e,i){return this._del.onRowMoving?this._del.onRowMoving(this._del,e,i):(lt.log("onRowMoving: "+e+", "+i),!0)},e.prototype.onDataProviderRowMoved=function(t,e,i){this._del.onRowMoved?this._del.onRowMoved(this._del,e,i):lt.log("onRowMoved: "+e+", "+i)},e.prototype.onDataProviderRowsMoving=function(t,e,i,o){return this._del.onRowsMoving?this._del.onRowsMoving(this._del,e,i,o):(lt.log("onRowsMoving: "+e+", "+i+", "+o),!0)},e.prototype.onDataProviderRowsMoved=function(t,e,i,o){this._del.onRowsMoved?this._del.onRowsMoved(this._del,e,i,o):lt.log("onRowsMoved: "+e+", "+i+", "+o)},e.prototype.onDataProviderRowListMoving=function(t,e,i){return this._del.onRowListMoving?this._del.onRowListMoving(this._del,e,i):(lt.log("onRowListMoving: ",e,", ",i),!0)},e.prototype.onDataProviderRowListMoved=function(t,e,i){this._del.onRowListMoved?this._del.onRowListMoved(this._del,e,i):lt.log("onRowListMoved: ",e,i)},e.prototype.onDataProviderValueChanged=function(t,e,i){this._del.onValueChanged?this._del.onValueChanged(this._del,e,i):lt.log("onValueChanged:"+e+", "+i)},e.prototype.onDataProviderDataChanged=function(t){this._del.onDataChanged?this._del.onDataChanged(this._del):lt.log("onDataChanged")},e.prototype.onDataProviderStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e):lt.log("onRowStateChanged: "+e)},e.prototype.onDataProviderStatesChanged=function(t,e){this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,e):lt.log("onRowStatesChanged",e)},e.prototype.onDataProviderStatesCleared=function(t){this._del.onRowStatesCleared?this._del.onRowStatesCleared(this._del):lt.log("onRowStatesCleared")},e.prototype.onDataProviderRestoreRows=function(t,e){this._del.onRestoreRows?this._del.onRestoreRows(this._del,e):lt.log("onRestoreRows",e)},e}(Wi),qi=function(t){function e(e,i){var o=t.call(this)||this;return o._del=e,o._provider=i,o._provider.addListener(o),o}return o(e,t),e.prototype.dispose=function(){this._del=null,this._provider.removeListener(this),this._provider=null},e.prototype.onTreeDataProviderRowCountChanged=function(t){this._del.onRowCountChanged?this._del.onRowCountChanged(this._del,t.rowCount):lt.log("onRowCountChanged: "+t.rowCount)},e.prototype.onTreeDataProviderRowAdding=function(t,e,i,o){return this._del.onRowAdding?this._del.onRowAdding(this._del,e.rowId,i,o._values):(lt.log("onRowAdding: "+e.rowId+", "+i,o._values),!0)},e.prototype.onTreeDataProviderRowAdded=function(t,e){this._del.onRowAdded?this._del.onRowAdded(this._del,e.rowId):lt.log("onRowAdded: "+e.rowId)},e.prototype.onTreeDataProviderRowsAdded=function(t,e,i){var o=Hi.extractTreeRows(i);this._del.onRowsAdded?this._del.onRowsAdded(this._del,e.rowId,o):lt.log("onRowsAdded: "+e.rowId,o)},e.prototype.onTreeDataProviderRowRemoving=function(t,e){return this._del.onRowDeleting?this._del.onRowDeleting(this._del,e.rowId):(lt.log("onRowDeleting: "+e.rowId),!0)},e.prototype.onTreeDataProviderRowRemoved=function(t,e){this._del.onRowDeleted?this._del.onRowDeleted(this._del,e.rowId):lt.log("onRowDeleted: "+e.rowId)},e.prototype.onTreeDataProviderRowsRemoved=function(t,e){var i=Hi.extractTreeRows(e);this._del.onRowsDeleted?this._del.onRowsDeleted(this._del,i):lt.log("onRowsDeleted: ",i)},e.prototype.onTreeDataProviderRowUpdating=function(t,e){return this._del.onRowUpdating?this._del.onRowUpdating(this._del,e.rowId):(lt.log("onRowUpdating:"+e.rowId),!0)},e.prototype.onTreeDataProviderRowUpdated=function(t,e){this._del.onRowUpdated?this._del.onRowUpdated(this._del,e.rowId):lt.log("onRowUpdated: "+e.rowId)},e.prototype.onTreeDataProviderRowsUpdating=function(t,e){return this._del.onRowsUpdating?this._del.onRowsUpdating(this._del,Mi.getRowIds(e)):(lt.log("onRowUpdating:"+e.length),!0)},e.prototype.onTreeDataProviderRowsUpdated=function(t,e){this._del.onRowsUpdated?this._del.onRowsUpdated(this._del,Mi.getRowIds(e)):lt.log("onRowsUpdated: "+e.length)},e.prototype.onTreeDataProviderValueChanged=function(t,e,i){this._del.onValueChanged?this._del.onValueChanged(this._del,e.rowId,i):lt.log("onValueChanged: "+e.rowId+", "+i)},e.prototype.onTreeDataProviderRowStateChanged=function(t,e){this._del.onRowStateChanged?this._del.onRowStateChanged(this._del,e.rowId):lt.log("onRowStateChanged: "+e.rowId)},e.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var i=Hi.extractTreeRows(e);this._del.onRowStatesChanged?this._del.onRowStatesChanged(this._del,i):lt.log("onRowStatesChanged: ",i)},e.prototype.onTreeDataProviderRowSiblingMoving=function(t,e,i){return this._del.onRowSiblingMoving?this._del.onRowSiblingMoving(this._del,e.rowId,i):(lt.log("onRowSiblingMoveing: "+e.rowId+", "+i),!0)},e.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){this._del.onRowSiblingMoved?this._del.onRowSiblingMoved(this._del,e.rowId,i):lt.log("onSiblingMoved: "+e.rowId+", "+i)},e.prototype.onTreeDataProviderRowsSiblingMoving=function(t,e,i){return this._del.onRowsSiblingMoving?this._del.onRowsSiblingMoving(this._del,e,i):(lt.log("onRowSiblingMoveing: ",e,i),!0)},e.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,i){this._del.onRowsSiblingMoved?this._del.onRowsSiblingMoved(this._del,e,i):lt.log("onSiblingMoved: ",e,i)},e.prototype.onTreeDataProviderRowParentChanging=function(t,e,i,o){if(this._del.onRowParentChanging)return this._del.onRowParentChanging(this._del,e.rowId,i.rowId,o);lt.log("onRowParentChanging: "+e.rowId+", "+i.rowId+", "+o)},e.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,o){this._del.onRowParentChanged?this._del.onRowParentChanged(this._del,e.rowId,i.rowId,o):lt.log("onRowParentChanged: "+e.rowId+", "+i.rowId+", "+o)},e}(Wi),Ki=function(t){function e(e,i){var o=t.call(this)||this;return o._urls=[],o._name=e,o._rootUrl=i,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._urls.length},enumerable:!0,configurable:!0}),e.prototype.addUrl=function(t){t&&this._urls.indexOf(t)<0&&this._urls.push(t)},e.prototype.addUrls=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t)for(var i=0;i<t.length;i++)this.addUrl(t[i])},e.prototype.getImage=function(t){return t>=0&&t<this._urls.length?this._rootUrl+this._urls[t]:null},e}(ft),Xi=function(){function t(t){this.field=t,this.count=0,this.sum=NaN,this.max=NaN,this.min=NaN,this.avg=NaN,this.vars=NaN,this.varsp=NaN,this.dataCount=0,this.dataAvg=NaN}return t.prototype.clear=function(){this.count=this.dataCount=0,this.sum=this.dataAvg=this.max=this.min=this.avg=this.vars=this.varsp=NaN},t}();!function(t){t.NORMAL="normal",t.FOCUSED="focused",t.UPDATING="updating",t.INSERTING="inserting",t.APPENDING="appending",t.DUMMY="dummy"}(wi||(wi={}));var Zi,Ji=function(t){return t==wi.UPDATING||t==wi.INSERTING||t==wi.APPENDING},Qi=function(t){return t==wi.INSERTING||t==wi.APPENDING},to=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.readOnly=this.editable=this.style=void 0,this},t.prototype.assign=function(t){"string"==typeof t?this.styleName=t:(null!=t.readOnly&&(this.readOnly=t.readOnly),null!=t.editable&&(this.editable=t.editable),null!=t.styleName&&(this.styleName=t.styleName.trim()),null!=t.style&&(this.style=t.style),null!=t.exportStyleName&&(this.exportStyleName=t.exportStyleName))},t}(),eo=function(){function t(){this._id=t.$$_grid_item_id++,this._index=-1}return t.prototype.dispose=function(){this._parent=null},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"parentIndex",{get:function(){return this._parent?this._parent._index:-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){for(var t=this._parent;t&&t.level>1;)t=t._parent;return t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"childIndex",{get:function(){return this._parent?this._parent.indexOf(this):-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this._parent?this._parent.level+1:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isData",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isDataRow",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"visible",{get:function(){return this._parent&&this._index>=0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayLevel",{get:function(){return this.level},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"provider",{get:function(){return this._parent&&this._parent.provider},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataSource",{get:function(){return this._parent&&this._parent.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataRow",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataId",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowState",{get:function(){var t=this.dataRow;if(t>=0){var e=this.dataSource;return e?e.getRowState(t):at.NONE}return at.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"itemState",{get:function(){return wi.NORMAL},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checked",{get:function(){var t=0!=(1&this._getExtents());return this.provider.getItemChecked(this,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkable",{get:function(){return 0==(4&this._getExtents())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"readOnly",{get:function(){return 0!=(8&this._getExtents())},set:function(t){this._setExtents(t?8|this._getExtents():-9&this._getExtents())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"resizable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"merged",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this._getExtents();return 196608&t?(4294705152&t)>>>18:NaN},enumerable:!0,configurable:!0}),t.prototype.$_setHeight=function(t,e){var i=this._getExtents();if(t=Math.round(t),isNaN(t)){if(196608&i)return this._setExtents(-196609&i),!0}else{if(t!=(4294705152&i)>>>18)return t=Math.max(0,Math.min(53247,t))<<18,i=e?-196609&i|131072:-196609&i|65536,this._setExtents(262143&i|t),!0;if(e){if(0==(131072&i))return i=-196609&i|131072,this._setExtents(i),!0}else if(0==(65536&i))return i=-196609&i|65536,this._setExtents(i),!0}},t.prototype.$_clearHeight=function(t){t?this._setExtents(-196609&this._getExtents()):this._setExtents(-65537&this._getExtents()),0==this.index&&lt.log("HEIGHT",this.height)},Object.defineProperty(t.prototype,"heights",{get:function(){return this._heights},set:function(t){this._heights=t},enumerable:!0,configurable:!0}),t.prototype.getShadowRow=function(){return this.dataRow},t.prototype.getHeight=function(t){return this._heights[t]},t.prototype.setChecked=function(t,e){var i=this.provider;i&&i.checkItem(this,t,void 0,e)},t.prototype.setCheckable=function(t){var e=this.provider;e&&e.setCheckable(this,t)},t.prototype.getAncestor=function(t){if(t<this.level){for(var e=this._parent;e.level>t;)e=e._parent;return e}return this instanceof oo?this:null},t.prototype.getVisibleAncestor=function(){var t=this._parent;do{if(t.visible)return t;t=t._parent}while(t)},t.prototype.getAncestors=function(){var t=null,e=this._parent;if(e){t=[];do{t.push(e),e=e._parent}while(e)}return t},t.prototype.isDescendantOf=function(t){if(t){for(var e=this._parent;e&&e!=t;)e=e._parent;return e===t}return!1},t.prototype.getData=function(t){var e=this.dataSource;t=e.getFieldIndex(t);var i=this.getShadowRow();return e&&i>=0?e.getValue(i,t):void 0},t.prototype.setData=function(t,e){var i=this.dataSource;t=i.getFieldIndex(t),i&&i.setValue(this.dataRow,t,e)},t.prototype.getRowData=function(){var t=this.dataRow;if(t>=0){var e=this.dataSource;if(e)return e.getRow(t)}return null},t.prototype.getRowObject=function(){var t=this.dataRow;if(t>=0){var e=this.dataSource;if(e)return e.getRowObject(t)}return null},t.prototype.isChanged=function(t){var e=this.dataSource;return e?e.isDataChanged(this.dataRow,t):void 0},t.prototype.canEdit=function(){return!1},t.prototype._setIndex=function(t){this._index=t},t.prototype._setChecked=function(t){this.provider.setItemChecked(this,t)||this._setExtents(t?1|this._getExtents():-2&this._getExtents())},t.prototype._setCheckable=function(t){this._setExtents(t?-5&this._getExtents():4|this._getExtents())},t.$$_grid_item_id=0,t}(),io=function(t){function e(e){var i=t.call(this)||this;return i._displayLevel=-1,i._extents=0,i._dataRow=e,i}return o(e,t),Object.defineProperty(e.prototype,"dataRowId",{get:function(){return this._dataRowId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!0,configurable:!0}),e.prototype.setEditable=function(t,e){this._editable=t,this._readOnly=e},e.prototype._getExtents=function(){return this._extents},e.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(e.prototype,"isData",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDataRow",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataRow",{get:function(){return this._dataRow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataId",{get:function(){return this.dataSource.getRowId(this._dataRow)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayLevel",{get:function(){return this._displayLevel>=0?this._displayLevel:this.level},enumerable:!0,configurable:!0}),e.prototype.canEdit=function(){return!0},e.prototype.getShadowRow=function(){return this._dataRow},e.prototype.$_setDisplayLevel=function(t){this._displayLevel=t},e}(eo),oo=function(t){function e(){var e=t.call(this)||this;return e._children=[],e._expanded=!1,e._descendantCount=0,e._summaries=null,e._rows=null,e}return o(e,t),e.prototype.dispose=function(){this._children=null,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapsed",{get:function(){return!this.expanded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._children.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"children",{get:function(){return this._children.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allFooterCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this._children.length>0?this._children[0]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){var t=this._children.length;return t>0?this._children[t-1]:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstItem",{get:function(){if(this._children.length>0){var t=this._children[0];return t instanceof e?t.firstItem:t}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstDataItem",{get:function(){if(this._children.length>0)for(var t=0,i=this._children.length;t<i;t++){if(this._children[t]instanceof e)return this._children[t].firstDataItem;if(this._children[t]instanceof io)return this._children[t]}return null},enumerable:!0,configurable:!0}),e.prototype.getLastItem=function(t){var i;if(this._children.length>0){for(var o=this._children.length;o&&(i=this._children[o-1],t&&i instanceof no);o--);return i instanceof e?i.getLastItem(t):i}return null},Object.defineProperty(e.prototype,"lastDataItem",{get:function(){var t=this._children.length;if(t>0)for(;t>0;t--){var i=this._children[t-1];if(i instanceof e)return i.lastDataItem;if(i instanceof io)return i}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descendantCount",{get:function(){return this._descendantCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandable",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapsable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.getItem=function(t){if(t<0||t>=this._children.length)throw new RangeError("index is invalid: "+t);return this._children[t]},e.prototype.getRows=function(){var t=[];return this.$_collectRows(this,t),t},e.prototype.getFooterIndex=function(t){return 0},e.prototype.itemOfRow=function(t){for(var e=this._children.length;e--;)if(this._children[e].dataRow==t)return this._children[e];return null},e.prototype.indexOf=function(t){for(var e=this._children.length-1;e>=0;e--)if(this._children[e]==t)return e;return-1},e.prototype.isDescendant=function(t){if(t&&t!==this){for(var e=t._parent;e&&e!==this;)e=e._parent;return e===this}return!1},e.prototype.getDescendants=function(t){if((!t||this._expanded)&&this._children&&this._children.length>0){var i=[];return function i(o,r){for(var n=o.count,s=0;s<n;s++){var a=o.getItem(s);r.push(a),a instanceof e&&(!t||a.expanded)&&i(a,r)}}(this,i),i}return null},e.prototype.clear=function(){this._summaries=null,this._children.length=0,this._descendantCount=0},e.prototype.insert=function(t,e){this._addChild(e,t)},e.prototype.add=function(t){this._addChild(t,-1)},e.prototype.addAll=function(t){this._addChildren(t)},e.prototype.remove=function(t){var e=this.indexOf(t);e>=0&&(this._children.splice(e,1),t instanceof eo&&(t._parent=null))},e.prototype.setItem=function(t,e){if(t&&e&&t!==e){var i=this._removeChild(t);this._insertChild(i,e),e._index=t.index}},e.prototype.setExpanded=function(t,e,i){(t!=this._expanded||i)&&(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},e.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e instanceof Xi?e.count:e?e.length:this._descendantCount},e.prototype.getDataCount=function(t){var e=this.$_getSummary(t);if(e instanceof Xi)return e.dataCount;if(e){var i=this.dataSource,o=e.length,r=0;if(o>0){for(var n=0;n<o;n++)null!=i.getValue(e[n],t)&&r++;return r}}return 0},e.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);if(e instanceof Xi)return e.dataAvg;if(e){for(var i=this.dataSource,o=e.length,r=0,n=0,s=0;s<o;s++){var a=i.getValue(e[s],t);isNaN(a)||(r+=a,n++)}return n>0&&!isNaN(r)?r/n:NaN}return NaN},e.prototype.getSum=function(t){var e=this.$_getSummary(t);if(e instanceof Xi)return e.sum;if(e){for(var i=this.dataSource,o=e.length,r=void 0,n=0;n<o;n++){var s=i.getValue(e[n],t);isNaN(s)||(r=(isNaN(r)?0:r)+s)}return r}return NaN},e.prototype.getMax=function(t){var e=this.$_getSummary(t);if(e instanceof Xi)return e.max;if(e){var i=this.dataSource,o=e.length,r=void 0;if(o>1){r=NaN;var n=0;do{r=i.getValue(e[n++],t)}while(isNaN(r=null==r?void 0:r)&&n<o);for(;n<o;){var s=i.getValue(e[n++],t);!isNaN(s=null==s?void 0:s)&&s>r&&(r=s)}return r}if(1==o)return null==(r=i.getValue(e[0],t))?void 0:r}return NaN},e.prototype.getMin=function(t){var e=this.$_getSummary(t);if(e instanceof Xi)return e.min;if(e){var i=this.dataSource,o=e.length,r=void 0;if(o>1){r=NaN;var n=0;do{r=i.getValue(e[n++],t)}while(isNaN(r=null==r?void 0:r)&&n<o);for(;n<o;){var s=i.getValue(e[n++],t);!isNaN(s=null==s?void 0:s)&&s<r&&(r=s)}return r}if(1==o)return null==(r=i.getValue(e[0],t))?void 0:r}return NaN},e.prototype.getAvg=function(t){var e=this.$_getSummary(t);if(e instanceof Xi)return e.avg;if(e){var i=this.dataSource,o=e.length,r=void 0;if(o>1){r=0;for(var n=0;n<o;n++)r+=i.getValue(e[n],t);return r/o}if(1==o)return r=i.getValue(e[0],t)}return NaN},e.prototype.getVar=function(t,e){var i=this.$_getSummary(t);if(i instanceof Xi)return i.vars;if(i&&this.provider.summaryMode==_.STATISTICAL){var o=this.dataSource,r=i.length;if(r>1){for(var n=0,s=0;s<r;s++)n+=o.getValue(i[s],t);var a=n/r;n=0;for(s=0;s<r;s++)n+=Math.pow(o.getValue(i[s],t)-a,2);return n/=r-e}if(1==r)return 0}return NaN},e.prototype.getStdev=function(t,e){var i=this.$_getSummary(t);if(i instanceof Xi)return 0==e?Math.sqrt(i.varsp):Math.sqrt(i.vars);if(i&&this.provider.summaryMode==_.STATISTICAL){var o=this.dataSource,r=i.length;if(r>1){for(var n=0,s=0;s<r;s++)n+=o.getValue(i[s],t);var a=n/r;n=0;for(s=0;s<r;s++)n+=Math.pow(o.getValue(i[s],t)-a,2);return n=Math.sqrt(n/(r-e))}if(1==r)return 0}return NaN},Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype._setExpanded=function(t){this._expanded=t},e.prototype._incDescendants=function(t){void 0===t&&(t=1),this._descendantCount+=t},e.prototype._insertChild=function(t,e){this._children.splice(t,0,e),e instanceof eo&&(e._parent=this)},e.prototype._addChild=function(t,e){t&&this.indexOf(t)<0&&(e<0?this._children.push(t):this._children.splice(e,0,t),t._parent=this)},e.prototype._addChildren=function(t){var e;if(t&&(e=t.length)>0)for(var i=0;i<e;i++){var o=t[i];o&&this.indexOf(o)<0&&(o._parent=this,this._children.push(o))}},e.prototype._removeChild=function(t){var e=this.indexOf(t);return e>=0&&(this._children.splice(e,1),t instanceof eo&&(t._parent=null)),e},e.prototype._exchangeItems=function(t,e){if(t<0||t>=this._children.length)throw new RangeError("index1 is out of range: "+t);if(e<0||e>=this._children.length)throw new RangeError("index2 is out of range: "+e);if(t!==e){var i=this._children[t];this._children[t]=this._children[e],this._children[e]=i}},e.prototype._moveChild=function(t,e){var i=this._children.length;if(t<0||t>=i)throw new RangeError("index is out of range: "+t);var o=Math.min(Math.max(t+e,0),i-1),r=this._children[t];if(e<0)for(var n=t;n>o;n--)this._children[n]=this._children[n-1];else for(n=t;n<o;n++)this._children[n]=this._children[n+1];this._children[o]=r},e.prototype.$_collectRows=function(t,i){for(var o=t.count,r=0;r<o;r++){var n=t.getItem(r);n instanceof e?this.$_collectRows(n,i):n.isDataRow&&i.push(n.dataRow)}},e.prototype.$_getSummary=function(t){var e=this.dataSource;if(!(e instanceof Ve))return null;null==this._summaries&&(this._summaries={}),"string"==typeof t&&(t=e.getFieldIndex(t));var i=this._summaries?this._summaries[t]:null;return i||e.canSummarize(t)&&(i=this.$_summarize(t,e))&&(this._summaries[t]=i),i},e.prototype.$_summarize=function(t,e){var i=this.provider.summaryMode;if(i!=_.NONE){if(null==this._rows&&(this._rows=[],this.$_collectRows(this,this._rows)),this._rows.length>3&&e.canSummarize(t)){var o=new Xi(t);return e.summarizeRange(o,this._rows,i==_.STATISTICAL),o}return this._rows}return null},e.prototype._saveExpanded=function(){this._setExtents(this.expanded?16|this._getExtents():-17&this._getExtents())},e.prototype._restoreExpanded=function(t){if(void 0===t&&(t=!1),this._setExpanded(0!=(16&this._getExtents())),t)for(var i=this.count-1;i>=0;i--){var o=this.getItem(i);o instanceof e&&o._restoreExpanded(!0)}},e}(eo),ro=function(t){function e(e){var i=t.call(this)||this;return i._footers=0,i._extents=0,i._allFooters=[],i._groupField=e,i}return o(e,t),e.prototype.dispose=function(){this._allFooters=null,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"groupField",{get:function(){return this._groupField},enumerable:!0,configurable:!0}),e.prototype._getExtents=function(){return this._extents},e.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(e.prototype,"footer",{get:function(){return this._footer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerCount",{get:function(){return this._footers},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allFooterCount",{get:function(){return this._allFooters.length},enumerable:!0,configurable:!0}),e.prototype.getHiddenFooterCount=function(){for(var t=0,e=0;e<this.children.length;e++)this.children[e].hiddenFooter&&t++;return t},e.prototype.getFooter=function(t){return t=this.indexOf(this._footer)+t,this._children[t]},e.prototype.getFooterIndex=function(t){return t.$_footerIndex},e.prototype.isFooter=function(t){if(t===this._footer)return!0;if(this._footers>1)for(var e=this._children,i=e.length-1;i>=0;i--){if(e[i]===t)return!0;if(e[i]===this._footer)break}return!1},e.prototype._addChild=function(e,i){e instanceof no?(this._allFooters.push(e),e._parent=this,e.hiddenFooter||(t.prototype._addChild.call(this,e,i),this._footer=this._footer||e,this._footers++)):t.prototype._addChild.call(this,e,i)},e}(oo),no=function(t){function e(){var e=t.call(this)||this;return e._expandable=!1,e.$_footerIndex=0,e._hiddenFooter=!1,e._extents=0,e}return o(e,t),Object.defineProperty(e.prototype,"expandable",{get:function(){return this._expandable},set:function(t){this._expandable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerIndex",{get:function(){return this.$_footerIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vindex",{get:function(){return this.$_vindex>-1?this.$_vindex:this.$_footerIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiddenFooter",{get:function(){return this._hiddenFooter},set:function(t){this._hiddenFooter=t},enumerable:!0,configurable:!0}),e.prototype._getExtents=function(){return this._extents},e.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isData",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayLevel",{get:function(){return this._expandable?this.level-1:this.level},enumerable:!0,configurable:!0}),e}(eo),so=function(t){function e(e){var i=t.call(this,-1)||this;return i._provider=e,i}return o(e,t),Object.defineProperty(e.prototype,"provider",{get:function(){return this._provider},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._provider.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapsable",{get:function(){return!1},enumerable:!0,configurable:!0}),e}(ro),ao=function(t){function e(e){var i=t.call(this)||this;return i._hideDeleted=!1,i._eventLock=0,i._rowHeighted=!1,i._explicitHeighted=!1,i._indexing=e,i._rootItem=i._createRootItem(),i}return o(e,t),e.prototype._doDispose=function(){return this._rootItem.dispose(),null},Object.defineProperty(e.prototype,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._hideDeletedChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summaryMode",{get:function(){return _.AGGREGATE},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortMode",{get:function(){return l.AUTO},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxItemCount",{get:function(){return 0},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.setFixed=function(t,e,i){},e.prototype.attachItem=function(t){t._parent=this._rootItem},e.prototype.getItemsByIndices=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var r=this.getItem(t[i]);r&&e.push(r)}return e},e.prototype.getIndexOfRow=function(t,e){var i=this.getItemOfRow(t,e);return i?i.index:-1},e.prototype.getIndicesOfRows=function(t,e){var i=[],o=t?t.length:0;if(o)for(var r=0;r<o;r++){var n=this.getItemOfRow(t[r],e);i.push(n?n.index:-1)}return i},e.prototype.getItemsByRows=function(t,e){void 0===e&&(e=!1);for(var i=[],o=t?t.length:0,r=0;r<o;r++){var n=this.getItemOfRow(t[r],e);n&&i.push(n)}return i},e.prototype.exchange=function(t,e){},e.prototype.setCheckable=function(t,e){t&&e!=t.checkable&&(t._setCheckable(e),this._fireCheckableChanged(t))},e.prototype.checkItem=function(t,e,i,o){if(t){var r=t.checked;i?(this._clearChecked(),e&&this._setChecked(t,!0),e!=r&&o&&this._fireItemChecked(t),this._fireRefreshClient()):e!=r&&(this._setChecked(t,e),o?this._fireItemChecked(t):this._fireRefreshClient()),this._fireItemCheckChanged([t],e)}},e.prototype.checkItems=function(t,e,i){if(t&&t.length>0){for(var o=0,r=t.length;o<r;o++){var n=t[o];n instanceof eo&&this._setChecked(n,e)}i?1===t.length?this._fireItemChecked(t[0]):this._fireItemsChecked(t,e):this._fireRefreshClient()}this._fireItemCheckChanged(t,e)},e.prototype.checkAll=function(t,e,i,o,r){var n=this.itemCount;if(i)for(var s=0;s<n;s++){var a=this.getItem(s);a.checkable&&this._setChecked(a,t)}else for(s=0;s<n;s++)this._setChecked(this.getItem(s),t);o?this._fireItemAllChecked(t):this._fireRefreshClient(),this._fireItemCheckChanged(null,t)},e.prototype._setCheckItem=function(t,e){t._setChecked(e)},e.prototype._clearDisplayLevels=function(){},e.prototype.canUpdate=function(t,e){if(t){var i=this.dataSource;if(!i)return!1;var o=t.dataRow;if(!i.canUpdateField(o,e))return!1;var r=t.itemState,n=Qi(r)||r===wi.DUMMY;return(o>=0||n)&&(n||i.canUpdateRow(o))}return!1},e.prototype.canAppend=function(){var t=this.dataSource;return t&&t.canAppendRow()},e.prototype.canInsert=function(t){if(t){var e=t.dataRow,i=this.dataSource;return i&&i.canInsertRow(e)}return!1},e.prototype.canDelete=function(t){if(t){var e=t.dataRow,i=this.dataSource;return e>=0&&i&&i.canDeleteRow(e)}return!1},e.prototype.appendDummy=function(){},e.prototype.cancelDummy=function(){},e.prototype.findItem=function(t,e,i,o,r){return-1},e.prototype.findCell=function(t,e,i,o,r,n){return null},e.prototype.getSum=function(t){return NaN},e.prototype.getMax=function(t){return NaN},e.prototype.getMin=function(t){return NaN},e.prototype.getAvg=function(t){return NaN},e.prototype.getVar=function(t){return NaN},e.prototype.getVarp=function(t){return NaN},e.prototype.getStdev=function(t){return NaN},e.prototype.getStdevp=function(t){return NaN},e.prototype.getDataCount=function(t){return NaN},e.prototype.getDataAvg=function(t){return NaN},Object.defineProperty(e.prototype,"isIndexing",{get:function(){return this._indexing},enumerable:!0,configurable:!0}),e.prototype.setRowHeight=function(t,e,i){t.$_setHeight(e,i)&&(isNaN(e)||(i?this._explicitHeighted=!0:this._rowHeighted=!0))},e.prototype.clearRowHeights=function(t){if(t||this._rowHeighted){for(var e=!1,i=this.itemCount-1;i>=0;i--){var o=this.getItem(i),r=o.height;isNaN(r)||(o.$_clearHeight(t),o.heights=null,e=!0)}return this._rowHeighted=!1,t&&(this._explicitHeighted=!1),e}},e.prototype.isRowHeighted=function(t){return void 0===t&&(t=!0),this._rowHeighted||t&&this._explicitHeighted},e.prototype.setCheckFieldIndex=function(t){},e.prototype.getItemChecked=function(t,e){return e},e.prototype.setItemChecked=function(t,e){return!1},Object.defineProperty(e.prototype,"rootItem",{get:function(){return this._rootItem},enumerable:!0,configurable:!0}),e.prototype._createRootItem=function(){return new so(this)},e.prototype._hideDeletedChanged=function(){},e.prototype.$_canFire=function(){return this._eventLock<=0},e.prototype._setChecked=function(t,e){t._setChecked(e)},e.prototype._clearChecked=function(){for(var t=0,e=this.itemCount;t<e;t++)this._setChecked(this.getItem(t),!1)},e.prototype._resetItemIndicies=function(t){if(this._indexing)for(var e=t,i=this.itemCount;e<i;e++)this.getItem(e)._index=e},e.prototype._setExpanded=function(t,e){t._setExpanded(e)},e.prototype._resetItemIndex=function(t){var e=this.getItem(t);e&&(e._index=t)},e.prototype._incDescendents=function(t,e){t._descendantCount+=e,t.parent&&this._incDescendents(t.parent,e)},e.prototype._copyExtents=function(t,e){t instanceof eo&&e instanceof eo&&e._setExtents(t._getExtents())},e.prototype._fireReset=function(){this._eventLock<=0&&this.fireEvent(e.RESET)},e.prototype._fireRefresh=function(){this._eventLock<=0&&this.fireEvent(e.REFRESH)},e.prototype._fireRefreshClient=function(){this._eventLock<=0&&this.fireEvent(e.REFRESH_CLIENT)},e.prototype._fireItemInserted=function(t){this._eventLock<=0&&this.fireEvent(e.ITEM_INSERTED,t)},e.prototype._fireItemDeleted=function(t){this._eventLock<=0&&this.fireEvent(e.ITEM_DELETED,t)},e.prototype._fireItemUpdated=function(t){this._eventLock<=0&&this.fireEvent(e.ITEM_UPDATED,t)},e.prototype._fireCheckableChanged=function(t){this._eventLock<=0&&this.fireEvent(e.CHECKABLE_CHANGED,t)},e.prototype._fireItemChecked=function(t){this._eventLock<=0&&this.fireEvent(e.ITEM_CHECKED,t)},e.prototype._fireItemsChecked=function(t,i){this._eventLock<=0&&this.fireEvent(e.ITEMS_CHECKED,t,i)},e.prototype._fireItemAllChecked=function(t){this._eventLock<=0&&this.fireEvent(e.ITEM_ALL_CHECKED,t)},e.prototype._fireItemCheckChanged=function(t,i){this.fireEvent(e.ITEMCHECK_CHANGED,t,i)},e.prototype._fireRowStateChanged=function(t){this._eventLock<=0&&this.fireEvent(e.ROW_STATE_CHANGED,t)},e.prototype._fireRowStatesChanged=function(t){this._eventLock<=0&&this.fireEvent(e.ROW_STATES_CHANGED,t)},e.prototype._fireRowStatesCleared=function(){this._eventLock<=0&&this.fireEvent(e.ROW_STATES_CLEARED)},e.prototype._fireSort=function(t,i,o){this._eventLock<=0&&this.fireEvent(e.SORT,t,i,o)},e.prototype._fireSorted=function(){this._eventLock<=0&&this.fireEvent(e.SORTED)},e.prototype._fireFilterAdded=function(t,i){this._eventLock<=0&&this.fireEvent(e.FILTER_ADDED,t,i)},e.prototype._fireFilterRemoved=function(t,i){this._eventLock<=0&&this.fireEvent(e.FILTER_REMOVED,t,i)},e.prototype._fireFilterCleared=function(t){this._eventLock<=0&&this.fireEvent(e.FILTER_CLEARED,t)},e.prototype._fireFilterAllCleared=function(){this._eventLock<=0&&this.fireEvent(e.FILTER_ALL_CLEARED)},e.prototype._fireFiltered=function(t,i){this._eventLock<=0&&this.fireEvent(e.FILTERED,t,i)},e.prototype._fireCommandStackChanged=function(t,i){this._eventLock<=0&&this.fireEvent(e.COMMAND_STACK_CHANGED,t,i)},e.prototype._fireDataLoadComplated=function(){this._eventLock<=0&&this.fireEvent(e.DATA_LOAD_COMPLATED)},e.RESET="onItemProviderReset",e.REFRESH="onItemProviderRefresh",e.REFRESH_CLIENT="onItemProviderRefreshClient",e.ITEM_INSERTED="onItemProviderItemInserted",e.ITEM_DELETED="onItemProviderItemDeleted",e.ITEM_UPDATED="onItemProviderItemUpdated",e.CHECKABLE_CHANGED="onItemProviderCheckableChanged",e.ITEM_CHECKED="onItemProviderItemChecked",e.ITEMS_CHECKED="onItemProviderItemsChecked",e.ITEM_ALL_CHECKED="onItemProviderItemAllChecked",e.ROW_STATE_CHANGED="onItemProviderRowStateChanged",e.ROW_STATES_CHANGED="onItemProviderRowStatesChanged",e.ROW_STATES_CLEARED="onItemProviderRowStatesCleared",e.SORT="onItemProviderSort",e.SORTED="onItemProviderSorted",e.FILTER_ADDED="onItemProviderFilterAdded",e.FILTER_REMOVED="onItemProviderFilterRemoved",e.FILTER_CLEARED="onItemProviderFilterCleared",e.FILTER_ALL_CLEARED="onItemProviderFilterAllCleared",e.FILTERED="onItemProviderFiltered",e.ITEMCHECK_CHANGED="onItemProviderItemCheckChanged",e.COMMAND_STACK_CHANGED="onItemProviderCommandStackChanged",e.DATA_LOAD_COMPLATED="onItemProviderDataLoadComplated",e}(se),lo=function(t){function e(e,i){var o=t.call(this,i)||this;return o._initialize(),o.source=e,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source&&this._source.removeListener(this),this._clearItems(),this._source=t,this._source&&(this._populateItems(),this._source.addListener(this)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._source&&this._source.dataSource},set:function(t){this._source&&(this._source.dataSource=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._source?this._source.rowCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedCount",{get:function(){return this._source?this._source.fixedCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxItemCount",{get:function(){return this._source?this._source.maxItemCount:0},set:function(t){this._source&&(this._source.maxItemCount=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorted",{get:function(){return this._source&&this._source.sorted},enumerable:!0,configurable:!0}),e.prototype.setFixed=function(t,e,i){this._source&&this._source.setFixed(t,e,i)},e.prototype.getIndexOfRow=function(t){return this._source?this._source.getIndexOfRow(t,!1):-1},e.prototype.getItemOfRow=function(t,e){return this._source?this._source.getItemOfRow(t,e):null},e.prototype._refreshItems=function(){this._source&&this._source._refreshItems()},e.prototype._clearDisplayLevels=function(){this._source&&this._source._clearDisplayLevels()},e.prototype._initialize=function(){},e.prototype._clearItems=function(){},e.prototype._populateItems=function(){this._resetItemIndicies(0)},e.prototype.onItemProviderReset=function(t){this._populateItems(),this._fireReset()},e.prototype.onItemProviderRefresh=function(t){this._populateItems(),this._fireRefresh()},e.prototype.onItemProviderRefreshClient=function(t){this._fireRefreshClient()},e.prototype.onItemProviderItemInserted=function(t,e){this._resetItemIndicies(0),this._fireItemInserted(e)},e.prototype.onItemProviderItemDeleted=function(t,e){this._resetItemIndicies(0),this._fireItemDeleted(e)},e.prototype.onItemProviderItemUpdated=function(t,e){this._resetItemIndicies(0),this._fireItemUpdated(e)},e.prototype.onItemProviderCheckableChanged=function(t,e){this._fireCheckableChanged(e)},e.prototype.onItemProviderItemChecked=function(t,e){this._fireItemChecked(e)},e.prototype.onItemProviderItemsChecked=function(t,e,i){this._fireItemsChecked(e,i)},e.prototype.onItemProviderItemAllChecked=function(t,e){this._fireItemAllChecked(e)},e.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._fireItemCheckChanged(e,i)},e.prototype.onItemProviderRowStateChanged=function(t,e){this._fireRowStateChanged(e)},e.prototype.onItemProviderRowStatesChanged=function(t,e){this._fireRowStatesChanged(e)},e.prototype.onItemProviderRowStatesCleared=function(t){this._fireRowStatesCleared()},e.prototype.onItemProviderFilterAdded=function(t,e,i){},e.prototype.onItemProviderFilterRemoved=function(t,e,i){},e.prototype.onItemProviderFilterCleared=function(t,e){},e.prototype.onItemProviderFilterAllCleared=function(t){},e.prototype.onItemProviderFiltered=function(t,e,i){},e.prototype.onItemProviderSort=function(t,e,i){},e.prototype.onItemProviderSorted=function(t){},e.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},e}(ao),ho=function(t){function e(e,i,o,r,n){var s=t.call(this,r)||this;return s._started=!1,s._checkDiff=!1,s._strictDiff=!1,s._target=i,e.attachItem(s),s._setIndex(o),s._state=n,s.$_setDisplayLevel(i?i.displayLevel:0),s}return o(e,t),Object.defineProperty(e.prototype,"values",{get:function(){},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.beginEdit=function(t,e){this.$_clearHeight(!0)},e.prototype.setValue=function(t,e){},Object.defineProperty(e.prototype,"resizable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemState",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.getData=function(t){return null},e.prototype.setData=function(t,e){},e.prototype.getRowData=function(){return null},e.prototype.getRowObject=function(){return null},e.prototype._clearDisplayLevels=function(){},e}(io),uo=function(t){function e(e,i,o,r,n){var s=t.call(this,r)||this;return s._values=[],s._changeValues=[],s._started=!1,s._checkDiff=!1,s._strictDiff=!1,s._invalidFields=[],s._target=i,e.attachItem(s),s._setIndex(o),s._state=n,s.$_setDisplayLevel(i?i.displayLevel:0),s._invalidFields=[],s}return o(e,t),Object.defineProperty(e.prototype,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.provider,i=this.dataSource,o=i.fieldCount;if(t instanceof Array){o=Math.min(o,t.length);for(var r=0;r<o;r++){var n=i.getField(r),s=this._values[r],a=n.readValue(t[r]);this._values[r]=a,this._started&&!n.equalValues(s,a)&&e._editItemCellUpdated(this,r,s,a)}}else if(t)for(r=0;r<o;r++){var l=i.getOrgFieldName(r);if(t.hasOwnProperty(l)){n=i.getField(r),s=this._values[r],a=n.readValue(t[l]);this._values[r]=a,this._started&&!n.equalValues(s,a)&&e._editItemCellUpdated(this,r,s,a)}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalidFields",{get:function(){return this._invalidFields},enumerable:!0,configurable:!0}),e.prototype.beginEdit=function(t,e){Qi(this._state)&&this.$_clearHeight(!0),this._started=!0,this._checkDiff=t,this._strictDiff=e},e.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new De("field index is out of bounds: "+t);var o=i.getField(t),r=this._values[t];e=o.readValue(e),this._values[t]=e,this._started&&!o.equalValues(r,e)&&this.provider._editItemCellUpdated(this,t,r,e),this.$_clearHeight(!1)},Object.defineProperty(e.prototype,"resizable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemState",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._target?this._target.level:1},enumerable:!0,configurable:!0}),e.prototype.getData=function(t){if(t<0&&t>=this.dataSource.fieldCount)throw new RangeError("field index is out of bounds: "+t);return this._values[t]},e.prototype.setData=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),r=this._values[t],n=!this._checkDiff;e=o.readValue(e),n||(n=this._strictDiff?!o.equalValues(r,e):!o.sameValues(r,e)),n&&(this._values[t]=e,this._changeValues[t]=!0,this.provider._editItemCellUpdated(this,t,r,e),this.provider._editItemCellEdited(this,t)),this.$_clearHeight(!1)},e.prototype.getRowData=function(){return this._values.concat()},e.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++){e[t.getOrgFieldName(i)]=this._values[i]}return e}return null},e.prototype.isEdited=function(t){return this._changeValues[t]},e.prototype._setChecked=function(t){this.provider.setItemChecked(this,t)||this._setExtents(t?1|this._getExtents():-2&this._getExtents())},e.prototype._clearDisplayLevels=function(){},e}(io),co=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._checkDiff=!1,o._checkCellDiff=!1,o._strictDiff=!1,o._undoable=!1,o._cancelWhenLastUndo=!1,o._orgItem=null,o._editingItem=null,o._dummyEditItem=null,o._editingState=wi.NORMAL,o._insertMode=0,o._modified=!1,o._commiting=!1,o._saveDs=null,o._commands=new qe(o),e&&(o._saveDs=e.dataSource)&&o._saveDs.registerClient(o),o}return o(e,t),e.prototype._doDispose=function(){this._saveDs=null,t.prototype._doDispose.call(this)},e.prototype.isDataEditing=function(){return this.isEditing()},e.prototype.cancelDataEditing=function(){this.isEditing()&&this.fireCancelRequest()},e.prototype.commitDataEditing=function(){this.isEditing()&&this.fireCommitRequest()},e.prototype.editCommandStackChanged=function(t,e,i){var o=this._saveDs;o?this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo):this._fireCommandStackChanged(e,i)},Object.defineProperty(e.prototype,"isCheckDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCheckCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isStrictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editingItem",{get:function(){return this._commiting||this.isEditing()?this._editingItem:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isUpdating",{get:function(){return this._editingState==wi.UPDATING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isInserting",{get:function(){return this._editingState==wi.INSERTING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isAppending",{get:function(){return this._editingState==wi.APPENDING},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoable",{get:function(){return this._undoable&&this._saveDs&&this._saveDs.undoable},set:function(t){t!=this._undoable&&(this._undoable=t,this._commands.flush(),this._saveDs.undoable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canUndo",{get:function(){return this._commands.canUndo||this._saveDs&&this._saveDs.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this._commands.canRedo||this._saveDs&&this._saveDs.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoing",{get:function(){return this._commands.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redoing",{get:function(){return this._commands.redoing},enumerable:!0,configurable:!0}),e.prototype.isEditing=function(t){return Ji(this._editingState)&&(!t||t===this._editingItem)},e.prototype.isEdited=function(t){return Ji(this._editingState)&&(!t||t===this._editingItem)&&this._modified},e.prototype.setDiffs=function(t,e,i){this._checkDiff=t,this._checkCellDiff=e,this._strictDiff=i},e.prototype.edit=function(t){if(this.isEditing())return!0;if(t)try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}return!1},e.prototype.editData=function(t,e,i){var o;if(t&&(o=this.dataSource)&&e>=0&&e<o.fieldCount){if(!this.isEditing())try{return this._beginUpdate(t),!0}catch(t){throw this.cancel(),t}this._editingItem.setData(e,i)}return!1},e.prototype.appendDummy=function(){if(!this.isEditing())try{this._beginAppendDummy()}catch(t){this.cancelDummy()}},e.prototype.append=function(t){if(!this.isEditing())try{return this._beginAppend(t),!0}catch(t){throw this.cancel(),t}return!1},e.prototype.insert=function(t,e,i,o){if(!this.isEditing())try{return this._beginInsert(t,e,i,o),!0}catch(t){throw this.cancel(),t}return!1},e.prototype.cancelDummy=function(){this._dummyEditItem&&this._cancelDummyEdit()},e.prototype.cancel=function(){this.isEditing()&&this._cancelEdit()},e.prototype.commit=function(){if(this.isEditing()){this._commiting=!0;try{var t=this.dataSource;if(t){if(this._editingState==wi.UPDATING&&this.isCheckDiff){for(var e=this._editingItem.values,i=e.length,o=this.isStrictDiff,r=!1,n=0;n<i;n++)if(o){if(!t.getField(n).equalValues(this._orgItem.getData(n),e[n])){r=!0;break}}else if(!t.getField(n).sameValues(this._orgItem.getData(n),e[n])){r=!0;break}if(!r)return this._cancelEdit(),!0}return this._commitEdit()}}finally{this._commiting=!1}}return!0},e.prototype.execute=function(t){t&&(this.undoable?this._commands.execute(t):t.execute())},e.prototype.undo=function(){this.isEditing()?(this._commands.undo(),!this._commands.canUndo&&this._cancelWhenLastUndo&&this.cancel()):this._saveDs&&this._saveDs.undo()},e.prototype.redo=function(){this.isEditing()?this._commands.redo():this._saveDs&&this._saveDs.redo()},e.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._commands.flush(),t&&this._saveDs&&this._saveDs.clearCommandStack()},e.prototype.revert=function(t){},e.prototype.revertAll=function(t){},e.prototype._checkEditing=function(){if(!this.isEditing())throw new Error("itemProvider is not editing")},e.prototype._checkNotEditing=function(){if(this.isEditing())throw new Error("itemProvider is already editing")},e.prototype._beginUpdate=function(t){if(!t)throw new Error("item is null");this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginUpdate(t),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._orgItem=t,this._editingState=wi.UPDATING,this._commands.flush(),this.fireUpdateStarted(this._editingItem))},e.prototype._doBeginUpdate=function(t){return null},e.prototype._beginAppendDummy=function(){this._dummyEditItem=this._doBeginAppendDummy()},e.prototype._doBeginAppendDummy=function(){return null},e.prototype._beginAppend=function(t){this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginAppend(t),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=wi.APPENDING,this._commands.flush(),this.fireAppendStarted(this._editingItem))},e.prototype._doBeginAppend=function(t){return null},e.prototype._beginInsert=function(t,e,i,o){void 0===i&&(i=!1),void 0===o&&(o=!1),this._checkNotEditing(),this._modified=!1,this._editingItem=this._doBeginInsert(t,e,i,o),this._editingItem.beginEdit(this.isCheckCellDiff,this.isStrictDiff),this._editingItem&&(this._editingState=wi.INSERTING,this._resetItemIndicies(0),this._commands.flush(),this.fireInsertStarted(this._editingItem))},e.prototype._doBeginInsert=function(t,e,i,o){return null},e.prototype._updateEditingRow=function(t){return!1},e.prototype._insertEditingRow=function(t){return!1},e.prototype._cancelDummyEdit=function(){this._dummyEditItem=null,this._doCancelDummyEdit()},e.prototype._cancelEdit=function(){this._checkEditing();var t=this._editingState;try{this._editingState=wi.NORMAL,this._doCancelEdit(t,this._orgItem)}catch(e){throw this._editingState=t,e}this._modified=!1,this._commands.flush(),this.fireCanceled()},e.prototype._doCancelDummyEdit=function(){},e.prototype._doCancelEdit=function(t,e){t==wi.INSERTING&&this._resetItemIndicies(0)},e.prototype._commitEdit=function(){if(this._checkEditing(),!this.dataSource)throw new Error("data provier is null");try{this.fireItemCommitting(this._editingItem)}catch(t){alert(t.message)}var t=this._editingState,e=!1;if(this.isUpdating)try{this._editingState=wi.NORMAL,e=this._doCompleteUpdate(this._orgItem)}catch(e){throw this._editingState=t,e}else try{this._editingState=wi.NORMAL,e=this._doCompleteInsert(t==wi.APPENDING)}catch(e){throw this._editingState=t,e}return e?(this._modified=!1,this._doCommitEdit(t,this._orgItem),this._commands.flush(),this.fireCommitted(this._editingItem)):this._editingState=t,e},e.prototype._doCommitEdit=function(t,e){return!1},e.prototype._editItemCellEdited=function(t,e){t&&this.isEditing(t)&&(this._modified=!0,this.fireItemCellEdited(t,e))},e.prototype._editItemCellUpdated=function(t,e,i,o){this.isEditing(t)&&(this._modified=!0,this.fireItemCellUpdated(t,e,i,o))},e.prototype.$_editingItem=function(){return this._editingItem},e.prototype.$_dummyItem=function(){return this._dummyEditItem},e.prototype.fireUpdateStarted=function(t){this.$_canFire()&&this.fireEvent(e.UPDATE_STARTED,t)},e.prototype.fireAppendStarted=function(t){this.$_canFire()&&this.fireEvent(e.APPEND_STARTED,t)},e.prototype.fireInsertStarted=function(t){this.$_canFire()&&this.fireEvent(e.INSERT_STARTED,t)},e.prototype.fireItemCellEdited=function(t,i){this.$_canFire()&&this.fireEvent(e.CELL_EDITED,t,i)},e.prototype.fireItemCellUpdated=function(t,i,o,r){this.$_canFire()&&this.fireEvent(e.CELL_UPDATED,t,i,o,r)},e.prototype.fireItemCommitting=function(t){this.$_canFire()&&this.fireEvent(e.COMMITTING,t)},e.prototype.fireCommitted=function(t){this.$_canFire()&&this.fireEvent(e.COMMITTED,t)},e.prototype.fireCanceled=function(){this.$_canFire()&&this.fireEvent(e.CANCELED)},e.prototype.fireCommitRequest=function(){this.$_canFire()&&this.fireEvent(e.COMMIT_REQUEST)},e.prototype.fireCancelRequest=function(){this.$_canFire()&&this.fireEvent(e.CANCEL_REQUEST)},e.prototype.onItemProviderReset=function(e){t.prototype.onItemProviderReset.call(this,e);var i=this.dataSource;i!=this._saveDs&&(this._saveDs&&this._saveDs.unregisterClient(this),this._saveDs=i,this._saveDs&&this._saveDs.registerClient(this))},e.prototype.onItemProviderRefresh=function(e){t.prototype.onItemProviderRefresh.call(this,e)},e.prototype.onItemProviderRefreshClient=function(e){t.prototype.onItemProviderRefreshClient.call(this,e)},e.prototype.onItemProviderItemInserted=function(e,i){t.prototype.onItemProviderItemInserted.call(this,e,i)},e.prototype.onItemProviderItemDeleted=function(e,i){t.prototype.onItemProviderItemDeleted.call(this,e,i)},e.prototype.onItemProviderItemUpdated=function(e,i){t.prototype.onItemProviderItemUpdated.call(this,e,i)},e.prototype.onItemProviderCommandStackChanged=function(t,e,i){var o=this._commands;this._fireCommandStackChanged(e||o.canUndo,i||o.canRedo)},e.UPDATE_STARTED="onItemEditUpdateStarted",e.APPEND_STARTED="onItemEditAppendStarted",e.INSERT_STARTED="onItemEditInsertStarted",e.CELL_EDITED="onItemEditCellEdited",e.CELL_UPDATED="onItemEditCellUpdated",e.COMMITTING="onItemEditCommitting",e.COMMITTED="onItemEditCommitted",e.CANCELED="onItemEditCanceled",e.COMMIT_REQUEST="onItemEditCommitRequest",e.CANCEL_REQUEST="onItemEditCancelRequest",e}(lo),po=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._insertRow=-1,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemCount",{get:function(){var t=this.source.itemCount;return t+=this.isInserting||this.isAppending?1:0,t+=this.$_dummyItem()?1:0},enumerable:!0,configurable:!0}),e.prototype.getItem=function(t,e){var i=this.source;if(e)return i.getItem(t,e);var o,r=this.$_editingItem(),n=this.$_dummyItem();return this.isEditing()&&r.index==t?r:(this.isInserting?o=t>r.index?i.getItem(t-1):i.getItem(t):t<i.itemCount&&(o=i.getItem(t)),o||(n&&t==this.itemCount-1?n:null))},e.prototype.getItems=function(t,e){return this.source.getItems(t,e)},e.prototype._doBeginUpdate=function(t){return this._createEditItem(t,wi.UPDATING,null,!1,!1)},e.prototype._doBeginAppendDummy=function(){return this.$_dummyItem()||this._createDummyEditItem()},e.prototype._doBeginAppend=function(t){return this._createEditItem(null,wi.APPENDING,t,!1,!1)},e.prototype._doBeginInsert=function(t,e,i,o){return this._createEditItem(t,wi.INSERTING,e,i,o)},e.prototype._doCompleteUpdate=function(t){var e=this.dataSource;if(e instanceof Ve){var i=this.$_editingItem();return this._copyExtents(i,t),e.updateRow(i.dataRow,i.values,!1)}return!1},e.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=!1;if(e){var o=this.$_editingItem(),r=t?e.rowCount:Math.max(0,this._insertRow),n=o.values;if(i=e.insertRow(r,n,o._index2)){var s=this.getItemOfRow(r,!0);s&&(o._setCheckable(s.checkable),this._copyExtents(o,s))}}return i},e.prototype.remove=function(t){var e=this.dataSource;if(t&&!this.isEditing(t)&&e){var i=t.dataRow;i>=0&&e.removeRow(i)}},e.prototype.revert=function(t){if(t instanceof eo||(t=this.getItem(t)),t){var e=this.dataSource;if(e){var i=t.dataRow,o=e.getRowState(i);o==at.DELETED?e.setRowState(i,at.NONE,!1):o==at.CREATE_AND_DELETED&&e.setRowState(i,at.CREATED,!1)}}},e.prototype.revertAll=function(t){if(t&&0!=t.length){var e=this.dataSource;if(e)for(var i=t.length;i--;){var o=this.getItem(t[i]);if(o){var r=o.dataRow,n=e.getRowState(r);n==at.DELETED?e.setRowState(r,at.NONE,!1):n==at.CREATE_AND_DELETED&&e.setRowState(r,at.CREATED,!1)}}}},e.prototype.getRemovableRows=function(t){if(!t||0==t.length)return null;for(var e=[],i=0,o=t.length;i<o;i++){var r=this.getItem(t[i]).dataRow;r>=0&&e.push(r)}return e},e.prototype.removeRows=function(t){t&&(t.length>1?this.dataSource.removeRows(t):this.dataSource.removeRow(t[0]))},e.prototype._createDummyEditItem=function(){return new ho(this,null,this.itemCount,-1,wi.DUMMY)},e.prototype._createEditItem=function(t,e,i,o,r){var n=this.dataSource;if(!n)return null;var s=null,a=n.fieldCount;switch(e){case wi.UPDATING:s=new uo(this,t,t.index,t.dataRow,e);for(var l=0;l<a;l++)s.setValue(l,t.getData(l));this._copyExtents(t,s);break;case wi.INSERTING:case wi.APPENDING:var h=this._rs,u=e==wi.INSERTING&&t?o?t.index+1:t.index:this.itemCount;if(s=new uo(this,t,u,-1,e),e==wi.INSERTING){var c=t.dataRow,d=t;if(c<=-1){for(var p=this.source._visibleItems;(d=p.getNext(d))&&!(d instanceof io););this._insertRow=d?d.dataRow:n.rowCount}else this._insertRow=o?Math.min(n.rowCount,c+1):c;if(t instanceof io&&o&&h){var _=h._pubItems.indexOf(d);_++>=0&&_<=h._pubItems.length&&(s._index2=_)}}if(i)for(l=0;l<a;l++)i.length>l&&s.setValue(l,i[l])}return s},e}(co),_o=(function(t){function e(e,i){var o=t.call(this,e)||this;return o.message=e,o.tokenPos=i,o}o(e,t)}(Error),function(){function t(t){this.literal=t}return t.prototype.evaluate=function(t){return this.literal},t}()),fo=function(){function t(t,e){void 0===e&&(e=-1),this.ident=t,this.idKey=e}return t.prototype.evaluate=function(t){return this.idKey<0&&(this.idKey=t.isIdentifier(this.ident)),t.evaluateIdentifier(this.idKey)},t}(),go=function(){function t(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=!1),this.ident=t,this.idKey=e,this.capital=i}return t.prototype.evaluate=function(t){var e=this.ident,i=e.indexOf("["),o=e.indexOf("]");if(i<o){var r=e.substr(0,i).trim(),n=e.substring(i+1,o).replace(/'|"/g,"").trim();return this.idKey<0&&(this.idKey=t.isIdentifier(r)),t.evaluateIndexerS(this.idKey,n,this.capital)}},t}(),yo=function(){function t(t,e){void 0===e&&(e=!1),this._silentError=!1,this._tokens=[],this._source=t,this._silentError=e,t&&this._parse(t)}return Object.defineProperty(t.prototype,"source",{get:function(){return this._source},set:function(t){t!=this._source&&(this._source=t,this._parse(t))},enumerable:!0,configurable:!0}),t.prototype.evaluate=function(t){try{for(var e=this._tokens,i="",o=0,r=e.length;o<r;o++){i+=e[o].evaluate(t)||""}return i}catch(t){if(!this._silentError)throw new t}return null},t.prototype._parse=function(t){if(this._tokens=[],t)for(var e,i=t.length,o=0;o<i;){var r=t.indexOf("${",o);if(r>=0){var n=t.indexOf("}",r+2);if(n>=0){if(r>o){var s=t.substring(o,r);e=new _o(s),this._tokens.push(e)}if(h=t.substring(r+2,n).trim()){var a,l=void 0;e=(a=h.indexOf("["))&&(l=h.indexOf("]"))&&a<l?new go(h):new fo(h),this._tokens.push(e)}o=n+1}else r=-1}if(r<0){var h=t.substr(o,i);e=new _o(h),this._tokens.push(e);break}}},t}();!function(t){t.ACTIVE="active",t.UNACTIVE="unactive",t.INDETERMINATE="indeterminate"}(Zi||(Zi={}));var mo,bo=function(t){function e(e){var i=t.call(this)||this;return i._active=!1,i._visible=!0,i._level=0,i._category=null,i.criteria=e,i}return o(e,t),e.prototype._doDispose=function(){this._criteria=null,this._category=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this.criteriaChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t,this.callbackChanged()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t,this.changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(t){this._description=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(t){t!=this._active&&(this._active=t,this.changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t,this.changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"category",{get:function(){return this._category},set:function(t){this._category=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!0,configurable:!0}),e.prototype.toString=function(){return this._text||this._name},e.prototype.changed=function(){this.fireEvent(e.CHANGED)},e.prototype.criteriaChanged=function(){},e.prototype.callbackChanged=function(){},e.CHANGED="onColumnFilterChanged",e}(se),vo=function(t){function e(){var e=t.call(this,null)||this;return e._childs=[],e}return o(e,t),Object.defineProperty(e.prototype,"active",{get:function(){for(var t=this._childs.length;t--;)if(!this._childs[t].active)return!1;return!0},set:function(t){for(var e=this._childs.length;e--;)this._childs[e].active=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._childs.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeState",{get:function(){for(var t=void 0,e=0,i=this._childs.length;e<i;e++){if(null!=t&&this._childs[e].active!=t)return Zi.INDETERMINATE;t=this._childs[e].active}return t?Zi.ACTIVE:Zi.UNACTIVE},enumerable:!0,configurable:!0}),e.prototype._doDispose=function(){this.clear(),t.prototype._doDispose.call(this)},e.prototype.clear=function(){this._childs=[]},e.prototype.add=function(t,e,i,o,r){var n=new bo(o);return n.name=e,n.text=i,n.active=r,this.addChild(n),t.add(n),n},e.prototype.addChild=function(t){t.level=this.level+1,t.category=this,this._childs.push(t)},e.prototype.getChild=function(t){return this._childs[t]},e}(bo),wo=function(){function t(t){this._model=t,this.parse()}return t.prototype._doDispose=function(){this._exprNode=null,this._model=null},Object.defineProperty(t.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),t.prototype.prepare=function(t,e){t.setDataSource(e)},t.prototype.select=function(t,e,i,o){var r=this._model.callback;return r?r.call(this,t._ds.handler,i.dataRow,e.level+1,o,this._model,i.getData(o)):!this._exprNode||(t.setData(i,o),this._exprNode.evaluate(t))},t.prototype.criteriaChanged=function(){this.parse()},t.prototype.parse=function(){this._model.callback||(this._model.criteria?this._exprNode=ee.Default.parse(this._model.criteria,null):this._exprNode=null)},t}(),Co=function(t){function e(e){var i=t.call(this)||this;return i._items=[],i._names={},i._updating=!1,i._nextId=1,i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeCount",{get:function(){for(var t=0,e=0,i=this._items;e<i.length;e++){i[e].active&&t++}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isVisible",{get:function(){for(var t=0,e=this._items;t<e.length;t++){if(e[t].visible)return!0}return!1},enumerable:!0,configurable:!0}),e.prototype.getOwner=function(){return this._owner},e.prototype.getItem=function(t){return this._items[t]},e.prototype.itemByName=function(t){return this._names[t]},e.prototype.indexOf=function(t){for(var e=this._items.length-1;e>=0;e--)if(this._items[e].name==t)return e;return-1},e.prototype.getActiveItems=function(t){for(var e=[],i=this._items.length-1;i>=0;i--)this._items[i].active==t&&e.push(this._items[i]);return e},e.prototype.assignFrom=function(t){if(t!==this){var e=this.clear(!1);if(t)for(var i=t instanceof Array?t:[t],o=i.length,r=0;r<o;r++)if((t=i[r])&&t.name){this.$_checkName(t.name);var n=new bo(null);n.assignFrom(t),this._items.push(n),this._names[t.name]=n,n.addListener(this)}(e||this.count>0)&&this.changed(null)}},e.prototype.clear=function(t){void 0===t&&(t=!0);var e=this._items.length;if(e>0){for(var i=0;i<e;i++)this._items[i].removeListener(this);return this._items.length=0,this._names={},t&&this.changed(null),!0}return!1},e.prototype.add=function(t,e){void 0===e&&(e=!0);var i=lt.cast(t,bo);i?this._items.indexOf(i)<0&&i.name&&this.$_checkName(i.name):t&&t.name&&(this.$_checkName(t.name),(i=new bo(null)).assignFrom(t)),i&&(this._items.push(i),this._names[i.name]=i,i.addListener(this),e&&this.changed(null))},e.prototype.addAll=function(t,e){if(t instanceof Array||!t||(t=[t]),t&&t.length>0){for(var i=0,o=t.length,r=0;r<o;r++){var n=lt.cast(t[r],bo);if(n?this._items.indexOf(n)<0&&n.name&&(e||this.$_checkName(n.name)):t[r]&&t[r].name&&(e||this.$_checkName(t[r].name),(n=new bo(null)).assignFrom(t[r])),n){var s=this.indexOf(n.name);s>=0?(this._items[s]&&this._items[s].removeListener(this),this._items[s]=n):this._items.push(n),n.addListener(this),this._names[n.name]=n,i++}}i>0&&this.changed(null)}},e.prototype.remove=function(t){if(t){for(var e=this._items.length-1;e>=0;e--){var i=this._items[e];if(i.name==t)return this._items.splice(e,1),delete this._names[i.name],i.removeListener(this),this.changed(null),!0}return!1}},e.prototype.removeItems=function(t){if(t){for(var e=0,i=t.length-1;i>=0;i--){var o=this.indexOf(t[i]);if(o>=0){var r=this._items[o];this._items.splice(o,1),delete this._names[r.name],r.removeListener(this),e++}}e>0&&this.changed(null)}},e.prototype.activateItems=function(t,e,i){if(void 0===i&&(i=!0),t){var o=0;this._updating=!0;try{for(var r=t.length-1;r>=0;r--){var n=this._names[t[r]];n&&n.active!=e&&(n._active=e,o++)}}finally{this._updating=!1}i&&o>0&&this.changed(null)}},e.prototype.activateAll=function(t){var e=!1;this._updating=!0;try{for(var i=0,o=this._items.length;i<o;i++){var r=this._items[i];r.active!=t&&(r._active=t,e=!0)}}finally{this._updating=!1}e&&this.changed(null)},e.prototype.hideFilters=function(t,e){if(t)for(var i=0,o=t.length;i<o;i++){var r=this._names[t[i]];r&&(r.visible=!e)}},e.prototype.hideAllFilters=function(t){for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];o&&(o.visible=!t)}},e.prototype.toggleItems=function(t){if(t){var e=0;this._updating=!0;try{for(var i=t.length-1;i>=0;i--){var o=this._names[t[i]];o&&(o._active=!o.active,e++)}}finally{this._updating=!1}e>0&&this.changed(null)}},e.prototype.toggleAll=function(){var t=!1;this._updating=!0;try{for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];o._active=!o.active,t=!0}}finally{this._updating=!1}t&&this.changed(null)},e.prototype.changed=function(t){this._updating||this.fireEvent(bo.CHANGED,t)},e.prototype.$_checkName=function(t){if(this._names.hasOwnProperty(t))throw new Error("Column filter already existes: "+t)},e.prototype.$_userFilterAdd=function(t,e){var i=t instanceof bo?t:null;return i||(this.$_checkName(t.name),(i=new bo(null)).assignFrom(t)),this.add(i,e),i},e.prototype.onColumnFilterChanged=function(t){this.changed(t)},e.prototype.onColumnFilterSelectorChanged=function(){this.changed(null)},e.prototype.onColumnFilterUserAdd=function(t,e,i){},e}(se),xo=function(t){function e(){var e=t.call(this)||this;return e._field=-1,e._fieldCount=0,e}return o(e,t),e.prototype._doDispose=function(){this._item=this._ds=null,t.prototype._doDispose.call(this)},e.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=this._ds?this._ds.fieldCount:0},e.prototype.setData=function(t,e){this._item=t,this._field=e},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._item.getData(this._field);case e.ID_STATE:switch(this._item.rowState){case at.CREATED:return"c";case at.UPDATED:return"u";case at.DELETED:return"d";case at.CREATE_AND_DELETED:return"x"}return;case e.ID_CHANGED_CELL:var i=this._item.dataRow,o=this._field;return o>=0&&this._item.rowState==at.UPDATED&&this._ds.isDataChanged(i,o);case e.ID_FIELD:return this._field;case e.ID_MAX:case e.ID_MIN:case e.ID_MEAN:return 0}throw new yt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new yt("Data field index out of bounds:"+i);return this._item.getData(i)}throw new yt("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new yt("Invalid identifier indexer: "+t);if(this._ds){var r=o?this._ds.getFieldIndexC(i):this._ds.getFieldIndex(i);if(r<0||r>=this._fieldCount)throw new yt("Data field is not exists:"+i);return this._item.getData(r)}},e.ID_VALUE=0,e.ID_FIELD=1,e.ID_VALUES=2,e.ID_STATE=3,e.ID_CHANGED_CELL=4,e.ID_MAX=10,e.ID_MIN=11,e.ID_MEAN=12,e.IDENTS={value:e.ID_VALUE,field:e.ID_FIELD,values:e.ID_VALUES,state:e.ID_STATE,changedcell:e.ID_CHANGED_CELL,min:e.ID_MAX,max:e.ID_MIN,mean:e.ID_MEAN},e}(It),Io=function(t){function e(e){var i=t.call(this)||this;return i._dirty=!1,i._grid=e,i}return o(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dirty",{get:function(){return this._dirty},enumerable:!0,configurable:!0}),e.prototype.clean=function(){this._dirty&&(this._dirty=!1)},e.prototype.invalidate=function(){this._grid&&this._grid.invalidate()},e.prototype.refreshOwner=function(){this._grid&&this._grid.refreshView()},e.prototype._changed=function(){this._doChanged(),this._dirty||(this._dirty=!0,this.refreshOwner())},e.prototype._doChanged=function(){},e}(se),Eo=function(t){function e(e){var i=t.call(this,e)||this;return i._visible=!0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._visibleChanged())},enumerable:!0,configurable:!0}),e.prototype._doChanged=function(){this._grid&&this._grid._visualObjectChanged(this)},e.prototype._visibleChanged=function(){this._changed()},e}(Io),So=function(t){function e(){var e=t.call(this)||this;return e._item=null,e._group=null,e._dataSource=null,e._fieldCount=0,e}return o(e,t),e.prototype._doDispose=function(){this._item=null,this._group=null,this._dataSource=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"index",{get:function(){return this._item.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),e.prototype.setDataSource=function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount:0},e.prototype.setItem=function(t){this._item=t,this._group=lt.cast(t,oo)},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_ROW:return this._item.index;case e.ID_DATAROW:return this._item.dataRow;case e.ID_CHECKED:return this._item.checked;case e.ID_STATE:switch(this._item.rowState){case at.CREATED:return"c";case at.UPDATED:return"u";case at.DELETED:return"d";case at.CREATE_AND_DELETED:return"x"}return;case e.ID_COUNT:return this._group?this._group.count:0;case e.ID_DCOUNT:return this._group?this._group.descendantCount:0}throw new yt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new yt("Data field index out of bounds:"+i);return this._item.getData(i)}throw new yt("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new yt("Invalid identifier indexer: "+t);if(this._dataSource){var r=o?this._dataSource.getFieldIndexC(i):this._dataSource.getFieldIndex(i);if(r<0||r>=this._fieldCount)throw new yt("Data field is not exists:"+i);return this._item.getData(r)}},e.ID_ROW=0,e.ID_DATAROW=1,e.ID_CHECKED=2,e.ID_VALUE=3,e.ID_VALUES=4,e.ID_STATE=5,e.ID_COUNT=6,e.ID_DCOUNT=7,e.IDENTS={row:e.ID_ROW,datarow:e.ID_DATAROW,checked:e.ID_CHECKED,value:e.ID_VALUE,values:e.ID_VALUES,state:e.ID_STATE,count:e.ID_COUNT,dcount:e.ID_DCOUNT},e}(It),Oo=function(t){function e(){var e=t.call(this)||this;return e._fieldCount=0,e}return o(e,t),e.prototype._doDispose=function(){this._cell=null,this._item=null,this._grid=null,this._dataSource=null,t.prototype._doDispose.call(this)},e.prototype.setDataSource=function(t){this._dataSource=t,this._fieldCount=t?t.fieldCount:0},e.prototype.setCell=function(t,e){this._cell=t,this._grid=t.index.grid,this._item=t.index.item||e},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){if(this._cell.index.itemIndex<0){var i=this._cell.index.dataField;switch(t){case e.ID_VALUE:return this._item.getData(i);case e.ID_DATA_ROW:return this._item.dataRow}}switch(t){case e.ID_VALUE:return this._cell.value();case e.ID_ROW:return this._cell.index.itemIndex;case e.ID_DATA_ROW:return this._cell.index.dataRow;case e.ID_INDEX:return this._cell.index.column.index;case e.ID_FIELD:return this._cell.index.dataField;case e.ID_CHECKED:return this._item.checked;case e.ID_STATE:switch(this._item.rowState){case at.CREATED:return"c";case at.UPDATED:return"u";case at.DELETED:return"d";case at.CREATE_AND_DELETED:return"x"}return;case e.ID_TAG:return this._cell.index.column.tag;case e.ID_BASE:var o=this._cell.index.dataColumn.baseIndex;return o>=0?this._item.getData(o):void 0;case e.ID_COUNT:return this._item instanceof oo?this._item.count:0;case e.ID_DCOUNT:return this._item instanceof oo?this._item.descendantCount:0;case e.ID_CHANGED_CELL:var r=this._cell.index,n=r.dataRow,s=r.dataField;return s>=0&&this._item.rowState==at.UPDATED&&this._dataSource.isDataChanged(n,s);case e.ID_LOOKUP_EXISTS:var a=this._cell.index.dataColumn,l=void 0;if(l=a.lookupSource){for(var h=a.lookupKeyFieldIds,u=h.length,c=[],d=0;d<u;d++)c.push(this._item.getData(h[d]));return l.exists(c)}return a.getLookupIndex(this._cell.value())>-1}throw new yt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new yt("Data field index out of bounds:"+i);return this._item.getData(i)}throw new yt("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new yt("Invalid identifier indexer: "+t);if(this._dataSource){var r=o?this._dataSource.getFieldIndexC(i):this._dataSource.getFieldIndex(i);if(r<0||r>=this._fieldCount)throw new yt("Data field is not exists:"+i);return this._item.getData(r)}},e.ID_VALUE=0,e.ID_ROW=1,e.ID_DATA_ROW=2,e.ID_INDEX=3,e.ID_FIELD=4,e.ID_CHECKED=5,e.ID_STATE=6,e.ID_TAG=7,e.ID_BASE=8,e.ID_VALUES=9,e.ID_COUNT=10,e.ID_DCOUNT=11,e.ID_CHANGED_CELL=12,e.ID_LOOKUP_EXISTS=13,e.IDENTS={value:e.ID_VALUE,row:e.ID_ROW,datarow:e.ID_DATA_ROW,index:e.ID_INDEX,field:e.ID_FIELD,checked:e.ID_CHECKED,state:e.ID_STATE,tag:e.ID_TAG,base:e.ID_BASE,values:e.ID_VALUES,count:e.ID_COUNT,dcount:e.ID_DCOUNT,changedcell:e.ID_CHANGED_CELL,lookupexists:e.ID_LOOKUP_EXISTS},e}(It),Ro=function(t){function e(){var e=t.call(this)||this;return e._fieldCount=0,e}return o(e,t),e.prototype._doDispose=function(){this._cell=null,this._item=null,this._ds=null,this._grid=null,t.prototype._doDispose.call(this)},e.prototype.setDataArguments=function(t,e,i){this._ds=t,this._fieldCount=t?t.fieldCount:0,this._cell=e,this._item=i,this._grid=e&&e.index.column.grid},e.prototype.setItem=function(t){this._item=t},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){var i;switch(t){case e.ID_VALUE:return this._item.getData(this._cell.index.dataField);case e.ID_BASE:return(i=this._cell.index.dataColumn.baseIndex)>=0?this._item.getData(i):void 0;case e.ID_PREV_VALUES:var o=this._cell.index.column,r=this._grid.getDataColumns();i=r.indexOf(o);var n=[];if(r.length<0||i<0)return;for(var s=0,a=Math.min(i,r.length);s<a;s++)n.push(this._item.getData(r[s].dataIndex));return n.join("`")}throw new yt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new yt("Data field index out of bounds:"+i);return this._item.getData(i)}throw new yt("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new yt("Invalid identifier indexer: "+t);if(this._ds){var r=o?this._ds.getFieldIndexC(i):this._ds.getFieldIndex(i);if(r<0||r>=this._fieldCount)throw new yt("Data field is not exists:"+i);return this._item.getData(r)}},e.ID_VALUE=0,e.ID_VALUES=1,e.ID_BASE=2,e.ID_PREV_VALUES=3,e.IDENTS={value:e.ID_VALUE,values:e.ID_VALUES,base:e.ID_BASE,prevvalues:e.ID_PREV_VALUES},e}(It),Do=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.setGrid=function(t){this._grid=t},e.prototype.setGroup=function(t){this._group=t},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){var i,o,r=this._group;switch(t){case e.ID_GROUP_FIELD:return(i=r.dataSource.getField(r.groupField))?i.fieldName:"";case e.ID_FIELD_HEADER:return(i=r.dataSource.getField(r.groupField))?i.header:"";case e.ID_GROUP_COLUMN:return(o=this._grid?this._grid.columnByField(r.groupField):null)?o.displayText:r.dataSource.getFieldName(r.groupField);case e.ID_COLUMN_HEADER:return(o=this._grid?this._grid.columnByField(r.groupField):null)?o.header.text||o.displayText:r.dataSource.getFieldName(r.groupField);case e.ID_COLUMN_FOOTER:return(o=this._grid?this._grid.columnByField(r.groupField):null)?o.footer.text||o.displayText:r.dataSource.getFieldName(r.groupField);case e.ID_GROUP_VALUE:var n=r.firstItem;return n?n.getData(r.groupField):void 0;case e.ID_ROW_COUNT:return r.descendantCount}throw new yt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){switch(t){case e.ID_SUM:case e.ID_MAX:case e.ID_MIN:case e.ID_AVG:case e.ID_DATA_COUNT:case e.ID_DATA_AVG:if(isNaN(i)||i<0)return;var o=void 0;switch(t){case e.ID_SUM:o=this._group.getSum(i);break;case e.ID_MAX:o=this._group.getMax(i);break;case e.ID_MIN:o=this._group.getMin(i);break;case e.ID_AVG:o=this._group.getAvg(i);break;case e.ID_DATA_COUNT:o=this._group.getDataCount(i);break;case e.ID_DATA_AVG:o=this._group.getDataAvg(i)}return isNaN(o)?"":String(o)}throw new yt("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,e,i){var o=this._group.dataSource,r=e?o?o.getFieldIndex(e):-1:this._group.groupField;return this.evaluateIndexerI(t,r)},e.ID_GROUP_FIELD=0,e.ID_FIELD_HEADER=1,e.ID_GROUP_COLUMN=2,e.ID_COLUMN_HEADER=3,e.ID_COLUMN_FOOTER=4,e.ID_GROUP_VALUE=5,e.ID_ROW_COUNT=6,e.ID_SUM=7,e.ID_MAX=8,e.ID_MIN=9,e.ID_AVG=10,e.ID_DATA_COUNT=11,e.ID_DATA_AVG=12,e.IDENTS={groupfield:e.ID_GROUP_FIELD,fieldheader:e.ID_FIELD_HEADER,groupcolumn:e.ID_GROUP_COLUMN,columnheader:e.ID_COLUMN_HEADER,columnfooter:e.ID_COLUMN_FOOTER,groupvalue:e.ID_GROUP_VALUE,rowcount:e.ID_ROW_COUNT,sum:e.ID_SUM,max:e.ID_MAX,min:e.ID_MIN,avg:e.ID_AVG,datacount:e.ID_DATA_COUNT,dataavg:e.ID_DATA_AVG},e}(It),ko=function(t){function e(e){var i=t.call(this)||this;return i._index=new Hn,i._name=e,i}return o(e,t),e.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this._index.item},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueColumn",{get:function(){return this._index.valueColumn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataColumn",{get:function(){return this._index.dataColumn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.setIndex=function(t){this._index.assignFrom(t)},e.prototype.setIndex2=function(t,e,i){this._index._grid=t,this._index.set(e,i)},e.prototype.setLayout=function(t){this._index.layout=t},e.ERROR="<<ERROR>>",e}(ft),Po=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,i)||this;return o._model=e,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){this._model=t},enumerable:!0,configurable:!0}),e}(ko),To=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getBlankState=function(){return g.NONE},e.prototype.isValueChanged=function(){return!1},e}(ko),Mo=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e||"dataCell")||this}return o(e,t),e.getText=function(t,i){var o=i.dataIndex>=0?t.getData(i.dataIndex):void 0;return e._getText(t,i,o)},e._getText=function(t,e,i){var o,n=e;if(n.lookupDisplay){var s=n.lookupSource;if(s){for(var a=n.lookupKeyFieldIds,l=a.length,h=[],u=0;u<l;u++)h.push(t.getData(a[u]));o=void 0!==(o=s.lookup(h,n.valueSeparator))?o:null!=n.textOfInvalid?n.textOfInvalid:i}else{var c=n.labelFieldIndex;o=c>=0?t.getData(c):n.getLookupLabel(i)}}else{var d,p=void 0;if(o=i,n.valueType==r.NUMBER&&null!=(d=n.nanText)&&isNaN(o))o=d;else if(p=n.displayCallback){o=p(n.grid.handler,Hn.temp(n.grid,t.index,e).proxy(),o)}else null!=o&&"object"==typeof o&&(o=JSON.stringify(o))}return null==o?"":String(o)},e._getDisplayText=function(t,i,o,n,s){var a,l=t.formatOptions,h=s.textFormatter||void 0===o.textFormat&&l.textFormatter,u=s.numberFormatter||void 0===o.numberFormat&&l.numberFormatter,c=s.booleanFormatter||void 0===o.booleanFormat&&l.boolFormatter,d=s.datetimeWriter||void 0===o.datetimeFormat&&l.datetimeWriter;if(o){switch(o.valueType){case r.TEXT:a=n&&h?h.getText(n):e._getText(i,o,n);break;case r.NUMBER:var p=Number(n);a=isNaN(p)||null==p?o.nanText:0==p&&null!=o.zeroText?o.zeroText:u?u.getText(p,o.displayMinusZero):e._getText(i,o,n);break;case r.DATETIME:a=n instanceof Date&&d?d.getText(n):e._getText(i,o,n);break;case r.BOOLEAN:a=c?c.formatValue(n):e._getText(i,o,n);break;case r.OBJECT:var _=o.getField(),f=i.dataRow,g=o.objectKey||o.objectCallback,y=g?o.objectKey:_.objectKey,m=g?o.objectCallback:_.objectCallback;if(n){var b=a=m&&"function"==typeof m?m(_.orgFieldName,f,n):y&&n.hasOwnProperty(y)?n[y]:e._getText(i,o,n);switch(typeof b){case"string":break;case"number":a=u?u.getText(b,o.displayMinusZero):String(b);break;case"boolean":a=c?c.formatValue(b):String(b);break;default:a=b instanceof Date&&d?d.getText(b):b?String(b):""}}break;default:a=e._getText(i,o,n)}if(a){var v=s.prefix;v&&(a=v+a),(v=s.suffix)&&(a+=v)}}return a},e.equalBlankRuntime=function(){return this._equalBlankRuntime||(this._equalBlankRuntime=new Ro),this._equalBlankRuntime},e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getValue=function(){var t=this.dataColumn.dataIndex;if(t>=0)return this.item.getData(t)},e.prototype.getDisplayText=function(t,i){return e._getDisplayText(t,this.index.item,this.index.dataColumn,this.getValue(),i)},Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype.getBlankState=function(){var t=g.NONE,i=this.index,o=i.layout,r=this.dataColumn,n=this.item,s=o.equalBlankNode,a=s&&e.equalBlankRuntime();if(o&&o.blanked&&o.dataRoot&&n.dataRow>=0){var l=o.grid,h=l.itemCount;if(s&&a&&a.setDataArguments(n.dataSource,this,n),h>1){var u=i.itemIndex,c=r.dataIndex,d=s?(a.setItem(n),s.evaluate(a)):n.getData(c),p=void 0,_=void 0,f=void 0;if(u>0){var y=l.getItem(u-1);u<h-1?(f=l.getItem(u+1),y instanceof io?(p=s?(a.setItem(y),s.evaluate(a)):y.getData(c),(d instanceof Date&&p instanceof Date?+d==+p:d==p)?t=f instanceof io&&((_=s?(a.setItem(f),s.evaluate(a)):f.getData(c))instanceof Date&&d instanceof Date?+_==+d:_==d)?g.BODY:g.TAIL:f instanceof io&&((_=s?(a.setItem(f),s.evaluate(a)):f.getData(c))instanceof Date&&d instanceof Date?+_==+d:_==d)&&(t=g.HEAD)):f instanceof io&&((_=s?(a.setItem(f),s.evaluate(a)):f.getData(c))instanceof Date&&d instanceof Date?+_==+d:_==d)&&(t=g.HEAD)):y instanceof io&&((p=s?(a.setItem(y),s.evaluate(a)):y.getData(c))instanceof Date&&d instanceof Date?+p==+d:p==d)&&(t=g.TAIL)}else(f=l.getItem(u+1))instanceof io&&((_=s?(a.setItem(f),s.evaluate(a)):f.getData(c))instanceof Date&&d instanceof Date?+_==+d:_==d)&&(t=g.HEAD)}}return t},e.prototype.isValueChanged=function(){var t=this.dataColumn.dataIndex;return t>=0&&this.item.isChanged(t)},e}(To),Lo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.setItem=function(t){this.$_item=t},Object.defineProperty(e.prototype,"item",{get:function(){return this.$_item},enumerable:!0,configurable:!0}),e}(Mo),Fo=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e||"literalCell")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.getDisplayText=function(t){return this.text},e}(To),No=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e||"seriesCell")||this}return o(e,t),e.getText=function(t,e){return void 0===e&&(e=","),t?t.join(e):""},e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getDisplayText=function(t,e){var i=this.value;return i?i.join(e||","):""},Object.defineProperty(e.prototype,"getText",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var t=this.index.column;if(t instanceof bn){var e=t.fields,i=e?e.length:0;if(i>0){for(var o=this.item,r=new Array(i),n=0;n<i;n++)e[n]>=0&&(r[n]=o.getData(e[n]));return r}}return[]},enumerable:!0,configurable:!0}),e}(To),Vo=function(t){function e(e){return void 0===e&&(e=null),t.call(this,e||"mergedDataCell")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getValue=function(){var e=this.index,i=e.item;return i instanceof io?t.prototype.getValue.call(this):(i=(i instanceof oo?i:i.parent).firstItem).getData(e.dataField)},Object.defineProperty(e.prototype,"text",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e}(Mo),Bo=function(t){function e(){var e=t.call(this)||this;return e.integralBar=!0,e.minBarWidth=1,e.maxBarWidth=0,e.barWidth=0,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doRender=function(t,e,i){var o=this._getBarLength();if(!(o<1)){var r=this.barWidth;r<=0&&(r=this.integralBar?Math.floor(e.width/o):e.width/o,r=Math.max(this.minBarWidth,r),this.maxBarWidth>0&&(r=Math.min(this.maxBarWidth,r))),o*=r,e.x+=(e.width-o)/2,this.integralBar&&(e.x=Math.floor(e.x)),this._drawBars(t,this.barStyle,i,e.x,e.y,r,e.height)}},e}(function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},set:function(t){if(t!=this._value){this._value=t;try{this._error=null,this._parse(t)}catch(t){this._error=t}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),e.prototype.render=function(t,e){this._doRender(t,e,!1)},e.prototype.renders=function(t,e){this._doRender(t,e,!0)},e}(ft)),$o=[2171426,2236706,2236961,1184291,1184546,1249826,1188371,1188626,1253906,2232851,2233106,2298386,1122866,1188146,1188401,1126946,1192226,1192481,2241041,2232626,2232881,2175506,2240786,3219761,3215906,3281186,3281441,3219986,3285266,3285521,2171171,2171681,2302241,1119011,1249571,1250081,1123091,1253651,1254161,2167571,2298131,2298641,1122611,1123121,1253681,1126691,1127201,1257761,3223841,2167601,2298161,2175251,2175761,2175281,3215651,3216161,3346721,3219731,3220241,3350801,3227921,2233361,4395281,1118756,1119266,1184036,1184801,1315106,1315361,1122836,1123346,1188116,1188881,1319186,1319441,2363921,2232596,4272401,2363666,1261841,1118786,1184066,1184321,1131026,1196306,1196561,4264466,4329746,4330001,2171201,2179361,4268321,1118531,1119041,1249601,1130771,1131281,4264211,4264721,1126721,1130801,3215681,4264241,2167826,2167316,2167346,36901138],Ao=[103,104,105],jo=[251658240,15728640,983040,61440,3840,240,15],Ho=function(t){function e(){var e=t.call(this)||this;return e.quietZoneWidth=10,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._parse=function(t){this._weights=[];var e=t?t.length:0;if(!(e<1)){var i=this.$_detectType(t);2==i&&e%2==1&&(t="0"+t,e++);var o=Ao[i],r=$o[o],n=o;if(this._weights.push(r),2==i)for(var s=0;s<e;s+=2){var a=t.substr(s,2);o=parseInt(a),o=this.$_convert(i,o),r=$o[o],this._weights.push(r),n+=o*(s+1)}else for(s=0;s<e;s++)o=t.charCodeAt(s),o=this.$_convert(i,o),r=$o[o],this._weights.push(r),n+=o*(s+1);n%=103,this._weights.push($o[n]),this._weights.push($o[106])}},e.prototype._getBarLength=function(){return this.quietZoneWidth+11*(this._weights.length-1)+13+this.quietZoneWidth},e.prototype._drawBars=function(t,e,i,o,r,n,s){o+=10*n;for(var a,l=this._weights.length-1,h=0;h<l;h++){a=this._weights[h];for(var u=0;u<6;u++){var c=(a&jo[u+1])>>4*(5-u);c*=n,u%2==0&&(i?(this.integralBar,t.sbounds(e,o+"",r+"%",c+"",s+"%")):(this.integralBar,t.bounds(e,o,r,c,s))),o+=c}}a=this._weights[l];for(u=0;u<7;u++){c=(a&jo[u])>>4*(6-u);c*=n,u%2==0&&(i?(this.integralBar,t.sbounds(e,o+"",r+"%",c+"",s+"%")):(this.integralBar,t.bounds(e,o,r,c,s))),o+=c}},e.prototype.$_convert=function(t,e){switch(t){case 0:if(e>=0&&e<32)return e+64;if(e>=32&&e<96)return e-32;case 1:if(e>=32&&e<128)return e-32;case 2:if(e>=0&&e<=99)return e}throw new Error("Invalid code128 charactor: "+e)},e.prototype.$_detectType=function(t){var e=/^[0-9]+$/;return e.test(t)?2:(e=/[a-z]/).test(t)?1:0},e}(Bo),Wo={0:"nnnwwnwnn",1:"wnnwnnnnw",2:"nnwwnnnnw",3:"wnwwnnnnn",4:"nnnwwnnnw",5:"wnnwwnnnn",6:"nnwwwnnnn",7:"nnnwnnwnw",8:"wnnwnnwnn",9:"nnwwnnwnn",A:"wnnnnwnnw",B:"nnwnnwnnw",C:"wnwnnwnnn",D:"nnnnwwnnw",E:"wnnnwwnnn",F:"nnwnwwnnn",G:"nnnnnwwnw",H:"wnnnnwwnn",I:"nnwnnwwnn",J:"nnnnwwwnn",K:"wnnnnnnww",L:"nnwnnnnww",M:"wnwnnnnwn",N:"nnnnwnnww",O:"wnnnwnnwn",P:"nnwnwnnwn",Q:"nnnnnnwww",R:"wnnnnnwwn",S:"nnwnnnwwn",T:"nnnnwnwwn",U:"wwnnnnnnw",V:"nwwnnnnnw",W:"wwwnnnnnn",X:"nwnnwnnnw",Y:"wwnnwnnnn",Z:"nwwnwnnnn","-":"nwnnnnwnw",".":"wwnnnnwnn"," ":"nwwnnnwnn",$:"nwnwnwnnn","/":"nwnwnnnwn","+":"nwnnnwnwn","%":"nnnwnwnwn","*":"nwnnwnwnn"},Go=function(t){function e(){var e=t.call(this)||this;return e._wideWidth=3,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._parse=function(t){if(this._codes=[],t){var e=t.length;this._codes.push(Wo["*"]);for(var i=0;i<e;i++){var o=t.charAt(i),r=Wo[o];if(!r)throw new Error("Invalid Code39 character: "+o);this._codes.push(r)}this._codes.push(Wo["*"])}},e.prototype._getBarLength=function(){var t=this._codes.length;return t*(3*this._wideWidth+6)+(t-1)},e.prototype._drawBars=function(t,e,i,o,r,n,s){var a=this._codes.length;if(a>2)for(var l=0;l<a;l++){for(var h=this._codes[l],u=0;u<9;u++){var c="n"==h.charAt(u)?1:this._wideWidth;c*=n,u%2==0&&(i?(this.integralBar,t.sbounds(e,o+"",r+"%",c+"",s+"%")):(this.integralBar,t.bounds(e,o,r,c,s))),o+=c}l<a-1&&(o+=n)}},e}(Bo),Uo="http://www.w3.org/2000/svg",zo=0,Yo=function(t){function e(e,i){var o=t.call(this)||this;return o._transforms=[],o._defs=e,o._element=i,o}return o(e,t),e.prototype._doDispose=function(){this.clear(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"doc",{get:function(){return nt(this._element)||document},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e){return this._defs=t,this._element=e,this},e.prototype.clear=function(){this._defs=null,this._element=null,this._transforms=null},e.prototype.save=function(){this._transforms.push(this._trans),this._trans=""},e.prototype.restore=function(){this._trans=this._transforms.pop()},e.prototype.translate=function(t,e){this._trans+="translate("+t+","+e+")"},e.prototype.rotate=function(t){this._trans+="rotate("+180*t/Math.PI+")"},e.prototype.rotateAt=function(t,e,i){this._trans+="rotate("+180*t/Math.PI+","+e+",)"},e.prototype.scale=function(t,e){this._trans+="scale("+t+","+e+")"},e.prototype.clipRect=function(t){this.clip(t.x,t.y,t.width,t.height)},e.prototype.clip=function(t,e,i,o){var r=this.doc,n=zo++,s=r.createElementNS(Uo,"clipPath");s.setAttributeNS(null,"id","clip"+n);var a=r.createElementNS(Uo,"rect");a.x.baseVal.value=t,a.y.baseVal.value=e,a.width.baseVal.value=i,a.height.baseVal.value=o,s.appendChild(a),this._defs.appendChild(s)},e.prototype.sline=function(t,e,i,o,r){var n=this.doc.createElementNS(Uo,"line");this._element.appendChild(n),n.x1.baseVal.valueAsString=e,n.y1.baseVal.valueAsString=i,n.x2.baseVal.valueAsString=o,n.y2.baseVal.valueAsString=r,t&&n.setAttribute("class",t)},e.prototype.polygon=function(t,e){if(!(null==e||e.length<4)){var i=this.doc.createElementNS(Uo,"polygon");this._element.appendChild(i);var o=[];o.push(e[0]+","+e[1]);for(var r=2;r<e.length;r+=2)o.push(e[r]+","+e[r+1]);this._trans&&i.setAttributeNS(null,"transform",this._trans),i.setAttributeNS(null,"points",o.join(" ")),t&&i.setAttribute("class",t)}},e.prototype.bounds=function(t,e,i,o,r){var n=this.doc.createElementNS(Uo,"rect");this._element.appendChild(n),n.x.baseVal.value=e,n.y.baseVal.value=r<0?i+r:i,n.width.baseVal.value=o,n.height.baseVal.value=Math.abs(r),t&&n.setAttribute("class",t)},e.prototype.pbounds=function(t,e,i,o,r){var n=this.doc.createElementNS(Uo,"rect");this._element.appendChild(n),n.x.baseVal.valueAsString=e+"%",n.y.baseVal.valueAsString=(r<0?i+r:i)+"%",n.width.baseVal.valueAsString=o+"%",n.height.baseVal.valueAsString=Math.abs(r)+"%",t&&n.setAttribute("class",t)},e.prototype.sbounds=function(t,e,i,o,r){var n=this.doc.createElementNS(Uo,"rect");this._element.appendChild(n),n.x.baseVal.valueAsString=e,n.y.baseVal.valueAsString=i,n.width.baseVal.valueAsString=o,n.height.baseVal.valueAsString=r,t&&n.setAttribute("class",t)},e.prototype.scircle=function(t,e,i,o){var r=this.doc.createElementNS(Uo,"circle");this._element.appendChild(r),r.cx.baseVal.valueAsString=e,r.cy.baseVal.valueAsString=i,r.r.baseVal.valueAsString=o,t&&r.setAttribute("class",t)},e.prototype.ellipse=function(t,e,i,o,r){var n=this.doc.createElementNS(Uo,"ellipse"),s=o/2,a=r/2;this._element.appendChild(n),n.cx.baseVal.value=e+s,n.cy.baseVal.value=i+a,n.rx.baseVal.value=s,n.ry.baseVal.value=a,t&&n.setAttribute("class",t)},e}(ft),qo=function(t){function e(e){var i=t.call(this)||this,o=nt(e),r=i._element=o.createElementNS(Uo,"svg"),n=r.style,s=i._defs=o.createElementNS(Uo,"defs");return r.appendChild(s),n.background="",n.border="none",n.pointerEvents="none",e.appendChild(r),i._renderer=new Yo(i._defs),i}return o(e,t),e.createSVG=function(t){var e=nt(t),i=e.createElementNS(Uo,"svg"),o=i.style,r=e.createElementNS(Uo,"defs");i.appendChild(r),o.background="",o.border="none",o.pointerEvents="none";var n=e.createElementNS(Uo,"g");return i.appendChild(n),t.appendChild(i),i},e.renderSVG=function(t,e,i){var o=e.lastElementChild,r=this._renderer.init(e.firstChild,o);o.textContent="",i.call(t,e,r,e.clientWidth,e.clientHeight),r.clear()},e.renderSVG2=function(t,e,i){var o=nt(e);e.childElementCount>1&&e.removeChild(e.lastElementChild);var r=o.createElementNS(Uo,"g"),n=this._renderer.init(e.firstChild,r);e.appendChild(r),i.call(t,e,n),n.clear()},e.prototype._doDispose=function(){this._renderer=this._renderer.dispose(),this._element.parentElement.removeChild(this._element),this._element=this._defs=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"element",{get:function(){return this._element},enumerable:!0,configurable:!0}),e.prototype.render=function(t){this._clear(),t?t.call(this,this._renderer,this._element.clientWidth,this._element.clientHeight):this._doRender(this._renderer,this._element.clientWidth,this._element.clientHeight)},e.prototype._clear=function(){this._element.childElementCount>1&&this._element.removeChild(this._element.lastElementChild);var t=nt(this._element).createElementNS(Uo,"g");this._element.appendChild(t),this._renderer._element=t},e.prototype._doRender=function(t,e,i){},e._renderer=new Yo,e}(ft),Ko=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.draw=function(t,e,i){this._doDraw(t,e,i)},e}(ft),Xo={rectangle:[0,0,1,0,1,1,0,1],triangle:[.5,0,0,1,1,1],itriangle:[0,0,.5,1,1,0],diamond:[.5,0,0,.5,.5,1,1,.5],uparrow:[.5,0,0,.5,.3,.5,.3,1,.7,1,.7,.5,1,.5],downarrow:[.3,0,.3,.5,0,.5,.5,1,1,.5,.7,.5,.7,0],leftarrow:[0,.5,.5,1,.5,.7,1,.7,1,.3,.5,.3,.5,0],rightarrow:[0,.3,0,.7,.5,.7,.5,1,1,.5,.5,0,.5,.3],plus:[.3,0,.3,.3,0,.3,0,.7,.3,.7,.3,1,.7,1,.7,.7,1,.7,1,.3,.7,.3,.7,0],minus:[0,.3,0,.7,1,.7,1,.3],star:[.5,0,.6122,.3454,.9755,.3454,.6816,.559,.7938,.9045,.5,.691,.2061,.9045,.3183,.559,.02447,.3454,.3877,.3454]},Zo={equal:[[0,.2,0,.4,1,.4,1,.2],[0,.6,0,.8,1,.8,1,.6]]},Jo=function(t){function e(e){var i=t.call(this)||this;return i._shape=e,i}return o(e,t),Object.defineProperty(e.prototype,"shape",{get:function(){return this._shape},set:function(t){this._shape=t?"inverted_triangle"===t?e.INVERTED_TRIANLGE:t.toLowerCase():null},enumerable:!0,configurable:!0}),e.prototype._doDraw=function(t,e,i){var o=this._shape;if(Xo.hasOwnProperty(o)){if(h=Xo[o]){for(var r=0,n=0,s=0,a=(h=h.slice()).length/2;s<a;s++)h[2*s]=r+h[2*s]*e,h[2*s+1]=n+h[2*s+1]*i;h.push(h[0],h[1]),t.polygon(null,h)}}else if(Zo.hasOwnProperty(o)){var l=Zo[o];if(l){var h;for(r=0,n=0,s=0,a=(h=l[0].slice()).length/2;s<a;s++)h[2*s]=r+h[2*s]*e,h[2*s+1]=n+h[2*s+1]*i;h.push(h[0],h[1]),t.polygon(null,h);for(s=0,a=(h=(h=l[1]).slice()).length/2;s<a;s++)h[2*s]=r+h[2*s]*e,h[2*s+1]=n+h[2*s+1]*i;h.push(h[0],h[1]),t.polygon(null,h)}}},e.RECTANGLE="rectangle",e.TRIANLGE="triangle",e.INVERTED_TRIANLGE="itriangle",e.DIAMOND="diamond",e.UP_ARROW="uparrow",e.DOWN_ARROW="downarrow",e.LEFT_ARROW="leftarrow",e.RIGHT_ARROW="rightarrow",e.PLUS="plus",e.MINUS="minus",e.EQUAL="equal",e.STAR="star",e}(Ko),Qo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._doDraw=function(t,e,i){t.ellipse(null,0,0,e,i)},e}(Ko),tr=function(){function t(){}return t.layoutFlex=function(t,e,i,o,r,n){var s=n===O.CENTER,a=lt.included(n,O.LEFT,O.LEFT_EDGE),l=lt.included(n,O.RIGHT,O.RIGHT_EDGE),h=lt.included(n,O.TOP,O.TOP_EDGE),u=lt.included(n,O.BOTTOM,O.BOTTOM_EDGE),c=lt.included(n,O.LEFT_EDGE,O.RIGHT_EDGE,O.TOP_EDGE,O.BOTTOM_EDGE),d=t.style,p=s||a||l?"row":"column";p+=l||u?"-reverse":"",d.flexDirection=p,d.justifyContent=c?"start":"center",d.alignItems="center",(d=e.style).paddingTop=h&&c?r+"px":"",d.paddingBottom=u&&c?r+"px":"",(d=i.style).display=s?"none":"",d.paddingLeft=a?o+"px":"",d.paddingRight=l?o+"px":"",d.paddingTop=h?o+"px":"",d.paddingBottom=u?o+"px":"",d.flexGrow=c?"1":""},t}(),er=function(){this.commit=!0,this.value=void 0},ir=function(t){function e(){var e=t.call(this)||this;return e._showTooltip=!1,e._refreshFocusChanged=!1,e._textProp=lt.TextProp,e._inited=!1,e._dirty=!1,e._className="",e._itemClickable=!1,e}return o(e,t),e.getRendererStyle=function(t){var e=t.firstElementChild;if(e){if(e.classList){if(e.classList.length>1)return e.classList[1]}else{var i=e.className&&e.className.split(" ");if(i&&i.length>1)return i[1]}return e.className}},e.prototype._doDispose=function(){this._dom=null,this._index=null,t.prototype._doDispose.call(this)},e.prototype.clearAndDispose=function(){return this.clearContent(),this.dispose()},e.prototype.initContent=function(t,e,i){this._inited?this._index.assign(t):(this._dom=e,this._index=t.clone(),e.className=this._className=i,this._doInitContent(e),this._inited=!0)},e.prototype.initFormContent=function(t,e){this._inited||(this._dom=t,t.className=this._className=e,this._doInitContent(t),this._inited=!0)},e.prototype.clearContent=function(){this._inited&&(this._doClearContent(this._dom),this._dom.className=this._className="",this._inited=!1)},e.prototype.checkClassName=function(t){return t!=this._className},Object.defineProperty(e.prototype,"grid",{get:function(){return this._index&&this._index.grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return"rg-renderer"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"refreshFocusChanged",{get:function(){return this._refreshFocusChanged},set:function(t){this._refreshFocusChanged=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemClickable",{get:function(){return this._itemClickable},enumerable:!0,configurable:!0}),e.prototype.renderCell=function(t,e,i){this._doRenderCell(t,e,i,i.width-i.errorWidth-i.buttonWidth-i.editWidth-1,i.height-1)},e.prototype.getTooltip=function(t,e){if(this.showTooltip){var i=e.grid,o=i.body,r=e.column,n=o.getCellAt(t.item,r,!1),s=n&&this._makeText(i,n,t);return s||void 0}},e.prototype.canShowInnerFocus=function(){return!1},e.prototype.canEdit=function(){return!1},e.prototype.canEditClickAt=function(t){return!1},e.prototype.preventDefaultEditClick=function(t){t.preventDefault()},e.prototype.editClick=function(t,e){var i=new er;if(this._doEditClick(t,e,i))return i},e.prototype._doEditClick=function(t,e,i){return!1},e.prototype.preventDefaultClick=function(t){t.preventDefault()},e.prototype.canClick=function(t){return!1},e.prototype.canClickSpaceKey=function(t){return!1},e.prototype.click=function(t,e,i){return this._doClick(t,e,i)},e.prototype.itemClick=function(){this._doItemClick()},e.prototype._doItemClick=function(){},e.prototype._doClick=function(t,e,i){},e.prototype.canEditKey=function(t){return!1},e.prototype.editKey=function(t,e){var i=new er;if(this._doEditKey(t,e,i))return i},e.prototype._doEditKey=function(t,e,i){return!1},e.prototype.moveClickElement=function(t,e){},e.prototype._doInitContent=function(t){lt.setTextProp(t)},e.prototype._doClearContent=function(t){t[this._textProp]=""},e.prototype._doRenderCell=function(t,e,i,o,r){},e.prototype._changed=function(){this._dirty=!0},e.prototype._getValue=function(t,e,i){var o=e.item.dataRow;if(o>=0){var r=t.dataSource.getFieldIndex(i);if(r>=0)return t.dataSource.getValue(o,r)}},e.prototype._makeText=function(t,e,i){return e.getDisplayText(t,i)||e.dataColumn.placeHolder||""},e.prototype._clearHeight=function(){this._dom.style.height=""},e.prototype._setHeight=function(t){this._dom.style.height=t>=0?t+"px":""},e.prototype._isEmpty=function(t){return null==t||""==t||"number"==typeof t&&isNaN(t)},e}(ft),or=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),e.prototype._doRenderCell=function(t,e,i,o,r){if(e instanceof To)if(e.index.itemIndex!==t.layoutManager.topIndex)switch(e.getBlankState()){case g.BODY:case g.TAIL:this.$_setText("");break;default:this.$_setText(this._makeText(t,e,i))}else this.$_setText(this._makeText(t,e,i))},e.prototype.$_setText=function(t){this._dom[this._textProp]=t||""},e.TYPE="text",e.Default=new e,e}(ir);!function(t){t.DEFAULT="default",t.LEFT="left",t.RIGHT="right",t.TOP="top",t.BOTTOM="bottom"}(mo||(mo={}));var rr,nr=function(t){function e(){var i=t.call(this)||this;return i._barStyle=e.BAR_STYLE,i._rightBarStyle=e.BAR_RIGHT_STYLE,i._topBarStyle=e.BAR_TOP_STYLE,i._bottomBarStyle=e.BAR_BOTTOM_STYLE,i._minimum=0,i._maximum=100,i._barWidth="80%",i._showLabel=!1,i._origin=mo.LEFT,i._absoluteValue=!1,i._percentShapeWidth=80,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightBarStyle",{get:function(){return this._rightBarStyle},set:function(t){t!=this._rightBarStyle&&(this._rightBarStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topBarStyle",{get:function(){return this._topBarStyle},set:function(t){t!=this._topBarStyle&&(this._topBarStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomBarStyle",{get:function(){return this._bottomBarStyle},set:function(t){t!=this._bottomBarStyle&&(this._bottomBarStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showLabel",{get:function(){return this._showLabel},set:function(t){t!=this._showLabel&&(this._showLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){t!=this._barWidth&&(this._barWidth=t,"string"==typeof t&&"%"==t.charAt(t.length-1)?this._percentShapeWidth=parseFloat(t.substring(0,t.length-1)):this._percentShapeWidth=NaN,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},set:function(t){t!=this._origin&&(this._origin=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e,i,o=nt(t);t.childElementCount;t[this._textProp]="",(e=this._div=o.createElement("div")).style.position="relative",t.appendChild(e);var r=(i=this._span=o.createElement("span")).style;r.display="inline-block",r.position="absolute",r.top="50%",r.right="50%",r.msTransform=i.style.transform="translate(50%, -50%)",t.appendChild(i)},e.prototype._doRenderCell=function(t,i,o,r,n){var s=this._div,a=s.style,l=this._absoluteValue?Math.abs(i.value):i.value,h=Math.min(1,(l-this._minimum)/(this._maximum-this._minimum));switch(isNaN(h)&&(h=0),this._origin){case mo.LEFT:this.$_renderLeft(a,h),s.className=this.barStyle||e.BAR_STYLE;break;case mo.RIGHT:this.$_renderRight(a,h),s.className=this.rightBarStyle||e.BAR_RIGHT_STYLE;break;case mo.TOP:this.$_renderTop(a,h),s.className=this.topBarStyle||e.BAR_TOP_STYLE;break;case mo.BOTTOM:this.$_renderBottom(a,h),s.className=this.bottomBarStyle||e.BAR_BOTTOM_STYLE;break;default:this.$_renderLeft(a,h),s.className=this.barStyle||e.BAR_STYLE}this.$_setText(this._makeText(t,i,o))},e.prototype.$_renderLeft=function(t,e){if(t.left="0px",t.width=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.top="50%",t.msTransform=t.transform="translate(0%,-50%)",t.height=i+"px"}else t.top=(100-this._percentShapeWidth)/2+"%",t.height=this._percentShapeWidth+"%"},e.prototype.$_renderRight=function(t,e){if(t.left=100*(1-e)+"%",t.width=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.top="50%",t.msTransform=t.transform="translate(0%,-50%)",t.height=i+"px"}else t.top=(100-this._percentShapeWidth)/2+"%",t.height=this._percentShapeWidth+"%"},e.prototype.$_renderTop=function(t,e){if(t.top="0px",t.height=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.left="50%",t.msTransform=t.transform="translate(-50%,0%)",t.width=i+"px"}else t.left=(100-this._percentShapeWidth)/2+"%",t.width=this._percentShapeWidth+"%"},e.prototype.$_renderBottom=function(t,e){if(t.top=100*(1-e)+"%",t.height=100*e+"%",isNaN(this._percentShapeWidth)){var i=this._barWidth;t.left="50%",t.msTransform=t.transform="translate(-50%,0%)",t.width=i+"px"}else t.left=(100-this._percentShapeWidth)/2+"%",t.width=this._percentShapeWidth+"%"},e.prototype.$_setText=function(t){this._span[this._textProp]=t||""},e.TYPE="bar",e.STYLE="rg-bar-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BAR_STYLE="rg-bar-renderer-bar",e.BAR_RIGHT_STYLE="rg-bar-renderer-bar-right",e.BAR_TOP_STYLE="rg-bar-renderer-bar-top",e.BAR_BOTTOM_STYLE="rg-bar-renderer-bar-bottom",e}(ir),sr=function(t){function e(){var e=t.call(this)||this;return e._spaceKey=!1,e._itemClickable=!0,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"imageMap",{get:function(){return this._imageMap},set:function(t){t!==this._imageMap&&(this._imageMap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageCallback",{get:function(){return this._imageCallback},set:function(t){t!==this._imageCallback&&(this._imageCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageField",{get:function(){return this._imageField},set:function(t){t!=this._imageField&&(this._imageField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"imageHeight",{get:function(){return this._imageHeight},set:function(t){t!=this._imageHeight&&(this._imageHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._img=nt(t).createElement("img");e.style.verticalAlign="middle",t.appendChild(e)},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._img,s=this.$_getImageUrl(t,e);if(s){n.src=s;var a=this.$_getTitle(t,e);a?n.title=a:delete n.title,isNaN(this._imageHeight)?n.style.height="":n.style.height=this._imageHeight+"px"}else n.removeAttribute("src"),n.removeAttribute("title")},e.prototype.canClick=function(t){return t.target===this._img},e.prototype._doClick=function(t,e,i){if(e.target===this._img||"keydown"===e.type)return{type:this.type,value:t.value}},e.prototype.canClickSpaceKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},e.prototype.$_getImageUrl=function(t,e){var i="",o=this._imageCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._imageMap&&(i=this._imageMap[e.value]),!i&&this._imageField&&(i=this._getValue(t,e,this._imageField)),i||""},e.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},e.TYPE="image",e.STYLE="rg-image-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(ir),ar=function(t){function e(e,i){void 0===e&&(e=0),void 0===i&&(i=0);var o=t.call(this)||this;return o._itemGap=4,o._verticalEdgePad=2,o._textVisible=!0,o._reversed=!1,o._splitted=!1,o._imgFixed=!1,o._imgMiddle=!1,o._imgCenter=!1,o._imgHeight=16,o._imgWidth=16,o._imgLeft=0,o._imgRight=0,o._imgTop=0,o._imgBottom=0,o._spanVis=void 0,o._spanPadRight=0,o._spanPadLeft=0,o._spanCenter=!1,o._spanText="",o._imgWidth=e,o._imgHeight=i,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalEdgePad",{get:function(){return this._verticalEdgePad},set:function(t){t!=this._verticalEdgePad&&(this._verticalEdgePad=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textVisible",{get:function(){return this._textVisible},set:function(t){t!=this._textVisible&&(this._textVisible=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._doClearContent=function(e){t.prototype._doClearContent.call(this,e),this._reset()},e.prototype._reset=function(){this._oldLocation=void 0,this._imgHeight=this._imgWidth=this._imgLeft=this._imgRight=this._imgTop=this._imgBottom=this._spanPadRight=this._spanPadLeft=NaN,this._imgFixed=this._imgMiddle=this._imgCenter=this._spanVis=this._spanCenter=this._spanText=void 0},e.prototype.$_setImgFixed=function(t,e,i){(e!=this._imgFixed||i)&&(this._imgFixed=e,t.style.position=e?"absolute":"")},e.prototype.$_setImgMiddle=function(t,e,i){(e!=this._imgMiddle||i)&&(this._imgMiddle=e,t.style.verticalAlign=e?"middle":"")},e.prototype.$_setImgCenter=function(t,e,i){(e!=this._imgCenter||i)&&(this._imgCenter=e,t.style.textAlign=e?"center":"")},e.prototype.$_setImgWidth=function(t,e,i){((e=isNaN(e)?0:e)!=this._imgWidth||i)&&(this._imgWidth=e,t.style.width=e>0?e+"px":"")},e.prototype.$_setImgHeight=function(t,e,i){((e=isNaN(e)?0:e)!=this._imgHeight||i)&&(this._imgHeight=e,t.style.height=e>0?e+"px":"")},e.prototype.$_setImgBounds=function(t,e,i,o,r,n){(e!=this._imgTop||n)&&(this._imgTop=e,t.style.top=e>0?e+"px":""),(i!=this._imgLeft||n)&&(this._imgLeft=i,t.style.left=i>0?i+"px":""),(o!=this._imgBottom||n)&&(this._imgBottom=o,t.style.bottom=o>0?o+"px":""),(r!=this._imgRight||n)&&(this._imgRight=r,t.style.right=r>0?r+"px":"")},e.prototype.$_clearImgBounds=function(t,e){(this._imgTop>0||e)&&(this._imgTop=0,t.style.top=""),(this._imgLeft>0||e)&&(this._imgLeft=0,t.style.left=""),(this._imgBottom>0||e)&&(this._imgBottom=0,t.style.bottom=""),(this._imgRight>0||e)&&(this._imgRight=0,t.style.right="")},e.prototype.$_setSpanVis=function(t){t!=this._spanVis&&(this._spanVis=t,this._span.style.display=t?"":"none")},e.prototype.$_setSpanPadLeft=function(t){t!=this._spanPadLeft&&(this._spanPadLeft=t,this._span.style.paddingLeft=t>0?t+"px":"")},e.prototype.$_setSpanPadRight=function(t){t!=this._spanPadRight&&(this._spanPadRight=t,this._span.style.paddingRight=t>0?t+"px":"")},e.prototype.$_setSpanCenter=function(t,e){if(void 0===e&&(e=0),t!=this._spanCenter){var i=this._span.style;this._spanCenter=t,t?(i.left="50%",i.top=50+e+"%",i.transform="translate(-50%, -50%)",i.position="absolute"):(i.left="",i.top="",i.transform="",i.position="")}},e.prototype.$_setSpanText=function(t){if(t!=this._spanText){this._spanText=t;var e=this._textVisible?this._spanText:void 0;this._span[this._textProp]=e}},e.prototype.$_layoutLeft=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(this._itemGap),this.$_setSpanPadRight(0)},e.prototype.$_layoutRight=function(t,e,i,o){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(4)},e.prototype.$_layoutTop=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!1,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutBottom=function(t,e,i,o){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!1,o),this.$_setImgCenter(e,!1,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutLeftEdge=function(t,e,i,o,r){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,r),this.$_setImgMiddle(e,!0,r),this.$_setImgCenter(e,!1,r),this.$_setImgBounds(e,0,2,0,0,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0),i.style.marginLeft=isNaN(o)?"":o+"px"},e.prototype.$_layoutRightEdge=function(t,e,i,o,r){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!0,r),this.$_setImgMiddle(e,!0,r),this.$_setImgCenter(e,!1,r),this.$_setImgBounds(e,0,0,0,2,r),this.$_setSpanVis(!0),this.$_setSpanCenter(!1),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(o)},e.prototype.$_layoutTopEdge=function(t,e,i,o,r,n,s,a){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted||(t.insertBefore(this._br,i),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!1,a),this.$_setImgBounds(e,2,(o-n)/2,0,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,s*((r-s)/r)),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutBottomEdge=function(t,e,i,o,r,n,s,a){this._reversed||(t.insertBefore(i,e),this._reversed=!0),this._splitted||(t.insertBefore(this._br,e),this._splitted=!0),this.$_setImgFixed(e,!0,a),this.$_setImgMiddle(e,!1,a),this.$_setImgCenter(e,!0,a),this.$_setImgBounds(e,0,(o-n)/2,2,0,a),this.$_setSpanVis(!0),this.$_setSpanCenter(!0,(r-s)/r*-s),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e.prototype.$_layoutCenter=function(t,e,i,o){this._reversed&&(t.insertBefore(e,i),this._reversed=!1),this._splitted&&(t.removeChild(this._br),this._splitted=!1),this.$_setImgFixed(e,!1,o),this.$_setImgMiddle(e,!0,o),this.$_setImgCenter(e,!0,o),this.$_clearImgBounds(e,o),this.$_setSpanVis(!1),this.$_setSpanCenter(!0),this.$_setSpanPadLeft(0),this.$_setSpanPadRight(0)},e}(ir),lr=function(t){function e(){var e=t.call(this)||this;return e._iconWidth=NaN,e._iconHeight=NaN,e._iconLocation=O.LEFT,e._spaceKey=!1,e._imgSrc="",e._itemClickable=!0,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"iconMap",{get:function(){return this._iconMap},set:function(t){t!==this._iconMap&&(this._iconMap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!==this._iconCallback&&(this._iconCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconUrl",{get:function(){return this._iconUrl},set:function(t){this._iconUrl=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconField",{get:function(){return this._iconField},set:function(t){t!=this._iconField&&(this._iconField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconLocation",{get:function(){return this._iconLocation},set:function(t){t!=this._iconLocation&&(this._oldLocation=this._iconLocation,this._iconLocation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconWidth",{get:function(){return this._iconWidth},set:function(t){t!=this._iconWidth&&(this._iconWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconHeight",{get:function(){return this._iconHeight},set:function(t){t!=this._iconHeight&&(this._iconHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME+" rg-icon-"+this.$_getStyleName().toLowerCase()},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=nt(t),i=this._img=e.createElement("img");t.appendChild(i);var o=this._span=e.createElement("span");t.appendChild(o),this._br=e.createElement("br")},e.prototype._reset=function(){t.prototype._reset.call(this),this._imgSrc=this._splitted=this._reversed=void 0},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._img,s=this._span;if(this.$_setImgWidth(n,this._iconWidth,!1),this.$_setImgHeight(n,this._iconHeight,!1),this.$_setImgSrc(this.$_getIconUrl(t,e)),this.$_setSpanText(this._makeText(t,e,i)),this._oldLocation!=this._iconLocation){switch(this._iconLocation){case O.LEFT:this.$_layoutLeft(this._dom,n,s,!1);break;case O.RIGHT:this.$_layoutRight(this._dom,n,s,!1);break;case O.TOP:this.$_layoutTop(this._dom,n,s,!1);break;case O.BOTTOM:this.$_layoutBottom(this._dom,n,s,!1);break;case O.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,n,s,this._iconWidth,!1);break;case O.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,n,s,this._iconWidth,!1);break;case O.TOP_EDGE:this.$_layoutTopEdge(this._dom,n,s,o,r,this._iconWidth,this._iconHeight,!1);break;case O.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,n,s,o,r,this._iconWidth,this._iconHeight,!1);break;case O.CENTER:this.$_layoutCenter(this._dom,n,s,!1);break;default:this.$_layoutLeft(this._dom,n,s,!1)}this._oldLocation=this._iconLocation}this._iconLocation==O.TOP_EDGE||this._iconLocation==O.BOTTOM_EDGE?this._setHeight(r):this._clearHeight()},e.prototype.canClick=function(t){return t.target===this._img},e.prototype.canClickSpaceKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},e.prototype._doClick=function(t,e,i){var o={};if(e.target===this._img||"keydown"===e.type)return o.type=this.type,o.value=t.value,o},e.prototype.$_getIconUrl=function(t,e){var i=void 0,o=this._iconCallback;return o&&(i=o.call(this,t.handler,e)),void 0===i&&this._iconMap&&(i=this._iconMap[e.value]),void 0===i&&this._iconField&&(i=this._getValue(t,e,this._iconField)),void 0===i&&(i=this._iconUrl),i||""},e.prototype.$_setImgSrc=function(t){t!=this._imgSrc&&(this._imgSrc=t,t?this._img.src=t:this._img.removeAttribute("src"))},e.prototype.$_getStyleName=function(){return String(this._iconLocation)||String(O.LEFT)},e.prototype.preventDefaultClick=function(t){t.target===this._img&&(t.preventDefault(),t.stopImmediatePropagation())},e.TYPE="icon",e.STYLE="rg-icon-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(ar),hr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._doInitContent=function(e){t.prototype._doInitContent.call(this,e),e.style.setProperty("display","flex","important")},e.prototype.$_layoutLeft=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.LEFT)},e.prototype.$_layoutRight=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.RIGHT)},e.prototype.$_layoutTop=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.TOP)},e.prototype.$_layoutBottom=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.BOTTOM)},e.prototype.$_layoutLeftEdge=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.LEFT_EDGE)},e.prototype.$_layoutRightEdge=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.RIGHT_EDGE)},e.prototype.$_layoutTopEdge=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.TOP_EDGE)},e.prototype.$_layoutBottomEdge=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.BOTTOM_EDGE)},e.prototype.$_layoutCenter=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.CENTER)},e}(lr),ur=function(t){function e(){var i=t.call(this,16,16)||this;return i._strictValue=!1,i._threeStates=!1,i._checkLocation=O.CENTER,i._useImages=!1,i._checkedStyle=e.CHECKED_STYLE,i._uncheckedStyle=e.UNCHECKED_STYLE,i._intermediateStyle=e.INTERMEDIATE_STYLE,i._editable=!0,i._spaceKey=!0,i._showInnerFocus=!1,i._oldUsed=!1,i._useChanged=!1,i._values={},i.refreshFocusChanged=!0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"getCheckedCallback",{get:function(){return this._getCheckedCallback},set:function(t){t!==this._getCheckedCallback&&(this._getCheckedCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"setCheckedCallback",{get:function(){return this._setCheckedCallback},set:function(t){t!==this._setCheckedCallback&&(this._setCheckedCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trueValues",{get:function(){return this._trueValues},set:function(t){t!==this._trueValues&&(this._trueValues=t,this.$_resetValues(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"falseValues",{get:function(){return this._falseValues},set:function(t){t!==this._falseValues&&(this._falseValues=t,this.$_resetValues(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strictValue",{get:function(){return this._strictValue},set:function(t){t!=this._strictValue&&(this._strictValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"threeStates",{get:function(){return this._threeStates},set:function(t){t!=this._threeStates&&(this._threeStates=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useImages",{get:function(){return this._useImages},set:function(t){t!=this._useImages&&(this._useImages=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(t){this._editable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){this._showInnerFocus=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype.canEdit=function(){return this._editable},e.prototype.canShowInnerFocus=function(){return this._showInnerFocus&&this._editable},e.prototype._doInitContent=function(t){var e=nt(t),i=this._check=e.createElement("input");i.type="checkbox",i.tabIndex=-1,i.style.display="inline-block";var o=this._span=e.createElement("span");t.appendChild(i),t.appendChild(o);var r=this._image=e.createElement("span");r.className=this._checkedStyle,r.style.display="inline-block",this._br=e.createElement("br")},e.prototype._reset=function(){t.prototype._reset.call(this),this._splitted=this._reversed=void 0,this._oldUsed=!1},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._check,s=this._image,a=this._span,l=this._dom,h=n;this._imgWidth=t.container.measureCheckWidth(),this._imgHeight=t.container.measureCheckHeight();var u=this.$_getChecked(t,e.value,e.index,this._getCheckedCallback);if(n.checked=u,n.indeterminate=this._threeStates&&void 0===u,this._useChanged=this._useImages!==this._oldUsed,this._useChanged&&(this._oldUsed?(l.removeChild(s),this._check.style.display="inline-block"):(l.insertBefore(s,this._check),this._check.style.display="none")),this._oldUsed=this._useImages,this._useImages&&(s.className=u?this._checkedStyle:void 0===u&&this.threeStates?this._intermediateStyle:this._uncheckedStyle,h=s),i.merged&&this.editable&&!lt.included(this.checkLocation,O.TOP_EDGE,O.BOTTOM_EDGE)&&i.focused||l.style.removeProperty("top"),this.$_setSpanText(this._makeText(t,e,i)),this._oldLocation!=this._checkLocation){switch(this._checkLocation){case O.LEFT:this.$_layoutLeft(l,h,a);break;case O.RIGHT:this.$_layoutRight(l,h,a);break;case O.TOP:this.$_layoutTop(l,h,a);break;case O.BOTTOM:this.$_layoutBottom(l,h,a);break;case O.LEFT_EDGE:this.$_layoutLeftEdge(l,h,a);break;case O.RIGHT_EDGE:this.$_layoutRightEdge(l,h,a);break;case O.TOP_EDGE:this.$_layoutTopEdge(l,h,a,o,r);break;case O.BOTTOM_EDGE:this.$_layoutBottomEdge(l,h,a,o,r);break;case O.CENTER:this.$_layoutCenter(l,h,a);break;default:this.$_layoutLeft(l,h,a)}this._oldLocation=this._checkLocation}this._checkLocation==O.TOP_EDGE||this._checkLocation==O.BOTTOM_EDGE?this._setHeight(r):this._clearHeight()},e.prototype.canEditClickAt=function(t){return this.preventDefaultEditClick(t),t.target===this._check||t.target===this._image},e.prototype.preventDefaultEditClick=function(t){t.target===this._check&&t.preventDefault()},e.prototype._doEditClick=function(t,e,i){return e.target===this._check||e.target===this._image?(this.$_edit(t,i),!0):void 0},e.prototype.canEditKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},e.prototype._doEditKey=function(t,e,i){return this.$_edit(t,i),!0},e.prototype.moveClickElement=function(t,e){var i=this._dom;this.editable&&!lt.included(O.TOP_EDGE,O.BOTTOM_EDGE)&&(i.style.top=t+"px")},e.prototype.$_resetValues=function(){var t;if(this._values={},this._falseValues)if(t=this._falseValues.split(",")){var e=void 0;this._falseValue=(e=t.length)>0?t[0]:void 0;for(var i=0;i<e;i++)this._values[t[i]]=!1}else this._falseValue=void 0;if(this._trueValues)if(t=this._trueValues.split(",")){e=void 0;this._trueValue=(e=t.length)>0?t[0]:void 0;for(i=0;i<e;i++)this._values[t[i]]=!0}else this._trueValue=void 0},e.prototype.$_getChecked=function(t,e,i,o){if(o)return o(t.handler,i.itemIndex,i.dataColumn,e);if("boolean"==typeof e)return e;var r=String(e);return this._values.hasOwnProperty(r)?this._values[r]:this._threeStates&&(this._strictValue||""==e||null==e)?void 0:Boolean(e)},e.prototype.$_edit=function(t,e){var i,o=t.grid,r=(this._check,o.body.getCell(t,!1)),n=r.value,s=(r.dataColumn.dataIndex,n);i=!(s=this.$_getChecked(o,s,t,this._getCheckedCallback))&&(void 0===s||(!this._threeStates||void 0));var a=this._setCheckedCallback;a?i=a(o.handler,t.itemIndex,t.dataColumn,n,i):void 0!==this._trueValue&&i?i=this._trueValue:void 0!==this._falseValue&&!1===i&&(i=this._falseValue),e.value=i},e.prototype.$_layoutLeft=function(e,i,o){var r=this._useImages,n=r?this._image:i;t.prototype.$_layoutLeft.call(this,e,n,o,r)},e.prototype.$_layoutRight=function(e,i,o){var r=this._useImages,n=r?this._image:i;t.prototype.$_layoutRight.call(this,e,n,o,r)},e.prototype.$_layoutTop=function(e,i,o){var r=this._useImages,n=r?this._image:i;t.prototype.$_layoutTop.call(this,e,n,o,r)},e.prototype.$_layoutBottom=function(e,i,o){var r=this._useImages,n=r?this._image:i;t.prototype.$_layoutBottom.call(this,e,n,o,r)},e.prototype.$_layoutLeftEdge=function(e,i,o){var r=this._useImages,n=r?this._image:i;t.prototype.$_layoutLeftEdge.call(this,e,n,o,this._imgWidth,r)},e.prototype.$_layoutRightEdge=function(e,i,o){var r=this._useImages,n=r?this._image:i;t.prototype.$_layoutRightEdge.call(this,e,n,o,this._imgWidth,r)},e.prototype.$_layoutTopEdge=function(e,i,o,r,n){var s=this._useImages,a=s?this._image:i;t.prototype.$_layoutTopEdge.call(this,e,a,o,r,n,this._imgWidth,this._imgHeight,s)},e.prototype.$_layoutBottomEdge=function(e,i,o,r,n){var s=this._useImages,a=s?this._image:i;t.prototype.$_layoutBottomEdge.call(this,e,a,o,r,n,this._imgWidth,this._imgHeight,s)},e.prototype.$_layoutCenter=function(e,i,o){var r=this._useImages,n=r?this._image:i;t.prototype.$_layoutCenter.call(this,e,n,o,r)},e.prototype.$_setImageMiddle=function(t,e,i){(e!=this._imgMiddle||i)&&(this._imgMiddle=e)},e.prototype.$_getStyleName=function(){return String(this._checkLocation)||String(O.LEFT)},e.TYPE="check",e.STYLE="rg-check-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.CHECKED_STYLE="rg-check-renderer-checked",e.UNCHECKED_STYLE="rg-check-renderer-unchecked",e.INTERMEDIATE_STYLE="rg-check-renderer-intermediate",e}(ar),cr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._doInitContent=function(e){t.prototype._doInitContent.call(this,e),e.style.setProperty("display","flex","important")},e.prototype.$_layoutLeft=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.LEFT)},e.prototype.$_layoutRight=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.RIGHT)},e.prototype.$_layoutTop=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.TOP)},e.prototype.$_layoutBottom=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.BOTTOM)},e.prototype.$_layoutLeftEdge=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.LEFT_EDGE)},e.prototype.$_layoutRightEdge=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.RIGHT_EDGE)},e.prototype.$_layoutTopEdge=function(t,e,i,o,r){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.TOP_EDGE)},e.prototype.$_layoutBottomEdge=function(t,e,i,o,r){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.BOTTOM_EDGE)},e.prototype.$_layoutCenter=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.CENTER)},e}(ur),dr=function(t){function e(){var i=t.call(this)||this;return i._buttonStyle=e.BUTTON_STYLE,i._hideWhenEmpty=!0,i._spaceKey=!0,i._itemClickable=!0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"buttonStyle",{get:function(){return this._buttonStyle},set:function(t){t!=this._buttonStyle&&(this._buttonStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideWhenEmpty",{get:function(){return this._hideWhenEmpty},set:function(t){t!=this._hideWhenEmpty&&(this._hideWhenEmpty=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._button=nt(t).createElement("button");e.type="button",e.tabIndex=-1,e.style.display="inline-block",t.appendChild(e)},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._button;n[this._textProp]=this._makeText(t,e,i),n.setAttribute("class",this._buttonStyle),this._hideWhenEmpty&&this._isEmpty(e.value)?n.style.visibility="hidden":n.style.visibility="visible"},e.prototype.canClick=function(t){return t.target===this._button},e.prototype.canClickSpaceKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},e.prototype._doClick=function(t,e,i){if(e.target===this._button||"keydown"===e.type)return{type:this.type,value:t.value}},e.prototype._doItemClick=function(){this._button.click()},e.TYPE="button",e.STYLE="rg-button-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BUTTON_STYLE="rg-button-renderer-button",e}(ir),pr=function(t){function e(){var e=t.call(this)||this;return e._spaceKey=!0,e._itemClickable=!0,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"baseUrl",{get:function(){return this._baseUrl},set:function(t){t!=this._baseUrl&&(this._baseUrl=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkField",{get:function(){return this._linkField},set:function(t){t!=this._linkField&&(this._linkField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"urlCallback",{get:function(){return this._urlCallback},set:function(t){t!==this._urlCallback&&(this._urlCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleField",{get:function(){return this._titleField},set:function(t){t!=this._titleField&&(this._titleField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleCallback",{get:function(){return this._titleCallback},set:function(t){t!==this._titleCallback&&(this._titleCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spaceKey",{get:function(){return this._spaceKey},set:function(t){this._spaceKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._anchor=nt(t).createElement("a");e.tabIndex=-1,t.appendChild(e)},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._anchor;n[this._textProp]=this._makeText(t,e,i),this._url="","#"===this._baseUrl?(n.removeAttribute("target"),n.href="#"):(this._url=this.$_getUrl(t,e),this._url&&(n.target="_blank",n.href=this._url));var s=this.$_getTitle(t,e);s?n.title=s:delete n.title},e.prototype.preventDefaultClick=function(t){t.target===this._anchor&&(t.preventDefault(),t.stopImmediatePropagation())},e.prototype.canClick=function(t){return t.target===this._anchor},e.prototype._doClick=function(t,e,i){if(e.target===this._anchor||"keydown"===e.type)return{type:this.type,url:this._url,value:t.value}},e.prototype.canClickSpaceKey=function(t){return this.spaceKey&&32==t.keyCode&&!t.ctrlKey&&!t.shiftKey&&!t.altKey},e.prototype._doItemClick=function(){this._anchor.click()},e.prototype.$_getUrl=function(t,e){var i="",o=this._urlCallback;return o&&(i=o.call(this,t.handler,e)),i||(i=this._linkField?this._getValue(t,e,this._linkField):e.value,this._baseUrl&&(i=this._baseUrl+i)),i||""},e.prototype.$_getTitle=function(t,e){var i="",o=this._titleCallback;return o&&(i=o.call(this,t.handler,e)),!i&&this._titleField&&(i=this._getValue(t,e,this._titleField)),i||""},e.TYPE="link",e.STYLE="rg-link-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(ir),_r=function(t){function e(){var i=t.call(this)||this;return i._shapeStyle=e.SHAPE_STYLE,i._shape=Jo.STAR,i._shapeWidth=16,i._shapeHeight=16,i._shapeLocation=O.LEFT,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"shapeStyle",{get:function(){return this._shapeStyle},set:function(t){t!=this._shapeStyle&&(this._shapeStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shape",{get:function(){return this._shape},set:function(t){t!=this._shape&&(this._shape=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapeMap",{get:function(){return this._shapeMap},set:function(t){t!==this._shapeMap&&(this._shapeMap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapeCallback",{get:function(){return this._shapeCallback},set:function(t){t!=this._shapeCallback&&(this._shapeCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapeWidth",{get:function(){return this._shapeWidth},set:function(t){this._shapeWidth!==t&&(this._shapeWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapeHeight",{get:function(){return this._shapeHeight},set:function(t){this._shapeHeight!==t&&(this._shapeHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shapeLocation",{get:function(){return this._shapeLocation},set:function(t){t!=this._shapeLocation&&(this._oldLocation=this._shapeLocation,this._shapeLocation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=nt(t),i=(this._svg=qo.createSVG(t)).style,o=isNaN(this._shapeWidth)||this._shapeWidth<=0?16:this._shapeWidth,r=isNaN(this._shapeHeight)||this._shapeHeight<=0?16:this._shapeHeight;i.display="inline-block",i.width=o+"px",i.height=r+"px";var n=this._span=e.createElement("span");t.appendChild(n),this._br=e.createElement("br")},e.prototype._reset=function(){t.prototype._reset.call(this),this._splitted=this._reversed=void 0},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._svg,s=this._span;if(this._runShape=this.$_getShape(t,e),n.setAttribute("class",this._shapeStyle),qo.renderSVG(t,n,this.$_render.bind(this)),this.$_setSpanText(this._makeText(t,e,i)),this._oldLocation!=this._shapeLocation){switch(this._shapeLocation){case O.LEFT:this.$_layoutLeft(this._dom,n,s,!1);break;case O.RIGHT:this.$_layoutRight(this._dom,n,s,!1);break;case O.TOP:this.$_layoutTop(this._dom,n,s,!1);break;case O.BOTTOM:this.$_layoutBottom(this._dom,n,s,!1);break;case O.LEFT_EDGE:this.$_layoutLeftEdge(this._dom,n,s,this._shapeWidth,!1);break;case O.RIGHT_EDGE:this.$_layoutRightEdge(this._dom,n,s,this._shapeWidth,!1);break;case O.TOP_EDGE:this.$_layoutTopEdge(this._dom,n,s,o,r,this._shapeWidth,this._shapeHeight,!1);break;case O.BOTTOM_EDGE:this.$_layoutBottomEdge(this._dom,n,s,o,r,this._shapeWidth,this._shapeHeight,!1);break;case O.CENTER:this.$_layoutCenter(this._dom,n,s,!1);break;default:this.$_layoutLeft(this._dom,n,s,!1)}this._oldLocation=this._shapeLocation}this._shapeLocation==O.TOP_EDGE||this._shapeLocation==O.BOTTOM_EDGE?this._setHeight(r):this._clearHeight()},e.prototype.$_getShape=function(t,e){var i=void 0,o=this._shapeCallback;return o&&(i=o.call(this,t.handler,e)),null==i&&this._shapeMap&&(i=this._shapeMap[e.value]),null==i&&(i=this._shape),i},e.prototype.$_getDrawing=function(t){var e;return t&&("ellipse"==(t=t.toLowerCase())?e=this._ellipse?this._ellipse:this._ellipse=new Qo:(e=this._polygon?this._polygon:this._polygon=new Jo(t),this._polygon.shape=t)),e},e.prototype.$_render=function(t,e,i,o){if(this._runShape){var r=this.$_getDrawing(this._runShape);r&&r.draw(e,i,o)}},e.TYPE="shape",e.STYLE="rg-shape-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.SHAPE_STYLE="rg-shape-renderer-shape",e}(ar),fr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._doInitContent=function(e){e.style.setProperty("display","flex","important"),t.prototype._doInitContent.call(this,e)},e.prototype.$_layoutLeft=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.LEFT)},e.prototype.$_layoutRight=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.RIGHT)},e.prototype.$_layoutTop=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.TOP)},e.prototype.$_layoutBottom=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.BOTTOM)},e.prototype.$_layoutLeftEdge=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.LEFT_EDGE)},e.prototype.$_layoutRightEdge=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.RIGHT_EDGE)},e.prototype.$_layoutTopEdge=function(t,e,i,o,r){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.TOP_EDGE)},e.prototype.$_layoutBottomEdge=function(t,e,i,o,r){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.BOTTOM_EDGE)},e.prototype.$_layoutCenter=function(t,e,i){tr.layoutFlex(t,e,i,this._itemGap,this._verticalEdgePad,O.CENTER)},e}(_r),gr=function(t){function e(){var i=t.call(this)||this;return i._barStyle=e.BAR_STYLE,i._inactiveStyle=e.INACTIVE_STYLE,i._barCount=10,i._minimum=NaN,i._maximum=NaN,i._startRate=50,i._endRate=100,i._absoluteValue=!1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inactiveStyle",{get:function(){return this._inactiveStyle},set:function(t){t!=this._inactiveStyle&&(this._inactiveStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barCount",{get:function(){return this._barCount},set:function(t){(t=Math.max(2,t))!=this._barCount&&(this._barCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minimum",{get:function(){return this._minimum},set:function(t){t!=this._minimum&&(this._minimum=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maximum",{get:function(){return this._maximum},set:function(t){t!=this._maximum&&(this._maximum=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startRate",{get:function(){return this._startRate},set:function(t){!isNaN(t)&&t>=0&&t<=100&&t!==this._startRate&&(this._startRate=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endRate",{get:function(){return this._endRate},set:function(t){!isNaN(t)&&t>=0&&t<=100&&t!==this._endRate&&(this._endRate=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"absoluteValue",{get:function(){return this._absoluteValue},set:function(t){t!=this._absoluteValue&&(this._absoluteValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._div=nt(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=qo.createSVG(e)).style;i.position="absolute",i.left="0px",i.width="100%",i.top=(100-Math.max(this._startRate,this._endRate))/2+"%",i.height=Math.max(this._startRate,this._endRate)+"%"},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._svg;this._value=parseFloat(e.value),n.setAttribute("class",this._barStyle),qo.renderSVG2(t,n,this.$_render.bind(this))},e.prototype.$_render=function(t,e){var i=this.absoluteValue?Math.abs(this._value):this._value;isNaN(this._minimum)||isNaN(this._maximum)||(i=this._barCount*(i-this._minimum)/(this._maximum-this._minimum));for(var o=100/Math.max(this._startRate,this._endRate),r=(100-2*(this._barCount+1))/this._barCount,n=0,s=this._startRate*o,a=(this._endRate-this._startRate)/(this._barCount-1),l=0;l<this._barCount;l++){var h=l<i?null:this._inactiveStyle;e.sbounds(h,n+"%",100-s+"%",r+"%",s+"%"),n+=r+2,s+=a}},e.TYPE="signalbar",e.STYLE="rg-signalbar-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BAR_STYLE="rg-signalbar-renderer-bar",e.INACTIVE_STYLE="rg-signalbar-renderer-inactive",e}(ir),yr=function(t){function e(){var i=t.call(this)||this;return i._barStyle=e.BAR_STYLE,i._barcode=new Go,i.$_render=function(t,e,i,o){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new N(0,0,i,100)))}.bind(i),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._div=nt(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=qo.createSVG(e)).style;i.position="absolute",i.left="0px",i.top="0px",i.width="100%",i.height="100%"},e.prototype._doRenderCell=function(t,e,i,o,r){this._div;var n=this._svg;this._value=String(e.value),this._value&&(this._value=this._value.toUpperCase()),n.setAttribute("class",this._barStyle),qo.renderSVG(t,n,this.$_render)},e.TYPE="code39",e.STYLE="rg-code39-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BAR_STYLE="rg-code39-renderer-bar",e}(ir),mr=function(t){function e(){var i=t.call(this)||this;return i._barStyle=e.BAR_STYLE,i._barcode=new Ho,i.$_render=function(t,e,i,o){this._value&&(this._barcode.value=this._value,this._barcode.renders(e,new N(0,0,i,100)))}.bind(i),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"barStyle",{get:function(){return this._barStyle},set:function(t){t!=this._barStyle&&(this._barStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=this._div=nt(t).createElement("div");e.style.position="relative",e.style.height="100%",t.appendChild(e);var i=(this._svg=qo.createSVG(e)).style;i.position="absolute",i.left="0px",i.top="0px",i.width="100%",i.height="100%"},e.prototype._doRenderCell=function(t,e,i,o,r){this._div;var n=this._svg;this._value=String(e.value),n.setAttribute("class",this._barStyle),qo.renderSVG(t,n,this.$_render)},e.TYPE="code128",e.STYLE="rg-code128-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e.BAR_STYLE="rg-code128-renderer-bar",e}(ir),br=/\$\{[^{}]*\}/g,vr=function(){function t(){this._template="",this._tokens=[]}return Object.defineProperty(t.prototype,"template",{get:function(){return this._template},set:function(t){this._template=t,this.$_parse(t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pattern",{set:function(t){this._pattern=t},enumerable:!0,configurable:!0}),t.prototype.realize=function(t,e,i,o){for(var r="",n=0,s=this._tokens;n<s.length;n++){var a=s[n];if("string"==typeof a)r+=a||"";else if(1==a.type)r+=e.value||"";else if(2==a.type)r+=e.item.getData(t.dataSource.getFieldIndex(a.field))||"";else if(4===a.type){r+=(e instanceof Mo?e.getDisplayText(t,i):e.value)||""}else if(o){r+=o.call(this,t.handler,e,a.field)||""}else r+=a.field}return r},t.prototype.realizeHeader=function(t,e,i){for(var o="",r=0,n=this._tokens;r<n.length;r++){var s=n[r];if("string"==typeof s)o+=s;else if(1==s.type)o+=t.displayText;else if(e){o+=(a=e.call(this,i.handler,t,s.field))||""}else{var a;o+=null!=(a=t.getValue(s.field))?a:s.field}}return o},t.prototype.realizeSummary=function(t,e,i,o){for(var r="",n=0,s=this._tokens;n<s.length;n++){var a=s[n];if("string"==typeof a)r+=a;else if(1==a.type)r+=e.getDisplayText(i);else if(o){r+=(l=o.call(this,t.column.grid.handler,t,a.field))||""}else{var l;r+=null!=(l=t.getValue(a.field))?l:a.field}}return r},t.prototype.realizeGroupSummary=function(t,e,i,o){for(var r="",n=0,s=this._tokens;n<s.length;n++){var a=s[n];if("string"==typeof a)r+=a;else if(1==a.type)r+=e.getDisplayText(i);else if(o){r+=(l=o.call(this,t.column.grid.handler,t,a.field))||""}else{var l;r+=null!=(l=t.getValue(a.field))?l:a.field}}return r},t.prototype.realizeForm=function(t,e,i){for(var o="",r=0,n=this._tokens;r<n.length;r++){var s=n[r];if("string"==typeof s)o+=s;else if(1==s.type);else if(2==s.type);else if(i)i.call(this,t.getHandler(),e,s.field);else o+=s.field}return o},t.prototype.$_parse=function(t){var e=this._tokens=[];if(t){for(var i,o=t.length,r=this._pattern||br,n=0;i=r.exec(t);){var s=i[0],a=i.index;a>n&&(e.push(t.substring(n,a)),n=a);var l=s.substring(2,s.length-1),h={type:"value"===l?1:"text"===l?4:0==l.indexOf("value:")?2:3,field:l};2==h.type&&(h.field=h.field.substring(6)),e.push(h),n+=s.length}n<o&&e.push(t.substring(n,o))}},t}(),wr=function(t){function e(){var e=t.call(this)||this;return e._output=void 0,e._inputFocusable=!1,e._html="",e._parser=new vr,e.template="<span>${value}</span>",e._itemClickable=!0,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"template",{get:function(){return this._parser.template},set:function(t){t!=this._parser.template&&(this._parser.template=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pattern",{set:function(t){t!=this._pattern&&(t instanceof RegExp?this._pattern=t:this._pattern=t?new RegExp(t):void 0,this._parser.pattern=this._pattern,this._parser.template=this.template)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},set:function(t){this._output=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callback",{get:function(){return this._callback},set:function(t){t!==this._callback&&(this._callback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)},enumerable:!0,configurable:!0}),e.prototype.clearAndAssignFrom=function(e){this.valueCallback=void 0,this.callback=void 0,this.pattern=void 0,this.template="",t.prototype.assignFrom.call(this,e)},Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),e.prototype._doClearContent=function(e){t.prototype._doClearContent.call(this,e),this._html=null},e.prototype.canClick=function(t){var e=rt(this._dom),i=t.target;return!(i instanceof e.HTMLTableCellElement&&i.className.indexOf("rg-")>=0||this._dom===i)},e.prototype.click=function(t,e,i){return this._doClick(t,e,i||e.target)},e.prototype._doRenderCell=function(t,e,i,o,r){var n=this._callback;n?this.$_setHtml(n.call(this,t.handler,e,o,r)):this.$_setHtml(this._parser.realize(t,e,i,this._valueCallback))},e.prototype._doClick=function(t,e,i){return{type:this.type,target:e.target,value:t.value}},e.prototype.$_setHtml=function(t){t!=this._html&&(this._html=t,this._dom.innerHTML=t)},e.TYPE="html",e}(ir),Cr=function(t){function e(){var e=t.call(this)||this;return e.$_userComparer=function(t,e,i){if(this._labelComparer)return this._labelComparer(t,e._rowId,i.rowId)},e}return o(e,t),e.prototype.run=function(t,e,i,o,n,s,a){this._rs=t.provider;var l=this._ds=this._rs.dataSource;this._parent=t,this._field=e;var h=this._ds.getField(e);if(this._labelComparer=this._ds._comparers[e]||this._rs._labelComparer[e],this._labelComparer)this._comparer=this.$_userComparer;else switch(h.dataType){case r.NUMBER:case r.DATETIME:this._comparer=l.compareNumbers;break;case r.BOOLEAN:this._comparer=l.compareBools;break;case r.OBJECT:this._comparer=l.compareObjects;break;default:this._comparer=o?l.compareTexts.bind(l):l.compareValues.bind(l)}this.$_sort(n,s,i,a)},e.prototype.$_sort=function(t,e,i,o){do{var r=this._parent,s=this._field,a=t,l=e,h=Math.floor((t+e)/2),u=r.getItem(h).dataRow,c=r.getItem(h).row;do{if(i==n.ASCENDING){for(;a<=l;){if(0==(d=this._comparer(this._field,c,r.getItem(a).row))&&o&&(d=u-r.getItem(a).dataRow),d<=0)break;a++}for(;a<=l;){if(0==(d=this._comparer(s,c,r.getItem(l).row))&&o&&(d=u-r.getItem(l).dataRow),d>=0)break;l--}}else{for(;a<=l;){if(0==(d=this._comparer(s,c,r.getItem(a).row))&&o&&(d=u-r.getItem(a).dataRow),d>=0)break;a++}for(;a<=l;){var d;if(0==(d=this._comparer(s,c,r.getItem(l).row))&&o&&(d=u-r.getItem(l).dataRow),d<=0)break;l--}}a<=l&&(a!=l&&r._exchangeItems(a,l),a++,l--)}while(a<=l);t<l&&this.$_sort(t,l,i,o),t=a}while(t<e)},e}(ft),xr=function(t){function e(){return t.call(this)||this}return o(e,t),e}(So),Ir=function(t){function e(e,i,o){var r=t.call(this)||this;return r._runtime=new xr,r._owner=e,r._exprNode=ee.Default.parse(i,["value","values"]),r._runtime=new xr,r._callback=o,r}return o(e,t),e.clearCheckables=function(t){for(var e=t.itemCount;e--;)t.getItem(e)._setCheckable(!0)},e.prototype.connect=function(t){this._runtime.setDataSource(t)},e.prototype.disconnect=function(){},e.prototype.clearRows=function(){e.clearCheckables(this._owner)},e.prototype.setRows=function(){for(var t=this._owner._rows,e=t.length;e--;){var i=t[e];this.$_setCheckable(i)}},e.prototype.insertRow=function(t){var e=this._owner.getItemOfRow(t,!0);this.$_setCheckable(e)},e.prototype.insertRows=function(t,e){for(var i=0;i<e;i++){var o=this._owner.getItemOfRow(t+i,!0);o instanceof eo&&this.$_setCheckable(o)}},e.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t,!0);this.$_setCheckable(e)},e.prototype.updateRows=function(t,e){for(var i=0;i<e;i++){var o=this._owner.getItemOfRow(t+i,!0);o instanceof eo&&this.$_setCheckable(o)}},e.prototype.updateRowList=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e],r=this._owner.getItemOfRow(o,!0);r instanceof eo&&this.$_setCheckable(r)}},e.prototype.changeStates=function(t){if(t)for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e],!0);i instanceof eo&&this.$_setCheckable(i)}},e.prototype.$_setCheckable=function(t){var e,i=this._callback;i?e=i.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),e=this._exprNode.evaluate(this._runtime)),t._setCheckable(e)},e}(Te),Er=function(t){function e(e){var i=t.call(this,e)||this;return i._sortMode=l.AUTO,i._filterMode=h.AUTO,i._filterOr=!1,i._checkableExpression=null,i._rows=[],i._filteredItems=[],i._pageItems=[],i._sortedItems=[],i._pubItems=i._rows,i._items=i._rows,i._distinctRows=[],i._rowCount=0,i._fixedCount=0,i._fixedSorting=!1,i._maxItemCount=0,i._itemCount=0,i._pubCount=0,i._filtered=!1,i._filtering=!1,i._filters=[],i._filterRuntime=new xo,i._filterLock=0,i._fixedFiltering=!1,i._sorted=!1,i._sortFields=[],i._sortDirections=[],i._sortCases=[],i._labelComparer={},i._sorter=null,i._defSorter=null,i._paging=!1,i._pagingSource=a.ROWS,i._pageSize=10,i._pageCount=-1,i._pageStartIndex=-1,i._currPage=0,i._pageStart=0,i._summaryMode=_.AGGREGATE,i._summaryMap=null,i._checkableTag=null,i._checkFieldIndex=-1,i}return o(e,t),e.prototype._doDispose=function(){function e(t){for(var e=0,i=t.length;e<i;e++)t[e]&&t[e].dispose();t.length=0}this.dataSource=null,e(this._rows),e(this._filteredItems),e(this._pageItems),e(this._sortedItems),e(this._pubItems),e(this._items),e(this._distinctRows),this._filterRuntime&&this._filterRuntime.dispose(),this._filterRuntime=null,this._sortFields.length=0,this._labelComparer=null,this._summaryMap=null,this._checkableTag=null,t.prototype._doDispose.call(this)},e.prototype.getCommandStates=function(t){return this._rows[t]._getExtents()},e.prototype.setCommandStates=function(t,e){this._rows[t]._setExtents(e)},Object.defineProperty(e.prototype,"isFilterOr",{get:function(){return this._filterOr},set:function(t){t!=this._filterOr&&(this._filterOr=t,this.$_buildItems(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFiltered",{get:function(){return this._filtered},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSorted",{get:function(){return this._sorted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPaging",{get:function(){return this._paging},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageStartIndex",{get:function(){return this._pageStart},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorter",{get:function(){return this._sorter||this._defSorter},set:function(t){this._sorter=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this.$_buildItems(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortMode",{get:function(){return this._sortMode},set:function(t){this._sortMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterMode",{get:function(){return this._filterMode},set:function(t){this._filterMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new Ir(this,t),this._dataSource&&this._checkableTag.connect(this._dataSource)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkableCallback",{set:function(t){this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new Ir(this,null,t),this._dataSource&&this._checkableTag.connect(this._dataSource))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}},enumerable:!0,configurable:!0}),e.prototype.getFieldDomain=function(t){for(var e=this._rows.length,i=[],o=void 0,r=0;r<e;r++){var n=this._dataSource.getValue(r,t);n!=o&&i.indexOf(n)<0&&i.push(n),o=n}return i},e.prototype.beginFilter=function(){this._filterLock++},e.prototype.endFilter=function(t,e,i){void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),this._filterLock>0&&(this._filterLock=Math.max(0,this._filterLock-1),0==this._filterLock&&t&&this.applyFilters(!0,e,i))},e.prototype.hasFilter=function(t){var e=this._filters[t];return e&&e.length>0},e.prototype.addFilter=function(t,e){var i=e&&e.criteria;if(t>=0){this._fireFilterAdded(t,i);var o=this._filters[t];if(o||(o=[],this._filters[t]=o),e.criteria||e.callback){var r=new wo(e);return o.push(r),this.applyFilters(),r}}},e.prototype.removeFilter=function(t,e){if(this._filtered&&this._filters[t]){this._fireFilterRemoved(t,e.model);var i=this._filters[t],o=i.indexOf(e);o>=0&&(i.splice(o,1),this.applyFilters())}},e.prototype.clearFilters=function(t){if(this._filtered&&this._filters[t]){this._fireFilterCleared(t);var e=this._filters[t];e.length>0&&(e.length=0,delete this._filters[t],this.applyFilters())}},e.prototype.clearAllFilters=function(){this._filtered&&(this._fireFilterAllCleared(),this._filters=[],this.applyFilters())},e.prototype.hasFilters=function(){for(var t=this._filters.length,e=0;e<t;e++){var i=this._filters[e];if(i&&i.length>0)return!0}return!1},e.prototype.applyFilters=function(t,e,i){if(void 0===t&&(t=!0),void 0===e&&(e=null),void 0===i&&(i=null),!(this._filterLock>0)){this.$_buildItems();try{t&&this._fireRefresh()}finally{this._fireFiltered(e,i)}}},e.prototype.orderBy=function(t,e,i,o){void 0===t&&(t=null),void 0===e&&(e=null),void 0===i&&(i=null),void 0===o&&(o=!0),this._fireSort(t,e,i),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var r=t?t.length:0,a=e?e.length:0,l=i?i.length:0,h=0;h<a;h++)e[h]=e[h]==n.ASCENDING||e[h]==n.DESCENDING?e[h]:n.ASCENDING;for(h=0;h<r;h++)this._sortFields.push(t[h]),a>h?this._sortDirections.push(e[h]):a>0?this._sortDirections.push(e[a-1]):this._sortDirections.push(n.ASCENDING),l>h?this._sortCases.push(i[h]):l>0?this._sortCases.push(i[l-1]):this._sortCases.push(s.SENSITIVE);this._sorted=this.$_checkSorted(),this.$_buildItems();try{o&&this._fireRefresh()}finally{this._fireSorted()}},e.prototype.getSortFields=function(){return this._sortFields.slice()},e.prototype.getSortDirections=function(){return this._sortDirections.slice()},e.prototype.getSortCases=function(){return this._sortCases.concat()},e.prototype.setPaging=function(t,e,i,o){void 0===e&&(e=10),void 0===i&&(i=-1),void 0===o&&(o=null),e=Math.max(e,1),i=Math.max(i,-1),t==this._paging&&e==this._pageSize&&i==this._pageCount&&o==this._pagingSource||(this._currPage=0,this._paging=t,this._pagingSource=o,this._pageSize=e,this._pageCount=i,this.$_buildItems(),this._fireRefresh())},Object.defineProperty(e.prototype,"page",{get:function(){return this._paging?this._currPage:-1},enumerable:!0,configurable:!0}),e.prototype.setPage=function(t,e){void 0===t&&(t=0),void 0===e&&(e=-1),this._paging&&(t=Math.max(0,Math.min(this.pageCount-1,t)),e=Math.max(-1,e),t==this._currPage&&e==this._pageStartIndex||(this._currPage=t,this._pageStartIndex=e,this.$_buildPage(),this._fireRefresh()))},Object.defineProperty(e.prototype,"pageCount",{get:function(){return this._paging?this._pageCount>=0?this._pageCount:Math.floor((this._dataSource.rowCount+this._pageSize-1)/this._pageSize):0},set:function(t){this._paging&&(t=Math.max(-1,t))!=this._pageCount&&(this._pageCount=t,this.$_buildPage(),this._fireRefresh())},enumerable:!0,configurable:!0}),e.prototype.getCheckedRows=function(t){for(var e=t?this._dataSource.rowCount:this.itemCount,i=[],o=0;o<e;o++){var r=t?this._rows[o]:this._pubItems[o];r.checked&&i.push(r.dataRow)}return i},e.prototype.resetCheckables=function(){for(var t=this._rows.length;t--;)this._rows[t]._setCheckable(!0);this._fireRefresh()},e.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():Ir.clearCheckables(this),this._fireRefresh()},e.prototype.setCheckFieldIndex=function(t){this._checkFieldIndex=t},e.prototype.getItemChecked=function(t,e){return this._checkFieldIndex>-1?this.dataSource.getField(this._checkFieldIndex).readBooleanValue(t.getData(this._checkFieldIndex)):e},e.prototype.setItemChecked=function(t,e){if(this._checkFieldIndex>-1){var i=this.dataSource.getField(this._checkFieldIndex),o=i.readBooleanValue(t.getData(this._checkFieldIndex));return!!o!=e&&(o=(i._boolParser||i._ownerBoolParser).toText(e),t.setData(this._checkFieldIndex,o)),!0}return!1},e.prototype.getJsonRows=function(){return this._pubItems.map((function(t){return t.getRowObject()}))},Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSource},set:function(t){t!==this._dataSource&&(this.$_clearRows(!0),this._dataSource&&(this._checkableTag&&this._checkableTag.disconnect(),this._dataSource.removeListener(this),this._dataSource.unregisterCommandListener(this)),this._dataSource=t,this._dataSource&&(this._checkableTag&&this._checkableTag.connect(this._dataSource),this.$_buildRows(),this._dataSource.addListener(this),this._dataSource.registerCommandListener(this)),this.disposing||(this.$_resetSummary(),this._fireReset()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCount",{get:function(){return this._pubCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._pubCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxItemCount",{get:function(){return this._maxItemCount},set:function(t){(t=Math.max(0,t))!=this._maxItemCount&&(this._maxItemCount=t,this._refreshItems())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorted",{get:function(){return this._sorted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return!this.sorted},enumerable:!0,configurable:!0}),e.prototype._hideDeletedChanged=function(){this.$_buildItems(),this._fireRefresh()},e.prototype.getItem=function(t){return t<0||t>=this._pubCount?null:this._pubItems[t]},e.prototype.getItems=function(t,e){return this._pubItems.slice(t,t+e)},e.prototype.getIndexOfRow=function(t){if(t>=0&&t<this._rows.length){var e=this._rows[t];return e&&this._pubItems.indexOf(e)>=0?e.index:-1}return-1},e.prototype.getItemOfRow=function(t,e){if(t>=0&&t<this._rows.length){var i=this._rows[t];return i.index>=0||e?i:null}return null},e.prototype._refreshItems=function(){var t={};this.$_saveExtents(t),this.$_clearRows(!1),this.$_buildRows(t),this._fireRefresh()},e.prototype.setFixed=function(t,e,i){(t=Math.max(0,t))==this._fixedCount&&e==this._fixedSorting&&i==this._filtering||(this._fixedCount=t,this._fixedSorting=e,this._fixedFiltering=i,this.$_buildItems(),this._fireRefresh())},e.prototype.exchange=function(t,e){if(t!=e&&!this._sorted&&!this._filtered){if(t<0||t>=this._rows.length)throw new Error("index1 is out of bounds: "+t);if(e<0||e>=this._rows.length)throw new Error("index2 is out of bounds: "+t);var i=this._rows[t];this._rows[t]=this._rows[e],this._rows[e]=i}},e.prototype.clearDisplayLevels=function(){for(var t=this._rows,e=t.length,i=0;i<e;i++)t[i]._displayLevel=-1},e.prototype.getAllItems=function(){return this._pubItems.slice()},e.prototype.getNumber=function(t){var e=this.$_getSummary(t);return e?e.count:this.itemCount},e.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},e.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},e.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},e.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},e.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},e.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},e.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},e.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},e.prototype.getDataCount=function(t){var e=this.$_getSummary(t);return e?e.dataCount:0},e.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);return e?e.dataAvg:NaN},e.prototype.$_saveExtents=function(t){for(var e=0,i=this._rows.length;e<i;e++){var o=this._rows[e];o.dataRowId>=0&&(t[o.dataRowId]=o._extents)}},e.prototype.$_clearRows=function(t){t&&this.clearRowHeights(!0),this._rows.length=0,this._filteredItems.length=0,this._filtered=!1,this._sorted=!1,this._sortedItems.length=0,this._pubItems=this._rows,this.$_clearDistincts()},e.prototype.$_clearIndicies=function(){for(var t=this._rows.length;t--;)this._rows[t]._index=-1},e.prototype.$_clearDistincts=function(){for(var t=this._distinctRows.length;t--;)this._distinctRows[t]=null;this._distinctRows.length=0},e.prototype.$_buildRows=function(t){void 0===t&&(t=null);var e=this._dataSource;if(e){this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),this._rowCount=e.rowCount,!this._filtered&&!this._paging&&this.maxItemCount>0&&(this._rowCount=Math.min(this._rowCount,this.maxItemCount)),this._rows=new Array(this._rowCount);for(var i=0,o=this._rowCount;i<o;i++){var r=this._rows[i]=this.$_createRow(i);t&&t.hasOwnProperty(r.dataId)&&(r._extents=t[r.dataId])}this.$_buildItems(),this._checkableTag&&this._checkableTag.setRows(),0==this._rowCount&&this.clearRowHeights(!0)}},e.prototype.$_resetCounts=function(){this._filtered?this._pubCount=this._itemCount=this._items.length:this._pubCount=this._itemCount=this._rowCount=this._rows.length},e.prototype.$_buildItems=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.maxItemCount>0?this.maxItemCount:this._rows.length;if(this._rowCount=this._rows.length,this._pubItems=this._items=this._rows,this._pubCount=this._itemCount=this._rows.length,this._filtered=this.$_checkFiltered(),this._sorted=this.$_checkSorted(),(this._filtered||this._paging)&&this.$_clearIndicies(),this._filtered){if(this._filteredItems.length=0,this.hideDeleted||this._dataSource.hiddenCount>0)for(var o=0;o<this._rowCount;o++){var r=this._rows[o],n=this._dataSource.getRowState(this._rows[o].dataRow),s=this._dataSource.isHiddenRow(this._rows[o].dataRow);this.hideDeleted&&ht(n)||s?r._index=-1:r._index=0}else for(o=0;o<this._rowCount;o++)this._rows[o]._index=0;var a=this.fixedCount,l=a>0&&!this._fixedFiltering,h=this._rows.length;if(!t){o=0;for(var u=this._filters.length;o<u;o++){if(g=this._filters[o])for(var c=0;c<g.length;c++)g[c].prepare(this._filterRuntime,this._dataSource)}}this._paging||(h=Math.min(h,i));var d=0;for(o=0;o<this._rowCount&&d<h;o++){if((r=this._rows[o]).index>=0)if(t||l&&d<a)this._filteredItems.push(r),d++;else{var p=!this._filterOr,_=0,f=0;for(u=this._filters.length;f<u;f++){var g;if((g=this._filters[f])&&_++,this._filterOr){if(g&&this.$_select(g,r,f)){p=!0;break}}else if(g&&!this.$_select(g,r,f)){p=!1;break}}p||0===_?(this._filteredItems.push(r),d++):r._index=-1}}this._pubItems=this._items=this._filteredItems,this._pubCount=this._itemCount=this._items.length}else this._filteredItems.length=0;if(this._sorted){if(e){var y=this._sortedItems;for(o=y.length;o--;)y[o].index<0&&y.splice(o,1)}else this.$_sortRows();this._pubItems=this._sortedItems}else this._sortedItems.length=0;this._paging&&this.$_buildPageItems(),this.$_clearSummary(),this._resetItemIndicies(0)},e.prototype.$_buildPageItems=function(){var t=this._sorted?this._sortedItems:this._filtered?this._filteredItems:this._items;this._pageItems.length=0;for(var e=this._pageStart=this._pageStartIndex>=0?this._pageStartIndex:this._currPage*this._pageSize,i=t.length,o=this.maxItemCount>0?this.maxItemCount:i,r=Math.min(this._pageSize,o);e<i&&r>0;e++,r--)this._pageItems.push(t[e]);this._pubItems=this._pageItems,this._pubCount=this._pubItems.length},e.prototype.$_buildPage=function(){this.$_clearIndicies(),this.$_buildPageItems(),this._resetItemIndicies(0)},e.prototype.$_compareFuncs=function(t,e){for(var i={},o=this._dataSource,n=0,a=t.length;n<a;n++){var l=o.getField(t[n]);if(l){var h=o.getDataComparer(l.index)||this._labelComparer[l.index],u=e[n]==s.INSENSITIVE;if(!h)switch(l.dataType){case r.DATETIME:case r.NUMBER:h=o.compareNumbers.bind(o);break;case r.BOOLEAN:h=o.compareBools.bind(o);break;case r.OBJECT:h=o.compareObjects.bind(o);break;default:h=u?o.compareTexts.bind(o):o.compareValues.bind(o)}h&&(i[t[n]]=h)}}return i},e.prototype.$_sortRows=function(t){void 0===t&&(t=null);var e=t||this._items.slice(),i=[];this._fixedCount>0&&!this._fixedSorting&&(i=e.splice(0,this._fixedCount));var o=this.$_compareFuncs(this._sortFields,this._sortCases);e.sort(function(t,e){for(var i,r,s,a=0,l=0,h=this._sortFields.length;l<h&&(r=this._sortDirections[l],s=this._sortFields.length==l+1,!(i=o[this._sortFields[l]])||0===(a=i(this._sortFields[l],t.dataRow,e.dataRow)));l++);return a=0===(a*=r===n.DESCENDING?-1:1)&&s?r===n.DESCENDING?e.dataRow-t.dataRow:t.dataRow-e.dataRow:a}.bind(this)),this._sortedItems=i.concat(e)},e.prototype.$_createRow=function(t){var e=new io(t);return this.attachItem(e),e._dataRowId=e.dataId,e},e.prototype.$_createAllRow=function(){for(var t=0;t<this._rowCount;t++)this._rows[t]||(this._rows[t]=this.$_createRow(t))},e.prototype.$_resetSummary=function(){this._summaryMap=[]},e.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length-1;t>=0;t--)this._summaryMap[t]&&this._summaryMap[t].clear()},e.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this._dataSource;i&&i.canSummarize(t)&&(e=new Xi(t),this._summaryMap[t]=e)}return e&&0==e.count&&this.itemCount>0&&this.$_summarize(e),e},e.prototype.$_summarize=function(t){var e=this._dataSource;if(e)if(this._filtered){for(var i=this._items.length,o=new Array(i),r=0;r<i;r++)o[r]=this._pubItems[r].dataRow;e.summarizeRange(t,o,this._summaryMode==_.STATISTICAL)}else e.summarize(t,this._summaryMode==_.STATISTICAL)},e.prototype.$_needSort=function(){return this._sorted&&this._sortMode==l.AUTO},e.prototype.$_needFilter=function(){return this._filtered&&this._filterMode==h.AUTO},e.prototype.$_checkFiltered=function(){if(this._dataSource)return this._filters.length=this._dataSource.fieldCount,this.hasFilters()||this.hideDeleted&&this._dataSource.deletedCount>0||this._dataSource.hiddenCount>0},e.prototype.$_select=function(t,e,i){for(var o=0,r=t.length;o<r;o++)if(t[o].select(this._filterRuntime,e.parent,e,i))return!0},e.prototype.$_checkSorted=function(){for(var t=this._sortFields.length-1;t>=0;t--)this._sortFields[t]>this._dataSource.fieldCount&&(this._sortFields.splice(t,1),this._sortDirections.splice(t,1),this._sortCases.splice(t,1));return this._sortFields&&this._sortFields.length>0},e.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},e.prototype.onDataProviderDisposed=function(t){this._checkableTag&&this._checkableTag.disconnect(),this.$_clearRows(!0),this.$_resetSummary(),this._fireReset(),this.dataSource=null},e.prototype.onDataProviderReset=function(t){this.$_clearRows(!0),this.$_buildRows(),this.$_resetSummary(),this._fireReset()},e.prototype.onDataProviderRefresh=function(t){this._refreshItems()},e.prototype.onDataProviderRefreshClient=function(t){this._fireRefreshClient()},e.prototype.onDataProviderRowCountChanged=function(t,e){this._fireRefreshClient()},e.prototype.onDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},e.prototype.onDataProviderRowInserting=function(t,e,i){return!0},e.prototype.onDataProviderRowInserted=function(t,e,i){var o=this._rows,r=e<o.length?o[e]:null,n=this.$_createRow(e);o.splice(e,0,n);for(var s=e,a=o.length;s<a;s++)o[s]._dataRow=s;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var l=this._filteredItems;e=null!=i?i:Math.max(0,r?l.indexOf(r):l.length),l.splice(e,0,n)}if(this._sorted){l=this._sortedItems;e=null!=i?i:Math.max(0,r?l.indexOf(r):l.length),l.splice(e,0,n)}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(this._sorted?0:e)}this._checkableTag&&this._checkableTag.insertRow(e),this._fireItemInserted(n)},e.prototype.onDataProviderRowsInserted=function(t,e,i,o){if(!(i<0)){for(var r,n=this._rows,s=e<n.length?n[e]:null,a=[],l=0;l<i;l++)a.push(r=this.$_createRow(e+l)),n.splice(e+l,0,r);var h=n.length;for(l=e;l<h;l++)n[l]._dataRow=l;if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else{if(this._filtered){var u=this._filteredItems;e=null!=o?o:Math.max(0,s?u.indexOf(s):u.length);for(l=0;l<a.length;l++)u.splice(e+l,0,a[l])}if(this._sorted){u=this._sortedItems;e=null!=o?o:Math.max(0,s?u.indexOf(s):u.length);for(l=0;l<a.length;l++)u.splice(e+l,0,a[l])}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(e)}this._checkableTag&&this._checkableTag.insertRows(e,i),this._fireRefresh()}},e.prototype.onDataProviderRowRemoving=function(t,e){return!0},e.prototype.$_silentRemoveRow=function(t){var e,i;this._filtered&&((i=(e=this._filteredItems).indexOf(t))>=0&&e.splice(i,1));this._sorted&&((i=(e=this._sortedItems).indexOf(t))>=0&&e.splice(i,1));this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},e.prototype.onDataProviderRowRemoved=function(t,e){var i=this._rows,o=i[e];i.splice(e,1);for(var r=i.length-1;r>=e;r--)i[r]._dataRow=r;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRow(o),0==i.length&&this.clearRowHeights(!0),this._fireItemDeleted(o)},e.prototype.onDataProviderRowsRemoving=function(t,e){return!0},e.prototype.$_silentRemoveRows=function(t){if(this._filtered)for(var e=this._filteredItems,i=0;i<t.length;i++){var o=t[i];(r=e.indexOf(o))>=0&&e.splice(r,1)}if(this._sorted)for(e=this._sortedItems,i=0;i<t.length;i++){var r;o=t[i];(r=e.indexOf(o))>=0&&e.splice(r,1)}this.$_clearSummary(),this.$_resetCounts(),this._resetItemIndicies(0)},e.prototype.onDataProviderRowsRemoved=function(t,e){if(e&&!(e.length<1)){e.length>1&&e.sort((function(t,e){return t-e}));for(var i=this._rows,o=e[0],r=[],n=e.length-1;n>=0;n--)r.push(i[e[n]]),i.splice(e[n],1);for(n=this._rows.length-1;n>=o;n--)i[n]._dataRow=n;this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_silentRemoveRows(r),0==e.length&&this.clearRowHeights(!0),this._fireRefresh()}},e.prototype.onDataProviderRowUpdating=function(t,e,i){return!0},e.prototype.onDataProviderRowUpdated=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e])},e.prototype.onDataProviderRowsUpdated=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRows(e,i),this._fireRefresh()},e.prototype.onDataProviderRowListUpdated=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRowList(e),this._fireRefresh()},e.prototype.onDataProviderValueChanging=function(t,e,i,o){return!0},e.prototype.onDataProviderValueChanged=function(t,e,i){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.updateRow(e),this._rows[e]&&this._fireItemUpdated(this._rows[e])},e.prototype.onDataProviderRowMoving=function(t,e,i){return!0},e.prototype.onDataProviderRowMoved=function(t,e,i){var o=this._rows,r=o.splice(e,1);o.splice(i,0,r[0]);for(var n=o.length,s=e=Math.min(e,i);s<n;s++)o[s]._dataRow=s;(this._sorted||this._paging||this.hideDeleted)&&(this.$_buildItems(),this._resetItemIndicies(0)),this._fireRefresh()},e.prototype.onDataProviderRowsMoving=function(t,e,i,o){return!0},e.prototype.onDataProviderRowsMoved=function(t,e,i,o){this._refreshItems()},e.prototype.onDataProviderRowListMoving=function(t,e,i){return!0},e.prototype.onDataProviderRowListMoved=function(t,e,i){this._refreshItems()},e.prototype.onDataProviderStateChanged=function(t,e){if(this.hideDeleted){var i=this._rows[e];ht(i.rowState)&&(this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0)?this.$_buildItems(!0,!0):this.$_silentRemoveRow(i),this._fireRefresh())}this._checkableTag&&this._checkableTag.updateRow(e),this._fireRowStateChanged(this._rows[e])},e.prototype.onDataProviderRowHided=function(t,e,i){if(this._filtered=this.$_checkFiltered(),i){if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else if(this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0))this.$_buildItems(!0,!0);else{var o=this.getItemsByRows(e);this.$_silentRemoveRows(o)}this._fireRefresh()}else this._refreshItems()},e.prototype.onDataProviderStatesChanged=function(t,e){if(this.hideDeleted){for(var i=!1,o=0,r=e.length;o<r;o++){var n=e[o],s=this._rows[n];if(ht(s.rowState)){i=!0;break}}if(i){if(this.$_needFilter()||this.$_needSort()||this._paging)this.$_buildItems();else if(this.$_checkFiltered()&&(!this._filteredItems||this._filteredItems.length<=0)||this.isSorted&&(!this._sortedItems||this._sortedItems.length<=0))this.$_buildItems(!0,!0);else{var a=this.getItemsByRows(e);this.$_silentRemoveRows(a)}this._fireRefresh()}}this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e))},e.prototype.onDataProviderRestoreRows=function(t,e){this.$_needFilter()||this.$_needSort()||this._paging?this.$_buildItems():this.$_clearSummary(),this._checkableTag&&this._checkableTag.changeStates(e),this._fireRowStatesChanged(this.getItemsByRows(e)),this._fireRefresh()},e.prototype.onDataProviderStatesCleared=function(t){this._pubCount!=t.rowCount&&this._refreshItems(),this._fireRowStatesCleared()},e}(ao),Sr=function(t){function e(e,i,o){var r=t.call(this)||this;return r._owner=e,r._exprNode=ee.Default.parse(i,["value","values"]),r._runtime=new xr,r._callback=o,r}return o(e,t),e.clearCheckables=function(t){for(var e=function(t){if(t){t.setCheckable(!0);for(var i=t.count;i--;){var o=t.getItem(i);o instanceof Dr&&e(o)}}},i=t.itemCount;i--;){var o=t.getItem(i);o instanceof Dr&&e(o)}},e.prototype.connect=function(t){this._runtime.setDataSource(t)},e.prototype.disconnect=function(){},e.prototype.clearRows=function(){e.clearCheckables(this._owner)},e.prototype.setRows=function(){for(var t=this._owner.itemCount;t--;){var e=this._owner.getItem(t);e instanceof Dr&&this.$_setCheckable(e,!0)}},e.prototype.addRow=function(t,e){void 0===e&&(e=!0);var i=this._owner.getItemOfRow(t.rowId);i instanceof Dr&&this.$_setCheckable(i,e)},e.prototype.addRows=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof Dr&&this.$_setCheckable(i,!0)}},e.prototype.updateRow=function(t){var e=this._owner.getItemOfRow(t.rowId);e instanceof Dr&&this.$_setCheckable(e,!1)},e.prototype.updateRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e],r=this._owner.getItemOfRow(o.rowId);r instanceof Dr&&this.$_setCheckable(r,!1)}},e.prototype.changeStates=function(t){for(var e=t.length;e--;){var i=this._owner.getItemOfRow(t[e].rowId);i instanceof Dr&&this.$_setCheckable(i,!1)}},e.prototype.$_setCheckable=function(t,e){if(t){var i=this._callback,o=void 0;if(i?o=i.call(this,t.dataSource.handler,t):(this._runtime.setItem(t),o=this._exprNode.evaluate(this._runtime)),t.setCheckable(o),e)for(var r=t.count;r--;){var n=t.getItem(r);n instanceof Dr&&this.$_setCheckable(n,!0)}}},e}(ft),Or=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._extents={},e}return o(e,t),e.prototype.connect=function(t){this._extents={}},e.prototype.disconnect=function(){this._extents={}},e.prototype.clearRows=function(){this._extents={}},e.prototype.setRows=function(){},e.prototype.addRow=function(t){this._extents[t.rowId]=0;for(var e=t.count-1;e>=0;e--)this.addRow(t.getChild(e))},e.prototype.addRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];this.addRow(o)}},e.prototype.removeRow=function(t){delete this._extents[t.rowId];for(var e=t.count-1;e>=0;e--)this.removeRow(t.getChild(e))},e.prototype.removeRows=function(t){for(var e=0,i=t;e<i.length;e++){var o=i[e];this.removeRow(o)}},e.prototype.updateRow=function(t){},e.prototype.updateRows=function(t){},e.prototype.getExtents=function(t){var e=this._extents[t.rowId];return void 0===e?this._extents[t.rowId]=0:e},e.prototype.setExtents=function(t,e){this._extents[t.rowId]=e},e}(ft),Rr=function(t){function e(){var e=t.call(this)||this;return e._extents=0,e}return o(e,t),e.prototype._getExtents=function(){return this._extents},e.prototype._setExtents=function(t){this._extents=t},Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(eo),Dr=function(t){function e(e){var i=t.call(this)||this;return i._iconHeight=0,i._dataRow=e,i}return o(e,t),e.getTemp=function(t){return e.$_tempItem._dataRow=t,e.$_tempItem},e.prototype.dispose=function(){this._dataRow=null,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"iconHeight",{get:function(){return this._iconHeight},set:function(t){this._iconHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"row",{get:function(){return this._dataRow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowId",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconIndex",{get:function(){return this._dataRow?this._dataRow.iconIndex:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasChildren",{get:function(){return this.count>0||this._dataRow&&this._dataRow.hasChildren},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rootItem",{get:function(){for(var t=this;t.level>1;)t=t.parent;return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summaryMode",{get:function(){return _.AGGREGATE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!0,configurable:!0}),e.prototype.setEditable=function(t,e){this._editable=t,this._readOnly=e},e.prototype._getExtents=function(){var t=this.provider;return t?t._extents.getExtents(this):0},e.prototype._setExtents=function(t){var e;null===(e=this.provider)||void 0===e||e._extents.setExtents(this,t)},Object.defineProperty(e.prototype,"isData",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDataRow",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footer",{get:function(){return this._footer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerCount",{get:function(){return this._footer?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataRow",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!0,configurable:!0}),e.prototype.getShadowRow=function(){return this._dataRow?this._dataRow.rowId:-1},Object.defineProperty(e.prototype,"dataId",{get:function(){return this._dataRow?this._dataRow.rowId:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"descendantCount",{get:function(){return this._dataRow.descendantCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowState",{get:function(){return this._dataRow.rowState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!this.hasChildren},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.getFooter=function(t){return this._footer},e.prototype.isFooter=function(t){return t===this._footer},e.prototype.canEdit=function(){return!0},e.prototype.createFooter=function(){this._footer||(this._footer=new Rr)},e.prototype.setExpanded=function(t,e,i){(t!=this.expanded||i)&&(t?this.provider.expand(this,e,i,0):this.provider.collapse(this,e,i))},e.prototype.getData=function(t){return t=this.dataSource.getFieldIndex(t),this._dataRow.getValue(t)},e.prototype.setData=function(t,e){t=this.dataSource.getFieldIndex(t),this._dataRow.setValue(t,e,!1)},e.prototype.setItem=function(e,i){t.prototype.setItem.call(this,e,i),i._addChildren(e.children),e.clear()},e.prototype.exchange=function(t,e){this._exchangeItems(t,e)},e.prototype.moveChild=function(t,e){var i=t+e,o=this._children,r=o[t];if(e<0)for(var n=t;n>i;n--)o[n]=o[n-1];else for(n=t;n<i;n++)o[n]=o[n+1];o[i]=r},e.prototype.moveChildren=function(t,e,i){for(var o=this._children,r=o.splice(t,e),n=t+i,s=0;s<e;s++)o.splice(n+s,0,r[s])},e.prototype.changeParent=function(t,e){this.parent.remove(this),t&&t.insert(e,this)},e.prototype.getRowData=function(){return this._dataRow&&this._dataRow._values.concat()},e.$_tempItem=new e(null),e}(oo),kr=function(t){function e(e){var i=t.call(this,null)||this;return i._rs=e,i}return o(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"provider",{get:function(){return this._rs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.setExpanded=function(t,e,i){},Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._rs.dataSource},enumerable:!0,configurable:!0}),e}(Dr),Pr=function(t){function e(e){var i=t.call(this)||this;return i._fixedCount=0,i._items=new Array,i._list=new Array,i._rs=e,i}return o(e,t),Object.defineProperty(e.prototype,"provider",{get:function(){return this._rs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!0,configurable:!0}),e.prototype.getItem=function(t){return this._items[t]},e.prototype.setItem=function(t,e){this._items[t]=e},e.prototype.indexOf=function(t){return this._items.indexOf(t)},e.prototype.clear=function(){this._items.length=0},e.prototype.expand=function(t,e,i){void 0===i&&(i=0),t&&this.$_expandItem(t,e,i)},e.prototype.collapse=function(t){if(t)for(var e=this._rs,i=this._items,o=t.index+1;o<i.length&&i[o].level>t.level;){if(i[o]==t.footer){e.footerWhenCollapsed||(i[o]._index=-1,i.splice(o,1));break}i[o]._index=-1,i.splice(o,1)}},e.prototype.getNext=function(t){return t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},e.prototype.getPrior=function(t){return t&&t.visible&&t.index>0?this._items[t.index-1]:null},e.prototype.insert=function(t,e){this._items.splice(e,0,t)},e.prototype.remove=function(t){var e=this._items,i=e.indexOf(t);if(i>=0&&(e.splice(i,1),t.expanded))for(;i<e.length&&t.isDescendant(e[i]);)e.splice(i,1)},e.prototype.$_collectChildren=function(t,e,i,o){for(var r=0,n=t.count;r<n;r++){var s=t.getItem(r);s&&(e.push(s),(i&&s.level<o||s.expanded)&&this.$_collectChildren(s,e,i,o))}t.footer&&e.push(t.footer)},e.prototype.$_expandItem=function(t,e,i){var o,r=this._items,n=this._list;if(o=t instanceof kr?this._fixedCount:t.index+1,i=Math.max(0,i),n.length=0,this.$_collectChildren(t,n,e,i>0?t.level+i:1e6),e){for(var s=o,a=r.length;s<a&&!(r[s].level<=t.level);s++);r.splice(o,s-o)}for(s=0,a=n.length;s<a;s++)r.splice(o+s,0,n[s])},e.prototype._clearAndInit=function(t){this.clear(),this._fixedCount=Math.min(t,this._rs.itemCount);for(var e=0;e<this._fixedCount;e++)this._items.push(this._rs.getItem(e))},e}(ft),Tr=function(t){function e(){var e=t.call(this,null)||this;return e._sortMode=l.AUTO,e._expandWhenGrouping=!0,e._footerWhenExpanded=!0,e._footerWhenCollapsed=!0,e._labelComparer={},e._summaryMode=_.AGGREGATE,e._groupSummaryMode=_.AGGREGATE,e._checkableExpression=null,e._checkableCallback=null,e._extents=new Or,e._filters={},e._filterRuntime=new xo,e._filtered=!1,e._sorter=new Cr,e._sortFields=[],e._sortDirections=[],e._sortCases=[],e._visibleItems=new Pr(e),e._itemMap=[],e._itemCount=0,e._summaryMap=null,e._filterLock=0,e._includeParentItem=!0,e._checkFieldIndex=-1,e}return o(e,t),e.prototype._doDispose=function(){this._filters=null,this._filterRuntime=null,this._sorter=null,this._sortFields=null,this._sortDirections=null,this._sortCases=null,this._visibleItems=null,this._itemMap=null,this._summaryMap=null,this._checkableExpression=null,this._checkableCallback=null,this._checkableTag=null,this._labelComparer=null,t.prototype._doDispose.call(this)},e.prototype.getCommandStates=function(t){return this._itemMap[t.rowId]._getExtents()},e.prototype.setCommandStates=function(t,e){this._itemMap[t.rowId]._setExtents(e)},Object.defineProperty(e.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerWhenExpanded",{get:function(){return this._footerWhenExpanded},set:function(t){t!=this._footerWhenExpanded&&(this._footerWhenExpanded=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerWhenCollapsed",{get:function(){return this._footerWhenCollapsed},set:function(t){t!=this._footerWhenCollapsed&&(this._footerWhenCollapsed=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelComparer",{get:function(){return this._labelComparer},set:function(t){this._labelComparer=t||{}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this.$_resetSummary(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupSummaryMode",{get:function(){return this._groupSummaryMode},set:function(t){t!=this._groupSummaryMode&&(this._groupSummaryMode=t,this.$_resetGroupSummary(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideDeleted",{get:function(){return this._hideDeleted},set:function(t){t!=this._hideDeleted&&(this._hideDeleted=t,this._saveAndRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new Sr(this,t),this.dataSource&&this._checkableTag.connect(this.dataSource)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){t!=this._checkableCallback&&(this._checkableCallback=t,this._checkableTag&&(this._checkableTag.disconnect(),this._checkableTag=null),t&&(this._checkableTag=new Sr(this,null,t),this.dataSource&&this._checkableTag.connect(this.dataSource)))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortMode",{get:function(){return this._sortMode},set:function(t){t!=this._sortMode&&(this._sortMode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){this._includeParentItem=t},enumerable:!0,configurable:!0}),e.prototype.$_needSort=function(){return this._sortFields&&this._sortFields.length>0&&this._sortMode==l.AUTO},e.prototype.insertItem=function(t,e,i,o){var r=this._visibleItems;t.collapsed&&r.expand(t,!1);var n=r.indexOf(t.getItem(i));if(o){t.insert(i+1,e);for(var s=r.count,a=t.level+1;++n<s&&!(r.getItem(n).level<=a););r.insert(e,n)}else t.insert(i,e),r.insert(e,n)},e.prototype.appendItem=function(t,e){var i,o=this._visibleItems;t.collapsed&&o.expand(t,!1),i=t.count>0?o.indexOf(t.getItem(t.count-1)):o.indexOf(t);for(var r=o.count,n=t.level;++i<r&&!(o.getItem(i).level<=n););t.add(e),o.insert(e,i)},e.prototype.removeItem=function(t){this._visibleItems.remove(t),t.parent.remove(t)},e.prototype.$_calcLevel=function(t,e,i){var o,r,n=t.count,s=e;for(o=0;o<n;o++)(r=t.getItem(o))&&(s=Math.max(s,e+1),i&&!r.expanded||(s=Math.max(s,this.$_calcLevel(r,e+1,i))));return s},e.prototype.getLevels=function(t){return this.$_calcLevel(this._rootItem,0,t)},e.prototype.$_setExpanded=function(t,e,i){if(this._setExpanded(t,!0),this.dataSource.setHasChildren(t.row,!1),e)for(var o=0,r=t.count;o<r;o++){var n=t.getItem(o);n instanceof Dr&&(n.expanded||n.level<i)&&this.$_setExpanded(n,!0,i)}},e.prototype._expandItem=function(t,e,i,o,r){if(t&&(e||!t.expanded)){if(r&&!this._fireExpanding(t))return;this._visibleItems.collapse(t),this._visibleItems.expand(t,i,o),this._resetItemIndicies(t===this._rootItem?0:t.index),this.$_setExpanded(t,i,o>0?t.level+o:1e6);try{this._fireRefresh()}finally{r&&this._fireExpanded(t)}}},e.prototype.expand=function(t,e,i,o){void 0===o&&(o=0),this._expandItem(t,i,e,o,!0)},e.prototype.expandAll=function(t){this._expandItem(this._rootItem,!0,!0,t>0?t+1:0,!0)},e.prototype.$_setCollapsed=function(t,e){if(this._setExpanded(t,!1),e)for(var i=0,o=t.count;i<o;i++){var r=t.getItem(i);r instanceof Dr&&this.$_setCollapsed(r,!0)}},e.prototype._collapseItem=function(t,e,i,o){if(t&&(e||t.expanded)){if(o&&!this._fireCollapsing(t))return;this._visibleItems.collapse(t),this.$_setCollapsed(t,i),t==this._rootItem&&this._visibleItems.expand(this._rootItem,!1),this._resetItemIndicies(t===this._rootItem?0:t.index);try{this._fireRefresh()}finally{o&&this._fireCollapsed(t)}}},e.prototype.collapse=function(t,e,i){this._collapseItem(t,i,e,!0)},e.prototype.collapseAll=function(){this._collapseItem(this._rootItem,!0,!0,!0)},e.prototype.$_saveExpanded=function(t){t._saveExpanded();for(var e=0,i=t.count;e<i;e++)this.$_saveExpanded(t.getItem(e))},e.prototype.orderBy=function(t,e,i,o){void 0===o&&(o=!0),this._fireSort(t,e,i),this._sortFields=[],this._sortDirections=[],this._sortCases=[];for(var r=t?t.length:0,a=e?e.length:0,l=i?i.length:0,h=0;h<r;h++)this._sortFields.push(t[h]),a>h?this._sortDirections.push(e[h]):a>0?this._sortDirections.push(e[a-1]):this._sortDirections.push(n.ASCENDING),l>h?this._sortCases.push(i[h]):l>0?this._sortCases.push(i[l-1]):this._sortCases.push(s.SENSITIVE);try{this._saveAndRefresh(!0,o),o&&this._fireRefresh()}finally{this._fireSorted()}},e.prototype.getSortFields=function(){return this._sortFields.concat()},e.prototype.getSortDirections=function(){return this._sortDirections.concat()},e.prototype.getSortCases=function(){return this._sortCases.concat()},e.prototype.beginFiltering=function(){this._filterLock++},e.prototype.$_prepareFiltering=function(t,e){for(var i=e._dataRow.count,o=e.rowId,r=o<=-1||this.$_selectItem(e.parent,e),n=0;n<i;n++){var s=new Dr(e._dataRow._children[n]);s&&!this.dataSource.isHiddenRow(s.rowId)&&(r=this.$_prepareFiltering(t,s)||r)}return t[o]=r},e.prototype.endFiltering=function(t,e,i){var o={};t&&this._includeParentItem&&(o={},this.$_prepareFilters(),this.$_prepareFiltering(o,this._rootItem)),this._filterLock>0&&(this._filterLock=Math.max(0,this._filterLock-1),t&&0==this._filterLock&&this.applyFilters(e,i,o))},e.prototype.hasFilter=function(t){var e=this._filters[t];return!!e&&e.length>0},e.prototype.addFilter=function(t,e){this._fireFilterAdded(t,e.text);var i=this._filters[t];i||(i=[],this._filters[t]=i);var o=new wo(e);return i.push(o),o},e.prototype.removeFilter=function(t,e){if(this._filtered&&this._filters[t]){this._fireFilterRemoved(t,e);for(var i=this._filters[t],o=i.length;o--;)if(i[o].model===e){i.splice(o,1),this.applyFilters(null,null);break}}},e.prototype.clearFilters=function(t){if(this._filtered&&this._filters[t]){this._fireFilterCleared(t);var e=this._filters[t];e&&e.length>0&&(e.splice(0,e.length),this._filters[t]=null,this.applyFilters(null,null))}},e.prototype.clearAllFilters=function(){this._filtered&&(this._fireFilterAllCleared(),this._filters={},this.applyFilters(null,null))},e.prototype.hasFilters=function(){for(var t in this._filters){var e=this._filters[t];if(e&&e.length>0)return!0}return!1},e.prototype.$_prepareFilters=function(){var t=this.dataSource,e=t.fieldCount;for(var i in this._filters)Number(i)>=e&&(this._filters[i]=null);if(this._filtered=this.hasFilters())for(var o in this._filters){var r=this._filters[o];if(r)for(var n=r.length;n--;)r[n].prepare(this._filterRuntime,t)}},e.prototype.applyFilters=function(t,e,i){if(i||this.$_prepareFilters(),0==this._filterLock){this.$_saveExpanded(this._rootItem),this.$_clearItems(),this.$_buildTree(!0,i);try{this._fireRefresh()}finally{this._fireFiltered(t,e)}}},e.prototype.getItemByRow=function(t){return t?this._itemMap[t.rowId]:null},e.prototype.getCheckedRows=function(){var t=[];return function t(e,i){if(e instanceof Dr)for(var o=0,r=e.count;o<r;o++){var n=e.getItem(o),s=void 0;n.checked&&(s=n.row)&&i.push(s),t(n,i)}}(this._rootItem,t),t},e.prototype.getCheckedRowIds=function(){var t=[];return function t(e,i){if(e instanceof Dr)for(var o=0,r=e.count;o<r;o++){var n=e.getItem(o),s=void 0;n.checked&&(s=n.dataRow)>=0&&i.push(s),t(n,i)}}(this._rootItem,t),t},e.prototype.resetCheckables=function(){this._checkableTag&&(this._checkableTag.clearRows(),this._fireRefresh())},e.prototype.applyCheckables=function(){this._checkableTag?this._checkableTag.setRows():Sr.clearCheckables(this),this._fireRefresh()},e.prototype.$_checkChildren=function(t,e,i){for(var o=0,r=t.count;o<r;o++){var n=t.getItem(o);n&&(i?n.checkable&&this._setCheckItem(n,e):this._setCheckItem(n,e)),n instanceof Dr&&this.$_checkChildren(n,e,i)}},e.prototype._clearChecked=function(){this.$_checkChildren(this._rootItem,!1,!1)},e.prototype.checkAll=function(e,i,o,r){i?t.prototype.checkAll.call(this,e,i,o,r,!1):(this.$_checkChildren(this._rootItem,e,o),r?this._fireItemAllChecked(e):this._fireRefreshClient())},e.prototype.setCheckFieldIndex=function(t){this._checkFieldIndex=t},e.prototype.setItemChecked=function(t,e){return this._checkFieldIndex>-1&&(t.setData(this._checkFieldIndex,e),!0)},e.prototype.getItemChecked=function(t,e){return this._checkFieldIndex>=0?t.getData(this._checkFieldIndex):e},Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._ds},set:function(t){t!==this._ds&&(this.$_clearItems(),this.$_resetSummary(),this._ds&&(this._ds.removeTag(this._extents),this._ds.removeListener(this),this._ds.unregisterCommandListener(this)),this._ds=t,this._ds&&(this.$_buildTree(),this._ds.addTag(this._extents),this._ds.addListener(this,0),this._ds.registerCommandListener(this)),this._fireReset())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCount",{get:function(){return this._visibleItems.count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._itemCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorted",{get:function(){return this._sortFields&&this._sortFields.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return!this.sorted},enumerable:!0,configurable:!0}),e.prototype._createRootItem=function(){var t=new kr(this);return this._setExpanded(t,!0),t},e.prototype.getItem=function(t){return t>=0&&t<this._visibleItems.count?this._visibleItems.getItem(t):null},e.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},e.prototype.getItemOfRow=function(t,e){return this._itemMap[t]},e.prototype.$_collectItems=function(t,e){for(var i=0,o=t.count;i<o;i++){var r=t.getItem(i);r instanceof Dr&&(e.push(r),this.$_collectItems(r,e))}},e.prototype.getAllItems=function(){var t=[];return this.$_collectItems(this._rootItem,t),t},e.prototype.getJsonRows=function(){return this.getAllItems().map((function(t){var e=t.getRowObject();return e.__level=t.level,e}))},e.prototype.getSum=function(t){var e=this.$_getSummary(t);return e?e.sum:NaN},e.prototype.getMax=function(t){var e=this.$_getSummary(t);return e?e.max:NaN},e.prototype.getMin=function(t){var e=this.$_getSummary(t);return e?e.min:NaN},e.prototype.getAvg=function(t){var e=this.$_getSummary(t);return e?e.avg:NaN},e.prototype.getVar=function(t){var e=this.$_getSummary(t);return e?e.vars:NaN},e.prototype.getVarp=function(t){var e=this.$_getSummary(t);return e?e.varsp:NaN},e.prototype.getStdev=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.vars):NaN},e.prototype.getStdevp=function(t){var e=this.$_getSummary(t);return e?Math.sqrt(e.varsp):NaN},e.prototype.getDataCount=function(t){var e=this.$_getSummary(t);return e?e.dataCount:0},e.prototype.getDataAvg=function(t){var e=this.$_getSummary(t);return e?e.dataAvg:NaN},e.prototype.findItem=function(t,e,i,o,n){var s=this.dataSource;if(!s)return-1;if(this.itemCount<1)return-1;var a=Math.min(t.length,e.length);if(a<1)return-1;var l=!i||i.allFields,h=i&&i.caseSensitive,u=i&&i.partialMatch,c=null,d=[],p=i.compareCallback;p="function"==typeof p?p:lt.compareTextValue;for(var _=0;_<a;_++)d[_]=s.getField(t[_]).dataType;o=Math.max(0,o),n=Math.min(this._visibleItems.count-1,n);for(var f=o;f<=n;f++){var g=this._visibleItems.getItem(f),y=g.dataRow>=0;if(y)for(_=0;_<a;_++){var m=g.getData(t[_]);switch(d[_]){case r.DATETIME:case r.DATE:if(e[_]instanceof Date)y=p(e[_],m,h,u);else{if(!c){var b=/[.]/.test(e[_])?"yyyy.MM.dd":/[/]/.test(e[_])?"yyyy/MM/dd":/[-]/.test(e[_])?"yyyy-MM-dd":"yyyyMMdd";c=new Ge(b)}y=p(e[_],m?c.getText(m):m,h,u)}break;default:y=p(e[_],m,h,u)}if(y&&!l)return f;if(!y&&l)break}if(y)return f}return-1},e.prototype.findCell=function(t,e,i,o,n,s){var a=this.dataSource;if(!a)return null;if(this.itemCount<1)return null;for(var l=i&&i.caseSensitive,h=i&&i.partialMatch,u=a.fieldCount,c=t.length,d=null,p=[],_=0;_<u;_++)p[_]=a.getField(_).dataType;o=Math.max(0,o),n=Math.min(this._visibleItems.count-1,n),(s=Math.max(0,s))>=t.length&&(o++,s=0);var f=i.compareCallback;f="function"==typeof f?f:lt.compareTextValue;for(var g=o;g<=n;g++){var y=this._visibleItems.getItem(g),m=!1;if(y.dataRow>=0)for(_=g>o?0:s;_<c;_++){var b=t[_];if(b>=0&&b<u){var v=y.getData(b);switch(p[b]){case r.DATETIME:case r.DATE:if(e instanceof Date)m=f(e,v,l,h);else{if(!d){var w=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd";d=new Ge(w)}m=f(e,v?d.getText(v):v,l,h)}break;default:m=f(e,v,l,h)}if(m)return{itemIndex:g,fieldIndex:b,searchFieldIndex:_}}}}return null},e.prototype.$_internalAddItem=function(t,e,i){var o=Dr.getTemp(e),r=this.dataSource;if(!(this.hideDeleted&&ht(o.rowState)||r.isHiddenRow(e.rowId)))return o&&(null!=i?i:this.$_selectItem(t,o))?(o=new Dr(e),t.insert(e.index,o),this._itemCount++,this._itemMap[e.rowId]=o,o):void 0},e.prototype.$_internalRemoveItem=function(t){t&&(t.parent.remove(t),this._itemCount--,this._itemMap[t.row.rowId]=void 0)},e.prototype.$_internalRowStateChanged=function(t,e){if(void 0===e&&(e=!0),t)if(this.hideDeleted&&ht(t.rowState)){var i=t.parent;this.$_internalRemoveItem(t),this.$_clearSummary(),i.expanded&&i.visible&&(this._visibleItems.remove(t),e=!0),e&&this._fireRefresh()}else this._fireItemChanged(t)},e.prototype.$_selectField=function(t,e,i,o){for(var r=0,n=t.length;r<n;r++){if(t[r].select(this._filterRuntime,e,i,o))return!0}return!1},e.prototype.$_selectItem=function(t,e){if(!e)return!1;for(var i in this._filters){var o=this._filters[i];if(o&&!this.$_selectField(o,t,e,Number(i)))return!1}return!!e&&!0},e.prototype._setItem=function(t,e){this._visibleItems.setItem(t.index,e),this._resetItemIndex(t.index)},e.prototype.$_resetVisibleItems=function(){this._visibleItems._clearAndInit(this.fixedCount),this._visibleItems.expand(this._rootItem,!1),this._setExpanded(this._rootItem,!0),this._resetItemIndicies(0)},e.prototype.$_clearItems=function(){this._visibleItems.clear(),this._rootItem.clear(),this._itemMap=[],this._itemCount=0},e.prototype.$_buildItems=function(t,e,i){void 0===e&&(e=!1);for(var o=t.row,r=o.count,n=0;n<r;n++){var s=o.getChild(n),a=this.$_internalAddItem(t,s,i?i[s.rowId]:null);a&&(e&&a._restoreExpanded(),s.count>0&&this.$_buildItems(a,e,i))}},e.prototype.$_sortItem=function(t){var e=t.count;e>1&&this.$_sort(t,0,0,e-1);for(var i=0;i<e;i++){var o=t.getItem(i);o instanceof Dr&&this.$_sortItem(o)}},e.prototype.$_sort=function(t,e,i,o){var n,a=this._sortFields[e],l=this._sortDirections[e],h=this.dataSource,u=this._sortCases[e]==s.INSENSITIVE;if(this._sorter.run(t,a,l,u,i,o,e+1==this._sortFields.length),n=h.getField(a).dataType==r.TEXT&&u?h.equalTexts.bind(h):h.equalValues.bind(h),e+1<this._sortFields.length){for(var c=i,d=c;c<o;)c++,n(a,t.getItem(c).row,t.getItem(c-1).row)||(this.$_sort(t,e+1,d,c-1),d=c);d<o&&this.$_sort(t,e+1,d,o)}},e.prototype.$_buildTree=function(t,e){void 0===t&&(t=!1);var i=this.dataSource;this._rootItem._dataRow=i.rootRow,this._itemMap[this._rootItem._dataRow.rowId]=this._rootItem,this.$_buildItems(this._rootItem,t,e),this.$_clearSummary();for(var o=i.fieldCount,r=this._sortFields,n=this._sortDirections,s=this._sortCases,a=r.length;a--;)(r[a]<0||r[a]>=o)&&(r.splice(a,1),n.splice(a,1),s.splice(a,1));this.sorted&&this._rootItem.count>0&&this.$_sortItem(this._rootItem),this.$_resetVisibleItems(),this._checkableTag&&this._checkableTag.setRows()},e.prototype.$_resetSummary=function(){this._summaryMap=[]},e.prototype.$_resetGroupSummary=function(){},e.prototype.$_clearSummary=function(){if(this._summaryMap)for(var t=this._summaryMap.length;t--;)this._summaryMap[t]&&this._summaryMap[t].clear()},e.prototype.$_getSummary=function(t){var e=this._summaryMap[t];if(!e){var i=this.dataSource;i&&i.canSummarize(t)&&(e=new Xi(t),this._summaryMap[t]=e)}return e&&0==e.count&&this.itemCount>0&&this.$_summarize(e),e},e.prototype.$_summarize=function(t){var e=this.dataSource;if(e)if(this._filtered||this.hideDeleted||e.hiddenCount>0){for(var i=this._rootItem.getDescendants(!1),o=i.length,r=[],n=0;n<o;n++){var s=i[n];s instanceof Dr&&!e.isHiddenRow(s.rowId)&&r.push(s.row)}t.count=r.length,e.summarizeRange(t,r,this.summaryMode==_.STATISTICAL)}else t.count=e.rowCount,e.summarize(t,this.summaryMode==_.STATISTICAL)},e.prototype._fireItemChanged=function(t){this._eventLock<=0&&this.fireEvent(e.ITEM_CHANGED,t)},e.prototype._fireExpanding=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(e.EXPANDING,t)},e.prototype._fireExpanded=function(t){this._eventLock<=0&&this.fireEvent(e.EXPANDED,t)},e.prototype._fireCollapsing=function(t){return!(this._eventLock<=0)||this.fireConfirmEvent(e.COLLAPSING,t)},e.prototype._fireCollapsed=function(t){this._eventLock<=0&&this.fireEvent(e.COLLAPSED,t)},e.prototype._fireParentChanging=function(t,i,o){return!(this._eventLock<=0)||this.fireConfirmEvent(e.PARENT_CHANGING,t,i,o)},e.prototype._fireParentChanged=function(t,i,o){this._eventLock<=0&&this.fireEvent(e.PARENT_CHANGED,t,i,o)},e.prototype._refreshItems=function(){this.$_clearItems(),this.$_buildTree(),this._fireRefresh()},e.prototype._saveAndRefresh=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),t&&this.$_saveExpanded(this._rootItem);var i={};this.hasFilters()&&function t(e,i){i[e.dataId]=!0,e.children.length>0&&e.children.forEach((function(e){t(e,i)}))}(this._rootItem,i),this.$_clearItems(),this.$_buildTree(t,i),e&&this._fireRefresh()},e.prototype.onDataSourceCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},e.prototype.onTreeDataProviderDisposed=function(t){this.$_clearItems(),this.$_resetSummary(),this._fireReset(),this.dataSource=null},e.prototype.onTreeDataProviderReset=function(t){this.$_clearItems(),this.$_resetSummary(),this.$_buildTree(),this._fireReset()},e.prototype.onTreeDataProviderRefresh=function(t){this._refreshItems()},e.prototype.onTreeDataProviderRefreshClient=function(t){this._fireRefreshClient()},e.prototype.onDataProvderCleared=function(t){this._refreshItems()},e.prototype.onTreeDataProviderRowCountChanged=function(t,e){},e.prototype.onTreeDataProviderRowAdding=function(t,e,i){return!0},e.prototype.onTreeDataProviderRowAdded=function(t,e){var i=this._itemMap[e.parent.rowId];if(i){var o=this.$_internalAddItem(i,e,!0);o?(this.$_buildItems(o),this.$_clearSummary(),i.expanded?this._expandItem(i,!0,!1,0,!1):this._fireItemChanged(i)):this.$_resetVisibleItems()}this._checkableTag&&(this._checkableTag.addRow(e,!1),e.parent.level>0&&this._checkableTag.addRow(e.parent,!1)),this.$_needSort()&&this._saveAndRefresh()},e.prototype.onTreeDataProviderRowsAdded=function(t,e,i){var o,r=this._itemMap[e.rowId];if(r&&i&&(o=i.length)>0){for(var n=0;n<o;n++){var s=i[n],a=this.$_internalAddItem(r,s,!0);a&&this.$_buildItems(a)}this.$_clearSummary(),r.expanded?this._expandItem(r,!0,!1,0,!1):this._fireItemChanged(r),this._checkableTag&&(this._checkableTag.addRows(i),e.level>0&&this._checkableTag.addRow(e))}this.$_needSort()&&this._saveAndRefresh()},e.prototype.onTreeDataProviderRowRemoving=function(t,e){return!0},e.prototype.onTreeDataProviderRowRemoved=function(t,e){var i=this._itemMap[e.rowId];if(i){var o=i.parent;this.$_internalRemoveItem(i),this.$_clearSummary(),o.expanded&&o.visible&&(this._visibleItems.remove(i),this._fireRefresh())}},e.prototype.onTreeDataProviderRowsRemoving=function(t,e){return!0},e.prototype.onTreeDataProviderRowsRemoved=function(t,e){for(var i=e.length,o=!1,r=0;r<i;r++){var n=e[r],s=this._itemMap[n.rowId];if(s){var a=s.parent;this.$_internalRemoveItem(s),a.expanded&&a.visible&&(this._visibleItems.remove(s),o=!0)}}this.$_clearSummary(),o&&this._fireRefresh()},e.prototype.onTreeDataProviderRowUpdating=function(t,e){return!0},e.prototype.onTreeDataProviderRowUpdated=function(t,e){if(this.$_needSort())this._saveAndRefresh();else{var i=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(i)}this._checkableTag&&this._checkableTag.updateRow(e)},e.prototype.onTreeDataProviderRowsUpdating=function(t,e){return!0},e.prototype.onTreeDataProviderRowsUpdated=function(t,e){this.$_needSort()?this._saveAndRefresh():(this.$_clearSummary(),this._fireRefresh()),this._checkableTag&&this._checkableTag.updateRows(e)},e.prototype.onTreeDataProviderValueChanging=function(t,e,i){return!0},e.prototype.onTreeDataProviderValueChanged=function(t,e,i){if(this.$_needSort())this._saveAndRefresh();else{var o=this._itemMap[e.rowId];this.$_clearSummary(),this._fireItemUpdated(o)}this._checkableTag&&this._checkableTag.updateRow(e)},e.prototype.onTreeDataProviderIconIndexChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.visible&&this._fireItemChanged(i)},e.prototype.onTreeDataProviderHasChildrenChanged=function(t,e){var i=this._itemMap[e.rowId];i&&i.visible&&this._fireItemChanged(i)},e.prototype.onTreeDataProviderRowStateChanged=function(t,e,i){var o=this._itemMap[e.rowId];this.$_internalRowStateChanged(o,i),this._checkableTag&&this._checkableTag.updateRow(e),!o&&i&&this._saveAndRefresh()},e.prototype.onTreeDataProviderRowStatesChanged=function(t,e){var i=e.length,o=!1;if(1==i){var r=e[0];o=!(l=this._itemMap[r.rowId]),this.$_internalRowStateChanged(l),this._checkableTag&&this._checkableTag.updateRow(r),o&&this._saveAndRefresh()}else if(i>0){var n=!1;if(this.hideDeleted)for(var s=0,a=e.length;s<a;s++){var l=this._itemMap[e[s].rowId];if(o=o||!l,l&&ht(l.rowState)){var h=l.parent;this.$_internalRemoveItem(l),h.expanded&&h.visible&&this._visibleItems.remove(l),n=!0}}this._checkableTag&&this._checkableTag.changeStates(e),n&&this.$_clearSummary(),o?this._saveAndRefresh():this._fireRefresh()}},e.prototype.onTreeDataProviderRowSiblingMoved=function(t,e,i){if(!this.$_needSort()){var o=this._itemMap[e.rowId];if(o)o.parent.moveChild(o.childIndex,i),this.$_resetVisibleItems(),this._fireRefresh()}},e.prototype.onTreeDataProviderRowsSiblingMoved=function(t,e,i){if(!this.$_needSort()){var o=this._itemMap[e[0].rowId];if(o)o.parent.moveChildren(o.childIndex,e.length,i),this.$_resetVisibleItems(),this._fireRefresh()}},e.prototype.onTreeDataProviderRowParentChanged=function(t,e,i,o){var r=this._itemMap[e.rowId];if(r){var n=this._itemMap[i.rowId];this.$_needSort()&&(o=n?n.count():0),r.changeParent(n,o),this.$_resetVisibleItems(),this._fireRefresh()}},e.prototype.onTreeDataProviderRowsParentChanged=function(t,e,i,o){var r=this._itemMap[e[0].rowId];if(r){var n=this._itemMap[i.rowId];this.$_needSort()&&(o=n?n.count():0);for(var s=0;s<e.length;s++){var a=e[s];(r=this._itemMap[a.rowId]).changeParent(n,o+s)}this.$_resetVisibleItems(),this._fireRefresh()}},e.prototype.onTreeDataProviderRowsHideChanged=function(t,e,i){if(i){for(var o=!1,r=0,n=e.length;r<n;r++){var s=e[r],a=this._itemMap[s];if(a){var l=a.parent;this.$_internalRemoveItem(a),l.expanded&&l.visible&&this._visibleItems.remove(a),o=!0}}o&&this.$_clearSummary(),this._fireRefresh()}else this._saveAndRefresh()},e.prototype.onTreeDataProviderDataLoadComplated=function(){this._fireDataLoadComplated()},e.ITEM_CHANGED="onTreeItemProviderItemChanged",e.EXPANDING="onTreeItemProviderExpanding",e.EXPANDED="onTreeItemProviderExpanded",e.COLLAPSING="onTreeItemProviderCollapsing",e.COLLAPSED="onTreeItemProviderCollapsed",e.PARENT_CHANGING="onTreeItemProviderParentChanging",e.PARENT_CHANGED="onTreeItemProviderParentChanged",e}(ao),Mr=function(t){function e(e){var i=t.call(this)||this;return i._rs=e,i}return o(e,t),e.prototype.getCount=function(t){return this._rs.itemCount},e.prototype.getSum=function(t){return this._rs.getSum(t)},e.prototype.getMax=function(t){return this._rs.getMax(t)},e.prototype.getMin=function(t){return this._rs.getMin(t)},e.prototype.getAvg=function(t){return this._rs.getAvg(t)},e.prototype.getVar=function(t){return this._rs.getVar(t)},e.prototype.getVarp=function(t){return this._rs.getVarp(t)},e.prototype.getStdev=function(t){return this._rs.getStdev(t)},e.prototype.getStdevp=function(t){return this._rs.getStdevp(t)},e.prototype.getDataCount=function(t){return this._rs.getDataCount(t)},e.prototype.getDataAvg=function(t){return this._rs.getDataAvg(t)},e}(ft),Lr=function(t){function e(e,i,o){var r=t.call(this,i&&i.row)||this;return r._values=[],r._changeValues=[],r._started=!1,r._checkDiff=!1,r._strictDiff=!1,r._invalidFields=[],r._rs=e,r._target=i,r._state=o,r}return o(e,t),e.prototype.dispose=function(){this._values=null,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"values",{get:function(){return this._values.concat()},set:function(t){var e=this.dataSource,i=e.fieldCount;if(t){i=Math.min(i,t.length);for(var o=0;o<i;o++){var r=e.getField(o),n=this._values[o],s=r.readValue(t[o]);this._values[o]=s,this._started&&parent&&!r.equalValues(n,s)&&this._rs._editItemCellUpdated(this,o,n,s)}}else this._values=[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalidFields",{get:function(){return this._invalidFields},enumerable:!0,configurable:!0}),e.prototype.beginEdit=function(t,e){this._started=!0,this._checkDiff=t,this._strictDiff=e},e.prototype.setValue=function(t,e){var i=this.dataSource;if(t<0&&t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),r=this._values[t];e=o.readValue(e),this._values[t]=e,this._started&&this.parent&&!o.equalValues(r,e)&&this._rs._editItemCellUpdated(this,t,r,e)},Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._rs.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemState",{get:function(){return this._state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowState",{get:function(){return this._target?this._target.rowState:at.NONE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanded",{get:function(){return!!this._target&&this._target.expanded},enumerable:!0,configurable:!0}),e.prototype.getData=function(t){var e=this.dataSource;if((t=e.getFieldIndex(t))<0||t>=e.fieldCount)throw new RangeError("field index is out of bounds: "+t);return this._values[t]},e.prototype.setData=function(t,e){var i=this.dataSource;if((t=i.getFieldIndex(t))<0||t>=i.fieldCount)throw new RangeError("field index is out of bounds: "+t);var o=i.getField(t),r=this._values[t];e=o.readValue(e);var n=!this._checkDiff;n||(n=this._strictDiff?!o.equalValues(r,e):!o.sameValues(r,e)),n&&(this._values[t]=e,this._changeValues[t]=!0,this.parent&&(this._rs._editItemCellUpdated(this,t,r,e),this._rs._editItemCellEdited(this,t)))},e.prototype.getRowData=function(){return this._values.concat()},e.prototype.getRowObject=function(){var t=this.dataSource;if(t){for(var e={},i=0,o=t.fieldCount;i<o;i++){e[t.getOrgFieldName(i)]=this._values[i]}return e}return null},e.prototype.isEdited=function(t){return this._changeValues[t]},Object.defineProperty(e.prototype,"provider",{get:function(){return this._rs&&this._rs.source},enumerable:!0,configurable:!0}),e}(Dr),Fr=function(t){function e(e){var i=t.call(this,null,e)||this;return i._observers=[],i._appending=!1,i._insertAfter=!1,i._insertIndex=-1,i._rs=new Tr,i.source=i._rs,i._summarizer=new Mr(i._rs),i}return o(e,t),e.prototype._doDispose=function(){this._rs=null,this._summarizer=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"summarizer",{get:function(){return this._summarizer},enumerable:!0,configurable:!0}),e.prototype.getLevels=function(t){return this._rs.getLevels(t)},e.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},e.prototype.orderBy=function(t,e,i){this._rs.orderBy(t,e,i)},e.prototype.getSortFields=function(){return this._rs.getSortFields()},e.prototype.getSortDirections=function(){return this._rs.getSortDirections()},e.prototype.getSortCases=function(){return this._rs.getSortCases()},Object.defineProperty(e.prototype,"labelComparer",{get:function(){return this._rs.labelComparer},set:function(t){this._rs.labelComparer=t},enumerable:!0,configurable:!0}),e.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},e.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},e.prototype.removeFilter=function(t,e){this._rs.removeFilter(t,e)},e.prototype.clearFilters=function(t){this._rs.clearFilters(t)},e.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},e.prototype.beginFiltering=function(){this._rs.beginFiltering()},e.prototype.endFiltering=function(t,e){this._rs.endFiltering(!0,t,e)},Object.defineProperty(e.prototype,"includeParentItem",{set:function(t){this._rs.includeParentItem=t},enumerable:!0,configurable:!0}),e.prototype.expand=function(t,e,i,o){this._rs.expand(t,e,i,o)},e.prototype.collapse=function(t,e){this._rs.collapse(t,e)},e.prototype.expandAll=function(t){this._rs.expandAll(t)},e.prototype.collapseAll=function(){this._rs.collapseAll()},e.prototype.getCheckedRows=function(){return this._rs.getCheckedRows()},e.prototype.getCheckedRowIds=function(){return this._rs.getCheckedRowIds()},Object.defineProperty(e.prototype,"checkableExpression",{set:function(t){this._rs.checkableExpression=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkableCallback",{set:function(t){this._rs.checkableCallback=t},enumerable:!0,configurable:!0}),e.prototype.resetCheckables=function(){this._rs.resetCheckables()},e.prototype.applyCheckables=function(){this._rs.applyCheckables()},e.prototype.getAllItems=function(){return this._rs.getAllItems()},e.prototype.getItem=function(t){return this._rs.getItem(t)},e.prototype.getItemOfRow=function(t){return this._rs.getItemOfRow(t)},e.prototype.findItem=function(t,e,i,o,r){return this._rs.findItem(t,e,i,o,r)},e.prototype.findCell=function(t,e,i,o,r,n){return this._rs.findCell(t,e,i,o,r,n)},e.prototype.checkItem=function(t,e,i,o){this._rs.checkItem(t,e,i,o)},e.prototype.checkAll=function(t,e,i,o){this._rs.checkAll(t,e,i,o)},e.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},e.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(e.prototype,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupSummaryMode",{set:function(t){this._rs.groupSummaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCount",{get:function(){return this._rs.itemCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._rs.rowCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorted",{get:function(){return this._rs.sorted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return this._rs.movable},enumerable:!0,configurable:!0}),e.prototype.getItems=function(t,e){throw new Error("Method not implemented.")},e.prototype.canAppend=function(){return!1},e.prototype.canInsert=function(t){return!!t},e.prototype.canDelete=function(t){return!!t},e.prototype.$_replaceItem=function(t,e){t.parent.setItem(t,e),this._rs._setItem(t,e)},e.prototype._doBeginUpdate=function(t){return this._editingItem=this._editItem=this._createEditItem(t,wi.UPDATING,null),this.$_replaceItem(t,this._editItem),this._editItem},e.prototype._doBeginAppend=function(t){return this._editingItem=this._editItem=this._createEditItem(null,wi.APPENDING,t),this._editItem},e.prototype._doBeginInsert=function(t,e,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=!1),o)this._appending=!0,t.setExpanded(!0,!1,!1),this._editingItem=this._editItem=this._createEditItem(null,wi.INSERTING,e),this._rs.appendItem(t,this._editItem);else{var r=t.parent;this._appending=!1,this._insertAfter=i,this._insertIndex=r.indexOf(t),this._editingItem=this._editItem=this._createEditItem(t,wi.INSERTING,e),this._rs.insertItem(r,this._editItem,this._insertIndex,this._insertAfter)}return this._editItem},e.prototype._doCompleteUpdate=function(t){var e=!1;if(this.dataSource){this.$_replaceItem(this._editItem,t);var i=this._editItem.row;try{e=i.update(this._editItem.values,!1)}catch(e){throw this.$_replaceItem(t,this._editItem),e}e||this.$_replaceItem(t,this._editItem)}return e},e.prototype._doCompleteInsert=function(t){var e=this.dataSource,i=!1;if(e){var o=this._editItem.parent,r=o.row,n=e.createRow(this._editItem.values,-1,!1),s=this._editItem.parent.indexOf(this._editItem);this._rs.removeItem(this._editItem);try{i=this.isAppending?r.addChild(n,!1):r.insertChild(s,n,!1)}catch(t){throw this._appending?this._rs.appendItem(o,this._editItem):this._rs.insertItem(o,this._editItem,this._insertIndex,this._insertAfter),t}if(i){var a=o.itemOfRow(n.rowId);this._editItem.setCheckable(a.checkable),this._copyExtents(this._editItem,a)}else this._appending?this._rs.appendItem(o,this._editItem):this._rs.insertItem(o,this._editItem,this._insertIndex,this._insertAfter)}return i},e.prototype._doCancelEdit=function(e,i){e==wi.UPDATING?(this.$_replaceItem(this._editItem,i),this._copyExtents(this._editItem,i)):e==wi.INSERTING&&this._editItem.parent&&this._rs.removeItem(this._editItem),t.prototype._doCancelEdit.call(this,e,i)},e.prototype._doCommitEdit=function(e,i){return e==wi.UPDATING||wi.INSERTING,t.prototype._doCommitEdit.call(this,e,i)},e.prototype.remove=function(t){if(t){var e=t.row;e&&e.parent.removeChild(e)}},e.prototype.getRemovableRows=function(t){if(t.length>0){for(var e=[],i=0,o=t.length;i<o;i++){var r=this._rs.getItem(t[i]);e.push(r.dataId)}return e}},e.prototype.removeRows=function(t){t&&this.dataSource.removeRows(t)},e.prototype.setDataSource=function(t){this._rs.dataSource=t},Object.defineProperty(e.prototype,"rootItem",{get:function(){return this._rs._rootItem},enumerable:!0,configurable:!0}),e.prototype._createEditItem=function(t,e,i){this._editingItem=null;var o=this.dataSource;if(!o)return null;var r=o.fieldCount;switch(e){case wi.UPDATING:this._editingItem=new Lr(this,t,e);for(var n=0;n<r;n++)this._editingItem.setValue(n,t.getData(n));this._copyExtents(t,this._editingItem);break;case wi.INSERTING:case wi.APPENDING:if(this._editingItem=new Lr(this,null,e),this._editingItem._setExtents(0),i)for(n=0;n<r;n++)i.length>n&&this._editingItem.setValue(n,i[n])}return this._editingItem},e.prototype.onItemProviderFilterAdd=function(t,e,i){},e.prototype.onItemProviderFilterRemove=function(t,e,i){},e.prototype.onItemProviderFilterClear=function(t,e){},e.prototype.onItemProviderFilterClearAll=function(t){},e.prototype.onItemProviderFilterAdded=function(t,e,i){this._fireFilterAdded(e,i)},e.prototype.onItemProviderFilterRemoved=function(t,e,i){this._fireFilterRemoved(e,i)},e.prototype.onItemProviderFilterCleared=function(t,e){this._fireFilterCleared(e)},e.prototype.onItemProviderFilterAllCleared=function(t){this._fireFilterAllCleared()},e.prototype.onItemProviderFiltered=function(t,e,i){this._fireFiltered(e,i)},e.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},e.prototype.onItemProviderSorted=function(t){this._fireSorted()},e.prototype.onItemProviderDataLoadComplated=function(){this._fireDataLoadComplated()},e.prototype.onTreeItemProviderItemChanged=function(t,e){this._eventLock<=0&&this.fireEvent(Tr.ITEM_CHANGED,e)},e.prototype.onTreeItemProviderExpanding=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(Tr.EXPANDING,e)},e.prototype.onTreeItemProviderExpanded=function(t,e){this._eventLock<=0&&this.fireEvent(Tr.EXPANDED,e)},e.prototype.onTreeItemProviderCollapsing=function(t,e){return!(this._eventLock<=0)||this.fireConfirmEvent(Tr.COLLAPSING,e)},e.prototype.onTreeItemProviderCollapsed=function(t,e){this._eventLock<=0&&this.fireEvent(Tr.COLLAPSED,e)},e}(co),Nr=function(t){function e(i){var o=t.call(this,i)||this;return Object.setPrototypeOf(o,e.prototype),o}return o(e,t),e}(Error),Vr=function(t){function e(i,o,r,n){var s=t.call(this,o)||this;return Object.setPrototypeOf(s,e.prototype),s.level=i,s.column=r,s.userMessage=n,s}return o(e,t),e.prototype.toString=function(){return"Validation failed["+this.level.toUpperCase()+"]: "+this.message},e}(Nr),Br=function(t){function e(e){var i=t.call(this)||this;return i._active=!0,i._mode=d.ALWAYS,i._level=p.ERROR,i._name=e,i}return o(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},set:function(t){this._active=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mode",{get:function(){return this._mode},set:function(t){this._mode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"criteria",{get:function(){return this._criteria},set:function(t){t!=this._criteria&&(this._criteria=t,this._exprNode=t?ee.Default.parse(t,e.CAPITAL_INDEXERS):null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(t){this._description=t},enumerable:!0,configurable:!0}),e.prototype.validate=function(t){if(this._exprNode&&!this._exprNode.evaluate(t)){var e=this._message||this._description||this._name||this._criteria;throw new Vr(this._level,e,null,this._message)}},e.prototype.doAssignSimple=function(t){if("string"==typeof t)return this.criteria=t,!0},e.CAPITAL_INDEXERS=["value","values"],e}(ft),$r=function(t){function e(e){var i=t.call(this)||this;return i._items=[],i._isColumn=e,i}return o(e,t),e.prototype._doDispose=function(){this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items.slice()},set:function(t){this.assignFrom(t)},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._items=[]},e.prototype.addAll=function(t){if(t&&t.length>0)for(var e=0,i=t.length;e<i;e++)this._items.push(t[e])},e.prototype.validate=function(t,e,i,o){for(var r=0;r<this._items.length;r++){var n=this._items[r];if(n.active&&(n.mode==t||n.mode==d.ALWAYS))try{n.validate(e)}catch(t){if(!(i=i&&!this._isColumn)||F(n.level,o)<0)throw t instanceof Vr?(t.level=n.level,t):new Vr(n.level,t)}}},e.prototype.assignFrom=function(t){if(t!==this&&(this.clear(),t)){lt.isArray(t)||(t=[t]);for(var e=0,i=t.length;e<i;e++){var o=new Br;o.assignFrom(t[e]),this._items.push(o)}}},e}(ft),Ar=function(t){function e(){var e=t.call(this)||this;return e._item=null,e._dataSource=null,e._fieldCount=0,e}return o(e,t),e.prototype._doDispose=function(){this._item=null,this._dataSource=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t,this._dataSource=this._item.dataSource,this._fieldCount=this._dataSource?this._dataSource.fieldCount:0},enumerable:!0,configurable:!0}),e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_ROW:return this._item.index;case e.ID_DATAROW:return this._item.dataRow;case e.ID_CHECKED:return this._item.checked}throw new yt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(i<0||i>=this._fieldCount)throw new yt("Data field index out of bounds:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._item.getData(i)}throw new yt("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,o){var r=o?this._dataSource.getFieldIndexC(i):this._dataSource.getFieldIndex(i);if(r<0||r>=this._fieldCount)throw new yt("Data field is not exists:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._item.getData(r)}throw new yt("Invalid identifier indexer: "+t)},e.ID_ROW=0,e.ID_DATAROW=1,e.ID_CHECKED=2,e.ID_VALUE=3,e.ID_VALUES=4,e.IDENTS={row:e.ID_ROW,datarow:e.ID_DATAROW,checked:e.ID_CHECKED,value:e.ID_VALUE,values:e.ID_VALUES},e}(It),jr=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){this._index=null,this._dataSource=null,t.prototype._doDispose.call(this)},e.prototype.setIndex=function(t){this._index=t,this._value=this._index.item.getData(this._index.dataColumn.dataIndex),this._dataSource=this._index.item.dataSource},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._value;case e.ID_ROW:return this._index.itemIndex;case e.ID_DATAROW:return this._index.item.dataRow;case e.ID_INDEX:return this._index.column.index;case e.ID_FIELD:return this._index.dataColumn.dataIndex;case e.ID_CHECKED:var i=this._index.item;return!!i&&i.checked;case e.ID_TAG:return this._index.column.tag;case e.ID_BASE:var o=this._index.dataColumn.baseIndex;return o>=0?this._index.item.getData(o):void 0}throw new yt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){var o=this._dataSource.fieldCount;if(i<0||i>=o)throw new yt("Data field index out of bounds:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._index.item.getData(i)}throw new yt("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,o){var r=o?this._dataSource.getFieldIndexC(i):this._dataSource.getFieldIndex(i),n=this._dataSource.fieldCount;if(r<0||r>=n)throw new yt("Data field is not exists:"+i);switch(t){case e.ID_VALUE:case e.ID_VALUES:return this._index.item.getData(r)}throw new yt("Invalid identifier indexer: "+t)},e.ID_VALUE=0,e.ID_ROW=1,e.ID_DATAROW=2,e.ID_INDEX=3,e.ID_FIELD=4,e.ID_CHECKED=5,e.ID_TAG=6,e.ID_BASE=7,e.ID_VALUES=8,e.IDENTS={value:e.ID_VALUE,row:e.ID_ROW,datarow:e.ID_DATAROW,index:e.ID_INDEX,field:e.ID_FIELD,checked:e.ID_CHECKED,tag:e.ID_TAG,base:e.ID_BASE,values:e.ID_VALUES},e}(It),Hr=function(t){function e(e){var i=t.call(this)||this;return i._cellList={},i._owner=e,i}return o(e,t),Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellList",{get:function(){return this._cellList},enumerable:!0,configurable:!0}),e.prototype.validateCell=function(t,e,i){this.$_validateCell(t,e,!0,this._owner.editOptions.commitLevel,i)},e.prototype.validateRow=function(t,e,i,o){var r=this._owner.editOptions.commitLevel;if(!i)for(var n=this._owner.getDataColumns(),s=0,a=n.length;s<a;s++){var l=n[s],h=Hn.temp(this._owner,t.index,l);try{this.$_validateCell(h,e,!0,r,o)}catch(t){if(!(t instanceof Vr))throw t;if(F(t.level,r)<0)throw t;!o&&this.addInvalidateCell(h,t)}}var u=this._owner.validations;if(u&&u.count>0){var c=this._owner.rowValidationRuntime;c.item=t,u.validate(e?d.INSERT:d.UPDATE,c,!0,r)}this.owner._fireValidateRow(t,e,t.getRowObject())},e.prototype.clearInvalidCells=function(t){this.$_clearInvalidateList(t)},e.prototype.clearInvalidCell=function(t){this.$_clearInvalidateCell(t)},e.prototype.getError=function(t){return t.item?(this._cellList[Ji(t.item.itemState)?-1:t.dataId]||{})[t.dataField]:null},e.prototype.cloneError=function(t,e){var i=this._cellList;i[t]&&(i[e]=JSON.parse(JSON.stringify(i[t])))},e.prototype.addInvalidateCell=function(t,e){this.$_addInvalidateCell(t,e)},e.prototype.getInvalidCells=function(){var t=[],e=this._cellList;for(var i in e){var o=e[i];for(var r in o){var n=o[r];t.push({column:n.column,dataRow:n.dataRow,message:n.message,level:n.level})}}return t.length>0?t:null},e.prototype.validateCells=function(t,e){var i=this._owner,o=i.getDataColumns(),r=[];if(t=lt.makeArray(t))for(var n=0,s=t.length;n<s;n++){(l=i.getItem(t[n]))&&l.isDataRow&&(delete this._cellList[l.dataId],r.push(l))}else{if(e)for(n=0,s=i.itemCount;n<s;n++){(l=i.getItem(n))&&l.isDataRow&&(delete this._cellList[l.dataId],r.push(l))}else r=i.getAllItems();this._cellList={}}n=0;for(var a=r.length;n<a;n++){var l;if((l=r[n]).isDataRow){var h=0;for(s=o.length;h<s;h++){var u=o[h],c=(u.dataIndex,Wn.tempItem(i,l,u));try{this.$_validateCell(c,!1,!1,p.IGNORE,!1)}catch(t){}}}}return i.refreshView(),this.getInvalidCells()},e.prototype.clearInvalidateList=function(){this.$_clearInvalidateList()},e.prototype.checkRowIds=function(){var t=this.owner.dataSource;for(var e in this._cellList){var i=parseInt(e);t.getDataRow(i)<0&&delete this._cellList[i]}},e.prototype.$_validateCell=function(t,e,i,o,r){var n=t.dataColumn;if(n){var s=this.owner.editOptions.validateOnlyEditColumn,a=!0;if((t.item instanceof uo||t.item instanceof Lr)&&(a=t.item.isEdited(n.dataIndex)),!s||a||n.required)try{var l=t.item.getData(n.dataIndex);if(n.required){var h=n.grid,u=h&&h.dataSource&&h.dataSource.getField(n.dataIndex);if(u&&u.isEmpty(l)){var c=n.requiredLevel||p.ERROR,_=n.requiredMessage||"Value is required: "+n.fieldName;throw new Vr(c,_,n,n.requiredMessage)}}var f=n.validations;if(f&&f.count>0){var g=this._owner.columnValidationRuntime;g.setIndex(t),f.validate(e?d.INSERT:d.UPDATE,g,i,o)}this.owner._fireValidateCell(t,e,t.item.getData(t.dataField)),!r&&this.$_clearInvalidateCell(t)}catch(e){throw e instanceof Vr&&(e.column=n,!r&&this.$_addInvalidateCell(t,e)),e}}},e.prototype.$_addInvalidateCell=function(t,e){var i=Ji(t.item.itemState)?-1:t.dataId,o=t.dataColumn&&t.dataColumn.dataIndex;if(!(null==i||o<=-1)){var r=this._cellList;(r[i]=r[i]||{})[o]={dataRow:t.dataRow,message:e.message,userMessage:e.userMessage,level:e.level,column:t.dataColumn.name}}},e.prototype.$_clearInvalidateCell=function(t){var e=Ji(t.item.itemState)?-1:t.dataId,i=t.dataField,o=this._cellList[e];o&&o[i]&&delete o[i]},e.prototype.$_clearInvalidateList=function(t){null!=t?delete this._cellList[t]:this._cellList={},this._owner.refreshView()},e}(ft),Wr=/(.*)/,Gr=function(){function t(t){this._pattern=Wr,this._replace="$1",this.$_parse(this._format=t)}return t.getFormatter=function(e){var i=t.Formatters[e];return i||(t.Formatters[e]=i=new t(e)),i},Object.defineProperty(t.prototype,"format",{get:function(){return this._format},enumerable:!0,configurable:!0}),t.prototype.getText=function(t){return t&&t.replace(this._pattern,this._replace)},t.prototype.$_parse=function(t){if(t){var e=t.trim().split(lt.colonreg);if(e.length>1){var i=e[0].trim(),o=e[1].trim();i&&o&&('"'==i.charAt(0)&&(i=i.substr(1,i.length-2)),i&&('"'==o.charAt(0)&&(o=i.substr(1,o.length-2)),o&&(this._pattern=new RegExp(i,e[2]||""),this._replace=o)))}}},t.Formatters={},t}(),Ur=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.getShadowRow=function(){var t=this.parent.firstDataItem;return t?t.dataRow:-1},e}(no),zr=function(t){function e(e,i){var o=t.call(this,i)||this;return o._level=0,o._level=e,o}return o(e,t),Object.defineProperty(e.prototype,"groupLevel",{get:function(){return this._level},enumerable:!0,configurable:!0}),e.prototype.getShadowRow=function(){var t=this.firstDataItem;return t?t.dataRow:-1},Object.defineProperty(e.prototype,"merged",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(ro),Yr=function(t){function e(e){var i=t.call(this)||this;return i._fixedCount=0,i._items=[],i._list=[],i._rowCount=NaN,i._rs=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"provider",{get:function(){return this._rs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedCount",{get:function(){return this._fixedCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){if(isNaN(this._rowCount)){for(var t=this._items,e=0,i=t.length-1;i>=0;i--)t[i]instanceof io&&e++;this._rowCount=e}return this._rowCount},enumerable:!0,configurable:!0}),e.prototype.getItem=function(t){return this._items[t]},e.prototype.clear=function(t){void 0===t&&(t=null);for(var e=this._rs,i=0,o=(t=t||this._items).length;i<o;i++){var r=t[i];r._parent=e._rootItem,r._index=-1,r instanceof ro&&r._children&&this.clear(r._children)}t.length=0,this.$_changed()},e.prototype.expand=function(t,e,i,o){return this.$_expandItem(t,e,i,o),this.$_changed(),!0},e.prototype.collapse=function(t,e){var i,o,r=this._rs,n=this._items;if(t._expanded=!1,r.mergeMode){if((a=t.index)>=0?(n.splice(a,1),t._index=-1):(a=this.$_firstIndex(t,r.expandedAdornments==u.SUMMARY,!0))<0&&(a=t.firstItem.index),a>=0)for(;a<n.length;){if(!(h=n[a]).isDescendantOf(t))break;if(n.splice(a,1),h._index=-1,e&&(h instanceof oo||h instanceof Ur))(c=h instanceof oo?h:h instanceof Ur&&h.parent._expanded?h.parent:null)&&(c._expanded=!1)}switch(i=t.footerCount,r.collapsedAdornments){case u.BOTH:t._index=a,n.splice(a++,0,t);for(var s=0;s<i;s++)n.splice(a+s,0,o=t.getFooter(s)),o._index=a+s;break;case u.FOOTER:case u.SUMMARY:if(i=t.footerCount)for(s=0;s<i;s++)n.splice(a+s,0,o=t.getFooter(s)),o._index=a+s;else if(i=t.allFooterCount)for(s=0;s<i;s++)n.splice(a+s,0,o=t._allFooters[s]),o._index=a+s;break;case u.HEADER:default:t._index=a,n.splice(a,0,t)}}else{var a=t.index;if(i=t.footerCount,a>=0)n.splice(a,1),t._index=-1;else if(a=this.$_firstIndex(t,r.expandedAdornments==u.SUMMARY,!1),t.footer){var l=t.footer.index;for(s=0;s<i;s++)n[l]._index=-1,n.splice(l,1)}else{l=t._allFooters[0].index;i=t.allFooterCount;for(s=0;s<i;s++)n[l]._index=-1,n.splice(l,1)}for(;a<n.length;){var h,c;if(!(h=n[a]).isDescendantOf(t))break;if(n.splice(a,1),h._index=-1,e&&(h instanceof oo||h instanceof no))(c=h instanceof oo?h:h instanceof no&&h.parent._expanded?h.parent:null)&&(c._expanded=!1)}switch(r.collapsedAdornments){case u.BOTH:t._index=a,n.splice(a++,0,t),i=t.footerCount;for(s=0;s<i;s++)(o=t.getFooter(s))._index=a+s,o._expandable=!1,n.splice(a+s,0,o);break;case u.FOOTER:case u.SUMMARY:if(i=t.footerCount)for(s=0;s<i;s++)(o=t.getFooter(s))._index=a+s,o._expandable=0===s,n.splice(a+s,0,o);else for(s=0;s<t.allFooterCount;s++)(o=t._allFooters[s])._index=a+s,o._expandable=0===s,n.splice(a+s,0,o);break;case u.HEADER:default:t._index=a,n.splice(a,0,t)}}return this.$_changed(),!0},e.prototype.getNext=function(t){return null!=t&&t.visible&&t.index<this.count-1?this._items[t.index+1]:null},e.prototype.getPrior=function(t){return null!=t&&t.visible&&t.index>0?this._items[t.index-1]:null},e.prototype.$_changed=function(){this._rowCount=NaN},e.prototype.$_collectChildren=function(t,e,i,o,r){var n,s,a=this._rs,l=a.expandedAdornments,h=a.collapsedAdornments;if(o&&t&&t._setExpanded(!0),a.mergeMode){if(!(t instanceof so))if(l==u.HEADER||l==u.BOTH)e.push(t);else if(l==u.SUMMARY)for(var c=0,d=t.footerCount;c<d;c++)n=t.getFooter(c),e.push(n);for(var p=0,_=t.count;p<_;p++){if((m=t.getItem(p))instanceof oo){var f=m;if(i&&(!r||f.level<=r)||f.expanded)this.$_collectChildren(f,e,i,o,r);else{var g=f.footerCount;switch(h){case u.BOTH:e.push(f);for(c=0;c<g;c++)n=f.getFooter(c),e.push(n);break;case u.SUMMARY:case u.FOOTER:if(g)for(c=0;c<g;c++)n=f.getFooter(c),e.push(n);else{g=f.allFooterCount;for(c=0;c<f.allFooterCount;c++)n=f._allFooters[c],e.push(n)}break;case u.HEADER:default:e.push(f)}}}else t.isFooter(m)||e.push(m)}if(!(t instanceof so)&&t.footer&&(l==u.FOOTER||l==u.BOTH))for(p=0,_=t.footerCount;p<_;p++)e.push(t.getFooter(p))}else{if(!(t instanceof so))if(l==u.SUMMARY){var y=t.footer;g=t.footerCount;if(y){c=t.indexOf(y);y._expandable=!0,e.push(y);for(p=1;p<g;p++)(y=t.getItem(c+p))._expandable=!1,e.push(y)}else{g=t.allFooterCount;for(p=0;p<g;p++)(y=t._allFooters[p])._expandable=0===p,e.push(y)}}else(a.indentVisible||((s=l)==u.BOTH||s==u.HEADER))&&e.push(t);for(p=0,_=t.count;p<_;p++){var m;if((m=t.getItem(p))instanceof oo){f=m;var b=void 0;g=void 0;if(i&&(!r||f.level<=r)||f.expanded)this.$_collectChildren(f,e,i,o,r);else switch(h){case u.HEADER:e.push(f);break;case u.FOOTER:case u.SUMMARY:if(b=f.footer){if(g=f.footerCount,b._expandable=!0,e.push(b),g>1){c=f.indexOf(b);for(var v=1;v<g;v++)(b=f.getItem(c+v))._expandable=!1,e.push(b)}}else{g=f.allFooterCount;for(var w=0;w<g;w++)(b=f._allFooters[w])._expandable=0===w,e.push(b)}break;case u.BOTH:default:if(e.push(f),(b=f.footer)&&(g=f.footerCount,b._expandable=!1,e.push(b),g>1)){c=f.indexOf(b);for(var C=1;C<g;C++)(b=f.getItem(c+C))._expandable=!1,e.push(b)}}}else m instanceof no||e.push(m)}if(!(t instanceof so||l!=u.BOTH&&(a.indentVisible||l!==u.FOOTER))){var x=!t._expanded&&!t.visible,I=t.footer;if(I){g=t.footerCount;if(I._expandable=x,e.push(I),g>1)for(c=t.indexOf(I),p=1;p<g;p++)(I=t.getItem(c+p))._expandable=!1,e.push(I)}}}},e.prototype.$_expandItem=function(t,e,i,o){var r;if(t instanceof so)r=this._fixedCount;else if(this._rs.mergeMode){switch(this._rs.collapsedAdornments){case u.BOTH:r=t.index,this._items.splice(r,1+t.footerCount);break;case u.FOOTER:case u.SUMMARY:var n=t.footer;n?(r=n.index,this._items.splice(r,t.footerCount)):t.allFooterCount>0&&(r=t._allFooters[0].index,this._items.splice(r,t.allFooterCount));break;case u.HEADER:default:r=t.index,this._items.splice(r,1)}i&&(t._index=-1)}else{switch(this._rs.collapsedAdornments){case u.BOTH:r=t.index,this._items.splice(r,1+t.footerCount);break;case u.FOOTER:case u.SUMMARY:t.footerCount>0?(r=t.footer.index,this._items.splice(r,t.footerCount)):t.allFooterCount>0&&(r=t._allFooters[0].index,this._items.splice(r,t.allFooterCount));break;case u.HEADER:default:r=t.index,this._items.splice(r,1)}i&&(t._index=-1)}this._list.splice(0,this._list.length),this.$_collectChildren(t,this._list,e,i,o);for(var s=this._list.length,a=0;a<s;a++)this._items.splice(r+a,0,this._list[a])},e.prototype.$_firstIndex=function(t,e,i){var o=t.index;if(o>=0)return o;for(var r=this._items,n=0,s=r.length;n<s;n++){var a=r[n];if(t.isDescendant(a))return a.index}return-1},e.prototype.$_clearAndInit=function(t,e){if(this.clear(),t){this._fixedCount=Math.min(e,t.itemCount);for(var i=0;i<this._fixedCount;i++)this._items.push(t.getItem(i))}else this._fixedCount=0},e.prototype.$_resetIndices=function(t){void 0===t&&(t=0);for(var e=t,i=this._items.length;e<i;e++)this._items[e]._index=e},e}(ft),qr=function(t,e){this.startIndex=t,this.endIndex=e,this.level=0,this.children=[]},Kr=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._expandedAdornments=u.BOTH,o._collapsedAdornments=u.HEADER,o._indentVisible=!0,o._expandWhenGrouping=!1,o._mergeMode=!1,o._summaryMode=_.AGGREGATE,o._groupSorting=!0,o._grouped=!1,o}return o(e,t),e.prototype._doDispose=function(){this._callbackOnwer=null,this._visibleItems=this._visibleItems.dispose(),t.prototype._doDispose.call(this)},e.prototype.groupfFooterCounterChanged=function(t){this.$_footerCounterChanged()},e.prototype.$_footerCounterChanged=function(){this._populateItems(),this._fireRefresh()},Object.defineProperty(e.prototype,"footerCounter",{get:function(){return this._footerCounter},set:function(t){t!=this._footerCounter&&(t&&t.setCounterAware(null),this._footerCounter=t,t&&t.setCounterAware(this),this.$_footerCounterChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this.grouped&&(this._populateItems(),this._fireRefresh()))},enumerable:!0,configurable:!0}),e.prototype.resetAdornments=function(t,e,i,o,r){t==this._expandedAdornments&&e==this._collapsedAdornments&&o===this._footerCallback&&this._indentVisible===r||(this._expandedAdornments=t,this._collapsedAdornments=e,this._callbackOnwer=i,this._footerCallback=o,this._indentVisible=r,this.grouped&&(this._populateItems(),this._fireRefresh()))},Object.defineProperty(e.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){this._expandWhenGrouping=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergeMode",{get:function(){return this._mergeMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summaryMode",{get:function(){return this._summaryMode},set:function(t){t!=this._summaryMode&&(this._summaryMode=t,this._populateItems(),this._fireRefresh())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grouped",{get:function(){return this._grouped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupCount",{get:function(){return this._groupFields?this._groupFields.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupSorting",{get:function(){return this._groupSorting},set:function(t){this._groupSorting!=t&&(this._groupSorting=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleRowCount",{get:function(){return this._visibleItems.rowCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indentVisible",{get:function(){return this._indentVisible},enumerable:!0,configurable:!0}),e.prototype.canGrouping=function(t){return this.fireGrouping(t)},e.prototype.groupBy=function(t){this.groupByMode(t,this._mergeMode)},e.prototype.groupByMode=function(t,e){this._mergeMode=e,this._groupFields=t?t.concat():null,e||this._clearDisplayLevels(),this._populateItems();try{this._fireRefresh()}finally{this.fireGrouped(t)}},e.prototype.isGroupedField=function(t){if(this._groupFields)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return!0;return!1},e.prototype.getGroupLevel=function(t){if(this._groupFields&&t>=0)for(var e=this._groupFields.length;e--;)if(this._groupFields[e]==t)return e+1;return 0},Object.defineProperty(e.prototype,"groupedFields",{get:function(){return this._groupFields?this._groupFields.concat():null},enumerable:!0,configurable:!0}),e.prototype.expand=function(t,e,i,o){if(t&&(!t.expanded||i)&&this.fireExpand(t)&&(t.expanded&&this._visibleItems.collapse(t,!1),this._visibleItems.expand(t,e,!0,o))){this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireExpanded(t)}}},e.prototype.$_collapseChild=function(t,e,i){for(var o=0,r=t.count;o<r;o++){var n=t.getItem(o);n instanceof ro&&(n._expanded=!1,this.$_collapseChild(n,e,i))}},e.prototype.collapse=function(t,e,i){if(t&&t.expanded){if(this.fireCollapse(t)&&this._visibleItems.collapse(t,e)){t.index>=0&&this._resetItemIndicies(t.index);try{this._fireRefresh()}finally{this.fireCollapsed(t)}}}else t&&e&&i&&this.$_collapseChild(t,e,i)},e.prototype.collapseAll=function(t){for(var e=0;e<this._rootItem.count;e++){var i=this._rootItem.getItem(e);i instanceof oo&&this.collapse(i,t,!0)}},e.prototype.expandAll=function(t,e){for(var i=0;i<this._rootItem.count;i++){var o=this._rootItem.getItem(i);o instanceof oo&&this.expand(o,t,!0,e)}},e.prototype.findItem=function(t,e,i,o,n){var s=this.dataSource;if(!s)return-1;var a=this.itemCount;if(a<1)return-1;var l=Math.min(t.length,e.length);if(l<1)return-1;var h=!i||i.allFields,u=i&&i.caseSensitive,c=i&&i.partialMatch,d=null,p=[];o=Math.max(0,o),n=Math.min(a-1,n);for(var _=0;_<l;_++)p[_]=s.getField(t[_]).dataType;var f=i.compareCallback;f="function"==typeof f?f:lt.compareTextValue;for(var g=o;g<=n;g++){var y=this.$_getItem(g),m=y.dataRow>=0;if(m)for(_=0;_<l;_++){var b=y.getData(t[_]);switch(p[_]){case r.DATETIME:case r.DATE:if(e[_]instanceof Date)m=f.call(s.handler,e[_],b,u,c);else{if(!d){var v=/[.]/.test(e[_])?"yyyy.MM.dd":/[/]/.test(e[_])?"yyyy/MM/dd":/[-]/.test(e[_])?"yyyy-MM-dd":"yyyyMMdd";d=new Ge(v)}m=f.call(s.handler,e[_],b?d.getText(b):b,u,c)}break;default:m=f.call(s.handler,e[_],b,u,c)}if(m&&!h)return g;if(!m&&h)break}if(m)return g}return-1},e.prototype.findCell=function(t,e,i,o,n,s){var a=this.dataSource;if(!a)return null;var l=this.itemCount;if(l<1)return null;var h=i&&i.caseSensitive,u=i&&i.partialMatch,c=this.dataSource.fieldCount,d=t.length,p=null,_=[],f=i.compareCallback;f="function"==typeof f?f:lt.compareTextValue;for(var g=0;g<c;g++)_[g]=a.getField(g).dataType;o=Math.max(0,o),n=Math.min(l-1,n),(s=Math.max(0,s))>=t.length&&(o++,s=0);for(var y=o;y<=n;y++){var m=this.$_getItem(y);if(m.dataRow>=0)for(g=y>o?0:s;g<d;g++){var b=t[g];if(b>=0&&b<c){var v=m.getData(b),w=!1;switch(_[b]){case r.DATETIME:case r.DATE:if(e instanceof Date)w=f(e,v,h,u);else{if(!p){var C=/[.]/.test(e)?"yyyy.MM.dd":/[/]/.test(e)?"yyyy/MM/dd":/[-]/.test(e)?"yyyy-MM-dd":"yyyyMMdd";p=new Ge(C)}w=f(e,v?p.getText(v):v,h,u)}break;default:w=f(e,v,h,u)}if(w)return{itemIndex:y,fieldIndex:b,searchFieldIndex:g}}}}return null},e.prototype.getGroupItem=function(t){return function e(i){for(var o=0,r=i.children.length;o<r;o++){var n=i.children[o];if(n.id===t)return n;if(n instanceof ro){var s=e(n);if(s)return s}}}(this._rootItem)},Object.defineProperty(e.prototype,"itemCount",{get:function(){return this._grouped?this._visibleItems.count:this.source.itemCount},enumerable:!0,configurable:!0}),e.prototype.getItem=function(t,e){return this.grouped&&!e?t>=0&&t<this._visibleItems.count?this._visibleItems.getItem(t):null:this.source.getItem(t,e)},e.prototype.getItems=function(t,e){if(this.grouped){for(var i=this._visibleItems,o=[],r=Math.min(i.count,t+e-1),n=t;n<r;n++){var s=i.getItem(n);o.push(s)}return o}return this.source.getItems(t,e)},e.prototype.getAllItems=function(){if(this.grouped){var t=new Yr(this);return t.expand(this.rootItem,!0,!1,0),t.items}return this.source?this.source.getAllItems():null},e.prototype.getIndexOfRow=function(t){if(this.grouped){for(var e=this._visibleItems,i=0,o=e.count;i<o;i++)if(e.getItem(i).dataRow==t)return i;return-1}return this.source.getIndexOfRow(t,!1)},e.prototype.getItemOfRow=function(t,e){if(this.grouped){for(var i=this._visibleItems,o=0,r=i.count;o<r;o++){var n=i.getItem(o);if(n.dataRow==t)return n}return null}return this.source.getItemOfRow(t,e)},e.prototype._initialize=function(){t.prototype._initialize.call(this),this._visibleItems=new Yr(this)},e.prototype._clearItems=function(){this._visibleItems.clear(),this.rootItem.clear()},e.prototype._populateItems=function(){this.$_populateItems(!1)},e.prototype._resetItemIndicies=function(e){this.isIndexing&&this.grouped?this._visibleItems.$_resetIndices(e):t.prototype._resetItemIndicies.call(this,e)},e.prototype._clearChecked=function(){this.grouped?this.$_checkChildren(this.rootItem,!1,!1,!1):t.prototype._clearChecked.call(this),this._editItem&&this._editItem._setChecked(!1)},e.prototype.checkAll=function(e,i,o,r,n){if(this._editItem&&(o?this._editItem.checkable&&this._editItem._setChecked(e):this._editItem._setChecked(e)),i||!this.grouped)t.prototype.checkAll.call(this,e,i,o,r,n);else{var s=this._visibleItems.fixedCount;if(s>0)if(o)for(var a=s;a--;){var l=this.getItem(a);l.checkable&&l._setChecked(e)}else for(a=s;a--;)this.getItem(a)._setChecked(e);var h=this.source._checkFieldIndex>-1;h&&this.dataSource.beginUpdate();try{this.$_checkChildren(this.rootItem,e,o,n)}finally{h&&this.dataSource.endUpdate(!1)}this._fireItemCheckChanged(null,e),r?this._fireItemAllChecked(e):this._fireRefreshClient()}},e.prototype.getItemChecked=function(t,e){return this.source.getItemChecked(t,e)},e.prototype.setItemChecked=function(t,e){return this.source.setItemChecked(t,e)},e.prototype.getFirstRow=function(){for(var t=0,e=this._visibleItems.count;t<e;t++){var i=this._visibleItems.getItem(t);if(i instanceof io)return i}},e.prototype.getLastRow=function(){for(var t=this._visibleItems.count-1;t>=0;t--){var e=this._visibleItems.getItem(t);if(e instanceof io)return e}},e.prototype.getPrevRow=function(t){if(t){t.visible||(t=t.getVisibleAncestor());for(var e=t.index-1;e>=0;e--)if((t=this._visibleItems.getItem(e))instanceof io)return t}return this.getFirstRow()},e.prototype.getNextRow=function(t){if(t){t.visible||(t=t.getVisibleAncestor());for(var e=t.index+1,i=this._visibleItems.count;e<i;e++)if((t=this._visibleItems.getItem(e))instanceof io)return t}return this.getLastRow()},e.prototype.$_saveExpand=function(t,e){for(var i=0,o=t.count;i<o;i++){var r=t.getItem(i);if(r instanceof ro||r instanceof zr){var n=r.firstItem._dataRowId,s=this.dataSource.getDataRow(n),a=r._groupField;s>=0&&a>=0&&(e[n]={expanded:r._expanded,children:[]},this.$_saveExpand(r,e[n].children))}}},e.prototype.$_restoreExpand=function(t,e){for(var i=0,o=t.count;i<o;i++){var r=t.getItem(i);if(r instanceof ro||r instanceof zr){var n=r.firstItem._dataRowId,s=this.dataSource.getDataRow(n),a=r._groupField;s>=0&&a>=0&&e[n]&&(r._setExpanded(e[n].expanded),this.$_restoreExpand(r,e[n].children))}}},e.prototype.$_populateItems=function(t){var e={},i=this.source.itemCount,o=this._rootItem;if(t&&i>0&&o&&this.$_saveExpand(o,e),this._clearItems(),this.source){if(this._groupFields){for(var r=this.dataSource.fieldCount,n=this._groupFields.length-1;n>=0;n--)this._groupFields[n]>=r&&this._groupFields.splice(n,1);this._grouped=this._groupFields.length>0}else this._grouped=!1;this._grouped&&i>0&&(this.$_buildGroupItems(i),t&&this.$_restoreExpand(o,e),this.$_resetVisibleItems())}},e.prototype.$_checkChildren=function(t,e,i,o){for(var r=0,n=t.count;r<n;r++){var s=t.getItem(r);s&&(i?(o||s.isDataRow)&&s.checkable&&s._setChecked(e):s._setChecked(e)),s instanceof oo&&this.$_checkChildren(s,e,i,o)}},e.prototype.$_getItem=function(t){return this._grouped?this._visibleItems.getItem(t):this.source.getItem(t)},e.prototype.$_resetVisibleItems=function(){this._visibleItems.$_clearAndInit(this.source,this.fixedCount),this.source&&this.source.itemCount>this._visibleItems.fixedCount&&this._visibleItems.expand(this.rootItem,!1,!1,0),this._resetItemIndicies(0)},e.prototype.$_buildGroupItems=function(t){if(t>this.fixedCount){var e=new qr(this.fixedCount,t-1);this.$_buildGroups(e,this.source,this._groupFields),this.$_buildItems(this.rootItem,e,this._groupFields),this.mergeMode&&(this._clearDisplayLevels(),this.$_resetDisplayLevels(this.rootItem))}},e.prototype.$_resetDisplayLevels=function(t){for(var e=0,i=t.count;e<i;e++){var o=lt.cast(t.getItem(e),oo);if(o){var r=lt.cast(o.firstItem,io);r&&r._displayLevel<0&&(r._displayLevel=o.level),this.$_resetDisplayLevels(o)}}},e.prototype.$_buildGroups=function(t,e,i){if(!(i.length<=t.level)){var o=t.startIndex,r=t.endIndex;if(!(r<o)){var n=t.level+1,s=i[t.level],a=this.dataSource.getField(s),l=new qr(o,o);l.level=n,t.children.push(l);for(var h=e.getItem(o).getData(s),u=o+1;u<=r;u++){var c=e.getItem(u).getData(s);a.equalValues(c,h)||(l&&(l.endIndex=u-1),(l=new qr(u,u)).level=n,t.children.push(l)),h=c}l&&(l.endIndex=r);u=0;for(var d=t.children.length;u<d;u++)this.$_buildGroups(t.children[u],e,i)}}},e.prototype.$_buildItems=function(t,e,i){var o=this.mergeMode,r=e.children.length;if(r>0)for(var n=e.level,s=i[e.level],a=0;a<r;a++){var l=o?new zr(n,s):new ro(s);l._setExpanded(this.expandWhenGrouping),t.add(l),this.$_buildItems(l,e.children[a],i)}else{var h=e.endIndex-e.startIndex+1,u=this.source.getItems(e.startIndex,h);t.addAll(u),this._incDescendents(t,h)}if(t.level>0){var c=this._callbackOnwer,d=this._footerCallback;if(this._footerCounter)for(var p=0,_=(a=0,this._footerCounter.getGroupFooterCount(t));a<_;a++){var f=!(!d||d(c,t,a));(g=o?new Ur:new no).$_footerIndex=a,g.$_vindex=f?-1:p++,g.hiddenFooter=f,t.add(g)}else if(d||d(c,t,0)){var g=o?new Ur:new no;t.add(g)}}},e.prototype.$_setEditItem=function(t){this._editItem=t},e.prototype.$_setDummyEditItem=function(t){this._dummyEditItem=t},e.prototype.fireGrouping=function(t){return this.fireConfirmEvent(e.GROUPING,t)},e.prototype.fireGrouped=function(t){this.fireEvent(e.GROUPED)},e.prototype.fireExpand=function(t){return this.fireConfirmEvent(e.EXPAND,t)},e.prototype.fireExpanded=function(t){this.fireEvent(e.EXPANDED,t)},e.prototype.fireCollapse=function(t){return this.fireConfirmEvent(e.COLLAPSE,t)},e.prototype.fireCollapsed=function(t){this.fireEvent(e.COLLAPSED,t)},e.prototype.onItemProviderRefresh=function(e){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),t.prototype.onItemProviderRefresh.call(this,e))},e.prototype.onItemProviderItemInserted=function(e,i){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),t.prototype.onItemProviderItemInserted.call(this,e,i))},e.prototype.onItemProviderItemDeleted=function(e,i){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),t.prototype.onItemProviderItemDeleted.call(this,e,i))},e.prototype.onItemProviderItemUpdated=function(e,i){this.grouped?(this.$_populateItems(!0),this._fireRefresh()):(this._resetItemIndicies(0),t.prototype.onItemProviderItemUpdated.call(this,e,i))},e.GROUPING="onGroupedItemProviderGrouping",e.GROUPED="onGroupedItemProviderGrouped",e.EXPAND="onGroupedItemProviderExpand",e.EXPANDED="onGroupedItemProviderExpanded",e.COLLAPSE="onGroupedItemProviderCollapse",e.COLLAPSED="onGroupedItemProviderCollapsed",e}(lo),Xr=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._changed=function(){},e.INIT_COUNT=200,e}(ft),Zr=function(t){function e(){var e=t.call(this)||this;return e._level=0,e._mergeMode=!1,e}return o(e,t),e.getDefault=function(t,i){var o=e.$_default;return o._level=t,o._mergeMode=i,o},e.prototype.parseInit=function(t,e,i,o,r){var n=t.itemCount;(o=Math.min(n-i,o))<1||(this._mergeMode?this.$_parseMerged(t,e,i,o,r):this.$_parseNormal(t,e,i,o,r))},e.prototype.parseBounds=function(t,e,i,o,r){if(!(t.itemCount<1)){for(i=Math.max(0,i);i>=0&&r[i]<=0;){var n=t.getItem(i);if(n==this.$_getAncestor(n,this._level))break;i--}for(;i<=o&&r[i]>0;)i++;i<=o&&(this._mergeMode?this.$_parseMergedBounds(t,e,i,o,r):this.$_parseNormalBounds(t,e,i,o,r))}},e.prototype.$_getAncestor=function(t,e){var i=lt.cast(t,oo);for(i||(i=t.parent);i.level>e;)i=i.parent;return i},e.prototype.$_parseNormal=function(t,e,i,o,r){var n=t.itemCount;if(!(n<1)){var s=t.fixedCount,a=t.getItem(i),l=a,h=i,u=h+1;for(r[h]=h+1;u<n;)a=t.getItem(u),(u==s||a.level!=l.level||a.constructor!==l.constructor||a instanceof no||a instanceof ro)&&(h=u),r[u]=h+1,u++,l=a}},e.prototype.$_parseMerged=function(t,e,i,o,r){var n=t.itemCount;if(!(n<1))for(var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,h=r[l]=l+1;h<n;){s=t.getItem(h);var u=this.$_getAncestor(s,this._level);if(u!=a){if(h>=o)break;a=u,l=h}r[h]=l+1,h++}},e.prototype.$_parseNormalBounds=function(t,e,i,o,r){var n=t.itemCount;if(!(n<1)){var s=t.fixedCount,a=t.getItem(i),l=a,h=i,u=h+1;for(r[h]=h+1;u<n;)a=t.getItem(u),u!=s&&a.level==l.level&&a.constructor===l.constructor||(h=u),r[u]=h+1,u++,l=a}},e.prototype.$_parseMergedBounds=function(t,e,i,o,r){var n=t.itemCount;if(!(n<1)){var s=t.getItem(i),a=this.$_getAncestor(s,this._level),l=i,h=l+1;for(r[l]=l+1;h<n;){s=t.getItem(h);var u=this.$_getAncestor(s,this._level);if(u!=a){if(h>o)break;a=u,l=h}r[h]=l+1,h++}}},e.$_default=new e,e}(Xr),Jr=function(t){function e(){var e=t.call(this)||this;return e._item=null,e._field=-1,e._ds=null,e._fieldCount=0,e._grid=null,e._layout=null,e}return o(e,t),e.prototype._doDispose=function(){this._item=null,this._ds=null,this._grid=null,this._layout=null,t.prototype._doDispose.call(this)},e.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},e.prototype.setLayout=function(t){this._layout=t,this._column=t.firstColumn,this._grid=t.grid},e.prototype.setCell=function(t){this._item=t.item,this._field=t.dataField},e.prototype.setItem=function(t,e){this._item=t,this._field=e},e.prototype.clear=function(){this._item=null,this._field=null,this._layout=null,this._column=null,this._grid=null,this._ds=null},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){if(this._item){switch(t){case e.ID_ROW:return this._item.index;case e.ID_DATAROW:return this._item.dataRow;case e.ID_CHECKED:return this._item.checked;case e.ID_GROUP:return this._item.parent;case e.ID_VALUE:return this._item.getData(this._field);case e.ID_PREV_VALUES:var i=this._grid.getDataColumns(),o=i.indexOf(this._column);if(i.length<0||o<1)return"";for(var r=[],n=0,s=Math.min(o,i.length);n<s;n++)r.push(this._item.getData(i[n].dataIndex));return r.join("`")}throw new yt("Invalid identifier key: "+t)}},e.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new yt("Data field index out of bounds:"+i);return this._item.getData(i)}throw new yt("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new yt("Invalid identifier indexer: "+t);if(this._ds){var r=o?this._ds.getFieldIndexC(i):this._ds.getFieldIndex(i);if(r<0||r>=this._fieldCount)throw new yt("Data field is not exists:"+i);return this._item.getData(r)}},e.ID_ROW=0,e.ID_DATAROW=1,e.ID_CHECKED=2,e.ID_VALUE=3,e.ID_VALUES=4,e.ID_GROUP=5,e.ID_PREV_VALUES=6,e.IDENTS={row:e.ID_ROW,datarow:e.ID_DATAROW,checked:e.ID_CHECKED,value:e.ID_VALUE,values:e.ID_VALUES,group:e.ID_GROUP,prevvalues:e.ID_PREV_VALUES},e}(It),Qr={},tn=function(t){function e(i){var o=t.call(this)||this;return o._runtime=e.$_runtime=e.$_runtime||new Jr,o.criteria=i,o}return o(e,t),e.createRule=function(t){var i="string"==typeof t?t:t&&t.criteria;return i?new e(i):null},e.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?ee.Default.parse(t,null):null,this._changed())},enumerable:!0,configurable:!0}),e.prototype.parseInit=function(t,e,i,o,r){var n=this._layout.isBreakMergeOnEmpty(),s=t.fixedCount,a=t.itemCount,l=t.dataSource.rowCount;if(!((o=Math.min(a-i,o))<1||l<=0)){this._runtime.setDataSource(t.dataSource),this._runtime.setLayout(this._layout);for(var h=null,u=i;u<a&&(h=t.getItem(u),!this.$_isRow(h,!1));)r[u]=u+1,u++;if(!(u>=a)){var c=Qr,d=this._exprNode.isIdentifier("value"),p=i=u;if(r[p]=p+1,!(h.dataRow>=l)){d?c=h.getData(e):(this._runtime.setItem(h,e),c=this._exprNode.evaluate(this._runtime));for(var _=i+1;_<a;_++)if(h=t.getItem(_),this.$_isRow(h,!1)){if(h.dataRow>=l)break;var f=void 0;if(d?f=h.getData(e):(this._runtime.setItem(h,e),f=this._exprNode.evaluate(this._runtime)),_==s||void 0===f&&n||(f instanceof Date&&c instanceof Date?+f!=+c:f!=c)){if(_>=o)break;p=_,c=f}r[_]=p+1}else{if(_>=o)break;c=Qr,p=_,r[_]=p+1}}}}},e.prototype.parseBounds=function(t,e,i,o,r){var n=this._layout.isBreakMergeOnEmpty(),s=t.itemCount;if(!(s<1)){var a=t.fixedCount,l=this._exprNode.isIdentifier("value"),h=Qr,u=Math.max(0,i),c=u,d=-1;if(this._runtime.setDataSource(t.dataSource),this._runtime.setLayout(this._layout),u>0&&r[u]<=0){var p=t.getItem(u);if(this.$_isRow(p,!1)){var _=void 0;for(l?_=t.getItem(u).getData(e):(this._runtime.setItem(p,e),_=this._exprNode.evaluate(this._runtime)),u--;u>=0&&(p=t.getItem(u),this.$_isRow(p,!1))&&(l?h=p.getData(e):(this._runtime.setItem(p,e),h=this._exprNode.evaluate(this._runtime)),!(u==a||void 0===h&&n||(h instanceof Date&&_ instanceof Date?+h!=+_:h!=_)));)u--;for(var f=c-1;f>u;f--)r[f]=u+2;c-1>u&&(d=u+1)}else{r[u]=u+1;for(f=c-1;f>u;f--)r[f]=u+2;for(c-1>u+1&&(d=u+2),u--;u>=0&&r[u]<=0&&!this.$_isRow(t.getItem(u),!1);)r[u]=u+1,u--}}for(u=Math.max(0,i);u<=o&&r[u]>0;)u++;for(;u<=o&&!this.$_isRow(t.getItem(u),!1);)r[u]=u+1,u++;if(u<o){c=u;p=t.getItem(u),_=void 0;for(l?_=p.getData(e):(this._runtime.setItem(p,e),_=this._exprNode.evaluate(this._runtime)),u++;u<s;)if(p=t.getItem(u),this.$_isRow(p,!1)){if(l?h=p.getData(e):(this._runtime.setItem(p,e),h=this._exprNode.evaluate(this._runtime)),u==a||void 0===h&&n||(h instanceof Date&&_ instanceof Date?+h!=+_:h!=_)){var g=c;d>=0&&(g=d,d=-1);for(f=c;f<u;f++)r[f]=g+1;if(u>=o)break;_=h,c=u}else r[u]=c+1;u++}else{g=c;d>=0&&(g=d,d=-1);for(f=c;f<u;f++)r[f]=g+1;for(r[u]=u+1,u++;u<s&&!this.$_isRow(t.getItem(u),!1);)r[u]=u+1,u++;if(c=u,u>=o)break}if(u==s&&(h instanceof Date&&_ instanceof Date?+h==+_:h==_))for(g=d>=0?d:c,f=c;f<u;f++)r[f]=g+1}}},e.prototype.$_isRow=function(t,e){var i=t instanceof io&&!(t instanceof ho);if(i&&!e){var o=t.parent;i=o.expanded||o.firstItem!==t}return i},e.$_runtime=null,e}(Xr),en=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"head",{get:function(){return-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return-1},enumerable:!0,configurable:!0}),e}(ft),on=function(t){function e(e){var i=t.call(this)||this;return i._group=null,i._column=e.c1._columnObj,i._head=e.top,i._tail=e.bottom,i}return o(e,t),e.borrow=function(t){var i=e.$_rooms.pop();return i?(i._head=t.top,i._tail=t.bottom):i=new e(t),i},e.returnTo=function(t){if(t){var i=e.$_rooms;i.indexOf(t)<0&&i.push(t)}},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"head",{get:function(){return this._head},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return this._group},set:function(t){this._group=t},enumerable:!0,configurable:!0}),e.prototype.getHead=function(t){return t?t.set(this._head,this._column):t=this._column.grid.getIndex(this._head,this._column),t},e.prototype.getTail=function(t){return t?t.set(this._tail,this._column):t=this._column.grid.getIndex(this._tail,this._column),t},e.prototype.isHead=function(t){return t.column==this._column&&t.itemIndex==this._head},e.prototype.isTail=function(t){return t.column==this._column&&t.itemIndex==this._tail},e.prototype.contains=function(t){return t.column==this._column&&t.itemIndex>=this._head&&t.itemIndex<=this._tail},e.$_rooms=new Array,e.$_roomCount=0,e}(en),rn=0,nn=function(t){function e(e){var i=t.call(this)||this;return i._flags=null,i._fixedRooms=[],i._rooms=[],i._inited=!1,i._fixedCells=[],i._cells=[],i._layout=e,e._merges=i,i}return o(e,t),e.prototype._doDispose=function(){this._layout=null,this._rooms=this._fixedRooms=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._rooms.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},e.prototype.initialize=function(t){if(!this._inited){var e=this._layout.grid,i=e.rowGroup,o=e.itemSource,r=this._layout.firstColumn,n=e.getGroupLevel(r.dataIndex),s=!e.isGroupedColumn(r)||i.mergeMode&&!r.mergeGrouped?this._layout.$_mergeRuleObj():Zr.getDefault(n,i.mergeMode);if(s){for(var a=this._flags=new Array(o.itemCount),l=e.fixedOptions.mergeRows?0:o.fixedCount,h=o.itemCount;h--;)a[h]=0;s._layout=this._layout,s.parseInit(o,r.dataIndex,l,t,a)}this._inited=!0}},e.prototype.refreshRooms=function(t,e,i){if(this._inited&&this._flags&&!(e<t)){var o=this._layout.grid,r=this._layout.firstColumn;if(o&&r){var n=this._rooms,s=o.layoutManager.fixedItemCount,a=o.itemSource,l=o.getGroupLevel(r.dataIndex),h=l>0?Zr.getDefault(l,o.rowGroup.mergeMode):this._layout.$_mergeRuleObj(),u=o.displayOptions.editItemMerging,c=0;if(this._fixedRooms.length=0,this._rooms.length=0,h&&(h._layout=this._layout,h.parseBounds(a,r.dataIndex,t,e,this._flags)),i)for(;c<s;){if(p=this.$_checkFixedMerge(a,r,c,s)){if(l<1){var d=new on(p);this._fixedRooms.push(d)}c=p.r2+1}else c+=1}for(c=t;c<=e;){var p;if(p=this.$_checkMerge(a,r,c,0==n.length,s)){var _;if(l<1)if((_=a.getItem(p.r2))instanceof zr||_ instanceof Ur);else{d=new on(p);this._rooms.push(d)}else if((_=u?a.source.getItem(p.top):a.getItem(p.top)).level>=l){for(var f=_ instanceof oo?_:_.parent;f.level>l;)f=f.parent;(d=new on(p)).group=f,n.push(d)}c=p.r2+1}else c+=1}}}},e.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},e.prototype.getRooms=function(){return this._rooms.slice()},e.prototype.scroll=function(t){},e.prototype.getRoom=function(t){for(var e=t.rowFixed?this._fixedRooms:this._rooms,i=e.length-1;i>=0;i--)if(e[i].contains(t))return e[i];return null},e.prototype.prepareCells=function(t,e){if(t>0){for(var i=this._fixedCells,o=0;o<i.length;o++)i[o]=-1;for(;i.length<t;)i.push(-1)}var r=this._cells;for(o=0;o<r.length;o++)r[o]=-1;for(;r.length<e;)r.push(-1)},e.prototype.refreshCells=function(t,e){for(var i=this.getFixedRooms(),o=i.length-1;o>=0;o--){var r=i[o];this.addFixedCells(r.head,r.tail-r.head+1)}for(o=(i=this.getRooms()).length-1;o>=0;o--){r=i[o];var n=Math.max(0,r.head-e-t),s=r.tail-e-t;this.addCells(n,s-n+1)}},e.prototype.addFixedCells=function(t,e){for(var i=this._fixedCells,o=rn++,r=t+1;r<t+e;r++)i[r]=o+65535;return i[t]=o,o},e.prototype.addCells=function(t,e){for(var i=this._cells,o=rn++,r=t+1;r<t+e;r++)i[r]=o+65535;return i[t]=o,o},e.prototype.isMerged=function(t,e){return t<e?this._fixedCells[t]>-1:this._cells[t-e]>-1},e.prototype.isMergeRoot=function(t,e){return t<e?this._fixedCells[t]>-1&&this._fixedCells[t]<65535:(t-=e,this._cells[t]>-1&&this._cells[t]<65535)},e.prototype.isHidden=function(t,e){return t<e?this._fixedCells[t]>=65535:this._cells[t-e]>=65535},e.prototype.getMerged=function(t,e){var i=1;if(t<e)for(var o=(n=this._fixedCells)[t],r=t+1;r<n.length&&n[r]-65535==o;r++,i++);else{t-=e;var n;for(o=(n=this._cells)[t],r=t+1;r<n.length&&n[r]-65535==o;r++,i++);}return i},e.prototype.getMerged2=function(t,e,i,o){for(var r=this._cells,n=r[i],s=t.itemSource,a=s.getItem(e++),l=a.isData?o:1,h=i+1;h<r.length&&r[h]-65535==n;h++)l+=(a=s.getItem(e++)).isData?o:1;return l},e.prototype.$_checkFixedMerge=function(t,e,i,o){if(o>0){var r=e.grid.displayOptions.editItemMerging,n=i,s=this._flags[n],a=t.getItem(n);if(s<=0||Ji(a.itemState)&&!r)return null;for(var l=i+1;l<=o;){var h=Ji(t.getItem(l).itemState);if(l==o||this._flags[l]>s||h&&!r)return l>n+1||h?zn.createRange(n,e.layout,l-1,e.layout):null;l++}}return null},e.prototype.$_checkMerge=function(t,e,i,o,r){if(i>=0){var n=e.grid.displayOptions.editItemMerging,s=i,a=this._flags[s],l=t.getItem(s);if(a<=0||Ji(l.itemState)&&!n)return null;if(o)for(;s>r&&!(this._flags[s-1]<a||Ji(t.getItem(s-1).itemState));)s--;for(var h=t.itemCount,u=i+1;u<h;){var c=Ji(t.getItem(u).itemState);if(this._flags[u]>a||this._flags[u]<=0||c&&!n){if(u>s+1)return zn.createRange(s,e.layout,u-1,e.layout);var d=e instanceof mn?e.groupLevel:-1;return(l=t.getItem(s))instanceof zr&&l.collapsed||l instanceof Ur&&l.parent.level==d&&(u==i+1||l.parent.collapsed)||(l instanceof zr||l instanceof Ur)&&l.parent.level>d?zn.createRange(s,e.layout,u-1,e.layout):null}u++}if(u>s){if(u>s+1)return zn.createRange(s,e.layout,u-1,e.layout);d=e instanceof mn?e.groupLevel:-1;return(l=t.getItem(s))instanceof zr&&l.collapsed||l instanceof Ur&&l.parent.level==d&&(u==i+1||l.parent.collapsed)||(l instanceof zr||l instanceof Ur)&&l.parent.level>d?zn.createRange(s,e.layout,u-1,e.layout):null}}return null},e.MERGE_ROOMS="mergeRooms",e}(ft),sn=function(t){function e(e){var i=t.call(this,null)||this;return i._column=e,i}return o(e,t),e.prototype._doDispose=function(){this._column=null,this._template=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return this._template&&this._template.template},set:function(t){t!=this.template&&(t?(this.template||(this._template=new vr),this._template.template=t):this._template=void 0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(t){t!==this._values&&(t?lt.extendObj(t,this._values={}):this._values=void 0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupMenuName",{get:function(){if(this._popupMenuName)return this._popupMenuName;if(this._popupMenu){this._popupMenuName="$$_column_popup_menu"+this.$_hash;var t=this.column.grid;return t&&t.addPopupMenu(this._popupMenuName,this._popupMenu,!0),t&&this._popupMenuName}return null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.getValue=function(t){return this._values&&this._values[t]},e.prototype.setValue=function(t,e){this._values||(this._values={}),this._values[t]!=e&&(this._values[t]=e,this._changed())},e}(Io),an=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.exportStyleName=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=void 0,this},t.prototype.assign=function(t){return"string"==typeof t?this.styleName=t:t&&("styleName"in t&&(this.styleName=t.styleName),"textFormat"in t&&(this.textFormat=t.textFormat),"datetimeFormat"in t&&(this.datetimeFormat=t.datetimeFormat),"numberFormat"in t&&(this.numberFormat=t.numberFormat),"booleanFormat"in t&&(this.booleanFormat=t.booleanFormat),"prefix"in t&&(this.prefix=t.prefix),"suffix"in t&&(this.suffix=t.suffix),"exportStyleName"in t&&(this.exportStyleName=t.exportStyleName)),this},t}(),ln=function(t){function e(e){var i=t.call(this,e)||this;return i._index=0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expression",{get:function(){return this._expression},set:function(t){t&&(t=t.trim()),t!=this._expression&&(this._expression=t,this._exprNode=t?ee.Default.parse(t):void 0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?Se.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?xe.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?Ie.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?Gr.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!0,configurable:!0}),e.prototype.evaluate=function(t,e){if(this._exprNode)return this._exprNode.evaluate(t)},e.prototype.realizeSummary=function(t,e){var i=this._template;return i?i.realizeSummary(this,t,e):void 0},e.prototype.realizeGroupSummary=function(t,e){var i=this._template;return i?i.realizeGroupSummary(this,t,e):void 0},e.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.expression=t,!0)},e.prototype._doChanged=function(){},e}(sn),hn=function(t){function e(e,i){var o=t.call(this)||this;return o._items=[],o._column=e,o._type=i,o._items.push(o.$_createSummary()),o}return o(e,t),e.prototype._doDispose=function(){this._column=null,this._items&&this._items.forEach((function(t){t.dispose()})),this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),e.prototype.get=function(t){return t>=0&&t<this.column.grid.getSummaryCount(this._type)&&!this._items[t]&&(this._items[t]=this.$_createSummary()),this._items[t]},e.prototype.assignFrom=function(t){if(lt.isArray(t)){for(var e=t.length;this._items.length<e;)this._items.push(null);e>1&&this._items.length>e&&(this._items.length=e),e>0&&this._items[0].assignFrom(t[0]);for(var i=1;i<e;i++){t[i]?(this._items[i]||(this._items[i]=this.$_createSummary()),this._items[i].assignFrom(t[i])):this._items[i]=null}}else this._items[0].assignFrom(t)},e}(ft),un=function(t){function e(e){var i=t.call(this,e.column)||this;return i.$_owner=e,i}return o(e,t),e.prototype._doChanged=function(){this.column._headerSummaryChanged()},e}(ln),cn=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.$_createSummary=function(){return new un(this)},e}(hn),dn=function(t){function e(e){var i=t.call(this,e)||this;return i._checkLocation=f.NONE,i._showTooltip=!0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){t!=this._checkLocation&&(this._checkLocation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){t!=this._tooltip&&(this._tooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayText",{get:function(){var t=this.column,e=this._text;if(!e&&t instanceof mn){var i=t.getField();e=i?i.header||i.orgFieldName:t.fieldName}return e||(e=t.name),e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName!==t&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){t!=this._exportStyleName&&(this._exportStyleName=t)},enumerable:!0,configurable:!0}),e.prototype.realizeTemplate=function(){var t=this._template;return t?t.realizeHeader(this,null,this._grid):void 0},e.prototype._doChanged=function(){this.column&&this.column._headerChanged()},e.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)},e}(sn),pn=function(t){function e(e){var i=t.call(this,e.column)||this;return i.$_owner=e,i}return o(e,t),e.prototype._doChanged=function(){this.column._footerChanged()},e}(ln),_n=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.$_createSummary=function(){return new pn(this)},e}(hn),fn=function(){function t(){}return t.prototype.clear=function(){return this.styleName=this.exportStyleName=this.renderer=this.editable=this.editor=this.readOnly=this.textFormat=this.datetimeFormat=this.numberFormat=this.booleanFormat=this.prefix=this.suffix=this.edgeMark=this.style=void 0,this},t.prototype.assign=function(t){return"string"==typeof t?this.styleName=t:t&&("styleName"in t&&(this.styleName=t.styleName),"exportStyleName"in t&&(this.exportStyleName=t.exportStyleName),"renderer"in t&&(this.renderer=t.renderer),"editor"in t&&(this.editor=t.editor),"editable"in t&&(this.editable=t.editable),("readonly"in t||"readOnly"in t)&&(this.readOnly=t.readonly||t.readOnly),"textFormat"in t&&(this.textFormat=t.textFormat),"datetimeFormat"in t&&(this.datetimeFormat=t.datetimeFormat),"numberFormat"in t&&(this.numberFormat=t.numberFormat),"booleanFormat"in t&&(this.booleanFormat=t.booleanFormat),"prefix"in t&&(this.prefix=t.prefix),"suffix"in t&&(this.suffix=t.suffix),"edgeMark"in t&&(this.edgeMark=t.edgeMark),"style"in t&&(this.style=t.style)),this},t.prototype.toFormatter=function(t){var e;return t||(t={textFormatter:void 0,numberFormatter:void 0,datetimeWriter:void 0,booleanFormatter:void 0,prefix:void 0,suffix:void 0}),(e=this.textFormat)&&(t.textFormatter&&t.textFormatter.format==e||(t.textFormatter=Gr.getFormatter(e))),(e=this.numberFormat)&&(t.numberFormatter&&t.numberFormatter.format==e||(t.numberFormatter=Se.getFormatter(e))),(e=this.datetimeFormat)&&(t.datetimeWriter&&t.datetimeWriter.format==e||(t.datetimeWriter=xe.getFormatter(e))),(e=this.booleanFormat)&&(t.booleanFormatter&&t.booleanFormatter.format==e||(t.booleanFormatter=Ie.getFormatter(e))),(e=this.prefix)&&(t.prefix&&t.prefix==e||(t.prefix=e)),(e=this.suffix)&&(t.suffix&&t.suffix==e||(t.suffix=e)),t},t}(),gn=function(t){function e(e){var i=t.call(this)||this;return i._visible=!0,i._resizable=!0,i._movable=!0,i._checked=!1,i._fillWidth=NaN,i._dirty=!1,i._index=-1,i._states={},i._header=new dn(i),i._footers=new _n(i,"footer"),i._headerSummaries=new cn(i,"summary"),i._groupFooters=new _n(i,"groupFooter"),e&&i.assignFrom(e),i}return o(e,t),e.prototype._doDispose=function(){this._layout=null,this.$_owner=null,this._header=this._header&&this._header.dispose(),this._footers=this._footers&&this._footers.dispose(),this._headerSummaries=this._headerSummaries&&this._headerSummaries.dispose(),this._groupFooters=this._groupFooters&&this._groupFooters.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){t!=this._name&&(this._name=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._layoutChanged=function(){this._changed(),this._layout&&this._layout._changed()},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._layout&&this._layoutChanged(),this._propChanged("visible",this._visible,!this._visible))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return(null==this._width||isNaN(this._width))&&this.grid?this._width=this.grid.displayOptions.defaultColumnWidth:this._width},set:function(t){if(t=Math.max(0,t),!isNaN(t)&&t!=this._width){var e=this._width;this._width=t,this._layoutChanged(),this._propChanged("width",this._width,e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillWidth",{get:function(){return this._fillWidth},set:function(t){t=Math.max(0,t),isNaN(t)||t==this._fillWidth||(this._fillWidth=t,this._layoutChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){t!=this._checked&&(this._checked=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),e.prototype.setHeader=function(t){this._header.assignFrom(t)},Object.defineProperty(e.prototype,"footers",{get:function(){return this._footers},enumerable:!0,configurable:!0}),e.prototype.setFooters=function(t){this._footers.assignFrom(t),this._changed()},Object.defineProperty(e.prototype,"footer",{get:function(){return this._footers.get(0)},enumerable:!0,configurable:!0}),e.prototype.setFooter=function(t){this.setFooters(t)},Object.defineProperty(e.prototype,"headerSummaries",{get:function(){return this._headerSummaries},enumerable:!0,configurable:!0}),e.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t),this._changed()},Object.defineProperty(e.prototype,"headerSummary",{get:function(){return this._headerSummaries.get(0)},enumerable:!0,configurable:!0}),e.prototype.setHeaderSummary=function(t){this.setHeaderSummaries(t)},Object.defineProperty(e.prototype,"groupFooters",{get:function(){return this._groupFooters},enumerable:!0,configurable:!0}),e.prototype.setGroupFooters=function(t){this._groupFooters.assignFrom(t),this._changed()},Object.defineProperty(e.prototype,"groupFooter",{get:function(){return this._groupFooters.get(0)},enumerable:!0,configurable:!0}),e.prototype.setGroupFooter=function(t){this.setGroupFooters(t)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._layout?this._layout.grid:this.$_owner?this.$_owner.owner:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayText",{get:function(){return this._header.text||this._name||"col_"+this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayWidth",{get:function(){return this._layout?this._layout.domWidth:this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayIndex",{get:function(){return this._layout?this._layout.vindex:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataRoot",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),e.prototype.clean=function(){this._dirty=!1},e.prototype.isWritable=function(){return!1},e.prototype.stateFor=function(t){return this._states[t]},e.prototype.setState=function(t,e){this._states[t]=e},e.prototype.getFooter=function(t){return this._footers.get(t)},e.prototype.getHeaderSummary=function(t){return this._headerSummaries.get(t)},e.prototype.assignFrom=function(e){t.prototype.assignFrom.call(this,e),this._header.assignFrom(e.header),this._footers.assignFrom(e.footers||e.footer),this._headerSummaries.assignFrom(e.summaries||e.summary||e.headerSummaries||e.headerSummary),this._groupFooters.assignFrom(e.groupFooters||e.groupFooter)},e.prototype.toString=function(){return this.displayText},e.prototype._prepareLayout=function(t,e){},e.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var t=this.grid;t&&t.invalidateColumn(this)}},e.prototype._propChanged=function(t,e,i){var o=this.grid;o&&o._fireColumnPropertyChanged(this,t,e,i)},e.prototype.$_setIndex=function(t){this._index=t},e.prototype._headerChanged=function(){this._changed()},e.prototype._headerSummaryChanged=function(){this._changed()},e.prototype._footerChanged=function(){this._changed()},e.prototype._resetIndices=function(t){},e.prototype.$_layoutIndexChanged=function(t,e){this._propChanged("displayIndex",e,t)},e.prototype.$_layoutWidthChanged=function(t,e){this._propChanged("displayWidth",e,t)},e}(ft),yn=function(t){function e(e){var i=t.call(this,e)||this;return i._blankWhenCopy=!1,i._blankWhenExport=!1,i._ignoreDefaultDynamicStyles=!1,i._textInputCase=b.NORMAL,i._button=E.NONE,i._buttonVisibility=S.DEFAULT,i._editButtonVisibility=S.DEFAULT,i._displayMinusZero=!0,i}return o(e,t),e.prototype._doDispose=function(){this._popupMenu=null,this._popupMenuName=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!==this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?Se.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayMinusZero",{get:function(){return this._displayMinusZero},set:function(t){this._displayMinusZero!=t&&(this._displayMinusZero=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!==this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?xe.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!==this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?Ie.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFormat",{get:function(){return this._textFormat},set:function(t){t!==this._textFormat&&(this._textFormat=t,this._textFormatter=t?Gr.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prefix",{get:function(){return this._prefix},set:function(t){t!=this._prefix&&(this._prefix=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"suffix",{get:function(){return this._suffix},set:function(t){t!=this._suffix&&(this._suffix=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blankWhenCopy",{get:function(){return this._blankWhenCopy},set:function(t){t!=this._blankWhenCopy&&(this._blankWhenCopy=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blankWhenExport",{get:function(){return this._blankWhenExport},set:function(t){t!=this._blankWhenExport&&(this._blankWhenExport=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreDefaultDynamicStyles",{get:function(){return this._ignoreDefaultDynamicStyles},set:function(t){t!=this._ignoreDefaultDynamicStyles&&(this._ignoreDefaultDynamicStyles=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textInputCase",{get:function(){return this._textInputCase},set:function(t){t!=this._textInputCase&&(this._textInputCase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){t!=this._exportStyleName&&(this._exportStyleName=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!=this._styleCallback&&(this._styleCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},set:function(t){this._renderer=t,this.grid&&this._layout&&this.grid.$_rendererChanged(this._layout),this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editor",{get:function(){return this._editor},set:function(t){this._editor=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"button",{get:function(){return this._button},set:function(t){t!=this._button&&(this._button=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(t){t!=this._buttonVisibility&&(this._buttonVisibility=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonVisibleCallback",{get:function(){return this._buttonVisibleCallback},set:function(t){this._buttonVisibleCallback=t,this._changed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(t){t!=this._editButtonVisibility&&(this._editButtonVisibility=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu?(this._popupMenuName="$$_column_popup_menu"+this.$_hash,this.grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this.grid&&this._popupMenuName):null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.getCellStyle=function(t){return this._styleCallback&&this._styleCallback(this.grid.handler,t)},e.prototype.affix=function(t){return this._prefix&&(t=this._prefix+t),this._suffix&&(t+=this._suffix),t},e.prototype._prepareLayout=function(e,i){t.prototype._prepareLayout.call(this,e,i)},e}(gn),mn=function(t){function e(e){var i=t.call(this)||this;return i._fieldIndex=-1,i._readOnly=!1,i._valueSeparator=",",i._breakMergeOnEmpty=!1,i._equalBlank=!1,i._values=null,i._labels=null,i._lookupDisplay=!1,i._lookupSource=null,i._lookupKeyFields=null,i._lookupKeyFieldIds=null,i._mergeGrouped=!1,i._sortable=!0,i._sortOrder=-1,i._sortByLabel=!1,i._filterable=!0,i._autoFilter=!1,i._lookupData=null,i._required=!1,i._requiredLevel=p.ERROR,i._validations=new $r(!0),i._groupable=!0,i._dataIndex=-1,i._baseIndex=-1,i._valueType=r.TEXT,i._groupLevel=-1,i._labelFieldIndex=-1,i._filters=new Co(i),i._filters.addListener(i),i._autoFilters=new Co(i),i._autoFilters.addListener(i),e&&i.assignFrom(e),i}return o(e,t),e.prototype._doDispose=function(){this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._filters=this._filters&&this._filters.dispose(),this._autoFilters=this._autoFilters&&this._autoFilters.dispose(),this.validations=this._validations&&this._validations.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"fieldIndex",{get:function(){return this._fieldIndex},set:function(t){(t=Math.max(-1,t))!=this._fieldIndex&&(this._fieldIndex=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nanText",{get:function(){return this._nanText},set:function(t){t!=this._nanText&&(this._nanText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zeroText",{get:function(){return this._zeroText},set:function(t){t!=this._zeroText&&(this._zeroText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultValue",{get:function(){return this._defaultValue},set:function(t){this._defaultValue=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(t){if(t!=this._mergeRule){this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?tn.createRule(t):null;var e=this.grid;e&&this.layout&&e._columnMergeRuleChanged(this.layout)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){if(t!=this._breakMergeOnEmpty){this._breakMergeOnEmpty=t;var e=this.grid;e&&this.layout&&e._columnMergeRuleChanged(this.layout)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!=this._equalBlank&&(this._equalBlank=t,this._layoutChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!=this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?ee.Default.parse(t,null):void 0,this._layoutChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"excelFormat",{get:function(){return this._excelFormat},set:function(t){t!=this._excelFormat&&(this._excelFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"excelFormulaStatement",{get:function(){return this._excelFormulaStatement},set:function(t){t!=this._excelFormulaStatement&&(this._excelFormulaStatement=t,t?this._excelFormulaExprStatement?this._excelFormulaExprStatement.source=t:this._excelFormulaExprStatement=new yo(t):this._excelFormulaExprStatement=null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"excelFormulaExprStatement",{get:function(){return this._excelFormulaExprStatement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataIndex",{get:function(){return this._dataIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseIndex",{get:function(){return this._baseIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueType",{get:function(){return this._valueType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupLevel",{get:function(){return this._groupLevel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(t){t!=this._values&&(this._values=t?t.map((function(t,e){return null!=t?String(t):t})):[],this._lookupMap=null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labels",{get:function(){return this._labels},set:function(t){t!=this._labels&&(this._labels=t&&t.slice(),this._lookupMap=null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay!=t&&(this._lookupDisplay=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookupSource",{get:function(){return this._lookupSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookupSourceId",{get:function(){return this._lookupSourceId},set:function(t){this._lookupSourceId!=t&&(this._lookupSourceId=t,this._changed(),this.grid&&this.$_resetLookup(this.grid))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookupKeyFields",{get:function(){return this._lookupKeyFields},set:function(t){t!=this._lookupKeyFields&&(this._lookupKeyFields=lt.makeArray(t,!0).slice(),this._changed(),this.grid&&this.$_resetLookup(this.grid))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookupKeyFieldIds",{get:function(){return this._lookupKeyFieldIds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelField",{get:function(){return this._labelField},set:function(t){this._labelField!=t&&(this._labelField=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textOfInvalid",{get:function(){return this._textOfInvalid},set:function(t){this._textOfInvalid!=t&&(this._textOfInvalid=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!==this._placeHolder&&(this._placeHolder=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"placeHolderStyleName",{get:function(){return this._placeHolderStyleName},set:function(t){t!==this._placeHolderStyleName&&(this._placeHolderStyleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelFieldIndex",{get:function(){return this._labelFieldIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayCallback",{get:function(){return this._displayCallback},set:function(t){this._displayCallback=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergeGrouped",{get:function(){return this._mergeGrouped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortable",{get:function(){return this._sortable},set:function(t){t!=this._sortable&&(this._sortable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortOrder",{get:function(){return this._sortOrder},set:function(t){this._sortOrder=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortDirection",{get:function(){return this._sortDirection},set:function(t){this._sortDirection=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortByLabel",{get:function(){return this._sortByLabel},set:function(t){this._sortByLabel!==t&&(this._sortByLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterable",{get:function(){return this._filterable},set:function(t){t!=this._filterable&&(this._filterable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoFilter",{get:function(){return this._autoFilter},set:function(t){t!==this._autoFilter&&(this._autoFilter=t,!t&&this._autoFilters&&this._autoFilters.count>0&&this._autoFilters.clear(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return this._filters},set:function(t){t instanceof Co||this.setFilters(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoFilters",{get:function(){return this._autoFilters},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"required",{get:function(){return this._required},set:function(t){t!=this._required&&(this._required=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requiredMessage",{get:function(){return this._requiredMessage},set:function(t){t!=this._requiredMessage&&(this._requiredMessage=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requiredLevel",{get:function(){return this._requiredLevel},set:function(t){t!=this._requiredLevel&&(this._requiredLevel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupable",{get:function(){return this._groupable},set:function(t){this._groupable!=t&&(this._groupable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectKey",{get:function(){return this._objectKey},set:function(t){t!=this._objectKey&&(this._objectKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"objectCallback",{get:function(){return this._objectCallback},set:function(t){this._objectCallback=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayText",{get:function(){return this.header.text||this.fieldName||this.name||"col_"+this.index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookupData",{get:function(){return this._lookupData},set:function(t){var e,i,o,r,n={};if(this._lookupData=lt.deepCopy(t),t){lt.isArray(t)?n.list=t:n=t,this._labels=[],this._values=[],this._lookupMap=null,e=n.hasOwnProperty("value")?n.value:"value",i=n.hasOwnProperty("label")?n.label:"label";for(var s=0,a=n.list.length;s<a;s++)null!=(r=null!=(o=n.list[s])[e]?o[e]:o.code)&&this._values.push(null!=o[e]?o[e]:o.code),null!=r&&this._labels.push(null!=o[i]?o[i]:null!=o.text?o.text:r)}else this._labels=null,this._values=null,this._lookupMap=null;this._changed()},enumerable:!0,configurable:!0}),e.prototype.getField=function(){var t=this._dataIndex;if(t>=0){var e=this.grid.dataSource;if(e)return e.getField(t)}return null},e.prototype.getLookupLabel=function(t){if(!this._lookupMap){var e=this._values,i=this._labels;if(e&&e.length>0){this._lookupMap={};for(var o=0;o<e.length;o++)i&&i.length>o?this._lookupMap[e[o]]=i[o]:this._lookupMap[e[o]]=e[o]}}var r;if(t&&this._valueSeparator){for(var n=t.split(this._valueSeparator),s=[],a=(o=0,n.length);o<a;o++)s.push(this._lookupMap&&this._lookupMap[n[o]]?this._lookupMap[n[o]]:n[o]);if(s.length<=0)return"";r=s.join(this._valueSeparator)}else r=this._lookupMap?this._lookupMap[t]:void 0;return r||(null!=this.textOfInvalid?this.textOfInvalid:t)},e.prototype.getLookupIndex=function(t){if(this._values&&this._values.length>0)for(var e=0,i=this._values.length;e<i;e++)if(this._values[e]==t)return e;return-1},e.prototype.getLookupIndices=function(t){var e=[];if(t&&this._values&&this._values.length>0)for(var i=lt.isArray(t)?t:String(t).split(this._valueSeparator),o=0,r=i.length;o<r;o++)this._values.indexOf(i[o])>=0&&e.push(this._values.indexOf(i[o]));return e},e.prototype.getLookupValue=function(t){if(this._values&&this._values.length>0)return this._values[t]},e.prototype.getLookupValues=function(t){var e=[];if(this._values&&this._values.length>0)for(var i=0,o=t.length;i<o;i++)t[i]>=0&&t[i]<this._values.length&&e.push(this._values[t[i]]);return e},e.prototype.getSourceValue=function(t){var e=this._values,i=this._labels;if(i&&e){var o=i.indexOf(t);if(o>=0&&e.length>o)return e[o];if((o=e.indexOf(t))>=0)return e[o]}},e.prototype.getSourceValues=function(t){var e=this._values,i=this._labels;if(i&&e){for(var o=void 0,r=[],n=this._valueSeparator,s=0,a=(t=lt.isArray(t)?t:n&&t?String(t).split(n):lt.makeArray(t)).length;s<a;s++)(o=i.indexOf(t[s]))>=0&&e.length>o?r.push(e[o]):r.push(t[s]);if(r.length>0&&n)return r.join(n);if(r.length>0)return r.join()}},Object.defineProperty(e.prototype,"$_filters",{get:function(){return this._autoFilter?this._autoFilters:this._filters},enumerable:!0,configurable:!0}),e.prototype.clearFilters=function(){this.setFilters(null)},e.prototype.addFilters=function(t,e){if(t){var i=this.grid;i&&!i.canFiltering()||this._filters.addAll(lt.makeArray(t),e)}},e.prototype.removeFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this._filters.removeItems(lt.makeArray(t))}},e.prototype.activateFilters=function(t,e){if(t){var i=this.grid;i&&!i.canFiltering()||this.$_filters.activateItems(lt.makeArray(t),e)}},e.prototype.activateAllFilters=function(t){var e=this.grid;e&&!e.canFiltering()||this.$_filters.activateAll(t)},e.prototype.hideColumnFilters=function(t,e){this.$_filters.hideFilters(lt.makeArray(t),e)},e.prototype.hideAllColumnFilters=function(t){this.$_filters.hideAllFilters(t)},e.prototype.toggleFilters=function(t){if(t){var e=this.grid;e&&!e.canFiltering()||this.$_filters.toggleItems(lt.makeArray(t))}},e.prototype.toggleAllFilters=function(){var t=this.grid;t&&!t.canFiltering()||this.$_filters.toggleAll()},e.prototype.getFilter=function(t){var e=this.$_filters,i=e.indexOf(t);return e.getItem(i)},e.prototype.getActiveFilters=function(t){return this.$_filters.getActiveItems(t)},Object.defineProperty(e.prototype,"hasFilters",{get:function(){return this._autoFilter||this._filters.count>0},enumerable:!0,configurable:!0}),e.prototype.isFiltered=function(){return this._autoFilter?this._autoFilters.activeCount>0:this._filters.activeCount>0},e.prototype.setFilters=function(t){var e=this.grid;e&&!e.canFiltering()||this._filters.assignFrom(t)},e.prototype.autoFilterRefresh=function(t){var e=this.grid,i=null==e?void 0:e.dataSource;if(e&&i&&this._autoFilter){var o=e.filterSelector._manager;o&&o.buildItems(this,i,!0,t)}},e.prototype.onColumnFilterChanged=function(t,e){var i=this.grid;i&&i.columnFilterChanged(t,e)},e.prototype._prepareLayout=function(e,i){t.prototype._prepareLayout.call(this,e,i)},e.prototype._resetIndices=function(t){this._dataIndex=-1,this._baseIndex=-1;var e=t.dataSource;if(e){if(this._fieldName?this._dataIndex=e.getFieldIndex(this._fieldName):this._dataIndex=this._fieldIndex,this._dataIndex>=0){e.getField(this._dataIndex);this._baseIndex=e.getBaseField(this._dataIndex),this._valueType=e.getValueType(this._dataIndex)}this._labelFieldIndex=e.getFieldIndex(this._labelField),this.$_resetLookup(t)}},e.prototype.isWritable=function(){var t=this.grid.editOptions;return(t.columnEditableFirst?null!=this._editable?this._editable:t.editable:1==t.editable&&!1!==this._editable)&&!this._readOnly},e.prototype.assignFrom=function(e){t.prototype.assignFrom.call(this,e)},e.prototype.$_setMergeGrouped=function(t){this._mergeGrouped=t},e.prototype.$_setGroupLevel=function(t){this._groupLevel=t},e.prototype.$_resetLookup=function(t){if(this._lookupKeyFields&&this._lookupKeyFields.length>0&&this._lookupSourceId){for(var e=this._lookupKeyFields.length,i=this._lookupKeyFieldIds=new Array(e),o=0;o<e;o++)i[o]=t.dataSource.getFieldIndex(this._lookupKeyFields[o]);this._lookupSource=t.lookupProvider.getSource(this._lookupSourceId)}else this._lookupSource=null,this._lookupKeyFieldIds=[]},e.prototype._changed=function(){t.prototype._changed.call(this)},e.CAPITAL_INDEXERS=["value","values"],e}(yn),bn=function(t){function e(e){var i=t.call(this)||this;return i._fieldArray=i._fieldArray||[],i._fields=i._fields||[],e&&i.assignFrom(e),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"fieldNames",{get:function(){return this._fieldNames},set:function(t){t!=this._fieldNames&&(this._fieldNames=t,this._fieldArray=t?t.split(","):[],this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fields",{get:function(){return this._fields},enumerable:!0,configurable:!0}),e.prototype._resetIndices=function(t){this._fields=[];var e=t.dataSource;if(e)for(var i=0,o=this._fieldArray.length;i<o;i++){var r=this._fieldArray[i],n=r.split("..");if(n.length>1){var s=e.getFieldIndex(n[0]),a=e.getFieldIndex(n[1]);if(s>=0&&a>=0)for(var l=Math.min(s,a),h=Math.max(s,a),u=l;u<=h;u++)this._fields.push(u)}else{(u=e.getFieldIndex(r))>=0&&this._fields.push(u)}}},e}(yn),vn=function(){function t(){this._layouts={}}return t.prototype._doDispose=function(){this._layouts=null},t.prototype.find=function(t){return this._layouts[t]},t.prototype.clear=function(){this._layouts={}},t.prototype.load=function(t){if(t=lt.makeArray(t),this._layouts={},t)for(var e=0,i=t.length;e<i;e++){var o=t[e];o.name&&!this._layouts[o.name]&&(this._layouts[o.name]=o.items)}},t}(),wn=function(t){function e(){var e=t.call(this)||this;return e._visible=!0,e._width=NaN,e._fillWidth=NaN,e._index=-1,e._vindex=-1,e._row=0,e._col=0,e._hrow=0,e._hcol=0,e._cspan=1,e._hspan=1,e._dspan=1,e._clen=1,e._hlen=1,e._dlen=1,e._cellWidth=0,e._fitWidth=NaN,e._defColSpan=1,e._header=e._createHeader(),e._header&&(e._header._layout=e),e}return o(e,t),e.compareLoc=function(t,e){if(null==t||null==e)return 0;if(null==t)return-1;if(null==e)return 1;var i=t.root.vindex,o=e.root.vindex;return i==o&&(t.group===e.group?(i=t.vindex,o=e.vindex):(i=t.dataRoot.vindex,o=e.dataRoot.vindex)),i-o},e.prototype._doDispose=function(){this._header=this._header&&this._header.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){if(this.$_grid)return this.$_grid;var t=this.root;return t&&t._parent.grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isProxy",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed(),this._propChanged("visible",this._visible,!this._visible))},enumerable:!0,configurable:!0}),e.prototype.$_isVisible=function(t){return this._visible},Object.defineProperty(e.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"owner",{get:function(){return this._parent&&this._parent.owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return this._parent instanceof Vn?null:this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){if(!this._root)for(var t=this;t;){if(t._parent instanceof Vn)return this._root=t;t=t._parent}return this._root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return this.root===this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataRoot",{get:function(){if(!this._dataRoot){var t=this.group;if(t)do{this._dataRoot=t,t=t.group}while(t);else this._dataRoot=this}return this._dataRoot},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vindex",{get:function(){return this._vindex},set:function(t){var e=this._vindex;if(this._parent&&this._parent.$_changeChildVIndex(this,t),this._vindex!=e){this._propChanged("displayIndex",this._vindex,e);var i=this.firstColumn;i&&this instanceof xn&&i.$_layoutIndexChanged(e,this._vindex)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"row",{get:function(){return this._row},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"col",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hrow",{get:function(){return this._hrow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hcol",{get:function(){return this._hcol},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._getWidth(this._width)},set:function(t){t=Math.max(0,t),this.grid&&(t=Math.max(t,this.grid.displayOptions.minCellWidth)),t!=this._width&&(this._width=t,this._parent&&this._parent._childWidthChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillWidth",{get:function(){return this._getFillWidth(this._fillWidth)},set:function(t){(t=Math.max(0,t))!=this._fillWidth&&(this._fillWidth=t,this._parent&&this._parent._childFillWidthChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"domWidth",{get:function(){if(!!this.grid&&this.grid.layoutManager.isColumnFitted){var t=this.grid,e=t.layoutManager,i=t.fixedOptions.colCount,o=e.cellCount,r=this.$_fixed?e._fixedCellPoints:this.$_rfixed?e._rightCellPoints:this.grid.layoutManager._cellPoints,n=this.$_fixed?this._col:this.$_rfixed?this._col-(o-i):this._col-i;return r[n+(this instanceof On?this._clen:this._defColSpan)]-r[n]}return this.cellWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"distance",{get:function(){return this._col},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cspan",{get:function(){return this._cspan},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hspan",{get:function(){return this._hspan},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hlen",{get:function(){return this._hlen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"merged",{get:function(){return this._merged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFixed",{get:function(){return this.$_fixed||this.$_rfixed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayText",{get:function(){return this._header&&this._header.text||this.toString()},enumerable:!0,configurable:!0}),e.prototype.load=function(t){void 0!==t.width&&(this.width=t.width),void 0!==t.header&&this._header.assignFrom(t.header),void 0!==t.fillWidth&&(this.fillWidth=t.fillWidth),void 0!==t.visible&&(this.visible=t.visible)},e.prototype.isColumn=function(t){return!1},e.prototype.cleanColumns=function(){},e.prototype.findLayout=function(t){return null},e.prototype.getHeaderSpan=function(){return 1},e.prototype.getSummarySpan=function(t){return 1},e.prototype.getFooterSpan=function(t){return 1},e.prototype.getDataSpan=function(){return 1},e.prototype.getGroupFooterSpan=function(t,e){return 1},e.prototype.getDataColumn=function(){return null},e.prototype.getFooterUserSpan=function(t){return null},e.prototype.getSummaryUserSpan=function(t){return null},e.prototype._createHeader=function(){return null},e.prototype._headerChanged=function(){this._changed()},e.prototype._prepareLayout=function(t,e,i){this.$_grid=t,this.$_fixed=e,this.$_rfixed=i,this._merged=!1},e.prototype._detach=function(){this._parent=void 0,this._index=-1,this._vindex=-1,this._row=-1,this._col=-1,this._cspan=1,this._hspan=1,this._dspan=1,this._clen=1,this._hlen=1,this._dlen=1,this._root=void 0,this._dataRoot=void 0},e.prototype._getWidth=function(t){return t},e.prototype._getFillWidth=function(t){return t},e.prototype.changeCellWidth=function(t,e,i){var o=i?this.cellWidth:this.domWidth,r=this.domWidth,n=t-o;if(e&&!i&&(n*=this.cellWidth/this._fitWidth),n=Math.round(n),this.owner){var s=this._col,a=void 0;a=this instanceof On?this._clen:this._defColSpan,this.owner.$_changeCellWidths(s,a,n),this.owner.$_calcGroupWidths()}setTimeout(function(){if(this.domWidth!=r){var t=this.firstColumn;this._propChanged("displayWidth",this.domWidth,r),t&&this instanceof xn&&t.$_layoutWidthChanged(r,this.domWidth)}}.bind(this),50)},e.prototype._setFitWidth=function(t){this._fitWidth=t},e.prototype._clearFitWidth=function(){this._fitWidth=NaN},e.prototype._changed=function(){this._parent&&this._parent._changed()},e.prototype.$_setMerged=function(t){this._merged=t},e.prototype._propChanged=function(t,e,i){var o=this.grid;o&&o._fireLayoutPropertyChanged(this,t,e,i)},e}(ft),Cn=function(t){function e(e,i){var o=t.call(this)||this;return o._source=e,o._index=i,o}return o(e,t),Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isProxy",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._source.visible},enumerable:!0,configurable:!0}),e.prototype.$_isVisible=function(t){return this._source.$_isVisible(t)},Object.defineProperty(e.prototype,"cols",{get:function(){return this._source.cols},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerRows",{get:function(){return this._source.headerRows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._source.rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this._source.root},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstColumn",{get:function(){return this._source.firstColumn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastColumn",{get:function(){return this._source.lastColumn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundColumn",{get:function(){return this._source.boundColumn},enumerable:!0,configurable:!0}),e.prototype.load=function(t){},e.prototype._isResizable=function(){return!1},e.prototype._isMovable=function(){return!1},e.prototype.clearMergeGrouped=function(){},e}(wn),xn=function(t){function e(e){var i=t.call(this)||this;return i._cellSpan=1,i._cellWidths=[],i._cols=1,i._rows=1,i._blanked=!1,i._column=e,i._columnObj=e instanceof yn?e:null,i}return o(e,t),e.prototype._doDispose=function(){this._column=this._columnObj=null,this._merges=this._merges&&this._merges.dispose(),this._mergeRuleObj=this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._equalBlankNode=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this.owner.getCellWidths(this._col,this._defColSpan)},set:function(t){var e=!!this.grid&&this.grid.layoutManager.isColumnFitted;this.changeCellWidth(t,e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"merges",{get:function(){return this._merges},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(t){if(t!==this._mergeRule){this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?tn.createRule(t):void 0===t?void 0:null;var e=this.grid;e&&e._columnMergeRuleChanged(this)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){if(t!==this._breakMergeOnEmpty){this._breakMergeOnEmpty=t;var e=this.grid;e&&e._columnMergeRuleChanged(this)}},enumerable:!0,configurable:!0}),e.prototype.isBreakMergeOnEmpty=function(){return void 0===this._breakMergeOnEmpty?this._columnObj instanceof mn&&this._columnObj.breakMergeOnEmpty:this._breakMergeOnEmpty},Object.defineProperty(e.prototype,"equalBlank",{get:function(){return this._equalBlank},set:function(t){t!==this._equalBlank&&(this._equalBlank=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equalBlankNode",{get:function(){return this._blankNodeRun},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blanked",{get:function(){return this._blanked},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"equalBlankExpression",{get:function(){return this._equalBlankExpression},set:function(t){t!==this._equalBlankExpression&&(this._equalBlankExpression=t,this._equalBlankNode=t?ee.Default.parse(t,null):void 0===t?void 0:null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellSpan",{get:function(){return this._cellSpan},set:function(t){(t=Math.max(1,t))!=this._cellSpan&&(this._cellSpan=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerSpan",{get:function(){return this._headerSpan},set:function(t){t!=this._headerSpan&&(void 0!==t&&(t=Math.max(1,t)),this._headerSpan=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summarySpan",{get:function(){return this._summarySpans?this._summarySpans[0]:void 0},set:function(t){this._summarySpans=this._summarySpans||[],t!=this._summarySpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._summarySpans[0]=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summarySpans",{get:function(){return this._summarySpans&&this._summarySpans.slice()},set:function(t){t!==this._summarySpans&&(this._summarySpans=t&&t.slice(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerSpan",{get:function(){return this._footerSpans&&this._footerSpans[0]},set:function(t){this._footerSpans=this._footerSpans||[],t!=this._footerSpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._footerSpans[0]=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerSpans",{get:function(){return this._footerSpans&&this._footerSpans.slice()},set:function(t){t!==this._footerSpans&&(this._footerSpans=t&&t.slice(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSpan",{get:function(){return this._dataSpan},set:function(t){t!=this._dataSpan&&(void 0!==t&&(t=Math.max(1,t)),this._dataSpan=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupFooterSpan",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans[0]},set:function(t){this._groupFooterSpans=this._groupFooterSpans||[],t!=this._groupFooterSpans[0]&&(void 0!==t&&(t=Math.max(1,t)),this._groupFooterSpans[0]=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupFooterSpans",{get:function(){return this._groupFooterSpans&&this._groupFooterSpans.slice()},set:function(t){t!==this._groupFooterSpans&&(this._groupFooterSpans=t&&t.slice(),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spanCallback",{get:function(){return this._spanCallback},set:function(t){t!=this._spanCallback&&(this._spanCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summarySpanCallback",{get:function(){return this._summarySpanCallback},set:function(t){t!=this._summarySpanCallback&&(this._summarySpanCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerSpanCallback",{get:function(){return this._footerSpanCallback},set:function(t){t!=this._footerSpanCallback&&(this._footerSpanCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupFooterSpanCallback",{get:function(){return this._groupFooterSpanCallback},set:function(t){t!=this._groupFooterSpanCallback&&(this._groupFooterSpanCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerUserSpans",{get:function(){return this._footerUserSpans},set:function(t){this._footerUserSpans=lt.makeArray(t,!0).slice(),this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summaryUserSpans",{get:function(){return this._summaryUserSpans},set:function(t){this._summaryUserSpans=lt.makeArray(t,!0).slice(),this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupFooterUserSpans",{get:function(){return this._groupFooterUserSpans},set:function(t){this._groupFooterUserSpans=lt.makeArray(t,!0).slice(),this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupFooterUserSpanCallback",{get:function(){return this._groupFooterUserSpanCallback},set:function(t){t!=this._groupFooterUserSpanCallback&&(this._groupFooterUserSpanCallback=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.canMerge=function(){if(null!=this._mergeRuleObj)return!0;if(this._columnObj instanceof mn){if(this._columnObj.mergeGrouped)return!0;if(void 0===this._mergeRuleObj)return null!=this._columnObj._mergeRuleObj}},Object.defineProperty(e.prototype,"isNull",{get:function(){return!this._columnObj},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerRows",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstColumn",{get:function(){return this._columnObj},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastColumn",{get:function(){if(this._columnObj)return this._columnObj;for(var t=this.parent.visibles,i=t.indexOf(this);i-- >0;){var o=t[i];if(o instanceof e&&o.lastColumn)return o.lastColumn}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundColumn",{get:function(){return this._columnObj},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayText",{get:function(){return this._header&&this._header.text||this._columnObj&&this._columnObj.displayText||this.toString()},enumerable:!0,configurable:!0}),e.prototype.getHeaderSpan=function(){return void 0===this._headerSpan?this._cellSpan:this._headerSpan},e.prototype.getSummarySpan=function(t){var e,i=this._summarySpanCallback,o=this._summarySpans;return i?void 0===(e=i(this.grid.handler,this,t))&&o&&o.length>t&&(e=o[t]):o&&o.length>t&&(e=o[t]),void 0===e?this._cellSpan:e},e.prototype.getFooterSpan=function(t){var e,i=this._footerSpanCallback,o=this._footerSpans;return i?void 0===(e=i(this.grid.handler,this,t))&&o&&o.length>t&&(e=o[t]):o&&o.length>t&&(e=o[t]),void 0===e?this._cellSpan:e},e.prototype.getFooterUserSpan=function(t){return this._footerUserSpans&&this._footerUserSpans[t]},e.prototype.getSummaryUserSpan=function(t){return this._summaryUserSpans&&this._summaryUserSpans[t]},e.prototype.getGroupFooterUserSpan=function(t,e){var i,o=this._groupFooterUserSpanCallback;return o&&(i=o(this.grid.handler,this,t,t.index,e)),i||this._groupFooterUserSpans&&this._groupFooterUserSpans[e]},e.prototype.getGroupFooterSpan=function(t,e){var i,o=this._groupFooterSpanCallback,r=this._groupFooterSpans;return o?void 0===(i=o(this.grid.handler,this,t,e))&&r&&r.length>e&&(i=r[e]):r&&r.length>e&&(i=r[e]),void 0===i?this._cellSpan:i},e.prototype.getDataSpan=function(){return void 0===this._dataSpan?this._cellSpan:this._dataSpan},e.prototype.getDataColumn=function(){return this._columnObj},e.prototype._createHeader=function(){return new En(this)},e.prototype._isResizable=function(){return!this._columnObj||this._columnObj.resizable},e.prototype._isMovable=function(){for(var t=!0,e=this.parent;e;)t=t&&e.childColumnMovable,e=e.parent;return t&&(!this._columnObj||this._columnObj.movable)},e.prototype.isColumn=function(t){return this._columnObj===t},e.prototype.findLayout=function(t){return t&&this._columnObj===t?this:null},e.prototype.load=function(e){if(this.assignFrom(e),t.prototype.load.call(this,e),!this._columnObj&&"string"==typeof this._column){var i=this.owner&&this.owner.grid;this._columnObj=i?i.columnByName(this._column):null}},e.prototype.cleanColumns=function(){this._columnObj&&this._columnObj.clean()},e.prototype.$_isVisible=function(t){return t?this._visible:this._visible&&(!this._columnObj||this._columnObj.visible)},e.prototype._getWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.width:NaN:t},e.prototype._getFillWidth=function(t){return isNaN(t)?this._columnObj?this._columnObj.fillWidth:NaN:t},e.prototype._prepareLayout=function(e,i,o){if(t.prototype._prepareLayout.call(this,e,i,o),this._columnObj){this._columnObj._prepareLayout(e,this);var r=this.parent.direction===rr.VERTICAL?this.cellSpan+this._dspan-1:this._dspan;(this._blanked=r===this.owner.dataRows)&&(this._blankNodeRun=this._equalBlankNode,this._blanked=this._equalBlank||null!=this._blankNodeRun,this._blanked||(void 0===this._equalBlankNode&&(this._blanked=null!=(this._blankNodeRun=this._columnObj._equalBlankNode)),this._blanked||void 0!==this._equalBlank||(this._blanked=this._columnObj._equalBlank)))}},e.prototype.toString=function(){return"string"==typeof this._column?this._column:t.prototype.toString.call(this)},e.prototype.clearMergeGrouped=function(){this.firstColumn instanceof mn&&this.firstColumn.$_setMergeGrouped(!1)},e.prototype.$_bindColumn=function(t,e,i){if(void 0===i&&(i=!1),this._columnObj||(this._columnObj=e.columnByName(this._column)),this._columnObj){var o=this._columnObj.$_hash;if(t[o])throw"Column is already contained in layouts: "+(this._columnObj.name||this._columnObj.displayText);i||(this._columnObj._layout=this),!i&&(this._columnObj._layout=this),t[o]=this}},e.prototype.$_mergeRuleObj=function(){return this._mergeRuleObj?this._mergeRuleObj:void 0===this._mergeRuleObj&&this._columnObj instanceof mn?this._columnObj._mergeRuleObj:null},e}(wn);!function(t){t.VERTICAL="vertical",t.HORIZONTAL="horizontal"}(rr||(rr={}));var In,En=function(t){function e(e){var i=t.call(this)||this;return i._layout=e,i}return o(e,t),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this.layout.firstColumn.header.styleName},set:function(t){this.layout.firstColumn.header.styleName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this.layout.firstColumn.header.exportStyleName},set:function(t){this.layout.firstColumn.header.exportStyleName=t},enumerable:!0,configurable:!0}),e.prototype.isVisible=function(){return!0},e.prototype.getDisplayText=function(){return this._text},e.prototype.doAssignSimple=function(t){return"string"==typeof t&&(this.text=t,!0)},e.prototype._changed=function(){this._layout&&this._layout._headerChanged()},e}(ft),Sn=function(t){function e(e){var i=t.call(this,e)||this;return i._visible=!0,i._showTooltip=!0,i}return o(e,t),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return this._template&&this._template.template},set:function(t){t!=this.template&&(t?(this.template||(this._template=new vr),this._template.template=t):this._template=void 0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(t){t!==this._values&&(t?lt.extendObj(t,this._values={}):this._values=void 0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!==this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){t!==this._tooltip&&(this._tooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){t!==this._edgeMark&&(this._edgeMark=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!==this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!0,configurable:!0}),e.prototype.realizeTemplate=function(){var t=this._template;return t?t.realizeHeader(this,null,this._layout.grid):void 0},e.prototype.getValue=function(t){return this._values&&this._values[t]},e.prototype.doAssignSimple=function(e){return!t.prototype.doAssignSimple.call(this,e)&&"boolean"==typeof e&&(this.visible=e,!0)},e.prototype.isVisible=function(){return this._visible},e.prototype.getDisplayText=function(){return this.text||this.layout.name},Object.defineProperty(e.prototype,"displayText",{get:function(){return this.getDisplayText()},enumerable:!0,configurable:!0}),e}(En),On=function(t){function e(e,i){var o=t.call(this)||this;return o._direction=rr.HORIZONTAL,o._items=[],o._resizable=!0,o._movable=!0,o._hideChildHeaders=!1,o._childColumnMovable=!0,o._visibles=[],o._cols=0,o._rows=0,o._headerRows=0,o._name=e,o._direction=i==rr.VERTICAL?rr.VERTICAL:rr.HORIZONTAL,o}return o(e,t),e.getRight=function(t){var i=t&&t.parent;return i?((t=i.rightOf(t))||(t=e.getRight(i)),t):null},e.getLeft=function(t){var i=t&&t.parent;return i?((t=i.leftOf(t))||(t=e.getLeft(i)),t):null},e.getNext=function(t){var i=t&&t.parent;return i?((t=i.nextOf(t))||(t=e.getNext(i)),t):null},e.getPrev=function(t){var i=t&&t.parent;return i?((t=i.prevOf(t))||(t=e.getPrev(i)),t):null},e.getLower=function(t){var i=t&&t.parent;return i?((t=i.lowerOf(t))||(t=e.getLower(i)),t):null},e.getUpper=function(t){var i=t&&t.parent;return i?((t=i.upperOf(t))||(t=e.getUpper(i)),t):null},e.isTop=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&e.visibleCount>1&&t.vindex>0)return!1;e=(t=e).parent}return!0},e.isBottom=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&e.visibleCount>1&&t.vindex<e.visibleCount-1)return!1;e=(t=e).parent}return!0},e.isLeft=function(t){for(var e=t&&t.parent;e;){if(!e.vertical&&e.visibleCount>1&&t.vindex>0)return!1;e=(t=e).parent}return!0},e.isRight=function(t){for(var e=t&&t.parent;e;){if(e.vertical&&e.visibleCount>1&&t.vindex<e.visibleCount-1)return!1;e=(t=e).parent}return!0},e.prototype._doDispose=function(){this._items.forEach((function(t){t&&t.dispose()})),this._visibles=this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){t!=rr.VERTICAL&&(t=rr.HORIZONTAL),t!=this._direction&&(this._direction=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){return this._direction==rr.VERTICAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horizontal",{get:function(){return this._direction!=rr.VERTICAL},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this._resizable},set:function(t){this._resizable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return this._movable},set:function(t){this._movable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideChildHeaders",{get:function(){return this._hideChildHeaders},set:function(t){t!=this._hideChildHeaders&&(this._hideChildHeaders=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childColumnMovable",{get:function(){return this._childColumnMovable},set:function(t){this._childColumnMovable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items.slice()},set:function(t){this._items=t?t.slice():[];for(var e=0,i=this._items;e<i.length;e++){i[e]._parent=this}this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleCount",{get:function(){return this._visibles.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibles",{get:function(){return this._visibles.slice()},enumerable:!0,configurable:!0}),e.prototype.$_isVisible=function(t){return this.visible&&this._visibles.length>0},e.prototype.contains=function(t){for(var e=0,i=this._items;e<i.length;e++){if(i[e]===t)return!0}return!1},e.prototype.indexOf=function(t){for(var e=0;e<this._items.length;e++)if(this._items[e]===t)return e;return-1},e.prototype.getItem=function(t){return this._items[t]},e.prototype.getVisible=function(t){return this._visibles[t]},e.prototype.addColumn=function(t,e){var i=new xn(t);this.addItem(i,e)},e.prototype.addItem=function(t,e){void 0===e&&(e=this._items.length),null!=t&&e>=0&&e<=this._items.length&&(this._items.splice(e,0,t),t._parent=this,this._changed())},e.prototype.removeColumn=function(t){var e=t.layout;this.removeItem(e)},e.prototype.clear=function(t){void 0===t&&(t=!0);for(var i=0,o=this._items;i<o.length;i++){var r=o[i];t&&r instanceof e&&r.clear(),r._detach()}this._items=[],this._visibles=[],this._cols=0,this._rows=0,this._headerRows=0},e.prototype.removeItem=function(t){var e=this.indexOf(t);e>=0&&(this._items.splice(e,1),t._detach(),this._changed())},e.prototype.removeItemAt=function(t){t>=0&&t<this._items.length&&this._items.splice(t,1)[0]._detach()},e.prototype.moveItem=function(t,e){var i=this._items.length;if(t!=e&&t>=0&&t<i&&e>=0&&e<i){var o=this._items[t];this._items.splice(t,1),this._items.splice(e,0,o)}},e.prototype.getColumn=function(t,e,i){var o=this.$_getLeaf(e,i).column;return"string"==typeof o?t.columnByName(o):o},e.prototype.findItem=function(t){if(t)for(var i=0,o=this._items;i<o.length;i++){var r=o[i];if(r instanceof xn&&r.column===t)return r;if(r instanceof e){var n=r.findItem(t);if(n)return n}}return null},e.prototype.layoutByName=function(t){if(t)for(var i=0,o=this._items;i<o.length;i++){var r=o[i];if(r instanceof xn&&r.firstColumn.name===t)return r;if(r instanceof e){if(r.name===t)return r;var n=r.layoutByName(t);if(n)return n}}return null},e.prototype.rightOf=function(t){if(this.horizontal)try{var e=this.$_checkVisible(t);if(e<this.visibleCount-1)return t=Rn(this,e+1)}catch(t){}return null},e.prototype.leftOf=function(t){if(this.horizontal)try{var e=this.$_checkVisible(t);if(e>0)return t=Dn(this,e-1)}catch(t){}return null},e.prototype.nextOf=function(t){try{var e=this.$_checkVisible(t);if(e<this.visibleCount-1)return t=kn(this,e+1)}catch(t){}return null},e.prototype.prevOf=function(t){try{var e=this.$_checkVisible(t);if(e>0)return t=Pn(this,e-1)}catch(t){}return null},e.prototype.lowerOf=function(t){if(this.vertical)try{var e=this.$_checkVisible(t);if(e<this.count-1)return t=Tn(this,e+1)}catch(t){}return null},e.prototype.upperOf=function(t){if(this.vertical)try{var e=this.$_checkVisible(t);if(e>0)return t=Mn(this,e-1)}catch(t){}return null},e.prototype._clearFitWidth=function(){t.prototype._clearFitWidth.call(this);for(var e=0,i=this._visibles;e<i.length;e++){i[e]._clearFitWidth()}},Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this.owner.getCellWidths(this._col,this._clen)},set:function(t){var e=!!this.grid&&this.grid.layoutManager.isColumnFitted;this.changeCellWidth(t,e,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cols",{get:function(){return this._cols},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerRows",{get:function(){return this._headerRows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rows",{get:function(){return this._rows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this._visibles.length>0?this._visibles[0].first:this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){var t=this._visibles?this._visibles.length:0;return t>0?this._visibles[t-1].last:this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstColumn",{get:function(){return this._visibles&&this._visibles.length>0?this._visibles[0].firstColumn:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastColumn",{get:function(){for(var t=this._visibles?this._visibles.length-1:-1;t>=0;t--){var e=this._visibles[t].lastColumn;if(e)return e}return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boundColumn",{get:function(){return this.firstColumn},enumerable:!0,configurable:!0}),e.prototype._createHeader=function(){return new Sn(this)},e.prototype.load=function(e){this.clear(),void 0!==e.hideChildHeaders&&(this.hideChildHeaders=e.hideChildHeaders),e.items&&this._loadItems(e.items),t.prototype.load.call(this,e)},e.prototype.findLayout=function(t){for(var e=0,i=this._items;e<i.length;e++){var o=i[e].findLayout(t);if(o)return o}return null},e.prototype.cleanColumns=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).cleanColumns()},e.prototype._isResizable=function(){return this._resizable},e.prototype._isMovable=function(){for(var t=this._movable,e=this.parent;e;)t=t&&e.childColumnMovable,e=e.parent;return t},e.prototype._setFitWidth=function(e){if(t.prototype._setFitWidth.call(this,e),this.vertical)for(var i=0,o=this._visibles;i<o.length;i++){if((u=o[i])instanceof xn){var r=u._cellWidth/this.cellWidth*e;u._setFitWidth(r)}else u._setFitWidth(e)}else{for(var n=0,s=0,a=this._visibles;s<a.length;s++){n+=(u=a[s])._cellWidth}for(var l=0,h=this._visibles;l<h.length;l++){var u;r=(u=h[l])._cellWidth/n*e;u._setFitWidth(r)}}},e.prototype._prepareLayout=function(e,i,o){t.prototype._prepareLayout.call(this,e,i,o);for(var r=0,n=this._visibles;r<n.length;r++){n[r]._prepareLayout(e,i,o)}},e.prototype.toString=function(){return this._name||t.prototype.toString.call(this)},e.prototype.clearMergeGrouped=function(){for(var t=0,e=this.items.length;t<e;t++)this.getItem(t).clearMergeGrouped()},e.prototype._loadItems=function(t){for(var i,o=0,r=0,n=t;r<n.length;r++){var s=n[r],a=void 0;o++,"string"==typeof s?i=a=new xn(s):"number"==typeof s?(a=new Cn(i,o))._width=s:s&&(s.items?a=new e(s.name,s.direction):i=a=new xn(s.column)),a&&(a._parent=this,a.load(s),this._items.push(a))}},e.prototype.$_bindColumns=function(t,i,o){for(var r=0,n=this._items;r<n.length;r++){var s=n[r];s._root=null,s instanceof e?s.$_bindColumns(t,i,o):!s.isProxy&&s.$_bindColumn(t,i,o)}},e.prototype.$_parseHeaderCells=function(t,i,o){var r=this._direction===rr.HORIZONTAL,n=0,s=this._header.isVisible()?1:0;if(s&&this._hideChildHeaders)return this._cspan=this._clen=this._cols,void(this._hlen=this._headerRows);for(var a=0,l=this._visibles;a<l.length;a++){var h=l[a],u=!h.isProxy&&h.header.isVisible()||h.isProxy&&!r?1:0;if(h._hrow=i,h._hcol=o,h._hspan=u,h._hlen=u,h instanceof e)if(u>0&&(t[i][o]=h),h.$_parseHeaderCells(t,i+u,o),u>0)if(r){o++;for(var c=1;c<h.cols;c++)t[i][o++]=new Cn(h,c)}else{for(c=1;c<h.cols;c++)t[i][o+c]=new Cn(h,c);i+=h.headerRows}else r?o+=h.cols:i+=h.headerRows;else if(t[i][o]=h,r){for(c=1;c<this.headerRows-s;c++)t[i+c][o]=new Cn(h,c),h._hspan++;h._hlen=h._hspan,o+=h.cols}else{for(c=1;c<this.cols;c++)t[i][o+c]=new Cn(h,c);i+=h.rows}r?n=Math.max(h._hlen,n):n+=h._hlen}this._hlen=r?n+s:Math.max(1,n+s)},e.prototype.$_fillHorz=function(t,e,i,o,r,n,s){for(var a=o+n,l=r,h=l+i-1,u=0,c=e-n;u<c;u++)for(var d=h;d>=l;d--){var p=t[a+u][d];if(null!=p){p instanceof Cn&&(p=p.source);for(var _=d+1;_<=h;_++){var f=t[a+u][_]=new Cn(p,_-l);s?(f._hrow=a+u,f._hcol=_):(f._row=a+u,f._col=_,p.row===f.row&&(p._cspan++,p instanceof xn&&p._clen++))}break}}},e.prototype.$_fillVert=function(t,e,i,o,r,n,s){for(var a=o+n,l=o+e-1,h=r+i-1,u=r;u<=h;u++)for(var c=l;c>=a;c--){var d=t[c][u];if(null!=d){d instanceof Cn&&(d=d.source);for(var p=c+1;p<=l;p++){var _=t[p][u]=new Cn(d,p-a);s?(_._hrow=p,_._hcol=u,d.hcol===_.hcol&&(d._hspan++,d instanceof xn&&d._hlen++)):(_._row=p,_._col=u,d.col===_.col&&(d._dspan++,d instanceof xn&&d._dlen++))}break}}},e.prototype.$_adjustHeaderCells=function(t){var i=this._header.isVisible()?1:0;if(i&&this._hideChildHeaders){this._hspan=this._hlen;for(var o=0,r=0;r<this._hlen;r++)for(var n=0;n<this._clen;n++)if(r||n){var s=this._hrow+r,a=this._hcol+n,l=t[s][a]=new Cn(this,o++);l._hrow=s,l._hcol=a}}else if(this._direction===rr.VERTICAL){for(var h=this._clen,u=0,c=this._visibles;u<c.length;u++){(_=c[u])instanceof e&&(_._clen=this._clen,_.$_adjustHeaderCells(t))}this.$_fillVert(t,this._hlen,h,this._hrow,this._hcol,i,!0),this.$_fillHorz(t,this._hlen,h,this._hrow,this._hcol,i,!0)}else{for(var d=0,p=this._visibles;d<p.length;d++){var _;(_=p[d])instanceof e&&(_._hlen=this._hlen-i,_.$_adjustHeaderCells(t))}this.$_fillVert(t,this._hlen,this._cols,this._hrow,this._hcol,i,!0),this.$_fillHorz(t,this._hlen,this._cols,this._hrow,this._hcol,i,!0)}},e.prototype.$_parseDataCells=function(t,i,o){for(var r,n=this._direction!=rr.VERTICAL,s=0,a=0,l=0,h=this._visibles;l<h.length;l++){var u=h[l];if(u._row=i,u._col=o,u._dspan=1,u._dlen=1,u._cspan=1,u._clen=1,u instanceof e){if(u.$_parseDataCells(t,i,o),n)o+=u.cols;else if(i+=u.rows,2==this.rows){for(var c=1/0,d=0,p=0,_=this.visibles;p<_.length;p++){var f=_[p];c=Math.min(c,f.cols),d=Math.max(d,f.cols)}if(1===c&&d>1)for(var g=0,y=this.visibles;g<y.length;g++){(f=y[g]).ignoreCalcWidth=1===f.cols}}}else if(t[i][o]=u,n){for(var m=1;m<this.rows;m++)t[i+m][o]=r=new Cn(u,m),u._dspan++,r._col=o,r._row=i+m;u._dlen=u._dspan,o+=u.cols}else{for(m=1;m<this.cols;m++)t[i][o+m]=r=new Cn(u,m),u._cspan++,r._col=o+m,r._row=i;u._clen=u._cspan,i+=u.rows}n?(a+=u._clen,s=Math.max(u._dlen,s)):(a=Math.max(u._clen,a),s+=u._dlen)}n?(a=Math.max(1,a),this._dlen=s):this._dlen=Math.max(1,s),this._cspan=this._clen=a},e.prototype.$_adjustDataCells=function(t){if(this._direction===rr.VERTICAL){for(var i=0,o=this._visibles;i<o.length;i++){(s=o[i])instanceof e&&(s._cspan=s._clen=this._clen,s.$_adjustDataCells(t))}this.$_fillVert(t,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(t,this._dlen,this._clen,this._row,this._col,0,!1)}else{for(var r=0,n=this._visibles;r<n.length;r++){var s;(s=n[r])instanceof e&&(s._dlen=this._dlen,s.$_adjustDataCells(t))}this.$_fillVert(t,this._dlen,this._clen,this._row,this._col,0,!1),this.$_fillHorz(t,this._dlen,this._clen,this._row,this._col,0,!1)}},e.prototype.$_calcSpans=function(){var t=this._header.isVisible();if(this._direction==rr.HORIZONTAL){for(var i=0,o=1,r=1,n=0,s=this._visibles;n<s.length;n++){(c=s[n])instanceof e&&c.$_calcSpans(),i+=c.cols,o=Math.max(o,c.headerRows),r=Math.max(r,c.rows)}this._rows=r,this._cols=i,t&&this._hideChildHeaders?this._headerRows=1:this._headerRows=o+(t?1:0)}else{this._cols=1,this._headerRows=t?1:0,this._rows=0;for(var a=0,l=this._visibles;a<l.length;a++){(c=l[a])instanceof e&&c.$_calcSpans(),this._headerRows+=c.headerRows,this._rows+=c.rows,this._cols=Math.max(c.cols,this._cols)}for(var h=0,u=this._visibles;h<u.length;h++){var c;(c=u[h])instanceof e&&(c._cols=this._cols)}t&&this._hideChildHeaders&&(this._headerRows=1)}},e.prototype.$_resetVisibles=function(t){var i=0,o=0,r=this.visibles;this._visibles=[];for(var n=0,s=this._items;n<s.length;n++){var a=s[n];a._index=i++,a instanceof e&&a.$_resetVisibles(t),a.$_isVisible(t)&&(this._visibles.push(a),a._vindex=o++)}if(!(t||this instanceof Vn||r.length==this._visibles.length||this.direction!==rr.HORIZONTAL))for(var l=this;l;)l._cellWidth=NaN,l.width=NaN,l=l.parent;this.$_calcSpans()},e.prototype.$_getLeaf=function(t,i){for(var o=0,r=this._visibles;o<r.length;o++){var n=r[o];if(n instanceof e){var s=n.row,a=s+n.rows;if(t>=s&&t<a){var l=n.col,h=l+n.cols;if(i>=l&&i<h)return this.$_getLeaf(t-s,i-l)}}else if(n.row===t&&n.col===i)return n}return null},e.prototype.$_collectCellWidths=function(t){for(var i=[],o=0,r=this._visibles;o<r.length;o++){var n=r[o],s=n._cellWidth||n.width;if(n instanceof xn&&isNaN(s)&&(s=t),n instanceof e){var a=n.$_collectCellWidths(t);isNaN(s)&&(s=a),n._cellWidth=s}else n._cellWidth=s;i.push(s)}var l=this.width;return isNaN(l)&&(l=this.vertical?Math.max.apply(null,i):i.reduce((function(t,e){return t+e}),0)),l},e.prototype.$_arrangeCellWidths=function(){var t=this._visibles.length;if(!(t<1)){var i=this._cellWidth||this.width,o=this._visibles;if(!isNaN(i))if(this.vertical)for(var r=0;r<t;r++)o[r]instanceof e&&(o[r]._cellWidth=i);else{for(var n=0,s=0,a=o;s<a.length;s++){n+=(h=a[s])._cellWidth}var l=0;for(r=0;r<t-1;r++){var h=o[r],u=Math.floor(i*h._cellWidth/n);o[r]._cellWidth=u,l+=u}o[t-1]._cellWidth=i-l}for(var c=0,d=o;c<d.length;c++){(h=d[c])instanceof e&&h.$_arrangeCellWidths()}}},e.prototype.$_calcCellWidths=function(t,e,i){if(!i){for(var o=e.slice(),r=0;r<o.length;r++)o[r]=0;var n=this.owner._moveColumn,s=t.slice();if(n){var a=s.splice(n.first.row,1);s.splice(0,0,a[0])}for(var l=0;l<s.length;l++)for(var h=s[l],u=0;u<h.length;u++){var c=h[u];n?e[u]=e[u]||c._cellWidth:c.isProxy&&!(c._cellWidth>0)||c.ignoreCalcWidth||(e[u]+=c._cellWidth,o[u]++)}for(r=0;r<e.length;r++)e[r]=Math.round(e[r]/Math.max(o[r],1))}for(l=0;l<t.length;l++)for(h=t[l],u=0;u<h.length;u++){h[u]._cellWidth=e[u]}},e.prototype._childIndexChanged=function(t){this.parent&&this.parent._childIndexChanged(t)},e.prototype._childWidthChanged=function(t){this.parent&&this.parent._childWidthChanged(t)},e.prototype._childFillWidthChanged=function(t){this.parent&&this.parent._childFillWidthChanged(t)},e.prototype.$_checkVisible=function(t){var e;if(!t||(e=t.vindex)<0||t!==this.getVisible(e))throw new Error("Column is not a visible group member");return e},e.prototype.$_collectHorzColumns=function(t,i,o){if(this.horizontal)for(var r=i;r<=o;r++){var n=this._visibles[r];n instanceof e?n.$_collectHorzColumns(t,0,n.visibleCount-1):n instanceof xn&&t.push(n._columnObj)}},e.prototype.$_changeChildVIndex=function(t,e){t&&(e!=t.vindex&&e>=0&&e<this._visibles.length&&this.$_changeChildIndex(t,this._visibles[e].index))},e.prototype.$_changeChildIndex=function(t,e){if(t){var i=t.index;if(i!=e&&e>=0&&e<this._items.length){e=e<=i?e:e+(this._items[e].getHeaderSpan()-1)-(t.getHeaderSpan()-1);for(var o=this._items.splice(i,t.getHeaderSpan()),r=0;r<o.length;r++)this._items.splice(e+r,0,o[r]);this.$_resetVisibles(),this._childIndexChanged(t)}}},e}(wn),Rn=function(t,e){for(var i=e,o=t.visibleCount;i<o;i++){var r=t.getVisible(i);if(r instanceof xn)return r;if(r instanceof On&&(r=r.first)instanceof xn)return r}return null},Dn=function(t,e){for(var i=e;i>=0;i--){var o=t.getVisible(i);if(o instanceof xn)return o;if(o instanceof On&&(o=o.last)instanceof xn)return o}return null},kn=function(t,e){for(var i=e,o=t.visibleCount;i<o;i++){var r=t.getVisible(i);if(r instanceof xn)return r;if(r instanceof On&&(r=r.first)instanceof xn)return r}return null},Pn=function(t,e){for(var i=e;i>=0;i--){var o=t.getVisible(i);if(o instanceof xn)return o;if(o instanceof On&&(o=o.last)instanceof xn)return o}return null},Tn=function(t,e){for(var i=e,o=t.visibleCount;i<o;i++){var r=t.getVisible(i);if(r instanceof xn)return r;if(r instanceof On&&(r=r.first)instanceof xn)return r}return null},Mn=function(t,e){for(var i=e;i>=0;i--){var o=t.getVisible(i);if(o instanceof xn)return o;if(o instanceof On)for(var r=0;r<o.visibleCount;r++){var n=o.getVisible(r);if(n instanceof xn&&n.col==t.col)return n}}return null},Ln=function(t,e,i){for(var o=i?t.visibleCount:t.count,r=0;r<o;r++){var n=i?t.getVisible(r):t.getItem(r);if(n instanceof xn){var s=n._columnObj;s&&e.push(s)}else n instanceof On&&Ln(n,e,i)}},Fn=function(t,e,i,o,r){for(var n=o?t.visibleCount:t.count,s=0;s<n;s++){var a=o?t.getVisible(s):t.getItem(s);if(a instanceof xn&&!r){var l=a._columnObj;l&&e.push(l.name)}else a instanceof On&&((!i||r)&&e.push(a.name),Fn(a,e,i,o,r))}},Nn=function(t,e,i){for(var o=i?t.visibleCount:t.count,r=0;r<o;r++){var n=i?t.getVisible(r):t.getItem(r);if(n instanceof xn){var s=n._columnObj;s instanceof mn&&e.push(s)}else n instanceof On&&Nn(n,e,i)}},Vn=function(t){function e(e){var i=t.call(this,"$_root_$",null)||this;return i._owner=e,i.header._visible=!1,i}return o(e,t),Object.defineProperty(e.prototype,"cellWidth",{get:function(){return this._cellWidth},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.resetColumns=function(t){this.items.length>0&&(this.$_bindColumns({},t,!1),this.$_resetVisibles(!1))},Object.defineProperty(e.prototype,"grid",{get:function(){return this._owner.grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this},enumerable:!0,configurable:!0}),e.prototype._changed=function(){this._owner&&this._owner._changed()},e.prototype._childIndexChanged=function(t){this._owner._itemIndexChanged(t)},e.prototype._childWidthChanged=function(t){this._owner._itemWidthChanged(t)},e.prototype._childFillWidthChanged=function(t){this._owner._itemFillWidthChanged(t)},e.prototype._setColumns=function(t){var e=this._items;e.length=0;for(var i=0,o=t.count;i<o;i++){var r=new xn(t.getColumn(i));e.push(r),r._parent=this}this.resetColumns(t)},e}(On),Bn=function(t){function e(e){var i=t.call(this)||this;return i._cellWidths=[],i._grid=e,i._root=new Vn(i),i}return o(e,t),e.prototype._doDispose=function(){this._grid=null,this._root=this._root.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._root.count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleCount",{get:function(){return this._root.visibleCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerRows",{get:function(){return this._root._hlen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataRows",{get:function(){return this._root._dlen},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"first",{get:function(){return this._root.first},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"last",{get:function(){return this._root.last},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstColumn",{get:function(){return this._root.firstColumn},enumerable:!0,configurable:!0}),e.prototype.load=function(t){return this.$_clear(),this._root._loadItems(t),this._changed(),this},e.prototype.resetColumns=function(t){this._root.resetColumns(t)},e.prototype.cleanColumns=function(){this._root.cleanColumns()},e.prototype.invalidate=function(){this._changed()},e.prototype.invalidateIndices=function(t){this.grid.displayOptions.remergeWhenColumnMoved&&this.grid._populateMerges(),this.grid.clearSelection(),this._moveColumn=t,this._changed()},e.prototype.invalidateSize=function(){this._resized||(this._resized=!0,this.grid.invalidateCellLayouts())},e.prototype.getVisible=function(t){return this._root.getVisible(t)},e.prototype.add=function(t,e,i){(t=t||this._root).addColumn(e,i)},e.prototype.remove=function(t,e){(t=t||this._root).removeColumn(e)},e.prototype.setColumns=function(t){this._root._setColumns(t),this._changed()},e.prototype.layoutByColumn=function(t){return t&&this._root.findLayout(t)},e.prototype.layoutByName=function(t){return t&&this._root.layoutByName(t)},e.prototype.getHeaderCellPos=function(t){for(var e=0;e<this._headerCells.length;e++)for(var i=this._headerCells[e],o=0;o<i.length;o++)if(i[o]instanceof xn&&i[o]._columnObj===t)return{row:e,col:o}},e.prototype.getDataCellPos=function(t){for(var e=0;e<this._dataCells.length;e++)for(var i=this._dataCells[e],o=0;o<i.length;o++)if(i[o]instanceof xn&&i[o]._columnObj===t)return{row:e,col:o}},e.prototype.getDataColumns=function(t){void 0===t&&(t=!0);var e=[];return Nn(this._root,e,t),e},e.prototype.collectColumns=function(t,e,i){var o=[];return Ln(this._root,o,e),o},e.prototype.collectColumnNames=function(t,e,i,o){var r=[],n=this._root;return o?"string"==typeof o?n=function t(e,i){for(var r=0,n=e.count;r<n;r++){var s=e.getItem(r);if(s instanceof On)return s.name===o?s:t(s)}}(n):o instanceof On&&(n=o):n=this._root,n?(Fn(n,r,t,e,i),r):null},e.prototype.collectDataColumns=function(t,e){var i=t.col>e.col?e.col:t.col,o=t.col>e.col?t.col:e.col,r=[];Nn(this._root,r,!0);for(var n=r.length-1;n>=0;n--){var s=r[n].layout.col;(s<i||s>o)&&r.splice(n,1)}return r},e.prototype.getHorzColumns=function(t,e){void 0===t&&(t=0);var i=null==e?t+this._root.visibleCount-1:t+e-1,o=[];return this._root.$_collectHorzColumns(o,t,i),o},e.prototype.getHomeOf=function(t){return t instanceof Cn&&(t=t.source),(t=this._dataCells[t?t.row:0][0])instanceof Cn&&(t=t.source),t},e.prototype.getEndOf=function(t){t instanceof Cn&&(t=t.source);var e=this._dataCells,i=t?t.row:e.length-1;return(t=e[i][e[i].length-1])instanceof Cn&&(t=t.source),t},e.prototype.getTopOf=function(t){return(t=this._dataCells[0][t.col])instanceof Cn&&(t=t.source),t},e.prototype.getBottomOf=function(t,e){var i=this._dataCells;return t=i[i.length-1][t.col],!e&&t instanceof Cn&&(t=t.source),t},e.prototype.getLowerOf=function(t){t instanceof Cn&&(t=t.source);var e=this._dataCells,i=t.row,o=t.col,r=0;return i+t.rows<e.length?t=e[i+t.rows][o]:(r=1,t=e[0][o]),t instanceof Cn&&(t=t.source),{dy:r,layout:t}},e.prototype.getUpperOf=function(t){t instanceof Cn&&(t=t.source);var e=this._dataCells,i=t.row,o=t.col,r=0;return i>0?t=e[i-1][o]:(r=-1,t=e[e.length-1][o]),t instanceof Cn&&(t=t.source),{dy:r,layout:t}},e.prototype.getRightOf=function(t){var e=this._dataCells[t.row],i=t.col;return i+t.cols<e.length?((t=e[i+t.cspan])instanceof Cn&&(t=t.source),t):null},e.prototype.getLeftOf=function(t){t instanceof Cn&&(t=t.source);var e=this._dataCells[t.row],i=t.col;return i>0?((t=e[i-1])instanceof Cn&&(t=t.source),t):null},e.prototype.getCellWidths=function(t,e){for(var i=0,o=0;o<e;o++)i+=this._cellWidths[o+t];return i},e.prototype.getLayout=function(t,e,i,o,r){function n(s){var a,l;if(s instanceof xn){var h=s.firstColumn;if(h)return u=(u=h.visible&&s.visible||i)&&r.indexOf(h.name)<0||o.indexOf(h.name)>=0,(c=s.toProxy(!1)).visible=t?u:s.visible,c.width=(t&&e?s._fitWidth:s._cellWidth)||s.width,c.column=h.name,c}else{if(s.isProxy)return(t&&e?s._fitWidth:s._cellWidth)||s.width;if(s instanceof On){var u,c;l=s._items,a=[],u=(u=s.visible||i)&&r.indexOf(s.name)<0||o.indexOf(s.name)>=0;for(var d=0,p=l.length;d<p;d++)a.push(n.call(this,l[d]));return(c=s.toProxy(!1)).name=s.name,c.items=a,c.visible=t?u:s.visible,c.header=s.header&&s.header.toProxy(!1),delete c.width,c}}}void 0===o&&(o=[]),void 0===r&&(r=[]),e=e&&!!this.grid.layoutManager.isColumnFitted;for(var s=this._root._items,a=[],l=0,h=s.length;l<h;l++)a.push(n.call(this,s[l]));return a},e.prototype._changed=function(){if(!this._dirty){this._dirty=!0;var t=this.grid;t&&t.invalidateLayout()}},e.prototype.$_clear=function(){this._headerCells=[],this._dataCells=[]},e.prototype.$_refresh=function(t,e){this._dirty?(this._root.$_bindColumns({},t),this._root.$_resetVisibles(),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root,e),this._dirty=!1):this._resized&&this.$_calculateCellWidths(this._root,e),this._resized=!1,this._moveColumn=null},e.prototype.$_refresh2=function(t,e){this._root.$_bindColumns({},t,!0),this._root.$_resetVisibles(!0),this.$_parseCells(this._root,t),this.$_calculateCellWidths(this._root,e)},e.prototype.$_prepareMerges=function(t){for(var e=this.collectColumns(!0,!0,!1),i=0,o=e.length;i<o;i++){var r=e[i],n=this.layoutByColumn(r);if(n&&n.canMerge()){var s=n.merges;s||(s=new nn(n)),s.clear(),s.initialize(10),s.refreshRooms(0,t.itemCount-1,!0)}}},e.prototype.$_prepareLayout=function(t,e,i){for(var o=0,r=this._root.visibleCount;o<r;o++)this._root.getVisible(o)._prepareLayout(t,o<e,o>=r-i)},e.prototype.$_parseCells=function(t,e){var i=t._visibles;this.$_parseHeaderCells(i),this.$_parseDataCells(i)},e.prototype.$_parseHeaderCells=function(t){for(var e=this._headerCells=[],i=0,o=0,r=t;o<r.length;o++){var n=r[o];i=Math.max(i,n.headerRows)}for(var s=0;s<i;s++)e.push([]);this._root.$_parseHeaderCells(e,0,0),this._root.$_adjustHeaderCells(e)},e.prototype.$_parseDataCells=function(t){for(var e=this._dataCells=[],i=0,o=0,r=t;o<r.length;o++){var n=r[o];i=Math.max(i,n.rows)}for(var s=0;s<i;s++)e.push([]);this._root.$_parseDataCells(e,0,0),this._root.$_adjustDataCells(e);for(var a=0,l=e;a<l.length;a++)for(var h=l[a],u=0;u<h.length;){var c=h[u];if(c._defColSpan=1,c.isNull)u++;else for(;++u<h.length;){var d=h[u];if(!(!d||d.isProxy&&d.source===c||d.isNull&&d.group===c.group))break;c._defColSpan++}}},e.prototype.$_calculateCellWidths=function(t,e){if(this._dirty){(!this._cellWidths||this._cellWidths.length<=0||!this._moveColumn)&&(t.$_collectCellWidths(e),t.$_arrangeCellWidths());for(var i=this._cellWidths=[],o=0,r=t.cols;o<r;o++)i.push(0);t.$_calcCellWidths(this._dataCells,i,!1)}else this._resized&&t.$_calcCellWidths(this._dataCells,this._cellWidths,!0)},e.prototype.$_clearFitWidths=function(){this._root._clearFitWidth()},e.prototype._columnsChanged=function(t){},e.prototype._columnChanged=function(t){},e.prototype._itemIndexChanged=function(t){this.invalidateIndices(t)},e.prototype._itemWidthChanged=function(t){this.invalidateSize()},e.prototype._itemFillWidthChanged=function(t){this.grid.layoutManager.isColumnFitted&&this.invalidateSize()},e.prototype._clearMergeGrouped=function(){this._root.clearMergeGrouped()},e.prototype.$_changeCellWidths=function(t,e,i){for(var o=this._cellWidths,r=[],n=0,s=0;s<e;s++)n+=o[t+s],r.push(n);var a=i/n;for(s=0;s<e-1;s++)r[s]=Math.round(r[s]*a);r[e-1]=i;for(s=e-1;s>0;s--)o[t+s]+=r[s]-r[s-1];o[t]+=r[0],this.invalidateSize()},e.prototype.$_calcGroupWidths=function(){var t=this._cellWidths;!function e(i){for(var o=0,r=0;r<i._clen;r++)o+=t[i.col+r];i._width=i._cellWidth=o;for(var n=0,s=i.visibles;n<s.length;n++){var a=s[n];a instanceof On&&e(a)}}(this._root)},e}(se),$n=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._columnsChanged=function(e){this.setColumns(e),t.prototype._columnsChanged.call(this,e)},e}(Bn);!function(t){t.ROW="row",t.CELL="cell"}(In||(In={}));var An,jn,Hn=function(t){function e(e,i,o){void 0===i&&(i=-1);var r=t.call(this,!0)||this;return r._itemIndex=-1,r._grid=e,r._itemIndex=i,r._layout=o instanceof gn?o.layout:o,r}return o(e,t),e.temp=function(t,i,o){return void 0===i&&(i=0),e.$_temp||(e.$_temp=new e),e.$_temp._grid=t,e.$_temp._itemIndex=i,e.$_temp._layout=o instanceof wn?o:o&&o.layout,e.$_temp},e.areEquals=function(t,e){return t==e||t&&e&&t._grid===e._grid&&t._itemIndex===e._itemIndex&&t._layout===e._layout},e.equalsTo=function(t,e,i){return t&&t._itemIndex===e&&t.layout===i},e.clearTemp=function(){e.$_temp&&(e.$_temp=e.$_temp.dispose())},e.compareHorz=function(t,e){if(t&&e)return t.layout.distance-e.layout.distance},e.prototype._doDispose=function(){this._grid=null,this._layout=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._itemIndex},set:function(t){this._itemIndex=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},set:function(t){this._layout=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"column",{get:function(){return this._layout&&this._layout.firstColumn},set:function(t){"string"==typeof t&&(t=this.grid&&this.grid.columnByName(t)),this._layout=t&&t.layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataColumn",{get:function(){var t=this.column;return t instanceof mn?t:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueColumn",{get:function(){var t=this.column;return t instanceof yn?t:null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataField",{get:function(){var t=this.dataColumn;return t instanceof mn?t.dataIndex:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this._grid&&this._grid.getItem(this._itemIndex)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataRow",{get:function(){var t=this.item;return t?t.dataRow:-1},set:function(t){if(this._grid){var e=this._grid.getItemOfRow(t,!1);e&&(this.itemIndex=e.index)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldName",{set:function(t){if(this._grid){var e=this._grid.columnByField(t);e&&(this.column=e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldIndex",{set:function(t){if(this._grid){var e=this._grid.columnByField(t);e&&(this.column=e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataId",{get:function(){var t=this.item;return t?t.dataId:-1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){var t=this.column;if(t instanceof mn){var e=t.dataIndex;if(e<0)throw new Error("Not exists data field: "+t.fieldName);var i=this.item;if(!i)throw new Error("Invalid item index: "+this._itemIndex);return i.getData(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixed",{get:function(){var t=this._layout;if(this._grid&&t&&t.visible){var e=this._grid.layoutManager,i=t.root.vindex;return i<e.fixedLayoutCount||i>=e.rightFirstLayout||this._itemIndex>=0&&this._itemIndex<e.fixedItemCount}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowFixed",{get:function(){if(this._grid){var t=this._grid.layoutManager;return this._itemIndex>=0&&this._itemIndex<t.fixedItemCount}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex<t.fixedLayoutCount}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightFixed",{get:function(){if(this._grid&&this._layout&&this._layout.visible){var t=this._grid.layoutManager;return this._layout.root.vindex>=t.rightFirstLayout}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isTop",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isTopCell(this):On.isTop(this._layout))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isBottom",{get:function(){return!this._layout||!this._layout.group||(this.$_isSpanned()?this.grid.$_isBottomCell(this):On.isBottom(this._layout))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLeft",{get:function(){if(this._layout){var t=this._layout.group;return t?0==t.vindex&&On.isLeft(this._layout):0==this._layout.vindex}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isRight",{get:function(){if(this._layout){var t=this._layout.group;return t?0==t.vindex&&On.isRight(this._layout):this._layout.vindex==this._grid.visibleLayoutCount-1}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isFirst",{get:function(){if(this._layout&&this._grid&&this._grid.visibleLayoutCount>0){var t=this._grid.getVisibleLayout(0);return(t=t instanceof xn?t:t.root.first)===this._layout}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEditableFirst",{get:function(){var t=this._grid;if(t&&this._layout){var i=t.collectColumns(!0,!0,!0),o=i.indexOf(this._layout.firstColumn);if(o>=0){for(var r=o;r--;){var n=i[r];if(n instanceof bn)return!1;var s=e.temp(t,this.itemIndex,n);if(t.getWritableAt(s))return!1}return!0}}return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isEditableLast",{get:function(){var t=this._grid;if(t&&this._layout)for(var i=t.collectColumns(!0,!0,!0),o=i.indexOf(this._layout.firstColumn)+1,r=i.length;o<r;o++){var n=i[o];if(n instanceof bn)return!1;var s=e.temp(t,this.itemIndex,n);if(t.getWritableAt(s))return!1}return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLast",{get:function(){if(this._layout&&this._grid&&this._grid.visibleLayoutCount>0){var t=this._grid.getVisibleLayout(this._grid.visibleLayoutCount-1);return(t=t instanceof xn?t:t.root.last)===this._layout}return!1},enumerable:!0,configurable:!0}),e.prototype.set=function(t,e,i){return void 0!==i&&(this._grid=i),this._itemIndex=t,this._layout=e instanceof gn?e.layout:e,this},e.prototype.assign=function(t){return t?(t.grid&&(this._grid=t._grid),this._itemIndex=t._itemIndex,this._layout=t._layout):(this._itemIndex=-1,this._layout=null),this},e.prototype.reset=function(){return this._itemIndex=-1,this._layout=null,this},e.prototype.clone=function(){return new e(this._grid,this._itemIndex,this._layout)},e.prototype.proxy=function(){return{itemIndex:isNaN(this._itemIndex)?-1:this._itemIndex,column:this.column?this.column.name:null,dataRow:this.dataRow,fieldIndex:this.dataColumn?this.column.dataIndex:-1,fieldName:this.dataColumn?this.column.fieldName:null}},e.prototype.normalize=function(t){return t&&(this._grid=t,this._layout||(this._layout=t.getFirstLayout()),this._itemIndex=Math.max(0,Math.min(this._itemIndex,t.itemCount-1))),this},e.prototype.incRow=function(t){this._grid&&(this._itemIndex=Math.max(0,Math.min(this._grid.itemCount-1,this._itemIndex+t)))},e.prototype.first=function(){this._grid&&(this._itemIndex=0)},e.prototype.last=function(){this._grid&&(this._itemIndex=this._grid.itemCount-1)},e.prototype.right=function(){var t=this._grid&&this.$_gridLayout().getRightOf(this._layout);t&&(this._layout=t)},e.prototype.left=function(){var t=this._grid&&this.$_gridLayout().getLeftOf(this._layout);t&&(this._layout=t)},e.prototype.next=function(){var t=Gn(this._grid,this._layout);if(t)return this._layout=t,!0},e.prototype.prev=function(){var t=Un(this._grid,this._layout);if(t)return this._layout=t,!0},e.prototype.home=function(){this._layout=this._grid&&this.$_gridLayout().getHomeOf(this._layout)},e.prototype.end=function(){this._layout=this._grid&&this.$_gridLayout().getEndOf(this._layout)},e.prototype.down=function(t,e,i){void 0===t&&(t=In.ROW),this._grid&&(t==In.ROW&&!e||this.isBottom||i?this._itemIndex<this._grid.itemCount-1&&(t==In.CELL&&(this._layout=this.$_gridLayout().getTopOf(this._layout)),this.incRow(1)):this._grid.spanned?this._layout=this._grid.$_getLowerOfCell(this):this._layout=this.$_gridLayout().getLowerOf(this._layout).layout)},e.prototype.up=function(t,e,i){if(void 0===t&&(t=In.ROW),this._grid)if(t==In.ROW&&!e||this.isTop||i){if(this._itemIndex>0){if(t==In.CELL)if(this._grid.spanned){var o=this._grid.$_getUpperOfCell(this);this._layout=o||this.$_gridLayout().getBottomOf(this._layout)}else this._layout=this.$_gridLayout().getBottomOf(this._layout);this.incRow(-1)}}else this._grid.spanned?this._layout=this._grid.$_getUpperOfCell(this):this._layout=this.$_gridLayout().getUpperOf(this._layout).layout},e.prototype.getValue=function(){if(this._grid){var t=this.dataColumn,e=this._grid.getItem(this._itemIndex);return t&&e&&e.getData(t.dataIndex)}},e.prototype.assignFrom=function(i){i instanceof e?(this._grid=i._grid,this._layout=i._layout,this._itemIndex=i._itemIndex):t.prototype.assignFrom.call(this,i)},e.prototype.toString=function(){return"("+this._itemIndex+", "+this.column+")"},e.prototype.$_gridLayout=function(){return this._grid._activeCellLayout},e.prototype.$_isSpanned=function(){return this._grid&&this._grid.spanned},e}(ft),Wn=function(t){function e(e,i,o){var r=t.call(this,e,i&&i.index,o)||this;return r._item=i,r}return o(e,t),e.tempItem=function(t,i,o){return e.$_itemTemp||(e.$_itemTemp=new e),e.$_itemTemp._grid=t,e.$_itemTemp._item=i,e.$_itemTemp._itemIndex=i.index,e.$_itemTemp._layout=o instanceof wn?o:o&&o.layout,e.$_itemTemp},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),e}(Hn),Gn=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=On.getNext(e);if(o)return o;for(var r=(e.group?e.root.vindex:e.vindex)+1,n=i.layoutCount;r<n;r++){if((o=i.getLayout(r))instanceof xn)return o;if(o instanceof On&&(o=o.first))return o}},Un=function(t,e){if(!t||!e)return null;var i=t.layoutManager,o=On.getPrev(e);if(o)return o;for(var r=(e.group?e.root.vindex:e.vindex)-1;r>=0;r++){if((o=i.getLayout(r))instanceof xn)return o;if(o instanceof On&&(o=o.last))return o}},zn=function(t){function e(){var e=t.call(this)||this;return e._row1=0,e._row2=0,e}return o(e,t),e.$_setRange=function(t,e,i,o,r){return t._row1=e<=o?e:o,t._row2=e<=o?o:e,t._col1=i.col<=r.col?i:r,t._col2=i.col<=r.col?r:i,t},e.create=function(t,i){if(i&&t!==i)return e.$_setRange(new e,t.itemIndex,t.layout,i.itemIndex,i.layout);var o=new e;return o._row1=o._row2=t.itemIndex,o._col1=o._col2=t.layout,o},e.temp=function(t,i){var o=e.$_TEMP;return i&&t!==i?e.$_setRange(o,t.itemIndex,t.layout,i.itemIndex,i.layout):(o._row1=o._row2=t.itemIndex,o._col1=o._col2=t.layout,o)},e.createRange=function(t,i,o,r){return e.$_setRange(new e,t,i,o,r)},Object.defineProperty(e.prototype,"empty",{get:function(){return this._row2<this._row1||!this._col2&&!this._col2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"r1",{get:function(){return this._row1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"c1",{get:function(){return this._col1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"r2",{get:function(){return this._row2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"c2",{get:function(){return this._col2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstCell",{get:function(){var t=new Hn;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row<=this._col2.row?this._col1:this._col2:t.layout=this._col1.col<=this._col2.col?this._col1:this._col2,t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastCell",{get:function(){var t=new Hn;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,this._col1.col===this._col2.col?t.layout=this._col1.row>=this._col2.row?this._col1:this._col2:t.layout=this._col1.col>=this._col2.col?this._col1:this._col2,t},enumerable:!0,configurable:!0}),e.prototype.contains=function(t,e){if(e){var i=e.index;return t>=this._row1&&t<=this._row2&&i>=this._col1.col&&i<=this._col2.col}return!1},e.prototype.containsIndex=function(t){return t&&this.contains(t.itemIndex,t.layout)},e.prototype.normalize=function(){if(this._row1>this._row2){var t=this._row1;this._row1=this._row2,this._row2=t}if(this._col1.col<=this._col2.col){if(this._col1.row>this._col2.row){var e=this._col1;this._col1=this._col2,this._col2=e}}else{e=this._col1;this._col1=this._col2,this._col2=e}return this},e.prototype.normalizeData=function(){return this.normalize(),this},e.prototype.intersectsWith=function(t){return!1},e.NULL=new e,e.$_TEMP=new e,e}(ft),Yn=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_COUNT:return this._getCount();case e.ID_SUM:return this._getSum();case e.ID_MAX:return this._getMax();case e.ID_MIN:return this._getMin();case e.ID_AVG:return this._getAvg();case e.ID_VAR:return this._getVar();case e.ID_VARP:return this._getVarp();case e.ID_STDEV:return this._getStdev();case e.ID_STDEVP:return this._getStdevp();case e.ID_DATA_COUNT:return this._getDataCount();case e.ID_DATA_AVG:return this._getDataAvg()}throw new yt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,e){throw new yt("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,e,i){throw new yt("Invalid identifier indexer: "+t)},e.ID_COUNT=0,e.ID_SUM=1,e.ID_MAX=2,e.ID_MIN=3,e.ID_AVG=4,e.ID_VAR=5,e.ID_VARP=6,e.ID_STDEV=7,e.ID_STDEVP=8,e.ID_DATA_COUNT=9,e.ID_DATA_AVG=10,e.IDENTS={count:e.ID_COUNT,sum:e.ID_SUM,max:e.ID_MAX,min:e.ID_MIN,avg:e.ID_AVG,var:e.ID_VAR,varp:e.ID_VARP,stdev:e.ID_STDEV,stdevp:e.ID_STDEVP,datacount:e.ID_DATA_COUNT,dataavg:e.ID_DATA_AVG},e}(It),qn=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){this._grid=null,this._ds=null,this._column=null,this._summarizer=null,t.prototype._doDispose.call(this)},e.prototype.setColumn=function(t,e){this._column=t,this._grid=t.grid,this._ds=this._grid.dataSource,this._fieldCount=this._ds.fieldCount,this._summarizer=e},e.prototype.isIdentifier=function(e){return e=e.toLowerCase(),Yn.IDENTS.hasOwnProperty(e)?Yn.IDENTS[e]:t.prototype.isIdentifier.call(this,e)},e.prototype.evaluateIndexerI=function(t,e){if(this._summarizer){if(e<0||e>=this._fieldCount)throw new yt("Data field index out of bounds: "+e);switch(t){case Yn.ID_SUM:return this._summarizer.getSum(e);case Yn.ID_COUNT:return this._summarizer.getCount(e);case Yn.ID_MAX:return this._summarizer.getMax(e);case Yn.ID_MIN:return this._summarizer.getMin(e);case Yn.ID_AVG:return this._summarizer.getAvg(e);case Yn.ID_VAR:return this._summarizer.getVar(e);case Yn.ID_VARP:return this._summarizer.getVarp(e);case Yn.ID_STDEV:return this._summarizer.getStdev(e);case Yn.ID_STDEVP:return this._summarizer.getStdevp(e);case Yn.ID_DATA_COUNT:return this._summarizer.getDataCount(e);case Yn.ID_DATA_AVG:return this._summarizer.getDataAvg(e)}throw new yt("Invalid identifier indexer: "+t)}switch(t){case Yn.ID_SUM:case Yn.ID_COUNT:return 0;case Yn.ID_MAX:case Yn.ID_MIN:case Yn.ID_AVG:case Yn.ID_VAR:case Yn.ID_VARP:case Yn.ID_STDEV:case Yn.ID_STDEVP:return NaN}},e.prototype.evaluateIndexerS=function(t,e,i){if(this._summarizer&&this._ds){var o=i?this._ds.getFieldIndexC(e):this._ds.getFieldIndex(e);if(o<0||o>=this._fieldCount)throw new yt("Data field index out of bounds: "+o);switch(t){case Yn.ID_SUM:return this._summarizer.getSum(o);case Yn.ID_COUNT:return this._summarizer.getCount(o);case Yn.ID_MAX:return this._summarizer.getMax(o);case Yn.ID_MIN:return this._summarizer.getMin(o);case Yn.ID_AVG:return this._summarizer.getAvg(o);case Yn.ID_VAR:return this._summarizer.getVar(o);case Yn.ID_VARP:return this._summarizer.getVarp(o);case Yn.ID_STDEV:return this._summarizer.getStdev(o);case Yn.ID_STDEVP:return this._summarizer.getStdevp(o)}throw new yt("Invalid identifier indexer: "+t)}switch(t){case Yn.ID_SUM:case Yn.ID_COUNT:return 0;case Yn.ID_MAX:case Yn.ID_MIN:case Yn.ID_AVG:case Yn.ID_VAR:case Yn.ID_VARP:case Yn.ID_STDEV:case Yn.ID_STDEVP:return NaN}},e.prototype._getCount=function(){return this._summarizer?this._summarizer.getCount(this._column.dataIndex):0},e.prototype._getSum=function(){return this._summarizer?this._summarizer.getSum(this._column.dataIndex):0},e.prototype._getMax=function(){return this._summarizer?this._summarizer.getMax(this._column.dataIndex):NaN},e.prototype._getMin=function(){return this._summarizer?this._summarizer.getMin(this._column.dataIndex):NaN},e.prototype._getAvg=function(){return this._summarizer?this._summarizer.getAvg(this._column.dataIndex):NaN},e.prototype._getVar=function(){return this._summarizer?this._summarizer.getVar(this._column.dataIndex):NaN},e.prototype._getVarp=function(){return this._summarizer?this._summarizer.getVarp(this._column.dataIndex):NaN},e.prototype._getStdev=function(){return this._summarizer?this._summarizer.getStdev(this._column.dataIndex):NaN},e.prototype._getStdevp=function(){return this._summarizer?this._summarizer.getStdevp(this._column.dataIndex):NaN},e.prototype._getDataCount=function(){return this._summarizer?this._summarizer.getDataCount(this._column.dataIndex):NaN},e.prototype._getDataAvg=function(){return this._summarizer?this._summarizer.getDataAvg(this._column.dataIndex):NaN},e}(Yn),Kn=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),e.prototype.setItem=function(t){this._item=t},e.prototype._getCount=function(){return this._item.getNumber(this._column.dataIndex)},e.prototype._getSum=function(){return this._item.getSum(this._column.dataIndex)},e.prototype._getMax=function(){return this._item.getMax(this._column.dataIndex)},e.prototype._getMin=function(){return this._item.getMin(this._column.dataIndex)},e.prototype._getAvg=function(){return this._item.getAvg(this._column.dataIndex)},e.prototype._getVar=function(){return this._item.getVar(this._column.dataIndex,1)},e.prototype._getVarp=function(){return this._item.getVar(this._column.dataIndex,0)},e.prototype._getStdev=function(){return this._item.getStdev(this._column.dataIndex,1)},e.prototype._getStdevp=function(){return this._item.getStdev(this._column.dataIndex,0)},e.prototype._getDataCount=function(){return this._item.getDataCount(this._column.dataIndex)},e.prototype._getDataAvg=function(){return this._item.getDataAvg(this._column.dataIndex)},e}(qn),Xn=function(t){function e(e){var i=t.call(this)||this;return i._columns=[],i._orgColumns=[],i._nameMap={},i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){this._clearColumn(),this._columns=null,this._owner=null,this._nameMap=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._columns.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columns",{get:function(){return this._columns.slice()},enumerable:!0,configurable:!0}),e.prototype.getColumn=function(t){return this._columns[t]},e.prototype.setColumns=function(t){if(this._columns.length=0,this._nameMap={},t)for(var e=0,i=t;e<i.length;e++){var o=i[e],r=this._addColumn(o);if(!r)throw new Error("column is undefined");r.$_owner=this}this._orgColumns=this._columns.slice()},e.prototype.add=function(t,e){var i=this._addColumn(t,void 0===e?-1:e);return null!=i&&(i.$_owner=this),i},e.prototype.remove=function(t){return!!this._removeColumn(t)},e.prototype.resetIndices=function(){if(this._owner)for(var t=0,e=this._columns.length;t<e;t++){var i=this._columns[t];i.$_setIndex(t),i._resetIndices(this._owner)}},e.prototype.resetSortStates=function(){if(this._owner)for(var t=this._owner.getSortDirections(),e=this._owner.getSortFields(),i=0,o=this._columns.length;i<o;i++){var r=this._columns[i];r instanceof mn&&(r.sortOrder=e.indexOf(r.dataIndex),r.sortDirection=t[r.sortOrder])}},e.prototype.columnByName=function(t){return this._nameMap[t]},e.prototype.columnByField=function(t){if(t>=0)for(var e=0,i=this.count;e<i;e++){var o=this.getColumn(e);if(o instanceof mn&&o.dataIndex==t)return o}return null},e.prototype.restoreColumns=function(){this._restoreColumn()},e.prototype._addColumn=function(t,e){void 0===e&&(e=-1);var i=this._columns;if(!t||t instanceof gn||("string"==typeof t&&(t={fieldName:t}),t=Pu.createColumn(t)),t instanceof gn){if(i.indexOf(t)>=0)throw new Error("column is already contained");e<0?i.push(t):i.splice(e,0,t);var o=t.name;if(!o||this._nameMap[o])if(o=t instanceof mn?t.fieldName:t instanceof bn?"series":"column",this._nameMap[o]){for(var r=0;;r++)if(!this._nameMap[o+r]){t.name=o+=r;break}}else t.name=o;return o&&(this._nameMap[o]=t),t}return null},e.prototype._removeColumn=function(t){var e=this._columns.indexOf(t);return e>=0&&(this._columns.splice(e,1),t.$_owner=void 0,!0)},e.prototype._restoreColumn=function(){this._columns=this._orgColumns.slice()},e.prototype._clearColumn=function(){for(var t=0,e=this._columns;t<e.length;t++){e[t].dispose()}},e}(ft),Zn=function(t){function e(){var e=t.call(this,"headerCell")||this;return e._itemOffset=2,e._itemGap=2,e._checkLocation=f.NONE,e._checked=!1,e._showTooltip=!0,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){this._text=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){this._template=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){this._itemOffset=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){this._itemGap=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkLocation",{get:function(){return this._checkLocation},set:function(t){this._checkLocation=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){this._showTooltip=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tooltip",{get:function(){return this._tooltip},set:function(t){this._tooltip=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"edgeMark",{get:function(){return this._edgeMark},set:function(t){this._edgeMark=t},enumerable:!0,configurable:!0}),e}(ko),Jn=function(t){function e(e){var i=t.call(this,e)||this;return i._minRowHeight=21,i._minHeight=23,i._height=0,i._resizable=!1,i._itemOffset=2,i._itemGap=2,i._showSelection=!1,i._showTooltip=!1,i._sortWidth=16,i._sortHeight=16,i._filterWidth=16,i._filterHeight=16,i._popupWidth=16,i._popupHeight=16,i._checkWidth=16,i._checkHeight=16,i._showPopupMenu=I.VISIBLE,i._cell=new Zn,i.visible=!0,i}return o(e,t),e.prototype._doDispose=function(){this._cell=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!=this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayHeight",{get:function(){return this._grid.headerView.height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"heights",{get:function(){return this._heights&&this._heights.slice()},set:function(t){if(t!=this._heights){t=lt.makeArray(t,!0),this._heights=t&&t.slice();for(var e=0;e<this._heights.length;e++)this._heights[e]=Math.max(this._minRowHeight,isNaN(this._heights[e])?this._minRowHeight:this._heights[e]);this._changed()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemOffset",{get:function(){return this._itemOffset},set:function(t){t!=this._itemOffset&&(this._itemOffset=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemGap",{get:function(){return this._itemGap},set:function(t){t!=this._itemGap&&(this._itemGap=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortWidth",{get:function(){return this._sortWidth},set:function(t){t!=this._sortWidth&&(this._sortWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortHeight",{get:function(){return this._sortHeight},set:function(t){t!=this._sortHeight&&(this._sortHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterWidth",{get:function(){return this._filterWidth},set:function(t){t!=this._filterWidth&&(this._filterWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterHeight",{get:function(){return this._filterHeight},set:function(t){t!=this._filterHeight&&(this._filterHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupWidth",{get:function(){return this._popupWidth},set:function(t){t!=this._popupWidth&&(this._popupWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupHeight",{get:function(){return this._popupHeight},set:function(t){t!=this._popupHeight&&(this._popupHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showPopupMenu",{get:function(){return this._showPopupMenu},set:function(t){t!=this._showPopupMenu&&(this._showPopupMenu=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkWidth",{get:function(){return this._checkWidth},set:function(t){t!=this._checkWidth&&(this._checkWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkHeight",{get:function(){return this._checkHeight},set:function(t){t!=this._checkHeight&&(this._checkHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!0,configurable:!0}),e.prototype.getCell=function(t){var e=this._cell;e.setLayout(t);var i=t instanceof On?t.header:t.firstColumn.header;if(i&&(e.text=i.displayText,e.template=i.realizeTemplate(),e.showTooltip=i.showTooltip,e.tooltip=i.tooltip,e.edgeMark=i.edgeMark,i instanceof dn)){var o=t.firstColumn,r=void 0;e.index.set(-1,t.firstColumn),e.itemOffset=void 0===(r=i.itemOffset)?this._itemOffset:r,e.itemGap=void 0===(r=i.itemGap)?this._itemGap:r,e.checkLocation=i.checkLocation,e.checked=o.checked}return e},e.prototype.getStyleName=function(){return this._styleName},e}(Eo),Qn=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){this._cell=null,t.prototype._doDispose.call(this)},e.prototype.setCell=function(t){this._cell=t},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._cell.value;case e.ID_FIELD:return this._cell.index.dataField;case e.ID_LEVEL:return this._cell.level}throw new yt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,e){},e.prototype.evaluateIndexerS=function(t,e,i){},e.ID_VALUE=0,e.ID_FIELD=1,e.ID_LEVEL=2,e.IDENTS={value:e.ID_VALUE,field:e.ID_FIELD,level:e.ID_LEVEL},e}(It),ts=function(t){function e(e){var i=t.call(this,e)||this;return i._childIndex=0,i._error=null,i._errorDetail=null,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"level",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorDetail",{get:function(){return this._errorDetail},enumerable:!0,configurable:!0}),e.prototype.calculate=function(){var t=this.dataColumn,e=t&&t.grid;if(this._value=NaN,this._error=null,e&&e.itemSource.summaryMode!=_.NONE&&t.dataIndex>=0){var i=this._getSummary(t,this._childIndex),o=i&&i.expression,r=void 0;try{if(o&&e.dataCount>0){var n=e.columnSummaryRuntime;n.setColumn(t,e.summarizer),r=i.evaluate(n,this._childIndex)}var s=i&&i.valueCallback;s&&(r=s(e.handler,t,this._childIndex,i,r)),this._value=r}catch(t){this._error=t,this._errorDetail=t}}},Object.defineProperty(e.prototype,"text",{get:function(){if(this._error)return ko.ERROR},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),e.prototype.getDisplayText=function(t){var e,i=this._value,o=this.dataColumn,n="";if(void 0!==i&&o)if(o.valueType==r.DATETIME){var s=void 0;i instanceof Date&&(s=t.datetimeWriter)?n=s.getText(this._value):i&&(n=i)}else{var a=void 0;if(!isNaN(i)&&(a=t.numberFormatter)){var l=parseFloat(i);n=a.getText(l)}else isNaN(i)||null==i||(n=i+"")}if(n){var h=t.prefix;h&&(n=h+n),(h=t.suffix)&&(n+=h)}return!n&&o&&(n=null===(e=this._getSummary(o,this._childIndex))||void 0===e?void 0:e.text),n},e.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._childIndex)},e.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._childIndex);return e?e.realizeSummary(this,t):void 0},e}(ko),es=function(t){function e(){return t.call(this,"footerCell")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"footerIndex",{get:function(){return this._childIndex},set:function(t){t!=this._childIndex&&(this._childIndex=t)},enumerable:!0,configurable:!0}),e.prototype._getSummary=function(t,e){return t&&t.footers.get(e)},e}(ts),is=function(t){function e(e){var i=t.call(this,e)||this;return i._minHeight=23,i._height=0,i._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},i._childIndex=0,i._displayIndex=0,i._runtime=new Qn,i._cell=i._createCell(),i.visible=!0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayIndex",{get:function(){return this._displayIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){(t=Math.max(0,t))!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())},enumerable:!0,configurable:!0}),e.prototype.getCell=function(t){var e=this._cell,i=t.firstColumn;return e.index.set(-1,i),e._childIndex=this._childIndex,e.calculate(),e},e.prototype.getCellStyle=function(t,e,i){void 0===i&&(i=!0);var o,r=t.getSummary(),n=this._cellStyleCallback;n&&(o=n(this._grid.handler,t),e.assign(o)),r&&(n=r.styleCallback)&&(o=n(this._grid.handler,t),e.assign(o));var s=e.styleName||r&&r.styleName||"";return i&&(e.styleName=this.getCellStyleName()+" "+s),e},e.prototype.getCellFormatters=function(t,e){return e?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},e.prototype._visibleChanged=function(){t.prototype._visibleChanged.call(this),this.$_owner&&this.$_owner.$_visibleChanged(this)},e}(Eo),os=function(t){function e(e){return t.call(this,e)||this}return o(e,t),Object.defineProperty(e.prototype,"footerIndex",{get:function(){return this._childIndex},enumerable:!0,configurable:!0}),e.prototype.getCellStyleName=function(){return e.CELL_CSS},e.prototype._createCell=function(){return new es},e.CELL_CSS="rg-footer-cell",e}(is),rs=function(t){function e(e){var i=t.call(this,e)||this;i._items=[],i._visibles=[];var o=i._createSummary(e);return o.$_owner=i,i._items.push(o),i._visibles.push(i._items[0]),i}return o(e,t),e.prototype._doDispose=function(){for(var e=0,i=this._items;e<i.length;e++){i[e].dispose()}this._items=null,this._visibles=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"canShow",{get:function(){return this.visible&&this._visibles.length>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleCount",{get:function(){return this._visibles.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){return this._items[t]},e.prototype.getVisible=function(t){return this._visibles[t]},e.prototype.isVisible=function(){return this.visible&&this.visibleCount>0},e.prototype.assignFrom=function(e){var i;if(t.prototype.assignFrom.call(this,e),e&&e.items?i=lt.makeArray(e.items):lt.isArray(e)&&(i=e),i){for(var o=this._items,r=i.length;o.length>r;)o.pop().dispose();o.length=r;for(var n=0,s=i.length;n<s;n++){var a=i[n];a&&(o[n]||(o[n]=this._createSummary()),o[n].assignFrom(a),o[n].$_owner=this)}this.$_resetVisibles()}},e.prototype.clean=function(){for(var t=0,e=this._items;t<e.length;t++){e[t].clean()}},e.prototype.toProxy=function(){for(var e=t.prototype.toProxy.call(this),i=[],o=0;o<this._items.length;o++)i.push(this._items[o].toProxy());return i.length>0&&(e.items=i.slice()),e},e.prototype.$_visibleChanged=function(t){this.$_resetVisibles()},e.prototype.$_resetVisibles=function(){this._visibles.length=0;for(var t=0,e=0;t<this._items.length;t++){var i=this._items[t];i._childIndex=t,i.visible&&(this._visibles.push(i),i._displayIndex=e++)}this.owner&&this.owner.refreshView()},e}(Eo),ns=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._createSummary=function(t){return new os(t||this._grid)},e}(rs),ss=function(t){function e(e){var i=t.call(this,e)||this;return i._displayOrder=0,i._headText=null,i._footText=null,i._sumText=null,i._headCell=i._createHeadCell(),i._footCell=i._createFootCell(),i._sumCell=i._createSumCell(),i.visible=!0,i}return o(e,t),Object.defineProperty(e.prototype,"displayOrder",{get:function(){return this._displayOrder},set:function(t){t!=this._displayOrder&&(this._displayOrder=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headText",{get:function(){return this._headText},set:function(t){t!=this._headText&&(this._headText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footText",{get:function(){return this._footText},set:function(t){t!=this._footText&&(this._footText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sumText",{get:function(){return this._sumText},set:function(t){t!=this._sumText&&(this._sumText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupMenuName",{get:function(){return this._popupMenuName?this._popupMenuName:this._popupMenu&&this._grid?(this._popupMenuName=this.getHeadStyleName()+"_menu",this._grid.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null},set:function(t){null!=t&&"string"!=typeof t||(this._popupMenuName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visChanged",{get:function(){return this._visChanged},set:function(t){this._visChanged=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.getHeadCell=function(){return this._headCell},e.prototype.getFootCell=function(){return this._footCell},e.prototype.getSumCell=function(){return this._sumCell},e.prototype._createHeadCell=function(){return new Po(this)},e.prototype._createFootCell=function(){return new Po(this)},e.prototype._createSumCell=function(){return new Po(this)},e.prototype._visibleChanged=function(){t.prototype._visibleChanged.call(this),this._visChanged=!0},e}(Eo);!function(t){t.NONE="none",t.INDEX="index",t.ROW="row"}(An||(An={})),function(t){t.IMAGE="image",t.TEXT="text",t.NONE="none"}(jn||(jn={}));var as,ls,hs,us=function(t){function e(e){var i=t.call(this,"indicatorCell")||this;return i._itemState=wi.NORMAL,i._indicator=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"indicator",{get:function(){return this._indicator},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemState",{get:function(){return this._itemState},set:function(t){t!=this._itemState&&(this._itemState=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){var t,e=this._indicator,i=this.index,o=i.item,r="";if(o&&o.itemState==wi.NORMAL)switch(e.displayValue){case An.INDEX:(t=e.owner.getIndicatorIndex(o))>=0&&(t+=e.indexOffset,e.zeroBase||t++,r=String(t));break;case An.ROW:o.isDataRow&&(t=i.dataRow,t+=e.rowOffset,e.zeroBase||t++,r=String(t))}return r},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),e}(ko),cs=function(t){function e(e){var i=t.call(this,e)||this;return i._displayValue=An.INDEX,i._zeroBase=!1,i._indexOffset=0,i._rowOffset=0,i._minWidth=32,i._maxWidth=0,i._width=0,i._selectable=!0,i._mark=jn.IMAGE,i._showFocus=!0,i._showSelection=!0,i._displayWidth=0,i._cell=new us(i),i.headText="No.",i.footText="Σ",i.sumText="Σ",i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"displayValue",{get:function(){return this._displayValue},set:function(t){t!=this._displayValue&&(this._displayValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zeroBase",{get:function(){return this._zeroBase},set:function(t){t!=this._zeroBase&&(this._zeroBase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indexOffset",{get:function(){return this._indexOffset},set:function(t){t!=this._indexOffset&&(this._indexOffset=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowOffset",{get:function(){return this._rowOffset},set:function(t){t!=this._rowOffset&&(this._rowOffset=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayWidth",{get:function(){return this._displayWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return this._selectable},set:function(t){t!=this._selectable&&(this._selectable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showFocus",{get:function(){return this._showFocus},set:function(t){t!=this._showFocus&&(this._showFocus=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSelection",{get:function(){return this._showSelection},set:function(t){t!=this._showSelection&&(this._showSelection=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"staticOrder",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.getCell=function(t){var e=this._cell;if(e.setIndex(t),t.item){var i=t.item.itemState;i==wi.NORMAL&&this._grid.focusedIndex.itemIndex==t.itemIndex&&(i=wi.FOCUSED),e.itemState=i}return e},e.prototype.getHeadStyleName=function(){return"rg-rowindicator-head"},e.prototype.getFootStyleName=function(){return"rg-rowindicator-foot"},e.prototype.getSumStyleName=function(){return"rg-rowindicator-sum"},e}(ss),ds=function(t){function e(e){var i=t.call(this,"stateBarCell")||this;return i._bar=e,i}return o(e,t),e.prototype._doDispose=function(){this._bar=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return this._bar._stateTexts[this.item.rowState]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),e}(ko),ps=function(t){function e(e){var i=t.call(this,e)||this;return i._width=20,i._mark=jn.IMAGE,i._stateTexts={},i._errorVisible=!1,i._stateTexts[at.CREATED]="C",i._stateTexts[at.UPDATED]="U",i._stateTexts[at.DELETED]="D",i._stateTexts[at.CREATE_AND_DELETED]="X",i._cell=new ds(i),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mark",{get:function(){return this._mark},set:function(t){t!=this._mark&&(this._mark=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateTexts",{get:function(){return c({},this._stateTexts)},set:function(t){if(t!=this._stateTexts){for(var e in t)this._stateTexts.hasOwnProperty(e)&&(this._stateTexts[e]=t[e]);this._changed()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorVisible",{get:function(){return this._errorVisible},set:function(t){t!=this._errorVisible&&(this._errorVisible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"staticOrder",{get:function(){return 1e3},enumerable:!0,configurable:!0}),e.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e},e.prototype.getHeadStyleName=function(){return"rg-statebar-head"},e.prototype.getFootStyleName=function(){return"rg-statebar-foot"},e.prototype.getSumStyleName=function(){return"rg-statebar-sum"},e}(ss),_s=function(t){function e(){return t.call(this,"checkBarCell")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"getText",{get:function(){return String(this.index.dataRow)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.item.checked},enumerable:!0,configurable:!0}),e}(ko),fs=function(t){function e(e){var i=t.call(this,e)||this;return i._width=20,i._exclusive=!1,i._showAll=!0,i._showGroup=!0,i._visibleOnly=!1,i._checkableOnly=!0,i._syncHeadCheck=!1,i._useImages=!1,i._fieldIndex=-1,i._breakMergeOnEmpty=!1,i._cell=new _s,i._merged=!1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){t!=this._width&&(this._width=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exclusive",{get:function(){return this._exclusive},set:function(t){t!=this._exclusive&&(this._exclusive=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAll",{get:function(){return this._showAll},set:function(t){t!=this._showAll&&(this._showAll=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showGroup",{get:function(){return this._showGroup},set:function(t){t!=this._showGroup&&(this._showGroup=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleOnly",{get:function(){return this._visibleOnly},set:function(t){t!=this._visibleOnly&&(this._visibleOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkableOnly",{get:function(){return this._checkableOnly},set:function(t){t!=this._checkableOnly&&(this._checkableOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkableExpression",{get:function(){return this._checkableExpression},set:function(t){t!=this._checkableExpression&&(this._checkableExpression=t,this._grid.itemSource.checkableExpression=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkableCallback",{get:function(){return this._checkableCallback},set:function(t){this._checkableCallback=t,this._grid.itemSource.checkableCallback=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"syncHeadCheck",{get:function(){return this._syncHeadCheck},set:function(t){t!=this._syncHeadCheck&&(this._syncHeadCheck=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldName",{get:function(){return this._fieldName},set:function(t){t!=this._fieldName&&(this._fieldName=t,this._fieldIndex=this._grid.dataSource.getFieldIndex(t),this._grid._checkFieldIndex(this._fieldIndex),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldIndex",{get:function(){return this._fieldIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useImages",{get:function(){return this._useImages},set:function(t){this._useImages!==t&&(this._useImages=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergeRule",{get:function(){return this._mergeRule},set:function(t){t!=this._mergeRule&&(this._mergeRule=t,this._mergeRuleObj&&this._mergeRuleObj.dispose(),this._mergeRuleObj=t?bs.createRule(t):null,this._changed(),this.owner._columnMergeRuleChanged(null))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"breakMergeOnEmpty",{get:function(){return this._breakMergeOnEmpty},set:function(t){t!=this._breakMergeOnEmpty&&(this._breakMergeOnEmpty=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.getCell=function(t){var e=this._cell;return e.setIndex(t),e._exclusive=this._exclusive,e},e.prototype.getHeadStyleName=function(){return"rg-checkbar-head"},e.prototype.getFootStyleName=function(){return"rg-checkbar-foot"},e.prototype.getSumStyleName=function(){return"rg-checkbar-sum"},e.prototype.canMerge=function(){return null!=this._mergeRuleObj},Object.defineProperty(e.prototype,"staticOrder",{get:function(){return 2e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"merges",{get:function(){return this._merges},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"merged",{get:function(){return this._merged},enumerable:!0,configurable:!0}),e}(ss),gs=function(t){function e(){var e=t.call(this)||this;return e._row1=0,e._row2=0,e}return o(e,t),e.$_setRange=function(t,e,i){return t._row1=e<=i?e:i,t._row2=e<=i?i:e,t},e.create=function(t,i){if(i&&t!==i)return e.$_setRange(new e,t.itemIndex,i.itemIndex);var o=new e;return o._row1=o._row2=t.itemIndex,o},e.temp=function(t,i){var o=e.$_TEMP;return i&&t!==i?e.$_setRange(o,t.itemIndex,i.itemIndex):(o._row1=o._row2=t.itemIndex,o)},e.createRange=function(t,i){return e.$_setRange(new e,t,i)},Object.defineProperty(e.prototype,"empty",{get:function(){return this._row2<this._row1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"r1",{get:function(){return this._row1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"r2",{get:function(){return this._row2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._row1<=this._row2?this._row1:this._row2},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._row1<=this._row2?this._row2:this._row1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstCell",{get:function(){var t=new Hn;return t.itemIndex=this._row1<=this._row2?this._row1:this._row2,t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastCell",{get:function(){var t=new Hn;return t.itemIndex=this._row1>=this._row2?this._row1:this._row2,t},enumerable:!0,configurable:!0}),e.prototype.contains=function(t){return t>=this._row1&&t<=this._row2},e.prototype.containsIndex=function(t){return t&&this.contains(t.itemIndex)},e.prototype.normalize=function(){if(this._row1>this._row2){var t=this._row1;this._row1=this._row2,this._row2=t}return this},e.prototype.normalizeData=function(){return this.normalize(),this},e.prototype.intersectsWith=function(t){return!1},e.NULL=new e,e.$_TEMP=new e,e}(ft),ys=function(t){function e(){var e=t.call(this)||this;return e._item=null,e._ds=null,e._fieldCount=0,e}return o(e,t),e.prototype._doDispose=function(){this._item=null,this._ds=null,t.prototype._doDispose.call(this)},e.prototype.setDataSource=function(t){this._ds=t,this._fieldCount=t?t.fieldCount:0},e.prototype.setCell=function(t){this._item=t.item},e.prototype.setItem=function(t){this._item=t},e.prototype.clear=function(){this._item=null,this._ds=null},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){if(this._item){switch(t){case e.ID_ROW:return this._item.index;case e.ID_DATAROW:return this._item.dataRow;case e.ID_GROUP:return this._item.parent}throw new yt("Invalid identifier key: "+t)}},e.prototype.evaluateIndexerI=function(t,i){if(this._item){if(t==e.ID_VALUE||t==e.ID_VALUES){if(i<0||i>=this._fieldCount)throw new yt("Data field index out of bounds:"+i);return this._item.getData(i)}throw new yt("Invalid identifier indexer: "+t)}},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_VALUE&&t!=e.ID_VALUES)throw new yt("Invalid identifier indexer: "+t);if(this._ds){var r=o?this._ds.getFieldIndexC(i):this._ds.getFieldIndex(i);if(r<0||r>=this._fieldCount)throw new yt("Data field is not exists:"+i);return this._item.getData(r)}},e.ID_ROW=0,e.ID_DATAROW=1,e.ID_CHECKED=2,e.ID_VALUE=3,e.ID_VALUES=4,e.ID_GROUP=5,e.ID_PREV_VALUES=6,e.IDENTS={row:e.ID_ROW,datarow:e.ID_DATAROW,checked:e.ID_CHECKED,value:e.ID_VALUE,values:e.ID_VALUES,group:e.ID_GROUP,prevvalues:e.ID_PREV_VALUES},e}(It),ms={},bs=function(t){function e(i){var o=t.call(this)||this;return o._runtime=e.$_runtime=e.$_runtime||new ys,o.criteria=i,o}return o(e,t),e.createRule=function(t){var i="string"==typeof t?t:t&&t.criteria;return i?new e(i):null},e.prototype._doDispose=function(){this._runtime.clear(),this._runtime=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"criteria",{get:function(){return this._criteria},set:function(t){(t=t?t.trim():null)!=this._criteria&&(this._criteria=t,this._exprNode=t?ee.Default.parse(t,null):null,this._changed())},enumerable:!0,configurable:!0}),e.prototype.parseInit=function(t,e,i,o,r){var n=this._checkBar.breakMergeOnEmpty,s=t.fixedCount,a=t.itemCount,l=t.dataSource.rowCount;if(!((o=Math.min(a-i,o))<1||l<=0)){this._runtime.setDataSource(t.dataSource);for(var h=null,u=i;u<a&&(h=t.getItem(u),!this.$_isRow(h,!1));)r[u]=u+1,u++;if(!(u>=a)){this._runtime.setItem(h);var c=this._exprNode.evaluate(this._runtime),d=h.checked,p=i=u;if(r[p]=p+1,!(h.dataRow>=l)){this._runtime.setItem(h);for(var _=i+1;_<a;_++)if(h=t.getItem(_),this.$_isRow(h,!1)){if(h.dataRow>=l)break;this._runtime.setItem(h);var f=this._exprNode.evaluate(this._runtime),g=h.checked;if(_==s||void 0===f&&n||(f instanceof Date&&c instanceof Date?+f!=+c:f!=c)||g!=d){if(_>=o)break;p=_,c=f,d=g}r[_]=p+1}else{if(_>=o)break;c=ms,p=_,r[_]=p+1}}}}},e.prototype.parseBounds=function(t,e,i,o,r){var n=this._checkBar.breakMergeOnEmpty,s=t.itemCount;if(!(s<1)){var a,l,h,u=t.fixedCount,c=ms,d=Math.max(0,i),p=d,_=-1;if(this._runtime.setDataSource(t.dataSource),d>0&&r[d]<=0){var f=t.getItem(d);if(this.$_isRow(f,!1)){for(this._runtime.setItem(f),l=this._exprNode.evaluate(this._runtime),h=f.checked,d--;d>=0&&(f=t.getItem(d),this.$_isRow(f,!1))&&(this._runtime.setItem(f),c=this._exprNode.evaluate(this._runtime),a=f.checked,!(d==u||void 0===c&&n||(c instanceof Date&&l instanceof Date?+c!=+l:c!=l)||h!=a));)d--;for(var g=p-1;g>d;g--)r[g]=d+2;p-1>d&&(_=d+1)}else{r[d]=d+1;for(g=p-1;g>d;g--)r[g]=d+2;for(p-1>d+1&&(_=d+2),d--;d>=0&&r[d]<=0&&!this.$_isRow(t.getItem(d),!1);)r[d]=d+1,d--}}for(d=Math.max(0,i);d<=o&&r[d]>0;)d++;for(;d<=o&&!this.$_isRow(t.getItem(d),!1);)r[d]=d+1,d++;if(d<o){p=d;f=t.getItem(d);for(this._runtime.setItem(f),l=this._exprNode.evaluate(this._runtime),h=f.checked,d++;d<s;)if(f=t.getItem(d),this.$_isRow(f,!1)){if(this._runtime.setItem(f),c=this._exprNode.evaluate(this._runtime),a=f.checked,d==u||void 0===c&&n||(c instanceof Date&&l instanceof Date?+c!=+l:c!=l)||h!=a){var y=p;_>=0&&(y=_,_=-1);for(g=p;g<d;g++)r[g]=y+1;if(d>=o)break;l=c,h=a,p=d}else r[d]=p+1;d++}else{y=p;_>=0&&(y=_,_=-1);for(g=p;g<d;g++)r[g]=y+1;for(r[d]=d+1,d++;d<s&&!this.$_isRow(t.getItem(d),!1);)r[d]=d+1,d++;if(p=d,d>=o)break}if(d==s&&(c instanceof Date&&l instanceof Date?+c==+l:c==l)||h!=a)for(y=_>=0?_:p,g=p;g<d;g++)r[g]=y+1}}},e.prototype.$_isRow=function(t,e){var i=t instanceof io&&!(t instanceof ho);if(i&&!e){var o=t.parent;i=o.expanded||o.firstItem!==t}return i},e.$_runtime=null,e}(Xr),vs=function(t){function e(e,i){var o=t.call(this)||this;return o._checkBar=i,o._head=e.top,o._tail=e.bottom,o}return o(e,t),e.borrow=function(t,i){var o=e.$_rooms.pop();return o?(o._head=t.top,o._tail=t.bottom):o=new e(t,i),o},e.returnTo=function(t){if(t){var i=e.$_rooms;i.indexOf(t)<0&&i.push(t)}},Object.defineProperty(e.prototype,"head",{get:function(){return this._head},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tail",{get:function(){return this._tail},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scope",{get:function(){return this._checkBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.getHead=function(t){return t?t.set(this._head,null):t=new Hn(this._checkBar.owner,this._head,null),t},e.prototype.getTail=function(t){return t?t.set(this._tail,null):t=new Hn(this._checkBar.owner,this._tail,null),t},e.prototype.isHead=function(t){return t.itemIndex==this._head},e.prototype.isTail=function(t){return t.itemIndex==this._tail},e.prototype.contains=function(t){return t.itemIndex>=this._head&&t.itemIndex<=this._tail},e.$_rooms=new Array,e}(en),ws=0,Cs=function(t){function e(e){var i=t.call(this)||this;return i._flags=null,i._fixedRooms=[],i._rooms=[],i._inited=!1,i._fixedCells=[],i._cells=[],i._checkBar=e,e._merges=i,i}return o(e,t),e.prototype._doDispose=function(){this._checkBar=null,this._rooms=this._fixedRooms=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._rooms.length},enumerable:!0,configurable:!0}),e.prototype.clear=function(){this._flags=null,this._rooms=[],this._inited=!1},e.prototype.initialize=function(t){if(!this._inited){var e=this._checkBar.owner,i=e.itemSource,o=this._checkBar._mergeRuleObj;if(o){for(var r=this._flags=new Array(i.itemCount),n=e.fixedOptions.mergeRows?0:i.fixedCount,s=i.itemCount;s--;)r[s]=0;o._checkBar=this._checkBar,o.parseInit(i,-1,n,t,r)}this._inited=!0}},e.prototype.refreshRooms=function(t,e,i){if(this._inited&&this._flags&&!(e<t)){var o=this._checkBar.owner;if(o){var r=this._rooms,n=o.layoutManager.fixedItemCount,s=o.itemSource,a=this._checkBar._mergeRuleObj,l=0;if(this._fixedRooms.length=0,this._rooms.length=0,a&&(a._checkBar=this._checkBar,a.parseBounds(s,-1,t,e,this._flags)),i)for(;l<n;){if(u=this.$_checkFixedMerge(s,l,n)){var h=new vs(u,this._checkBar);this._fixedRooms.push(h),l=u.r2+1}else l+=1}for(l=t;l<=e;){var u;if(null!=(u=this.$_checkMerge(s,l,0==r.length,n))){var c=s.getItem(u.r2);if(c instanceof zr||c instanceof Ur);else{h=new vs(u,this._checkBar);this._rooms.push(h)}l=u.r2+1}else l+=1}}}},e.prototype.getFixedRooms=function(){return this._fixedRooms.slice()},e.prototype.getRooms=function(){return this._rooms.slice()},e.prototype.scroll=function(t){},e.prototype.getRoom=function(t){for(var e=t.rowFixed?this._fixedRooms:this._rooms,i=e.length-1;i>=0;i--)if(e[i].contains(t))return e[i];return null},e.prototype.prepareCells=function(t,e){if(t>0){for(var i=this._fixedCells,o=0;o<i.length;o++)i[o]=-1;for(;i.length<t;)i.push(-1)}var r=this._cells;for(o=0;o<r.length;o++)r[o]=-1;for(;r.length<e;)r.push(-1)},e.prototype.refreshCells=function(t,e){for(var i=this.getFixedRooms(),o=i.length-1;o>=0;o--){var r=i[o];this.addFixedCells(r.head,r.tail-r.head+1)}for(o=(i=this.getRooms()).length-1;o>=0;o--){r=i[o];var n=Math.max(0,r.head-e-t),s=r.tail-e-t;this.addCells(n,s-n+1)}},e.prototype.addFixedCells=function(t,e){for(var i=this._fixedCells,o=ws++,r=t+1;r<t+e;r++)i[r]=o+65535;return i[t]=o,o},e.prototype.addCells=function(t,e){for(var i=this._cells,o=ws++,r=t+1;r<t+e;r++)i[r]=o+65535;return i[t]=o,o},e.prototype.isMerged=function(t,e){return t<e?this._fixedCells[t]>-1:this._cells[t-e]>-1},e.prototype.isMergeRoot=function(t,e){return t<e?this._fixedCells[t]>-1&&this._fixedCells[t]<65535:(t-=e,this._cells[t]>-1&&this._cells[t]<65535)},e.prototype.isHidden=function(t,e){return t<e?this._fixedCells[t]>=65535:this._cells[t-e]>=65535},e.prototype.getMerged=function(t,e){var i=1;if(t<e)for(var o=(n=this._fixedCells)[t],r=t+1;r<n.length&&n[r]-65535==o;r++,i++);else{t-=e;var n;for(o=(n=this._cells)[t],r=t+1;r<n.length&&n[r]-65535==o;r++,i++);}return i},e.prototype.getMerged2=function(t,e,i,o){for(var r=this._cells,n=r[i],s=t.itemSource,a=s.getItem(e++),l=a.isData?o:1,h=i+1;h<r.length&&r[h]-65535==n;h++)l+=(a=s.getItem(e++)).isData?o:1;return l},e.prototype.$_checkFixedMerge=function(t,e,i){if(i>0){var o=e,r=this._flags[o];t.getItem(o);if(r<=0)return null;for(var n=e+1;n<=i;){if(n==i||this._flags[n]>r)return n>o+1?gs.createRange(o,n-1):null;n++}}return null},e.prototype.$_checkMerge=function(t,e,i,o){if(e>=0){var r=e,n=this._flags[r];t.getItem(r);if(n<=0)return null;if(i)for(;r>o&&!(this._flags[r-1]<n);)r--;for(var s=t.itemCount,a=e+1;a<s;){if(this._flags[a]>n||this._flags[a]<=0)return a>r+1?gs.createRange(r,a-1):t.getItem(r).isDataRow?null:gs.createRange(r,a-1);a++}if(a>r)return a>r+1?gs.createRange(r,a-1):t.getItem(r).isDataRow?null:gs.createRange(r,a-1)}return null},e.MERGE_ROOMS="mergeRooms",e}(ft),xs=function(t){function e(e){var i=t.call(this,e)||this;return i._cellButtonWidth=16,i._cellButtonHeight=16,i._editButtonWidth=16,i._editButtonHeight=16,i._errorIconWidth=16,i._errorIconHeight=16,i._showChangeMarker=!1,i._formatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},i._buttonHeight=16,i._dataCell=new Mo,i._hiddenCell=new Lo,i._literalCell=new Fo,i._seriesCell=new No,i._mergedCell=new Vo,i._rowRuntime=new So,i._cellRuntime=new Oo,i._cs=new fn,i._rowCs=new to,i}return o(e,t),e.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._hiddenCell=this._hiddenCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._mergedCell=this._mergedCell.dispose(),this._rowRuntime=this._rowRuntime.dispose(),this._cellRuntime=this._cellRuntime.dispose(),this._cs=null,this._rowCs=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rowRuntime",{get:function(){return this._rowRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellRunTime",{get:function(){return this._cellRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowStyleCallback",{get:function(){return this._rowStyleCallback},set:function(t){t!==this._rowStyleCallback&&(this._rowStyleCallback=t,this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellButtonWidth",{get:function(){return this._cellButtonWidth},set:function(t){t!=this._cellButtonWidth&&(this._cellButtonWidth=t,this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellButtonHeight",{get:function(){return this._cellButtonHeight},set:function(t){t!=this._cellButtonHeight&&(this._cellButtonHeight=t,this.$_resetButtonHeight(),this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editButtonWidth",{get:function(){return this._editButtonWidth},set:function(t){t!=this._editButtonWidth&&(this._editButtonWidth=t,this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editButtonHeight",{get:function(){return this._editButtonHeight},set:function(t){t!=this._editButtonHeight&&(this._editButtonHeight=t,this.$_resetButtonHeight(),this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorIconWidth",{get:function(){return this._errorIconWidth},set:function(t){t!=this._errorIconWidth&&(this._errorIconWidth=t,this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorIconHeight",{get:function(){return this._errorIconHeight},set:function(t){t!=this._errorIconHeight&&(this._errorIconHeight=t,this.$_resetButtonHeight(),this.refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonHeight",{get:function(){return this._buttonHeight},enumerable:!0,configurable:!0}),e.prototype.$_resetButtonHeight=function(){this._buttonHeight=Math.max(this._cellButtonHeight,this._editButtonHeight,this._errorIconHeight)},e.prototype.getCell=function(t,e){return this.getCellAt(t.item,t.column,e)},e.prototype.getCellAt=function(t,e,i){var o,r=this._grid;if(i?o=this._mergedCell:e instanceof mn?t.index<0?(o=this._hiddenCell,this._hiddenCell.setItem(t)):o=this._dataCell:o=e instanceof bn?this._seriesCell:e instanceof Fo?this._literalCell:this._dataCell,o.setIndex2(r,t?t.index:-1,e),e instanceof mn){var n=r.validationManager.getError(o.index);n?(o.error=n.message,o.errorLevel=n.level):(o.error=null,o.errorLevel=p.IGNORE)}return o},e.prototype.getHidden=function(t,e){return this._hiddenCell.setIndex(t),this._hiddenCell.setItem(e),this._hiddenCell},e.prototype.getCellSimple=function(t,e){var i=t.column,o=e?this._mergedCell:i instanceof bn?this._seriesCell:i instanceof Fo?this._literalCell:this._dataCell;return o.setIndex(t),o},e.prototype.getIndexCellStyle=function(t,e){var i=this.getCell(t,!1);return this.getCellStyle(i,this._cs.clear(),!1,e)},e.prototype.getCellStyle=function(t,e,i,o){void 0===o&&(o=!0);var r,n=t.valueColumn,s=this._cellStyleCallback;s&&(r=s(this._grid.handler,t),e.assign(r)),n&&(r=n.getCellStyle(t),e.assign(r));var a=e.styleName||n&&n.styleName||"";return o&&(e.styleName="rg-data-cell "+(i?"rg-merged-cell ":"")+a),e},e.prototype.getCellFormatters=function(t,e,i,o){if(e?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):((e=this._formatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),i){var r=i.grid,n=r.body.getCell(i,!1);e=(o=r.body.getCellStyle(n,o)).toFormatter(e)}return e},e.prototype.getRowStyle=function(t,i,o,r){void 0===o&&(o=!1),void 0===r&&(r=!0);var n=this._rowStyleCallback,s=this._grid,a=this._rowCs;if(a.clear(),r&&n){var l=n(s.handler,t,i)||{};a.assign(l)}if(!a.styleName){var h=e.ROW_STYLE;t.index%2&&s.displayOptions.useAlternateRowStyle&&(h+=e.ALTERNATE_ROW_STYLE),i&&(h+=e.FIXED_ROW_STYLE),o||(h+=e.STATE_ROW_STYLES[t.rowState]||""),t.checked&&(h+=e.CHECKED_ROW_STYLE),a.styleName=h}return a},e.prototype._prepareUpdate=function(){var t=this._grid=this.owner;this._ds=t.dataSource,this._rowRuntime.setDataSource(this._ds),this._cellRuntime.setDataSource(this._ds),this._showChangeMarker=t.displayOptions.showChangeMarker},e.ROW_STYLE=" rg-data-row",e.ALTERNATE_ROW_STYLE=" rg-alternate-row",e.FIXED_ROW_STYLE=" rg-fixed-row",e.CHECKED_ROW_STYLE=" rg-checked-row",e.STATE_ROW_STYLES={created:" rg-created-row",deleted:" rg-deleted-row",createAndDeleted:" rg-deleted-row",updated:" rg-updated-row"},e}(Eo),Is=function(t){function e(e){var i=t.call(this)||this;return i._grid=e,i}return o(e,t),e.prototype._doDispose=function(){return this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),e.prototype._changed=function(){this._grid&&this._grid.optionsChanged(this)},e.prototype._invalidateOwner=function(){this._grid&&this._grid.invalidate()},e.prototype._layoutOwner=function(){this._grid&&this._grid.invalidateLayout()},e.prototype._refreshOwner=function(){this._grid&&this._grid.refreshView()},e.prototype._invalidateEditor=function(){},e}(ft),Es=function(t){function e(e){var i=t.call(this,e)||this;return i._colCount=0,i._rightCount=0,i._rowCount=0,i._rightFixed=!0,i._exceptFromFiltering=!0,i._exceptFromSorting=!0,i._editable=!0,i._rowEditable=!0,i._resizable=!1,i._rowResizable=!1,i._movable=!1,i._colBarWidth=3,i._rightBarWidth=3,i._rowBarHeight=3,i._mergeRows=!1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"colCount",{get:function(){return this._colCount},set:function(t){(t=Math.max(0,t))!=this._colCount&&(this._colCount=t,this.grid&&this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightCount",{get:function(){return this._rightCount},set:function(t){(t=Math.max(0,t))!=this._rightCount&&(this._rightCount=t,this.grid&&this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._rowCount},set:function(t){(t=Math.max(0,t))!=this._rowCount&&(this._rowCount=t,this.$_resetItemSource())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightFixed",{get:function(){return this._rightFixed},set:function(t){t!=this._rightFixed&&(this._rightFixed=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exceptFromFiltering",{get:function(){return this._exceptFromFiltering},set:function(t){t!=this._exceptFromFiltering&&(this._exceptFromFiltering=t,this.$_resetItemSource())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exceptFromSorting",{get:function(){return this._exceptFromSorting},set:function(t){t!=this._exceptFromSorting&&(this._exceptFromSorting=t,this.$_resetItemSource())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowEditable",{get:function(){return this._rowEditable},set:function(t){t!=this._rowEditable&&(this._rowEditable=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"resizable",{get:function(){return this._resizable},set:function(t){t!=this._resizable&&(this._resizable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowResizable",{get:function(){return this._rowResizable},set:function(t){t!=this._rowResizable&&(this._rowResizable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colBarWidth",{get:function(){return this._colBarWidth},set:function(t){(t=Math.max(0,t))!=this._colBarWidth&&(this._colBarWidth=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightBarWidth",{get:function(){return this._rightBarWidth},set:function(t){(t=Math.max(0,t))!=this._rightBarWidth&&(this._rightBarWidth=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowBarHeight",{get:function(){return this._rowBarHeight},set:function(t){(t=Math.max(0,t))!=this._rowBarHeight&&(this._rowBarHeight=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergeRows",{get:function(){return this._mergeRows},set:function(t){t!=this._mergeRows&&(this._mergeRows=t,this.grid._columnMergeRuleChanged(null))},enumerable:!0,configurable:!0}),e.prototype.$_resetItemSource=function(){var t,e=this.grid;e&&(t=e.itemSource)&&t.setFixed(this._rowCount,!this._exceptFromSorting,!this._exceptFromFiltering)},e.ROW_BAR_STYLE="rg-fixed-row-bar",e.ROW_BAR_CELL_STYLE="rg-fixed-row-bar-cell",e.COLUMN_BAR_STYLE="rg-fixed-column-bar",e}(Is),Ss=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.empty=function(){return new t},t.create=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=0),new t(e,i)},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.x||0===this.y},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.equals=function(t){return t===this||t&&this.x===t.x&&this.y===t.y},t.prototype.setEmpty=function(){return this.x=this.y=0,this},t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.round=function(){var t=this.clone();return t.x>>>=0,t.y>>>=0,t},t.prototype.toString=function(){return"{x: "+this.x+", y: "+this.y+"}"},t}(),Os=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this)||this;o._x=0,o._y=0,o._width=0,o._height=0,o._visible=!0,o._mouseEnabled=!0,o._elements=null,o._dirty=!0,o._hovered=!1,o._className="",o._name=i;var r=o._dom=o._createDom(e);return r&&o._initDom(r),o}return o(e,t),e.prototype._doDispose=function(){if(this._dom&&(this._removeEventListeners(this._dom),lt.detach(this._dom),this._dom=null),this._elements){for(var e=0,i=this._elements;e<i.length;e++){i[e].dispose()}this._elements.length=0}this._parent=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"container",{get:function(){return this._parent&&this._parent.container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childCount",{get:function(){return this._elements?this._elements.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSingleton",{get:function(){return this._parent&&1==this._parent.childCount&&this._parent._elements[0]===this},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},set:function(t){t!=this._x&&(this._x=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},set:function(t){t!=this._y&&(this._y=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){(t=Math.max(0,t))!=this._width&&(this._width=t,this.sizeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){(t=Math.max(0,t))!=this._height&&(this._height=t,this.sizeChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._x+this._width},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._y+this._height},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return new Ss(this._x,this._y)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bounds",{get:function(){return new N(this._x,this._y,this._width,this._height)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientRect",{get:function(){return new N(0,0,this._width,this._height)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._dom&&(this._dom.style.display=this._visible?this._getCssDisplay():"none"),this.invalidate(!0),this._visibleChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseEnabled",{get:function(){return this._mouseEnabled},set:function(t){this._mouseEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hovered",{get:function(){return this._hovered},set:function(t){t!=this._hovered&&(this._hovered=t,this._hoverChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isLayer",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseX",{get:function(){var t=this.container;if(t){for(var e=t._currentX,i=this;i&&void 0!==i;)e-=i._x,i=i._parent;return e}return NaN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){var t=this.container;if(t){for(var e=t._currentY,i=this;i&&void 0!==i;)e-=i._y,i=i._parent;return e}return NaN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return nt(this._dom)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._dom&&this._dom.style},enumerable:!0,configurable:!0}),e.prototype.isDom=function(t){return t===this._dom},e.prototype.canHover=function(){return!0},e.prototype.getChildren=function(){return this._elements&&this._elements.concat()},e.prototype.getChild=function(t){return this._elements[t]},e.prototype.indexOf=function(t){return this._elements?this._elements.indexOf(t):-1},e.prototype.contains=function(t){return this._elements&&this._elements.indexOf(t)>=0},e.prototype.getAncestor=function(t){for(var e=this._parent;e;){if(e instanceof t)return e;e=e._parent}return null},e.prototype.addChild=function(t){return this.insertChild(-1,t)},e.prototype.insertChild=function(t,e){if(e&&!this.contains(e)){var i=this._elements||[],o=e._dom;if(t<0||t>=i.length)this._dom&&o&&this._dom.appendChild(o),i.push(e);else{if(o){var r=this._elements[t]._dom;this._dom&&r&&this._dom.insertBefore(o,r)}i.splice(t,0,e)}return this._elements=i,e._parent=this,e.$_attached(this),this.invalidate(),!0}return!1},e.prototype.removeChild=function(t){if(t&&this._elements){var e=this._elements.indexOf(t);if(e>=0)return this.removeChildAt(e)===t}return!1},e.prototype.removeChildAt=function(t){if(t>=0&&t<this.childCount){var e=this._elements[t];return this._elements.splice(t,1),this._dom&&e._dom&&this._dom.removeChild(e._dom),e._parent=null,e._dirty=!1,e.$_detached(this),this.invalidate(),e}return null},e.prototype.removeLast=function(){return this._elements&&this._elements.length>0?this.removeChildAt(this._elements.length-1):null},e.prototype.clear=function(){var t=this._elements;if((t?t.length:0)>0){for(var e=0,i=t;e<i.length;e++){var o=i[e];o._parent=null,o.$_detached(this)}if(this._elements=[],this._dom)for(;this._dom.lastChild;)this._dom.removeChild(this._dom.lastChild);return this.invalidate(),!0}return!1},e.prototype.hideAll=function(){if(this._elements)for(var t=0,e=this._elements;t<e.length;t++){e[t].visible=!1}},e.prototype.invalidate=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),t||!this._dirty){this._dirty=!0;var i=this.container;i&&i.invalidateElement(this)}if(e&&this._elements)for(var o=0,r=this._elements;o<r.length;o++){r[o].invalidate(t,!0)}},e.prototype.validate=function(){this._dirty=!1},e.prototype.invalidateLayout=function(){var t=this.container;t&&t.invalidateLayout()},e.prototype.getBounds=function(t){return void 0===t&&(t=null),t?t.set(this._x,this._y,this._width,this._height):new N(this._x,this._y,this._width,this._height)},e.prototype.getClientRect=function(t){return void 0===t&&(t=null),t?t.set(0,0,this._width,this._height):new N(0,0,this._width,this._height)},e.prototype.containsInBounds=function(t,e){return t>=this._x&&t<this._x+this._width&&e>=this._y&&e<this._y+this._height},e.prototype.containsInClient=function(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height},e.prototype.parentToElement=function(t,e,i){for(var o=this;o&&o!=t;)e-=o._x,i-=o._y,o=o._parent;return new Ss(e,i)},e.prototype.translateBy=function(t,e){void 0===e&&(e=null);var i=t;for(e||(e=new N(0,0,this._width,this._height));i&&i!==this;)e.x-=i._x,e.y-=i._y,i=i._parent;return e},e.prototype.topBy=function(t,e){for(var i=this._y+e,o=this._parent;o&&o!==t;)i+=o._y,o=o._parent;return i},e.prototype.boundsBy=function(t,e){void 0===e&&(e=null);var i=this._x,o=this._y,r=this._parent;for(e&&(i+=e.x,o+=e.y);r&&r!==t;)i+=r._x,o+=r._y,r=r._parent;return e?new N(i,o,e.width,e.height):new N(i,o,this._width,this._height)},e.prototype.boundsByContainer=function(t){void 0===t&&(t=null);var e=this._x,i=this._y;t&&(e+=t.x,i+=t.y);for(var o=this._parent;o&&void 0!==o._x;)e+=o._x,i+=o._y,o=o._parent;return t?new N(e,i,t.width,t.height):new N(e,i,this._width,this._height)},e.prototype.pointByContainer=function(t,e){for(var i=this._parent;i&&void 0!==i._x;)t+=i._x,e+=i._y,i=i._parent;return new Ss(t+this._x,e+this._y)},e.prototype.containerToElement=function(t,e){for(var i=this;i;)t-=i._x,e-=i._y,i=i._parent;return new Ss(t,e)},e.prototype.boundsByScreen=function(t){return void 0===t&&(t=null),t=this.boundsByContainer(t),t=this.container.toScreen(t)},e.prototype.hitTest=function(t,e){return t>=0&&t<this._width&&e>=0&&e<this._height},e.prototype.findChildAt=function(t,e,i){var o=this._elements,r=o?o.length:0;if(r>0)for(var n=r-1;n>=0;n--){var s=o[n];if(s.visible){var a=t-s._x,l=e-s._y;if((i||s._mouseEnabled)&&(s.isLayer||s.hitTest(a,l))){var h=s.findChildAt(a,l,i);if(h)return h;if(!s.isLayer&&s._mouseEnabled)return s}}}return null},e.prototype.move=function(t,e){t==this._x&&e==this._y||(this._x=t,this._y=e,this.invalidate())},e.prototype.resize=function(t,e){t==this._width&&e==this._height||(this._width=t,this._height=e,this.invalidate())},e.prototype.setBounds=function(t,e,i,o){t==this._x&&e==this._y&&i==this._width&&o==this._height||(this._x=t,this._y=e,this._width=i,this._height=o,this.sizeChanged())},e.prototype.setBoundsI=function(t,e,i,o){e>>=0,i>>=0,o>>=0,(t>>=0)==this._x&&e==this._y&&i==this._width&&o==this._height||(this._x=t,this._y=e,this._width=i,this._height=o,this.sizeChanged())},e.prototype.setRect=function(t){t.x==this._x&&t.y==this._y&&t.width==this._width&&t.height==this._height||(this._x=t.x,this._y=t.y,this._width=t.width,this._height=t.height,this.sizeChanged())},e.prototype.setRectI=function(t){var e=t.x>>0,i=t.y>>0,o=t.width>>0,r=t.height>>0;e==this._x&&i==this._y&&o==this._width&&r==this._height||(this._x=e,this._y=i,this._width=o,this._height=r,this.sizeChanged())},e.prototype.draw=function(){this._dirty&&this._dom&&(this._beforeDraw(this._dom),this._doDraw(this._dom),this._dirty=!1)},e.prototype.resetSize=function(){this._dom&&this._setSizeStyle(this._dom.style)},e.prototype.getHtml=function(){return this._dom&&this._dom.outerHTML},e.prototype.setImportantStyle=function(t,e){this._dom.style.setProperty(t,e,"important")},e.prototype._createDom=function(t){return t.createElement("div")},e.prototype._initDom=function(t){var e=t.style;e.position="absolute",e.boxSizing="border-box",this._addEventListeners(t)},e.prototype._addEventListeners=function(t){},e.prototype._removeEventListeners=function(t){},e.prototype.$_attached=function(t){this._doAttached(t)},e.prototype._doAttached=function(t){},e.prototype.$_detached=function(t){this._doDetached(t)},e.prototype._doDetached=function(t){},e.prototype._setSizeStyle=function(t){t.width=this._width+"px",t.height=this._height+"px"},e.prototype._getCssDisplay=function(){return"block"},e.prototype.resetStyleName=function(){this._setClassName(this._dom)},e.prototype._setClassName=function(t){var e=this._getCssSelector();e!=this._className&&(this._className=e,(t||this._dom).className=e||"")},e.prototype.applyBounds=function(){var t=this._dom.style;t.left=this._x+"px",t.top=this._y+"px",this._setSizeStyle(t)},e.prototype._beforeDraw=function(t){this._setClassName(t);var e=t.style;e.left=this._x+"px",e.top=this._y+"px",this._setSizeStyle(e)},e.prototype._hoverChanged=function(){},e.prototype._visibleChanged=function(){},e.prototype.sizeChanged=function(){this.invalidate(),this._doSizeChanged()},e.prototype._doSizeChanged=function(){},e}(se),Rs=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"isLayer",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){},e.prototype._doDraw=function(t){},e}(Os),Ds=function(t){function e(e,i){void 0===i&&(i=!1);var o=t.call(this,e)||this;return o._active=i,o}return o(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),e.prototype.$_activateView=function(){this._active||(this._doActivateView(),this._active=!0)},e.prototype.$_deactivateView=function(){(void 0===this.active||this._active)&&(this._dodDeactivateView(),this._active=!1)},e}(Rs);!function(t){t.NONE="none",t.SINGLE="single"}(as||(as={})),function(t){t.BLOCK="block",t.ROWS="rows",t.COLUMNS="columns",t.SINGLE_ROW="singleRow",t.SINGLE_COLUMN="singleColumn",t.SINGLE="single",t.NONE="none"}(ls||(ls={})),function(t){t.CELL="cell",t.CELL_AND_BORDER="cellAndBorder",t.MASK="mask"}(hs||(hs={}));var ks=function(t){return t==ls.SINGLE_ROW||t==ls.SINGLE_COLUMN||t==ls.SINGLE},Ps=function(t){function e(e,i){var o=t.call(this)||this;return o._manager=e,o._runStyle=i,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._manager&&this._manager.grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"runStyle",{get:function(){return this._runStyle},enumerable:!0,configurable:!0}),e.prototype.setValues=function(t){var e=this.grid.dataSource,i=this._getRows();i&&i.rows&&i.rows.length>0&&i.fields&&i.fields.length>0&&e.fillValue(i.rows,i.fields,t)},e.prototype.inflate=function(t,e){switch(t){case"left":this._inflateLeft(e);break;case"right":this._inflateRight(e);break;case"top":this._inflateTop(e);break;case"bottom":this._inflateBottom(e)}},e.prototype.getItems=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],o=this.getBounds(),r=o.top,n=o.bottom,s=r;s<=n;s++){var a=e.getItem(s);a&&(!t||a.dataRow>=0)&&i.push(a)}return i},e.prototype.getItemIndices=function(t){void 0===t&&(t=!0);for(var e=this.grid,i=[],o=this.getBounds(),r=o.top,n=o.bottom,s=r;s<=n;s++){var a=e.getItem(s);a&&(!t||a.dataRow>=0)&&i.push(a.index)}return i},e.prototype.getRows=function(){for(var t=this.grid,e=[],i=this.getBounds(),o=i.top,r=i.bottom,n=o;n<=r;n++){var s=t.getItem(n);if(s&&s.dataRow>=0){var a=s.dataRow;a>=0&&e.push(a)}}return e},e.prototype._resized=function(){this._manager&&this._manager.$_itemResized(this)},e.prototype.toProxy=function(){var t=this.grid,e=this.getBounds(),i=t.getItem(e.r1),o=t.getItem(e.r2);return{style:this.style,startItem:e.r1,startRow:i?i.dataRow:-1,startColumn:e.c1.firstColumn.name,endItem:e.r2,endRow:o?o.dataRow:-1,endColumn:e.c2.lastColumn.name,startLayout:e.c1,endLayout:e.c2}},e}(ft),Ts=function(t){function e(e){var i=t.call(this)||this;return i._exclusiveMode=!0,i._itemStyle=ls.BLOCK,i._items=[],i._locked=!1,i._grid=e,i}return o(e,t),e.prototype._doDispose=function(){this._grid=null,this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exclusiveMode",{get:function(){return this._exclusiveMode},set:function(t){t!=this._exclusiveMode&&(this._exclusiveMode=t,this.clear())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemStyle",{get:function(){return this._itemStyle},set:function(t){t!=this._itemStyle&&(this._itemStyle=t,this.clear())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"single",{get:function(){return 1==this._items.length&&this._items[0].single},enumerable:!0,configurable:!0}),e.prototype.lock=function(){this._locked=!0},e.prototype.unlock=function(){this._locked=!1},e.prototype.getItem=function(t){return this._items[t]},e.prototype.add=function(t,e,i){if(this._locked)return null;if(i==ls.NONE)return this.clear(),null;this._exclusiveMode&&i!=this._style&&this.clear();var o=null;switch(i){case ls.COLUMNS:o=new Fs(this,i,t.layout,e.layout);break;case ls.SINGLE_COLUMN:o=new Fs(this,i,t.layout,t.layout);break;case ls.ROWS:o=new Ls(this,i,t.itemIndex,e.itemIndex);break;case ls.SINGLE_ROW:o=new Ls(this,i,t.itemIndex,t.itemIndex);break;case ls.BLOCK:o=new Ms(this,i,t,e);break;case ls.SINGLE:o=new Ms(this,i,t,t)}return o&&this.$_addItem(o)},e.prototype.remove=function(t){if(!this._locked){var i=this._items.indexOf(t);i>=0&&(this._items.splice(i,1),this.fireEvent(e.REMOVED,t),this._changed())}},e.prototype.clear=function(){this._locked||this._items.length>0&&(this._items.length=0,this.fireEvent(e.CLEARED),this._changed())},e.prototype.selectRow=function(t){this.clear(),this.$_addItem(new Ls(this,ls.ROWS,t,t))},e.prototype.containsItem=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].containsItem(t))return!0;return!1},e.prototype.containsLayout=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].containsLayout(t))return!0;return!1},e.prototype.containsCell=function(t){return this.contains(t.itemIndex,t.layout)},e.prototype.contains=function(t,e){for(var i=0,o=this._items.length;i<o;i++)if(this._items[i].contains(t,e))return!0;return!1},e.prototype.normalize=function(){},e.prototype.canResize=function(t){return t&&!ks(t._runStyle)},e.prototype._changed=function(){this.fireEvent(e.CHANGED)},e.prototype.$_addItem=function(t){if(!t)throw new Error("item is null");return this._items.indexOf(t)<0&&(this._items.push(t),this.fireEvent(e.ADDED,t),this._changed()),t},e.prototype.$_itemResized=function(t){this.fireEvent(e.RESIZED,t),this._changed()},e.prototype.$_ended=function(t){this.fireEvent(e.ENDED,t)},e.CHANGED="onSelectionChanged",e.ADDED="onSelectionAdded",e.REMOVED="onSelectionRemoved",e.CLEARED="onSelectionCleared",e.RESIZED="onSelectionResized",e.ENDED="onSelectionEnded",e}(se),Ms=function(t){function e(e,i,o,r){var n=t.call(this,e,i)||this;return n._startIndex=o.clone(),n._endIndex=r.clone(),lt.isDebugging()&&n._startIndex.layout,lt.isDebugging()&&n._endIndex.layout,n}return o(e,t),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endIndex",{get:function(){return this._endIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return ls.BLOCK},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"single",{get:function(){return Hn.areEquals(this._startIndex,this._endIndex)},enumerable:!0,configurable:!0}),e.prototype.getBounds=function(){var t=this.grid;if(this._startIndex.normalize(t),this._endIndex.normalize(t),Hn.areEquals(this._startIndex,this._endIndex))return zn.create(this._startIndex);var e=t.activeCellLayout._dataCells,i=this._startIndex.layout,o=this._endIndex.layout,r=void 0,n=void 0;return i.col<=o.col?(r=e[0][i.col],n=e[e.length-1][o.col]):(r=e[0][o.col],n=e[e.length-1][i.col]),zn.createRange(this._startIndex.itemIndex,r,this._endIndex.itemIndex,n)},e.prototype.containsItem=function(t){var e=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),i=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex);return t>=e&&t<=i},e.prototype.containsLayout=function(t){if(!t)return!1;if(this.single)return this._startIndex.layout===t;var e=t.distance,i=this._startIndex.layout.distance,o=this._endIndex.layout.distance;return i<o?e>=i&&e<=o:e>=o&&e<=i},e.prototype.contains=function(t,e){return this.getBounds().contains(t,e)},e.prototype.resizeTo=function(t){this.grid.isValid(t)&&!Hn.areEquals(t,this._endIndex)&&(this._endIndex.assign(t),this._resized())},e.prototype.moveRow=function(t){this._startIndex.itemIndex+=t,this._endIndex.itemIndex+=t},e.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},e.prototype.mergeWith=function(t){},e.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e,i=this.grid,o=i.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(!o||(e=o.length)<1)return null;for(var r=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),n=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),s=[],a=r;a<=n;a++){var l=i.getItem(a);if(l&&l.isDataRow){for(var h={},u=0;u<e;u++){var c=o[u];h[c.fieldName]=l.getData(c.dataIndex)}if(s.push(h),t>0&&s.length==t)break}}return s},e.prototype._inflateLeft=function(t){this._startIndex.layout.distance<=this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},e.prototype._inflateRight=function(t){this._startIndex.layout.distance>this._endIndex.layout.distance?t.layout!==this._startIndex.layout&&(this._startIndex.layout=t.layout,this._resized()):t.layout!==this._endIndex.layout&&(this._endIndex.layout=t.layout,this._resized())},e.prototype._inflateTop=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex<=this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},e.prototype._inflateBottom=function(t){var e=this.grid,i=Math.max(0,Math.min(e.itemCount-1,t.itemIndex));this._startIndex.itemIndex>this._endIndex.itemIndex?i!==this._startIndex.itemIndex&&(this._startIndex.itemIndex=i,this._resized()):i!==this._endIndex.itemIndex&&(this._endIndex.itemIndex=i,this._resized())},e.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startIndex.layout,this._endIndex.layout);if(e&&!(e.length<1)){for(var i=Math.min(this._startIndex.itemIndex,this._endIndex.itemIndex),o=Math.max(this._startIndex.itemIndex,this._endIndex.itemIndex),r=[],n=[],s=i;s<=o;s++)r.push(t.getItem(s).dataRow);for(var a=0,l=e;a<l.length;a++){var h=l[a];n.push(h.dataIndex)}return{rows:r,fields:n}}},e.prototype.toString=function(){return this._startIndex+" ~ "+this._endIndex},e}(Ps),Ls=function(t){function e(e,i,o,r){var n=t.call(this,e,i)||this;return n._startRow=o,n._endRow=r,n}return o(e,t),Object.defineProperty(e.prototype,"startRow",{get:function(){return this._startRow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endRow",{get:function(){return this._endRow},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topRow",{get:function(){return Math.min(this._startRow,this._endRow)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomRow",{get:function(){return Math.max(this._startRow,this._endRow)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return ls.ROWS},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"single",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.getBounds=function(){var t=this.grid,e=t.itemCount;return this._startRow=Math.max(0,Math.min(e-1,this._startRow)),this._endRow=Math.max(0,Math.min(e-1,this._endRow)),this._startRow<=this._endRow?zn.createRange(this._startRow,t.activeCellLayout.first,this._endRow,t.activeCellLayout.last):zn.createRange(this._endRow,t.activeCellLayout.first,this._startRow,t.activeCellLayout.last)},e.prototype.contains=function(t,e){return this.containsItem(t)},e.prototype.containsItem=function(t){return t>=this.topRow&&t<=this.bottomRow},e.prototype.containsLayout=function(t){return!0},e.prototype.resizeTo=function(t){var e=Math.max(0,t.itemIndex);e!=this._endRow&&(this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},e.prototype.moveRow=function(t){this._startRow+=t,this._endRow+=t},e.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},e.prototype.mergeWith=function(t){},e.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(e.getVisibleLayout(0),e.getVisibleLayout(e.visibleLayoutCount-1));if(!i)return null;var o=i.length;if(o<1)return null;for(var r=Math.max(0,Math.min(this._startRow,this._endRow)),n=Math.min(e.itemCount-1,Math.max(this._startRow,this._endRow)),s=[],a=r;a<=n;a++){var l=e.getItem(a);if(l&&l.isDataRow){for(var h={},u=0;u<o;u++){var c=i[u];h[c.fieldName]=l.getData(c.dataIndex)}if(s.push(h),t>0&&s.length==t)break}}return s},e.prototype._inflateLeft=function(t){},e.prototype._inflateRight=function(t){},e.prototype._inflateTop=function(t){var e=t.itemIndex;e!=this.topRow&&(this._startRow<=this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},e.prototype._inflateBottom=function(t){var e=t.itemIndex;e!=this.bottomRow&&(this._startRow>this._endRow?this._startRow=Math.max(0,Math.min(this.grid.itemCount-1,e)):this._endRow=Math.max(0,Math.min(this.grid.itemCount-1,e)),this._resized())},e.prototype._getRows=function(){var t=this.grid,e=t.activeCellLayout,i=t.collectDataColumns(e.first,e.last);if(i&&!(i.length<1)){for(var o=Math.max(0,Math.min(this._startRow,this._endRow)),r=Math.min(t.itemCount-1,Math.max(this._startRow,this._endRow)),n=[],s=[],a=o;a<=r;a++)n.push(t.getItem(a).dataRow);for(var l=0,h=i;l<h.length;l++){var u=h[l];s.push(u.dataIndex)}return{rows:n,fields:s}}},e}(Ps),Fs=function(t){function e(e,i,o,r){var n=t.call(this,e,i)||this;return n._startLayout=o,n._endLayout=r,n}return o(e,t),Object.defineProperty(e.prototype,"startLayout",{get:function(){return this._startLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endLayout",{get:function(){return this._endLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftLayout",{get:function(){return this._startLayout.col<=this._endLayout.col?this._startLayout:this._endLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightLayout",{get:function(){return this._startLayout.col>this._endLayout.col?this._startLayout:this._endLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return ls.COLUMNS},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"single",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.getBounds=function(){var t=this.grid.activeCellLayout,e=this._startLayout,i=this._endLayout;if(i.col>e.col){var o=e;e=i,i=o}e=t.getTopOf(e),i=t.getBottomOf(i,!0);var r=this.grid.itemCount-1;return zn.createRange(0,e,r,i)},e.prototype.contains=function(t,e){return this.containsLayout(e)},e.prototype.containsItem=function(t){return!0},e.prototype.containsLayout=function(t){return t.distance>=this._startLayout.distance&&t.distance<=this._endLayout.distance},e.prototype.resizeTo=function(t){t.layout!==this._endLayout&&(this._endLayout=t.layout,this._resized())},e.prototype.moveRow=function(t){},e.prototype.intersectsWith=function(t){return this.getBounds().intersectsWith(t.getBounds())},e.prototype.mergeWith=function(t){},e.prototype.getData=function(t){if(void 0===t&&(t=-1),0==t)return null;var e=this.grid,i=e.collectDataColumns(this._startLayout,this._endLayout);if(!i)return null;for(var o=e.itemCount,r=[],n=0;n<o;n++){var s=e.getItem(n);if(s&&s.isDataRow){for(var a={},l=0,h=i.length;l<h;l++)a[i[l].fieldName]=s.getData(i[l].dataIndex);if(r.push(a),t>0&&r.length==t)break}}return r},e.prototype._inflateLeft=function(t){var e=t.layout;e!==this.leftLayout&&(this._startLayout.distance<=this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},e.prototype._inflateRight=function(t){var e=t.layout;e!==this.rightLayout&&(this._startLayout.distance>this._endLayout.distance?this._startLayout=e:this._endLayout=e,this._resized())},e.prototype._inflateTop=function(t){},e.prototype._inflateBottom=function(t){},e.prototype._getRows=function(){var t=this.grid,e=t.collectDataColumns(this._startLayout,this._endLayout);if(e){for(var i=t.itemCount,o=[],r=[],n=0;n<i;n++)o.push(t.getItem(n).dataRow);for(var s=0,a=e;s<a.length;s++){var l=a[s];r.push(l.dataIndex)}return{rows:o,fields:r}}},e}(Ps),Ns=function(t){function e(e){return t.call(this,e,"selectionView")||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-selection"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(Rs),Vs=function(t){function e(e){var i=t.call(this,e,"selectionMask")||this;return i._toped=!1,i._bottomed=!1,i._lefted=!1,i._righted=!1,i._view=new Ns(e),i.addChild(i._view),i}return o(e,t),Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),e.prototype.prepare=function(){this._toped=this._bottomed=this._lefted=this._righted=!1},e.prototype.updateElement=function(){var t=0,e=0,i=this.width,o=this.height;this._lefted&&(t-=10,i+=10),this._righted&&(i+=10),this._toped&&(e-=10,o+=10),this._bottomed&&(o+=10),this._view.setBounds(t,e,i,o)},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},e}(Rs),Bs=function(t){function e(e,i){var o=t.call(this,e.doc,i)||this;return o._pool=[],o._views={},o._rangeRect=new N,o._grid=e,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new Vs(this.doc),this._views[e]=i),i._item=t,this.addChild(i),i},e.prototype.clearViews=function(){for(var t in this._views){var e=this._views[t];this.removeChild(e),this._pool.push(e)}this._views={}},e.prototype.layout=function(){var t=this._grid.layoutManager,e=new N;for(var i in this._views){var o=this._views[i],r=o.item,n=!1;if(!r.single&&(o.prepare(),r instanceof Ls?(n=this.$_getSelectionRowsRect(t,r,o,e),o._lefted=!0,o._righted=!0):r instanceof Fs?(n=this.$_getSelectionColumnsRect(t,r,o,e),o._toped=!0,o._bottomed=!0):n=this.$_getSelectionRangeRect(t,r,o,e),n)){var s=t.contentBounds.y+t.footerBounds.y;e.bottom>s&&(o._bottomed=!0,e.bottom=s)}o.visible=n,o.visible&&(o.setRectI(e),o.updateElement(),o.invalidate())}},e.prototype.$_getSelectionRowsRect=function(t,e,i,o){var r,n,s=this._grid,a=e.getBounds(),l=a.r1,h=a.r2,u=t.itemCount,c=t.fixedItemCount,d=s.topIndex;if(c>0){if(l>=d+c+u||h<0||l>=c&&h<d+c)return!1;var p=t.fixedHeight+s.fixedOptions.rowBarHeight;l<c?r=t.getTableItemBounds(Math.max(0,l)):((r=t.getTableItemBounds(Math.max(0,l-d))).y<p&&(i._toped=!0),r.y=Math.max(r.y,p)),h<c?n=t.getTableItemBounds(h):l<=c&&h<c+d?n=t.getTableItemBounds(Math.min(c+d,c)-1):h>=d?(n=t.getTableItemBounds(Math.min(t.itemCount+c-1,h-d))).y=Math.max(n.y,p):n=r}else{if(!(u>0))return!1;if(l>=d+u||h<d)return!1;p=l-d;r=t.getTableItemBounds(Math.max(0,p)),n=t.getTableItemBounds(Math.min(u-1,h-d)),p<0&&(i._toped=!0)}return o.copy(r.union(n)),o.offset(t.fixedContentBounds.x,t.contentBounds.y+t.bodyBounds.y),o.right=t.rightLayoutCount>0?t.rightContentBounds.right:t.contentBounds.right,!0},e.prototype.$_getSelectionColumnsRect=function(t,e,i,o,r){var n=this._grid,s=e.getBounds(),a=t.fixedLayoutCount,l=t.rightLayoutCount,h=(t.rightFirstLayout,s.c1.col),u=s.c2.col,c=(n.fixedOptions.colBarWidth,t.getDataRect(s.c1)),d=t.getDataRect(s.c2);if(o.left=Math.min(c.x,d.x),o.right=Math.max(c.right,d.right),o.y=t.contentBounds.y+t.headerBounds.bottom,o.height=Math.min(t.dataBounds.height,t.footerBounds.y),r&&r.copy(o),h>=a){var p=t.fixedContentBounds.right;o.x<p&&(i._lefted=!0,o.left=Math.max(o.left,p)),o.right<p&&(i._righted=!0,o.width=0)}if(l>0){var _=t.rightFirstLayout,f=t.rightContentBounds;o.left>f.left?o.width=0:u<_&&o.right>=t.rightContentBounds.left&&(o.right=Math.min(o.right,t.rightContentBounds.x),i._righted=!0)}return!0},e.prototype.$_getSelectionRangeRect=function(t,e,i,o,r){var n=this._rangeRect;return!!this.$_getSelectionRowsRect(t,e,i,n)&&(o.y=n.y,o.bottom=n.bottom,this.$_getSelectionColumnsRect(t,e,i,n,r),o.x=n.x,o.right=n.right,r&&(r.y=o.y,r.height=o.height),!0)},e}(Rs),$s=function(t){function e(e){var i=t.call(this,e)||this;return i._refreshMode=R.ALL,i._columnResizable=!0,i._columnMovable=!0,i._minCellWidth=8,i._defaultColumnWidth=100,i._fitStyle=y.NONE,i._rowResizable=!1,i._eachRowResizable=!1,i._autoClearHeights=!0,i._rowHeight=0,i._dataHeights=null,i._minTableRowHeight=23,i._minRowHeight=23,i._maxRowHeight=0,i._hscrollBar=!0,i._vscrollBar=!0,i._liveScroll=!0,i._scrollDuration=0,i._hscrollDuration=0,i._hintDelay=0,i._rowChangeDelay=0,i._horzPageScroll=!1,i._emptyMessage="이 곳에 표시할 메시지를 DisplayOptions.emptyMessage 속성으로 설정합니다.",i._showEmptyMessage=!1,i._focusVisible=!0,i._focusType="layer",i._rowFocusType=m.NONE,i._wheelEnabled=!0,i._wheelScrollLines=3,i._wheelScrollHorz=16,i._wheelAccelDelay=0,i._wheelAccelScroll=null,i._wheelEventPropagate=!0,i._rightClickable=!0,i._remergeWhenColumnMoved=!0,i._editItemMerging=!1,i._showInnerFocus=!0,i._toastZIndex=3e3,i._popupDropdownCount=0,i._selectionMode=as.SINGLE,i._selectionStyle=ls.BLOCK,i._selectionDisplay=hs.CELL,i._spanSelecting=!0,i._rowHoverType=m.NONE,i._rowBlockType=m.NONE,i._showEmptyTooltip=!1,i._showChangeMarker=!0,i._showNativeEditButton=!0,i._baseZindex=2e3,i._useAlternateRowStyle=!0,i._useFocusClass=!1,i._watchDisplayChange=!0,lt.isMobile()&&(i._selectionStyle=ls.NONE),(lt.ieNine||lt.ieTen)&&(i._focusType="line"),e.setWatchTimer(i._watchDisplayChange),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"refreshMode",{get:function(){return this._refreshMode},set:function(t){t!=this._refreshMode&&(this._refreshMode=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnResizable",{get:function(){return this._columnResizable},set:function(t){t!=this._columnResizable&&(this._columnResizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnMovable",{get:function(){return this._columnMovable},set:function(t){t!=this._columnMovable&&(this._columnMovable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultColumnWidth",{get:function(){return this._defaultColumnWidth},set:function(t){t!=this._defaultColumnWidth&&(this._defaultColumnWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitStyle",{get:function(){return this._fitStyle},set:function(t){t!=this._fitStyle&&(this._fitStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowResizable",{get:function(){return this._rowResizable},set:function(t){t!=this._rowResizable&&(this._rowResizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eachRowResizable",{get:function(){return this._eachRowResizable},set:function(t){t!=this._eachRowResizable&&(this._eachRowResizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoClearHeights",{get:function(){return this._autoClearHeights},set:function(t){t!=this._autoClearHeights&&(this._autoClearHeights=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(t){t!=this._rowHeight&&(this._rowHeight=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataHeights",{get:function(){return this._dataHeights},set:function(t){t&&t.length>0?this._dataHeights=t.slice():this._dataHeights=null,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minTableRowHeight",{get:function(){return this._minTableRowHeight},set:function(t){(t=Math.max(e.MIN_TABLE_ROW_HEIGHT,t))!=this._minTableRowHeight&&(this._minTableRowHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){(t=Math.max(e.MIN_TABLE_ROW_HEIGHT,t))!=this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxRowHeight",{get:function(){return this._maxRowHeight},set:function(t){(t=Math.max(0,t))!=this._maxRowHeight&&(this._maxRowHeight=t,this._autoClearHeights&&this.grid&&this.grid.clearRowHeights(!1),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minCellWidth",{get:function(){return this._minCellWidth},set:function(t){(t=Math.max(0,t))!=this._minCellWidth&&(this._minCellWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hscrollBar",{get:function(){return this._hscrollBar},set:function(t){t!=this._hscrollBar&&(this._hscrollBar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vscrollBar",{get:function(){return this._vscrollBar},set:function(t){t!=this._vscrollBar&&(this._vscrollBar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"liveScroll",{get:function(){return this._liveScroll},set:function(t){t!=this._liveScroll&&(this._liveScroll=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollDuration",{get:function(){return this._scrollDuration},set:function(t){t!=this._scrollDuration&&(this._scrollDuration=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hscrollDuration",{get:function(){return this._hscrollDuration},set:function(t){t!=this._hscrollDuration&&(this._hscrollDuration=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hintDelay",{get:function(){return this._hintDelay},set:function(t){(t=Math.max(t,0))!=this._hintDelay&&(this._hintDelay=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowChangeDelay",{get:function(){return this._rowChangeDelay},set:function(t){t!=this._rowChangeDelay&&(this._rowChangeDelay=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"horzPageScroll",{get:function(){return this._horzPageScroll},set:function(t){t!=this._horzPageScroll&&(this._horzPageScroll=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptyMessage",{get:function(){return this._emptyMessage},set:function(t){t!=this._emptyMessage&&(this._emptyMessage=t,this.grid.setEmptyMessage(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showEmptyMessage",{get:function(){return this._showEmptyMessage},set:function(t){t!=this._showEmptyMessage&&(this._showEmptyMessage=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusVisible",{get:function(){return this._focusVisible},set:function(t){t!=this._focusVisible&&(this._focusVisible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusType",{get:function(){return this._focusType},set:function(t){t!==this.focusType&&(this._focusType=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowFocusType",{get:function(){return this._rowFocusType},set:function(t){t!=this._rowFocusType&&(this._rowFocusType=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelEnabled",{get:function(){return this._wheelEnabled},set:function(t){t!=this._wheelEnabled&&(this._wheelEnabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelScrollLines",{get:function(){return this._wheelScrollLines},set:function(t){t!=this._wheelScrollLines&&(this._wheelScrollLines=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelScrollHorz",{get:function(){return this._wheelScrollHorz},set:function(t){t!=this._wheelScrollHorz&&(this._wheelScrollHorz=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelAccelDelay",{get:function(){return this._wheelAccelDelay},set:function(t){t!=this._wheelAccelDelay&&(this._wheelAccelDelay=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelAccelScroll",{get:function(){return this._wheelAccelScroll},set:function(t){t!=this._wheelAccelScroll&&(this._wheelAccelScroll=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wheelEventPropagate",{get:function(){return this._wheelEventPropagate},set:function(t){t!=this._wheelEventPropagate&&(this._wheelEventPropagate=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightClickable",{get:function(){return this._rightClickable},set:function(t){t!=this._rightClickable&&(this._rightClickable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"remergeWhenColumnMoved",{get:function(){return this._remergeWhenColumnMoved},set:function(t){this._remergeWhenColumnMoved=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editItemMerging",{get:function(){return this._editItemMerging},set:function(t){t!=this._editItemMerging&&(this._editItemMerging=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showInnerFocus",{get:function(){return this._showInnerFocus},set:function(t){t!=this._showInnerFocus&&(this._showInnerFocus=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toastZIndex",{get:function(){return this._toastZIndex},set:function(t){t!=this._toastZIndex&&(this._toastZIndex=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupDropdownCount",{get:function(){return this._popupDropdownCount},set:function(t){t!=this._popupDropdownCount&&(this._popupDropdownCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionMode",{get:function(){return this._selectionMode},set:function(t){t!=this._selectionMode&&(this._selectionMode=t,this.grid.clearSelection())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionStyle",{get:function(){return this._selectionStyle},set:function(t){if(t!=this._selectionStyle){var e=this.grid.selections;if(e.count>0){e.getItem(0).getBounds();e.clear()}this._selectionStyle=t,this._refreshOwner()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionDisplay",{get:function(){return this._selectionDisplay},set:function(t){t!=this._selectionDisplay&&(this._selectionDisplay=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spanSelecting",{get:function(){return this._spanSelecting},set:function(t){t!=this._spanSelecting&&(this._spanSelecting=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowHoverType",{get:function(){return this._rowHoverType},set:function(t){t!=this._rowHoverType&&(this._rowHoverType=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowBlockType",{get:function(){return this._rowBlockType},set:function(t){t!=this._rowBlockType&&(this._rowBlockType=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowBlockCallback",{get:function(){return this._rowBlockCallback},set:function(t){t!==this._rowBlockCallback&&(this._rowBlockCallback=t,this._rowBlockType!=m.NONE&&this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showEmptyTooltip",{get:function(){return this._showEmptyTooltip},set:function(t){this._showEmptyTooltip=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showChangeMarker",{get:function(){return this._showChangeMarker},set:function(t){t!=this._showChangeMarker&&(this._showChangeMarker=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollMessageCallback",{get:function(){return this._scrollMessageCallback},set:function(t){this._scrollMessageCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showNativeEditButton",{get:function(){return this._showNativeEditButton},set:function(t){t!=this._showNativeEditButton&&(this._showNativeEditButton=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"baseZindex",{get:function(){return this._baseZindex},set:function(t){this._baseZindex=Math.max(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useAlternateRowStyle",{get:function(){return this._useAlternateRowStyle},set:function(t){t!=this._useAlternateRowStyle&&(this._useAlternateRowStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useFocusClass",{get:function(){return this._useFocusClass},set:function(t){t!=this._useFocusClass&&(t||(this.grid.setFocusedClass(this.grid.focusedIndex,!1),this.grid.setFocusedRowClass(this.grid.focusedIndex,!1)),this._useFocusClass=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editButtonHeight",{get:function(){return this.grid.body.editButtonHeight},set:function(t){this.grid.body.editButtonHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"watchDisplayChange",{get:function(){return this._watchDisplayChange},set:function(t){t!=this._watchDisplayChange&&(this._watchDisplayChange=t,this.grid.setWatchTimer(t))},enumerable:!0,configurable:!0}),e.MIN_TABLE_ROW_HEIGHT=20,e}(Is),As=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.width=t,this.height=e}return t.empty=function(){return new t},t.create=function(e,i){return void 0===e&&(e=0),void 0===i&&(i=0),new t(e,i)},Object.defineProperty(t.prototype,"isEmpty",{get:function(){return 0===this.width||0===this.height},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this.width,this.height)},t.prototype.equals=function(t){return t===this||t&&this.width===t.width&&this.height===t.height},t.prototype.setEmpty=function(){return this.width=this.height=0,this},t.prototype.set=function(t,e){return this.width=t,this.height=e,this},t.prototype.round=function(){var t=this.clone();return t.width>>>=0,t.height>>>=0,t},t.prototype.toString=function(){return"{width: "+this.width+", height: "+this.height+"}"},t.EMPTY=new t,t}(),js=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof Pu)return t;t=t.parent}return null},enumerable:!0,configurable:!0}),e.prototype.measure=function(t,e,i){return this._setClassName(this._dom),this._doMeasure(t,e,i)},e.prototype.layoutContent=function(t){this._doPrepareContent(t),this._doLayoutContent(t)},e.prototype._getCssSelector=function(){return""},e.prototype._getCssDisplay=function(){return"table"},e.prototype._doDraw=function(t){this._doRender(t)},e.prototype._doMeasure=function(t,e,i){return new As(e,i)},e.prototype._doPrepareContent=function(t){},e.prototype._doLayoutContent=function(t){},e.prototype._doRender=function(t){},e}(Os);function Hs(t){return t&&"itemIndex"in t}var Ws,Gs=function(t){function e(e,i,o){void 0===o&&(o=null);var r=t.call(this,e,o)||this;return r._ff=lt.isFirefox,r._chromium=lt.isChromium,r._textProp=lt.TextProp,r._cursor="default",r._model=i,r}return o(e,t),e.prototype._doDispose=function(){this._model=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.setCursor=function(t){t!==this._cursor&&(this._cursor=t,this._dom.style.cursor=t)},e}(js),Us=function(t){function e(e){return t.call(this,e,"emptyGridView")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.setMessage=function(t){this._span[lt.TextProp]=t},e.prototype._createDom=function(e){var i=t.prototype._createDom.call(this,e),o=this._span=e.createElement("span");return i.appendChild(o),i},e.prototype._getCssSelector=function(){return"rg-empty-grid"},e.prototype._doDraw=function(t){this.setMessage(this.grid.displayOptions.emptyMessage)},e}(js),zs=function(t){function e(e,i,o){void 0===o&&(o=null);var r=t.call(this,e,i,o)||this;return r._explicitWidth=NaN,r}return o(e,t),e.prototype._doDispose=function(){this._tbody=this._thead=this._table=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"tableRowCount",{get:function(){return this._tbody.childElementCount},enumerable:!0,configurable:!0}),e.prototype.getCellPoint=function(t,e){return(e=e||new Ss).x+=t.offsetLeft,e.y+=t.offsetTop,e},e.prototype._createDom=function(t){var e=t.createElement("div"),i=this._table=t.createElement("table"),o=i.style;return o.setProperty("table-layout","fixed","important"),o.setProperty("width","100%","important"),i.className="rg-table",e.appendChild(i),this._thead=t.createElement("thead"),i.appendChild(this._thead),this._tbody=t.createElement("tbody"),i.appendChild(this._tbody),e},e.prototype._clearSpans=function(){},e.prototype._addSpan=function(t,e,i,o){},e.prototype._addColSpan=function(t,e,i){},e.prototype._addRowSpan=function(t,e,i){},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.overflow="hidden"},e.prototype._doPrepareContent=function(t){var e=this._getExplicitWidth(t);lt.equalNumbers(e,this._explicitWidth)||(this._table.style.width=e>0?e+"px":"100%",this._explicitWidth=e),this._doPrepareTableExtents(t),this._doPrepareTable(t)},e.prototype._doDraw=function(t){this._doRender(t),this._doRenderTable(this._tbody)},e.prototype._getExplicitWidth=function(t){return NaN},e.prototype._doPrepareTableExtents=function(t){},e.prototype._doPrepareTable=function(t){this._doPrepareTableHead(t,this._thead),this._doPrepareTableRows(t,this._tbody)},e.prototype._doPrepareTableHead=function(t,e){var i,o=nt(e);0==e.childElementCount?(i=o.createElement("tr"),e.appendChild(i),i.setAttribute("aria-hidden","true"),(l=i.style).setProperty("border","0px none","important")):i=e.lastElementChild;for(var r=this._getCellCount(t);i.childElementCount<r;){(a=o.createElement("th")).scope="col",(l=a.style).setProperty("visibility","hidden","important"),l.setProperty("margin","0px","important"),l.setProperty("padding","0px","important"),l.setProperty("font-size","0px","important"),l.setProperty("line-height","0px","important"),l.height="0px",i.appendChild(a)}for(;i.childElementCount>r;)i.removeChild(i.lastChild);for(var n=i.children,s=0;s<n.length;s++){var a,l;(l=(a=n[s]).style).width=this._getCellWidth(t,s)+"px"}},e.prototype._prepareTableRowCells=function(t,e){for(var i=this._getCellCount(t),o=nt(e),r=e.childElementCount;r<i;){var n=o.createElement("td");e.appendChild(n);var s=this._prepareCellContent(n,r++);n.appendChild(s)}for(;e.childElementCount>i;)e.removeChild(e.lastChild);return e.childElementCount},e.prototype._isFixedHeight=function(t){return!0},e.prototype._getMinRowHeight=function(t){return t.minRowHeight},e.prototype._doPrepareTableRow=function(t,e,i,o){this._prepareTableRowCells(t,o);var r=this._isFixedHeight(t),n=o.children,s=r?this._getTableRowHeight(t,i):this._getMinRowHeight(t),a=s-1+"px",l=o.style;o.$_view=this.$_hash,o.$_fix=r,o.$_hei=r?s:0,l.height=s+"px",l.display="";for(var h=0,u=n.length;h<u;h++){var c=n[h];this._ff&&(c.style.height="100%");var d=c.firstElementChild;d||(d=this._prepareCellContent(c,h),c.appendChild(d));var p=d.style,_=r?a:"";_!=p.maxHeight&&(p.maxHeight=_),"hidden"!==p.overflow&&(p.overflow="hidden")}},e.prototype._doRenderTable=function(t){for(var e=t.children,i=0;i<e.length;i++){var o=e[i];this._renderRow(o,i)}},e.prototype._renderRow=function(t,e){this._doDrawRow(e,t);for(var i=t.children,o=0;o<i.length;o++){var r=i[o];this._renderCell(r.lastElementChild,e,o)}},e.prototype._renderCell=function(t,e,i){this._doDrawCell(e,i,t)},e.prototype._prepareCellContent=function(t,e){return nt(t).createElement("div")},e.prototype._doDrawRow=function(t,e){},e.prototype._doDrawCell=function(t,e,i){},e.prototype._getTableRow=function(t,e){return this._tbody.children[e]},e.prototype._getTableRows=function(t,e,i){for(var o=[],r=0;r<i;r++)o.push(this._tbody.children[e+r]);return o},e.prototype._getTableCell=function(t,e){return this._tbody.children[t].children[e]},e.prototype.getCellContent=function(t,e){return this._tbody.children[t].children[e].firstElementChild},e.prototype.getContentAt=function(t){var e,i=t.grid.layoutManager,o=i.fixedItemCount,r=t.column?t.column.index:0;return e=o>0?t.itemIndex<o?t.itemIndex:t.itemIndex-i.topIndex+1:t.itemIndex-i.topIndex,this.getCellContent(e,r)},e}(Gs),Ys=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._doPrepareTableRows=function(t,e){for(var i=this._getTableRowCount(t),o=nt(e);e.childElementCount<i;){var r=o.createElement("tr");e.appendChild(r)}for(;e.childElementCount>i;)e.removeChild(e.lastChild);for(var n=e.children,s=0;s<i;s++){(r=n[s]).style.height=this._getTableRowHeight(t,s)+"px",this._doPrepareTableRow(t,s,s,r)}},e.prototype._getTableRowCount=function(t){return 1},e}(zs),qs=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._trCount=0,e._trs=1,e}return o(e,t),e.prototype._getTrs=function(t){return 1},e.prototype._getTableRowCount=function(t){var e=t.fixedItemCount,i=e+t.itemCount;return i*=this._trs,i+=e>0?1:0},e.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount,o=e*this._trs;return i>0&&e>=i?o+1:o},e.prototype._getTableRow=function(t,e){var i=this.$_getTableIndex(t,e);return this._tbody.children[i]},e.prototype.$_getTableRowAt=function(t,e){var i=this.$_getTableIndex(t,e);return this._tbody.children[i]},e.prototype._getTableRowInternal=function(t,e,i){var o=this.$_getTableIndex(t,e);return this._tbody.children[o+i]},e.prototype._doPrepareTableRows=function(t,e){for(var i=t.$_getItems(),o=this._trs=this._getTrs(t),r=t.fixedItemCount,n=t.itemCount+r,s=this._trCount=this._getTableRowCount(t),a=nt(e);e.childElementCount<s;){var l=a.createElement("tr");e.appendChild(l)}for(;e.childElementCount>s;)e.removeChild(e.lastChild);var h=e.children,u=0,c=0;if(r>0){for(u=0;u<r;u++)for(var d=0;d<o;d++,c++)this._doPrepareTableRow(t,u,c,h[c]);this.$_prepareFixedBar(t,h[c++])}for(;u<n&&c<s;u++){var p=i[u].isData?o:1;for(d=0;d<p&&c<s;d++,c++)this._doPrepareTableRow(t,u,c,h[c])}},e.prototype.$_prepareFixedBar=function(t,e){var i=rt(e),o=this._prepareTableRowCells(t,e),r=t.fixedBarHeight,n=e.style;r>0?n.height=t.fixedBarHeight+"px":n.display="none";for(var s=e.children,a=0;a<o;a++){var l=s[a];l instanceof i.HTMLTableCellElement&&(l.rowSpan=1,l.style.display=""),(l=s[a].firstElementChild)&&(l.style.maxHeight="0px",l.style.overflow="hidden")}return r},e.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},e.prototype._getCellContent=function(t){return t.firstElementChild},e.prototype._updateCellContent=function(t,e,i){this._doUpdateCellContent(t,e,this._getCellContent(i))},e.prototype._doUpdateCellContent=function(t,e,i){},e}(zs),Ks=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,e,i)||this;return o._fixed=!1,o._index=new Hn,o}return o(e,t),e.prototype._doDispose=function(){this._index&&this._index.dispose(),this._index=null,this._cellDom&&this._cellDom.parentElement.removeChild(this._cellDom),this._cellDom=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"fixed",{get:function(){return this._fixed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"index",{get:function(){return this._index},set:function(t){Hn.areEquals(this._index,t)||(this._index.assignFrom(t),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"item",{get:function(){return this._index.item},enumerable:!0,configurable:!0}),e.prototype.updateCell=function(t,e,i){i!=this._cellDom&&(i&&this._clearCellDom(i),this._clearCellCache(),this._cellDom=i),this.index=e.index,this._doPrepareValue(t,e),this._doUpdateContent(t,e,this._cellDom)},e.prototype.removeCellDom=function(t){void 0===t&&(t=!1),t&&this._cellDom&&this._clearCellDom(this._cellDom),this._cellDom=null,this._clearCellCache()},e.prototype._createDom=function(t){return null},e.prototype._clearCellDom=function(t){t.innerHTML=""},e.prototype._clearCellCache=function(){},Object.defineProperty(e.prototype,"valueColumn",{get:function(){return this._index.valueColumn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataColumn",{get:function(){return this._index.dataColumn},enumerable:!0,configurable:!0}),e.prototype._changed=function(){this.invalidate()},e.prototype._doPrepareValue=function(t,e){},e.prototype._doUpdateContent=function(t,e,i){},e.prototype._doLayoutContent=function(t){},e}(js),Xs=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return o(e,t),e.prototype._doPrepareValue=function(t,e){},e}(Ks),Zs=function(t){function e(){var e=t.call(this)||this;return e._valueSeparator=",",e}return o(e,t),Object.defineProperty(e.prototype,"valueSeparator",{get:function(){return this._valueSeparator},set:function(t){t!=this._valueSeparator&&(this._valueSeparator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.SERIES_TYPE},enumerable:!0,configurable:!0}),e.prototype._makeText=function(t,e){return e.getDisplayText(t,this._valueSeparator)||""},e.SERIES_TYPE="series",e}(or),Js=function(t){function e(){var e=t.call(this)||this;return e._baseValue=NaN,e.$_render=function(t,e,i,o){var r=this._values;if(r&&r.length){for(var n=r.length,s=r[0],a=r[0],l=1;isNaN(s)&&l<n;)a=s=r[l++];for(;l<n;l++){var h=r[l];isNaN(h)||(h<s&&(s=h),h>a&&(a=h))}var u=isNaN(this._baseValue)?s:this._baseValue;isNaN(s)||this._renderChart(e,r,s,a,u)}}.bind(e),e}return o(e,t),e.interfaced=function(t){var e=t.type;return!!e&&(e==Qs.TYPE||e==ta.TYPE||e==ea.TYPE)},Object.defineProperty(e.prototype,"baseValue",{get:function(){return this._baseValue},set:function(t){t!=this._baseValue&&(this._baseValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstStyle",{get:function(){return this._firstStyle},set:function(t){t!=this._firstStyle&&(this._firstStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastStyle",{get:function(){return this._lastStyle},set:function(t){t!=this._lastStyle&&(this._lastStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"highStyle",{get:function(){return this._highStyle},set:function(t){t!=this._highStyle&&(this._highStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lowStyle",{get:function(){return this._lowStyle},set:function(t){t!=this._lowStyle&&(this._lowStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"belowStyle",{get:function(){return this._belowStyle},set:function(t){t!=this._belowStyle&&(this._belowStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pointStyle",{get:function(){return this._pointStyle},set:function(t){t!=this._pointStyle&&(this._pointStyle=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=nt(t),i=this._div=e.createElement("div");i.style.position="relative",i.style.height="100%",t.appendChild(i);var o=(this._svg=qo.createSVG(i)).style;o.position="absolute",o.left="0px",o.top="0px",o.width="100%",o.height="100%"},e.prototype._doRenderCell=function(t,e,i,o,r){this._div;var n=this._svg;n.setAttribute("class",this._getChartStyle()),this._values=this._getValues(e),qo.renderSVG2(t,n,this.$_render)},e.prototype._getPoints=function(t,e,i){for(var o=t.length,r=[],n=i-e,s=0;s<o;s++){var a=t[s],l=5+s/(o-1)*90,h=10+(isNaN(a)||0==n?80:80*(1-(a-e)/n));r.push(l,h)}return r},e.prototype._getBasePoint=function(t,e,i){var o=e-t;return 0+(isNaN(i)||0==o?100:100*(1-(i-t)/o))},e}(function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._getValues=function(t){return t.value||[]},e}(ir)),Qs=function(t){function e(){var i=t.call(this)||this;return i._chartStyle=e.CHART_STYLE,i._curved=!1,i.lastStyle=e.LAST_STYLE,i.highStyle=e.HIGH_STYLE,i.lowStyle=e.LOW_STYLE,i}return o(e,t),e.interfaced=function(t){var i=t.type;return!!i&&i==e.TYPE},Object.defineProperty(e.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"curved",{get:function(){return this._curved},set:function(t){t!=this._curved&&(this._curved=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._getChartStyle=function(){return this._chartStyle},e.prototype._renderChart=function(t,e,i,o,r){for(var n,s=isNaN(r)?o:Math.max(o,r),a=isNaN(r)?i:Math.min(i,r),l=this._getPoints(e,a,s),h=e.length,u=0;u<h-1;u++)if(t.sline(null,l[2*u]+"%",l[2*u+1]+"%",l[2*(u+1)]+"%",l[2*(u+1)+1]+"%"),n=this.pointStyle){var c=l[2*u],d=l[2*u+1];t.scircle(n,c+"%",d+"%","2")}if(n=this.firstStyle){c=l[0],d=l[1];t.scircle(n,c+"%",d+"%","2")}if(n=this.lastStyle){c=l[2*(h-1)],d=l[2*(h-1)+1];t.scircle(n,c+"%",d+"%","2")}if(n=this.highStyle)for(u=0;u<h;u++)if(e[u]>=o){c=l[2*u],d=l[2*u+1];t.scircle(n,c+"%",d+"%","2")}if(n=this.lowStyle)for(u=0;u<h;u++)if(e[u]<=i){c=l[2*u],d=l[2*u+1];t.scircle(n,c+"%",d+"%","2")}},e.TYPE="sparkline",e.STYLE="rg-sparkline-renderer",e.CHART_STYLE="rg-sparkline-renderer-chart",e.LAST_STYLE="rg-sparkline-renderer-last",e.HIGH_STYLE="rg-sparkline-renderer-high",e.LOW_STYLE="rg-sparkline-renderer-low",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Js),ta=function(t){function e(){var i=t.call(this)||this;return i._chartStyle=e.CHART_STYLE,i._barWidth=.8,i.lastStyle=e.LAST_STYLE,i.highStyle=e.HIGH_STYLE,i.lowStyle=e.LOW_STYLE,i}return o(e,t),e.interfaced=function(t){var i=t.type;return!!i&&i==e.TYPE},Object.defineProperty(e.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){(t=Math.max(0,t))!=this._barWidth&&(this._barWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._getChartStyle=function(){return this._chartStyle},e.prototype._renderChart=function(t,e,i,o,r){for(var n,s=isNaN(r)?o:Math.max(o,r),a=isNaN(r)?i:r,l=e.length,h=this._getBasePoint(a,s,r),u=100/l,c=0+u/2,d=s-a,p=u*this._barWidth,_=0;_<l;_++){var f=e[_];if(!isNaN(f)){n=f<=i&&this.lowStyle?this.lowStyle:f>=o&&this.highStyle?this.highStyle:f<r&&this.belowStyle?this.belowStyle:0==_&&this.firstStyle?this.firstStyle:_==l-1&&this.lastStyle?this.lastStyle:null;var g=0==d?1:Math.max(1,Math.floor(100*(f-a)/d));t.pbounds(n,c-p/2,h,p,-g)}c+=u}},e.TYPE="sparkcolumn",e.STYLE="rg-sparkcolumn-renderer",e.CHART_STYLE="rg-sparkcolumn-renderer-chart",e.LAST_STYLE="rg-sparkcolumn-renderer-last",e.HIGH_STYLE="rg-sparkcolumn-renderer-high",e.LOW_STYLE="rg-sparkcolumn-renderer-low",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Js),ea=function(t){function e(){var i=t.call(this)||this;return i._chartStyle=e.CHART_STYLE,i._barWidth=.8,i._belowHeight=.4,i.belowStyle=e.BELOW_STYLE,i}return o(e,t),e.interfaced=function(t){var i=t.type;return!!i&&i==e.TYPE},Object.defineProperty(e.prototype,"chartStyle",{get:function(){return this._chartStyle},set:function(t){t!=this._chartStyle&&(this._chartStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"barWidth",{get:function(){return this._barWidth},set:function(t){(t=Math.max(0,t))!=this._barWidth&&(this._barWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"belowHeight",{get:function(){return this._belowHeight},set:function(t){(t=Math.max(0,t))!=this._belowHeight&&(this._belowHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._getChartStyle=function(){return this._chartStyle},e.prototype._renderChart=function(t,e,i,o,r){for(var n=e.length,s=100/n,a=0+s/2,l=s*this._barWidth,h=0+100*(1-this._belowHeight),u=0;u<n;u++){var c=e[u];if(!isNaN(c)&&c!=r){var d=null;c<r&&this.belowStyle&&(d=this.belowStyle);var p=c<r?100:0;t.pbounds(d,Math.floor(a-l/2),Math.floor(p),Math.floor(l),Math.floor(h-p))}a+=s}},e.TYPE="sparkwinloss",e.STYLE="rg-sparkwinloss-renderer",e.CHART_STYLE="rg-sparkwinloss-renderer-chart",e.BELOW_STYLE="rg-sparkwinloss-renderer-below",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(Js),ia=(function(t){function e(e,i){return t.call(this,e,i||"dataCellView")||this}o(e,t),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),e.prototype._doUpdateContent=function(t,e,i){i[lt.TextProp]=this._text}}(Xs),function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,e,i)||this;return o._domIndex=-1,o._trs=1,o._fixedHeight=!1,o}return o(e,t),e.prototype._doDispose=function(){this._item=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._item.index},enumerable:!0,configurable:!0}),e.prototype.updateItem=function(t,e,i,o){this._item=t,this._domIndex=e,this._trs=i,this._fixedHeight=o},e.prototype.clearContent=function(t,e){},e.prototype._createDom=function(){return null},e.prototype.$_getDefaultRenderer=function(t,e){return or.TYPE},e.prototype._changed=function(){this.invalidate()},e.prototype._getTableRow=function(t,e){return this.parent._getTableRow(t,this._domIndex)},e.prototype._getTableRows=function(t){return this.parent._getTableRows(t,this._domIndex,this._trs)},e.prototype._getCellContent=function(t){return this.parent.getCellContent(this._domIndex,t)},e}(js)),oa=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return o(e,t),e.isExpander=function(t){var e=t.className;return"rg-expander-expanded"==e||"rg-expander-collapsed"==e},e.prototype.resetButtons=function(t){for(var e=t.layoutManager,i=this._trs,o=this.parent._cells,r=this._getFirstCell(e),n=this._getStartCell(e)-r,s=this._getEndCell(e)-r,a=0;a<i;a++)for(var l=o[this._domIndex+a],h=n;h<=s;h++){var u=l[h],c=u.layout,d=c.firstColumn;!c.isProxy&&this._item.isDataRow&&d instanceof yn&&this.$_setButtons(t,u,u.cell.firstElementChild)}},e.prototype.moveCellButtons=function(t,e,i){var o=Math.min(i-e.item.index,e.rowSpan-1);if(o!=e.buttonsOffset){var r=e.rowIndex,n=r+o,s=t.getTableItemBounds(r),a=t.grid.body.buttonHeight,l=t.getTableItemBounds(n).y-s.y;l=Math.floor(l+(s.height-a)/2),e.buttons.style.top=l+"px",e.buttonsOffset=o}},e.prototype.cellRefresh=function(t,e,i,o,r){var n=t.layoutManager;this._updateDataCell(t,n,e,i,o,r)},e.prototype.clearContent=function(t,e){for(var i=this.parent,o=this._getFirstCell(t),r=this._getStartCell(t)-o,n=this._getEndCell(t)-o,s=0;s<e;s++)for(var a=i._cells[this._domIndex+s],l=r;l<=n;l++){var h=a[l],u=h.renderer2;u&&u.clearContent(),h.setBorderBottom(1)}},e.prototype._doLayoutContent=function(t){var e,i=t.grid,o=this._trs,r=i.body,n=this.parent._cells,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s,h=i.focusedIndex,u=h&&h.itemIndex==this._item.index,c=h.column,d=this._item.index;this._item instanceof Ur&&(l=Math.min(l,this._item.parent.level-1),(d=(e=this._item.parent.firstDataItem).index)>=0&&(e=null));for(var p=Hn.temp(i,d),_=0;_<o;_++)for(var f=n[this._domIndex+_],g=a;g<=l;g++){var y=f[g],m=y.layout;if(!m.isProxy){var b=m.firstColumn;y.focused=u&&c===b,y.mouseEntered=!1,p.layout=m;var v=e?r.getHidden(p,e):r.getCellAt(this._item,b,!1);y.visible?(y.width=t.getCellWidth(g),y.height=t.getTableRowHeightFixed(y.trow,y.rowSpan),b instanceof yn?this._updateDataCell(i,t,r,v,b,y):this._clearDataCell(y)):b instanceof yn&&this._updateDataCell(i,t,r,v,b,y,!1)}}},e.prototype._getFirstCell=function(t){return t._firstCell},e.prototype._getLastCell=function(t){return t._lastCell},e.prototype._getStartCell=function(t){return t.getStartCell()},e.prototype._getEndCell=function(t){return this._item instanceof zr?Math.min(t.getStartCell()+this._item.groupLevel,t.getEndCell()):t.getEndCell()},e.prototype._createRenderer=function(t,e,i,o,r){return t.delegate.createRenderer(i,o,r)},e.prototype.$_getRenderer=function(t,e,i,o,r){var n,s,a,l,h=e.valueColumn.renderer,u=i.renderer;"string"==typeof u?a=u:u&&(a=u.type,l=u),"string"==typeof h?n=h:h&&(n=h.type,s=h);var c=a||n||(o instanceof bn?Zs.SERIES_TYPE:this.$_getDefaultRenderer(t,e));if(!r.renderer2||r.rendererChanged||r.renderer2.type!=c)return this._createRenderer(t,e,c,s,l);r.renderer2&&u&&r.renderer2.assignFrom(u)},e.prototype.$_getCellWidth2=function(t,e,i){return t.getCellWidth2(e,i)},e.prototype._renderDataCell=function(t,e,i,o,r,n){var s=r.cell,a=t.doc,l=!1,h=this.$_getRenderer(t,i,o,n,r);h&&(r.renderer2&&r.renderer2.clearAndDispose(),r.renderer2=h,r.rendererChanged=!1,l=!0);var u=s.firstElementChild,c=r.renderer2;(r.heighted=this._fixedHeight)&&(u.style.maxHeight=r.height-1+"px",lt.ieTen&&(u.style.height=r.height-1+"px")),!l&&c&&c._dom!=u&&(c.clearContent(),l=!0),this.$_setButtons(t,r,u);var d=!1,p=r.merged&&t.findGroupItem(r.item,n.dataIndex);if(p&&t.rowGroup.$_isMergeExpanderVisible(p)&&(!n||n.mergeGrouped)){var _=r.expander;_||((_=r.expander=a.createElement("span")).style.position="absolute",_.style.display="inline-block",_.style.top="2px",_.style.left="2px",s.appendChild(_)),d=p.expanded,_.className=d?"rg-expander-expanded":"rg-expander-collapsed"}else r.clearExpander();var f=c.styleName;r.expander&&(f+=" "+(d?"rg-expanded-cell":"rg-collapsed-cell")),l?c.initContent(i._index,u,f):c.checkClassName(f)?(c.clearContent(),c.initContent(i._index,u,f)):c.index.assign(i._index),c.renderCell(t,i,r);var g=e._showChangeMarker&&i.isValueChanged();if(g!=r.valueChanged){if(g){var y=r.changedMarker;y||((y=r.changedMarker=a.createElement("div")).className="rg-changed-marker",y.style.position="absolute",y.style.display="block",y.style.top="0px",r.changedMarker=y),s.appendChild(y)}else r.changedMarker&&r.valueChanged&&s.removeChild(r.changedMarker);r.valueChanged=g}ma.addEdgeMark(o.edgeMark||n.edgeMark,r,a)},e.prototype._clearDataCell=function(t){t.setClassName(""),t.setEditor(null,null),t.button=E.NONE,t.error=void 0,t.editable=!1,t.readonly=!0,t.setBorderBottom(1);var e=t.cell.firstElementChild;this._fixedHeight&&(e.style.maxHeight=t.height-1+"px",lt.ieTen&&(e.style.height=t.height-1+"px")),t.renderer2&&t.renderer2.clearContent(),t.valueChanged=!1},e.prototype._updateDataCell=function(t,e,i,o,r,n,s){void 0===s&&(s=!0);var a=i.getCellStyle(o,n.style.clear(),n.merged);(null==o.value||""==o.value)&&r instanceof mn&&r.placeHolder&&(a.styleName+=" "+(o.dataColumn.placeHolderStyleName||"rg-data-empty-cell")),a.style&&lt.setStyle(a.style,n.cell),n.refreshFormatters(a),i.getCellFormatters(r,n),n.setEditor(a.editor,r.editor),n.button=r.button,n.error=o.error,n.errorLevel=o.errorLevel;var l=Hn.temp(t,n.item.index,n.dataColumn);if(n.editable=t.getEditableAt(l,n.style),n.readonly=t.getReadOnlyAt(l,n.style),n.editable&&!n.readonly||(a.styleName+=" rg-data-readonly-cell"),n.setClassName(a.styleName),!n.merged&&r instanceof mn&&r.layout.blanked)switch(o.getBlankState()){case g.HEAD:case g.BODY:n.setBorderBottom(0);break;case g.TAIL:case g.NONE:n.setBorderBottom(1)}else n.setBorderBottom(1);s?this._renderDataCell(t,i,o,a,n,r):n.renderer2&&(n.renderer2=n.renderer2&&n.renderer2.clearAndDispose())},e.prototype.$_getButtonVisible=function(t,e,i,o){if(o){var r=t.getIndex(e.item.index,e.dataColumn);return o(t.handler,r.proxy(),e.focused,e.mouseEntered)}switch(i){case S.ALWAYS:return!0;case S.HIDDEN:return!1;case S.VISIBLE:return e.focused;case S.ROWFOCUSED:return t.focusedRow==e.item.index||e.mouseEntered;case S.DEFAULT:default:return e.focused||e.mouseEntered}},e.prototype.$_buttonWidth=function(t,e){var i=0;if(e.button!=E.NONE){var o=e.layout.getDataColumn();this.$_getButtonVisible(t,e,o.buttonVisibility,o.buttonVisibleCallback)&&(i=t.body.cellButtonWidth)}return i},e.prototype.$_editButtonWidth=function(t,e){var i=0;if(e.editable&&!e.readonly){var o=e.layout,r=o.getDataColumn(),n=e.editorType,s=t.delegate.getCellEditor(n),a=e.editor||r.editor;if(s.hasButton(t.displayOptions.showNativeEditButton,a)){var l=!1;Hn.equalsTo(t.focusedIndex,e.item.index,o)&&(l=!!s&&s.listing),(l||this.$_getButtonVisible(t,e,r.editButtonVisibility,null))&&(i=t.body.editButtonWidth)}}return i},e.prototype.$_editButtonCount=function(t,e){var i=e.editorType,o=t.delegate.getCellEditor(i);return o?o.buttonCount:0},e.prototype.$_editButtonVerti=function(t,e){if("number"===e.editorType){var i=e.editor||e.dataColumn.editor||{};return null==i.direction||"horizontal"!==i.direction}},e.prototype.$_errorWidth=function(t,e){return e.error?t.body.errorIconWidth:0},e.prototype.$_setButtons=function(t,e,i){var o,r=e.cell,n=t.doc,s=t.layoutManager,a=this.$_buttonWidth(t,e),l=this.$_editButtonWidth(t,e),h=this.$_errorWidth(t,e),u=l&&this.$_editButtonCount(t,e),c=l&&this.$_editButtonVerti(t,e),d=0,p=0,_=void 0;if(a>0&&p++,l>0&&(p+=u),h>0&&p++,e.merged&&(r=(e=e.head).cell,i=e.cell.firstElementChild),p>0){(_=e.buttons)||((_=e.buttons=n.createElement("div")).className="rg-cell-buttons",_.style.position="absolute",_.style.overflow="hidden",r.appendChild(_));var f=t.body.buttonHeight,g=e.height,y=void 0;if((o=_.style).height=f+"px",o.right="0px",e.merged){var m=e.rowIndex,b=s.getTableItemBounds(m),v=void 0;v=e.contains(t.focusedIndex)?m+(t.focusedRow-e.item.index):m+Math.floor((e.rows-1)/2),y=s.getTableItemBounds(v).y-b.y,y=Math.floor(y+(b.height-f)/2),e.buttonsOffset=v-m}else y=Math.floor((g-f)/2),e.buttonsOffset=0;o.top=Math.floor(y)+"px",d=_.childElementCount}else e.buttons&&(e.clearButtons(),i.style.maxWidth="");for(var w=d;w<p;w++){var C=n.createElement("span"),x=C.style;x.position="absolute",x.display="inline-block",x.height="100%",x.top="0px",_.appendChild(C)}for(w=d;w>p;w--)_.removeChild(_.lastElementChild);var I,E=p>0?_.children:null;if(p=0,a>0?(e.cellButton=E[p++],(I=e.cellButton.style).right="0px",I.width=a+"px",e.resetButtonClass(),e.buttonWidth=a):(e.cellButton=null,e.buttonWidth=0),l>0){e.editButtons=[];var S=e.editorType,O=t.delegate.getCellEditor(S);for(w=0;w<u;w++){var R=E[p++];O.setButtonStyle(R,w,c,a,l)||((I=R.style).right=a+l*w+"px",I.width=l+"px",e.resetEditClass(R,w)),e.editButtons.push(R)}e.editWidth=l*(c?1:u),Hn.equalsTo(t.editController.editIndex,e.item.index,e.layout),this.$_setButtonZIndex(t,e,Hn.equalsTo(t.editController.editIndex,e.item.index,e.layout))}else e.editButtons=null,e.editWidth=0;if(h>0?(e.errorIcon=E[p++],(I=e.errorIcon.style).right=a+e.editWidth+"px",I.width=h+"px",e.resetErrorClass(),e.errorWidth=h):(e.errorIcon=null,e.errorWidth=0),_){var D=e.buttonWidth+e.editWidth+e.errorWidth,k=this.$_getCellWidth2(s,e.tcol,e.colSpan);o.width=D+"px",i.style.maxWidth=k-D+"px"}else i.style.maxWidth=""},e.prototype.$_setButtonZIndex=function(t,e,i){var o=e.merged?e.head:e,r=t.displayOptions.baseZindex;function n(t){i?t.zIndex=String(r+1):t.removeProperty("z-index")}o.editButtons&&o.editButtons.forEach((function(t){n(t.style)})),o.cellButton&&n(o.cellButton.style),o.errorIcon&&n(o.errorIcon.style)},e}(ia),ra=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype.$_getCellWidth2=function(t,e,i){return t.getFixedCellWidth2(e,i)},e}(oa),na=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype.$_getCellWidth2=function(t,e,i){return t.getRightCellWidth2(e,i)},e}(oa),sa=lt.isSafari?1:0,aa=function(t){function e(i,o){var r=t.call(this)||this;if(r._textCase=b.DEFAULT,r._readOnly=!1,r._textReadOnly=!1,r._allowEmpty=!1,r._keydowned=!1,r._isMobile=lt.isMobile(),r._started=!1,r._dateConverter=Ge.Default,r._boolConverter=ut.Default,r._cellBounds=new N,r._checkHangeul=!1,r._composing=!1,r._grid=i,r._options=i.editorOptions,r._parentElement=o,r._editor=r._createEditor(o),r._editor.className=e.EDITOR_CSS+r._getInputSelector(),r._container&&(r._container.className=e.CONTAINER_CSS),r._editor.$_owner=r,r._editIndex=i.getIndex(),r._editor){var n=i.container;n.$_addListener(r._editor,"focus",function(t){this._grid.$_setEditFocused(!0,t)}.bind(r),!1),n.$_addListener(r._editor,"focusin",function(t){this._grid.$_setEditFocused(!0,t)}.bind(r),!1),n.$_addListener(r._editor,"blur",function(t){this._grid.$_setEditFocused(!1,t)}.bind(r),!1),n.$_addListener(r._editor,"focusout",function(t){this._grid.$_setEditFocused(!1,t)}.bind(r),!1)}return r.setVisible(!1,!0),r.$_setEditorId(r._editor),r}return o(e,t),e.getEditorType=function(t){return"string"==typeof t?t:t?t.type:"line"},e.getEditorType2=function(t,e){return"string"==typeof t?t:t&&t.type?t.type:"string"==typeof e?e:e&&e.type?e.type:"line"},e.prototype._doDispose=function(){this.unprepare(),this._editor&&this._editor.parentElement.removeChild(this._editor),this._editor=null,this._container&&this._container.parentElement.removeChild(this._container),this._container=null,this._grid=null,this._controller=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"native",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonCount",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasList",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptyValue",{get:function(){return this._emptyValue},set:function(t){t!=this._emptyValue&&(this._emptyValue=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,t?(this._saveDateConverter||(this._saveDateConverter=new Ge(t)),this._saveDateConverter.format=t,this._dateConverter=this._saveDateConverter):this._dateConverter=Ge.Default)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"todayChar",{get:function(){return this._todayChar},set:function(t){t!=this._todayChar&&(this._todayChar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nowChar",{get:function(){return this._nowChar},set:function(t){t!=this._nowChar&&(this._nowChar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,t?(this._saveBoolConverter||(this._saveBoolConverter=new ut(t)),this._saveBoolConverter.format=t,this._boolConverter=this._saveBoolConverter):this._boolConverter=ut.Default)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editor",{get:function(){return this._editor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return parseInt(this._container.style.width)>sa&&parseInt(this._container.style.height)>sa},enumerable:!0,configurable:!0}),e.prototype.setVisible=function(t,e){void 0===e&&(e=!1);var i=rt(this._container),o=e?!t:this.visible;if(this._editor instanceof i.HTMLInputElement&&(t&&this._isEmptyTextValue?this._editor.value="":t||null!=this._editor.value&&null!=this._editor.value&&""!=this._editor.value||(this._isEmptyTextValue=!0,this._grid.$_editFocused&&this.selectAll(),this._keydowned=!1)),!t&&(this._container.style.width=sa+"px",this._container.style.height=sa+"px",lt.isMobile())){var r=this._grid;if(r){var n=r.container._containerDom,s=nt(this._container);this._editor===s.activeElement&&n&&n.focus()}else this._editor.blur()}t!=o&&this._doVisibleChanged(t)},e.prototype._doVisibleChanged=function(t){this.setEditorZIndex(t)},Object.defineProperty(e.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){var e=rt(this._container);this._editor instanceof e.HTMLInputElement&&(this._editor.readOnly=this._readOnly=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textReadOnly",{get:function(){return this._textReadOnly},enumerable:!0,configurable:!0}),e.prototype._setTextReadOnly=function(t){t!=this._textReadOnly&&(this._textReadOnly=t,this._changed())},Object.defineProperty(e.prototype,"allowEmpty",{get:function(){return this._allowEmpty},enumerable:!0,configurable:!0}),e.prototype._setAllowEmpty=function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())},Object.defineProperty(e.prototype,"editing",{get:function(){return this._started},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editIndex",{get:function(){return this._editIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._editor.value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listing",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.hasButton=function(t,e){return!1},e.prototype.applyOptions=function(t){t&&this.assignFrom(t)},e.prototype.setEditIndex=function(t){this._editIndex.assign(t)},e.prototype.setController=function(t){this._controller=t},e.prototype.prepare=function(){!this.native&&this._editor&&this._editor.removeAttribute("type")},e.prototype.unprepare=function(){},e.prototype.beginEdit=function(t,e){this._started||(this._started=this._doBeginEdit())&&(t&&this.clear(),e&&this.selectAll())},e.prototype.endEdit=function(){this._started&&(this._doEndEdit(),this._started=!1)},e.prototype.isEdited=function(){return!1},e.prototype.isDisabled=function(){return!this._grid||this._grid.container.disabled},e.prototype.caretToLast=function(){},e.prototype.commit=function(){this._doCommit()},e.prototype.setReadOnly=function(t){this._editor.readOnly=this._readOnly=t},e.prototype.getEditValue=function(t,e){},e.prototype.setEditValue=function(t){this._oldValue=t},e.prototype.setCellEditValue=function(t,e){!this.readOnly&&this._requestStart(e)&&(this.setEditValue(t),this._doChanged())},e.prototype.getEditText=function(){return""},e.prototype.selectAll=function(t){void 0===t&&(t=!1),this._grid.$_editFocused&&(!t&&lt.isMobile()||this._selectAll())},e.prototype.clear=function(){var t=rt(this._container);this._editor instanceof t.HTMLInputElement&&(this._editor.value="",this._isEmptyTextValue=!0)},e.prototype.setFocus=function(){!this._grid.handler._draggable&&this._editor.focus({preventScroll:!0})},e.prototype.setEditorTitle=function(t){},e.prototype.setBounds=function(t,e,i,o,r){},e.prototype.setCellBounds=function(t,e,i,o){this._cellBounds.set(t,e,i,o)},e.prototype.closeList=function(t){},e.prototype.dropDownList=function(t){},e.prototype.buttonClicked=function(t,e){},e.prototype.buttonDown=function(t,e){},e.prototype.buttonUp=function(t,e){},e.prototype.setButtonStyle=function(t,e,i,o,r){return!1},e.prototype.isEmptyTextValue=function(){return this._editor&&this._isEmptyTextValue},e.prototype.initOptions=function(){this._emptyValue=void 0,this.booleanFormat=null,this._todayChar=null,this._nowChar=null,this.datetimeFormat=null,this._textCase=b.DEFAULT,this._checkHangeul=!1},e.prototype.$_setEditorId=function(t){},e.prototype._changed=function(){},e.prototype.$_setController=function(t){this._controller=t},e.prototype._editField=function(){return this._grid.dataSource?this._grid.dataSource.getField(this._editIndex.dataField):null},e.prototype._isDateEditor=function(){return!1},e.prototype._requestStart=function(t){return this._started?this._started:(this.selectAll(),this._controller.onEditorStart(this))},e.prototype._valToStr=function(t){var e=this.editIndex,i="";try{if(void 0!==t||this._mask){var o=e.grid.dataSource.getField(e.dataField);if(o)switch(o.dataType){case r.DATETIME:t&&(i=this._dateConverter.getText(t)),this._mask&&(i=this._mask.writeBuffer(i));break;case r.BOOLEAN:i=this._boolConverter.toText(t);break;case r.NUMBER:isNaN(t)||(i=lt.toStr(t));break;case r.OBJECT:var n=e.column._objectKey||o.objectKey;t&&(i=n&&t.hasOwnProperty(n)?t[n]:null!=t&&"object"==typeof t?JSON.stringify(t):"");break;default:i=this._mask?this._mask.writeBuffer(t):t}else i=t}}catch(e){i=t}return null===i?"":i},e.prototype._strToVal=function(t){t=lt.toStr(t);var e=this._editIndex,i=e.dataColumn&&this._textCase==b.DEFAULT?e.dataColumn.textInputCase:this._textCase;try{var o=e.grid.dataSource.getField(e.dataField);if(o){var n=o.dataType;if(n==r.DATETIME||t&&this._isDateEditor()&&n==r.TEXT){var s=n==r.DATETIME,a=null;return t&&t==this._nowChar&&(a=new Date),!a&&t&&t==this._todayChar&&(a=new Date).setHours(0,0,0,0),a||(this._mask&&(t=this._mask.getStripValue()),a=this._dateConverter.getDate(t)),s?!a||isNaN(a.getFullYear())?void 0:a:a?this._dateConverter.getText(a):void 0}if(n==r.BOOLEAN)return this._boolConverter.toBoolEx(t);if(n==r.NUMBER)return parseFloat(t);n==r.TEXT&&this._mask&&(t=this._mask.getStripValue())}return i===b.UPPER?t?t.toLocaleUpperCase():t:i===b.LOWER&&t?t.toLocaleLowerCase():t}catch(t){return}},e.prototype._dispatchKeyDown=function(t){return this._controller,this._controller.onEditorKeyDown(this,t)},e.prototype._dispatchKeyPress=function(t){return this._controller,this._controller.onEditorKeyPress(this,t)},e.prototype._dispatchKeyUp=function(t){return this._controller,this._controller.onEditorKeyUp(this,t)},e.prototype._dispatchChange=function(){this._controller.onEditorChange(this)},e.prototype._dispatchSearch=function(t){this._controller.onEditorSearch(this,t)},e.prototype._dispatchSearchCellButtonClick=function(t){return this._controller.onSearchCellButtonClick(this,t)},e.prototype._dispatchCommit=function(){this._controller.onEditorCommit(this)},e.prototype._sendToParent=function(t,e,i){void 0===e&&(e=void 0);try{var o=lt.isMac&&t.metaKey||!lt.isMac&&t.ctrlKey;if(2==e){if(this._dispatchKeyPress(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0}else if(3==e){if(this._dispatchKeyUp(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;try{var r=this._controller._grid,n=r.editOptions;if(n.maxLengthToNextCell){var s=n.skipReadOnly,a=r.activeTool,l=this.maxLength,h=this.editIndex.clone(),u=lt.included(t.keyCode,38,33,40,34,113,9,13);if(!this._checkHangeul&&!u&&!o&&!t.altKey&&r&&r.isEditing(h)&&l>0&&!this._composing&&t.keyCode>47){var c=this._mask?this._mask.getStripValue():this._editor.value;if(c&&c.length>=l)return r.getBodyViewAt(h).spanRight(r.layoutManager,h),h.right(),s&&a._checkReadOnly(h)&&(a._skipReadOnly(h,1)||(h=this.editIndex.clone())),Hn.areEquals(h,this.editIndex)||a.setFocused(h,!0),!0}}}catch(t){if(t instanceof Vr)throw t;return!0}}else if(this._dispatchKeyDown(t))return t.preventDefault&&(t.preventDefault(),t.stopImmediatePropagation()),!0;return!1}finally{}},e.prototype._commitListValue=function(t){this._editIndex&&this._grid._editorStarted(this,this._editIndex)&&this._grid.setCellValue(this._editIndex,t);var e=this._grid;if(e){var i=e.container._containerDom,o=nt(i);this._editor==o.activeElement&&i&&i.focus()}else this._editor.blur()},e.Unselected={},e.InvalidFormat={},e.EDITOR_CSS="rg-editor ",e.CONTAINER_CSS="rg-editor-container",e}(se),la=function(){function t(t,e){this._includedFormat=!1,this._showInvalidFormatMessage=!0,this._overwrite=!1,this._allowEmpty=!1,this._restrictNull=!1,this._definitions={9:new RegExp("[0-9 ]"),0:new RegExp("[0-9]"),a:new RegExp("[A-Za-z]"),"*":new RegExp("[A-Za-z0-9]")},this._tests=null,this._defBuffer=[],this._editor=t,e&&this.setOptions(e)}return t.prototype.dispose=function(){this._definitions=null,this._tests=null,this._editor._editor&&(this._editor._editor.onclick=null),this._editor=null},Object.defineProperty(t.prototype,"includedFormat",{get:function(){return this._includedFormat},set:function(t){t!=this._includedFormat&&(this._includedFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"placeHolder",{get:function(){return this._placeHolder},set:function(t){t!=this._placeHolder&&(this._placeHolder=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editMask",{get:function(){return this._editMask},set:function(t){t!=this._editMask&&(this._editMask=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"definitions",{get:function(){return this._definitions},set:function(t){t!=this._definitions&&(this._definitions=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){t!=this._invalidFormatMessage&&(this._invalidFormatMessage=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){t!=this._showInvalidFormatMessage&&(this._showInvalidFormatMessage=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"overWrite",{get:function(){return this._overwrite},set:function(t){t!=this._overwrite&&(this._overwrite=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){t!=this._allowEmpty&&(this._allowEmpty=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"restrictNull",{get:function(){return this._restrictNull},set:function(t){t!=this._restrictNull&&(this._restrictNull=t,this._changed())},enumerable:!0,configurable:!0}),t.prototype.clickHandler=function(t){this.restrictNull&&this._moveCaret()},t.prototype.clearBuffer=function(t,e){t=arguments.length>0?t:0,e=arguments.length>1?e:this._tests.length;for(var i=t;i<e;i++)this._buffer[i]=this.$_getPlaceHolder(i),this._defBuffer[i]=""},t.prototype.writeBuffer=function(t,e){if(void 0===e&&(e=!1),t){e&&this.clearBuffer();for(var i=0,o=0,r=this._tests.length;i<r;i++)if(this._tests[i]&&this._tests[i]instanceof RegExp)for(var n=void 0;n=t[o++];)if(this._tests[i].test(n)){this._buffer[i]=n,this._defBuffer[i]=n;break}}return this._buffer&&this._buffer.join("")},t.prototype.getStripValue=function(){var t=[],e=[];if(""==this._defBuffer.join(""))return null;if(this.includedFormat)for(var i=0,o=this._buffer.length;i<o;i++){var r=this._buffer[i];!this._tests[i]||this._tests[i].test(r)?t.push(r):r==this.$_getPlaceHolder(i)&&this._tests[i].test(" ")&&t.push(" ")}else for(i=0,o=this._buffer.length;i<o;i++)(this._tests[i]&&this._tests[i]instanceof RegExp&&this._tests[i].test(this._buffer[i])||this._tests[i]&&"function"==typeof this._tests[i])&&(e.length>0&&(t=t.concat(e),e=[]),t.push(this._buffer[i]));return t.join("")},t.prototype.setOptions=function(t){if("string"==typeof t)this.$_parseMask(t);else if(t.definitions&&this.$_parseDefinitions(t.definitions),t.placeHolder&&(this._placeHolder=t.placeHolder),t.editMask&&this.$_parseMask(t.editMask),null!=t.includedFormat&&(this._includedFormat=t.includedFormat),t.invalidFormatMessage&&(this._invalidFormatMessage=t.invalidFormatMessage),this._restrictNull&&this._editor){var e=this._editor._editor;!e.onclick&&(e.onclick=this.clickHandler.bind(this))}},t.prototype.checkValid=function(){var t=[];if(this.allowEmpty){for(var e=0,i=this._tests.length;e<i;e++)t[e]=this.$_getPlaceHolder(e);if(t.join("")===this._buffer.join(""))return!0}for(e=0,i=this._tests.length;e<i;e++){var o=this._buffer[e];if(this._tests[e]&&!this._tests[e].test(o)&&o==this.$_getPlaceHolder(e)&&!this._tests[e].test(" "))return!1}return!0},t.prototype._changed=function(){},t.prototype._moveCaret=function(t,e){for(var i=this._editor._editor,o=t=arguments.length>0?t:i.selectionStart,r=e=arguments.length>1?e:i.selectionEnd,n=t-1;n>=0;n--){if(this._tests[n]&&this._tests[n].test(this._buffer[n])){o=n+1;break}o=n}for(n=e-1;n>=0;n--){if(this._tests[n]&&this._tests[n].test(this._buffer[n])){r=n+1;break}r=n}if(o!=t||r!=e){for(n=o;n<=t&&!this._tests[n];n++)o++;for(n=r;n<=e&&!this._tests[n];n++)r++;return i.setSelectionRange(o,r),!0}return o!=t||r!=e},t.prototype.$_setCaret=function(t,e){this._editor._editor.setSelectionRange(t,e)},t.prototype.$_parseDefinitions=function(t){for(var e in t)"string"==typeof t[e]&&(this._definitions[e]=new RegExp(t[e]))},t.prototype.$_parseMask=function(t){var e=this._tests=[],i=this._definitions,o=t.split("");this._editMask=t,this._buffer=[];for(var r=0,n=o.length;r<n;r++)e.push(i[o[r]]),this._buffer.push(i[o[r]]?this.$_getPlaceHolder(r):o[r])},t.prototype.$_getPlaceHolder=function(t){return this._placeHolder&&this._placeHolder.length>t?this._placeHolder[t]:this._tests[t]?"_":this._editMask&&this._editMask.length>t?this._editMask[t]:"_"},t.prototype.$_seekPrev=function(t){for(;--t>=0&&!this._tests[t];);return t},t.prototype.$_seekNext=function(t){for(;++t<this._editMask.length&&!this._tests[t];);return t},t.prototype.$_shiftL=function(t,e){var i=this._editMask.length,o=this._buffer;if(t>=0)for(var r=t,n=this.$_seekNext(e);i>r;r++)if(this._tests[r]){if(!(i>n&&this._tests[r].test(o[n])))break;o[r]=o[n],this._defBuffer[r]=this._defBuffer[n],o[n]=this.$_getPlaceHolder(n),this._defBuffer[n]="",n=this.$_seekNext(n)}},t.prototype.$_shiftR=function(t){for(var e,i,o=this._editMask.length,r=this._buffer,n=t,s=this.$_getPlaceHolder(t);o>n;n++)if(this._tests[n]){if(e=this.$_seekNext(n),i=r[n],this._defBuffer[n]=s,r[n]=s,!(o>e&&this._tests[e].test(i)))break;s=i}},t.prototype.keydown=function(t){var e=this._editor.editor;if(!e.readOnly){var i=t.which||t.keyCode,o=e.selectionStart,r=e.selectionEnd;if(46===i||8===i)o==r&&(o=46!==i?this.$_seekPrev(o):r=this.$_seekNext(o-1),r=46===i?this.$_seekNext(r):r),this.clearBuffer(o,r),!this._overwrite&&this.$_shiftL(o,r-1),e.value=this.writeBuffer(),this.$_setCaret(Math.max(0,o),Math.max(0,o));else if(39===i||35===i)return this._moveCaret();this._pStart=e.selectionStart}},t.prototype.keyPress=function(t){var e=this._editor.editor;if(!e.readOnly){this.restrictNull&&this._moveCaret();var i,o=e.selectionStart,r=e.selectionEnd,n=t.which||t.keyCode;this.clearBuffer(o,r),o!==r&&this.$_shiftL(o,r-1);var s=this.$_seekNext(o-1);this._editMask&&this._editMask.length>s&&this._tests[s]&&this._tests[s].test(i=String.fromCharCode(n))&&(!this._overwrite&&this.$_shiftR(o),this._buffer[s]=i,this._defBuffer[s]=i,e.value=this.writeBuffer(),s=this.$_seekNext(s),this.$_setCaret(Math.max(0,s),Math.max(0,s))),this._pStart=e.selectionStart}},t.prototype.input=function(t){var e=this._editor.editor;if(!e.readOnly){var i=e.value;return/[ㄱ-ㅎㅏ-ㅣ가-힝]/.test(i)?(e.value=e.value.replace(/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,""),void(null!=this._pStart&&e.setSelectionRange(this._pStart,this._pStart))):void 0}},t}(),ha=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._maxLength=0,e._fontSize=0,e._modified=!1,e}return o(e,t),Object.defineProperty(e.prototype,"maxLength",{get:function(){return this._maxLength},set:function(t){t!=this._maxLength&&(this._maxLength=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=isNaN(t)?0:Math.max(0,t)},enumerable:!0,configurable:!0}),e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._maxLength=0},Object.defineProperty(e.prototype,"readonly",{set:function(t){this._editor.readOnly=this._readOnly=t},enumerable:!0,configurable:!0}),e.prototype.isEdited=function(){return this._modified},e.prototype.setVisible=function(e,i){t.prototype.setVisible.call(this,e,i);var o=this._container.style;if(e?(o.border="",o.boxShadow=""):e||(o.border="none",o.boxShadow="none",this._keydowned=!1),lt.isWinSafari){try{this._editor.style.width=this._container.getBoundingClientRect().width+"px",this._container.style.cssText=this._container.style.cssText.replace(/border-width: initial; border-color: initial; /g,"")}catch(t){}setTimeout(function(){this._editor.style.width="100%"}.bind(this),0)}},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e);var i=this._editor.style;lt.isMobile()?i.fontSize=Math.max(this.fontSize,16)+"px":this.fontSize>0&&(i.fontSize=this.fontSize+"px");var o=e.valueColumn;if(o)switch(this._textCase==b.DEFAULT?o.textInputCase:this._textCase){case b.LOWER:this._editor.style.textTransform="lowercase";break;case b.UPPER:this._editor.style.textTransform="uppercase";break;default:this._editor.style.textTransform="none"}},e.prototype.getEditText=function(){return this._editor.value},e.prototype.setEditValue=function(e){t.prototype.setEditValue.call(this,e),this._editor.value=this._valToStr(e),this._isEmptyTextValue=!1},e.prototype.getEditValue=function(t,e){void 0===t&&(t=!0);var i=this._editField(),o=this._emptyValue;try{var n=i.dataType,s=this._editor.value;if(n==r.TEXT)s||void 0===this._emptyValue||(s=this._emptyValue),void 0===(o=this._strToVal(s))&&(o="");else{if(n===r.OBJECT){var a=this._editIndex.dataColumn.objectKey||i.objectKey,l=this._editIndex.item.getData(i.index)||{};return l[a]=s,l}if(lt.isWhiteSpace(s))if(void 0!==this._emptyValue)o=this._strToVal(this._emptyValue);else switch(n){case r.NUMBER:isNaN(this._oldValue)&&(o=NaN);break;case r.DATETIME:null===this._oldValue&&(o=null);break;case r.BOOLEAN:}else o=this._strToVal(s)}if(o===aa.InvalidFormat)return o;o=i.readValue(o)}catch(e){if(t)throw e;o=this._emptyValue}return o},e.prototype._selectAll=function(){this._editor.select&&this._editor.select()},e.prototype._setSelectionRange=function(t,e){try{this._editor.setSelectionRange(0,0)}catch(t){}},e.prototype._doBeginEdit=function(){if(this._modified=!1,this.visible)return this._editor.value||this._setSelectionRange(0,0),!0},e.prototype._doEndEdit=function(){this._modified=!1},e.prototype._doCommit=function(){},e}(aa),ua=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._doDispose=function(){this._editor.$_owner=null,this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"mask",{get:function(){return this._mask},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._editor.value},set:function(t){!this._editor||t==this._editor.value&&t==this._controller.getData(this._editIndex)||(this._editor.value=t,this._isEmptyTextValue=!1,this._doChanged())},enumerable:!0,configurable:!0}),e.prototype.setMask=function(t){this._mask=null,t&&(this._mask=new la(this,t))},e.prototype.setAlignment=function(t){this._container.style.textAlign="left"},e.prototype._createContainer=function(t){var e=t.createElement("div"),i=e.style;return e.spellcheck=!1,e.setAttribute("aria-hidden","true"),i.position="absolute",i.width="0px",i.height="0px",i.padding="0px",i.margin="0px",e},e.prototype._createEditor=function(t){var e=nt(t);this._container=this._createContainer(e),t.appendChild(this._container);var i=e.createElement("input"),o=i.style;i.setAttribute("aria-hidden","true"),i.autocomplete="off",o.position="absolute",o.boxSizing="border-box",o.margin="0px",o.padding="0px 2px",o.wordWrap="normal",o.overflow="hidden",o.resize="none",o.border="none",o.outline="none",o.left="0px",o.top="0px",o.width="100%",o.height="100%",o["-webkit-user-modify"]="read-write-plaintext-only",o["white-space"]="pre",o["-webkit-transform"]="translateZ(0)",i.tabIndex=-1,i.onkeydown=this._keyDownHandler.bind(this),i.onkeyup=this._keyUpHandler.bind(this),i.onkeypress=this._keyPressHandler.bind(this),i.oninput=this._inputHandler.bind(this),i.onpaste=this._pasteHandler.bind(this),i.oncopy=this._copyHandler.bind(this);var r=this._grid.container;return r.$_addListener(i,"compositionstart",this._compositionstartHandler.bind(this),!1),r.$_addListener(i,"compositionupdate",this._compositionupdateHandler.bind(this),!1),r.$_addListener(i,"compositionend",this._compositionendHandler.bind(this),!1),r.$_addListener(i,"text",this._textHandler.bind(this),!1),this._container.appendChild(i),this._defMaxLength=i.maxLength>0?i.maxLength:1e6,i},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._editor.readOnly=this._readOnly=!1,this._mask&&(this._mask.dispose(),this._mask=null)},e.prototype.applyOptions=function(e){t.prototype.applyOptions.call(this,e),e.mask&&this.setMask(e.mask)},e.prototype.caretToLast=function(){var t=lt.toStr(this._editor.value).length;this._setSelectionRange(t,t)},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLength>0?this.maxLength:this._defMaxLength},e.prototype.setEditorZIndex=function(t){var e=this._editor.style,i=this._grid.displayOptions.baseZindex;t?e.zIndex=String(i+0):e.removeProperty("z-index")},e.prototype._doChanged=function(){this._requestStart(),this._started&&(this._textReadOnly||!this._editor.readOnly||this.allowEmpty&&""===this.text)&&(this._modified=!0,this._isEmptyTextValue=!1,this._dispatchChange())},e.prototype.setBounds=function(t,e,i,o,r){lt.setBounds(this._container,t,e,i,o),0==i||0==o?this._editor.style.width="100%":r>0&&(this._editor.style.height=Math.round(o-4)+"px",this._editor.style.width=r+"px")},e.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._editor,i=t.keyCode;if((lt.isIE||lt.isEdge)&&!this.visible&&t.ctrlKey&&90==i)return!1;if(lt.isIE&&t.ctrlKey&&86==t.keyCode&&e.readOnly)return t.preventDefault(),this._pasteHandler(t),!1;if(lt.isIE&&t.ctrlKey&&(67==t.keyCode||45==t.keyCode)&&""==this._editor.value)return t.preventDefault(),void nt(this._editor).execCommand("copy");switch(this._inputValue=e.value,this._keydowned=!0,i){case 8:case 46:this._sendToParent(t)||(!this.visible&&this._requestStart()?e.readOnly&&!this.allowEmpty||!this._controller._getData(this._editIndex)||(this._mask?(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()):this.text=""):this._mask&&(t.preventDefault(),t.stopImmediatePropagation(),this._mask.keydown(t),this._doChanged()),8===i&&e.readOnly&&(t.preventDefault(),t.stopImmediatePropagation()));break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);if(e.readOnly&&lt.isChrome)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 39:if(!this.visible||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);if(e.readOnly&&lt.isChrome)return!this._sendToParent(t);if(!(t.altKey||t.ctrlKey||t.shiftKey)&&this._mask&&this._mask.restrictNull){var o=e.selectionStart;this._mask._moveCaret(o+1,o+1)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case 36:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 35:if(!this.visible)return!this._sendToParent(t);if(this._mask&&this._mask.restrictNull){var r=e.value?e.value.length-1:0;this._mask._moveCaret(r,r)&&(t.preventDefault(),t.stopImmediatePropagation())}t.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(t);break;case 38:case 33:case 40:case 34:case 13:case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:this._sendToParent(t);break;default:return!this._sendToParent(t,null,!0)}return lt.isFirefox&&!t.ctrlKey&&!t.altKey&&229!==i&&i>=32&&(i<112||i>130)&&this._requestStart(),!0}},e.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var e=t.keyCode;switch(8!=e&&46!=e||lt.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},e.prototype._keyPressHandler=function(t){if(!this.isDisabled()){var e=t.which||t.keyCode;this._sendToParent(t,2),lt.isFirefox?t.ctrlKey||t.altKey||!(0==e||e>=32)||(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault()):lt.isMac&&t.metaKey&&(122===e||121===e)?t.preventDefault():lt.isMac&&t.metaKey&&(99===e||118===e)||e>=32&&(this._requestStart()?this._mask&&(this._mask._pStart=t.target.selectionStart,this._mask.keyPress(t),this._doChanged(),t.preventDefault()):t.preventDefault())}},e.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},e.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0,this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._dispatchChange(),this._checkHangeul=!0))},e.prototype._compositionendHandler=function(){this._composing=!1},e.prototype._compositionupdateHandler=function(){this._composing=!0},e.prototype._changeHandler=function(t){},e.prototype._inputHandler=function(t){if(!this.isDisabled()){if(lt.isIE){if(this._isEmptyTextValue&&!this._keydowned)return;if((null==this._inputValue||null==this._inputValue?"":this._inputValue)===this._editor.value)return}"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&(this._mask&&this._mask.input(t),this._doChanged())}},e.prototype._pasteHandler=function(t){if(!this.isDisabled()){var e=this._grid.pasteOptions;try{var i=void 0,o=(t.originalEvent||t).clipboardData;if(null!=(i=o?o.getData("text/plain"):window.clipboardData.getData("text"))){if(this.visible){if(this._mask){t.preventDefault();var r=this._editor,n=r.value,s=r.selectionStart,a=r.selectionEnd;n=n.substr(0,s)+i+n.substr(a),r.value=this._mask.writeBuffer(n,!0)}return void this._doChanged()}t.preventDefault(),this._grid.pasteFromClipboard(i,t)}}catch(t){if(t instanceof Vr){if(e.throwValidationError)throw t}else if(t instanceof Nr)alert(t.message);else if(t)throw t}}},e.prototype._copyHandler=function(t){if(!this.isDisabled()&&!this.editing){var e=this._grid.copyToClipboard(t,null);return null!=e&&(window.clipboardData?window.clipboardData.setData("Text",e):t.clipboardData.setData("text/plain",e)),t.preventDefault()}},e.prototype._getInputSelector=function(){return null},e}(ha),ca=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),Object.defineProperty(e.prototype,"inputCharacters",{get:function(){return this._inputCharacters},set:function(t){t!=this._inputCharacters&&(this._inputCharacters=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ignoreCharacters",{get:function(){return this._ignoreCharacters},set:function(t){t!=this._ignoreCharacters&&(this._ignoreCharacters=t)},enumerable:!0,configurable:!0}),e.prototype.initOptions=function(){this._inputCharacters=null,this._ignoreCharacters=null,t.prototype.initOptions.call(this)},e.prototype._inputHandler=function(e){this.$_resetValue(),t.prototype._inputHandler.call(this,e)},e.prototype._keyDownHandler=function(e){return this._pStart=e.target.selectionStart,t.prototype._keyDownHandler.call(this,e)},e.prototype._createEditor=function(e){var i=t.prototype._createEditor.call(this,e);return i.tabIndex=-1,i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.$_resetValue=function(){var t,e=this._editor,i=e.value;if(this.visible){var o;if(t=this.inputCharacters)(o=new RegExp("[^"+t+"]","g")).test(i)&&(e.value=i=i.replace(o,""),null!=this._pStart&&e.setSelectionRange(this._pStart,this._pStart));if(t=this.ignoreCharacters)(o=new RegExp("["+t+"]","g")).test(i)&&(e.value=e.value.replace(o,""),null!=this._pStart&&e.setSelectionRange(this._pStart,this._pStart));this._pStart=null}},e.INPUT_CSS="rg-text-editor",e}(ua),da=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype._createEditor=function(e){var i=t.prototype._createEditor.call(this,e);return i.setAttribute("type","password"),i.tabIndex=-1,i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.prepare=function(){},e.INPUT_CSS="rg-password-editor",e}(ua),pa=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._minHeight=0,o._altEnterNewLine=!1,o}return o(e,t),e.prototype._doDispose=function(){this._editor.onkeydown=null,this._editor.onkeyup=null,this._editor.onkeypress=null,this._editor.oninput=null,this._editor.onpaste=null,this._editor.oncopy=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){t!=this._minHeight&&(this._minHeight=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"altEnterNewLine",{get:function(){return this._altEnterNewLine},set:function(t){t!=this._altEnterNewLine&&(this._altEnterNewLine=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._editor.value},enumerable:!0,configurable:!0}),e.prototype.setAlignment=function(t){this._container.style.textAlign="left"},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._minHeight=0,this.setReadOnly(!1)},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLength>0?this.maxLength:2e9},e.prototype.setCellEditValue=function(e){t.prototype.setCellEditValue.call(this,e,!1)},e.prototype.setEditorZIndex=function(t){var e=this._editor.style,i=this._grid.displayOptions.baseZindex;t?e.zIndex=String(i+0):e.removeProperty("z-index")},e.prototype._doChanged=function(){this._requestStart(),this._started&&!this._editor.readOnly&&(this._modified=!0,this._isEmptyTextValue=!1,this._dispatchChange(),this.$_resetBounds())},e.prototype.$_resetBounds=function(){var t=lt.getClientRect(this._container),e=t.cx,i=t.cy,o=t.width,r=Math.round(t.height),n=this._isEmptyTextValue;!n&&this._editor.scrollWidth>o&&(o=this._editor.scrollWidth+6),!n&&this._editor.scrollHeight>r&&(r=this._editor.scrollHeight+6);var s=isNaN(this._minHeight)?0:this._minHeight;s>0&&(r=Math.max(r,s)),t=lt.getClientRect(this._parentElement),o=Math.min(t.width,o),r=Math.min(t.height,r),e+o>t.width&&(e=t.width-o),i+r>t.height&&(i=t.height-r),lt.setBounds(this._container,Math.max(e,0),Math.max(i,0),o,r)},e.prototype.$_createContainer=function(t){var e=t.createElement("div"),i=e.style;return e.spellcheck=!1,e.setAttribute("aria-hidden","true"),i.position="absolute",i.width="0px",i.height="0px",i.padding="0px",i.margin="0px",e},e.prototype._createEditor=function(t){var e=nt(t);this._container=this.$_createContainer(e),t.appendChild(this._container);var i=e.createElement("textarea"),o=i.style;i.autocomplete="off",i.setAttribute("aria-hidden","true"),o.position="absolute",o.margin="0px",o.padding="0px",o.wordWrap="normal",o.overflow="hidden",o.resize="none",o.border="none",o.outline="none",o.left="0px",o.top="0px",o.width="100%",o.height="100%",o["-webkit-user-modify"]="read-write-plaintext-only",o["white-space"]="pre",o["-webkit-transform"]="translateZ(0)",i.tabIndex=-1,i.onkeydown=this._keyDownHandler.bind(this),i.onkeyup=this._keyUpHandler.bind(this),i.onkeypress=this._keyPressHandler.bind(this),i.oninput=this._inputHandler.bind(this),i.onpaste=this._pasteHandler.bind(this),i.oncopy=this._copyHandler.bind(this);var r=this._grid.container;return r.$_addListener(i,"compositionstart",this._compositionstartHandler.bind(this),!1),r.$_addListener(i,"compositionupdate",this._compositionupdateHandler.bind(this),!1),r.$_addListener(i,"compositionend",this._compositionendHandler.bind(this),!1),r.$_addListener(i,"text",this._textHandler.bind(this),!1),this._container.appendChild(i),i},e.prototype.setBounds=function(t,e,i,o){lt.setBounds(this._container,t,e,i,o),t>lt.$_INVISIBLE_EDIT_BOUNDS.x&&this.$_resetBounds()},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype._textHandler=function(){this.isDisabled()||this._requestStart()},e.prototype._compositionstartHandler=function(t){this.isDisabled()||(this._composing=!0,this._requestStart())},e.prototype._compositionendHandler=function(){this._composing=!1},e.prototype._compositionupdateHandler=function(){this._composing=!0},e.prototype._keyDownHandler=function(t){if(!this.isDisabled()){var e=this._editor,i=t.keyCode;if((lt.isIE||lt.isEdge)&&!this.visible&&t.ctrlKey&&90==i)return!1;if(lt.isIE&&t.ctrlKey&&(67==t.keyCode||45==t.keyCode)&&""==this._editor.value)return t.preventDefault(),void nt(this._editor).execCommand("copy");switch(this._keydowned=!0,i){case 8:case 46:this._sendToParent(t)||!this.visible&&this._requestStart()&&(t.preventDefault(),t.stopImmediatePropagation(),!this._editor.readOnly&&this._controller.getData(this._editIndex)&&(this._editor.value="",this._isEmptyTextValue=!1,this._modified=!0,this._dispatchChange()));break;case 9:return!this._sendToParent(t);case 37:if(!this.visible||0==e.selectionEnd&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case 39:if(!this.visible||e.selectionEnd==e.value.length&&e.selectionEnd==e.selectionStart)return!this._sendToParent(t);break;case 36:case 35:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 38:case 33:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 40:case 34:if(!this.visible)return!this._sendToParent(t);t.stopImmediatePropagation();break;case 32:if(!this.visible)return!this._sendToParent(t);break;case 13:var o=t.ctrlKey||lt.isMac&&t.metaKey;if(this.altEnterNewLine){if(!(t.altKey&&this.editing||t.shiftKey))return!this._sendToParent(t)}else if(!(o&&this.editing||t.shiftKey))return!this._sendToParent(t);if((this.altEnterNewLine&&t.altKey||!this.altEnterNewLine&&o)&&!t.shiftKey){t.preventDefault(),t.stopImmediatePropagation();var r=this._isEmptyTextValue?"":e.value;if(r){var n=e.selectionEnd;r=r.substring(0,n)+"\r\n"+r.substring(n),e.value=r,this._isEmptyTextValue=!1,e.setSelectionRange(n+1,n+1),this._doChanged()}}break;case 27:case 113:case 45:return t.preventDefault(),t.stopImmediatePropagation(),!this._sendToParent(t);case 229:break;default:return this._sendToParent(t,null,!0),!0}return t.keyCode,!0}},e.prototype._keyUpHandler=function(t){if(!this.isDisabled()){var e=t.keyCode;switch(8!=e&&46!=e||lt.ieOld&&this.visible&&!this._editor.readOnly&&this._editor.value!=this._inputValue&&this._doChanged(),t.keyCode){case 37:case 39:case 36:case 35:case 32:this.visible||this._sendToParent(t,3);break;default:this._sendToParent(t,3)}}},e.prototype._keyPressHandler=function(t){var e=t.which||t.keyCode;this.isDisabled()||(lt.isMac&&t.metaKey&&(122===e||121===e)?t.preventDefault():lt.isMac&&t.metaKey&&(99===e||118===e)||e>=32&&!this._requestStart()&&t.preventDefault())},e.prototype._inputHandler=function(t){this.isDisabled()||"historyUndo"!==t.inputType&&"historyRedo"!==t.inputType&&this._doChanged()},e.prototype._pasteHandler=function(t){if(!this.isDisabled())if(this.visible)this._doChanged();else{t.preventDefault();var e=this._grid.pasteOptions;try{var i=void 0,o=(t.originalEvent||t).clipboardData;null!=(i=o?o.getData("text/plain"):window.clipboardData.getData("text"))&&this._grid.pasteFromClipboard(i,t)}catch(t){if(t instanceof Vr){if(e.throwValidationError)throw t}else if(t instanceof Nr)alert(t.message);else if(t)throw t}}},e.prototype._copyHandler=function(t){if(!this.isDisabled()&&!this.editing){var e=this._grid.copyToClipboard(t,null);return null!=e&&(window.clipboardData?window.clipboardData.setData("Text",e):t.clipboardData.setData("text/plain",e)),t.preventDefault()}},e.INPUT_CSS="rg-multiline-editor",e}(ha),_a=/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,fa=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._addString="000",o._maxIntegerLength=0,o._step=1,o._delay=100,o._regxAll=/[0-9]|,|\.|\-|\+|e|E/,o._regxPos=/[0-9]|,|\.|\+|e|E/,o._regxInt=/[0-9]|,|\+|\-/,o._regxPosInt=/[0-9]|,|\+/,o._regx=o._regxAll,o._decLen=void 0,o._decimalFormatter=void 0,o._isMultiple=!1,o._decSep=".",o._groupSep=",",o._active=!1,o._stepChanged=!1,o._editor.style["ime-mode"]="disabled",o._editor.style["-webkit-ime-mode"]="disabled",o._editor.style["-moz-ime-mode"]="disabled",o._editor.style["-ms-ime-mode"]="disabled",o}return o(e,t),Object.defineProperty(e.prototype,"positiveOnly",{get:function(){return this._positiveOnly},set:function(t){t!=this._positiveOnly&&(this._positiveOnly=t,this.$_resetRistrict())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"integerOnly",{get:function(){return this._integerOnly},set:function(t){t!=this._integerOnly&&(this._integerOnly=t,this.$_resetRistrict())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editFormat",{get:function(){return this._editFormat},set:function(t){if(t!=this._editFormat)if(this._editFormat=t,t){var e=this._decimalFormatter=new Se(t);e&&(this._decSep=e.separator?e.separator:".",this._groupSep=e.groupSep?e.groupSep:",",this._decLen=Math.max(e.minDigits,e.maxDigits))}else this._decimalFormatter=void 0,this._decSep=".",this._groupSep=",",this._decLen=void 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"multipleChar",{get:function(){return this._multipleChar},set:function(t){t!=this._multipleChar&&(this._multipleChar=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addString",{get:function(){return this._addString},set:function(t){t!=this._addString&&(this._addString=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLengthExceptComma",{get:function(){return this._maxLengthExceptComma},set:function(t){t!=this._maxLengthExceptComma&&(this._maxLengthExceptComma=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxIntegerLength",{get:function(){return this._maxIntegerLength},set:function(t){t!=this._maxIntegerLength&&(this._maxIntegerLength=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blankWhenSpace",{get:function(){return this._blankWhenSpace},set:function(t){t!=this._blankWhenSpace&&(this._blankWhenSpace=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){t!==this._step&&0!=t&&(this._step=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){return this._delay},set:function(t){t!==this._delay&&(this._delay=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"direction",{get:function(){return this._direction},set:function(t){this._direction=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showStepButton",{get:function(){return this._showStepButton},set:function(t){this._showStepButton=t},enumerable:!0,configurable:!0}),e.prototype.setMask=function(t){this._mask=null},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this.editFormat=void 0,this._positiveOnly=!1,this._integerOnly=!1,this._multipleChar=void 0,this._addString="000",this._blankWhenSpace=!1,this._maxLengthExceptComma=!1,this._maxIntegerLength=0,this._step=1,this._min=this._max=void 0,this._delay=100,this._active=!1,this._direction="vertical",this._showStepButton=!1,this._textReadOnly=!1,this.$_resetRistrict()},e.prototype.hasButton=function(t,e){return null!=e.showStepButton&&e.showStepButton},Object.defineProperty(e.prototype,"buttonCount",{get:function(){return 2},enumerable:!0,configurable:!0}),e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._editor.maxLength=this.maxLengthExceptComma||this.maxLength<=0?this._defMaxLength:this.maxLength},e.prototype._inputHandler=function(e){if(this._editFormat){e.target;this.$_editFormatting(e)}t.prototype._inputHandler.call(this,e)},e.prototype._keyPressHandler=function(e){if(!lt.isFirefox||!e.ctrlKey&&0!==e.charCode){var i=!0,o=String.fromCharCode(e.keyCode||e.charCode);(!this._regx.test(o)||e.target.value&&e.target.value.indexOf(this._decSep)>=0&&o==this._decSep)&&(this._multipleChar&&o===this._multipleChar||(i=!1,(!this.blankWhenSpace||" "!==o)&&e.preventDefault()));var r=e.target.selectionStart,n=e.target.selectionEnd,s=e.target.value,a=new RegExp("\\"+this._groupSep,"g"),l=s?s.split(""):[];if(l.splice(r,n-r,o===this._multipleChar?this._addString:o),l=l.join("").replace(a,""),this.maxLength>0&&i&&this.maxLengthExceptComma&&s&&!this._isEmptyTextValue&&l.length>this.maxLength&&e.preventDefault(),this._maxIntegerLength>0&&o!==this._decSep){var h=Math.floor(this.$_strToNum(l));if(!isNaN(h)){var u=Math.abs(h).toString().length;this._maxIntegerLength<u&&e.preventDefault()}}this._isMultiple=o==this._multipleChar,t.prototype._keyPressHandler.call(this,e)}else t.prototype._keyPressHandler.call(this,e)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=e.keyCode||e.charCode;if(this._isMultiple=!1,(8===i||46===i)&&this.editing&&this._editFormat){var o=e.target,r=o.value,n=r.length,s=r&&r.split(""),a=o.selectionStart,l=o.selectionEnd;if(a!==l)return t.prototype._keyDownHandler.call(this,e);var h=r[8===i?a-1:a];if(h===this._groupSep||h===this._decSep)if(h===this._decSep&&a===(8===i?r.length:r.length-1));else{s.splice(8===i?a-2:a+1,1),o.value=s.join(""),this.$_editFormatting(e);var u=o.value,c=n-(8===i?u.length:n);o.setSelectionRange(a-c,l-c),this._doChanged(),e.preventDefault()}}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._dispatchChange=function(){this.visible&&(this.$_resetValue(),t.prototype._dispatchChange.call(this))},e.prototype.setEditValue=function(t){var e=parseFloat(t);isNaN(e)?this._editor.value="":this._editFormat&&"number"==typeof e?this._editor.value=this.$_formatNum(e,this._decimalFormatter.minDigits,this._decimalFormatter._maxDigits):this._editor.value=e,this._isEmptyTextValue=!1},e.prototype.getEditValue=function(t,e){void 0===t&&(t=!0),this.$_resetValue();var i=this._editField().nullValue;try{var o=this._editor.value;if(o=o&&o.trim()){var r=new RegExp("\\"+this._groupSep,"g"),n=new RegExp("[\\"+this._decSep+"]+","g");o=(o=(o=(o=(o=(o=o.replace(r,"")).replace(n,".")).replace(/\++/g,"+")).replace(/\-+/g,"-")).replace(/\+\-/g,"+")).replace(/\-\+/g,"-")}i=o?parseFloat(o):void 0}catch(e){if(t)throw e}return i},e.prototype.setCellEditValue=function(t){!this.readOnly&&this._requestStart()&&("string"!=typeof t&&"number"!=typeof t||(t=this.$_strToNum(t),this.setEditValue(t),this._doChanged()))},e.prototype.buttonDown=function(t,e){var i,o=e.target;lt.stopEvent(e),"up"===o.$_editButtonType?i=this.step:"down"===o.$_editButtonType&&(i=-this.step),i&&(this.$_changeStepValue(i),this._active=!0,setTimeout(function(){this._active&&!this._stepTimer&&(this._stepTimer=setInterval(function(){this.$_changeStepValue(i)}.bind(this),this._delay))}.bind(this),300))},e.prototype.buttonUp=function(t,e){this._active=!1,clearInterval(this._stepTimer),this._stepTimer=null},e.prototype.setButtonStyle=function(t,e,i,o,r){var n=t.style;i?(0===e?n.top="0px":n.removeProperty("top"),0===e?n.removeProperty("bottom"):n.bottom="0px",n.right=o+"px",n.height="9px"):(n.top="0px",n.removeProperty("bottom"),n.right=o+r*e+"px",n.height="100%"),n.width=r+"px";var s=0===e?"rg-button-step-up":"rg-button-step-down";return t.className=s,t.$_editButtonType=0===e?"up":"down",!0},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.setFocus=function(){!this._stepChanged&&t.prototype.setFocus.call(this)},e.prototype.$_strToNum=function(t){t=""+t;var e=new RegExp("\\"+this._decSep,"g"),i=new RegExp("\\"+this._groupSep,"g"),o="-"===t[0];t=t.replace(i,"").replace(e,".").replace(/\+/g,"");var r=parseFloat(t);return isNaN(r)?NaN:o?-Math.abs(r):r},e.prototype.$_formatNum=function(t,e,i){var o=t,r=o<0||0==o&&1/o==-1/0?"-":"",n=Math.max(e,i);n=isNaN(n)?2:n;var s=parseInt(o=Math.abs(+o||0).toFixed(n))+"",a=s.length>3?s.length%3:0;if(o.indexOf(".")>=0){for(var l=o.split(".")[1].split("");l.length>0&&"0"===l[l.length-1]&&l.length>e;)l.splice(l.length-1,1);o=l.join(""),n=l.length}return r+(a?s.substr(0,a)+this._groupSep:"")+s.substr(a).replace(/(\d{3})(?=\d)/g,"$1"+this._groupSep)+(n?this._decSep+o:"")},e.prototype.$_editFormatting=function(t){this._editor;var e=t.target.value,i=e&&e[e.length-1]==this._decSep,o=t.target.selectionStart,r=t.target.selectionEnd;e=this._isMultiple&&this._addString?e.replace(new RegExp("\\"+this._multipleChar,"gi"),this._addString):e,this._isMultiple&&this._addString&&(o+=this._addString.length,r+=this._addString.length);var n=e.split(this._decSep),s=0;n.length>1&&(n.length=2,n[1]=n[1].substr(0,this._decimalFormatter._maxDigits),s=n[1].length,e=n.join(this._decSep)),s=2==n.length?Math.min(n[1].length,null!=this._decLen?this._decLen:99):0;var a=this.$_strToNum(e);if(!isNaN(a)){if(this.maxLength>0||this.maxIntegerLength>0){var l=String(a).split(".");this.maxIntegerLength>0&&(l[0]=l[0].substr(0,this.maxIntegerLength));var h=l.join(".");this.maxLength>0&&(h=h.substr(0,this.maxLength)),a=parseFloat(h)}e=this.$_formatNum(a,s,this._decimalFormatter.maxDigits);var u=(e=i&&this._decLen&&e.indexOf(this._decSep)<0?e+this._decSep:e).length,c=t.target.value.length;1==Math.abs(u-c)&&(u>c?(o++,r++):e.indexOf(this._decSep)>=o&&(o--,r--)),t.target.value=e,t.target.setSelectionRange(o,r)}},e.prototype.$_resetValue=function(){if(this.visible){var t=this._editor,e=t.selectionStart,i=t.selectionEnd,o=t.value?t.value.length:0;t.value=t.value.replace(_a,"").trim(),(t.value?t.value.length:0)==o?t.setSelectionRange(e,i):t.setSelectionRange(i,i)}},e.prototype.$_resetRistrict=function(){this._positiveOnly&&this._integerOnly?this._regx=this._regxPosInt:this._positiveOnly?this._regx=this._regxPos:this._integerOnly?this._regx=this._regxInt:this._regx=this._regxAll},e.prototype.$_changeStepValue=function(t){var e=this.getEditValue();e=null==e||e==isNaN(e)?0:e,e+=t,null!=this._max&&(e=Math.min(this._max,e)),null!=this._min&&(e=Math.max(this._min,e)),this.setEditValue(e),this._stepChanged=!0,this._doChanged(),this._stepChanged=!1},e.INPUT_CSS="rg-number-editor",e}(ua),ga=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-editor-marquee"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e)},e.prototype._doDraw=function(t){},e.prototype.spread=function(){var t=this._dom,e=t.style,i=t.parentElement.getBoundingClientRect();e.left="0",e.top="0",e.width=i.width+"px",e.height=i.height+"px",this._setClassName(t)},e}(Os),ya=function(t){function e(e,i){var o=t.call(this,e,i)||this;if(o._isMobile){var r=nt(i);o._marquee=new ga(r)}return o}return o(e,t),e.prototype.hasButton=function(t){return!0},Object.defineProperty(e.prototype,"buttonCount",{get:function(){return 1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasList",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._showMarquee=function(t){this._marquee&&(t.appendChild(this._marquee._dom),this._marquee.spread())},e.prototype._centerPopup=function(t,e){var i=e.getBoundingClientRect(),o=t.getBoundingClientRect();t.appendChild(e),e.style.left=(o.width-i.width)/2+"px",e.style.top=(o.height-i.height)/2+"px"},e.prototype._closeMarquee=function(){this._marquee&&lt.detach(this._marquee._dom)},e.prototype._isMarquee=function(t){return this._marquee&&t===this._marquee._dom},Object.defineProperty(e.prototype,"textReadOnly",{get:function(){return this._textReadOnly},set:function(t){this._setTextReadOnly(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowEmpty",{get:function(){return this._allowEmpty},set:function(t){this._setAllowEmpty(t)},enumerable:!0,configurable:!0}),e}(ua),ma=function(){function t(t){this.cell=null,this.layout=null,this.visible=void 0,this.spanned=!1,this.rowSpan=1,this.colSpan=1,this.className="",this.width=0,this.height=0,this.text=void 0,this.cell=t}return t.addEdgeMark=function(t,e,i){if(t!==e.edgeMark){var o=e.cell;if(t){var r=e.edgeMarker;switch(r||(r=e.edgeMarker=i.createElement("div")),t){case"leftTop":r.className="rg-edgemarker-lefttop";break;case"leftBottom":r.className="rg-edgemarker-leftbottom";break;case"rightTop":r.className="rg-edgemarker-righttop";break;case"rightBottom":r.className="rg-edgemarker-rightbottom";break;default:r.className=t}o.appendChild(r)}else e.edgeMarker&&o.removeChild(e.edgeMarker);e.edgeMark=t}},t.prototype.dispose=function(){this.cell=null},t.prototype.setColSpan=function(t){return this.colSpan!=t&&(this.colSpan=t,t>1?this.cell.colSpan=t:this.cell.removeAttribute("colspan")),this},t.prototype.setRowSpan=function(t){return this.rowSpan!=t&&(this.rowSpan=t,t>1?this.cell.rowSpan=t:this.cell.removeAttribute("rowspan")),this},t.prototype.setVisible=function(t){return t!==this.visible&&(this.visible=t,this.cell.style.display=t?"":"none"),this},t.prototype.set=function(t,e,i){return this.colSpan!=t&&(this.colSpan=t,t>1?this.cell.colSpan=t:this.cell.removeAttribute("colspan")),this.rowSpan!=e&&(this.rowSpan=e,e>1?this.cell.rowSpan=e:this.cell.removeAttribute("rowspan")),this.visible!==i&&(this.visible=i,this.cell.style.display=i?"":"none"),this},t.prototype.clear=function(t){return this.colSpan>1&&(this.colSpan=1,this.cell.removeAttribute("colspan")),this.rowSpan>1&&(this.rowSpan=1,this.cell.removeAttribute("rowspan")),this.visible!==t&&(this.visible=t,this.cell.style.display=t?"":"none"),this},t}(),ba=function(t){function e(e){var i=t.call(this,e)||this;return i.cellButton=null,i.editButtons=null,i.errorIcon=null,i.buttons=null,i.changedMarker=null,i.expander=null,i.item=null,i.grouped=!1,i.rowIndex=-1,i.rows=0,i.trow=-1,i.tcol=-1,i.head=null,i.merged=!1,i.spanHead=null,i.heighted=!1,i.buttonsOffset=0,i.template=void 0,i.marginRight=-1,i.style=new fn,i.rendererChanged=!1,i.valueChanged=!1,i.mouseEntered=!1,i.focused=!1,i.borderBottom=1,i.readonly=void 0,i.editable=void 0,i.error=void 0,i.errorLevel=p.IGNORE,i.errorWidth=0,i.button=E.NONE,i.buttonWidth=0,i.editWidth=0,i.edgeMarker=null,i.text=e[lt.TextProp],i}return o(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.renderer2=this.renderer2&&this.renderer2.clearAndDispose(),this.item=null,this.editButtons&&this.editButtons.forEach((function(t){lt.detach(t)})),this.buttons=this.cellButton=this.editButtons=this.errorIcon=null,this.changedMarker=this.expander=null,this.layout=null},Object.defineProperty(e.prototype,"dataColumn",{get:function(){return this.layout.getDataColumn()},enumerable:!0,configurable:!0}),e.prototype.reset=function(t){return this.cell=t,this.className="",this.text=void 0,this.visible=void 0,this.readonly=void 0,this.editable=void 0,this},e.prototype.span=function(t){this.spanned=!0,this.spanHead=t,this.clear(!1)},e.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(e=t.textFormat)&&(this.textFormatter&&this.textFormatter.format==e||(this.textFormatter=Gr.getFormatter(e))),(e=t.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==e||(this.numberFormatter=Se.getFormatter(e))),(e=t.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==e||(this.datetimeWriter=xe.getFormatter(e))),(e=t.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==e||(this.booleanFormatter=Ie.getFormatter(e))),this.prefix=t.prefix,this.suffix=t.suffix},e.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},e.prototype.setEditor=function(t,e){this.editor=t,this.editorType=aa.getEditorType2(t,e)},e.prototype.setBorderBottom=function(t){t!=this.borderBottom&&(this.borderBottom=t,this.cell.style.borderBottom=0==t?"0":"")},e.prototype.setMarginRight=function(t,e){e!=this.marginRight&&(this.marginRight=e,t.style.marginRight=e<=0?"":e+"px")},e.prototype.isCellButton=function(t){return t===this.cellButton},e.prototype.isEditButton=function(t){return this.editButtons&&this.editButtons.some((function(e){return e===t}))},e.prototype.isButton=function(t){return t===this.cellButton||this.isEditButton(t)},e.prototype.resetButtonClass=function(){var t=this.button==E.POPUP?"rg-button-popup":"rg-button-action";this.cellButton.className=t},e.prototype.resetEditClass=function(t,e){var i;switch(this.editorType){case"date":case"btdate":case"ndate":i="rg-button-calendar";break;default:i="rg-button-list"}t.className=i},e.prototype.resetErrorClass=function(){var t;switch(this.errorLevel){case p.ERROR:t="rg-validation-error";break;case p.WARNING:t="rg-validation-warning";break;case p.INFO:t="rg-validation-info";break;default:t=""}this.errorIcon.className=t},e.prototype.clearExpander=function(){this.expander&&(this.cell.removeChild(this.expander),this.expander=null)},e.prototype.clearButtons=function(){this.buttons&&(this.cell.removeChild(this.buttons),this.buttons=null,this.errorWidth=this.buttonWidth=this.editWidth=0)},e.prototype.getEditIndex=function(t){var e=this.item.index;return this.merged&&(e+=this.buttonsOffset),t.set(e,this.layout.firstColumn)},e.prototype.contains=function(t){if(t.layout===this.layout){var e=t.itemIndex,i=this.item.index,o=i+this.rowSpan/this.layout.getDataSpan();return i<=e&&e<o}return!1},e.prototype.toString=function(){return"Body Cell("+this.layout.col+", "+this.item.index+", "+this.layout.row+")"},e}(ma),va=function(t){function e(e,i){var o=t.call(this,e,i,"bodyView")||this;return o._itemViews=[],o._cells=[],o._spanned=!1,o}return o(e,t),e.prototype._doDispose=function(){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++)i[o].dispose(),i[o]=null;this._cells=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"fixed",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightFixed",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstCell",{get:function(){return this._cells[0][0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastCell",{get:function(){return this._cells[this.tableRowCount-1][0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"spanned",{get:function(){return this._spanned},enumerable:!0,configurable:!0}),e.prototype.bodyCellByCell=function(t){for(var e=t.parentElement.$_row,i=0;i<this._cells.length;i++){var o=this._cells[i],r=o[0].item;if(r&&r.index==e)for(var n=0;n<o.length;n++){var s=o[n];if(s&&s.cell===t)return s}}},e.prototype.bodyCellAt=function(t){for(var e=0;e<this._cells.length;e++){var i=this._cells[e],o=i[0].item;if(o&&o.index==t.itemIndex)for(var r=0;r<i.length;r++){var n=i[r];if(n&&n.layout===t.layout)return n}}},e.prototype.layoutByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout},e.prototype.columnByCell=function(t){var e=this.bodyCellByCell(t);return e&&e.layout&&e.layout._columnObj},e.prototype.cellByLayout=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0);for(var o=e;o<this._cells.length;o++)for(var r=this._cells[o],n=i;n<r.length;n++){var s=r[n];if(s&&s.layout===t)return s}},e.prototype.getCellRectAt=function(t,e,i){var o=this.getCellAt(t,e);return o&&this.getCellRect(t,o,i)},e.prototype.getCellRect=function(t,e,i){i&&e.merged&&(e=e.head);var o=e.layout,r=e.trow,n=e.rowSpan,s=i||n>1&&n==o.getDataSpan()?n:e.item.isData?o._dspan:1,a=t.getTableRowBounds(r,s),l=e.tcol,h=e.colSpan;return this.fixed?(a.x=t.getFixedCellPoint(l),a.width=t.getFixedCellWidth2(l,h)):this.rightFixed?(a.x=t.getRightCellPoint(l),a.width=t.getRightCellWidth2(l,h)):(a.x=t.getCellPoint(l),a.width=t.getCellWidth2(l,h)),a},e.prototype.getRowView=function(t){for(var e=0,i=this.childCount;e<i;e++){var o=this.getChild(e);if(o._item===t)return o}},e.prototype.getRowIndex=function(t){return this._cells[t][0].item.index},e.prototype.getViewIndex=function(t){return this._cells[t][0].rowIndex},e.prototype.cleanRows=function(t,e){this.$_cleanRowViews(t),this.$_cutTailBodyCells(e),this.$_cleanTableRows(e)},e.prototype.getCheckedLayout=function(t){return t.spanned&&(t=this.getUpperOf(t)),t},e.prototype.getLowerOf=function(t){for(var e=this._cells,i=t.trow,o=t.tcol,r=i+1;r<e.length;r++){var n=e[r][o];if(!n.spanned)return n;if(n.spanHead.trow===n.trow)return n.spanHead}},e.prototype.isBottomCell=function(t){for(var e=this._cells,i=t.rowIndex,o=t.trow,r=t.tcol,n=o+1;n<e.length;n++){var s=e[n][r];if(s.rowIndex!=i)break;if(!s.spanned)return!1;if(s.spanHead.trow===s.trow)return!1}return!0},e.prototype.getUpperOf=function(t){for(var e=this._cells,i=t.trow,o=t.tcol,r=i-1;r>=0;r--){var n=e[r][o];if(!n.spanned)return n;if(n.spanHead.trow===n.trow)return n.spanHead}},e.prototype.isTopCell=function(t){for(var e=this._cells,i=t.rowIndex,o=t.trow,r=t.tcol,n=o-1;n>=0;n--){var s=e[n][r];if(s.rowIndex!=i)break;if(!s.spanned)return!1;if(s.rowIndex===t.rowIndex&&s.trow!==t.trow&&s.layout.source)return!1}return!0},e.prototype.getNextVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.next())return!1;e=this.bodyCellAt(t)}return null!=e},e.prototype.getPrevVisibleCell=function(t){for(var e=this.bodyCellAt(t);e&&e.spanned;){if(!t.prev())return!1;e=this.bodyCellAt(t)}return null!=e},e.prototype._getCssSelector=function(){return"rg-body"},e.prototype._isFixedHeight=function(t){return!t.isAutoRowHeights()},e.prototype._getTrs=function(t){return t.trs},e.prototype._getTableRowCount=function(e){if(e.isAutoRowHeights())return Math.max(0,Math.ceil(e._itemsBounds/e.grid.displayOptions.minTableRowHeight)+this._trs-1);if(e.isRowGrouped()){for(var i=e.fixedItemCount,o=i+e.itemCount,r=this._trs,n=0,s=0;s<o;s++){n+=e.getItem(s).isData?r:1}return n+=i?1:0}return t.prototype._getTableRowCount.call(this,e)},e.prototype.$_getTableIndex=function(t,e){var i=t.fixedItemCount;if(e>=i&&t.isRowGrouped()){var o=this._trs,r=i*o;i>0&&r++;for(var n=i;n<e;n++)t.getItem(n).isData?r+=o:r++;return r}r=e*this._trs;return i>0&&e>=i?r+1:r},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doMeasure=function(t,e,i){return this._spanned=!1,new As},e.prototype.$_refreshRowCells=function(t,e,i,o,r,n,s){for(var a=this._cells,l=s.children,h=this._getFirstCell(t),u=this._getLastCell(t)-h+1,c=a.length,d=o+n;c<d;c++)a.push([]);for(var p=0;p<n;p++){for(var _=a[o],f=l[o].children,g=r[p],y=0;y<u;y++){var m=f[y],b=g[y+h],v=_[y];v?v.cell!==m?v.reset(m):v.layout!==b&&(v.rendererChanged=!0,v.layout=b,v.clear(!0)):(v=_[y]=new ba(m)).layout=b,v.spanned=!1,v.item=e,v.rowIndex=i,v.trow=o,v.tcol=y}o++;for(y=u;y<_.length;y++)lt.isDebugging()&&_[y],_[y].dispose();_.length=u}},e.prototype.layoutRow=function(t,e,i,o,r){var n,s=t.lm,a=t.fixedItemCount,l=this.model,h=s.cellLayouts._dataCells,u=this._tbody.rows,c=r.isData?this._trs:1;this.$_refreshRowCells(s,r,i,o,h,c,this._tbody),this.childCount<=i?(n=this.$_borrowView(r),this.addChild(n)):n=this.getChild(i),this.$_setRowCellsDisplay(s,t,e,this._cells,r,i,o,c);var d=r.index,p=u[o];if(p.style.display="",p.$_row=d,p.$_idx=o,n.updateItem(r,o,c,this._isFixedHeight(s)),r.isDataRow||r instanceof zr){var _=s.getItemBounds(i);_.width=this.width,n.setRect(_);var f=l.getRowStyle(r,d<a),g=f.styleName;if(r.isDataRow){r.setEditable(f.editable,f.readOnly);for(var y=1;y<this._trs;y++){(m=u[o+y]).$_idx=o+y,m.$_row=d,lt.setClassName(m,g)}}n.layoutContent(s),lt.setClassName(p,g)}else if(r.isData){for(y=1;y<this._trs;y++){var m;(m=u[o+y]).$_idx=o+y,m.$_row=d}n.clearContent(s,1),r instanceof Ur&&n.layoutContent(s)}else n.clearContent(s,1)},e.prototype.layoutFixedBar=function(t,e){var i=t.cellLayouts._dataCells,o=this._tbody,r=o.rows[e],n=this.$_prepareFixedBar(t,r),s=t.grid.hoveredCell;s&&s.trow==e&&s.rowIndex==t.fixedItemCount&&t.grid.$_setHoveredCell(null,-1),r.$_idx=e,r.$_row=-99,r.style.display="",lt.setClassName(r,Es.ROW_BAR_STYLE),this.$_refreshRowCells(t,null,-1,e,i,1,o),this.$_setFixedBarCellsDisplay(t,this._cells,e);for(var a=0,l=this._cells[e];a<l.length;a++){var h=l[a];h.className="",h.clearExpander(),h.clearButtons()}return n},e.prototype._doRender=function(t){},e.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},e.prototype._getTableRowHeight=function(t,e){return t.getTableRowHeight(e,1)},e.prototype._doDrawCell=function(t,e,i){},e.prototype.getCellAt=function(t,e){var i=e.layout,o=t.fixedItemCount,r=t.topIndex,n=e.itemIndex;if((o>0&&n<o||n>=r&&n-r>=o&&n-r<o+t.itemCount)&&(n>=o&&(n-=r),(n=this.$_getTableIndex(t,n))<this._cells.length))for(var s=0;s<this._trs;s++){var a=this._cells[n+s];if(a)for(var l=0;l<a.length;l++){var h=a[l];if(h&&h.layout===i)return h}}return null},e.prototype.getCellView=function(t,e){var i=this.getCellAt(t,e);return i&&i.cell},e.prototype.spanRight=function(t,e){if(e){var i=this.getCellAt(t,e);i&&(i.spanned&&(i=i.spanHead),i&&(e.layout=this._cells[i.trow][i.tcol+i.colSpan-1].layout))}},e.prototype.spanHead=function(t,e){if(e){var i=this.getCellAt(t,e);i&&(i.spanned&&(i=i.spanHead),i&&(e.layout=i.layout))}},e.prototype._getFirstCell=function(t){return t._firstCell},e.prototype._getLastCell=function(t){return t._lastCell},e.prototype._getStartCell=function(t){return t.getStartCell()},e.prototype._getEndCell=function(t){return t.getEndCell()},e.prototype.$_removeView=function(t){var e=this.removeChildAt(t);e.validate(),this._itemViews.push(e)},e.prototype.$_borrowView=function(t){var e=this._itemViews.pop();return e||(e=this.createRowElement()),e},e.prototype.createRowElement=function(){return new oa(this.doc)},e.prototype.$_setFixedBarCellsDisplay=function(t,e,i){for(var o=this._getFirstCell(t),r=this._getFirstCell(t)-o,n=this._getLastCell(t)-o,s=e[i],a=Es.ROW_BAR_CELL_STYLE,l=r;l<=n;l++){var h=s[l];h.clear(!0),lt.setClassName(h.cell,a)}},e.prototype.$_setRowCellsDisplay=function(t,e,i,o,r,n,s,a){var l=this._getFirstCell(t),h=this._getFirstCell(t)-l,u=this._getLastCell(t)-l,c=e.grid,d=e.fixedItemCount,p=i,_=r.isData,f=r.level;if(_||e.mergedRowGrouped)for(var g=0;g<a;g++)for(var y=(V=o[s+g]).length,m=h;m<=u;m++){var b=(B=V[m]).layout,v=b.getDataColumn(),w=b.parent,C=w&&w.vertical;if(B.merged=!1,B.grouped=!1,B.spanned);else if(b.isProxy){for(var x=void 0,I=s;I<s+a;I++){var E=o[I];if(!E)break;for(var S=0;S<E.length;S++)if(E[S].layout===b.source){x=E[S];break}if(x)break}x?B.span(x):B.clear(!1)}else if(!_&&m+l>=f)B.grouped=!0,B.clear(!0);else{var O=void 0,R=1;v&&v.mergeGrouped&&v.groupLevel<=r.parent.level?R=1:r.isDataRow?void 0===(R=(O=b.spanCallback)?O(c.handler,b,B.item.index):void 0)&&(R=b.getDataSpan()):r instanceof no&&(R=1);var D=0;if(R>1){var k=0,P=b.vindex+1;if(R--,C)for(;k++<R&&k<a;){if(!(T=w.getVisible(P++)))break;D+=T._dspan,this._cells[s+g+k][m].span(B),this._spanned=!0}else for(;k++<R&&m-h+k<y&&P<w.visibleCount;){var T;if(!(T=w.getVisible(P++)))break;D+=T._cspan,V[m+k].span(B),this._spanned=!0}}var M=b._cspan,L=b._dspan,F=b.merged&&b.merges;if(F&&r instanceof Ur&&m>=r.parent.level&&(F=null),F)if(B.merged=F.isMerged(n,d),F.isHidden(n,d))B.set(M+D,L,!1),B.head=p[m-h];else{var N=void 0;N=r.isData?(B.rows=F.getMerged(n,d))*L:F.getMerged2(c,r.index,n-d,L),B.set(M+D,N,!0),p[m-h]=B.head=B}else C?B.set(M,L+D,!0):B.set(M+D,L,!0)}}else{var V=o[s];for(m=h;m<=u;m++){var B;(B=V[m]).clear(!1),B.merged=!1,B.grouped=!0}}},e.prototype.$_refreshSpans=function(t,e,i){},e.prototype.$_cleanRowViews=function(t){for(;this.childCount>t;)this.$_removeView(this.childCount-1)},e.prototype.$_cutTailBodyCells=function(t){for(var e=this._cells,i=t;i<e.length;i++)for(var o=e[i],r=0;r<o.length;r++)o[r].dispose(),o[r]=null;e.length=t},e.prototype.$_cleanTableRows=function(t){for(var e=this._tbody.rows,i=e.length-1;i>=this._cells.length;i--)for(var o=e[i].cells,r=o.length;r--;){for(var n=o[r];n.childElementCount>1;)n.removeChild(n.lastElementChild);n.removeAttribute("rowspan"),n.removeAttribute("colspan")}for(i=e.length-1;i>=t;i--){var s=e[i];s.$_idx=-1,s.style.display="none"}},e.prototype.$_resetHeights=function(t,e){var i=this._tbody.children,o=0;if(t.length>0){for(var r=1;r<t.length;r++)i[o++].style.height=t[r]-t[r-1]+"px";o++}for(r=1;r<e.length;r++)i[o++].style.height=e[r]-e[r-1]+"px"},e.prototype.$_resetCellStyleHeights=function(t,e){var i=this._tbody.children,o=0;if(t.length>0){for(var r=1;r<t.length;r++)for(var n=t[r]-t[r-1],s=i[o++].cells,a=0;a<s.length;a++)s[a].style.height=n+"px";o++}for(r=1;r<e.length;r++)for(n=e[r]-e[r-1],s=i[o++].cells,a=0;a<s.length;a++)s[a].style.height=n+"px"},e.prototype.$_resetCellHeights2=function(t,e){for(var i=t.grid.body.buttonHeight,o=0,r=this._cells.length;o<r;o++)for(var n=this._cells[o],s=(n.length,0),a=n.length;s<a;s++){var l=n[s],h=l.height,u=t.getTableRowHeightFixed(l.trow,l.rowSpan);h!=u&&(l.height=u,l.buttonWidth>0&&l.buttons&&(l.buttons.style.top=Math.floor((u-i)/2)+"px")),e&&!l.heighted&&(l.cell.firstElementChild.style.maxHeight=l.height-1+"px",lt.ieTen&&(l.cell.firstElementChild.style.maxHeight=l.height-1+"px"))}},e.prototype.$_focusChanged=function(t,e,i){this.$_cellStateChanged(t,e,"focused",i)},e.prototype.$_mouseEnteredChanged=function(t,e,i){if(e.merged&&e.contains(t.focusedIndex)){var o=e.trow+(t.focusedRow-e.item.index)*t.layoutManager.trs;this._cells[o]&&(e=this._cells[o][e.tcol])}this.$_cellStateChanged(t,e,"mouseEntered",i)},e.prototype.$_cellStateChanged=function(t,e,i,o){var r=e&&e.item;if(e&&o!=e[i]&&r.isDataRow){var n=this.getRowView(e.item);if(n instanceof ia){var s=this.model,a=e.dataColumn;if(e[i]=o,a&&e.item.isDataRow){var l=s.getCellAt(e.item,a,!1);if(n.$_setButtons(t,e,e.cell.firstElementChild),e.merged&&e.head){var h=e.head,u=t.layoutManager,c=this.getCellRect(u,e,!1),d=this.getCellRect(u,e,!0),p=h.renderer2;if(e.focused){var _=c.top-d.top+c.height/2-d.height/2;p.moveClickElement(_,e.item.index)}else e.mouseEntered||p.moveClickElement(0,-1)}n instanceof oa&&e.renderer2&&"focused"===i&&e.renderer2.refreshFocusChanged&&n.cellRefresh(t,s,l,a,e)}}}},e.prototype.$_buttonZIndexChanged=function(t,e,i){var o=e&&e.item;if(o&&o.isDataRow){var r=this.getRowView(o);if(r instanceof ia)e.dataColumn&&r.$_setButtonZIndex(t,e,i)}},e.prototype.$_rendererChanged=function(t){for(var e=this._cells,i=0;i<e.length;i++)for(var o=e[i],r=0;r<o.length;r++)o[r].layout===t&&(o[r].rendererChanged=!0)},e}(qs),wa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"fixed",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-fixed-body"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e.prototype.createRowElement=function(){return new ra(this.doc)},e}(va),Ca=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),Object.defineProperty(e.prototype,"rightFixed",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-fixed-body"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype.createRowElement=function(){return new na(this.doc)},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(va),xa=function(t){function e(e){var i=t.call(this,e)||this;return i.check=null,i.sort=null,i.filter=null,i.popup=null,i.textSpan=null,i.rendererClass="",i.html=void 0,i.showTooltip=!0,i.tooltip="",i.sortWidth=0,i.filterWidth=0,i.checkWidth=0,i.popupWidth=0,i.marginLeft=0,i.marginRight=0,i.marginTop=0,i.marginBottom=0,i.edgeMarker=null,i.textSpan=e.firstElementChild.firstElementChild,i}return o(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.textSpan=this.cell=this.check=this.sort=this.filter=null,this.layout=null},e.prototype.span=function(){this.spanned=!0,this.clear(!1)},e.prototype.clear=function(e){t.prototype.clear.call(this,e);var i=this.cell.firstElementChild,o=this.textSpan,r=i.style;return this.checkWidth>0&&(i.removeChild(this.check),this.check=null,this.checkWidth=0),this.filterWidth>0&&(i.removeChild(this.filter),this.filter=null,this.filterWidth=0),this.sortWidth>0&&(i.removeChild(this.sort),this.sort=null,this.sortWidth=0),this.popupWidth>0&&(i.removeChild(this.popup),this.popup=null,this.popupWidth=0),this.className&&(this.cell.className=this.className=""),this.rendererClass&&(i.className=this.rendererClass=""),0!=this.marginLeft&&(r.marginLeft="",this.marginLeft=0),0!=this.marginRight&&(r.marginRight="",this.marginRight=0),0!=this.marginTop&&(r.marginTop="",this.marginTop=0),0!=this.marginBottom&&(r.marginBottom="",this.marginBottom=0),this.text&&(o[lt.TextProp]=this.text=""),this.html&&(o.innerHTML=this.html=""),this},e.prototype.setText=function(t,e){e!=this.text&&(t[lt.TextProp]=this.text=e)},e.prototype.setHtml=function(t,e){e!=this.html&&(t.innerHTML=this.html=e)},e.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},e.prototype.setRendererClassName=function(t,e){e!=this.rendererClass&&(t.className=this.rendererClass=e)},e.prototype.setDivMarigns=function(t,e,i,o,r){e!=this.marginLeft&&(t.marginLeft=e?e+"px":"",this.marginLeft=e),i!=this.marginRight&&(t.marginRight=i?i+"px":"",this.marginRight=i),o!=this.marginTop&&(t.marginTop=o?o+"px":"",this.marginTop=o),r!=this.marginBottom&&(t.marginBottom=r?r+"px":"",this.marginBottom=r)},e.prototype.getIndex=function(t){return t.set(-1,this.layout.firstColumn)},e.prototype.isClickableElt=function(t){return t===this.filter||t===this.popup||t===this.check},e}(ma),Ia=function(t){function e(e,i){var o=t.call(this,e,i,"headerView")||this;return o._rowPoints=[],o._cells=[],o._heights=[],o}return o(e,t),e.renderCell=function(t,e){e[lt.TextProp]=t.text||""},e.prototype._doDispose=function(){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++)i[o].dispose(),i[o]=null;this._cells=null,t.prototype._doDispose.call(this)},e.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var r=i[o];if(r&&r.cell===t)return r}},e.prototype.tableCellByLayout=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++)if(i[o].layout===t)return i[o]},e.prototype.tableCellByLayout2=function(t,e){var i=this._cells,o=i.length;if(!(o<1)){for(var r=i[0].length,n=this._getFirstCell(t),s=this._getStartCell(t)-n,a=this._getEndCell(t)-n,l=s;l<=a;l++)for(var h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l];for(l=s-1;l>=0;l--)for(h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l];for(l=a+1;l<r;l++)for(h=0;h<o;h++)if(i[h][l].layout===e)return i[h][l]}},e.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},e.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},e.prototype.getSpanRoot=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var r=i[o];if(r.layout===t){if(r.spanned)if(r.layout.parent.vertical){for(var n=e-1;n>=0;n--)if(!this._cells[n][o].spanned)return this._cells[n][o].layout}else for(n=o-1;n>=0;n--)if(!i[n].spanned)return i[n].layout;return t}}},e.prototype.refresh=function(t){for(var e=t.focusedColumn,i=t.layoutManager,o=this._getFirstCell(i),r=this._getLastCell(i)-o+1,n=0;n<this._cells.length;n++)for(var s=this._cells[n],a=0;a<r;a++){var l=s[a],h=l.layout;if(l.visible&&h instanceof xn){var u=l.cell;u.$_foc=h.isColumn(e),lt.setClassName(u,this.$_getCellSelector(h,u))}}},e.prototype.getRowAt=function(t){for(var e=1;e<this._rowPoints.length-1;e++)if(t<this._rowPoints[e])return e-1;return this._rowPoints.length-2},e.prototype.getLayoutHeight=function(t,e,i){var o,r;return t instanceof On?(o=t.hrow,r=i?t.hlen:t.hspan):(o=t.hrow,r=i?e.rowSpan:t.hspan),this._rowPoints[o+r]-this._rowPoints[o]},e.prototype.getLayoutPos=function(t){return this._rowPoints[t.hrow]},e.prototype._getCssSelector=function(){return"rg-header"},e.prototype._isFixedHeight=function(){return this._fixedHeight},e.prototype._getMinRowHeight=function(t){return this._minRowHeight},e.prototype._prepareCellContent=function(t,e){var i=nt(t),o=i.createElement("div"),r=i.createElement("span");return o.appendChild(r),o},e.prototype._doMeasure=function(t,e,i){var o=this.model,r=t.layoutManager.headerRows,n=o.height,s=o.heights,a=this._heights=[];if(this._minRowHeight=o.minRowHeight,s&&s.length>0){for(var l=0,h=0;h<r;h++)l+=a[h]=Math.max(s[h]||this._minRowHeight,this._minRowHeight);n=l}return n=n<=0?Math.max(this._minRowHeight,t.heightMeasurer.headerHeight)*r:Math.max(this._minRowHeight*r,n),this._fixedHeight=n>=0,n=Math.max(this._minRowHeight*r,o.minHeight,n),As.create(e,n)},e.prototype._doPrepareTableExtents=function(t){this.model;var e=this._rowPoints,i=this.height,o=this._heights,r=Math.floor(i/t.headerRows);if(e.length=this._getTableRowCount(t)+1,e[0]=0,e.length>0){for(var n=1;n<e.length-1;n++)e[n]=e[n-1]+(o[n-1]||r);e[n]=i}},e.prototype._doLayoutContent=function(t){var e=t.grid,i=e.focusedColumn,o=this.model,r=t.cellLayouts._headerCells,n=r.length,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s;this.$_refreshCells(t,r,this._tbody),this.$_refreshSpans(t,n);for(var h=0;h<n;h++)for(var u=this._cells[h],c=a;c<=l;c++){var d=u[c];if(d.visible||c===a){var p=void 0;d.layout.isProxy?(p=d.layout.source,d=this.tableCellByLayout(p)):p=d.layout;var _=d.cell;if(_.$_foc=p.isColumn(i),d.setClassName(this.$_getCellSelector(p,_)),p.isNull)d.setText(d.textSpan,p.header.getDisplayText());else if(p instanceof On){var f=o.getCell(p);this._updateGroupCell(e,o,f,d)}else{f=o.getCell(p);this._updateCell(e,o,f,d)}}}},e.prototype._doRender=function(t){},e.prototype._getTableRowCount=function(t){return t.headerRows},e.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},e.prototype.$_getCellHeight=function(t){var e=t.layout.hrow,i=this._rowPoints[e];return this._rowPoints[e+t.rowSpan]-i},e.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},e.prototype._getCellWidth2=function(t,e,i){return t.getCellWidth2(e,i)},e.prototype._doDrawCell=function(t,e,i){},e.prototype._doPrepareTableRow=function(e,i,o,r){t.prototype._doPrepareTableRow.call(this,e,i,o,r);var n=this.model;lt.setClassName(r,n.getStyleName())},e.prototype.$_getCellSelector=function(t,e){var i="",o=t.header.styleName;if(t instanceof On)i="rg-header-group-cell",o&&(i+=" "+o);else{i="rg-header-cell",e.$_foc?i+=" rg-header-focus":this.grid.isSelectedLayout(t)&&(i+=" rg-header-select");var r=t.firstColumn;(o=o||r&&r.header.styleName)&&(i+=" "+o)}return i},e.prototype._getFirstCell=function(t){return t._firstCell},e.prototype._getLastCell=function(t){return t._lastCell},e.prototype._getStartCell=function(t){return t.getStartCell()},e.prototype._getEndCell=function(t){return t.getEndCell()},e.prototype.$_refreshCells=function(t,e,i){for(var o=this._cells,r=i.children,n=r.length,s=this._getFirstCell(t),a=this._getLastCell(t)-s+1,l=o.length;l<n;l++)o.push([]);for(var h=0;h<n;h++){for(var u=o[h],c=r[h].children,d=e[h],p=0;p<a;p++){var _=c[p],f=d[p+s],g=u[p];g?g.cell!==_||g.layout!=f&&(g.layout=f,g.clear(!0)):(g=u[p]=new xa(c[p])).layout=f,g.height=this.$_getCellHeight(g),g.width=this._getCellWidth(t,p),g.spanned=!1}for(p=a;p<u.length;p++)u[p].dispose();u.length=a}for(h=n;h<o.length;h++){var y=o[h];for(p=0;p<y.length;p++)y[p].dispose(),y[p]=null}o.length=n},e.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,r=this._getLastCell(t)-i,n=0;n<e;n++)for(var s=this._cells[n],a=s.length,l=o;l<=r;l++){var h=s[l],u=h.layout,c=u.parent,d=c&&c.vertical;if(h.spanned);else if(u.isProxy)h.clear(!1);else{var p=0,_=u.getHeaderSpan()-1;if(_>0){var f=0,g=u.vindex+1;if(d)for(;f++<_&&f<e;){p+=c.getVisible(g++)._hspan,this._cells[n+f][l].span()}else for(;f++<_&&l-o+f<a&&g<c.visibleCount;){p+=c.getVisible(g++)._cspan,s[l+f].span()}}(u instanceof On||u.isNull)&&h.clear(!0),d?h.set(u._cspan,u._hspan+p,!0):h.set(u._cspan+p,u._hspan,!0),h.width=this._getCellWidth2(t,l,h.colSpan)}}},e.prototype._updateCell=function(t,i,o,r){var s=t.doc,a=t.sortingOptions,l=t.filteringOptions,h=r.layout.firstColumn,u=o.checkLocation,c=u&&u!=f.NONE?i.checkWidth:0,d=c>0?i.checkWidth:0,p=h&&this.$_canSortHandleVisible(a,h),_=h&&h.sortDirection||n.NONE,g=p?i.sortWidth:0,y=h&&this.$_canFilterHandleVisible(l,h)?i.filterWidth:0,m=h&&this.$_canPopupHandleVisible(i,h)?i.popupWidth:0,b=r.cell.firstElementChild,v=r.textSpan,w=r.width,C=this.$_getCellHeight(r),x=0,I=0,E=0,S=0,O=b.style;r.setRendererClassName(b,e.RENDERER_STYLE),O.maxHeight=Math.max(C-1,0)+"px";var R=r.check;if(c>0){var D=v.style;R?O=R.style:(R=s.createElement("input"),r.check=R,R.type="checkbox",R.className="rg-header-check",(O=R.style).position="absolute",O.display="inline-block",O.verticalAlign="middle"),r.checkWidth<=0&&(b.appendChild(R),r.checkWidth=c),R.checked=h.checked;var k=-1,P=-1;switch(D.removeProperty("display"),u){case f.LEFT:case f.LEFT_EDGE:b.insertBefore(R,r.textSpan),u===f.LEFT?(O.position="relative",O.removeProperty("left"),O.removeProperty("top")):(O.position="absolute",x+=c,k=0,P=Math.floor((C-i.checkHeight)/2));break;case f.RIGHT:case f.RIGHT_EDGE:b.insertBefore(r.textSpan,R),u===f.RIGHT?(O.position="relative",O.removeProperty("left"),O.removeProperty("top")):(O.position="absolute",I+=c,k=w-c,P=Math.floor((C-i.checkHeight)/2));break;case"top":case"topEdge":b.insertBefore(R,r.textSpan),u===f.TOP?(D.display="block",O.position="relative",O.removeProperty("left"),O.removeProperty("top")):(O.position="absolute",E+=d,k=Math.floor((w-g-y-i.checkWidth)/2),P=0);break;case"bottom":case"bottomEdge":b.insertBefore(r.textSpan,R),u===f.BOTTOM?(D.display="block",O.position="relative",O.removeProperty("left"),O.removeProperty("top")):(O.position="absolute",S+=d,k=Math.floor((w-g-y-i.checkWidth)/2),P=C-i.checkHeight)}k>-1&&(O.left=k+"px"),P>-1&&(O.top=P+"px")}else r.checkWidth>0&&(b.removeChild(R),r.checkWidth=0);var T=r.filter;y>0?(T?O=T.style:(T=s.createElement("span"),r.filter=T,(O=T.style).position="absolute",O.display="inline-block"),r.filterWidth<=0&&(b.appendChild(T),r.filterWidth=y),T.className="rg-header-filtering"+(h.isFiltered()?" filter-activated":""),I+=y,O.left=w-I+"px",O.top=Math.floor((C-i.filterHeight)/2)+"px",O.width=y+"px",O.height=i.filterWidth+"px"):r.filterWidth>0&&(b.removeChild(T),r.filterWidth=0);var M=r.sort;if(p){switch(M?O=M.style:(M=s.createElement("span"),r.sort=M,(O=M.style).position="absolute",O.display="inline-block"),r.sortWidth<=0&&(b.appendChild(M),r.sortWidth=g),_){case n.DESCENDING:M.className="rg-header-sort-descending";break;case n.ASCENDING:M.className="rg-header-sort-ascending";break;default:M.className="rg-header-sort-none"}I+=g,O.left=w-I+"px",O.width=g+"px",a.showSortOrder&&h.sortOrder>=0?(M[lt.TextProp]=(h.sortOrder+1).toString(),O.top=Math.max(0,Math.floor((C-i.sortHeight-10)/2))+"px",O.height=Math.min(r.height,i.sortHeight+10)+"px",O.backgroundPositionY=lt.isIE?"5px":"70%",O.lineHeight=lt.isIE?"1.5em":"1em"):(M[lt.TextProp]="",O.backgroundPositionY="center",O.top=Math.floor((C-i.sortHeight)/2)+"px",O.height=i.sortHeight+"px")}else r.sortWidth>0&&(b.removeChild(M),r.sortWidth=0);var L=r.popup;m>0?(L?O=L.style:(L=s.createElement("span"),r.popup=L,(O=L.style).position="absolute",O.display="inline-block"),r.popupWidth<=0&&(b.appendChild(L),r.popupWidth=m),L.className="rg-header-popup",I+=m,O.left=w-I+"px",O.top=Math.floor((C-i.popupHeight)/2)+"px",O.width=m+"px",O.height=i.popupWidth+"px"):r.popupWidth>0&&(b.removeChild(L),r.popupWidth=0),O=b.style,r.showTooltip=o.showTooltip,r.tooltip=o.tooltip,r.setDivMarigns(O,x,I,E,S);var F=o.template;F?r.setHtml(v,F):r.setText(v,o.text||""),ma.addEdgeMark(o.edgeMark,r,s)},e.prototype._updateGroupCell=function(t,e,i,o){var r=t.doc,n=o.cell.firstElementChild,s=o.textSpan,a=this.$_getCellHeight(o),l=n.style;l.maxHeight=Math.max(a-1,0)+"px",o.showTooltip=i.showTooltip,o.tooltip=i.tooltip,o.setDivMarigns(l,0,0,0,0);var h=i.template;h?o.setHtml(s,h):o.setText(s,i.text||""),ma.addEdgeMark(i.edgeMark,o,r)},e.prototype.$_canPopupHandleVisible=function(t,e){if(null==e.header.popupMenuName)return!1;switch(t.showPopupMenu){case I.VISIBLE:return!0;case I.HOVERED:return this.hovered;case I.ALWAYS:return!0;case I.HIDDEN:return!1}},e.prototype.$_canFilterHandleVisible=function(t,e){var i=t.enabled&&e.hasFilters&&e.filterable;if(i)switch(t.handleVisibility){case I.HIDDEN:i=!1}return i},e.prototype.$_canSortHandleVisible=function(t,e){switch(t.handleVisibility){case I.VISIBLE:return e.sortOrder>=0;case I.HOVERED:return this.hovered&&e.sortOrder>=0;case I.ALWAYS:return!0;case I.HIDDEN:return!1}return e.sortOrder>=0},e.prototype.$_canCheckHandleVisible=function(t,e){return!1},e.prototype.$_checkHeight=function(){return this._table.offsetHeight!=this._rowPoints[this._rowPoints.length-1]},e.prototype.$_getHeights=function(t){var e=this._tbody.rows;if(0==t.length)for(var i=0,o=this._rowPoints.length-1;i<o;i++)t[i]=0;for(i=0;i<t.length;i++)t[i]=Math.max(t[i],e[i]?e[i].offsetHeight:0)},e.prototype.$_adjustHeights=function(t){var e=this._tbody.rows,i=this._rowPoints;i[0]=0;for(var o=0,r=i.length-1;o<r;o++)e[o].style.height=t[o]+"px",i[o+1]=i[o]+t[o];return i[i.length-1]},e.prototype.$_distributeHeights=function(t,e){for(var i=e.length,o=0,r=0;r<i;r++)o+=e[r];if(t>o){var n=this._tbody.rows,s=t-o,a=s;for(r=0;r<i-1;r++){var l=Math.floor(s*e[r]/o);e[r]+=l,n[r].style.height=e[r]+"px",a-=l}e[r]+=a,n[r]&&(n[r].style.height=e[r]+"px")}},e.RENDERER_STYLE="rg-header-renderer",e}(Ys),Ea=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e.prototype._getCellWidth2=function(t,e,i){return t.getFixedCellWidth2(e,i)},e.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)},e}(Ia),Sa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.cellCount-1},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e.prototype._getCellWidth2=function(t,e,i){return t.getRightCellWidth2(e,i)},e.prototype.tableCellByLayout2=function(t,e){return this.tableCellByLayout(e)},e}(Ia),Oa=function(t){function e(e){var i=t.call(this)||this;return i._zoom=NaN,i._refreshMode=R.ALL,i._leftPos=0,i._rightFixed=!0,i._footerCount=0,i._headerSummaryCount=0,i._layoutCount=0,i._fixedLayoutCount=0,i._rightLayoutCount=0,i._firstLayout=0,i._lastLayout=0,i._layoutsLength=0,i._layouts=[],i._layoutPoints=[],i._fixedLayoutPoints=[],i._rightLayoutPoints=[],i._cellCount=0,i._fixedCellCount=0,i._rightCellCount=0,i._firstCell=0,i._lastCell=0,i._startCell=0,i._endCell=0,i._cellCounts=[],i._fixedCellCounts=[],i._rightCellCounts=[],i._cellPoints=[],i._fixedCellPoints=[],i._rightCellPoints=[],i._trs=1,i._rowGrouped=!1,i._items=[],i._topIndex=0,i._itemCount=0,i._fixedItemCount=0,i._fullItemCount=0,i._fixedItemPoints=[],i._itemPoints=[],i._fixedTableRowCount=0,i._tableRowCount=0,i._fixedTableRowPoints=[],i._tableRowPoints=[],i._fixedTableItemPoints=[],i._tableItemPoints=[],i._fixedDataHeight=0,i._dataRowHeights=[],i._dataHeight=0,i._fixedBarWidth=0,i._rightBarWidth=0,i._fixedBarHeight=0,i._columnMerged=!1,i._fixedColumnMerged=!1,i._rightColumnMerged=!1,i._itemsBounds=0,i._fixedWidth=0,i._rightWidth=0,i._fixedHeight=0,i._autoRowHeights=!1,i._minRowHeight=$s.MIN_TABLE_ROW_HEIGHT,i._minItemHeight=$s.MIN_TABLE_ROW_HEIGHT,i._maxHeight=$s.MIN_TABLE_ROW_HEIGHT,i._itemHeight=0,i._hscrolled=!1,i._vscrolled=!1,i._hscrollBar=!1,i._vscrollBar=!1,i._scrollBarWidth=0,i._scrollBarHeight=0,i._scrollWidth=0,i._fitStyle=void 0,i._fitStyleChanged=!1,i._grid=e,i}return o(e,t),e.prototype._doDispose=function(){this._grid=null,this._rs=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"zoomed",{get:function(){return!isNaN(this._zoom)&&1!=this._zoom},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerCount",{get:function(){return this._footerCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerSummaryCount",{get:function(){return this._headerSummaryCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vscrollBar",{get:function(){return this._vscrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hscrollBar",{get:function(){return this._hscrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarWidth",{get:function(){return this._scrollBarWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarHeight",{get:function(){return this._scrollBarHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataBounds",{get:function(){return this._dataBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bodyBounds",{get:function(){return this._bodyBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedBodyBounds",{get:function(){return this._fixedBodyBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"gridBounds",{get:function(){return this._gridBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerBounds",{get:function(){return this._headerBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summaryBounds",{get:function(){return this._summaryBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerBounds",{get:function(){return this._footerBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topContentBounds",{get:function(){return this._topContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftContentBounds",{get:function(){return this._leftContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowBarBounds",{get:function(){return this._rowBarBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sideContentBounds",{get:function(){return this._sideContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"contentBounds",{get:function(){return this._contentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedContentBounds",{get:function(){return this._fixedContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"nonFixedBounds",{get:function(){return this._nonFixedBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightContentBounds",{get:function(){return this._rightContentBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headBounds",{get:function(){return this._headBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sumBounds",{get:function(){return this._sumBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footBounds",{get:function(){return this._footBounds},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedWidth",{get:function(){return this._fixedWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightWidth",{get:function(){return this._rightWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultItemHeight",{get:function(){return this._itemHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topIndex",{get:function(){return this._topIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedItemCount",{get:function(){return this._fixedItemCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fullItemCount",{get:function(){return this._fullItemCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedTableRowCount",{get:function(){return this._fixedTableRowCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tableRowCount",{get:function(){return this._tableRowCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trs",{get:function(){return this._cellLayouts.dataRows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"leftPos",{get:function(){return this._leftPos},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellLayouts",{get:function(){return this._cellLayouts},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutCount",{get:function(){return this._layoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedLayoutCount",{get:function(){return this._fixedLayoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightLayoutCount",{get:function(){return this._rightLayoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstLayout",{get:function(){return this._firstLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastLayout",{get:function(){return this._lastLayout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightFirstLayout",{get:function(){return this._layoutCount-this._rightLayoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"layoutsLength",{get:function(){return this._layoutsLength},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellCount",{get:function(){return this._cellCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedCellCount",{get:function(){return this._fixedCellCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightCellCount",{get:function(){return this._rightCellCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstCell",{get:function(){return this._firstCell},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastCell",{get:function(){return this._lastCell},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startCell",{get:function(){return this._startCell},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endCell",{get:function(){return this._endCell},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isColumnFitted",{get:function(){return!!this._fitStyle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollWidth",{get:function(){return this._scrollWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedBarWidth",{get:function(){return this._fixedBarWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightBarWidth",{get:function(){return this._rightBarWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedHeight",{get:function(){return this._fixedHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedBarHeight",{get:function(){return this._fixedBarHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGrouped",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergedRowGrouped",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGroupFields",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGroupLevels",{get:function(){return 0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnMerged",{get:function(){return this._columnMerged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixedColumnMerged",{get:function(){return this._fixedColumnMerged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightColumnMerged",{get:function(){return this._rightColumnMerged},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clientRect",{get:function(){return this._clientRect},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerRows",{get:function(){return this._cellLayouts.headerRows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerSummaryRows",{get:function(){return this._cellLayouts.dataRows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerRows",{get:function(){return this._cellLayouts.dataRows},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topPanelVisible",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minRowHeight",{get:function(){return this._minRowHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minItemHeight",{get:function(){return this._minItemHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitStyle",{get:function(){return this._fitStyle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fitStyleChanged",{get:function(){return this._fitStyleChanged},enumerable:!0,configurable:!0}),e.prototype.requestZoom=function(){this._zoom=NaN,(lt.isChromium||lt.isSafari)&&this.grid.clearRowHeights(!0)},e.prototype.getStartCell=function(){return this._refreshMode==R.VISIBLE_ONLY?this._startCell:this._firstCell},e.prototype.getEndCell=function(){return this._refreshMode==R.VISIBLE_ONLY?this._endCell:this._lastCell},e.prototype.getLayout=function(t){return this._layouts[t]},e.prototype.getLayoutBounds=function(t){return new N(this._layoutPoints[t],0,this._layoutPoints[t+1]-this._layoutPoints[t],0)},e.prototype.getLayoutWidth=function(t){return this._layoutPoints[t+1]-this._layoutPoints[t]},e.prototype.getPositionToVIndex=function(t){for(var e=this._layoutPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},e.prototype.getFixedLayoutWidth=function(t){return this._fixedLayoutPoints[t+1]-this._fixedLayoutPoints[t]},e.prototype.getRightLayoutWidth=function(t){return this._rightLayoutPoints[t+1]-this._rightLayoutPoints[t]},e.prototype.getCellIndex=function(t){for(var e=this._cellPoints,i=0;i<e.length-1;i++)if(t>=e[i]&&t<e[i+1])return i;return-1},e.prototype.getHorzColumnIndex=function(t){for(var e=t,i=0;e;)i+=!e.group||e.group.horizontal?e.vindex:0,e=e.group;return i},e.prototype.getLeftCell=function(){return this.getCellIndex(this._leftPos)},e.prototype.getCellPoint=function(t){return this._cellPoints[t]},e.prototype.getCellWidth=function(t){return this._cellPoints[t+1]-this._cellPoints[t]},e.prototype.getCellWidth2=function(t,e){var i=this._cellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},e.prototype.getFixedCellPoint=function(t){return this._fixedCellPoints[t]},e.prototype.getFixedCellWidth=function(t){return this._fixedCellPoints[t+1]-this._fixedCellPoints[t]},e.prototype.getFixedCellWidth2=function(t,e){var i=this._fixedCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},e.prototype.getRightCellPoint=function(t){return this._rightCellPoints[t]},e.prototype.getRightCellWidth=function(t){return this._rightCellPoints[t+1]-this._rightCellPoints[t]},e.prototype.getRightCellWidth2=function(t,e){var i=this._rightCellPoints;return i[Math.min(i.length-1,t+e)]-i[t]},e.prototype.$_getItems=function(){return this._items},e.prototype.getItem=function(t){return this._items[t]},e.prototype.getDataRowHeights=function(t){var e=this.grid.displayOptions,i=[],o=e.dataHeights;if(o&&o.length>0)for(var r=0;r<t;r++){var n=Math.floor(Math.max(e.minTableRowHeight,o[r]||e.minTableRowHeight));i.push(n)}return i.slice()},e.prototype._calcDefaultRowHeight=function(t){var e=this.grid.displayOptions.rowHeight,i=this._dataRowHeights=this.getDataRowHeights(this._trs);return i&&i.length>0&&(e=i.reduce((function(t,e){return t+e}),0)),e<=0&&(e=t.heightMeasurer.rowHeight*this._trs),i.length>0&&this._maxHeight>0&&(e>this._maxHeight||e<this._minItemHeight)&&(this._dataRowHeights=[]),this._maxHeight>0&&(e=Math.min(this._maxHeight,e)),e=Math.max(this._minItemHeight,e)},e.prototype.measure=function(t,e,i,o,r){var n=this._grid;this._rs=n.itemSource,this._offsetBody=null,this._cellLayouts=n._activeCellLayout,this._footerCount=n.footers.visibleCount,this._headerSummaryCount=n.headerSummaries.visibleCount,this._leftPos=e,this._topIndex=i,this._columnMerged=!1,this._fixedColumnMerged=!1,this._rightColumnMerged=!1,this._focusIndex&&!n.isValid(this._focusIndex)&&this._focusIndex.normalize(n),this._doMeasure(t,o,r)},e.prototype.layout=function(t){var e=this._grid;this._doLayout(e,t),this._adjustLayout(e,this._gridBounds.clone()),this._prevFocused=this._focusIndex,this._focusIndex=null},e.prototype.getItemHeight=function(t){var e=t.index;return e<this._fixedItemCount?this._fixedItemPoints[e+1]-this._fixedItemPoints[e]:(e-=this._fixedItemCount-this._topIndex,this._itemPoints[e+1]-this._itemPoints[e])},e.prototype.getTableItemHeight=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t+1]-this._fixedTableItemPoints[t]:(t-=this._fixedItemCount,this._tableItemPoints[t+1]-this._tableItemPoints[t])},e.prototype.getTableItemIndex=function(t){for(var e=0;e<this._fixedItemCount;e++)if(t<=this._fixedTableItemPoints[e+1])return e;for(e=0;e<this._itemCount;e++)if(t<=this._tableItemPoints[e+1])return e+this._fixedItemCount;return-1},e.prototype.getTableItemTop=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t]:(t-=this._fixedItemCount,this._tableItemPoints[t])},e.prototype.getTableItemBottom=function(t){return t<this._fixedItemCount?this._fixedTableItemPoints[t+1]:(t-=this._fixedItemCount,this._tableItemPoints[t+1])},e.prototype.getItemBounds=function(t){var e,i;return this._fixedItemCount>0&&t<this._fixedItemCount?(e=this._fixedItemPoints[t],i=this._fixedItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._itemPoints[t],i=this._itemPoints[t+1]-e),new N(0,e,1e3,i)},e.prototype.getItemRect=function(t,e){void 0===e&&(e=!1);var i,o,r=(e?this._fixedContentBounds:this._bodyBounds).y;return this._fixedItemCount>0&&t<this._fixedItemCount?(i=this._fixedItemPoints[t]+r,o=this._fixedItemPoints[t+1]+r-i):(t-=this._fixedItemCount,i=this._itemPoints[t]+r,o=this._itemPoints[t+1]+r-i),new N(0,i,1e3,o)},e.prototype.getTableItemBounds=function(t){var e,i;return this._fixedItemCount>0&&t<this._fixedItemCount?(e=this._fixedTableItemPoints[t],i=this._fixedTableItemPoints[t+1]-e):(t-=this._fixedItemCount,e=this._tableItemPoints[t],i=this._tableItemPoints[t+1]-e),new N(0,e,1e3,i)},e.prototype.getTableRowHeightFixed=function(t,e){var i=this._fixedTableRowPoints.length;return t<i-1?this._fixedTableRowPoints[Math.min(t+e,i-1)]-this._fixedTableRowPoints[t]:(i>1&&(t-=i),this._tableRowPoints[Math.min(t+e,this._tableRowPoints.length-1)]-this._tableRowPoints[t])},e.prototype.getTableRowHeight=function(t,e){return t<this._fixedTableRowCount?this._fixedTableRowPoints[Math.min(t+e,this._fixedTableRowPoints.length-1)]-this._fixedTableRowPoints[t]:(this._fixedItemCount>0&&(t-=this._fixedItemCount*this._trs+1),this._tableRowPoints[Math.min(t+e,this._tableRowPoints.length-1)]-this._tableRowPoints[t])},e.prototype.getTableRowBounds=function(t,e){var i,o;return this._fixedTableRowCount>0&&t<this._fixedTableRowCount?(i=this._fixedTableRowPoints[t],o=this._fixedTableRowPoints[Math.min(t+e,this._fixedTableRowCount)]-i):(this._fixedTableRowCount>0&&(t-=this._fixedTableRowCount+1),i=this._tableRowPoints[t],o=this._tableRowPoints[Math.min(t+e,this._tableRowCount)]-i),new N(0,i,1e3,o)},e.prototype.getTableRowIndex=function(t){t-=this.contentBounds.y+this.bodyBounds.y;for(var e=0;e<this._fixedTableRowCount;e++)if(t<=this._fixedTableRowPoints[e+1])return e;for(e=0;e<this._tableRowCount;e++)if(t<=this._tableRowPoints[e+1])return e+(this._fixedTableRowCount>0?this._fixedTableRowCount+1:0);return-1},e.prototype.setLeftPos=function(t,e){var i=this._grid;this._leftPos=e,this.$_calcLeftPos(),i.contentPane.x=this._contentBounds.x=this.fixedContentBounds.right-this._leftPos},e.prototype.isMergedCell=function(t){return!1},e.prototype.getMergeRoom=function(t){var e=t.layout;if(e instanceof xn&&e.canMerge()){var i=e.merges;return i&&i.getRoom(t)}return null},e.prototype.getHeaderCellAt=function(t,e,i){void 0===i&&(i=!1);var o,r=this._grid,n=this._cellLayouts._headerCells,s=-1;if(t<this._fixedContentBounds.right){o=r.fixedHeaderView,t-=this._fixedContentBounds.x;for(var a=0;a<this._fixedCellCount;a++)if(t>=this._fixedCellPoints[a]&&t<this._fixedCellPoints[a+1]){s=a;break}}else if(t>this._rightContentBounds.x){o=r.rightHeaderView,t-=this._rightContentBounds.x;for(a=0;a<this._rightCellCount;a++)if(t>=this._rightCellPoints[a]&&t<this._rightCellPoints[a+1]){s=a+this._cellCount-this._rightCellCount;break}}else{o=r.headerView,t-=this._contentBounds.x;for(a=0;a<this._cellPoints.length;a++)if(t>=this._cellPoints[a]&&t<this._cellPoints[a+1]){s=a+this._fixedCellCount;break}}if(s>=0){var l=n[o.getRowAt(e-this._headerBounds.y-this._contentBounds.y)][s];return(l=o.getSpanRoot(l))&&!i?l.source:l}},e.prototype.getHeaderCellRect=function(t,e){void 0===e&&(e=!1);var i,o,r=this.grid,n=t.hcol,s=this.cellCount-this.rightCellCount;if(n<this._fixedCellCount){var a=this._fixedContentBounds.x,l=n,h=(o=r.fixedHeaderView.tableCellByLayout(t))?o.colSpan:t.cols;i=new N(this._fixedCellPoints[l]+a,0,this._fixedCellPoints[l+h]-this._fixedCellPoints[l],0)}else if(n>=s){a=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,l=n-s,h=(o=r.rightHeaderView.tableCellByLayout(t))?o.colSpan:t.cols;i=new N(this._rightCellPoints[l]+a,0,this._rightCellPoints[l+h]-this._rightCellPoints[l],0)}else{a=this._contentBounds.x,l=n-this._fixedCellCount,h=(o=r.headerView.tableCellByLayout(t))?o.colSpan:t.cols;i=new N(this._cellPoints[l]+a,0,this._cellPoints[l+h]-this._cellPoints[l],0)}return i.y=this._contentBounds.y+r.headerView.getLayoutPos(t),i.height=r.headerView.getLayoutHeight(t,o,e),i},e.prototype.getLayoutRect=function(t){var e,i=this.rightFirstLayout;if(t<this._fixedLayoutCount){var o=this._fixedContentBounds.x,r=t;e=new N(this._fixedLayoutPoints[r]+o,0,this._fixedLayoutPoints[r+1]-this._fixedLayoutPoints[r],0)}else if(t>=i){o=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,r=t-i;e=new N(this._rightLayoutPoints[r]+o,0,this._rightLayoutPoints[r+1]-this._rightLayoutPoints[r],0)}else{o=this._contentBounds.x,r=t-this._fixedLayoutCount;e=new N(this._layoutPoints[r]+o,0,this._layoutPoints[r+1]-this._layoutPoints[r],0)}return e},e.prototype.getDataRect=function(t){var e,i=t.col,o=t._clen,r=this.cellCount-this.rightCellCount;if(i<this._fixedCellCount){var n=this._fixedContentBounds.x,s=i;e=new N(this._fixedCellPoints[s]+n,0,this._fixedCellPoints[s+o]-this._fixedCellPoints[s],0)}else if(i>=r){n=this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth,s=i-r;e=new N(this._rightCellPoints[s]+n,0,this._rightCellPoints[s+o]-this._rightCellPoints[s],0)}else{n=this._contentBounds.x,s=i-this._fixedCellCount;e=new N(this._cellPoints[s]+n,0,this._cellPoints[s+o]-this._cellPoints[s],0)}return e},e.prototype.getBodyView=function(t){var e=this.rightFirstLayout,i=(t instanceof wn?t:t.layout).root.vindex;return i<this._fixedLayoutCount?this._grid.fixedBodyView:i>=e?this._grid.rightBodyView:this._grid.bodyView},e.prototype.mouseToIndex=function(t,e,i,o){if(o.set(-1,null),this._layoutCount<1)return o;var r=this.grid,n=this._summaryBounds.bottom,s=-1;if((i-=this._contentBounds.y)>=n&&i<this._footerBounds.y){for(var a=0;a<this._fixedItemCount;a++)if(i>=n+this._fixedItemPoints[a]&&i<n+this._fixedItemPoints[a+1]){s=a,i-=n+this._fixedItemPoints[a];break}if(s<0&&this._itemCount>0){for(a=0;a<this._itemCount;a++)if(i>=n+this._itemPoints[a]&&i<n+this._itemPoints[a+1]){s=a,i-=n+this._itemPoints[a];break}s>=0&&(s+=r.topItem)}}else i>=this._footerBounds.y?s=-2:i<this._headerBounds.y&&(s=-3);if(o.itemIndex=s,t){var l=r.getCellViewOf(t),h=l&&r.getBodyView(l),u=h instanceof va&&h.layoutByCell(l);if(u)return o.layout=u,o}return o},e.prototype.mouseToIndexEx=function(t,e,i,o){if(this._layoutCount<1)return o;var r=this.grid,n=this._topIndex+this._fixedItemCount,s=this._summaryBounds.bottom,a=0;if((i-=this._contentBounds.y)<s)a=-1;else if(i>=this._bodyBounds.bottom&&i<this._footerBounds.y)a=n+this._fullItemCount;else if(i>=this._footerBounds.y)a=n+this._fullItemCount;else{a=-1,i-=s;for(var l=0;l<this._fixedItemCount;l++)if(i>=this._fixedItemPoints[l]&&i<this._fixedItemPoints[l+1]){a=l;break}if(a<0&&this._itemCount>0){for(l=0;l<this._itemCount;l++)if(i>=this._itemPoints[l]&&i<this._itemPoints[l+1]){a=l;break}a>=0&&(a+=n)}}o.itemIndex=a;var h=-1,u=this._gridBounds.x;if(e<u)h=Math.max(0,this._firstLayout-1);else if(e>=this._bodyBounds.right&&e<this._clientRect.right)h=r.visibleLayoutCount-1;else{e-=u;for(l=0;l<this._fixedLayoutCount;l++)if(e>=this._fixedLayoutPoints[l]&&e<this._fixedLayoutPoints[l+1]){h=l;break}if(h<0&&this._rightLayoutCount>0){var c=e-this._rightContentBounds.x+this._grid.fixedOptions.colBarWidth+u;for(l=0;l<this._rightLayoutCount;l++)if(c>=this._rightLayoutPoints[l]&&c<this._rightLayoutPoints[l+1]){h=l+this.rightFirstLayout;break}}if(h<0){e=e-this._fixedWidth+this._leftPos;for(l=this._firstLayout;l<=this._lastLayout;l++)if(e>=this._layoutPoints[l-this._fixedLayoutCount]&&e<this._layoutPoints[l-this._fixedLayoutCount+1]){h=l;break}}}return h>=0&&h<r.visibleLayoutCount?o.layout=r.getVisibleLayout(h):o.layout=null,o},e.prototype.cellIsVisible=function(t){var e=t.itemIndex,i=this._fixedItemCount;if(e>=i){if(e<this._topIndex+i)return!1;if(0==this._fullItemCount&&e==this._topIndex+i)return!0;if(e>=this._topIndex+i+this._fullItemCount)return!1}var o=t.layout,r=o.col;if(r>=(i=this._fixedLayoutCount)){if(r=o.col-this._fixedCellCount,this._cellPoints[r]<this._leftPos)return!1;if(this._cellPoints[r+o.cols]-this._leftPos>this._nonFixedBounds.width)return!1}return!0},e.prototype.clearFocusRequest=function(){this._focusIndex=null},e.prototype.focusIsVisible=function(){return this._focusIndex&&this.cellIsVisible(this._focusIndex)},e.prototype.makeCellVisible=function(t){this._focusIndex=t.clone()},e.prototype.isAutoRowHeights=function(){return this._autoRowHeights},e.prototype.isRowGrouped=function(){return this._rowGrouped},e.prototype.scrollToNextCell=function(){for(var t=0;t<this._cellCount;t++)if(this._cellPoints[t]>this._leftPos)return this._cellPoints[t];return this._leftPos},e.prototype.scrollToPrevCell=function(){for(var t=this._cellCount-1;t>=0;t--)if(this._cellPoints[t]<this._leftPos)return this._cellPoints[t];return this._leftPos},e.prototype.needRelayout=function(){return this._autoRowHeights&&this._fitStyleChanged&&this._fitStyle==y.EVEN_FILL},e.prototype.$_calcFixedCellPoints=function(t,e){var i=this._layoutCount=e.visibleCount,o=e._cellWidths,r=this._fixedLayoutCount=Math.min(t.colCount,i);if(this._rightLayoutCount=Math.max(0,Math.min(t.rightCount,i-r-1)),this._rightFixed=t.rightFixed,this._cellCount=0,this._fixedCellCount=0,this._rightCellCount=0,this._layouts=[],this._fixedLayoutPoints=[],this._fixedWidth=0,this._rightWidth=0,this._rightBarWidth=0,this._fixedCellPoints=[],this._fixedCellCounts=[],r>0){var n=this._layouts,s=this._fixedLayoutPoints,a=this._fixedCellPoints,l=this._fixedCellCounts,h=0,u=0;s.push(h),a.push(h),l.push(u);for(var c=0;c<r;c++){for(var d=e.getVisible(c),p=d.cols,_=0;_<p;_++)h+=o[u++],a.push(h);n.push(d),s.push(h),l.push(u)}this._fixedCellCount=this._cellCount=u,this._fixedWidth=s[r]+(this._fixedBarWidth=t.colBarWidth)}},e.prototype.$_calcCellPoints=function(t){var e=t.visibleCount-this._fixedLayoutCount-this._rightLayoutCount,i=t._cellWidths,o=this._layoutPoints=[],r=this._cellPoints=[],n=this._cellCounts=[],s=this._fixedLayoutCount,a=this._layouts;if(this._firstCell=this._lastCell=this._cellCount,this._layoutsLength=0,e>0){var l=0,h=this._cellCount;o.push(l),r.push(l),n.push(h);for(var u=0;u<e;u++){for(var c=t.getVisible(u+s),d=c.cols,p=0;p<d;p++)l+=i[h++],r.push(l);a.push(c),o.push(l),n.push(h)}this._layoutsLength=l,this._cellCount=h,this._lastCell=h-1}},e.prototype.$_calcRightCellPoints=function(t,e){var i=e._cellWidths,o=this._layoutCount,r=this._rightLayoutPoints=[],n=this._rightCellPoints=[],s=this._rightCellCounts=[],a=this._layouts;if(this._rightLayoutCount>0){var l=0,h=this._cellCount;r.push(l),n.push(l),s.push(h);for(var u=o-this._rightLayoutCount;u<o;u++){for(var c=e.getVisible(u),d=c.cols,p=0;p<d;p++)l+=i[h++],n.push(l);a.push(c),r.push(l),s.push(h)}this._rightCellCount=h-this._cellCount,this._cellCount=h,this._rightWidth=r[this._rightLayoutCount]+(this._rightBarWidth=t.rightBarWidth)}},e.prototype.$_calcScrollWidth=function(t){this._scrollWidth=t.width-this._leftContentBounds.width-this._sideContentBounds.width-this._fixedContentBounds.width-this._rightContentBounds.width},e.prototype.$_calcLeftPos=function(){var t=this._focusIndex&&this._focusIndex.layout;if(t){var e=t.root.vindex,i=this._cellPoints,o=this.grid;if(e>=this._fixedLayoutCount&&e<this.rightFirstLayout){var r=t.col-this._fixedCellCount,n=i[r],s=o.displayOptions.horzPageScroll&&"keydown"===o._eventFrom&&o._prevTop===this._topIndex;if(n<this._leftPos)s&&this._leftPos>=i[r+1]&&(n=n-(this.gridBounds.width+i[r]-i[r+1])+(this._fixedContentBounds.width+this._rightContentBounds.width)),this._leftPos=n;else{var a=i[r+t.cols]-this._leftPos-this._scrollWidth;s&&i[r]-this._leftPos>=this._scrollWidth&&(a=Math.max(i[r]-i[this.getLeftCell()],a)),a>0&&(this._leftPos=Math.min(n,this._leftPos+a))}}}this._leftPos=Math.max(0,Math.min(this._leftPos,this._layoutsLength-this._scrollWidth)),this._firstLayout=this._fixedLayoutCount,this._lastLayout=this._layoutCount>0?this._layoutCount-this._rightLayoutCount-1:-1},e.prototype.$_checkFitting=function(t,e){var i=t.fitStyle;if(i!=y.NONE){var o=this._cellPoints,r=o.length;if(r>0)return i==y.EVEN_FILL||e-o[r-1]>0?i:void 0}},e.prototype.$_fitColumns=function(t,e,i){for(var o=this._layoutsLength,r=this._layoutPoints,n=r.length,s=this._fixedLayoutCount,a=[],l=1;l<r.length;l++)a.push(r[l]-r[l-1]);if(n>0){var h=t.fitStyle,u=this._layouts;if(h==y.EVEN||h==y.EVEN_FILL)for(l=1;l<n;l++)r[l]=r[l]*i/o;else if(h==y.FILL){var c=0,d=0;for(l=0;l<n-1;l++){var p=u[l+s].fillWidth;p>0?d+=p:c+=a[l]}if(d>0){c=i-c;for(l=1;l<n;l++){var _=(w=u[l-1+s]).fillWidth;r[l]=_>0?r[l-1]+_*c/d:r[l-1]+a[l-1]}}else for(l=1;l<n;l++)r[l]=r[l]*i/o}var f=0;for(l=0;l<n-1;l++)r[l]=Math.round(r[l]);for(l=1;l<n-1;l++){var g=r[l]-r[l-1];g<2?(f=2-g,r[l]+=2-g):f>0&&g>2+f&&(r[l]-=f,f=0)}var m=this._cellPoints=[],b=e._cellWidths,v=0;m.push(v);for(l=0;l<n-1;l++){var w,C=(w=this._cellLayouts.getVisible(l+s))._cellWidth,x=r[l+1]-r[l],I=x/C,E=w.hcol,S=w.cols,O=v;w._setFitWidth(x);for(var R=0;R<S-1;R++)O+=b[E+R]*I,m.push(Math.round(O));v+=x,m.push(Math.round(v))}m[m.length-1]=r[n-1]}this._layoutsLength=r[n-1]=i},e.prototype.$_measureTopPane=function(t){this._doMeasureTopPane(t,this._topContentBounds)},e.prototype._doMeasureTopPane=function(t,e){e.height=0},e.prototype.$_measureViewHeights=function(t,e){var i;i=0,t.header.visible?(this._headerBounds=e.clone(),i=t.headerView.measure(t,e.width,e.height).height,this._headerBounds.height=i):this._headerBounds?this._headerBounds.setEmpty():this._headerBounds=new N,this._fixedHeaderBounds=this._headerBounds.clone(),this._rightHeaderBounds=this._headerBounds.clone(),this._headBounds.y=e.y,this._headBounds.height=i,e.topBy(i),i=0,t.headerSummaries.canShow?(this._summaryBounds=e.clone(),i=t.headerSummaryView.measure(t,e.width,e.height).height,t.fixedHeaderSummaryView,this._summaryBounds.height=i):this._summaryBounds?this._summaryBounds.setEmpty():this._summaryBounds=new N,this._fixedSummaryBounds=this._summaryBounds.clone(),this._rightSummaryBounds=this._summaryBounds.clone(),this._sumBounds.y=e.y,this._sumBounds.height=i,e.topBy(i),i=0,t.footers.canShow?(this._footerBounds=e.clone(),i=t.footerView.measure(t,e.width,e.height).height,this._footerBounds.height=i):this._footerBounds?this._footerBounds.setEmpty():this._footerBounds=new N,this._fixedFooterBounds=this._footerBounds.clone(),this._rightFooterBounds=this._footerBounds.clone(),this._footBounds.y=e.bottom-this._footerBounds.height,this._footBounds.height=i;var o=this._sumBounds.bottom;i=this._footBounds.y-o,this._rowBarBounds.y=o,this._rowBarBounds.height=i},e.prototype.$_sortSections=function(t){var e=[t.rowIndicator,t.stateBar,t.checkBar];return e.sort((function(t,e){var i=t.displayOrder,o=e.displayOrder;return i==o?t.staticOrder-e.staticOrder:i-o})),e},Object.defineProperty(e.prototype,"sectionObjects",{get:function(){return this._sectionObjects},enumerable:!0,configurable:!0}),e.prototype.$_measureLeftPane=function(t){this._sectionObjects=this.$_sortSections(t);var e,i=this._leftContentBounds.clone().move();this._headBounds=i.clone(),this._sumBounds=i.clone(),this._footBounds=i.clone(),e=t.rowBarContainer.measure(t,i.width,i.height),this._rowBarBounds=i.clone(),this._rowBarBounds.width=e.width,this._leftContentBounds.width=e.width,i.leftBy(e.width),this._headBounds.width=this._leftContentBounds.width,this._sumBounds.width=this._leftContentBounds.width,this._footBounds.width=this._leftContentBounds.width},e.prototype._measureSidePane=function(t){if(t.isSidePaneVisible()){var e=this._sideContentBounds.clone(),i=t.sideContentPane.measure(t,e.width,e.height);this._sideContentBounds.width=i.width}else this._sideContentBounds.width=0},e.prototype.$_measureFixedPane=function(t){var e=this._fixedContentBounds.width=this._fixedWidth,i=this._fixedContentBounds.clone().move();this._fixedHeaderBounds.x=i.x,this._fixedHeaderBounds.y=i.y,this._fixedHeaderBounds.width=i.width,i.topBy(this._fixedHeaderBounds.height),this._fixedSummaryBounds.x=i.x,this._fixedSummaryBounds.y=this._fixedHeaderBounds.bottom,this._fixedSummaryBounds.width=i.width,i.topBy(this._fixedSummaryBounds.height),e>0&&(t.fixedHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._fixedFooterBounds.x=i.x,this._fixedFooterBounds.y=i.bottom-this._fixedFooterBounds.height,this._fixedFooterBounds.width=i.width,i.bottomBy(-this._fixedFooterBounds.height),e>0&&(t.fixedFooterView._rowPoints=t.footerView._rowPoints.slice()),this._fixedBodyBounds=i},e.prototype.$_measureRightPane=function(t){var e=this._rightWidth;this._rightContentBounds.width=e;var i=this._rightContentBounds.clone();i.x=this._rightBarWidth,i.y=0,i.width-=i.x,this._rightHeaderBounds.x=i.x,this._rightHeaderBounds.y=i.y,this._rightHeaderBounds.width=i.width,i.topBy(this._rightHeaderBounds.height),this._rightSummaryBounds.x=i.x,this._rightSummaryBounds.y=this._rightHeaderBounds.bottom,this._rightSummaryBounds.width=i.width,i.topBy(this._rightSummaryBounds.height),e>0&&(t.rightHeaderSummaryView._rowPoints=t.headerSummaryView._rowPoints.slice()),this._rightFooterBounds.x=i.x,this._rightFooterBounds.y=i.bottom-this._rightFooterBounds.height,this._rightFooterBounds.width=i.width,i.bottomBy(-this._rightFooterBounds.height),e>0&&(t.rightFooterView._rowPoints=t.footerView._rowPoints.slice()),this._rightBodyBounds=i},e.prototype.$_measureContentPane=function(t){var e=this._layoutsLength;this._contentBounds.width=e;var i=this._contentBounds.clone();i.x=i.y=0,this._headerBounds&&(this._headerBounds.x=i.x,this._headerBounds.y=i.y,this._headerBounds.width=i.width,i.topBy(this._headerBounds.height)),this._summaryBounds&&(this._summaryBounds.x=i.x,this._summaryBounds.y=this._headerBounds.bottom,this._summaryBounds.width=i.width,i.topBy(this._summaryBounds.height)),this._dataBounds=i.clone(),this._footerBounds&&(this._footerBounds.x=i.x,this._footerBounds.y=i.bottom-this._footerBounds.height,this._footerBounds.width=i.width,i.bottomBy(-this._footerBounds.height)),this._bodyBounds=i},e.prototype.$_getItemHeight=function(t,e){var i=t.getItem(e).height;return isNaN(i)?this._autoRowHeights?this._minItemHeight:this._itemHeight:i},e.prototype.$_calcItemPoints=function(t){void 0===t&&(t=!0);var e=this.grid,i=e.itemSource,o=this._itemsBounds,r=0,n=i?Math.min(i.fixedCount,i.itemCount):0;if(this._fixedItemCount=0,this._fixedBarHeight=0,this._fixedHeight=0,this._fixedItemPoints=[],n>0){this._fixedItemPoints.push(r);for(var s=0;s<n&&r<o;s++){r+=this.$_getItemHeight(e,s),this._fixedItemPoints.push(r),this._fixedItemCount++}this._fixedHeight=r,r+=this._fixedBarHeight=e.fixedOptions.rowBarHeight}var a=e.itemCount-this._fixedItemCount;if(this._itemPoints=[r],this._itemCount=0,this._fullItemCount=0,a>0&&r<o){var l=this._topIndex,h=-1;this._focusIndex&&(h=this._focusIndex.itemIndex)>=this._fixedItemCount&&h<l+this._fixedItemCount&&(l=this._topIndex=h-this._fixedItemCount);for(s=l;s<a&&r<o;s++){r+=this.$_getItemHeight(e,s+this._fixedItemCount),this._itemCount++,this._itemPoints.push(r)}if(this._fullItemCount=this._itemCount-(r>o?1:0),t&&h>=this._topIndex+this._fixedItemCount+this._fullItemCount){r=this.fixedItemCount>0?this._fixedHeight+e.fixedOptions.rowBarHeight:0,this._topIndex=h-this._fixedItemCount-Math.max(0,this._fullItemCount-1),this._itemPoints=[r],this._itemCount=0,this._fullItemCount=0;var u=e.itemCount-this._fixedItemCount;for(s=this._topIndex;s<u&&r<o;s++){r+=this.$_getItemHeight(e,s+this._fixedItemCount),this._itemCount++,this._itemPoints.push(r)}this._fullItemCount=this._itemCount-(r>=o?1:0)}}else this._topIndex=0},e.prototype.$_updateScrollInfo=function(t,e,i){void 0===i&&(i=!1);var o=this._reqScrollBarWidth,r=this._reqScrollBarHeight,n=i?this._tableItemPoints:this._itemPoints,s=n[n.length-1],a=this._layoutsLength,l=e.fitStyle==y.EVEN_FILL;this._hscrolled=a>this._scrollWidth,this._vscrolled=this._topIndex>0||t.itemCount>this._itemCount+this._fixedItemCount||s>this._bodyBounds.height;var h=r>0&&this._hscrolled&&!l,u=o>0&&this._vscrolled;h!=u&&(h?o>0&&(u=s>this._bodyBounds.height-r):r>0&&!l&&(h=a>this._scrollWidth-o)),this._hscrollBar=h,this._vscrollBar=u,this._hscrolled=this._hscrolled||h,this._vscrolled=this._vscrolled||u,this._scrollBarWidth=u?o:0,this._scrollBarHeight=h?r:0,this._scrollWidth-=this._scrollBarWidth},e.prototype.$_recalcScrollInfo=function(t){this._scrollWidth+=this._scrollBarWidth,this._bodyBounds.height+=this._scrollBarHeight,this._gridBounds.height+=this._scrollBarHeight,this._clientRect.height+=this._scrollBarHeight,this.$_updateScrollInfo(t,t.displayOptions,!0),this._bodyBounds.height-=this._scrollBarHeight,this._gridBounds.height-=this._scrollBarHeight,this._clientRect.height-=this._scrollBarHeight},e.prototype.$_adjustVerticals=function(){var t=this._scrollBarHeight,e=this._itemPoints;if(t>0){this._leftContentBounds.height-=t,this._footBounds.y-=t,this._rowBarBounds.height-=t,this._sideContentBounds.height-=t,this._fixedContentBounds.height-=t,this._fixedFooterBounds.y-=t,this._fixedBodyBounds.height-=t,this._nonFixedBounds.height-=t,this._contentBounds.height-=t,this._footerBounds.y-=t,this._bodyBounds.height-=t,this._rightContentBounds.height-=t,this._rightFooterBounds.y-=t,this._rightBodyBounds.height-=t;for(var i=this._bodyBounds.height;e[e.length-2]>i;)this._itemCount--,e.pop();this._fullItemCount=this._itemCount-(e[this._itemCount]>=i?1:0);var o=this._focusIndex?this._focusIndex.itemIndex:-1;if(o>=0&&this._itemCount>this._fullItemCount&&o>=this._topIndex+this._fixedItemCount+this._fullItemCount){for(var r=this.grid,n=e[this._itemCount],s=0;n>i;)n-=e[++s];var a=r._prevTop+1!==this._topIndex;if(s>0){e.splice(0,s),this._topIndex+=s,this._itemCount-=s,this._fullItemCount-=s,n=e[0];for(var l=0;l<e.length;l++)e[l]-=n;if(n=e[e.length-1],r.itemCount<this._topIndex+this._fixedItemCount+this._itemCount)this._itemCount--;else for(;n<i&&this._topIndex+this._fixedItemCount+this._itemCount<r.itemCount;)e.push(n+=this.$_getItemHeight(r,this._topIndex+this._fixedItemCount+this._itemCount)),this._itemCount++,this._fullItemCount++;a&&(this._topIndex,this._fixedItemCount,this._fullItemCount)}}}if(this._dataBounds.height=e[e.length-1],this._fullItemCount==this._itemCount){var h=e[e.length-1];this._rowBarBounds.height=h}},e.prototype.$_adjustHorizontals=function(t){this._rightContentBounds.x-=this._scrollBarWidth,this.$_calcLeftPos();var e=this._cellPoints,i=e.length,o=this._leftPos,r=o+this._nonFixedBounds.width;this._startCell=this._endCell=this._firstCell;for(var n=0;n<i;n++)if(e[n]>o){this._startCell+=n-1;break}for(n=i-2;n>=0;n--)if(e[n]<r){this._endCell+=n;break}},e.prototype.$_calcTableRowPoints=function(){var t=this._trs,e=this._items,i=this._fixedItemCount,o=this._itemCount+i,r=this._fixedTableRowPoints=[],n=this._tableRowPoints=[],s=this._dataRowHeights,a=0;if(this._fixedTableRowCount=this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,i>0){for(var l=this._fixedItemPoints;a<i;a++){var h=this._fixedItemPoints[a];if(r.push(h),this._fixedTableRowCount++,e[a].isData)for(var u=Math.floor((this._fixedItemPoints[a+1]-h)/t),c=Math.round(this._fixedItemPoints[a+1]-h)/t,d=1;d<t;d++)r.push(h+=s[d-1]?s[d-1]:d%2?u:c),this._fixedTableRowCount++}r.push(this._fixedDataHeight=this._fixedItemPoints[i])}if(this.itemCount>0){for(l=this._itemPoints;a<o;a++){h=l[a-i],u=l[a-i+1]-h;if(n.push(h),this._tableRowCount++,e[a].isData){var p=Math.floor(u/t);for(c=Math.round(u/t),d=1;d<t;d++)n.push(h+=s[d-1]?s[d-1]:d%2?p:c),this._tableRowCount++}}n.push(this._dataHeight=l[this._itemCount]),this._dataHeight+=this._fixedDataHeight}},e.prototype._doMeasure=function(t,e,i){var o=this._grid,r=o.displayOptions,n=o.fixedOptions,s=t.clone();this._refreshMode=r.refreshMode,this._autoRowHeights=r.rowHeight<0,this._items=[],this._trs=this._cellLayouts.dataRows,this._rowGrouped=this.rowGrouped||this.mergedRowGrouped,this._hscrolled=this._vscrolled=!1,this._hscrollBar=this._vscrollBar=!1,this._reqScrollBarWidth=e,this._reqScrollBarHeight=i,this._minRowHeight=r.minTableRowHeight,this._maxHeight=r.maxRowHeight,this._minItemHeight=Math.max(this._minRowHeight*this._trs,r.minRowHeight),1==this._trs&&(this._minRowHeight=this.minItemHeight),o.heightMeasurer.measure(o),this.$_calcFixedCellPoints(n,this._cellLayouts),this.$_calcCellPoints(this._cellLayouts),this.$_calcRightCellPoints(n,this._cellLayouts),this._topContentBounds=s.clone(),this.$_measureTopPane(o),s.topBy(this.topPanelVisible?this._topContentBounds.height:0),this._leftContentBounds=s.clone(),this.$_measureLeftPane(o),s.leftBy(this._leftContentBounds.width),this._sideContentBounds=s.clone(),this._measureSidePane(o),s.leftBy(this._sideContentBounds.width),this.$_measureViewHeights(o,s.clone().move()),this._fixedContentBounds=s.clone(),this.$_measureFixedPane(o),s.leftBy(this._fixedContentBounds.width),this._rightContentBounds=s.clone(),this.$_measureRightPane(o),this._rightContentBounds.x=s.right-this._rightContentBounds.width,s.width-=this._rightContentBounds.width,this._contentBounds=s.clone(),this.$_measureContentPane(o),this._clientRect=t.clone(),this._nonFixedBounds=new N(this._fixedContentBounds.right,this._fixedContentBounds.y,t.width-this._fixedContentBounds.right-this.rightContentBounds.width,this._fixedContentBounds.height),this._itemHeight=this._calcDefaultRowHeight(o),this._itemsBounds=t.height-this._topContentBounds.height-this._headerBounds.height-this._summaryBounds.height-this._footBounds.height+1,this.$_calcItemPoints(),this.$_calcScrollWidth(t),this.$_updateScrollInfo(o,r);var a=this._fitStyle;(this._fitStyle=this.$_checkFitting(r,this._scrollWidth))?(this.$_fitColumns(r,this.cellLayouts,this.scrollWidth),this._contentBounds.width=this._layoutsLength):o._activeCellLayout.$_clearFitWidths(),(this._fitStyleChanged=this._fitStyle!=a)&&o.clearRowHeights(!1),this.$_adjustVerticals(),this.$_adjustHorizontals(t),this._gridBounds=new N(this._fixedContentBounds.x,this._fixedContentBounds.y,t.right-this._fixedContentBounds.x-this._scrollBarWidth,this._footerBounds.y-0),this._clientRect.width-=this._scrollBarWidth,this._clientRect.height-=this._scrollBarHeight,this._nonFixedBounds.width-=this._scrollBarWidth,this._topContentBounds.width-=this._scrollBarWidth},e.prototype.$_layoutTopPane=function(t,e){var i=this._topContentBounds;this.topPanelVisible?e.setRect(i):e.setBounds(-10,-10,1,1),this._doLayoutTopPane(t,e)},e.prototype._doLayoutTopPane=function(t,e){},e.prototype.$_layoutLeftPane=function(t,e){var i,o=this._leftContentBounds;(e.visible=!o.isEmpty)&&(e.setRect(o),(i=t.headView).visible=t.header.visible,((i=t.sumView).visible=t.headerSummaries.visible)&&(i.setRect(this._sumBounds),i.layoutContent(this)),((i=t.footView).visible=t.footers.visible)&&(i.setRect(this._footBounds),i.layoutContent(this)),t.rowBarContainer.visible=t.rowIndicator.visible||t.stateBar.visible||t.checkBar.visible)},e.prototype._layoutSidePane=function(t,e){var i=this._sideContentBounds;e.setRect(i),(e.visible=!i.isEmpty)&&e.layoutContent(this,i.width,i.height)},e.prototype._prepareItems=function(){for(var t=this._topIndex+this._fixedItemCount,e=0;e<this._fixedItemCount;e++){var i=this._rs.getItem(e);this._items.push(i)}for(e=0;e<this._itemCount;e++){i=this._rs.getItem(e+t);this._items.push(i)}},e.prototype.$_layoutFixedPane=function(t,e){var i,o=this._fixedContentBounds;(e.visible=!o.isEmpty)?(e.setRect(o),((i=t.fixedHeaderView).visible=t.header.visible)&&(i.setRect(this._fixedHeaderBounds),i.layoutContent(this)),((i=t.fixedHeaderSummaryView).visible=t.headerSummaries.canShow)&&(i.setRect(this._fixedSummaryBounds),i.layoutContent(this)),((i=t.fixedFooterView).visible=t.footers.canShow)&&(i.setRect(this._fixedFooterBounds),i.layoutContent(this)),(i=t.fixedBodyView).visible=!0,this._offsetBody||(this._offsetBody=i),e.layoutContent(this,o.width,o.height)):(t.fixedHeaderView.visible=!1,t.fixedHeaderSummaryView.visible=!1,t.fixedFooterView.visible=!1,t.fixedBodyView.visible=!1)},e.prototype.$_layoutRightPane=function(t,e){var i,o=this._rightContentBounds;(e.visible=!o.isEmpty)?(this._rightFixed||this._hscrolled||(o.x=this._contentBounds.right),e.setRect(o),((i=t.rightHeaderView).visible=t.header.visible)&&(i.setRect(this._rightHeaderBounds),i.layoutContent(this)),((i=t.rightHeaderSummaryView).visible=t.headerSummaries.canShow)&&(i.setRect(this._rightSummaryBounds),i.layoutContent(this)),((i=t.rightFooterView).visible=t.footers.canShow)&&(i.setRect(this._rightFooterBounds),i.layoutContent(this)),(i=t.rightBodyView).visible=!0,this._offsetBody||(this._offsetBody=i),e.layoutContent(this,o.width,o.height)):(t.rightHeaderView.visible=!1,t.rightHeaderSummaryView.visible=!1,t.rightFooterView.visible=!1,t.rightBodyView.visible=!1)},e.prototype.$_layoutContentPane=function(t,e){var i,o=this._contentBounds;(e.visible=!o.isEmpty)?(o.x-=this._leftPos,e.setRect(o),((i=t.headerView).visible=t.header.visible)&&(this._headerBounds.width=o.width,i.setRect(this._headerBounds),i.layoutContent(this)),((i=t.headerSummaryView).visible=t.headerSummaries.canShow)&&(this._summaryBounds.width=o.width,i.setRect(this._summaryBounds),i.layoutContent(this)),((i=t.footerView).visible=t.footers.canShow)&&(this._footerBounds.width=o.width,i.setRect(this._footerBounds),i.layoutContent(this)),(i=t.bodyView).visible=!0,this._bodyBounds.width=o.width,this._offsetBody||(this._offsetBody=i),e.layoutContent(this,o.width,o.height)):t.headerView.visible=t.headerSummaryView.visible=t.footerView.visible=t.bodyView.visible=!1},e.prototype.$_layoutWatingPane=function(t,e){var i=t.bounds.clone();e.setRect(i),e.layoutContent(this,i.width,i.height)},e.prototype._doLayout=function(t,e){var i;this._prepareItems(),this.$_calcTableRowPoints(),i=t._topContentPane,this.$_layoutTopPane(t,i),i=t._leftContentPane,this.$_layoutLeftPane(t,i);var o=Date.now();i=t._fixedContentPane,this.$_layoutFixedPane(t,i),i=t._rightContentPane,this.$_layoutRightPane(t,i),i=t._contentPane,this.$_layoutContentPane(t,i),lt.trace("LAYOUT CONTENTS: "+(Date.now()-o))},e.prototype.$_adjustHeader=function(t,e,i,o){var r=t.fixedHeaderView,n=t.rightHeaderView,s=t.headerView,a=t.header.height,l=s.height,h=0,u=!1;if(i&&(u=r.$_checkHeight()),!u&&o&&(u=n.$_checkHeight()),!u&&e&&(u=s.$_checkHeight()),u){var c=[],d=0;i&&(r.$_getHeights(c),a>0?r.$_distributeHeights(a,c):d=Math.max(d,r.$_adjustHeights(c))),o&&(n.$_getHeights(c),a>0?n.$_distributeHeights(a,c):d=Math.max(d,n.$_adjustHeights(c))),e&&(s.$_getHeights(c),a>0?s.$_distributeHeights(a,c):d=Math.max(d,s.$_adjustHeights(c))),a<0&&(h+=d-l,this._headBounds.height=d,i&&this._fixedHeaderBounds.height!=d&&(this._fixedHeaderBounds.height=d,r.setRect(this._fixedHeaderBounds),r.$_adjustHeights(c)),o&&this._rightHeaderBounds.height!=d&&(this._rightHeaderBounds.height=d,n.setRect(this._rightHeaderBounds),n.$_adjustHeights(c)),e&&this._headerBounds.height!=d&&(this._headerBounds.height=d,s.setRect(this._headerBounds),s.$_adjustHeights(c)))}return h},e.prototype._adjustLayout=function(t,e){var i,o=this._autoRowHeights,r=t._fixedContentPane,n=t._rightContentPane,s=t._contentPane,a=t.fixedHeaderView,l=t.rightHeaderView,h=t.headerView,u=t.headView.visible,c=r.visible,d=n.visible,p=s.visible,_=0,f=0,g=this.$_adjustHeader(t,p,c&&h.visible&&a.visible,d&&l.visible);if(0!=g&&(this._fixedSummaryBounds.y=this._rightSummaryBounds.y=this.summaryBounds.y=this._sumBounds.y+=g),t.headerSummaries.canShow&&0!=g&&(c&&(t.fixedHeaderSummaryView.y=this._fixedSummaryBounds.y),d&&(t.rightHeaderSummaryView.y=this._rightSummaryBounds.y),p&&(t.headerSummaryView.y=this._summaryBounds.y),u&&(t.sumView.y=this._sumBounds.y)),e.topBy(this._headBounds.height+this._sumBounds.height),0!=g&&(f=this._sumBounds.bottom,_=Math.min(e.height,this._rowBarBounds.height),this._fixedBodyBounds.y=this.bodyBounds.y=this._rightBodyBounds.y=f,this._fixedBodyBounds.height=this._bodyBounds.height=this._rightBodyBounds.height=_),(i=t.fixedBodyView).visible&&i.setRect(this._fixedBodyBounds),(i=t.bodyView).visible&&i.setRect(this._bodyBounds),(i=t.rightBodyView).visible&&i.setRect(this._rightBodyBounds),this.$_layoutBodyRows(t,c,p,d,this._bodyBounds.height),this.$_adjustTableRowHeights(),o&&this.$_recalcScrollInfo(t),this._topIndex>0){var y=o?this._minItemHeight:this._itemHeight;if(this._contentBounds.y+this._dataBounds.bottom+y<=this._gridBounds.bottom&&(o?this.$_fillBottomAuto(t,c,p,d,this._bodyBounds.height):this.$_fillBottomFixed(t,c,p,d,this._bodyBounds.height)),0==this._topIndex){var m=this._vscrollBar;this.$_recalcScrollInfo(t),this._vscrollBar!=m&&this._fitStyle&&(this.$_layoutBodyRows(t,c,p,d,this._bodyBounds.height,!1),this.$_adjustTableRowHeights())}}t.fixedBodyView.visible&&t.fixedBodyView.$_resetCellHeights2(this,o),t.bodyView.visible&&t.bodyView.$_resetCellHeights2(this,o),t.rightBodyView.visible&&t.rightBodyView.$_resetCellHeights2(this,o);var b=this._tableItemPoints;(this._dataBounds.height=b[b.length-1],f=this._sumBounds.bottom,_=Math.min(e.height,this._dataBounds.height),this._rowBarBounds.y=f,this._rowBarBounds.height=_,c)&&t._fixedContentPane.layoutBars(this,this._fixedContentBounds.width,this._fixedContentBounds.height);if(d){this._fixedContentBounds;t._rightContentPane.layoutBars(this,this._rightContentBounds.width,this._rightContentBounds.height)}(i=t.headView).visible&&(i.setRect(this._headBounds),i.layoutContent(this)),t.rowBarContainer.setRect(this._rowBarBounds),t.rowBarContainer.layoutContent(this)},e.prototype.$_layoutBodyRows=function(t,e,i,o,r,n){void 0===n&&(n=!0);var s,a=e&&this._fixedCellCount>0?t.fixedBodyView:null,l=i&&this.cellCount>0?t.bodyView:null,h=(o&&this._rightCellCount)>0?t.rightBodyView:null,u=this._dataRowHeights;if(n&&this.$_checkColumnMerging(t),a&&a._doPrepareContent(this),h&&h._doPrepareContent(this),l&&l._doPrepareContent(this),s=l||a||h){var c,d,p,_,f,g=t.itemSource,y=g?Math.min(g.fixedCount,g.itemCount):0,m=this._autoRowHeights,b={lm:this,grid:t,topIndex:this._topIndex,fixedItemCount:y,mergeFixed:t.fixedOptions.mergeRows,mergedRowGrouped:this.mergedRowGrouped,rowGroupFields:this.rowGroupFields},v=l&&[],w=a&&[],C=h&&[],x=this._minRowHeight,I=s._trs,E=this._maxHeight>0?Math.min(Math.max(this._maxHeight,x*I),r):r,S=0,O=0,R=0;this._fixedItemCount=0,this._itemCount=0,this._fixedHeight=0;var D=[],k=[],P=[];if(this._fixedTableRowCount=0,this._tableRowCount=0,this._fixedDataHeight=this._dataHeight=0,this._items=[],y>0){D.push(O),k.push(R);for(var T=function(t){f=g.getItem(t),M._items.push(f);var e=I;if(a&&a.layoutRow(b,w,t,S,f),l&&l.layoutRow(b,v,t,S,f),h&&h.layoutRow(b,C,t,S,f),m){if(d=f.height,isNaN(d)){p=[];for(var i=0;i<e;i++)p[i]=0;f.heights=p,[a,l,h].forEach((function(t){for(var i=t&&t._tbody.children,o=0;i&&o<e;o++)p[o]=Math.round(Math.max(p[o],x,i[S+o].offsetHeight))}))}else p=f.heights=f.heights||[d];d=0;var o=p.reduce((function(t,e){return t+e}),0)+3;if(o>E){var r=E/o;o=E;for(var n=0;n<p.length-1;n++)o-=p[n]=Math.max(x,Math.floor(p[n]*r));p[p.length-1]=Math.max(x,o)}for(i=0;i<e;i++)d+=p[i],k.push(R+=p[i]);g.setRowHeight(f,d,!1)}else{c=R,d=M._fixedItemPoints[t+1]-M._fixedItemPoints[t],_=Math.floor(d/e);var s=Math.round(d/e);for(i=0;i<e-1;i++)k.push(R+=u[i]?u[i]:i%2?s:_);k.push(R=c+d)}M._fixedTableRowCount+=e,O+=d,D.push(O),M._fixedItemCount++,M._fixedDataHeight=O,S+=e},M=this,L=0;L<y&&O<r;L++)T(L);this._fixedHeight=O,O<r&&(d=0,a&&(d=a.layoutFixedBar(this,S)),l&&(d=l.layoutFixedBar(this,S)),h&&(d=h.layoutFixedBar(this,S)),S++,O+=d,R+=d)}var F=t.itemCount-this._fixedItemCount,N=[O];if(P.push(O),this._itemCount=0,this._fullItemCount=0,F>0&&O<r){var V=this._topIndex,B=-1;this._focusIndex&&(B=this._focusIndex.itemIndex)>=this._fixedItemCount&&B<V+this._fixedItemCount&&(V=this._topIndex=B-this._fixedItemCount);var $=function(t){f=g.getItem(t+y),A._items.push(f);var e=f.isData?I:1,i=A._fixedItemCount+t-V;if(a&&a.layoutRow(b,w,i,S,f),l&&l.layoutRow(b,v,i,S,f),h&&h.layoutRow(b,C,i,S,f),f.isData)if(m){if(d=f.height,isNaN(d)){f.heights=p=[];for(var o=0;o<e;o++)p[o]=0;[a,l,h].forEach((function(t){for(var i=t&&t._tbody.children,o=0;i&&o<e;o++)p[o]=Math.round(Math.max(p[o],x,i[S+o].offsetHeight))}))}else p=f.heights=f.heights||[d];d=0;var r=p.reduce((function(t,e){return t+e}),0)+3;if(r>E){var n=E/r;r=E;for(var s=0;s<p.length-1;s++)r-=p[s]=Math.max(x,Math.floor(p[s]*n));p[p.length-1]=Math.max(x,r)}for(o=0;o<e;o++)d+=p[o],P.push(R+=p[o]);g.setRowHeight(f,d,!1)}else{c=R,d=A._itemPoints[t-V+1]-A._itemPoints[t-V],_=Math.floor(d/e);var D=Math.round(d/e);for(o=0;o<e-1;o++)P.push(R+=u[o]?u[o]:o%2?D:_);P.push(R=c+d)}else d=A._itemPoints[t-V+1]-A._itemPoints[t-V],P.push(R+=d);A._tableRowCount+=e,O+=d,N.push(O),A._itemCount++,A._dataHeight=O,S+=e},A=this;for(L=V;L<F&&O<r;L++)$(L);this._fullItemCount=this._itemCount-(O>r?1:0),m&&(a&&a.$_resetHeights(k,P),l&&l.$_resetHeights(k,P),h&&h.$_resetHeights(k,P)),lt.ieOld&&(a&&a.$_resetCellStyleHeights(k,P),l&&l.$_resetCellStyleHeights(k,P),h&&h.$_resetCellStyleHeights(k,P))}this._fixedItemPoints=D,this._itemPoints=N,this._fixedTableRowPoints=k,this._tableRowPoints=P,this._dataBounds.height=N[N.length-1];var j=this._items.length=this.fixedItemCount+this._itemCount;e&&a.cleanRows(j,S),i&&l.cleanRows(j,S),o&&h.cleanRows(j,S)}},e.prototype.$_adjustTableRowHeights=function(){if(this.fixedItemCount+this._itemCount!=0){var t=this._items,e=this._trs;if(this._offsetBody&&(lt.isChromium||lt.isSafari)){var i=this._offsetBody._tbody.rows,o=i[0];if(isNaN(this._zoom)){var r=Math.round(1e3*o.offsetHeight)/1e3,n=Math.round(1e3*o.getBoundingClientRect().height)/1e3;this._zoom=r!=n?n/r:1}if(!isNaN(this._zoom)&&1!=this._zoom){var s=1!=this._trs,a=this._fixedTableRowPoints,l=this._tableRowPoints,h=s?null:a.slice(),u=s?null:l.slice(),c=0,d=0,p=0,_=0;if(a[0]=0,this._fixedItemCount>0){_=l[0]-a[a.length-1];for(var f=0,g=this._fixedItemCount*e;f<g;f++,d++)a[f+1]=p+=s?i[d].getBoundingClientRect().height:(h[f+1]-h[f])*this._zoom;d++,c=this._fixedItemCount}var y=0;l[0]=p+=_;for(f=0,g=this._itemCount;f<g;f++,c++)if(t[c].isData)for(var m=0;m<e;m++)l[y+1]=p+=s?i[d++].getBoundingClientRect().height:(u[y+1]-u[y])*this._zoom,y++;else l[y+1]=p+=s?i[d++].getBoundingClientRect().height:(u[y+1]-u[y])*this._zoom,y++}}var b=this._fixedTableRowPoints,v=this._fixedTableItemPoints=[0],w=0;for(f=1,g=this._fixedItemCount;f<=g;f++,w++)v.push(b[f*e]);b=this._tableRowPoints,v=this._tableItemPoints=[b[0]];for(f=0,d=0,g=this._itemCount;f<g;f++,w++)t[w].isData?v.push(b[d+=e]):v.push(b[++d])}else this._tableItemPoints=this._tableRowPoints.slice()},e.prototype.$_fillBottomFixed=function(t,e,i,o,r){for(var n=this._contentBounds.y+this._dataBounds.bottom,s=this._topIndex,a=0;(n+=this.$_getItemHeight(this.grid,s--))<this._bodyBounds.height&&s>0;)a++;this._topIndex=Math.max(0,this._topIndex-a),this.$_calcItemPoints(),this._prepareItems(),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,r),this.$_adjustTableRowHeights()},e.prototype.$_fillBottomAuto=function(t,e,i,o,r){for(;this._topIndex>0&&this._gridBounds.bottom-this._contentBounds.y-this._dataBounds.bottom>this._minItemHeight;){var n=this._tableItemPoints,s=n[1]-n[0];if(this._topIndex--,this.$_calcItemPoints(!1),this._prepareItems(),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,r),this.$_adjustTableRowHeights(),s+(n=this._tableItemPoints)[n.length-1]+this._contentBounds.y+this._dataBounds.y>this._gridBounds.bottom){this._topIndex++,this.$_calcItemPoints(),this._prepareItems(),this.$_calcTableRowPoints(),this.$_layoutBodyRows(t,e,i,o,r),this.$_adjustTableRowHeights();break}}},e.prototype.$_prepareColumnMerges=function(t,e,i,o){for(var r=this._fixedItemCount,n=this._itemCount,s=!1,a=0,l=t.length;a<l;a++){var h=t[a],u=h&&h.layout;if(u&&u.canMerge())(c=u.merges)||((c=new nn(u)).clear(),c.initialize(Xr.INIT_COUNT)),c.refreshRooms(e,i,o),c.prepareCells(r,n),c.refreshCells(r,this.topIndex),h.layout.$_setMerged(!0),s=!0}var c,d=this.grid.checkBar;d.canMerge()?((c=d.merges)||((c=new Cs(d)).clear(),c.initialize(Xr.INIT_COUNT)),c.refreshRooms(e,i,o),c.prepareCells(r,n),c.refreshCells(r,this.topIndex),d._merged=!0):d._merged=!1;return s},e.prototype.$_checkColumnMerging=function(t,e){void 0===e&&(e=!1);var i=t.fixedOptions,o=i.rowCount,r=this._contentBounds.height/this._minItemHeight-o,n=this._topIndex,s=o>0&&i.mergeRows,a=e?o:o+n,l=e?t.itemCount-1:Math.min(t.itemCount-1,o+n+r-1),h=t.getHorzColumns();this._columnMerged=this.$_prepareColumnMerges(h,a,l,s)},e}(ft),Ra=function(t){function e(e){var i=t.call(this,e)||this;return i.summaryIndex=0,i.rendererClass="",i.style=new an,i.html=void 0,i.text=e[lt.TextProp],i}return o(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this),this.layout=null},e.prototype.span=function(){this.spanned=!0,this.clear(!1)},e.prototype.clear=function(e){t.prototype.clear.call(this,e);var i=this.cell.firstElementChild;return this.className&&(this.cell.className=this.className=""),this.rendererClass&&(i.className=this.rendererClass=""),this.text&&(i[lt.TextProp]=this.text=""),this.html&&(i.innerHTML=this.html=""),this},e.prototype.refreshFormatters=function(t){var e;this.textFormatter=null,this.numberFormatter=null,this.datetimeWriter=null,this.booleanFormatter=null,(e=t.textFormat)&&(this.textFormatter&&this.textFormatter.format==e||(this.textFormatter=Gr.getFormatter(e))),(e=t.numberFormat)&&(this.numberFormatter&&this.numberFormatter.format==e||(this.numberFormatter=Se.getFormatter(e))),(e=t.datetimeFormat)&&(this.datetimeWriter&&this.datetimeWriter.format==e||(this.datetimeWriter=xe.getFormatter(e))),(e=t.booleanFormat)&&(this.booleanFormatter&&this.booleanFormatter.format==e||(this.booleanFormatter=Ie.getFormatter(e))),this.prefix=t.prefix,this.suffix=t.suffix},e.prototype.setText=function(t){t!==this.text&&(this.cell.firstElementChild[lt.TextProp]=(this.text=t)||"")},e.prototype.setHtml=function(t){t!==this.html&&(this.cell.firstElementChild.innerHTML=(this.html=t)||"")},e.prototype.setClassName=function(t){return t!=this.className&&(this.cell.className=this.className=t,!0)},e.prototype.setRendererClassName=function(t){t!=this.rendererClass&&(this.cell.firstElementChild.className=this.rendererClass=t)},e}(ma),Da=function(t){function e(e,i,o){var r=t.call(this,e,i,o)||this;return r._rowPoints=[],r._cells=[],r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.tableCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var r=i[o];if(r&&r.cell===t)return r}return null},e.prototype.layoutByCell=function(t){var e=this.tableCellByCell(t);return e&&e.layout},e.prototype.columnByCell=function(t){var e=this.layoutByCell(t);return e&&e._columnObj},e.prototype._getCellCount=function(t){return t.cellCount-t.fixedCellCount-t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getCellWidth(e)},e.prototype._doDrawCell=function(t,e,i){},e.prototype._doRender=function(t){},e.prototype._getFirstCell=function(t){return t._firstCell},e.prototype._getLastCell=function(t){return t._lastCell},e.prototype._getStartCell=function(t){return t.getStartCell()},e.prototype._getEndCell=function(t){return t.getEndCell()},e.prototype._prepareCellContent=function(t,e){return nt(t).createElement("div")},e.prototype._doMeasure=function(t,e,i){for(var o=t.layoutManager,r=this._getSummaryRows(o),n=this._getCollection(),s=this._getSummaryHeight(t.heightMeasurer),a=0,l=this._rowPoints=[a],h=0,u=t.layoutManager.getDataRowHeights(r),c=u.reduce((function(t,e){return t+e}),0),d=0,p=n.visibleCount;d<p;d++){var _=n.getVisible(d),f=Math.max(c,_.height);f<=0&&(f=s*r),f=Math.max(_.minHeight,f);for(var g=Math.floor(f/r),y=0,m=0;m<r-1;m++)u[m]?(a+=Math.round(u[m]*(f/c)),l.push(a),y+=Math.round(u[m]*(f/c))):(a+=g,l.push(a),y+=g);a+=f-y,l.push(a),h+=f}return As.create(e,h)},e.prototype._doPrepareTableExtents=function(t){},e.prototype._doLayoutContent=function(t){var e=t.grid,i=this._getCollection(),o=this._getSummaryCount(t),r=t.cellLayouts._dataCells,n=r.length,s=this._getFirstCell(t),a=this._getStartCell(t)-s,l=this._getEndCell(t)-s;this._refreshCells(t,o,r,this._tbody),this.$_refreshSpans(t,n*o);for(var h=0;h<o;h++)for(var u=i.getVisible(h),c=0;c<n;c++){var d=this._cells[h*n+c],p=this._getTableRow(t,h*n+c);lt.setClassName(p,u.styleName||"");for(var _=a;_<=l;_++){var f=d[_];if(f.visible){var g=f.layout;if(g.isProxy)f.setText(""),f.setClassName(u.getCellStyleName());else if(g instanceof On)f.setText(""),f.setClassName(u.getCellStyleName());else{var y=u.getCell(g);this._updateCell(e,u,y,f)}}}}},e.prototype._updateCell=function(t,e,i,o){var r=i,n=r.getSummary(),s=e.getCellStyle(i,o.style.clear());if(o.setClassName(s.styleName),o.setRendererClassName(this._getRendererStyle()),o.refreshFormatters(s),n){e.getCellFormatters(n,o);var a=r.getTemplate(o);void 0===a?o.setText(r.getDisplayText(o)):o.setHtml(a)}else o.setText("")},e.prototype._getTableRowHeight=function(t,e){return this._rowPoints[e+1]-this._rowPoints[e]},e.prototype._refreshCells=function(t,e,i,o){for(var r=this._cells,n=o.children,s=n.length,a=i.length,l=this._getFirstCell(t),h=this._getLastCell(t)-l+1,u=r.length;u<s;u++)r.push([]);u=0;for(var c=0;u<e&&c<s;u++)for(var d=0;d<a;d++){for(var p=r[c],_=n[c].children,f=i[d],g=0;g<h;g++){var y=f[g+l],m=p[g];m?m.cell!==_[g]||m.layout!=y&&(m.layout=y,m.clear(!0)):(m=p[g]=new Ra(_[g])).layout=y,m.spanned=!1,m.summaryIndex=u}c++;for(g=h;g<p.length;g++)p[g].dispose();p.length=h}for(c=s;c<r.length;c++){var b=r[c];for(g=0;g<b.length;g++)b[g].dispose(),b[g]=null}r.length=s},e.prototype.$_refreshSpans=function(t,e){for(var i=this._getFirstCell(t),o=this._getFirstCell(t)-i,r=this._getLastCell(t)-i,n=t.cellLayouts._dataCells.length,s=0;s<e;s++)for(var a=this._cells[s],l=a.length,h=o;h<=r;h++){var u=a[h],c=u.layout,d=c.parent,p=d&&d.vertical;if(u.spanned);else if(c.isProxy)u.clear(!1);else{var _=0,f=0,g=this._getSpanOf(c,u.summaryIndex)-1,y=this._getUserSpanOf(c,u.summaryIndex);if(y){var m=y.footerCount||0,b=m>0?m*e:y.rowspan||1,v=y.colspan||1;u.set(v,b,!0);for(var w=0;w<b;w++)for(var C=0;C<v;C++){var x=this._cells[w+s]&&this._cells[w+s][C+h];x&&x!==u&&x.span()}}if(!y&&g>0){var I=0,E=c.vindex+1;if(p)for(;I++<g&&I<n;){if(!(S=d.getVisible(E++)))break;f+=S._dspan,this._cells[s+I][h].span()}else for(;I++<g&&h-o+I<l&&E<d.visibleCount;){var S;if(!(S=d.getVisible(E++)))break;_+=S._cspan,a[h+I].span()}}c.isNull&&u.clear(!0),!y&&u.set(c._cspan+_,c._dspan+f,!0)}}},e.prototype._doPrepareTableRow=function(e,i,o,r){t.prototype._doPrepareTableRow.call(this,e,i,o,r)},e}(Ys),ka=function(t){function e(e,i){return t.call(this,e,i,"footerView")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-footer"},e.prototype._getRendererStyle=function(){return"rg-footer-renderer"},e.prototype._getSummaryRows=function(t){return t.footerRows},e.prototype._getCollection=function(){return this.model},e.prototype._getSummaryHeight=function(t){return t.footerHeight},e.prototype._getSummaryCount=function(t){return t.footerCount},e.prototype._getSpanOf=function(t,e){return t.getFooterSpan(e)},e.prototype._getUserSpanOf=function(t,e){return t.getFooterUserSpan(e)},e.prototype._getTableRowCount=function(t){return t.footerRows*t.footerCount},e.prototype._getSummaryItem=function(t,e){return t.firstColumn.footers.get(e)},e}(Da),Pa=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-footer"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e}(ka),Ta=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-footer"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(ka),Ma=function(t,e){return"object"==typeof t&&Object.prototype.toString.call(t).indexOf(e)>=0},La=function(t){function e(e,i){var o=t.call(this)||this;return o._active=!1,o._completed=!1,o._dragging=!1,o._currentX=0,o._currentY=0,o._container=e,o._name=i,o}return o(e,t),Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragging",{get:function(){return this._dragging},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){return this._completed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.activate=function(){this._active||(this._doActivate(),this._active=!0)},e.prototype.deactivate=function(){this._active&&(this.cancel(),this._doDeactivate(),this._active=!1)},e.prototype.start=function(t,e,i,o){return void 0===o&&(o=!1),this.cancel(),!(!this._active||!this._doStart(t,e,i,o))&&(this._currentX=this._startX=e,this._currentY=this._startY=i,this._dragging=!0,this._completed=!1,this._showFeedback(e,i),!0)},e.prototype.drag=function(t,e,i){return!(!this._dragging||(this._currentX=e,this._currentY=i,!this._doDrag(t,e,i)))&&(this._moveFeedback(e,i),!0)},e.prototype.cancel=function(){try{if(this._dragging)try{this._dragging=!1,this._doCanceled(this._currentX,this._currentY)}finally{this._doEnded()}}finally{this._hideFeedback()}},e.prototype.drop=function(t,e,i){try{if(this._dragging)try{this._currentX=e,this._currentY=i,this._dragging=!1,this._canAccept(t,e,i)?(this._doCompleted(t,e,i),this._completed=!0):this._doCanceled(e,i)}finally{this._doEnded()}}finally{this._hideFeedback()}},e.prototype.getRequest=function(){return null},e.prototype.getNextRequest=function(t,e){return null},Object.defineProperty(e.prototype,"currentX",{get:function(){return this._currentX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentY",{get:function(){return this._currentY},enumerable:!0,configurable:!0}),e.prototype._showFeedback=function(t,e){},e.prototype._moveFeedback=function(t,e){},e.prototype._hideFeedback=function(){},e.prototype._doActivate=function(){},e.prototype._doDeactivate=function(){},e.prototype._doStart=function(t,e,i,o){return!0},e.prototype._doDrag=function(t,e,i){return!0},e.prototype._doCanceled=function(t,e){},e.prototype._canAccept=function(t,e,i){return!0},e.prototype._doCompleted=function(t,e,i){},e.prototype._doEnded=function(){},e}(ft),Fa=function(t){function e(e,i){var o=t.call(this)||this;return o._clickX=0,o._clickY=0,o._mouseX=0,o._mouseY=0,o._owner=e,o._name=i,o._previous=null,o}return o(e,t),e.prototype._doDispose=function(){this._dragTracker=null,this._previous=null,this._owner=null,this._mouseEventTarget=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"previous",{get:function(){return this._previous},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragTracker",{get:function(){return this._dragTracker},set:function(t){t!==this._dragTracker&&(this._dragTracker&&this._dragTracker.deactivate(),this._dragTracker=t,this._dragTracker&&this._dragTracker.activate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragging",{get:function(){return this._dragTracker&&this._dragTracker.dragging},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchManager",{get:function(){return this._touchManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseX",{get:function(){return this._mouseX},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mouseY",{get:function(){return this._mouseY},enumerable:!0,configurable:!0}),e.prototype.findElementAt=function(t,e,i){return this._owner.findElementAt(t,e,i)},e.prototype.activate=function(t){this._doActivated(t)},e.prototype.deactivate=function(){this._doDeactivated()},e.prototype.keyDown=function(t){return this._doKeyDown(t)},e.prototype.keyUp=function(t){return this._doKeyUp(t)},e.prototype.keyPress=function(t){return this._doKeyPress(t)},e.prototype.mouseDown=function(t){var e=this._mouseX=this._clickX=t.mouseX,i=this._mouseY=this._clickY=t.mouseY;this.dragging&&this._stopDragTracker(e,i,!1),this._doMouseDown(t)},e.prototype.dragFrom=function(t,e){},e.prototype.dropFrom=function(t,e){},e.prototype.cancelFrom=function(t){},e.prototype.mouseMove=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY,o=this.dragTracker,r="mousemove"===t.type?t.buttons:"touchmove"===t.type?1:void 0;if(o){if(o.dragging){if(null==r||r>0||lt.ieOld&&r>=0){if(!o.drag(this._mouseEventTarget,e,i)){var n=o.getNextRequest(e,i);n&&(this._stopDragTracker(e,i,!0),this.dragTracker=this._getDragTracker(n,e,i),this._startDragTracker(e,i,!1))}}else this._stopDragTracker(e,i,!0);return}if(Math.abs(e-this._clickX)>=3||Math.abs(i-this._clickY)>=3){if(null==r||r>0||lt.ieOld&&r>=0)return void this._startDragTracker(e,i,!1);this._stopDragTracker(e,i,!0),this._dragTracker=null}}this._doMouseMove(t)},e.prototype.mouseUp=function(t){var e=this._mouseX=t.mouseX,i=this._mouseY=t.mouseY;this.dragging?this._stopDragTracker(e,i,!1):(this._dragTracker=null,this._doMouseUp(t))},e.prototype.mouseEnter=function(t){this._doMouseEnter(t)},e.prototype.mouseLeave=function(t){this._doMouseLeave(t)},e.prototype.mouseOver=function(t){this._doMouseOver(t)},e.prototype.mouseOutside=function(){this._doMouseOutside()},e.prototype.mouseWheel=function(t){return this._doMouseWheel(t)},e.prototype.contextMenu=function(t){return this._doContextMenu(t)},e.prototype.click=function(t){this._doClick(t)},e.prototype.dblclick=function(t){this._doDblClick(t)},e.prototype.setFocus=function(t){!lt.isMobile()&&this._doSetFocus(t)},e.prototype.focusLeave=function(t){this._doFocusLeave(t)},e.prototype.touchStart=function(t){this._lastTouch=Date.now(),this.touchManager?this.touchManager.touchStart(t):this._doTouchStart(t)},e.prototype.touchMove=function(t){this._lastTouch=Date.now(),this.touchManager?this.touchManager.touchMove(t):this._doTouchMove(t)},e.prototype.touchEnd=function(t){try{this._lastTouch=NaN,this.touchManager?this.touchManager.touchEnd(t):this._doTouchEnd(t)}catch(t){this.touchManager&&this.touchManager.clearTouches()}},e.prototype.touchCancel=function(t){this._lastTouch=NaN,this.touchManager?this.touchManager.touchCancel(t):this._doTouchCancel(t)},e.prototype.lastTouch=function(){return Date.now()-this._lastTouch},Object.defineProperty(e.prototype,"mouseEventTarget",{get:function(){return this._mouseEventTarget},enumerable:!0,configurable:!0}),e.prototype.isMouseEventTarget=function(t){return t._dom===this._mouseEventTarget},e.prototype._doActivated=function(t){},e.prototype._doDeactivated=function(){},e.prototype._doKeyDown=function(t){return!1},e.prototype._doKeyUp=function(t){return!1},e.prototype._doKeyPress=function(t){return!1},e.prototype._doMouseDown=function(t){},e.prototype._doMouseMove=function(t){},e.prototype._doMouseUp=function(t){},e.prototype._doMouseEnter=function(t){},e.prototype._doMouseLeave=function(t){},e.prototype._doMouseOver=function(t){},e.prototype._doMouseOutside=function(){},e.prototype._doMouseWheel=function(t){return!1},e.prototype._doContextMenu=function(t){},e.prototype._doClick=function(t){},e.prototype._doDblClick=function(t){},e.prototype._doSetFocus=function(t){},e.prototype._doFocusLeave=function(t){},e.prototype._getDragTracker=function(t,e,i){return null},e.prototype._startDragTracker=function(t,e,i){this._dragTracker&&(this._dragTracker.start(this._mouseEventTarget,t,e,i)?this._doDragTrackerStarted(this._dragTracker):this._dragTracker=null)},e.prototype._stopDragTracker=function(t,e,i){if(this.dragging){var o=this._dragTracker;i?o.cancel():o.drop(this._mouseEventTarget,t,e),this._doDragTrackerFinished(o,i)}},e.prototype._doDragTrackerStarted=function(t){},e.prototype._doDragTrackerFinished=function(t,e){},e.prototype._findTableCell=function(t){return this.owner.getTableCell(t||this.mouseEventTarget)},e.prototype._doTouchStart=function(t){},e.prototype._doTouchMove=function(t){},e.prototype._doTouchEnd=function(t){},e.prototype._doTouchCancel=function(t){},e}(ft),Na=function(t){function e(){return t.call(this)||this}return o(e,t),Object.defineProperty(e.prototype,"cursor",{get:function(){return"default"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dblClickable",{get:function(){return!1},enumerable:!0,configurable:!0}),e}(ft);!function(t){t.LINE="line",t.PAGE="page",t.THUMB_TRACK="thumbTrack",t.THUMB_END="thumbEnd",t.SCROLL_END="scrollEnd"}(Ws||(Ws={}));var Va,Ba,$a,Aa=function(t){function e(e,i,o){var r=t.call(this,e,o)||this;return r._scrollBar=i,r}return o(e,t),e.prototype._doDispose=function(){this._scrollBar=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"scrollBar",{get:function(){return this._scrollBar},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){return this._scrollBar.vertical},enumerable:!0,configurable:!0}),e.prototype._doDraw=function(t){this._doRender(t)},e.prototype._doRender=function(t){},e.prototype._changed=function(){this.invalidate()},e}(Os),ja=function(t){function e(e){return t.call(this,e,null,"scrollEdgeView")||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-scrolledge"},e}(Aa),Ha=function(t){function e(e){return t.call(this,e.doc,e,"scrollTrackView")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-scrolltrack"},e}(Aa),Wa=function(t){function e(e,i){var o=t.call(this,e.doc,e,"scrollButtonView")||this;return o._enabled=!0,o._far=i,o}return o(e,t),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"far",{get:function(){return this._far},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return this.scrollBar.vertical?this._far?"rg-scroll-down":"rg-scroll-up":this._far?"rg-scroll-right":"rg-scroll-left"},e}(Aa),Ga=function(t){function e(e){return t.call(this,e.doc,e,"scrollThumbView")||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-scrollthumb"},e}(Aa),Ua=function(t){function e(e,i){void 0===i&&(i=!1);var o=t.call(this,e.doc,"scrollBarView")||this;return o._lineScrollSize=1,o._pageScrollSize=1,o._minThumbSize=20,o._min=0,o._max=0,o._pos=0,o._page=0,o._maxPosition=0,o._buttonSize=20,o._needLayout=!0,o._tipView=null,o._container=e,o._vertical=i,o._track=new Ha(o),o.addChild(o._track),o._thumb=new Ga(o),o.addChild(o._thumb),o._nearButton=new Wa(o,!1),o.addChild(o._nearButton),o._farButton=new Wa(o,!0),o.addChild(o._farButton),o}return o(e,t),e.prototype._doDispose=function(){this._track=this._track.dispose(),this._thumb=this._thumb.dispose(),this._nearButton=this._nearButton.dispose(),this._farButton=this._farButton.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineScrollSize",{get:function(){return this._lineScrollSize},set:function(t){(t=Math.max(1,t))!=this._lineScrollSize&&(this._lineScrollSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageScrollSize",{get:function(){return this._pageScrollSize},set:function(t){(t=Math.max(1,t))!=this._pageScrollSize&&(this._pageScrollSize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minThumbSize",{get:function(){return this._minThumbSize},set:function(t){(t=Math.max(8,t))!=this._minThumbSize&&(this._minThumbSize=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertical",{get:function(){return this._vertical},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pos",{get:function(){return this._pos},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPosition",{get:function(){return this._maxPosition},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonSize",{get:function(){return this._buttonSize},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tipView",{set:function(t){this._tipView=t},enumerable:!0,configurable:!0}),e.prototype.layoutContent=function(){this._needLayout&&(this._needLayout=!1,this._doLayoutContent())},e.prototype.setProperties=function(t,e,i){t=Math.max(0,t),e=Math.max(t,e),t==this._min&&e==this._max&&i==this._page||(this._min=t,this._max=e,this._page=i,this._pos=Math.min(this._max,Math.max(this._min,this._pos)),this._maxPosition=Math.max(0,this._max-this._page),this.invalidate(),this._needLayout=!0)},e.prototype.setPosition=function(t,e){void 0===e&&(e=!0),(t=Math.min(this._maxPosition,Math.max(this._min,t)))!=this._pos&&(this._pos=t,this.invalidate(),this._needLayout=!0,e&&this.layoutContent())},e.prototype.ptInTrack=function(t,e,i){var o=this.containerToElement(t,e);if(this._vertical){if(o.y>=this._nearButton.height&&o.x<this._farButton.y)return!i&&o.y<this._thumb.y||i&&o.y>=this._thumb.bottom}else if(t>=this._nearButton.width&&t<this._farButton.x)return!i&&o.x<this._thumb.x||i&&o.x>=this._thumb.right;return!1},e.prototype.setText=function(t){if(this._tipView&&t){this._tipView.show(),this._tipView.setText(t);var e=void 0,i=void 0;if(this._vertical){var o=this._tipView.width();e=this.x-o-5,i=this._thumb.y}else{var r=this._tipView.height();e=this._thumb.x,i=this.y-r-5}this._tipView.move(e,i)}},e.prototype._getCssSelector=function(){return this._vertical?"rg-vscrollbar":"rg-hscrollbar"},e.prototype.draw=function(){t.prototype.draw.call(this)},e.prototype._doDraw=function(t){},e.prototype._doSizeChanged=function(){this.invalidateLayout()},e.prototype.invalidateLayout=function(){this._needLayout=!0,t.prototype.invalidateLayout.call(this)},e.prototype._doLayoutContent=function(){var t=this._vertical,e=this._buttonSize,i=this.height,o=this.width,r=(t?i:o)-2*e,n=Math.min(r,Math.max(this._minThumbSize,Math.floor(r*this._page/(this._max-this._min+1)))),s=e+Math.min(r-n,Math.max(0,Math.floor((r-n)*this._pos/(this._maxPosition-this._min))));this._track.setBounds(0,0,o,i),t?(this._nearButton.setBounds(0,0,o,e),this._farButton.setBounds(0,i-e,o,e),n<=r&&this._thumb.setBounds(2,s,o-4,n)):(this._nearButton.setBounds(0,0,e,i),this._farButton.setBounds(o-e,0,e,i),n<=r&&this._thumb.setBounds(s,2,n,i-4))},e.prototype._doScroll=function(t,i,o){this.fireEvent(e.SCROLLED,t,i,o)},e.SCROLLED="onScrollBarScrolled",e}(Os),za=function(t){function e(e){return t.call(this,e,"scrollThumbTracker")||this}return o(e,t),e.prototype._doDispose=function(){this._thumb=this._thumb&&this._thumb.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"thumb",{get:function(){return this._thumb},set:function(t){this._thumb=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._doStart=function(t,e,i){var o=this._thumb.scrollBar,r=o.containerToElement(e,i);return o.vertical?this._offset=r.y-this._thumb.y:this._offset=r.x-this._thumb.x,!0},e.prototype._doDrag=function(t,e,i){return this.$_doScroll(e,i,Ws.THUMB_TRACK)},e.prototype._doCompleted=function(t,e,i){return this.$_doScroll(e,i,Ws.THUMB_END)},e.prototype._doCanceled=function(t,e){},e.prototype._doEnded=function(){},e.prototype.$_doScroll=function(t,e,i){var o=this._thumb.scrollBar,r=o._maxPosition-o._min+1,n=o._buttonSize,s=o.containerToElement(t,e);if(o.vertical){if((a=o.height-2*n-this._thumb.height)<=0)return!1;s.y-=this._offset,s.y=(s.y-n)*r/a,o._doScroll(i,0,Math.max(Math.floor(s.y),0))}else{var a;if((a=o.width-2*n-this._thumb.width)<=0)return!1;s.x-=this._offset,s.x=(s.x-n)*r/a,o._doScroll(i,0,Math.max(Math.floor(s.x),0))}return!0},e}(La),Ya=function(t){function e(){var e=t.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e}return o(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return void 0!==this._timer},enumerable:!0,configurable:!0}),e.prototype.start=function(t){this._button=t,this._scrollBar=t.scrollBar,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,clearInterval(this._timer),this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),20))}.bind(this),300),this._ready=!0,this.$_fireEvent()},e.prototype.move=function(t,e){var i=this._button.containerToElement(t,e);this._active=this._button.containsInClient(i.x,i.y)},e.prototype.stop=function(){this._ready=!1,this._timer&&(clearInterval(this._timer),this._timer),this._button},e.prototype.$_fireEvent=function(){var t=this._button.far?1:-1,e=Ws.LINE;this._scrollBar._doScroll(e,this._scrollBar.lineScrollSize*t,0)},e}(se),qa=function(t){function e(){var e=t.call(this)||this;return e._active=!1,e._timer=void 0,e._ready=!1,e._mouseX=0,e._mouseY=0,e}return o(e,t),Object.defineProperty(e.prototype,"active",{get:function(){return this._active},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e,i,o){this._scrollBar=t,this._far=e,this._active=!0,setTimeout(function(){this._ready&&(this._ready=!1,this._timer=setInterval(function(){this._active&&this.$_fireEvent()}.bind(this),50))}.bind(this),300),this._ready=!0;var r=this._scrollBar.containerToElement(i,o);this._mouseX=r.x,this._mouseY=r.y,this.$_fireEvent()},e.prototype.move=function(t,e){var i=this._scrollBar.containerToElement(t,e);this._mouseX=i.x,this._mouseY=i.y,this._active=this._scrollBar.ptInTrack(i.x,i.y,this._far)},e.prototype.stop=function(){this._ready=!1,this._timer&&clearInterval(this._timer)},e.prototype.$_fireEvent=function(){var t=null,e=0,i=this._scrollBar._thumb;if(this._scrollBar.vertical){var o=this._mouseY;this._far&&o>i.bottom?(t=Ws.PAGE,e=1):!this._far&&o<i.y&&(t=Ws.PAGE,e=-1)}else{var r=this._mouseX;this._far&&r>i.right?(e=1,t=Ws.PAGE):r<i.x&&(t=Ws.PAGE,e=-1)}0!=e&&this._scrollBar._doScroll(t,this._scrollBar.pageScrollSize*e,0)},e}(ft),Ka=function(t){function e(e){var i=t.call(this,e,"scrollTool")||this;return i._buttonTimer=new Ya,i._trackTimer=new qa,i._thumbTracker=new za(e),i}return o(e,t),e.prototype._doDispose=function(){this._thumbTracker.cancel(),this._thumbTracker=this._thumbTracker.dispose(),this._buttonTimer.stop(),this._buttonTimer=this._buttonTimer.dispose(),this._trackTimer.stop(),this._trackTimer=this._trackTimer.dispose(),t.prototype._doDispose.call(this)},e.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY;this._clickElement=null,this.dragTracker=null,this._buttonTimer.stop(),this._trackTimer.stop();var o=this.findElementAt(e,i,!1);if(o instanceof Aa)if(this._clickElement=o,o instanceof Wa)this._buttonTimer.start(o);else if(o instanceof Ga)this._thumbTracker.thumb=o,this.dragTracker=this._thumbTracker;else if(o instanceof Ha){var r=o.scrollBar.ptInTrack(e,i,!0);this._trackTimer.start(o.scrollBar,r,e,i)}},e.prototype._doMouseMove=function(t){var e=t.mouseX,i=t.mouseY,o=this._clickElement,r="mousemove"===t.type?t.buttons:"touchmove"===t.type?1:void 0;null==r||r>0||lt.ieOld&&r>=0?o instanceof Wa&&this._buttonTimer.active?this._buttonTimer.move(e,i):o instanceof Ha&&this._trackTimer.active&&this._trackTimer.move(e,i):(this._buttonTimer.active&&this._buttonTimer.stop(),this._trackTimer.active&&this._trackTimer.stop())},e.prototype._doMouseUp=function(t){this._clickElement&&this._clickElement.scrollBar._doScroll(Ws.SCROLL_END,0,-1),this._clickElement=null,this._buttonTimer.stop(),this._trackTimer.stop()},e.prototype._doTouchStart=function(t){this.mouseDown(t),t.preventDefault()},e.prototype._doTouchEnd=function(t){this.mouseUp(t)},e.prototype._doTouchMove=function(t){this.mouseMove(t)},e}(Fa),Xa=function(t){function e(e){var i=t.call(this)||this;return i._container=e,i._element=i.$_createElement(e.doc),i}return o(e,t),e.prototype._doDispose=function(){this._element=lt.detach(this._element),this._container=null,t.prototype._doDispose.call(this)},e.prototype.show=function(){this._container._container.appendChild(this._element)},e.prototype.hide=function(){lt.detach(this._element)},e.prototype.move=function(t,e){lt.move(this._element,t,e)},e.prototype.setText=function(t){this._element.innerHTML=t},e.prototype.width=function(){return this._element.offsetWidth},e.prototype.height=function(){return this._element.offsetHeight},e.prototype.getRect=function(){return this._element.getBoundingClientRect()},e.prototype.$_createElement=function(t){var e=t.createElement("div"),i=e.style;return i.position="absolute",i.padding="4px 4px",i.boxSizing="border-box",i.display="lnline-block",i.pointerEvents="none",i.userSelect="none",e.className="rg-scroll-tip-view",e},e}(ft),Za=function(t){function e(e,i,o){var r=t.call(this,e,i)||this;return r._contaner=o,r}return o(e,t),Object.defineProperty(e.prototype,"container",{get:function(){return this._contaner},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){},e.prototype._doDraw=function(t){},e}(Os),Ja=function(t){function e(i,o,r){var n=t.call(this)||this;return n._disabled=!1,n._updateRequested=!1,n._layoutNeeded=!1,n._invalidated=!1,n._captured=!1,n._focusing=!1,n._focusingTarget=null,n._hovered=null,n._currentX=0,n._currentY=0,n._rendered=0,n._defaultCursor="default",n._drawing=!1,n._clicked=0,n._clicket=0,n._children=[],n._eventHandlers={},n._eventNodes=[],n._contextMenu=null,n._containerRender=n._render.bind(n),n._scrollTool=new Ka(n),n._cursor="default",n._testWidth=NaN,n._testHeight=NaN,n.prepareContainer(i,o,r),n.invalidateLayout(),n._registerEventHandlers(n._rootElement._dom,n._containerDom),n.activeTool=n._defaultTool=n._createDefaultTool(),e.$_Containers[n.$_hash]=n,n}return o(e,t),e.prototype.getMouseContainer=function(){return e.$_Containers[e.$_mouseContainer]},e.prototype.findContainer=function(t,i){for(var o in e.$_Containers){var r=e.$_Containers[o];if(r.contains(i||t.target))return r}return null},e.getActiveGrid=function(){var t=e.$_Containers[e.$_ActiveGrid];return t&&t._gridView},e.setActiveGrid=function(t){if(t!==e.$_ActiveGrid){var i=e.$_Containers[t],o=void 0;if(i=i&&i._gridView,window.RealGrid&&(o=window.RealGrid.onActiveGridChanged)){var r=e.$_Containers[e.$_ActiveGrid];o((r=r&&r._gridView)&&r.handler,i&&i.handler)}i._fireGridActivated()}e.$_ActiveGrid=t},e.getGridInstance=function(t){if("string"==typeof t&&(t=document.getElementById(t)),Ma(t,"HTMLDivElement"))for(var i in e.$_Containers){var o=e.$_Containers[i];if(o._containerDiv===t)return o.gridView}},e.clearContainer=function(t){e[t]&&delete e[t],e.$_ActiveGrid===t&&(e.$_ActiveGrid=null)},e.disposeStatic=function(){this.$_Containers=null,this.$_ActiveGrid=null},e.prototype._doDispose=function(){this._activeTool=null,this._defaultTool=this._defaultTool.dispose(),this._scrollTool=this._scrollTool.dispose(),this.$_removeListenerAll(null),lt.detach(this._containerDom),this._containerDom=null,this._container=null,this._doc=null,lt.clearElements(this._containerDiv),t.prototype._doDispose.call(this),delete e.$_Containers[this.$_hash]},Object.defineProperty(e.prototype,"doc",{get:function(){return this._doc},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"disabled",{get:function(){return this._disabled},set:function(t){t!=this._disabled&&(this._disabled=t,this._doDisabledChanged())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeTool",{get:function(){return this._activeTool},set:function(t){if((t=t||this._defaultTool)!=this._activeTool){var e=this._activeTool;e&&e.deactivate(),this._activeTool=t,t&&t.activate(e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultTool",{get:function(){return this._defaultTool},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"measurer",{get:function(){return this._measurer},enumerable:!0,configurable:!0}),e.prototype.findElementAt=function(t,e,i){return this._rootElement.findChildAt(t-this._rootElement._x,e-this._rootElement._y,i)},e.prototype.getTableCell=function(t){return null},e.prototype.setCursor=function(t){t!=this._cursor&&(this._containerDom.style.cursor=this._cursor=t)},e.prototype.setFocus=function(){this._containerDom.focus()},e.prototype.updateNow=function(){this._layoutNeeded=!0,this.invalidate(!0),this._render(lt.getTimer())},e.prototype.toScreen=function(t){var e=this._containerDom.getBoundingClientRect();return t.x+=e.left,t.y+=e.top,t},e.prototype.pointToScreen=function(t,e){var i=this._containerDom.getBoundingClientRect();return{x:t+i.left,y:e+i.top}},e.prototype.getBound=function(){var t=this._containerDom.getBoundingClientRect();return new N(t.left,t.top,t.width,t.height)},e.prototype.getHtml=function(){return this._containerDom.outerHTML},e.prototype.addElement=function(t){return this._rootElement.addChild(t)},e.prototype.removeElement=function(t){return this._rootElement.removeChild(t)},e.prototype.resetSize=function(t){void 0===t&&(t=null),this.updateNow(),t&&setTimeout(t,0)},e.prototype.measureText=function(t,e,i){this._textMeasurer.className=t;var o=this._textMeasurer.style;return i?(o.fontSize=i.fontSize,o.fontFamily=i.fontFamily,o.fontWeight=i.fontWeight,o.fontStyle=i.fontStyle):(o.removeProperty("fontSize"),o.removeProperty("fontFamily"),o.removeProperty("fontWeight"),o.removeProperty("fontStyle")),this._textMeasurer.innerHTML=e,this._textMeasurer.offsetWidth},e.prototype.$_refreshCheckMeasurer=function(){if(!this._checkRect){var t=this._checkMeasurer.getBoundingClientRect(),e=st(this._doc).getComputedStyle(this._checkMeasurer);this._checkRect={width:t.width+parseInt(e.marginLeft)+parseInt(e.marginRight),height:t.height+parseInt(e.marginTop)+parseInt(e.marginBottom)}}return this._checkRect},e.prototype.measureCheckWidth=function(){return this.$_refreshCheckMeasurer().width},e.prototype.measureCheckHeight=function(){return this.$_refreshCheckMeasurer().height},e.prototype.contains=function(t){var e=t;if(e instanceof st(this.doc).HTMLElement)for(var i=e.parentElement;i;){if(i===this._containerDom)return!0;i=i.parentElement}return!1},e.prototype.getDomPosition=function(t){return this.offsetDomPosition(t,{x:0,y:0})},e.prototype.offsetDomPosition=function(t,e){var i=st(this._doc),o=this._containerDom.getBoundingClientRect(),r=t.getBoundingClientRect(),n=i.getComputedStyle(this._containerDom);return e.x=r.left-o.left-Math.round(parseFloat(n.borderLeftWidth)),e.y=r.top-o.top-Math.round(parseFloat(n.borderTopWidth)),e},e.prototype.cancelOtherContainer=function(t){for(var i in e.$_Containers){var o=e.$_Containers[i];if(o!==this){var r=o._activeTool;r&&r.cancelFrom(t)}}},e.prototype._doDisabledChanged=function(){},e.prototype.prepareContainer=function(t,e,i){if(!t)throw new Error("container is null!");if(Ma(t,"HTMLDivElement")?this._containerDiv=t:this._containerDiv=document.getElementById(t),!Ma(this._containerDiv,"HTMLDivElement"))throw new Error("Invalid grid container element: "+t);var o=this._doc=this._containerDiv.ownerDocument,r=st(o),n=this._containerDiv.getElementsByClassName("rg-root");if(n&&n.length>0)throw new Error("Grid is already contained ContainerDiv");r.requestAnimationFrame=r.requestAnimationFrame||r.mozRequestAnimationFrame||r.webkitRequestAnimationFrame||r.msRequestAnimationFrame||function(t){return r.setTimeout(t,10)};var s=this._containerDom=o.createElement("div");this._container=this._containerDom;var a=s.style;this._cursor=a.cursor,this._containerDiv.appendChild(s),s.setAttribute("tabindex","0"),a.position="relative",a.width="100%",a.height="100%",a.boxSizing="border-box",a.overflow="hidden",a["-webkit-touch-callout"]="none",a["-webkit-user-select"]="none",a["user-select"]="none",a["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",this._rootElement=this._createRootElement(o),this._measurer=o.createElement("div"),this._measurer.setAttribute("aria-hidden","true"),this._container.appendChild(this._measurer);var l=this._textMeasurer=o.createElement("span");l.setAttribute("aria-hidden","true"),l.style.position="absolute",l.style.left="-10000px",l.style.top="-10000px",l.style.display="block",this._container.appendChild(l);var h=this._checkMeasurer=o.createElement("input");h.type="checkbox",h.tabIndex=-1,h.setAttribute("aria-hidden","true"),h.style.position="absolute",h.style.left="-1000px",h.style.top="-11000px",h.style.display="block",this._container.appendChild(h),this._doPrepareContainer(s,e,i)},e.prototype._doPrepareContainer=function(t,e,i){},e.prototype._createRootElement=function(t){var e=new Za(t,"root",this);return this._containerDom.appendChild(e._dom),e},e.prototype.isLayoutNeeded=function(){return this._layoutNeeded},e.prototype.invalidateLayout=function(){this._layoutNeeded||(this._layoutNeeded=!0,this.invalidate(!0))},e.prototype.invalidate=function(t){var e=st(this._doc);this._updateRequested&&this._invalidated||!t&&this._drawing||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0,this._invalidated=!0)},e.prototype.invalidateElement=function(t){var e=st(this._doc);this._drawing||this._updateRequested||(this._requestTimer||(this._requestTimer=e.requestAnimationFrame(this._containerRender)),this._updateRequested=!0)},e.prototype._render=function(t){if(!this.disposing){this._updateRequested=!1,this._drawing=!0;try{this.$$_render(t)}finally{this._drawing=!1,this._invalidated=!1,this._requestTimer=null,this._doAfterRender()}}},e.prototype.$$_render=function(t){var e=this._containerDom,i=isNaN(this._testWidth)?e.clientWidth:this._testWidth,o=isNaN(this._testHeight)?e.clientHeight:this._testHeight;if(this._layoutChildren(new N(0,0,i,o)),this._layoutNeeded)try{this._doLayout(new N(0,0,i,o))}finally{this._layoutNeeded=!1}else this._doPrepareRender(new N(0,0,i,o));this._doRenderHtml(new N(0,0,i,o))},e.prototype._layoutChildren=function(t){},e.prototype._doLayout=function(t){},e.prototype._doAfterRender=function(){},e.prototype._doPrepareRender=function(t){},e.prototype._doRenderHtml=function(t){this._doDrawContainer(t),this._drawElement(this._rootElement),this._validateChildren(this._rootElement)},e.prototype._doDrawContainer=function(t){},e.prototype._drawElement=function(t){t.draw();for(var e=0,i=t.childCount;e<i;e++){var o=t.getChild(e);o.visible&&this._drawElement(o)}},e.prototype._validateChildren=function(t){for(var e=0,i=t.childCount;e<i;e++){t.getChild(e).validate()}},e.prototype._setFocusAndScroll=function(t){t.setFocus?t.setFocus():t.focus&&t.focus({preventScroll:!0})},e.prototype._registerEventHandlers=function(t,e){var i=rt(t);t.style.cursor=this._defaultCursor,this.$_addListener(i,"resize",this._resizeHandler.bind(this),!1),this.$_addListener(i,"mousemove",this._mouseMoveHandler.bind(this),!1),this.$_addListener(i,"mouseup",this._mouseUpHandler.bind(this),!1),this.$_addListener(i,"focus",this._focusHandlerFireFox.bind(this),!0),this.$_addListener(i,"focusin",this._focusinHandler.bind(this),!0),this.$_addListener(i,"focusout",this._focusoutHandler.bind(this),!0),this.$_addListener(i,"mousedown",this._globalMouseDownHandler.bind(this),!1),e&&(this.$_addListener(e,"keydown",this._keyDownHandler.bind(this),!1),this.$_addListener(e,"keyup",this._keyUpHandler.bind(this),!1),this.$_addListener(e,"keypress",this._keyPressHandler.bind(this),!1)),this.$_addListener(t,"click",this._clickHandler.bind(this),!1),this.$_addListener(t,"dblclick",this._dblclickHandler.bind(this),!1),this.$_addListener(t,"mousedown",this._mouseDownHandler.bind(this),!1),this.$_addListener(t,"mouseenter",this._mouseEnterHandler.bind(this),!1),this.$_addListener(t,"mouseleave",this._mouseLeaveHandler.bind(this),!1),this.$_addListener(t,"mouseover",this._mouseOverHandler.bind(this),!1),this.$_addListener(t,"focus",this._focusHandler.bind(this),!1),this.$_addListener(t,"contextmenu",this._contextMenuHander.bind(this),!1),this.$_addListener(t,"blur",this._blurHandler.bind(this),!1),this.$_addListener(t,"selectstart",this._selectstartHandler.bind(this),!1),this.$_addListener(t,"wheel",this._wheelHandler.bind(this),!!lt.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchstart",this._touchStartHandler.bind(this),!!lt.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchmove",this._touchMoveHandler.bind(this),!!lt.isPassive()&&{capture:!1,passive:!1}),this.$_addListener(t,"touchend",this._touchEndHandler.bind(this),!1),this.$_addListener(t,"touchcancel",this._touchCancelHandler.bind(this),!1),this.$_addListener(t,"touchleave",this._touchLeaveHandler.bind(this),!1)},e.prototype.$_addListener=function(t,e,i,o){t in this._eventHandlers||(this._eventHandlers[t]={}),e in this._eventHandlers[t]||(this._eventHandlers[t][e]=[]),this._eventHandlers[t][e].push([i,o]),t.addEventListener(e,i,o),this._eventNodes.indexOf(t)<0&&this._eventNodes.push(t)},e.prototype.$_removeListener=function(t,e){if(t in this._eventHandlers){var i=this._eventHandlers[t];if(e in i)for(var o=i[e],r=o.length;r--;){var n=o[r];t.removeEventListener(e,n[0],n[1])}}},e.prototype.$_removeListenerAll=function(t){void 0===t&&(t=null);for(var e=t?[t]:this._eventNodes,i=0,o=e.length;i<o;i++){var r=e[i];if(r in this._eventHandlers){var n=this._eventHandlers[r];for(var s in n)for(var a=n[s],l=a.length;l--;){var h=a[l];r.removeEventListener(s,h[0],h[1])}}}},e.prototype._unloadHandler=function(){this.$_removeListenerAll(),this._containerDiv=null,this._containerDom=null},e.prototype._resizeHandler=function(t){this._doResized(t),this.invalidateLayout()},e.prototype._doResized=function(t){},e.prototype._isEnabled=function(){return this._activeTool&&!this._disabled},e.prototype._keyDownHandler=function(t){this._isEnabled()&&t.target===t.currentTarget&&t.target===this._containerDom&&this._activeTool.keyDown(t)},e.prototype._keyUpHandler=function(t){this._isEnabled()&&t.target===t.currentTarget&&t.target===this._containerDom&&this._activeTool.keyUp(t)},e.prototype._keyPressHandler=function(t){this._isEnabled()&&t.target===t.currentTarget&&t.target===this._containerDom&&this._activeTool.keyPress(t)},e.prototype.eventToContainer=function(t){var e=this._containerDom.getBoundingClientRect();return new Ss(t.clientX-e.left,t.clientY-e.top)},e.prototype.toOffset=function(t){var e=this._containerDom.getBoundingClientRect();return t.mouseX=t.clientX-e.left,t.mouseY=t.clientY-e.top,t},e.prototype.toOffsetTouch=function(t){var e=this._containerDom.getBoundingClientRect(),i=t.touches[0]||t.changedTouches[0];return t.mouseX=i.clientX-e.left,t.mouseY=i.clientY-e.top,t},e.prototype._clickHandler=function(t){this._isEnabled()?this._activeTool.click(this.toOffset(t)):t.preventDefault()},e.prototype._dblclickHandler=function(t){this._isEnabled()?this._activeTool.dblclick(this.toOffset(t)):t.preventDefault()},e.prototype.$_setMouseTarget=function(t){for(var e=rt(this._containerDom),i=t.target;i&&!(i instanceof e.HTMLElement);)i=i.parentElement||i.parentNode;this.activeTool._mouseEventTarget=i instanceof e.HTMLElement?i:null},e.prototype._mouseDownHandler=function(t){if(this._isEnabled()){e.$_mouseContainer=this.$_hash,this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY;var i=this.findElementAt(this._currentX,this._currentY,!1);i&&i.getAncestor(Ua)?(this.activeTool.setFocus(),this.activeTool!==this._scrollTool&&(this._scrollTool._previous=this.activeTool),this.activeTool=this._scrollTool):this.activeTool||(this.activeTool!==this._defaultTool&&(this._defaultTool._previous=this.activeTool),this.activeTool=this._defaultTool),this.$_setMouseTarget(t),this.activeTool.mouseDown(t)}else t.preventDefault()},e.prototype._mouseMoveHandler=function(t){if(this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()){var i=this._activeTool;this.$_setMouseTarget(t),i.mouseMove(t);var o=i.dragTracker;if(o&&o.linkable&&e.$_mouseContainer==this.$_hash){this.findContainer(t);for(var r in e.$_Containers){var n=e.$_Containers[r];if(n!==this){var s=n._activeTool;s&&s.dragFrom(t,o)}}}}},e.prototype._mouseUpHandler=function(t){var i=e.$_mouseContainer==this.$_hash,o=this._activeTool;try{if(this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()){var r=o.dragTracker;if(this.$_setMouseTarget(t),o.mouseUp(t),o instanceof Ka&&(this.activeTool=o.previous),r&&r.linkable&&i){var n=this.findContainer(t);if(n&&n!==this){var s=n._activeTool;s&&s.dropFrom(t,r)}}}else t.preventDefault()}finally{o&&(this.setCursor("default"),o.dragTracker=null),i&&(e.$_mouseContainer=-1)}},e.prototype._mouseEnterHandler=function(t){this._isEnabled()&&this._activeTool.mouseEnter(this.toOffset(t))},e.prototype._mouseLeaveHandler=function(t){this._isEnabled()&&this._activeTool.mouseLeave(this.toOffset(t))},e.prototype._mouseOverHandler=function(t){this._isEnabled()&&this._activeTool.mouseOver(this.toOffset(t))},e.prototype._contextMenuHander=function(t){this.toOffset(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.contextMenu(this.toOffset(t)))},e.prototype._wheelHandler=function(t){this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.mouseWheel(this.toOffset(t))&&lt.stopEvent(t))},e.prototype._focusHandler=function(t){},e.prototype._blurHandler=function(t){},e.prototype._selectstartHandler=function(t){return!1},e.prototype._focusinHandler=function(t){},e.prototype._globalMouseDownHandler=function(t){lt.isAncestorOf(this._containerDiv,t.target)||this._isEnabled()&&this._activeTool.focusLeave(t)},e.prototype._focusoutHandler=function(t){lt.isAncestorOf(this._containerDiv,t.target)&&t.relatedTarget&&!lt.isAncestorOf(this._containerDiv,t.relatedTarget)&&this._isEnabled()&&this._activeTool.focusLeave(t)},e.prototype._focusHandlerFireFox=function(t){lt.isAncestorOf(this._containerDiv,t.target)?this._isEnabled()&&(this._containerDom.setAttribute("tabindex","-1"),this._activeTool.setFocus(t.target)):this._containerDom.setAttribute("tabindex","0")},e.prototype._touchStartHandler=function(t){if(this._isEnabled()){this._activeTool.setFocus(),this.toOffsetTouch(t),this._currentX=t.mouseX,this._currentY=t.mouseY;var e=this.findElementAt(this._currentX,this._currentY,!1);e&&e.getAncestor(Ua)?this.activeTool=this._scrollTool:this.activeTool||(this.activeTool=this._defaultTool),this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchStart(t))}else t.preventDefault()},e.prototype._touchMoveHandler=function(t){this.toOffsetTouch(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchMove(t))},e.prototype._touchEndHandler=function(t){this.toOffsetTouch(t),this._currentX=t.mouseX,this._currentY=t.mouseY,this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchEnd(t),this._activeTool instanceof Ka&&(this.activeTool=this._activeTool.previous))},e.prototype._touchCancelHandler=function(t){this._isEnabled()&&(this.$_setMouseTarget(t),this._activeTool.touchCancel(t))},e.prototype._touchLeaveHandler=function(t){this._isEnabled()&&this._activeTool.touchEnd(t)},e.$_Containers={},e.$_mouseContainer=-1,e.$_ActiveGrid=null,e}(se),Qa=function(t){function e(e,i,o){void 0===o&&(o="gridHeadCellView");var r=t.call(this,e,o)||this;return r._text="",r._styleName="",r._textChanged=!1,r._model=i,r}return o(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),e.prototype.setStyleName=function(t,e,i){i==this._styleName&&e==this._cellDom||(this._styleName=i,this._className="",this._setClassName(t))},e.prototype._getCssSelector=function(){return this._styleName},e.prototype._clearCellCache=function(){t.prototype._clearCellCache.call(this),this._textChanged=!0},e.prototype._doPrepareValue=function(t,e){this._model.headText!=this._text&&(this._text=this._model.headText||"",this._textChanged=!0)},e.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[lt.TextProp]=this._text)},e}(Ks),tl=function(t){function e(e,i){var o=t.call(this,e,i,"chekHeadCellView")||this;return o._checked=!1,o}return o(e,t),Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!0,configurable:!0}),e.prototype._clearCellCache=function(){this._check=null,this._image=null,this._label=null},e.prototype._doUpdateContent=function(t,e,i){var o=t.doc,r=this.model,n=r.showAll&&!r.exclusive;if(n&&!this._check){var s=this._check=o.createElement("input"),a=s.style;s.type="checkbox",s.className="rg-checkbox",s.tabIndex=-1,a.display=r.useImages?"none":"inline-block",i.appendChild(s);var l=this._image=o.createElement("span");(a=l.style).display=r.useImages?"inline-block":"none",i.appendChild(l)}n?(this._check.style.display=r.useImages?"none":"inline-block",this._image.style.display=r.useImages?"inline-block":"none",this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked",this._check.checked=this._checked):(lt.detach(this._check),lt.detach(this._image),this._check=this._image=null),this._textChanged&&(this._label||(this._label=o.createElement("span"),this._label.style.display="block",i.appendChild(this._label)),this._label[lt.TextProp]=this._text)},e.prototype.$_updateContent=function(){this._check.checked=this._checked,this._image.className=this._checked?"rg-checkbar-head-checked":"rg-checkbar-head-unchecked"},e}(Qa),el=function(t){function e(e){var i=t.call(this,e.doc,null,"gridHeadView")||this;i._cells=[];var o=e.doc;return i.addChild(i._indicatorCell=new Qa(o,e.rowIndicator)),i.addChild(i._stateCell=new Qa(o,e.stateBar)),i.addChild(i._checkCell=new tl(o,e.checkBar)),i}return o(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"allChecked",{get:function(){return this._checkCell.checked},set:function(t){var e=this._checkCell;e.checked=t,e.$_updateContent()},enumerable:!0,configurable:!0}),e.prototype.getHeadModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},e.prototype.getCellType=function(t){var e=this.getHeadModel(t);return e===this.grid.rowIndicator?"indicator":e===this.grid.stateBar?"state":e===this.grid.checkBar?"check":void 0},e.prototype._getCssSelector=function(){return"rg-head"},e.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,o=t.sectionObjects;this._cells=[];for(var r=0,n=o;r<n.length;r++){var s=n[r];s instanceof cs&&(((e=this._indicatorCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.rowIndicator.width):e.removeCellDom()),s instanceof ps&&(((e=this._stateCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.stateBar.width):e.removeCellDom()),s instanceof fs&&(((e=this._checkCell).visible=e.model.visible)?(this._cells.push(e),e.width=i.checkBar.width):e.removeCellDom(!0))}},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._cells.length,o=this._getTableRowCount(t),r=0;r<i;r++){var n=this._cells[r],s=n.model,a=s.getHeadCell(),l=this._getTableCell(0,r),h=l.firstElementChild,u=this.$_getCellSelector()+" "+s.getHeadStyleName();if(this._chromium){l.rowSpan=o,h.style.maxHeight=this.height-1+"px";for(var c=1;c<o;c++)this._getTableCell(c,r).style.display="none"}n.setStyleName(l,h,u),n.updateCell(e,a,h)}},e.prototype._doRender=function(t){},e.prototype._getTableRowCount=function(t){return this._chromium?Math.max(1,t.headerRows):1},e.prototype._getTableRowHeight=function(t,e){var i=t.grid;if(this._chromium&&(i.fixedHeaderView.visible||i.headerView.visible)){var o=(i.headerView.visible?i.headerView:i.fixedHeaderView)._rowPoints;return o.length<2?this.height:o[e+1]-o[e]}return this.height},e.prototype._getCellCount=function(t){return this._cells.length},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e.prototype._doPrepareTableRow=function(e,i,o,r){t.prototype._doPrepareTableRow.call(this,e,i,o,r);var n=e.grid.header.styleName;lt.setClassName(r,n)},e.prototype.$_getCellSelector=function(){return e.CELL_CSS},e.CELL_CSS="rg-head-cell",e}(Ys),il=function(t){function e(e){var i=t.call(this,e,"gridFootCellView")||this;return i._text="",i._styleName="",i._textChanged=!1,i}return o(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())},enumerable:!0,configurable:!0}),e.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},e.prototype._getCssSelector=function(){return this._styleName},e.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[lt.TextProp]=this._text)},e.prototype._doRender=function(t){},e}(Ks),ol=function(t){function e(e){var i=t.call(this,e,null,"gridFootView")||this;i._cells=[],i._count=0;for(var o=0;o<3;o++)i.addChild(i._cells[o]=new il(e));return i}return o(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},e.prototype.getFootModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},e.prototype.getCellType=function(t){var e=this.getFootModel(t);return e===this.grid.rowIndicator?"indicator":e===this.grid.stateBar?"state":e===this.grid.checkBar?"check":void 0},e.prototype._getCssSelector=function(){return"rg-foot"},e.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,o=t.sectionObjects;this._count=0;for(var r=0,n=o;r<n.length;r++){var s=n[r];s.visible&&((e=this._cells[this._count++]).model=s,s instanceof cs?e.width=i.rowIndicator.width:s instanceof ps?e.width=i.stateBar.width:s instanceof fs&&(e.width=i.checkBar.width))}},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count;this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var o=0;o<i;o++){var r=this.getChild(o),n=r.model,s=n.getFootCell(),a=this._getTableCell(0,o),l=a.firstElementChild,h=this.$_getCellSelector()+" "+n.getFootStyleName();r.setStyleName(a,h),r.text=n.footText,r.updateCell(e,s,l)}},e.prototype._doRender=function(t){},e.prototype._getTableRowCount=function(t){return 1},e.prototype._getTableRowHeight=function(t,e){return this.height},e.prototype._getCellCount=function(t){return this._count},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e.prototype.$_getCellSelector=function(){return e.CELL_CSS},e.CELL_CSS="rg-foot-cell",e}(Ys),rl=function(t){function e(e){var i=t.call(this,e)||this;return i._numberFormat=Se.DEFAULT_FORMAT,i._datetimeFormat=xe.DEFAULT_FORMAT,i._datetimeWriter=xe.Default,i._numberFormatter=Se.Default,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"textFormat",{get:function(){return this._textFormat},set:function(t){t!=this._textFormat&&(this._textFormat=t,this._textFormatter=t?Gr.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t,this._datetimeWriter=t?xe.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?Se.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolFormatter=t?Ie.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textFormatter",{get:function(){return this._textFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormatter",{get:function(){return this._numberFormatter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeWriter",{get:function(){return this._datetimeWriter},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boolFormatter",{get:function(){return this._boolFormatter},enumerable:!0,configurable:!0}),e}(Is),nl=function(t){function e(e){var i=t.call(this)||this;return i._message="",i._visible=!0,i._zIndex=void 0,i._styleName="rg-toast",e&&i.assignFrom(e),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"zIndex",{get:function(){return this._zIndex},set:function(t){t!=this._zIndex&&(this._zIndex=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){this._styleName=t},enumerable:!0,configurable:!0}),e.prototype.assignFrom=function(e){"string"==typeof e?(this._message=e,this._message&&(this._visible=!0)):"boolean"==typeof e?this._visible=e:t.prototype.assignFrom.call(this,e)},e}(ft),sl=function(t){function e(e){var i=t.call(this)||this;return i._minWidth=0,i._maxWidth=0,i._dropdownCount=8,i._showing=!1,i._container=e,i._element=i.$_createElement(e.doc),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownCount",{get:function(){return this._dropdownCount},set:function(t){this._dropdownCount=t},enumerable:!0,configurable:!0}),e.prototype.show=function(t){this._showing=!0;try{this.$_show(t)}finally{this._showing=!1}},e.prototype.hide=function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},e.prototype.$_createElement=function(t){var e=t.createElement("div");e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this.$_disableSelection(e);var i=this._span=t.createElement("span");return this.$_disableSelection(i),e.appendChild(i),e},e.prototype.$_show=function(t){var e=t.message;if(e){var i=this._element;if(i){var o=this._span,r=this._container._gridView.displayOptions;o.innerHTML=e,i.className=t.styleName,i.style.position="absolute",i.style.overflow="hidden",i.style.zIndex=null!=t.zIndex?t.zIndex:r.toastZIndex,this._container._container.appendChild(i);var n=lt.getBoundingClientRect2(i),s=lt.getBoundingClientRect2(this._container._container),a=n.width+10,l=n.height+10,h=s.width,u=s.height;i.style.left=(h-a)/2+"px",i.style.top=(u-l)/2+"px"}}},e.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},e}(ft),al=function(t){function e(e){var i=t.call(this)||this;return i._active=!1,i._container=e.container,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._active},enumerable:!0,configurable:!0}),e.prototype.show=function(t,e,i){if((!this._active||e)&&(this.close(),(t=t instanceof nl?t:t?new nl(t):null)&&t.visible))return this._toast||(this._toast=new sl(this._container)),this._toast.show(t),this._active=!0,void(i&&setTimeout(function(){try{i()}finally{this.close()}}.bind(this),0));i&&i()},e.prototype.close=function(){this._active&&(this._toast&&this._toast.hide(),this._active=!1)},e}(ft),ll=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i._style=C.EXCLUSIVE,i._handleVisibility=I.VISIBLE,i._commitBeforeSorting=!0,i._toast=new nl({visible:!1,message:"Sorting..."}),i._keepFocusedRow=!1,i._textCase=s.SENSITIVE,i._showSortOrder=!1,i._pageSorting=!1,i}return o(e,t),e.prototype._doDispose=function(){this._toast=this._toast.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeSorting",{get:function(){return this._commitBeforeSorting},set:function(t){t!=this._commitBeforeSorting&&(this._commitBeforeSorting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keepFocusedRow",{get:function(){return this._keepFocusedRow},set:function(t){t!=this._keepFocusedRow&&(this._keepFocusedRow=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textCase",{get:function(){return this._textCase},set:function(t){t!=this._textCase&&(this._textCase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showSortOrder",{get:function(){return this._showSortOrder},set:function(t){t!=this._showSortOrder&&(this._showSortOrder=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageSorting",{get:function(){return this._pageSorting},set:function(t){t!=this._pageSorting&&(this._pageSorting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toast",{get:function(){return this._toast},enumerable:!0,configurable:!0}),e}(Is),hl=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){for(var t=this.parent;t;){if(t instanceof Pu)return t;t=t.parent}return null},enumerable:!0,configurable:!0}),e.prototype.measure=function(t,e,i){return this._doMeasure(t,e,i)},e.prototype.layoutContent=function(t,e,i){this._doLayoutContent(t,e,i)},e.prototype._doMeasure=function(t,e,i){return new As(e,i)},e.prototype._doLayoutContent=function(t,e,i){},e}(Rs),ul=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._initDom=function(e){t.prototype._initDom.call(this,e)},e}(hl),cl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(hl),dl=function(t){function e(e){var i=t.call(this,e.doc,"fixedColumnBar")||this;return i._grid=e,i}return o(e,t),e.prototype._getCssSelector=function(){return Es.COLUMN_BAR_STYLE},e}(Rs),pl=function(t){function e(e,i){return void 0===i&&(i=null),t.call(this,e,i)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.layoutBars=function(t,e,i){this._layoutBars(t,e,i)},e.prototype._doLayoutContent=function(e,i,o){this._barView||(this._barView=this._createBar(e.grid),this.addChild(this._barView),this._barView2=this._createBar(e.grid),this.addChild(this._barView2)),t.prototype._doLayoutContent.call(this,e,i,o)},e.prototype._createBar=function(t){return new dl(t)},e.prototype._layoutBars=function(t,e,i){var o=t.fixedBarWidth,r=t.footBounds.height;if(this._barView.visible=o>0,this._barView2.visible=!1,this._barView.visible){var n=Math.min(i-r,t.dataBounds.bottom);this._barView.setBounds(e-o,0,o,n),r>0&&(this._barView2.visible=!0,this._barView2.setBounds(e-o,i-r,o,r))}},e}(cl),_l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-right-column-bar"},e}(Rs),fl=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._createBar=function(){return new _l(this.doc,"rightColumnBar")},e.prototype._layoutBars=function(t,e,i){var o=t.rightBarWidth,r=t.footBounds.height;if(this._barView.visible=o>0,this._barView2.visible=!1,this._barView.visible){var n=Math.min(i-r,t.dataBounds.bottom);this._barView.setBounds(0,0,o,n),r>0&&(this._barView2.visible=!0,this._barView2.setBounds(0,i-r,o,r))}},e}(pl);!function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,e,i)||this;return o.visible=!1,o}o(e,t),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){t!=this._message&&(this._message=t,this._dom.innerHTML=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-message-pane"},e.prototype._doLayoutContent=function(e,i,o){t.prototype._doLayoutContent.call(this,e,i,o)}}(hl);!function(t){t.BUTTON="button",t.EDITOR="editor"}(Va||(Va={})),function(t){t.NONE="none",t.ASCENDING="ascending",t.DESCENDING="descending"}(Ba||(Ba={})),function(t){t.VALUE="value",t.LABEL="label",t.VALUE_LABEL="valueLabel",t.LABEL_VALUE="labelValue"}($a||($a={}));var gl,yl=function(t){function e(i){var o=t.call(this)||this;return o._minWidth=0,o._maxWidth=0,o._dropDownCount=8,o._caseSensitive=!1,o._partialMatch=!1,o._sortStyle=Ba.NONE,o._items=null,o._itemIndex=-1,o._dropDownPosition=Va.BUTTON,o._dropDownWidth=-1,o._displayLabels=null,o._separator=null,o._itemColumned=!1,o._viewGridInside=!1,o._trimLabelText=!0,o._initCount=0,o._moreItemCount=25,o._moreText=null,o._selected=!1,o._clickHandler=function(t){var i=t.currentTarget,o=lt.getChildIndex(i);o>=0&&(this._itemIndex=o,this._selected=!0,this.fireEvent(e.CLOSE_UP,!0))}.bind(o),o._nextClickHandler=function(t){var e=t.currentTarget;this.$_addMoreItems(e)}.bind(o),o._container=i,o._element=o._createList(i.doc),o}return o(e,t),e.prototype._doDispose=function(){this._container=null,this._containerElement=null,this._items=null,lt.clearElements(this._element),this._element.parentNode&&this._element.parentNode.removeChild(this._element),this._element=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortStyle",{get:function(){return this._sortStyle},set:function(t){t!=this._sortStyle&&(this._sortStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){if(this._items=[],t)for(var e=0,i=t.length;e<i;e++)this._items.push({label:t[e].label,value:t[e].value,index:e})},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!==this._displayLabels&&(this._displayLabels=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCount",{get:function(){return 0==this.initCount?this._items&&this._items.length:this._element.children.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueIndex",{get:function(){var t=this._items,e=this._itemIndex;return t&&e>=0&&e<t.length?t[e].index:-1},set:function(t){if(t=Math.max(-1,t),this._itemIndex=-1,t>=0)for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].index==t){this._itemIndex=t;break}this.listing&&this._refreshItems()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),e.prototype.hasButton=function(t){return null!=t?t:lt.isMobile()&&lt.isiOS},e.prototype.setItemIndex=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=!1);var o=this._element.childNodes;if((t=Math.max(-1,t))<this._items.length&&(e||t!=this._itemIndex||t>=o.length-1)){if(i&&t>=o.length-1){var r=o[o.length-1];if(r.isMoreButton){var n=t-(o.length-1);n=(Math.floor(n/this.moreItemCount)+1)*this.moreItemCount,this.$_addMoreItems(r,n)}}this._itemIndex=t,this.listing&&this._refreshItems(),this._selected=t>=0}},e.prototype.setZIndex=function(t){this._element.style.zIndex=String(t)},e.prototype.show=function(t,e,i,o,r){this._containerElement=this._viewGridInside?this._container._container:t,this._sortStyle!=Ba.NONE&&this.$_sortItems(),this._show(e,i,o,r)},e.prototype.hide=function(){lt.detach(this._element),this._containerElement=null},e.prototype.currentIsMore=function(t){var e=this._element.childNodes[null!=t?t:this._itemIndex];return e&&e.isMoreButton},e.prototype.addMoreItems=function(){if(this.currentIsMore(null)){var t=this._element.childNodes[this._itemIndex];this.$_addMoreItems(t,0)}},e.prototype._changed=function(){},e.prototype._createList=function(t){var i=t.createElement("div");return i.className="rg-dropdownlist",i.onkeydown=function(t){27==t.keyCode&&this.fireEvent(e.CLOSE_UP,!1)}.bind(this),i},e.prototype.$_sortItems=function(){this._sortStyle==Ba.ASCENDING?this._items.sort((function(t,e){return t.label<e.label?-1:t.label>e.label?1:0})):this._items.sort((function(t,e){return t.label>e.label?-1:t.label<e.label?1:0}))},e.prototype._show=function(t,e,i,o){var r=this._element;if(r){var n=r.style;n.position="absolute",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="auto",this._firstChild=null,lt.clearChildren(r),lt.disableSelection(r),this._containerElement.appendChild(r),this._cellWidth=i,this._editBounds=o,n.width="10px",this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o),this._selected=!1}},e.prototype._getListElement=function(){return this._element},e.prototype.$_resetHeight=function(){var t=this._getListElement();if(this._firstChild){var e=rt(this._firstChild),i=lt.getClientRect(this._firstChild),o=this._firstChild.currentStyle||e.getComputedStyle(this._firstChild),r=parseInt(o.marginTop.replace("px",""));r=isNaN(r)?0:r;var n=parseInt(o.marginBottom.replace("px",""));n=isNaN(n)?0:n;var s=this._dropDownCount>0?Math.min(this._dropDownCount,this._items.length):this._items.length;t.style.height=(i.height+r)*s+4+n+"px"}else t.style.height="10px"},e.prototype._resetWidth=function(t){var e=this._element,i=lt.getClientRect(e),o=this._dropDownWidth,r=o,n=e.offsetWidth?e.offsetWidth+(lt.ieOld&&"border-box"===e.style.boxSizing?17:0):0;r<0?r=t:0==r&&(r=10),e.style.width=r+"px";var s=0;if(this._firstChild){var a=rt(this._firstChild),l=this._firstChild.currentStyle||a.getComputedStyle(this._firstChild),h=parseInt(l.marginLeft.replace("px",""));h=isNaN(h)?0:h;var u=parseInt(l.marginRight.replace("px",""));u=isNaN(u)?0:u;for(var c=e.childNodes,d=0;d<c.length;d++)s=Math.max(s,c[d].scrollWidth);s+=e.offsetWidth-e.clientWidth+h+u+2}o<0&&(s=Math.max(s,r));var p=lt.getBrowserSize();r=s=Math.min(s,p.width),lt.ieOld&&(o>=0||s>r)&&(r+=20),r<i.width?e.style.overflowX="hidden":e.style.overflowX="auto",e.style.width=Math.max(r,n)+"px"},e.prototype.$_resetPosition=function(t,e,i,o){var r=nt(this._element),n=rt(this._element),s=lt.getBrowserSize(),a=lt.getClientRect(this._containerElement),l=lt.getClientRect(this._container._container),h=s.width,u=s.height,c=lt.getClientRect(this._element),d=n.pageXOffset||r.documentElement.scrollLeft,p=n.pageYOffset||r.documentElement.scrollTop;r.documentElement.scrollWidth>r.documentElement.clientWidth&&(u-=18),r.documentElement.scrollHeight>r.documentElement.clientHeight&&(h-=18),t+=l.left-a.left,e+=l.top-a.top,(lt.ieTen||lt.ieOld||lt.ieLeg)&&(t+=r.documentElement.scrollLeft,e+=r.documentElement.scrollTop),e+c.height>u+p&&o&&(e=e-o.height-c.height)<0&&(e=u-c.height-2),this._dropDownPosition!=Va.EDITOR?t=Math.max(0,t+i-c.width):t+c.width>h+d&&(t=h-c.width),!lt.isMobile()&&this._viewGridInside&&o&&(e=o.bottom-a.top+2,(a.bottom<o.bottom+c.height||u+p<o.bottom+c.height)&&(e=o.top-c.height-a.top-2)),lt.isMobile()||this._element.offsetParent||(t+=r.documentElement.offsetLeft,e+=r.documentElement.offsetTop),lt.move(this._element,Math.max(0,t),Math.max(0,e))},e.prototype._resetItems=function(t,e,i,o){lt.clearChildren(this._element),this._firstChild=null,this._buildItems(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},e.prototype._buildItems=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0);var i,o=nt(this._element),r=0,n=function(t,e){var i=e&&e.value?e.value.toString():"",r=o.createElement("span");return r.style.whiteSpace="pre",r.innerHTML=i?lt.htmlEncode(i):"&nbsp;",r.tabIndex=-1,r.className="rg-dropdown-value",lt.disableSelection(r),t.appendChild(r),r},s=function(t,e){var i=e&&e.label?e.label.toString():"";i=this._trimLabelText?i.trim():i;var r=o.createElement("span");return!this._trimLabelText&&(r.style.whiteSpace="pre"),r.innerHTML=i?lt.htmlEncode(i):"&nbsp;",r.tabIndex=-1,r.className="rg-dropdown-label",lt.disableSelection(r),t.appendChild(r),r}.bind(this),a=function(t,e){var i=o.createElement("span");i.style.whiteSpace="pre",i.innerHTML=e?lt.htmlEncode(e):"&nbsp;",i.tabIndex=-1,i.className="rg-dropdown-seperator",lt.disableSelection(i),t.appendChild(i)},l=function(t){var e=lt.getTextLength(t.textContent);e>r&&(i=t,r=e)},h=this._items,u=e||(this._element.children.length>0?this.moreItemCount:this.initCount);if(h&&!(h.length<1)){for(var c=t,d=h.length;c<d;c++){if(this._initCount&&c-t>=u&&c<d){var p=o.createElement("div"),_=p.style;_.position="relative",_.cssFloat="none",_.paddingTop="1px",_.paddingBottom="1px",_.paddingLeft="2px",_.paddingRight="2px",_.whiteSpace="nowrap",_.cursor="pointer",_.textAlign="center",lt.disableSelection(p),p.nextIndex=c,p.onclick=this._nextClickHandler,p.isMoreButton=!0,p.className="rg-dropdown-more",s(p,{label:this.moreText}),this._element.appendChild(p);break}var f=h[c],g=o.createElement("div"),y=g.style;y.position="relative",y.cssFloat="none",y.paddingTop="1px",y.paddingBottom="1px",y.paddingLeft="2px",y.paddingRight="2px",y.whiteSpace="nowrap",y.cursor="default",g.className=c==this._itemIndex?"rg-dropdown-select rg-dropdown-item":"rg-dropdown-item",lt.disableSelection(g),this._element.appendChild(g),0==c&&(this._firstChild=g),g.onclick=this._clickHandler;var m=null;switch(this.displayLabels){case $a.LABEL:s(g,f);break;case $a.VALUE:n(g,f);break;case $a.LABEL_VALUE:m=s(g,f),a(g,this._separator),n(g,f);break;case $a.VALUE_LABEL:m=n(g,f),a(g,this._separator),s(g,f)}m&&this._itemColumned&&l(m)}if(this._itemColumned&&i){var b=Math.ceil(i.getBoundingClientRect().width);for(c=0,d=this._element.childNodes.length;c<d;c++){(m=this._element.childNodes[c].firstChild).style.display="inline-block",m.style.width=b+"px"}}}},e.prototype.$_addMoreItems=function(t,i){var o=t.nextIndex;t.parentNode&&t.parentNode.removeChild(t),this._buildItems(o,i),this._resetWidth(this._cellWidth),this.fireEvent(e.EDITOR_FOCUS)},e.prototype._refreshItems=function(){for(var t=this._element.childNodes,e=0;e<t.length;e++){(i=t[e]).className=e==this._itemIndex?"rg-dropdown-select":"rg-dropdown-item"}var i,o=this._itemIndex;if(o>=0&&o<t.length)if((i=t[o]).offsetTop<this._element.scrollTop)this._element.scrollTop=i.offsetTop;else{var r=i.offsetTop+lt.getSize(i).height;r>=this._element.scrollTop+this._element.clientHeight&&(this._element.scrollTop=r-this._element.clientHeight)}},e.prototype.$_search=function(t,e){void 0===e&&(e=!1);try{if(this._items&&this._items.length>0&&t){for(var i=this._items,o=i.length,r=this._caseSensitive?t:t.toLowerCase(),n=[],s=0;s<o;s++){if(u=i[s].label.toString())if(u=this._caseSensitive?u:u.toLowerCase(),this._partialMatch){for(var a="",l=0;l<u.length;l++){var h=lt.hangulToChosung(u[l]);a+=lt.hangulToChosung(r[l]).org?h.org:h.cho}if(a==r)return void this.setItemIndex(s,e,!0)}else if(u==r)return void this.setItemIndex(s,e,!0);n.push(u)}for(s=0;s<o;s++){var u=n[s];if(this._partialMatch){var c=!1;for(l=0;l<r.length;l++){var d=lt.hangulToChosung(u[l]);if(!(d.org&&d.org==r[l]||d.cho&&d.cho==r[l])){c=!1;break}c=!0}if(c)return void this.setItemIndex(s,e,!0)}else if(u&&0==u.indexOf(r))return void this.setItemIndex(s,e,!0)}for(s=0;s<o;s++){u=n[s];if(this._partialMatch){var p=lt.hangulToChosungAll(u),_=lt.hangulToChosungAll(r),f=p.indexOf(_);a=u.substr(0,f);if(~f){l=0;for(var g=f,y=r.length;l<y;l++,g++){h=lt.hangulToChosung(u[g]);a+=lt.hangulToChosung(r[l]).org?h.org:h.cho}}if(a&&a.indexOf(r)>0)return void this.setItemIndex(s,e,!0)}else if(u&&u.indexOf(r)>0)return void this.setItemIndex(s,e,!0)}}this.setItemIndex(-1)}finally{e&&(this._selected=!0)}},e.CLOSE_UP="onDropDownListCloseUp",e.EDITOR_FOCUS="onDropDownListEditorFocus",e}(se),ml=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._values=null,o._items=null,o._labels=null,o._displayLabels=$a.LABEL,o._domainOnly=!1,o._dropDownWidth=-1,o._dropDownPosition=Va.BUTTON,o._dropDownCount=8,o._itemSortStyle=Ba.NONE,o._caseSensitive=!1,o._partialMatch=!1,o._commitOnSelect=!0,o._dropDownWhenClick=!1,o._trimLabelText=!0,o._separator=null,o._itemColumned=!1,o._lookup=!1,o._labeling=!1,o._domain=null,o._closing=!1,o._selectedIndex=-1,o._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e==this._list._element)return;e=e.parentElement}this.closeUp(!0)}}.bind(o),o._list=o._createDropDown(e.container),o._list.addListener(o),o}return o(e,t),e.prototype._doDispose=function(){this._globalMouseHandler=null,this._list.removeListener(this),this._list.dispose(),this._list=this._items=this._values=this._labels=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"values",{get:function(){return this._values},set:function(t){(t=lt.makeArray(t,!0))?this._values=t.map((function(t){return null!=t?String(t):t})):this._values=[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labels",{get:function(){return this._labels},set:function(t){this._labels=t?t.slice():[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayLabels",{get:function(){return this._displayLabels},set:function(t){t!=this._displayLabels&&(this._displayLabels=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"domainOnly",{get:function(){return this._domainOnly},set:function(t){t!=this._domainOnly&&(this._domainOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownWidth",{get:function(){return this._dropDownWidth},set:function(t){t!=this._dropDownWidth&&(this._dropDownWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){t!=this._dropDownCount&&(this._dropDownCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemSortStyle",{get:function(){return this._itemSortStyle},set:function(t){t!=this.itemSortStyle&&(this._itemSortStyle=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"caseSensitive",{get:function(){return this._caseSensitive},set:function(t){t!=this._caseSensitive&&(this._caseSensitive=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialMatch",{get:function(){return this._partialMatch},set:function(t){t!=this._partialMatch&&(this._partialMatch=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"trimLabelText",{get:function(){return this._trimLabelText},set:function(t){t!=this._trimLabelText&&(this._trimLabelText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"separator",{get:function(){return this._separator},set:function(t){t!=this._separator&&(this._separator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemColumned",{get:function(){return this._itemColumned},set:function(t){t!=this._itemColumned&&(this._itemColumned=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listing",{get:function(){return this._list.listing},enumerable:!0,configurable:!0}),e.prototype.dropDown=function(t){if(void 0===t&&(t=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var e=nt(this._container),i=rt(this._container);if(t||this._items&&this._items.length>0){var o=this._list,r=this._options,n=e.documentElement,s=lt.getClientRect(this._container);if(o.viewGridInside=r.viewGridInside,o.displayLabels=this.displayLabels,o.separator=this.separator,o.itemColumned=this.itemColumned,o.items=this._items,this._saveIndex=this._selectedIndex,this._saveText=this._editor.value,o.caseSensitive=this._caseSensitive,o.partialMatch=this._partialMatch,o.dropDownCount=this._dropDownCount,o.dropDownWidth=this._dropDownWidth,o.dropDownPosition=this._dropDownPosition,o.sortStyle=this._itemSortStyle,o.valueIndex=this._selectedIndex,o.trimLabelText=this._trimLabelText,this._isMobile)this._showMarquee(n),o.viewGridInside=!1,o.show(n,0,0,0,null),this._centerPopup(n,o._element);else{var a=this._grid.displayOptions;o.setZIndex(a.baseZindex+3),o.show(e.documentElement,s.cx+1,s.cy+s.height,this._cellBounds.width,lt.getClientRect(this._editor))}return o.$_search(this._editor.value,!0),i.addEventListener("mousedown",this._globalMouseHandler),!0}}return!1},e.prototype.closeUp=function(t){if(this.listing){this._closing=!0;try{rt(this._container).removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),this._list.hide();var e=void 0;if(t&&this._list.selected&&(e=this._list.valueIndex)>=0&&this._items&&this._items.length>e){this._selectedIndex=this._list.valueIndex;var i=this._isMobile?this._items[e].value:this._labeling?this._items[e].label:this._items[e].value;this._isMobile?this._commitListValue(i):(this._editor.value=i,e==this._saveIndex&&i==this._saveText||this._dispatchChange(),this._commitOnSelect&&this._dispatchCommit())}else this._selectedIndex=-1}finally{this._closing=!1}return!0}},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._values=[],this._labels=[],this._displayLabels=$a.LABEL,this._separator=" - ",this._itemColumned=!1,this._domainOnly=!1,this._textReadOnly=!1,this._dropDownWidth=-1,this._dropDownPosition=Va.BUTTON,this._dropDownCount=8,this._itemSortStyle=Ba.NONE,this._caseSensitive=!1,this._partialMatch=!1,this._commitOnSelect=!0,this._dropDownWhenClick=!1,this._viewGridInside=!1,this._initCount=0,this._moreItemCount=25,this._moreText=window.RG_CONST&&window.RG_CONST.MORETEXT||"더보기"},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._lookup=!1,this._labeling=!1,this._domain=null,this._items=null,this._refreshItems()},e.prototype.setEditValue=function(e){var i,o=-1;if(this._value=e,this._lookup){var r=this._domain;if(r)i=(n=o=r.keys?r.keys.indexOf(e):-1)>=0&&r.values&&r.values.length>n?r.values[n]:e;else o=this._editIndex.dataColumn.getLookupIndex(e);this._labeling?(i=r?o>=0&&r.values&&r.values.length>o?r.values[o]:e:o>=0?this._editIndex.dataColumn.getLookupLabel(e):e,t.prototype.setEditValue.call(this,i)):t.prototype.setEditValue.call(this,e)}else if(this._values){for(var n=0,s=this._values.length;n<s;n++)if(e==this._values[n]){o=n;break}this._labeling&&this._labels&&(o<0||this._labels.length>o)?(i=o>=0?this._labels[n]:e,t.prototype.setEditValue.call(this,i)):t.prototype.setEditValue.call(this,e)}else t.prototype.setEditValue.call(this,e);this._selectedIndex=o},e.prototype.isEdited=function(){var e=t.prototype.isEdited.call(this);return e&&this.domainOnly&&(e=void 0!==this.$_getEditValue(!1)),e},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype._createDropDown=function(t){return new yl(t)},e.prototype.setCellEditValue=function(e,i){t.prototype.setCellEditValue.call(this,e,i)},e.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),!this.isEdited()&&this._selectedIndex<0?this._value:this.$_getEditValue(t,e)},e.prototype.setBounds=function(e,i,o,r,n){t.prototype.setBounds.call(this,e,i,o,r,n)},e.prototype._createEditor=function(e){return t.prototype._createEditor.call(this,e)},e.prototype._textHandler=function(){this._requestStart()},e.prototype._compositionstartHandler=function(e){t.prototype._compositionstartHandler.call(this,e)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=this._list,o=i.itemIndex;switch(e.keyCode){case 8:case 46:if(!e.ctrlKey&&!e.shiftKey&&this.domainOnly&&this.allowEmpty);else if(!e.ctrlKey&&!e.shiftKey&&this.textReadOnly)return this._requestStart(),e.preventDefault(),!0;break;case 32:if(this.listing&&i.currentIsMore(o))return i.addMoreItems(),e.preventDefault(),!0;break;case 13:if(this.listing&&i.currentIsMore(o))return i.addMoreItems(),e.preventDefault(),!0;if(this.closeUp(!0))return!this._sendToParent(e);break;case 27:if(this.closeUp(!1))return e.preventDefault(),!0;break;case 40:if(e.altKey&&!this.listing)return this._requestStart(),e.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.min(i.itemCount-1,o+1)),e.preventDefault(),!0;break;case 34:if(this.listing)return this._list.setItemIndex(Math.min(i.itemCount-1,o+i.dropDownCount)),e.preventDefault(),!0;break;case 38:if(e.altKey&&this.listing)return this.closeUp(!1),e.preventDefault(),!0;if(this.listing)return this._list.setItemIndex(Math.max(0,o-1)),e.preventDefault(),!0;break;case 33:if(this.listing)return this._list.setItemIndex(Math.max(0,o-i.dropDownCount)),e.preventDefault(),!0}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._keyPressHandler=function(e){this.isDisabled()||(t.prototype._keyPressHandler.call(this,e),e.keyCode&&this.textReadOnly&&e.preventDefault())},e.prototype._inputHandler=function(e){this.isDisabled()||(this.textReadOnly&&(e.target.value=this._oldValue||""),t.prototype._inputHandler.call(this,e))},e.prototype._pasteHandler=function(e){this.isDisabled()||t.prototype._pasteHandler.call(this,e)},e.prototype._copyHandler=function(e){this.isDisabled()||t.prototype._copyHandler.call(this,e)},e.prototype._requestStart=function(e){return!!t.prototype._requestStart.call(this,e)&&(this._isMobile?e&&this.dropDown():!1!==e&&this.dropDown(),!0)},e.prototype._doChanged=function(){this._selectedIndex=-1,t.prototype._doChanged.call(this),this.listing&&this._list.$_search(this._editor.value)},e.prototype.dropDownList=function(t){this.dropDown(t)},e.prototype.closeList=function(t){this.closeUp(t)},e.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown()},e.prototype.$_setItems=function(t,e){this._items=[];for(var i=0,o=t.length;i<o;i++)this._items.push({value:t[i],label:e&&e.length>i?e[i]:t[i]})},e.prototype._refreshItems=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.editIndex,o=i.item;if(this._values&&(this._values.length>0||e))this.$_setItems(this._values,this._labels),this._labeling=this.displayLabels!==$a.VALUE&&this._labels&&this._labels.length>=this._values.length;else if(i.dataColumn&&i.item&&(i.dataRow>=0||Ji(o.itemState))){var r=i.dataColumn;if(r.lookupSource){for(var n=r.lookupKeyFieldIds,s=[],a=0;a<n.length-1;a++)s.push(o.getData(n[a]));var l=r.lookupSource.getTextDomain(s);l&&l.values&&l.values.length>0&&(this.$_setItems(l.keys,l.values),this._labeling=!0,this._lookup=!0,this._domain=l)}else r.values&&r.values.length>0&&(this.$_setItems(r.values,r.labels),this._labeling=this.displayLabels!==$a.VALUE&&r.labels&&r.labels.length>=r.values.length,this._lookup=!0)}if(t&&this.listing){this._list.items=this._items;var h=lt.getClientRect(this._container);this._list._resetItems(h.cx-1,h.cy+h.height,this._cellBounds.width,lt.getClientRect(this._editor))}},e.prototype.$_getEditValue=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!1);var i=this.text,o=ua.prototype.getEditValue.call(this,t,e),r=o,n=this._editIndex.dataColumn,s=this._selectedIndex,a=s>=0;if(this._lookup){if(this._domain){if(this._labeling)r=(l=a?s:this._domain.values?this._domain.values.indexOf(i):-1)>=0&&this._domain.keys&&this._domain.keys.length>l?this._domain.keys[l]:r;if(this.domainOnly&&r&&(!this._domain.keys||this._domain.keys.indexOf(r)<0))return aa.Unselected}else if(this._labeling&&(r=a?n.getLookupValue(s):n.getSourceValue(i)||o),this.domainOnly&&r&&(!n.values||n.values.indexOf(r)<0))return aa.Unselected}else{var l;if(this._labeling)(l=a?s:this._labels?this._labels.indexOf(i):-1)>=0&&l<this._values.length&&(r=this._values[l]);if(this.domainOnly&&r&&(!this._values||this._values.indexOf(r)<0))return aa.Unselected}return r},e.prototype.onDropDownListCloseUp=function(t,e){this.closeUp(e),!lt.isMobile()&&this.setFocus()},e.prototype.onDropDownListEditorFocus=function(){this.setFocus()},e.INPUT_CSS="rg-list-editor",e}(ya),bl=function(t){function e(i){var o=t.call(this,i)||this;return o._selectItemIndices=[],o._acceptText=null,o._cancelText=null,o._showButtons=!1,o._showAllCheck=!1,o._acceptClickHandler=function(t){this.fireEvent(e.CLOSE_UP_2,!0)}.bind(o),o._cancelClickHandler=function(t){this.fireEvent(e.CANCEL,!1)}.bind(o),o._checkClickHandler=function(t){t.stopImmediatePropagation();var e=t.currentTarget,i=e.parentElement;if(i){var o=lt.getChildIndex(i),r=e.checked;this.$_changeCheckIndex(i,o,r,!0)}}.bind(o),o._allCheckClickHandler=function(t){if(t.stopImmediatePropagation(),2==t.eventPhase&&t.currentTarget==this._allCheckElement)this._allCheck.checked=!this._allCheck.checked,this.$_toggleAllCheck();else if(2==t.eventPhase&&t.currentTarget==this._allCheck)return void this.$_toggleAllCheck()}.bind(o),o._clickHandler=function(t){var e=t.currentTarget;if(2==t.eventPhase){for(var i=lt.getChildIndex(e),o=void 0,r=e.getElementsByTagName("input"),n=0,s=r.length;n<s;n++)if("checkbox"==r[n].type){o=r[n];break}o&&(o.checked=!o.checked),this.$_changeCheckIndex(e,i,o.checked,!0)}}.bind(o),o}return o(e,t),Object.defineProperty(e.prototype,"valueIndices",{get:function(){return this._selectItemIndices.slice()},set:function(t){this._selectItemIndices=[],null!=t&&(this._selectItemIndices=t.slice(),this.listing&&this._refreshItems(),this._selected=!1)},enumerable:!0,configurable:!0}),e.prototype.changeCheckIndex=function(t,e,i){var o=this._listElement.childNodes;if(t>=0&&t<o.length){for(var r=o[t],n=r.getElementsByTagName("input"),s=void 0,a=0,l=n.length;a<l;a++)if("checkbox"==n[a].type){s=n[a];break}s&&(s.checked=null!=e?e:!s.checked,this.$_changeCheckIndex(r,t,s.checked,i))}},e.prototype.$_changeCheckIndex=function(t,i,o,r){var n=this._selectItemIndices;if(!(i<0||i>=this._items.length)){var s=this._items[i].index;o?n.indexOf(s)<0&&n.push(s):n.indexOf(s)>=0&&n.splice(n.indexOf(s),1),t.className="rg-multicheck-item"+(o?" rg-multicheck-select":""),this._selected=!0,r&&this.fireEvent(e.CHECK_CLICK,!1)}},e.prototype._createList=function(){var t=this._container.doc,i=t.createElement("div");i.className="rg-multicheck";var o=t.createElement("div");o.className="rg-multicheck-allcheck",this._allCheckElement=o,o.style.paddingLeft="2px",lt.disableSelection(o),i.appendChild(o);var r=t.createElement("div");r.className="rg-multicheck-list",this._listElement=r,i.appendChild(r);var n=t.createElement("div");return n.style.textAlign="center",n.style.whiteSpace="nowrap",n.className="rg-multicheck-button",this._buttonElement=n,n.style.margin="2px",lt.disableSelection(n),i.appendChild(n),i.onkeydown=function(t){27==t.keyCode&&this.fireEvent(e.CLOSE_UP_2,!1)}.bind(this),i},e.prototype._getListElement=function(){return this._listElement},e.prototype.setZIndex=function(t){var e=this._element.style;e.zIndex=String(t),(e=this._listElement.style).zIndex=String(t)},e.prototype.$_toggleAllCheck=function(){for(var t=this._listElement.childElementCount,i=this._allCheck.checked,o=0;o<t;o++)this.changeCheckIndex(o,i,!1);this.fireEvent(e.CHECK_CLICK,!1)},e.prototype._show=function(t,e,i,o){var r=this._element;if(r){var n=r.style;n.position="absolute",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="visible",(n=this._listElement.style).position="relative",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.minWidth="20px",n.minHeight="10px",n.overflow="auto",(n=this._buttonElement.style).position="relative",n.cssFloat="none",n.clear="both",n.boxSizing="border-box",n.marginLeft="0px",n.marginRight="0px",this._firstChild=null,lt.clearChildren(this._listElement),lt.disableSelection(this._listElement),this._containerElement.appendChild(r),this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o),this._selectItemIndices.length>0&&this._itemIndex<0&&this.setItemIndex(this._selectItemIndices[0]),this._selected=!1}},e.prototype._resetWidth=function(e){t.prototype._resetWidth.call(this,e);var i=this._element,o=Math.floor(this._buttonElement.getBoundingClientRect().width),r=i.getBoundingClientRect().width;isNaN(o)||(r=Math.max(r,o)),i.style.width=r+"px"},e.prototype._resetItems=function(t,e,i,o){lt.clearChildren(this._listElement),this._firstChild=null,this._buildItems(),this.$_buildButtons(),this.$_resetHeight(),this._resetWidth(i),this.$_resetPosition(t,e,i,o)},e.prototype._buildItems=function(){var t,i=this._container.doc,o=0,r=function(t,e,o){var r=e?e.value.toString():"",n=i.createElement("label");return n.style.whiteSpace="pre",n.innerHTML=r?lt.htmlEncode(r):"&nbsp;",n.htmlFor=o&&o.id,n.tabIndex=-1,n.className="rg-dropdown-value",lt.disableSelection(n),t.appendChild(n),n}.bind(this),n=function(t,e,o){var r=e?e.label.toString():"";r=this._trimLabelText?r.trim():r;var n=i.createElement("label");return!this._trimLabelText&&(n.style.whiteSpace="pre"),n.innerHTML=r?lt.htmlEncode(r):"&nbsp;",n.htmlFor=o&&o.id,n.tabIndex=-1,n.className="rg-dropdown-label",lt.disableSelection(n),t.appendChild(n),n}.bind(this),s=function(t,e){var o=i.createElement("span");o.style.whiteSpace="pre",o.innerHTML=e?lt.htmlEncode(e):"&nbsp;",o.tabIndex=-1,o.className="rg-dropdown-separator",lt.disableSelection(o),t.appendChild(o)}.bind(this),a=function(e){var i=lt.getTextLength(e.textContent);i>o&&(t=e,o=i)}.bind(this),l=this._items;if(l&&!(l.length<1)){for(var h=0,u=l.length;h<u;h++){var c=l[h],d=i.createElement("div"),p=d.style;p.position="relative",p.cssFloat="none",p.paddingTop="1px",p.paddingBottom="1px",p.paddingLeft="2px",p.paddingRight="2px",p.whiteSpace="nowrap",p.cursor="default";var _=this._selectItemIndices.indexOf(l[h].index)>=0;d.className="rg-multicheck-item"+(_?" rg-multicheck-select":""),lt.disableSelection(d),this._listElement.appendChild(d),0==h&&(this._firstChild=d),d.onclick=this._clickHandler;var f=i.createElement("input");f.id="$multiCheck_item_"+e.$_checkId++,f.type="checkBox",f.onclick=this._checkClickHandler,f.checked=_,d.appendChild(f);var g=null;switch(this.displayLabels){case $a.LABEL:n(d,c,f);break;case $a.VALUE:r(d,c,f);break;case $a.LABEL_VALUE:g=n(d,c,f),s(d,this.separator),r(d,c,f);break;case $a.VALUE_LABEL:g=r(d,c,f),s(d,this.separator),n(d,c,f)}g&&this.itemColumned&&(a(g),d._span=g)}if(this.itemColumned&&t){var y=Math.ceil(t.getBoundingClientRect().width);if(y>0)for(var m=0,b=this._listElement.childNodes.length;m<b;m++){(g=this._listElement.childNodes[m]._span)&&(g.style.display="inline-block",g.style.width=y+"px")}}}},e.prototype.setButtonOptions=function(t,e,i,o,r){this._acceptText=t,this._cancelText=e,this._showButtons=i,this._showAllCheck=o,this._allCheckText=r,this.$_buildButtons()},e.prototype.$_buildButtons=function(){var t=this._container.doc;if(this._buttonElement){this._buttonElement.style.display=this._showButtons?"":"none",lt.clearChildren(this._buttonElement);var i=t.createElement("label"),o=i.style;i.innerHTML=this._acceptText,i.onclick=this._acceptClickHandler,i.className="rg-multicheck-accept",o.cursor="pointer",lt.disableSelection(i),this._buttonElement.appendChild(i),o=(i=t.createElement("label")).style,i.innerHTML=this._cancelText,i.onclick=this._cancelClickHandler,i.className="rg-multicheck-cancel",o.marginLeft="2px",o.cursor="pointer",lt.disableSelection(i),this._buttonElement.appendChild(i);var r=this._allCheckElement;if(r.onclick=this._allCheckClickHandler,lt.clearChildren(r),this._showAllCheck){r.style.display="";var n=t.createElement("input");n.type="checkbox",n.id="$multiCheck_item_"+e.$_checkId++,n.onclick=this._allCheckClickHandler,this._allCheck=n,r.appendChild(n);var s=t.createElement("label");s.innerHTML=this._allCheckText,s.htmlFor=n.id,s.tabIndex=-1,lt.disableSelection(s),r.appendChild(s)}else r.style.display="none"}},e.prototype._refreshItems=function(){for(var t=this._listElement.childNodes,e=-1,i=0;i<t.length;i++){e=i<this._items.length?this._items[i].index:-1;var o=t[i];i===this._itemIndex?lt.addClassName(o,"rg-multicheck-selectitem"):lt.removeClassName(o,"rg-multicheck-selectitem")}if((e=this._itemIndex)>=0&&e<t.length)if((o=t[e]).offsetTop<this._listElement.scrollTop)this._listElement.scrollTop=o.offsetTop;else{var r=o.offsetTop+lt.getSize(o).height;r>=this._listElement.scrollTop+this._listElement.clientHeight&&(this._listElement.scrollTop=r-this._listElement.clientHeight)}},e.CLOSE_UP_2="onMultiCheckListCloseUp",e.CANCEL="onMultiCheckListCancel",e.CHECK_CLICK="onMultiCheckListCheckClick",e.$_checkId=0,e}(yl),vl=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._showButtons=!0,o._showAllCheck=!1,o}return o(e,t),Object.defineProperty(e.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"acceptText",{get:function(){return this._acceptText},set:function(t){this._acceptText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelText",{get:function(){return this._cancelText},set:function(t){this._cancelText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allCheckText",{get:function(){return this._allCheckText},set:function(t){this._allCheckText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showAllCheck",{get:function(){return this._showAllCheck},set:function(t){this._showAllCheck=t},enumerable:!0,configurable:!0}),e.prototype._createDropDown=function(t){return new bl(t)},e.prototype.setMask=function(t){this._mask=null},e.prototype.dropDown=function(t){if(void 0===t&&(t=!1),!this.readOnly&&!this.listing&&!this._closing){this._refreshItems();var e=nt(this._container),i=rt(this._container);if(t||this._items&&this._items.length>0){var o=this._list,r=this._options;this._selectedIndices=this._selectedIndices||[],o.viewGridInside=r.viewGridInside,o.displayLabels=this.displayLabels,o.separator=this.separator,o.itemColumned=this.itemColumned,o.items=this._items;var n=lt.getClientRect(this._container);if(this._saveIndices=this._selectedIndices.slice(),this._saveText=this._editor.value,o.caseSensitive=this.caseSensitive,o.dropDownCount=this.dropDownCount,o.dropDownWidth=this.dropDownWidth,o.dropDownPosition=this.dropDownPosition,o.setButtonOptions(this.acceptText,this.cancelText,this.showButtons,this.showAllCheck,this.allCheckText),o.sortStyle=this.itemSortStyle,o.valueIndices=this._selectedIndices.slice(),o.trimLabelText=this.trimLabelText,this._isMobile){var s=e.documentElement;o.viewGridInside=!1,this._showMarquee(s),o.show(s,0,0,0,null),this._centerPopup(s,o._element)}else{var a=this._grid.displayOptions;o.setZIndex(a.baseZindex+3),o.show(e.documentElement,n.cx+1,n.cy+n.height,this._cellBounds.width,lt.getClientRect(this._editor))}return i.addEventListener("mousedown",this._globalMouseHandler),!0}}return!1},e.prototype.getCheckValues=function(t,e,i){for(var o=[],r=0,n=t.length;r<n;r++)t[r]>=0&&t[r]<e.length&&o.push(this._labeling&&!i?e[t[r]].label:e[t[r]].value);return o},e.prototype.closeUp=function(t){if(this.listing){this._closing=!0;try{var e=this._list,i=this.editIndex&&this.editIndex.dataColumn;if(rt(this._container).removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),e.hide(),t&&e.selected){if(this._selectedIndices=e.valueIndices.slice(),this._editor.value=this.getCheckValues(this._selectedIndices,this._items).join(i.valueSeparator),!lt.equalArrays(this._saveIndices,this._selectedIndices)||this._editor.value!=this._saveText)if(this._isMobile){var o=this.getCheckValues(this._selectedIndices,this._items,!0).join(i.valueSeparator);this._commitListValue(o)}else this._dispatchChange(),this.commitOnSelect&&this._dispatchCommit()}else this._selectedIndices=this._saveIndices.slice()}finally{this._closing=!1}return!0}return!1},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._showButtons=!0,this._showAllCheck=!1,this._acceptText=window.RG_CONST&&window.RG_CONST.MULTICHECKACCEPT?window.RG_CONST.MULTICHECKACCEPT:"Accept",this._cancelText=window.RG_CONST&&window.RG_CONST.MULTICHECKCANCEL?window.RG_CONST.MULTICHECKCANCEL:"Cancel",this._allCheckText=window.RG_CONST&&window.RG_CONST.MULTICHECKALLCHECK?window.RG_CONST.MULTICHECKALLCHECK:"Check All"},e.prototype.applyOptions=function(e){t.prototype.applyOptions.call(this,e)},e.prototype.setEditValue=function(e){var i,o=[],r=[],n=-1,s=lt.isArray(e)?e:e?e.split(this._editIndex.dataColumn.valueSeparator):[];if(this._value=e,this._lookup){var a=this._domain;if(a)for(var l=0,h=s.length;l<h;l++)(n=a.keys.indexOf(s[l]))>=0&&(o.push(n),r.push(n<a.values.length?a.values[n]:s[l]));else o=this._editIndex.dataColumn.getLookupIndices(e);this._labeling?(i=a?r.join(this._editIndex.dataColumn.valueSeparator):o.length>0?this._editIndex.dataColumn.getLookupLabel(e):e,t.prototype.setEditValue.call(this,i)):t.prototype.setEditValue.call(this,e)}else if(this._values){for(var u=0,c=s.length;u<c;u++)(n=this._values.indexOf(s[u]))>=0&&(o.push(n),r.push(this._labels&&n>=0&&this._labels.length>n?this._labels[n]:s[u]));this._labeling&&this._labels?(i=r.join(this._editIndex.dataColumn.valueSeparator),t.prototype.setEditValue.call(this,i)):t.prototype.setEditValue.call(this,e)}else t.prototype.setEditValue.call(this,e);this._selectedIndices=o},e.prototype.setCellEditValue=function(e,i){t.prototype.setCellEditValue.call(this,e,i)},e.prototype.getEditValue=function(t,e){return void 0===t&&(t=!0),void 0===e&&(e=!1),this.isEdited()||this._list.selected?this.$_getEditValue(t,e):this._value},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=this._list;if(e.ctrlKey&&65==e.keyCode&&this.listing)return e.preventDefault(),i._allCheck.checked=!i._allCheck.checked,i.$_toggleAllCheck(),!0;switch(e.keyCode){case 32:if(this.listing)return i.changeCheckIndex(i.itemIndex,null,!0),e.preventDefault(),!0}return t.prototype._keyDownHandler.call(this,e)}},e.prototype.$_getEditValue=function(t,e){function i(t,e,i,o,r){var n=[],s=e&&e.split(r.valueSeparator());if(s&&s.length>0)for(var a=0,l=s.length;a<l;a++)o.indexOf(s[a])>=0&&o.indexOf(s[a])<i.length||i.indexOf(s[a])>=0?n.push(i[a]):t.isDomainOnly()||n.push(s[a]);return n}void 0===t&&(t=!1),void 0===e&&(e=!1);this._list;var o=this.text,r=ua.prototype.getEditValue.call(this,t,e),n=r,s=this._editIndex.dataColumn,a=this._selectedIndices.slice(),l=[],h=this._list.selected;if(this._lookup){if(this._domain){if(this._labeling){if(h)for(var u=0,c=a.length;u<c;u++)a[u]<this._domain.keys.length&&l.push(this._domain.keys[a[u]]);else o&&(l=i(this,o,this._domain.keys,this._domain.values,s));n=l.join(s.valueSeparator)}}else if(this._labeling&&void 0===(n=h?s.getLookupValues(a):s.getSourceValues(o))&&(n=r),this.domainOnly&&n){if(!s.values)return aa.Unselected;for(var d=(n=lt.isArray(n)?n:n&&n.split?n.split(s.valueSeparator):[n]).length-1;d>=0;d--)s.values.indexOf(n[d])<0&&n.splice(d,1)}}else{if(this._labeling){if(h){var p=0;for(c=a.length;p<c;p++)a[p]<this._values.length&&l.push(this._values[a[p]])}else o&&(l=i(this,o,this._values,this._labels,s));n=l.join(s.valueSeparator)}if(this.domainOnly&&n){if(!s.values)return aa.Unselected;for(d=(n=lt.isArray(n)?n:n&&n.split?n.split(s.valueSeparator):[n]).length-1;d>=0;d--)s.values.indexOf(n[d])<0&&n.splice(d,1)}}return lt.isArray(n)?n.join(s.valueSeparator):n},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.onMultiCheckListCloseUp=function(t,e){this.closeUp(e),!this._isMobile&&this.setFocus()},e.prototype.onMultiCheckListCheckClick=function(t){this._editor.value=this.getCheckValues(t._selectItemIndices,this._items).join(this.editIndex.dataColumn.valueSeparator),this._selectedIndices=t._selectItemIndices.slice(),this._saveIndices=t._selectItemIndices.slice(),this._modified=!0,this._dispatchChange(),!this._isMobile&&this._editor.focus()},e.prototype.onMultiCheckListCancel=function(){this._isMobile?this._controller.closeList(!1):this._controller.cancelEditor(!0)},e.INPUT_CSS="rg-multicheck-editor",e}(ml),wl=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._searchLength=1,o._searchDelay=1e3,o._useCtrlEnterKey=!1,o._useEnterKey=!1,o._initCount=0,o._moreItemCount=25,o._reInquery=!0,o._timer=void 0,o}return o(e,t),Object.defineProperty(e.prototype,"searchLength",{get:function(){return this._searchLength},set:function(t){t!=this._searchLength&&(this._searchLength=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchDelay",{get:function(){return this._searchDelay},set:function(t){t!=this._searchDelay&&(this._searchDelay=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useCtrlEnterKey",{get:function(){return this._useCtrlEnterKey},set:function(t){t!=this._useCtrlEnterKey&&(this._useCtrlEnterKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useEnterKey",{get:function(){return this._useEnterKey},set:function(t){t!=this._useEnterKey&&(this._useEnterKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"initCount",{get:function(){return this._initCount},set:function(t){t!=this._initCount&&(this._initCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moreItemCount",{get:function(){return this._moreItemCount},set:function(t){t!=this._moreItemCount&&(this._moreItemCount=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"moreText",{get:function(){return this._moreText},set:function(t){t!=this._moreText&&(this._moreText=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reInquery",{get:function(){return this._reInquery},set:function(t){t!=this._reInquery&&(this._reInquery=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.fillItems=function(t,e,i){return!(!this.listing||t!=this.getEditText())&&(this.values=e,this.labels=i,this._refreshItems(!0,!0),this._list.$_search(this._editor.value,!0),!0)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=13==e.keyCode;if(i&&(i=e.ctrlKey?this.useCtrlEnterKey:this.useEnterKey&&(!this._items||this._items.length<1)),i&&this.editing){e.preventDefault(),e.stopImmediatePropagation(),this.$_stopTimer();var o=this.getEditText();return o&&o!=this._searchKey&&(this._searchKey=o,this._dispatchSearch(o)),!0}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._keyUpHandler=function(e){this.isDisabled()||(t.prototype._keyUpHandler.call(this,e),lt.isChrome&&this.$_search())},e.prototype._inputHandler=function(e){this.isDisabled()||(t.prototype._inputHandler.call(this,e),lt.isChrome||this.$_search())},e.prototype._doEndEdit=function(){t.prototype._doEndEdit.call(this),this.$_stopTimer(),this._searchKey=null},e.prototype.dropDown=function(e){var i=this._list;return i&&(i.initCount=this.initCount,i.moreItemCount=this.moreItemCount,i.moreText=this.moreText),t.prototype.dropDown.call(this,!0)},e.prototype.buttonClicked=function(t){if(this.listing)this.closeUp(!1);else{this.dropDown();var e=this.getEditText(),i=this._dispatchSearchCellButtonClick(e);i&&"object"==typeof i&&i.values&&this.fillItems(e,i.values,i.labels)}},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.$_search=function(){var t=this.getEditText();t&&t.length>=this._searchLength?this.$_startTimer():this.$_stopTimer()},e.prototype.$_startTimer=function(){this.$_stopTimer(),!this.reInquery&&this.listing&&this._list._items.length>0||(this._timer=setInterval(function(){var t=this.getEditText();t&&t!=this._searchKey&&(this._searchKey=t,this.$_stopTimer(),this._dispatchSearch(t,!0))}.bind(this),this._searchDelay))},e.prototype.$_stopTimer=function(){this._timer&&clearInterval(this._timer)},e.INPUT_CSS="rg-search-editor",e.SEARCH="onSearchCellEditorSearch",e}(ml),Cl=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._values=null,o._items=null,o._labels=null,o._sortStyle=Ba.NONE,o._itemIndex=-1,o._displayLabels=null,o._separator=null,o._itemColumned=!1,o._trimLabelText=!0,o.$_selectChanged=null,o._handled=!1,o._globalKeyDownHandler=function(t){return this._keyDownHandler(t)}.bind(o),o}return o(e,t),e.prototype._dodispose=function(){this._editor&&this._editor.removeEventListener("change",this.$_selectChanged),this._values=null,this._labels=null,this._items=null,t.prototype.dispose.call(this)},Object.defineProperty(e.prototype,"hasList",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"native",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._createEditor=function(t){var e=nt(t);this._container=this._createContainer(e),t.appendChild(this._container);var i=e.createElement("select"),o=i.style;return i.setAttribute("aria-hidden","true"),o.position="absolute",o.boxSizing="border-box",o.margin="0px",o.padding="0px",o.wordWrap="normal",o.overflow="hidden",o.resize="none",o.border="none",o.outline="none",o.left="0px",o.top="0px",o.width="100%",o.height="100%",this.$_selectChanged=function(t){var e=t.target;this._itemIndex!==e.selectedIndex&&(this._dispatchChange(),this._dispatchCommit())}.bind(this),i.addEventListener("change",this.$_selectChanged),this._container.appendChild(i),i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._values=[],this._labels=[],this._items=[],this._itemIndex=-1},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e),this._refreshItems(),this._resetPosition()},e.prototype.setEditValue=function(e){t.prototype.setEditValue.call(this,e),this._itemIndex=-1;for(var i=this._editor.options,o=0,r=i.length;o<r;o++)i[o].value===e?(this._itemIndex=o,i[o].selected=!0):i[o].selected=!1},e.prototype.prepare=function(){var t=rt(this._container);this._handled||(t.addEventListener("keydown",this._globalKeyDownHandler),this._handled=!0)},e.prototype.unprepare=function(){rt(this._container).removeEventListener("keydown",this._globalKeyDownHandler),this._handled=!1},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=e.keyCode,o=lt.isIE&&this.visible;switch(i){case 40:if(e.altKey)return this._requestStart(),!0;if(o)return!1;break;case 13:case 38:case 33:case 34:case 36:case 35:if(o)return!1}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._resetPosition=function(){var t=this._grid;if(!t.editorLender){var e=t.getEditCellBounds(this,this._editIndex);e.x--,e.y--,this.setBounds(e.x,e.y,0,0,0)}},e.prototype._refreshItems=function(t,e){void 0===e&&(e=!1);var i=this.editIndex,o=i.item;if(this._values&&(this._values.length>0||e))this.$_setItems(this._values,this._labels);else if(i.dataColumn&&i.item&&(i.dataRow>=0||Ji(o.itemState))){var r=i.dataColumn;if(r.lookupSource){for(var n=r.lookupKeyFieldIds,s=[],a=0;a<n.length-1;a++)s.push(o.getData(n[a]));var l=r.lookupSource.getTextDomain(s);l&&l.values&&l.values.length>0&&this.$_setItems(l.keys,l.values)}else r.values&&r.values.length>0&&this.$_setItems(r.values,r.labels)}},e.prototype.$_setItems=function(t,e){this._items=[];for(var i=this._editor,o=i.options,r=nt(i),n=o.length-1;n>=0;n--)o.remove(n);for(var s=0,a=t.length;s<a;s++){var l=r.createElement("option");l.value=t[s],l.text=e&&e.length>s?e[s]:t[s],this._items.push({value:l.value,label:l.text}),i.options.add(l,null)}},e.prototype.getEditValue=function(){return this.$_getEditValue()},e.prototype.$_getEditValue=function(){return this._editor.value},e.INPUT_CSS="rg-nlist-editor",e}(ua),xl=/[ㄱ-ㅎㅏ-ㅣ가-힝]/g,Il=function(t){if(!t)return null;(t=String(t))&&(t=t.replace(/[^0-9]/g,""));var e=parseInt(t.substr(0,4)),i=parseInt(t.substr(4,2));if(isNaN(e)||e<=0||isNaN(i)||i<0)return null;var o=new Date(e,0,1),r=4-o.getDay()+1;return o.setDate(r),o.getFullYear()==e&&i--,r=7*i,o.setDate(o.getDate()+r),o},El=function(t,e,i){void 0===i&&(i=!1);var o,r=function(t){var i=new Date(t),o=i.getDay();o=o<e?-3-o:4-o;var r=i.getDate();return i.setDate(r+o),i},n=t.getFullYear(),s=r(new Date(n,0,1)),a=r(new Date(n,t.getMonth(),t.getDate())),l=s.getFullYear(),h=a.getFullYear();return h<n?(s=r(new Date(l,0,1)),o=Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(s.getFullYear()===h?1:0)):o=h>n?1:Math.ceil((a.valueOf()-s.valueOf())/6048e5)+(l===h?1:0),String(h)+(i?"-":"")+(o<10?"0"+o:String(o))},Sl=function(t){function e(e){var i=t.call(this)||this;return i._tooltips=[],i._items=[],i._enabled=!0,i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){this._owner=null,this._tooltips=null,this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"tooltips",{get:function(){return this._tooltips},set:function(t){this._tooltips=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t.slice()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items&&this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName||""},set:function(t){this._styleName=t},enumerable:!0,configurable:!0}),e.prototype.load=function(t){this.clear()},e.prototype.clear=function(){this._items=[],this._tooltips=[]},e.prototype.contains=function(t){return!1},e.prototype.getTooltip=function(t){return null},e}(ft),Ol=function(t){function e(e,i){var o=t.call(this,e)||this;return i&&o.load(i),o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.load=function(e){if(t.prototype.load.call(this,e),e){var i=lt.makeArray(e.dates,!0);e.tooltips=lt.makeArray(e.tooltips,!0);for(var o=0,r=i.length;o<r;o++){var n=i[o],s=void 0;if(n instanceof Date)(s=new Date(n)).setHours(0,0,0,0);else if("number"==typeof n)(s=new Date(n)).setHours(0,0,0,0);else if("string"==typeof n){4!==n.length&&8!==n.length||!/^[0-9]*$/.test(n)||(n=4===n.length?n.replace(/(\d{2})(\d{2})/,"$1/$2"):n.replace(/(\d{4})(\d{2})(\d{2})/,"$1/$2/$3"));var a=n.split(/[.//-]/);if(2==a.length)try{s=parseInt(a[0]).toString()+"/"+parseInt(a[1]).toString()}catch(t){}else 3==a.length&&(s=Ge.getSimpleDateNull(n))}s&&(this._items.push(s),e.tooltips[o]&&this._tooltips.push(e.tooltips[o]))}null!=e.enabled&&(this.enabled=!!e.enabled),this.styleName=e.styleName}},e.prototype.getItemIndex=function(t){for(var e=0,i=this._items.length;e<i;e++){var o=this._items[e];if(o instanceof Date&&o.getFullYear()===t.getFullYear()&&o.getMonth()===t.getMonth()&&o.getDate()===t.getDate())return e;if(o===t.getMonth()+1+"/"+t.getDate())return e}return-1},e.prototype.contains=function(t){return this.getItemIndex(t)>=0},e.prototype.getTooltip=function(t){var e=this.getItemIndex(t);return e>=0?this._tooltips[e]:null},e}(Sl),Rl=function(t){function e(e,i){var o=t.call(this,e)||this;return i&&o.load(i),o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.load=function(e){t.prototype.load.call(this,e),e&&(this._items=lt.makeArray(e.days,!0),this._tooltips=lt.makeArray(e.tooltips,!0),this.enabled=!!e.enabled,this.styleName=e.styleName)},e.prototype.contains=function(t){return t instanceof Date&&this._items.indexOf(t.getDay())>=0},e.prototype.getTooltip=function(t){var e=t instanceof Date?this._items.indexOf(t.getDay()):this._items.indexOf(t);return e>=0?this._tooltips[e]:null},e}(Sl),Dl=function(t){function e(){var e=t.call(this)||this;return e._items=[],e._count=-1,e}return o(e,t),e.prototype._doDispose=function(){this._editor=null,this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(t){this._items=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editor",{get:function(){return this._editor},set:function(t){this._editor=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isNull",{get:function(){return-1==this._count},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),e.prototype.setNull=function(){this.clear()},e.prototype.getDateConvert=function(){return this._editor&&this._editor._dateConverter},e.prototype.clear=function(){for(var t=0,e=this._items.length;t<e;t++)this._items[t].clear();this._items=[],this._count=-1},e.prototype.load=function(t){if(this.clear(),t){for(var e=0,i=(t=lt.isArray(t)?t:[t]).length;e<i;e++){var o=t[e],r=void 0;switch(o.type){case"day":r=new Rl(this,o);break;case"date":r=new Ol(this,o)}r.count>0&&this._items.push(r)}this._count=this._items.length}else this._count=-1},e.prototype.contains=function(t){for(var e=0,i=this._items.length;e<i;e++)if(this._items[e].contains(t))return this._items[e];return null},e}(ft),kl=function(t){function e(i,o){var r=t.call(this)||this;r._month=-1,r._clickHandler=function(t){lt.stopEvent(t,!0);var i=t.currentTarget,o=lt.getChildIndex(i);o>=0&&(this._month=o,this.fireEvent(e.CLOSE_UP,this._month)),this.hide()}.bind(r);var n=nt(o);return r._listElement=o,r._months=i.months,r._element=r.$_createPicker(n),r._element.style.zIndex=String(i._baseZindex+2),r}return o(e,t),e.prototype._doDispose=function(){this._listElement=null,lt.detach(this._element),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"month",{get:function(){return this._month},set:function(t){this._month=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listElement",{get:function(){return this._listElement},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listing",{get:function(){return this._container&&this._container.contains(this._element)},enumerable:!0,configurable:!0}),e.prototype.show=function(t,e,i,o){if(this._container=t,t){t.appendChild(this._element);var r=nt(t),n=lt.getClientRect(this._element),s=lt.getScrolled(r);if(o&&this._listElement){var a=this._listElement.getBoundingClientRect().width;e=parseInt(this._listElement.style.left.replace("px",""))+a/2,i=parseInt(this._listElement.style.top.replace("px",""))}e=Math.max(s.sx,e-n.width-2),i=Math.max(s.sy,i-n.height/2+13),lt.move(this._element,e,i)}},e.prototype.hide=function(){lt.detach(this._element),this._container=null},e.prototype.$_createPicker=function(t){var e=t.createElement("div"),i=e.style;i.position="absolute",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",e.className="rg-cal-month-picker",e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this);for(var o=1;o<=12;o++){var r=t.createElement("div"),n=r.style;n.position="relative",n.cssFloat="none",r.className="rg-cal-month-picker-item",lt.disableSelection(r),e.appendChild(r),r.onclick=this._clickHandler,r.onmouseup=this._clickHandler;var s=t.createElement("span");s.innerHTML=lt.htmlEncode((this._months?this._months[o-1]:o)+" "),s.tabIndex=-1,lt.disableSelection(s),r.appendChild(s)}return e},e.CLOSE_UP="onMonthPickerCloseUp",e}(se),Pl=function(t){function e(i,o){var r=t.call(this)||this;r._minWidth=0,r._maxWidth=0,r._yearNavigation=!1,r._dropDownPosition=Va.BUTTON,r._showToday=!0,r._viewGridInside=!1,r._showWeeks=!1,r._startWeek=0,r._weekSelectable=!1,r._weekSeparator="",r._date=new Date,r._selected=!1,r._focused=!0,r._canceled=!1,r._clickHandler=function(t){var i=this.$_getCellDate(this._currDate,t.currentTarget.$_day+1);if(this._editor.containsRange(i)){var o=this._holidays&&this._holidays.contains(i);o&&!o.enabled||(this.date=new Date(i),this._selected=!0,this.focused=!0,this._editor.$_selectDate(this._date),!this.showButtons&&this.fireEvent(e.CLOSE_UP,!0))}}.bind(r),r._dblClickHandler=function(t){this.fireEvent(e.CLOSE_UP,!0)}.bind(r),r._yearWeekClickHandler=function(t){var e,i=t.currentTarget.$_yearWeek;i&&(e=Il(i)),e&&this._editor.containsRange(e)&&(this._date=new Date(e),this._selected=!0)}.bind(r),r._keydownHandler=function(t){27==t.keyCode&&(this.isMonthLisiting()?this.closeMonth():this.fireEvent(yl.CLOSE_UP,!1))}.bind(r),r._mouseupHandler=function(t){!this._isMobile&&this._editor.setFocus()}.bind(r);i.doc;return r._editor=o,r._container=i,r._yearDisplayFormat=o.yearDisplayFormat,r._monthDisplayFormat=o.monthDisplayFormat,r._months=o.months,r._weekDays=lt.week_days,r._element=r.$_createPicker(o),r._element.addEventListener("keydown",r._keydownHandler),r._element.addEventListener("mouseup",r._mouseupHandler),r._monthPicker=new kl(o,r._element),r._monthPicker.addListener(r),r}return o(e,t),e.prototype._doDispose=function(){this._monthPicker=this._monthPicker&&this._monthPicker.dispose(),this._element&&(this._element.removeEventListener("keydown",this._keydownHandler),this._element.removeEventListener("mouseup",this._mouseupHandler),lt.detach(this._element)),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!=this._minWidth&&(this._minWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){t!=this._maxWidth&&(this._maxWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearNavigation",{get:function(){return this._yearNavigation},set:function(t){t!=this._yearNavigation&&(this._yearNavigation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showToday",{get:function(){return this._showToday},set:function(t){t!=this._showToday&&(this._showToday=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showWeeks",{get:function(){return this._showWeeks},set:function(t){t!=this._showWeeks&&(this._showWeeks=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWeek",{get:function(){return this._startWeek},set:function(t){t!=this._startWeek&&(this._startWeek=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){t!=this._weekSelectable&&(this._weekSelectable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){t!=this._weekSeparator&&(this._weekSeparator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&(this._holidays=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"date",{get:function(){return this._date},set:function(t){t?this._date&&this._date.getTime()===t.getTime()||(this._currDate=new Date(t),this._date=new Date(t),this.listing&&this.$_buildCalendar()):null===t&&(this._date=null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listing",{get:function(){return this._containerElement&&this._containerElement.contains(this._element)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthListing",{get:function(){return this._monthPicker.listing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canceled",{get:function(){return this._canceled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px",this._headerElement.style.backgroundColor=t?"rgba(0, 200, 200, 0.1)":"#e8e8e8",this._headElement.style.opacity=t?"1.0":"0.5")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"today",{get:function(){return this.date=new Date},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){t!=this._showButtons&&(this._footer&&(this._footer.style.display=t?"":"none"),this._showButtons=t),this._showButtons=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"saveLabel",{get:function(){return this._saveLabel},set:function(t){t!=this._saveLabel&&(this._saveElement&&(this._saveElement.textContent=t),this._saveLabel=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){t!=this._cancelLabel&&(this._cancelElement&&(this._cancelElement.textContent=t),this._cancelLabel=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deleteLabel",{get:function(){return this._deleteLabel},set:function(t){t!=this._deleteLabel&&(this._deleteElement&&(this._deleteElement.textContent=t),this._deleteLabel=t)},enumerable:!0,configurable:!0}),e.prototype.setWeekDays=function(t){t!=this._weekDays&&(lt.isArray(t)&&t.length>=7?this._weekDays=t:this._weekDays=lt.week_days)},e.prototype.closeMonth=function(){this._monthPicker.hide()},e.prototype.show=function(t,e,i,o,r){this._containerElement=!lt.isMobile()&&this._viewGridInside?this._container._container:t,this.$_show(e,i,o,r)},e.prototype.hide=function(){this.focused=!1,this._monthPicker.hide(),lt.detach(this._element),this._containerElement=null},e.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},e.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&lt.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},e.prototype.firstDay=function(){var t=new Date(this._currDate);return this._date&&t.setDate(1),this.date=t},e.prototype.lastDay=function(){var t=new Date(this._currDate);if(this._date){var e=t.getFullYear(),i=t.getMonth(),o=lt.month_days[lt.isLeapYear(e)?1:0][i];t.setDate(o)}return this.date=t},e.prototype._changed=function(){},e.prototype.$_getCellDate=function(t,e){var i=new Date(t);return i.setDate(e),i},e.prototype.$_createPicker=function(t){var e=this._container.doc,i=e.createElement("div"),o=i.style;return o.position="absolute",o.cssFloat="none",o.clear="both",o.boxSizing="border-box",o.margin="0px",o.overflow="auto",o.zIndex=String(t._baseZindex+2),i.className="rg-calendar",this._header=this.$_createHeader(e),i.appendChild(this._header),this._calendar=this.$_createCalendar(e),i.appendChild(this._calendar),this._footer=this.$_createFooter(e),i.appendChild(this._footer),i},e.prototype.$_createHeader=function(t){var e=this,i=this._headerElement=t.createElement("div"),o=i.style;o.position="relative",i.className="rg-cal-header";var r=t.createElement("div");(o=r.style).position="relative",o.textAlign="center",o.height="100%",i.appendChild(i.$_title=r),r.className="rg-cal-yearmonth";var n=t.createElement("span");(o=n.style).position="relative",o.verticalAlign="top",o.height="16px",n.className="rg-cal-year",r.appendChild(r.$_year=n),n.innerHTML="2020년",n.onclick=function(t){};var s=this.$_createYearSpin(t);r.appendChild(r.$_yearSpin=s);var a=t.createElement("span");(o=a.style).position="relative",o.verticalAlign="top",a.className="rg-cal-month",r.appendChild(r.$_month=a),a.innerHTML="1월",a.onmousedown=function(t){lt.stopEvent(t,!0);var e=lt.getOffset(this._headerElement.$_title.$_month);this._monthPicker.show(this._containerElement,e.x,e.y,!lt.isMobile()&&this._viewGridInside)}.bind(this);var l=t.createElement("span");(o=l.style).position="absolute",o.left="4px",o.minWidth="17px",o.minHeight="17px",l.className="rg-cal-prev-month",i.appendChild(i.$_prev=l),l.onclick=function(t){lt.incMonth(this._currDate,-1),this.$_buildCalendar()}.bind(this);var h=t.createElement("span");(o=h.style).position="absolute",o.right="4px",o.minWidth="17px",o.minHeight="17px",h.className="rg-cal-next-month",i.appendChild(i.$_next=h),h.onclick=function(t){lt.incMonth(this._currDate,1),this.$_buildCalendar()}.bind(this);var u=this._todayElement=t.createElement("span");return(o=u.style).position="absolute",o.right="35px",o.top="2px",u.className="rg-cal-today-button",i.appendChild(u),u.innerHTML="Today",u.onclick=function(t){var i=new Date;e.focused=!0,e.date=i,e._selected=!0,e._editor.$_selectDate(e._currDate)},i},e.prototype.$_createYearSpin=function(t){var e=t.createElement("div"),i=e.style;i.display="inline-block",i.visibility="hidden",i.position="relative",i.width="15px",i.height="100%",i.marginRight="2px";var o=t.createElement("span");(i=o.style).position="absolute",i.top="10%",i.left="0px",i.width="15px",i.height="40%",i.display="block",o.className="rg-cal-next-year",e.appendChild(o),o.onclick=function(t){this._currDate.setFullYear(this._currDate.getFullYear()+1),this.$_buildCalendar()}.bind(this);var r=t.createElement("span");return(i=r.style).position="absolute",i.top="50%",i.left="0px",i.width="15px",i.height="40%",i.display="block",r.className="rg-cal-prev-year",e.appendChild(r),r.onclick=function(t){this._currDate.setFullYear(this._currDate.getFullYear()-1),this.$_buildCalendar()}.bind(this),e},e.prototype.$_createFooter=function(t){var i,o=t.createElement("div"),r=o.style;return r.display="none",o.className="rg-cal-buttons",i=this._deleteElement=t.createElement("span"),this._deleteLabel&&(i.textContent=this._deleteLabel),i.className="rg-cal-delete-button",(r=i.style).float="left",i.onclick=function(t){this._selected=!0,this.date=null,this._editor.$_selectDate(null)}.bind(this),o.appendChild(i),i=this._saveElement=t.createElement("span"),this._saveLabel&&(i.textContent=this._saveLabel),i.className="rg-cal-save-button",(r=i.style).float="right",i.onclick=function(t){this.fireEvent(e.CLOSE_UP,!0)}.bind(this),o.appendChild(i),i=this._cancelElement=t.createElement("span"),this._cancelLabel&&(i.textContent=this._cancelLabel),i.className="rg-cal-cancel-button",(r=i.style).float="right",i.onclick=function(t){this._selected=!1,this._canceled=!0,this.fireEvent(e.CLOSE_UP,!1)}.bind(this),o.appendChild(i),o},e.prototype.$_createCalendar=function(t){var e=["sun","mon","tue","wed","thu","fri","sat"],i=t.createElement("table"),o=i.style;o.margin="2px",i.className="rg-cal-days-table";var r=this._headElement=t.createElement("thead");r.className="rg-cal-weeks",i.appendChild(i.$_head=r);var n=t.createElement("tr");r.appendChild(n);var s=[],a=t.createElement("th");(o=a.style).minWidth="20px",o.textAlign="center",a.className="rg-cal-week-year-week",n.appendChild(a);var l=t.createElement("span");a.appendChild(l),r.$_weeks=a;for(var h=0;h<7;h++){var u=t.createElement("th");(o=u.style).minWidth="20px",o.textAlign="center",u.className="rg-cal-week-"+e[h],n.appendChild(u);var c=t.createElement("span");c.innerHTML=lt.htmlEncode(this._weekDays[h]),u.appendChild(c),s.push(c)}r.$_cells=s;var d=t.createElement("tbody");d.className="rg-cal-days",i.appendChild(i.$_body=d);for(var p=d.$_rows=[],_=d.$_yearweeks=[],f=0;f<6;f++){var g=t.createElement("tr");d.appendChild(g),p.push(g),g.$_cells=s=[];var y=t.createElement("td");(o=y.style).padding="1px",g.appendChild(y);var m=t.createElement("span");y.appendChild(y.$_span=m),_.push(y);for(h=0;h<7;h++){var b=t.createElement("td");(o=b.style).padding="1px",b.className="rg-cal-day rg-cal-week-"+e[(h+this._startWeek)%7],g.appendChild(b),b.onclick=this._clickHandler,b.ondblclick=this._dblClickHandler;var v=t.createElement("span");b.appendChild(b.$_span=v),s.push(b)}}return i},e.prototype.$_show=function(t,e,i,o){var r=nt(this._element),n=st(r);this.focused=!1,this._selected=!1,this._canceled=!1,this._header.$_title.$_yearSpin.style.visibility=this._yearNavigation?"visible":"hidden",this._footer.style.display=this.showButtons?"":"none",this._todayElement.style.display=this._showToday?"initial":"none",this._header.$_title.style.marginRight=this._showToday?"70px":"40px";var s=this._date;this._currDate=s?new Date(s):new Date,this._today=new Date,this.$_buildCalendar(),lt.disableSelection(this._element),this._containerElement.appendChild(this._element);var a=lt.getBrowserSize(),l=lt.getClientRect(this._containerElement),h=lt.getClientRect(this._container._container),u=a.width,c=a.height,d=lt.getClientRect(this._element),p=n.pageXOffset||r.documentElement.scrollLeft,_=n.pageYOffset||r.documentElement.scrollTop;r.documentElement.scrollWidth>r.documentElement.clientWidth&&(c-=18),r.documentElement.scrollHeight>r.documentElement.clientHeight&&(u-=18),t+=h.left-l.left,e+=h.top-l.top,(lt.ieTen||lt.ieOld||lt.ieLeg)&&(t+=r.documentElement.scrollLeft,e+=r.documentElement.scrollTop),e+d.height>c+_&&(e=e-o.height-d.height)<0&&(e=c-d.height-2),this._dropDownPosition!=Va.EDITOR?t=Math.max(0,t+i-d.width):t+d.width>u+p&&(t=u-d.width),!lt.isMobile()&&this._viewGridInside&&(e=o.bottom-l.top+2,(l.bottom<o.bottom+d.height||c+_<o.bottom+d.height)&&(e=o.top-d.height-l.top-2)),lt.isMobile()||this._element.offsetParent||(t+=r.documentElement.offsetLeft,e+=r.documentElement.offsetTop),lt.move(this._element,Math.max(0,t),Math.max(0,e))},e.prototype.$_checkFocusedWeek=function(t,e,i){var o=this.$_isFocusedWeek(t,e.$_yearWeek);e.className="rg-cal-week-year-week "+(o?"rg-cal-week-year-focusweek":"")},e.prototype.$_isFocusedWeek=function(t,e){return t&&e&&El(t,this._startWeek)==e},e.prototype.$_isFocusedDay=function(t,e){var i=this._date;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},e.prototype.$_isToday=function(t,e){var i=this._today;return i&&t.getFullYear()==i.getFullYear()&&t.getMonth()==i.getMonth()&&e==i.getDate()},e.prototype.$_buildCalendar=function(){var t,e,i=["sun","mon","tue","wed","thu","fri","sat"],o=this._header,r=this._currDate,n=o.$_prev,s=o.$_next,a=o.$_title,l=r.getFullYear(),h=r.getMonth();a.$_year.innerHTML=(this._yearDisplayFormat?this._yearDisplayFormat.replace("{Y}",l+""):l+"년")+"&nbsp;",this._months&&this._months.length>0?a.$_month.innerHTML=this._months[h]:a.$_month.innerHTML=this._monthDisplayFormat?this._monthDisplayFormat.replace("{M}",(h+1).toString()):h+1+"월",n.title=0==h?l-1+"/12":l+"/"+lt.pad(h),s.title=11==h?l+1+"/01":l+"/"+lt.pad(h+2);for(var u=this._calendar.$_head.$_cells,c=0;c<7;c++){var d=u[(c+7-this._startWeek)%7];d.innerHTML=lt.htmlEncode(this._weekDays[c]),d.parentElement.className="rg-cal-week-"+i[c]}this._calendar.$_head.$_weeks.style.display=this.showWeeks?"":"none";for(var p=this._calendar.$_body,_=p.$_yearweeks,f=(c=0,_.length);c<f;c++)_[c].style.display=this.showWeeks?"":"none",_[c].onclick=this.weekSelectable?this._yearWeekClickHandler:null;var g=p.$_rows,y=lt.month_days[lt.isLeapYear(l)?1:0][h],m=new Date(r);m.setDate(1);var b=(m.getDay()+7-this._startWeek)%7;30==y&&6==b||31==y&&b>=5?lt.addChild(p,g[5]):lt.removeChild(p,g[5]),28==y&&0==b?lt.removeChild(p,g[4]):lt.addChild(p,g[4]);var v=0,w=_[0];if(u=g[0].$_cells,b>0){var C=l,x=h-1;x<0&&(C--,x=11);var I=lt.month_days[lt.isLeapYear(C)?1:0][x];for(c=0;c<b;c++){(k=u[c]).removeAttribute("title");var E=new Date(this._currDate);k.$_day=c-b,E.setDate(k.$_day+1);var S=this._editor.containsRange(E);0===c&&(w.$_yearWeek=El(E,this._startWeek),w.$_span.innerText=w.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,w,S)),k.$_span.innerHTML=I-b+c+1,k.className="rg-cal-day rg-cal-prev-day "+(S?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(c+this._startWeek)%7]}}for(c=b;c<7;c++){(k=u[c]).removeAttribute("title"),k.$_day=v++,k.$_span.innerHTML=v,(m=new Date(this._currDate)).setDate(v);S=this._editor.containsRange(m);0===c&&(w.$_yearWeek=El(m,this._startWeek),w.$_span.innerText=w.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,w,S)),t="rg-cal-day "+(this.$_isFocusedDay(r,v)?"rg-cal-focusday ":""),t+=this.$_isToday(r,v)?"rg-cal-today ":"",t+=(e=this._holidays&&this._holidays.contains(m))?e.styleName+" rg-cal-holiday ":"",t+=S?"":"rg-cal-disable-day ",t+="rg-cal-week-"+i[(c+this._startWeek)%7],k.className=t,e&&(t=e.getTooltip(this.$_getCellDate(r,v)))&&(k.title=t)}for(var O=1;O<6&&v<y;O++){u=g[O].$_cells;var R=_[O];for(c=0;c<7;c++)if(v<y){(k=u[c]).removeAttribute("title"),k.$_day=v++,(m=new Date(this._currDate)).setDate(v);S=this._editor.containsRange(m);0===c&&(R.$_yearWeek=El(m,this._startWeek),R.$_span.innerText=R.$_yearWeek.substr(4,2),this.$_checkFocusedWeek(this._currDate,R,S)),k.$_span.innerHTML=v,t="rg-cal-day "+(this.$_isFocusedDay(r,v)?"rg-cal-focusday ":""),t+=this.$_isToday(r,v)?"rg-cal-today ":"",t+=(e=this._holidays&&this._holidays.contains(m))?e.styleName+" rg-cal-holiday ":"",t+=S?"":"rg-cal-disable-day ",t+="rg-cal-week-"+i[(c+this._startWeek)%7],k.className=t,e&&(t=e.getTooltip(this.$_getCellDate(r,v)))&&(k.title=t)}else for(var D=1;c<7;c++){var k;(k=u[c]).removeAttribute("title"),k.$_day=v++,(m=new Date(this._currDate)).setDate(v);S=this._editor.containsRange(m);k.$_span.innerHTML=D++,k.className="rg-cal-day rg-cal-next-day "+(S?"":"rg-cal-disable-day ")+"rg-cal-week-"+i[(c+this._startWeek)%7]}}},e.prototype.onMonthPickerCloseUp=function(t,e){var i=e-this._currDate.getMonth();i&&(lt.incMonth(this._currDate,i),this.$_buildCalendar()),!lt.isMobile()&&this._editor.setFocus()},e.CLOSE_UP="onDatePickerCloseUp",e}(se),Tl=function(t){function e(e,i){var o=t.call(this,e,i)||this;o._minDate=new Date(1970,0,1),o._maxDate=new Date(2100,11,31),o._yearNavigation=!1,o._dropDownPosition=Va.BUTTON,o._dropDownWhenClick=!1,o._showToday=!0,o._yearDisplayFormat="{Y}년",o._monthDisplayFormat="{M}월",o._months=null,o._weekDays=null,o._showWeeks=!1,o._startWeek=0,o._weekSelectable=!1,o._weekSeparator="",o._commitOnSelect=!1,o._holidays=null,o._showButtons=!0,o._saveLabel="Save",o._cancelLabel="Cancel",o._deleteLabel="Delete",o._holidayCollection=new Dl,o._closing=!1,o._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,o._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e===this._list._element)return void this._list._monthPicker.hide();if(e===this._list._monthPicker._element)return;e=e.parentElement}this.closeUp(!0)}}.bind(o);var r=e.editorOptions;return o._yearDisplayFormat=r.yearDisplayFormat,o._monthDisplayFormat=r.monthDisplayFormat,o._months=r.months,o._weekDays=r.weekDays,o._baseZindex=e.displayOptions.baseZindex,o._list=new Pl(e.container,o),o._list.addListener(o),o}return o(e,t),e.prototype._doDispose=function(){this._globalMouseHandler=null,this._holidayCollection=this._holidayCollection.dispose(),this._list=this._list&&this._list.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"editFormat",{get:function(){return this._editFormat},set:function(t){t!=this._editFormat&&(this._editFormat=t,this.datetimeFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearNavigation",{get:function(){return this._yearNavigation},set:function(t){t!=this._yearNavigation&&(this._yearNavigation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){t!=this._dropDownPosition&&(this._dropDownPosition=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){t!=this._dropDownWhenClick&&(this._dropDownWhenClick=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showToday",{get:function(){return this._showToday},set:function(t){t!=this._showToday&&(this._showToday=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weekDays",{get:function(){return this._weekDays},set:function(t){t!=this._weekDays&&(this._weekDays=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showWeeks",{get:function(){return this._showWeeks},set:function(t){t!=this._showWeeks&&(this._showWeeks=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWeek",{get:function(){return this._startWeek},set:function(t){(t=null==t||isNaN(t=Math.floor(t))?0:t)!==this._startWeek&&(this._startWeek=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weekSelectable",{get:function(){return this._weekSelectable},set:function(t){t!=this._weekSelectable&&(this._weekSelectable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weekSeparator",{get:function(){return this._weekSeparator},set:function(t){t!=this._weekSeparator&&(this._weekSeparator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){t!=this._commitOnSelect&&(this._commitOnSelect=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultShowDate",{get:function(){return this._defaultShowDate},set:function(t){t!=this._defaultShowDate&&(this._defaultShowDate=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultDate",{get:function(){return this._defaultDate},set:function(t){t!=this._defaultDate&&(this._defaultDate=t instanceof Date?new Date(t):t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"holidays",{get:function(){return this._holidays},set:function(t){this._holidays=t,t?(this._holidayCollection=this._holidayCollection||new Dl,this._holidayCollection.editor=this,this._holidayCollection.load(t)):this._holidayCollection.setNull(),this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listing",{get:function(){return this._list.listing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthListing",{get:function(){return this._list.monthListing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){this._showButtons=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"saveLabel",{get:function(){return this._saveLabel},set:function(t){this._saveLabel},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){this._cancelLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deleteLabel",{get:function(){return this._deleteLabel},set:function(t){this._deleteLabel=t},enumerable:!0,configurable:!0}),e.prototype.dropDown=function(){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var t=nt(this._container),e=st(t),i=this._grid.editorOptions,o=this._list,r=t.documentElement,n=lt.getClientRect(this._container);return o.viewGridInside=i.viewGridInside,o.yearNavigation=this._yearNavigation,o.dropDownPosition=this._dropDownPosition,o.showToday=this._showToday,o.yearDisplayFormat=this._yearDisplayFormat,o.monthDisplayFormat=this._monthDisplayFormat,o.months=this._months,o.minDate=this._minDate,o.maxDate=this._maxDate,o.showWeeks=this._showWeeks,o.startWeek=this._startWeek||0,o.weekSelectable=this.weekSelectable,o.weekSeparator=this.weekSeparator,o.showButtons=this.showButtons,o.saveLabel=this.saveLabel,o.cancelLabel=this.cancelLabel,o.deleteLabel=this.deleteLabel,o.holidays=this._holidayCollection.isNull?i._holidayCollection:this._holidayCollection,this._weekDays&&this._weekDays.length>0&&o.setWeekDays(this._weekDays),this.$_setListDate(),this._isMobile?(this._showMarquee(r),o.show(r,0,0,0,null),this._centerPopup(r,o._element)):o.show(r,n.cx+1,n.cy+n.height,this._cellBounds.width,lt.getClientRect(this._editor)),e.addEventListener("mousedown",this._globalMouseHandler),!0}},e.prototype.closeUp=function(t){if(this.listing){var e=st(nt(this._container));this._closing=!0;try{e.removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),this._list.hide(),t&&this._list.selected?this._isMobile?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()):this._list.canceled&&this._controller.cancelEditor(!1)}finally{this._closing=!1}return!0}},e.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._yearNavigation=!1,this._textReadOnly=!1,this._showToday=!0,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._showWeeks=!1,this._startWeek=0,this._weekSelectable=!1,this._weekSeparator="",this._commitOnSelect=!1,this._defaultShowDate=w.NORMAL,this._holidayCollection&&this._holidayCollection.setNull(),this._showButtons=!0,this._cancelLabel="Cancel",this._saveLabel="Save",this._deleteLabel="Delete"},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e);var i=this._editField().dataType;this._weekSelectable=this._weekSelectable&&i!==r.DATE&&i!==r.DATETIME},e.prototype.setEditValue=function(e){t.prototype.setEditValue.call(this,e),this.weekSelectable?this._date=Il(e):this._date="string"==typeof e?this._dateConverter.getDateNull(e):e},e.prototype.getEditValue=function(e,i){void 0===e&&(e=!0),void 0===i&&(i=!1);var o=t.prototype.getEditValue.call(this,e),n=this._editField().dataType;return o&&i&&(n==r.DATE||n==r.DATETIME)&&(o=this._minDate?Math.max(this._minDate.getTime(),o):o,(o=this._maxDate?Math.min(this._maxDate.getTime(),o):o)&&(o=new Date(o))),o},e.prototype._createEditor=function(e){return t.prototype._createEditor.call(this,e)},e.prototype._textHandler=function(){this._requestStart(!1)},e.prototype._compositionstartHandler=function(t){this.isDisabled()||this._requestStart(!1)},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=this._list;if(i.monthListing)return 27==e.keyCode&&(this.closeMonthList(),lt.stopEvent(e,!0),!0);var o=this.listing,r=o&&i.focused;switch(e.keyCode){case 13:if(this.closeUp(!0))return lt.stopEvent(e,!0),!this._sendToParent(e);break;case 27:if(this.closeUp(!1))return lt.stopEvent(e,!0),!0;break;case 36:if(r)return e.preventDefault(),lt.stopEvent(e,!0),!0;break;case 35:if(r)return lt.stopEvent(e,!0),this.$_selectDate(i.lastDay()),!0;break;case 37:if(r)return lt.stopEvent(e,!0),this.$_selectDate(i.incDay(-1)),!0;break;case 39:if(r)return lt.stopEvent(e,!0),this.$_selectDate(i.incDay(1)),!0;break;case 33:if(r)return lt.stopEvent(e,!0),this.$_selectDate(i.incMonth(-1)),!0;break;case 34:if(r)return lt.stopEvent(e,!0),this.$_selectDate(i.incMonth(1)),!0;break;case 40:if(e.altKey&&!o)return this._requestStart(),lt.stopEvent(e,!0),!0;if(o)return lt.stopEvent(e,!0),r?this.$_selectDate(i.incDay(7)):(this._list.focused=!0,this.$_setListDate()),!0;break;case 38:if(e.altKey&&o)return this.closeUp(!1),lt.stopEvent(e,!0),!0;if(o){if(lt.stopEvent(e,!0),r)i.date.getDate()<=7?this._list.focused=!1:this.$_selectDate(i.incDay(-7));else this._list.focused=!1;return!0}break;case 84:(e.altKey||e.altKey&&e.ctrlKey)&&o&&(lt.stopEvent(e,!0),this._list.date=new Date,this.$_selectDate(this._list.date))}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._keyPressHandler=function(e){if(!this.isDisabled()){var i=this._list,o=e.keyCode||e.which,r=String.fromCharCode(o);if(r.toLocaleLowerCase()==this.todayChar){if(lt.stopEvent(e,!0),this.listing)return i.focused=!0,this.$_selectDate(i.today),!0}else{if(lt.isFirefox&&(e.ctrlKey||0===o))return void t.prototype._keyPressHandler.call(this,e);if(lt.isMac&&e.metaKey&&lt.included(o,99,118))return void t.prototype._keyPressHandler.call(this,e);if(!this._regx.test(r))return void e.preventDefault()}t.prototype._keyPressHandler.call(this,e),e.keyCode&&this.textReadOnly&&e.preventDefault()}},e.prototype.$_resetValue=function(t){if(void 0===t&&(t=!1),this.visible||t){var e=this._editor,i=e.selectionStart,o=e.selectionEnd,r=e.value?e.value.length:0;e.value=e.value.replace(xl,"");var n=e.value?e.value.length:0;this._isMobile||(n==r?e.setSelectionRange(i,o):e.setSelectionRange(o,o))}},e.prototype._dispatchChange=function(){this._isMobile?(this.$_resetValue(!0),t.prototype._dispatchChange.call(this)):this.visible&&(this.$_resetValue(),t.prototype._dispatchChange.call(this))},e.prototype._changeHandler=function(e){t.prototype._changeHandler.call(this,e)},e.prototype._pasteHandler=function(e){t.prototype._pasteHandler.call(this,e)},e.prototype._copyHandler=function(e){t.prototype._copyHandler.call(this,e)},e.prototype._requestStart=function(e){return!!t.prototype._requestStart.call(this)&&(this._isMobile?e&&this.dropDown():!1!==e&&this.dropDown(),!0)},e.prototype.setBounds=function(e,i,o,r,n){t.prototype.setBounds.call(this,e,i,o,r,n)},e.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(!this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},e.prototype.dropDownList=function(t){this.dropDown()},e.prototype.closeList=function(t){this.closeUp(t)},e.prototype.closeMonthList=function(){this._list.closeMonth()},e.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown()},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype._isDateEditor=function(){var t=this._editField().dataType;return t==r.DATE||t==r.DATETIME||!this.weekSelectable},e.prototype.$_selectDate=function(t){if(t){if(this._date=t,this.containsRange(t)){var e=void 0;e=this.weekSelectable?El(t,this._startWeek,!!this.weekSeparator):this._dateConverter.getText(this._date),this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._isEmptyTextValue=!1,this._doChanged()}}else this._date=null,this._mask&&this._mask.clearBuffer(),this._editor.value="",this._doChanged()},e.prototype.$_setListDate=function(){var t,e=this._defaultDate instanceof Date?new Date(this._defaultDate):this._dateConverter.getDateNull(this._defaultDate),i=this.isEmptyTextValue()?"":this._editor.value;switch(this._mask&&(i=this._mask.getStripValue()),t=this.weekSelectable?Il(i):this._dateConverter.getDateNull(i),this._defaultShowDate){case w.TODAY:t=new Date;break;case w.NORMAL:break;case w.TODAY_WHEN_NULL:t=t||new Date;break;case w.DEFAULT_WHEN_NULL:t=t||e;break;case w.DEFAULT:t=e}t&&(this._list.date=t)},e.prototype.onDatePickerCloseUp=function(t,e){this.closeUp(e),!this._isMobile&&this.setFocus()},e.INPUT_CSS="rg-date-editor",e}(ya),Ml=function(t){function e(e,i,o){var r=t.call(this)||this;r._dropDownPosition=Va.BUTTON,r._viewGridInside=!1,r._selected=!1,r._focused=!1;var n=st(e.doc);return r._jquery=n&&n.jQuery,r._jquery,r._editor=i,r._container=e,r._btOptions=o,r._element=r.$_createList(e.doc),r}return o(e,t),e.prototype._doDispose=function(){this._jquery=null,this._editor=null,this._container=null,this._containerElement=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"date",{get:function(){return this._date},set:function(t){if(this._date=t,t.getTime()!==this._date.getTime()&&(this._currDate=new Date(t),this._date=new Date(t),this.listing)){var e=new Date(t.getFullYear(),t.getMonth(),t.getDate());this._jquery&&this._jquery(this._element).datepicker("update",e)}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){this._viewGridInside=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"listing",{get:function(){return this._jquery&&this._jquery(this._element).data("datepicker")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this._selected},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focused",{get:function(){return this._focused},set:function(t){t!=this._focused&&(this._focused=t,this._element.style.border=t?"1px solid rgba(50, 50, 50, 1)":"1px solid rgba(50, 50, 50, 0.3)",this._element.style.boxShadow=t?"rgba(0, 0, 0, 0.8) 1px 2px 5px":"rgba(0, 0, 0, 0.5) 1px 2px 5px")},enumerable:!0,configurable:!0}),e.prototype.$_destroy=function(){this._jquery&&this._jquery(this._element).datepicker("destroy")},e.prototype.keydown=function(t){if(this._jquery){this._jquery(this._element).datepicker("keydown",t);var e=this._jquery(this._element).data("datepicker").viewDate;e instanceof Date&&(this.date=e,this._editor&&this._editor.selectDate(this._date))}},e.prototype.$_createList=function(t){var e=t.createElement("div"),i=e.style;return i.position="absolute",i.cssFloat="none",i.clear="both",i.boxSizing="border-box",i.zIndex=String(this._editor._baseZindex+2),i.margin="0px",i.overflow="auto",e.className="rg-calendar",e},e.prototype.show=function(t,e,i,o,r){if(this._containerElement=lt.isMobile()&&this._viewGridInside?this._container._container:t,!this.$_createCalendar())return alert("BootStrap DatePicker Not Include"),!1;this.$_show(e,i,o,r)},e.prototype.$_createCalendar=function(){var t,e=this._element,i=this._btOptions;return this._date&&(t=new Date(this._date.getFullYear(),this._date.getMonth(),this._date.getDate())),!!this._jquery&&(this._jquery(e).datepicker&&this._jquery(e).datepicker(i).datepicker("setDate",t).on("changeDate",function(t){var e=t.date;e&&!this._editor.containsRange(e)||(e?(this._date=new Date(e),this._selected=!0):(this._date=void 0,this._selected=!0),this.fireEvent(Pl.CLOSE_UP,!0))}.bind(this)),!0)},e.prototype.$_show=function(t,e,i,o){var r=this._container.doc,n=st(r);this.focused=!1,this._selected=!1,this._containerElement.appendChild(this._element);var s=this._date;this._currDate=s?new Date(s):new Date;var a=lt.getBrowserSize(),l=lt.getClientRect(this._containerElement),h=lt.getClientRect(this._container._container),u=a.width,c=a.height,d=lt.getClientRect(this._element),p=n.pageXOffset||r.documentElement.scrollLeft,_=n.pageYOffset||r.documentElement.scrollTop;r.documentElement.scrollWidth>r.documentElement.clientWidth&&(c-=18),r.documentElement.scrollHeight>r.documentElement.clientHeight&&(u-=18),t+=h.left-l.left,e+=h.top-l.top,(lt.ieTen||lt.ieOld||lt.ieLeg)&&(t+=r.documentElement.scrollLeft,e+=r.documentElement.scrollTop),e+d.height>c+_&&o&&(e=e-o.height-d.height)<0&&(e=c-d.height-2),this._dropDownPosition!=Va.EDITOR?t=Math.max(0,t+i-d.width):t+d.width>u+p&&(t=u-d.width),!lt.isMobile()&&this._viewGridInside&&o&&(e=o.bottom-l.top+2,(l.bottom<o.bottom+d.height||c+_<o.bottom+d.height)&&(e=o.top-d.height-l.top-2)),lt.isMobile()||this._element.offsetParent||(t+=r.documentElement.offsetLeft,e+=r.documentElement.offsetTop),lt.move(this._element,Math.max(0,t),Math.max(0,e))},e.prototype.today=function(){return this.date=new Date},e.prototype.incDay=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&e.setDate(this._date.getDate()+t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},e.prototype.incMonth=function(t){var e;return this._date.getMonth()==this._currDate.getMonth()?(e=new Date(this._date),this._date&&lt.incMonth(e,t)):(e=this._currDate,e=new Date(e.getFullYear(),e.getMonth(),1)),this.date=e},e.prototype.firstDay=function(){var t=new Date(this._currDate);return this._date&&t.setDate(1),this.date=t},e.prototype.lastDay=function(){var t=new Date(this._currDate);if(this._date){var e=t.getFullYear(),i=t.getMonth(),o=lt.month_days[lt.isLeapYear(e)?1:0][i];t.setDate(o)}return this.date=t},e}(se),Ll=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._minDate=new Date(1970,0,1),o._maxDate=new Date(2100,11,31),o._dropDownPosition=Va.BUTTON,o._dropDownWhenClick=!1,o._commitOnSelect=!1,o._regx=/[0-9]|\.|\-|\/|a|A|p|P|m/,o._closing=!1,o._globalMouseHandler=function(t){var e=t.target;if(this._isMarquee(e))this.closeUp(!1);else{for(;e;){if(e==this._list._element)return;e=e.parentNode}this.closeUp(!0)}}.bind(o),o}return o(e,t),e.prototype._doDispose=function(){this._globalMouseHandler=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"list",{get:function(){return this._list},set:function(t){this._list=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"btOptions",{get:function(){return this._btOptions},set:function(t){this._btOptions=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editFormat",{get:function(){return this.datetimeFormat},set:function(t){this.datetimeFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minDate",{get:function(){return this._minDate},set:function(t){this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownPosition",{get:function(){return this._dropDownPosition},set:function(t){this._dropDownPosition=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownWhenClick",{get:function(){return this._dropDownWhenClick},set:function(t){this._dropDownWhenClick=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitOnSelect",{get:function(){return this._commitOnSelect},set:function(t){this._commitOnSelect=t},enumerable:!0,configurable:!0}),e.prototype.dropDown=function(){if(!(this.readOnly||this._controller._readOnly||this.listing||this._closing)){var t=nt(this._container),e=st(t),i=this._grid,o=this._list=new Ml(i.container,this,this._btOptions),r=t.documentElement,n=lt.getBounds(this._container);return o.addListener(this),o.viewGridInside=this._options&&this._options.viewGridInside,o.dropDownPosition=this._dropDownPosition,o.minDate=this._minDate,o.maxDate=this._maxDate,this.$_setListDate(),this._isMobile?(this._showMarquee(r),o.show(r,0,0,0,null),this._centerPopup(r,o._element)):o.show(t.documentElement,n.x+1,n.y+n.height,this._cellBounds.width,lt.getClientRect(this._editor)),e.addEventListener("mousedown",this._globalMouseHandler),!0}return!1},e.prototype.closeUp=function(t){if(this.listing){var e=st(nt(this._container));this._closing=!0;try{e.removeEventListener("mousedown",this._globalMouseHandler),this._closeMarquee(),t&&this._list.selected&&(this._isMobile?(this._started=!0,this.$_selectDate(this._list.date),this._dispatchCommit()):(this.$_selectDate(this._list.date),this._commitOnSelect&&this._dispatchCommit()))}finally{this.$_listDestroy(),this._closing=!1}return!0}return!1},e.prototype.buttonClicked=function(t){this.listing?this.closeUp(!1):this.dropDown()},e.prototype.dropDownList=function(){this.dropDown()},e.prototype.closeList=function(t){this.closeUp(t)},e.prototype.$_setListDate=function(){var t=this._editor.value;t&&this._mask&&(t=this._mask.getStripValue());var e=this._dateConverter.getDateNull(t);e&&(this._list.date=e)},e.prototype.selectDate=function(t){this.$_selectDate(t)},e.prototype.$_selectDate=function(t){if(t&&t!=this._date){if(this._date=t,this.containsRange(t)){var e=this._dateConverter.getText(this._date);this._mask&&(e=this._mask.writeBuffer(e)),this._editor.value=e,this._isEmptyTextValue=!1,this._doChanged()}}else void 0===t&&(this._editor.value=this._mask?(this._mask.clearBuffer(),this._mask.writeBuffer(null)):"",this._isEmptyTextValue=!1,this._doChanged())},e.prototype.containsRange=function(t){return(!this._minDate||t>=this._minDate)&&(!this._maxDate||t<=this._maxDate)},Object.defineProperty(e.prototype,"listing",{get:function(){return!!this._list&&this._list.listing},enumerable:!0,configurable:!0}),e.prototype.initOptions=function(){t.prototype.initOptions.call(this),this._dropDownWhenClick=!1,this._textReadOnly=!1,this._viewGridInside=!1,this._minDate=new Date(1970,0,1),this._maxDate=new Date(2100,11,31),this._commitOnSelect=!1},e.prototype._isDateEditor=function(){return!0},e.prototype.setEditValue=function(e){t.prototype.setEditValue.call(this,e),this._date="string"==typeof e?this._dateConverter.getDateNull(e):e},e.prototype.getEditValue=function(e,i){var o=t.prototype.getEditValue.call(this,e),n=this._editField().dataType;return o&&i&&(n==r.DATE||n==r.DATETIME)&&(o=o.getTime(),o=this._minDate?Math.max(this._minDate.getTime(),o):o,(o=this._maxDate?Math.min(this._maxDate.getTime(),o):o)&&(o=new Date(o))),o},e.prototype._requestStart=function(e){return!!t.prototype._requestStart.call(this,e)&&(this._isMobile?e&&this.dropDown():!1!==e&&this.dropDown(),!0)},e.prototype._textHandler=function(){this._requestStart()},e.prototype._compositionstartHandler=function(){this._requestStart()},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){var i=this._list,o=this.listing,r=o&&i.focused;switch(e.keyCode){case 13:if(this.closeUp(!0))return lt.stopEvent(e,!0),!this._sendToParent(e);break;case 27:if(this.closeUp(!1))return lt.stopEvent(e,!0),!0;break;case 36:if(r)return lt.stopEvent(e,!0),this.$_selectDate(i.firstDay()),!0;break;case 35:if(r)return lt.stopEvent(e,!0),this.$_selectDate(i.lastDay()),!0;break;case 37:case 39:if(r)return lt.stopEvent(e,!0),i&&i.keydown(e),!0;break;case 33:if(r)return lt.stopEvent(e,!0),this.$_selectDate(i.incMonth(-1)),!0;break;case 34:if(r)return lt.stopEvent(e,!0),this.$_selectDate(i.incMonth(1)),!0;break;case 40:if(e.altKey&&!o)return this._requestStart(),lt.stopEvent(e,!0),!0;if(o)return lt.stopEvent(e,!0),r?i.keydown(e):(i.focused=!0,this.$_setListDate()),!0;break;case 38:if(e.altKey&&o)return this.closeUp(!1),lt.stopEvent(e,!0),!0;if(o){if(lt.stopEvent(e,!0),r)i.date.getDate()<=7?i.focused=!1:i.keydown(e);else i.focused=!1;return!0}break;case 84:(e.altKey||e.altKey&&e.ctrlKey)&&o&&(lt.stopEvent(e,!0),i.date=new Date,this.$_selectDate(i.date))}return t.prototype._keyDownHandler.call(this,e)}},e.prototype._keyPressHandler=function(e){if(!this.isDisabled()){var i=this._list,o=String.fromCharCode(e.keyCode||e.charCode);if(o.toLocaleLowerCase()==this.todayChar){if(lt.stopEvent(e,!0),this.listing)return i.focused=!0,this.$_selectDate(i.today()),!0}else{if(lt.isFirefox&&(e.ctrlKey||0===e.charCode))return t.prototype._keyPressHandler.call(this,e);if(!this._regx.test(o))return void e.preventDefault()}t.prototype._keyPressHandler.call(this,e),e.keyCode&&this.textReadOnly&&e.preventDefault()}},e.prototype.$_resetValue=function(t){if(void 0===t&&(t=!1),this.visible||t){var e=this._editor,i=e.selectionStart,o=e.selectionEnd,r=e.value?e.value.length:0;e.value=e.value.replace(xl,"");var n=e.value?e.value.length:0;this._isMobile||(n==r?e.setSelectionRange(i,o):e.setSelectionRange(o,o))}},e.prototype.setBounds=function(e,i,o,r,n){t.prototype.setBounds.call(this,e,i,o,r,n)},e.prototype._doChanged=function(){this._isMobile?!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()):(this._started&&this._requestStart(),this._started&&!this._controller.readOnly&&this._controller.editable&&(this._modified=!0,this._dispatchChange()))},e.prototype._dispatchChange=function(){this._isMobile?(this.$_resetValue(!0),t.prototype._dispatchChange.call(this)):this.visible&&(this.$_resetValue(),t.prototype._dispatchChange.call(this))},e.prototype.onDatePickerCloseUp=function(t,e){this.closeUp(e),!this._isMobile&&this.setFocus()},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.$_listDestroy=function(){var t=this._list&&this._list._element.parentElement;this._list&&(this._list.$_destroy(),t.removeChild(this._list._element),this._list.dispose(),delete this._list)},e.INPUT_CSS="rg-btdate-editor",e}(ya),Fl=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._minDate=new Date(1970,0,1),o._maxDate=new Date(2100,11,31),o}return o(e,t),Object.defineProperty(e.prototype,"minDate",{get:function(){return this._minDate},set:function(t){t!=this._minDate&&(this._minDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._minDate&&this._minDate.setHours(0,0,0,0),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxDate",{get:function(){return this._maxDate},set:function(t){t!=this._maxDate&&(this._maxDate=t?t instanceof Date?t:"string"==typeof t?this._dateConverter.getDateNull(t):null:null,this._maxDate&&this._maxDate.setHours(23,59,59),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hasList",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"native",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._createEditor=function(e){var i=t.prototype._createEditor.call(this,e);return i.setAttribute("type","date"),i.tabIndex=this._isMobile?-1:0,i},e.prototype._getInputSelector=function(){return e.INPUT_CSS},e.prototype.initOptions=function(){t.prototype.initOptions.call(this)},e.prototype.hasButton=function(t){return null==t||t},e.prototype.setVisible=function(e,i){void 0===i&&(i=!1),t.prototype.setVisible.call(this,e,i),this.visible&&this._editor.click()},e.prototype.setEditIndex=function(e){t.prototype.setEditIndex.call(this,e);var i=this._editor;i.min=this._minDate?this.$_toInputDate(this._minDate):"",i.max=this._maxDate?this.$_toInputDate(this._maxDate):""},e.prototype.setEditValue=function(t){this._date="string"==typeof t?this._dateConverter.getDateNull(t):t,this._editor.value=this.$_toInputDate(this._date),this._isEmptyTextValue=!1},e.prototype._keyDownHandler=function(e){if(!this.isDisabled()){switch(e.keyCode){case 40:if(e.altKey)return this._requestStart(),!0}return t.prototype._keyDownHandler.call(this,e)}},e.prototype.setBounds=function(e,i,o,r,n){t.prototype.setBounds.call(this,e,i,o,r,0),this._editor&&lt.isiOS&&(this._editor.style.minWidth=o+"px",this._editor.style.width=o+"px")},e.prototype.$_toInputDate=function(t){return t?e.Formatter.getText(t):""},e.INPUT_CSS="rg-ndate-editor",e.Formatter=new Ge("yyyy-MM-dd"),e}(ua),Nl=function(t){function e(e){var i=t.call(this,e)||this;return i._readOnly=!1,i._editable=!lt.isMobile(),i._checkable=!0,i._updatable=!0,i._appendable=!1,i._insertable=!1,i._deletable=!1,i._revertable=!1,i._erasable=!1,i._movable=!1,i._commitByCell=!1,i._editWhenFocused=!1,i._commitWhenNoEdit=!1,i._commitWhenExitLast=!1,i._commitWhenLeave=!1,i._crossWhenExitLast=!1,i._validateOnEdited=!0,i._validateOnExit=!1,i._hintOnError=!0,i._deleteRowsMessage=window.RG_CONST&&window.RG_CONST.DELETEROWSMESSAGE?window.RG_CONST.DELETEROWSMESSAGE:"선택된 행(들)을 삭제하시겠습니까??",i._invalidFormatMessage=window.RG_CONST&&window.RG_CONST.INVALIDFORMATMESSAGE?window.RG_CONST.INVALIDFORMATMESSAGE:"잘못된 입력 유형입니다.",i._showInvalidFormatMessage=!0,i._confirmWhenDelete=!0,i._editWhenClickFocused=!1,i._commitLevel=p.IGNORE,i._useTabKey=!0,i._useArrowKeys=!0,i._skipReadOnly=!1,i._skipReadOnlyCell=!1,i._verticalMoveStep=In.CELL,i._enterToTab=!1,i._enterToNextRow=!1,i._enterToEdit=!1,i._maxLengthToNextCell=!1,i._forceInsert=!1,i._forceAppend=!1,i._checkDiff=!1,i._checkCellDiff=!1,i._strictDiff=!1,i._deletableWhenEdit=!0,i._showCommitError=!1,i._firstCellWhenInsert=!1,i._appendWhenInsertKey=!1,i._appendWhenExitLast=!1,i._showOnlyValidationMessage=!0,i._displayEmptyEditRow=!1,i._buttonClickWhenSpace=!1,i._exitGridWhenTab=M.NONE,i._cancelWhenLastUndo=!1,i._exceptDataClickWhenButton=!1,i._removeValidateOnCommit=!1,i._validateOnlyEditColumn=!1,i._columnEditableFirst=!1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"readOnly",{get:function(){return this._readOnly},set:function(t){t!=this._readOnly&&(this._readOnly=t,this._refreshOwner(),this._invalidateEditor())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(t){t!=this._editable&&(this._editable=t,this._refreshOwner(),this._invalidateEditor())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"columnEditableFirst",{get:function(){return this._columnEditableFirst},set:function(t){t!=this._columnEditableFirst&&(this._columnEditableFirst=t,this._refreshOwner(),this._invalidateEditor())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkable",{get:function(){return this._checkable},set:function(t){t!=this._checkable&&(this._checkable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"updatable",{get:function(){return this._updatable},set:function(t){t!=this._updatable&&(this._updatable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appendable",{get:function(){return this._appendable},set:function(t){t!=this._appendable&&(this._appendable=t,this.displayEmptyEditRow=this._displayEmptyEditRow,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"insertable",{get:function(){return this._insertable},set:function(t){t!=this._insertable&&(this._insertable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deletable",{get:function(){return this._deletable},set:function(t){t!=this._deletable&&(this._deletable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"revertable",{get:function(){return this._revertable},set:function(t){t!=this._revertable&&(this._revertable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"erasable",{get:function(){return this._erasable},set:function(t){t!=this._erasable&&(this._erasable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return this._movable},set:function(t){t!=this._movable&&(this._movable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitByCell",{get:function(){return this._commitByCell},set:function(t){t!=this._commitByCell&&(this._commitByCell=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(t){this._editWhenFocused=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitWhenNoEdit",{get:function(){return this._commitWhenNoEdit},set:function(t){this._commitWhenNoEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitWhenExitLast",{get:function(){return this._commitWhenExitLast},set:function(t){this._commitWhenExitLast=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitWhenLeave",{get:function(){return this._commitWhenLeave},set:function(t){this._commitWhenLeave=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"crossWhenExitLast",{get:function(){return this._crossWhenExitLast},set:function(t){this._crossWhenExitLast=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validateOnEdited",{get:function(){return this._validateOnEdited},set:function(t){this._validateOnEdited=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validateOnExit",{get:function(){return this._validateOnExit},set:function(t){this._validateOnExit=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hintOnError",{get:function(){return this._hintOnError},set:function(t){this._hintOnError=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"removeValidateOnCommit",{get:function(){return this._removeValidateOnCommit},set:function(t){this._removeValidateOnCommit=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validateOnlyEditColumn",{get:function(){return this._validateOnlyEditColumn},set:function(t){this._validateOnlyEditColumn=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deleteRowsMessage",{get:function(){return this._deleteRowsMessage},set:function(t){this._deleteRowsMessage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invalidFormatMessage",{get:function(){return this._invalidFormatMessage},set:function(t){this._invalidFormatMessage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showInvalidFormatMessage",{get:function(){return this._showInvalidFormatMessage},set:function(t){this._showInvalidFormatMessage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"confirmWhenDelete",{get:function(){return this._confirmWhenDelete},set:function(t){this._confirmWhenDelete=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editWhenClickFocused",{get:function(){return this._editWhenClickFocused},set:function(t){this._editWhenClickFocused=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitLevel",{get:function(){return this._commitLevel},set:function(t){this._commitLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useTabKey",{get:function(){return this._useTabKey},set:function(t){this._useTabKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"useArrowKeys",{get:function(){return this._useArrowKeys},set:function(t){this._useArrowKeys=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipReadOnly",{get:function(){return this._skipReadOnly},set:function(t){this._skipReadOnly=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skipReadOnlyCell",{get:function(){return this._skipReadOnlyCell},set:function(t){this._skipReadOnlyCell=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"verticalMoveStep",{get:function(){return this._verticalMoveStep},set:function(t){this._verticalMoveStep=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterToTab",{get:function(){return this._enterToTab},set:function(t){this._enterToTab=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterToNextRow",{get:function(){return this._enterToNextRow},set:function(t){this._enterToNextRow=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterToEdit",{get:function(){return this._enterToEdit},set:function(t){this._enterToEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxLengthToNextCell",{get:function(){return this._maxLengthToNextCell},set:function(t){this._maxLengthToNextCell=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceInsert",{get:function(){return this._forceInsert},set:function(t){this._forceInsert=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceAppend",{get:function(){return this._forceAppend},set:function(t){this._forceAppend=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkDiff",{get:function(){return this._checkDiff},set:function(t){this._checkDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkCellDiff",{get:function(){return this._checkCellDiff},set:function(t){this._checkCellDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"strictDiff",{get:function(){return this._strictDiff},set:function(t){this._strictDiff=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deletableWhenEdit",{get:function(){return this._deletableWhenEdit},set:function(t){this._deletableWhenEdit=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showCommitError",{get:function(){return this._showCommitError},set:function(t){this._showCommitError=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"firstCellWhenInsert",{get:function(){return this._firstCellWhenInsert},set:function(t){this._firstCellWhenInsert=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appendWhenInsertKey",{get:function(){return this._appendWhenInsertKey},set:function(t){this._appendWhenInsertKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appendWhenExitLast",{get:function(){return this._appendWhenExitLast},set:function(t){this._appendWhenExitLast=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showOnlyValidationMessage",{get:function(){return this._showOnlyValidationMessage},set:function(t){this._showOnlyValidationMessage=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayEmptyEditRow",{get:function(){return this._displayEmptyEditRow},set:function(t){var e=this.grid;this._displayEmptyEditRow=t,this._displayEmptyEditRow&&this._appendable?e.itemSource.appendDummy():e.itemSource.cancelDummy(),this._refreshOwner()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonClickWhenSpace",{get:function(){return this._buttonClickWhenSpace},set:function(t){this._buttonClickWhenSpace=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exitGridWhenTab",{get:function(){return this._exitGridWhenTab},set:function(t){this._exitGridWhenTab=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelWhenLastUndo",{get:function(){return this._cancelWhenLastUndo},set:function(t){this._cancelWhenLastUndo=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exceptDataClickWhenButton",{get:function(){return this._exceptDataClickWhenButton},set:function(t){this._exceptDataClickWhenButton=t},enumerable:!0,configurable:!0}),e.prototype.isWritable=function(){return this._editable&&!this._readOnly},e.prototype.canUpdate=function(t){return!this._readOnly&&(t||this._updatable)},e.prototype.canInsert=function(){return!this._readOnly&&this._insertable},e.prototype.canAppend=function(){return!this._readOnly&&this._appendable},e.prototype.canDelete=function(){return!this._readOnly&&this._deletable},e}(Is),Vl=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){this._cell=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"value",{set:function(t){this._value=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cell",{set:function(t){this._cell=t},enumerable:!0,configurable:!0}),e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_VALUE:return this._value;case e.ID_ROW:return this._cell.itemIndex+1;case e.ID_COLUMN_HEADER:var i=this._cell&&this._cell.column;return i&&i.header&&i.header.text?i.header.text:i.displayText}throw new yt("Invalid identifier key: "+t)},e.ID_VALUE=0,e.ID_ROW=1,e.ID_COLUMN_HEADER=2,e.IDENTS={value:e.ID_VALUE,row:e.ID_ROW,dcount:e.ID_COLUMN_HEADER},e}(It),Bl=function(t){function e(e){var i=t.call(this,e)||this;return i._yearDisplayFormat=window.RG_CONST&&window.RG_CONST.YEARDISPLAYFORMAT?window.RG_CONST.YEARDISPLAYFORMAT:"{Y}년",i._monthDisplayFormat=window.RG_CONST&&window.RG_CONST.MONTHDISPLAYFORMAT?window.RG_CONST.MONTHDISPLAYFORMAT:"{M}월",i._months=null,i._weekDays=null,i._viewGridInside=!1,i._holidays=null,i._titleExprRuntime=new Vl,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"yearDisplayFormat",{get:function(){return this._yearDisplayFormat},set:function(t){t!=this._yearDisplayFormat&&(this._yearDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthDisplayFormat",{get:function(){return this._monthDisplayFormat},set:function(t){t!=this._monthDisplayFormat&&(this._monthDisplayFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"months",{get:function(){return this._months},set:function(t){t!=this._months&&(this._months=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weekDays",{get:function(){return this._weekDays},set:function(t){t!=this._weekDays&&(this._weekDays=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"viewGridInside",{get:function(){return this._viewGridInside},set:function(t){t!=this._viewGridInside&&(this._viewGridInside=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"titleStatement",{get:function(){return this._titleStatement},set:function(t){t!=this._titleStatement&&(this._titleStatement=t,t?this._titleExprStatement?this._titleExprStatement.source=t:this._titleExprStatement=new yo(t):this._titleExprStatement=null,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"holidays",{get:function(){return this._holidays},set:function(t){t!=this._holidays&&(this._holidays=t,t?(this._holidayCollection=this._holidayCollection||new Dl,this._holidayCollection.load(t)):this._holidayCollection&&this._holidayCollection.clear(),this._changed())},enumerable:!0,configurable:!0}),e}(Is),$l=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"singleMode",{get:function(){return this._singleMode},set:function(t){t!=this._singleMode&&(this._singleMode=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){t!=this._lookupDisplay&&(this._lookupDisplay=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copyDisplayText",{get:function(){return this._copyDisplayText},set:function(t){this._copyDisplayText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"includeHeaderText",{get:function(){return this._includeHeaderText},set:function(t){this._includeHeaderText=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"copyTextCallback",{get:function(){return this._copyTextCallback},set:function(t){this._copyTextCallback=t},enumerable:!0,configurable:!0}),e}(Is),Al=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i._startEdit=!0,i._commitEdit=!0,i._enableAppend=!0,i._numberCharsOfCols={},i._numberSeparatorOfCols={},i._stopOnError=!0,i._throwValidationError=!0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"singleMode",{get:function(){return this._singleMode},set:function(t){t!=this._singleMode&&(this._singleMode=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startEdit",{get:function(){return this._startEdit},set:function(t){t!=this._startEdit&&(this._startEdit=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitEdit",{get:function(){return this._commitEdit},set:function(t){t!=this._commitEdit&&(this._commitEdit=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enableAppend",{get:function(){return this._enableAppend},set:function(t){t!=this._enableAppend&&(this._enableAppend=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillFieldDefaults",{get:function(){return this._fillFieldDefaults},set:function(t){t!=this._fillFieldDefaults&&(this._fillFieldDefaults=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fillColumnDefaults",{get:function(){return this._fillColumnDefaults},set:function(t){t!=this._fillColumnDefaults&&(this._fillColumnDefaults=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceRowValidation",{get:function(){return this._forceRowValidation},set:function(t){t!=this._forceRowValidation&&(this._forceRowValidation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"forceColumnValidation",{get:function(){return this._forceColumnValidation},set:function(t){t!=this._forceColumnValidation&&(this._forceColumnValidation=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormats",{get:function(){return this._datetimeFormats},set:function(t){if(t!==this._datetimeFormats)if(this._datetimeFormats=t&&t.concat(),t){this._dateReaders=[];for(var e=0;e<this._datetimeFormats.length;e++)this._dateReaders.push(new dt(this._datetimeFormats[e]))}else this._dateReaders=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateReaders",{get:function(){return this._dateReaders},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._boolReader=t&&new ut(t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boolReader",{get:function(){return this._boolReader},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberChars",{get:function(){return this._numberChars},set:function(t){if(t!==this._numberChars)if(this._numberChars=t,t&&t.length>0){for(var e="[",i=0;i<t.length;i++){var o=t[i];e+="\\"==o?"\\"+o:o}e+="]",this._numberCharExp=new RegExp(e,"g")}else this._numberCharExp=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberSeparator",{get:function(){return this._numberSeparator},set:function(t){t!=this._numberSeparator&&(this._numberSeparator=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberCharsOfCols",{get:function(){return this._numberCharsOfCols},set:function(t){if(t!==this._numberCharsOfCols&&(this._numberCharsOfCols=t,this._numberCharExpOfCols={},t))for(var e in t){var i=t[e];if(i instanceof Array&&i.length>0){for(var o="[",r=0,n=i.length;r<n;r++){var s=i[r];o+="\\"==s?"\\"+s:s}o+="]",this._numberCharExpOfCols[e]=new RegExp(o,"g")}else this._numberCharExpOfCols[e]=null}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberCharExp",{get:function(){return this._numberCharExp},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberSeparatorOfCols",{get:function(){return this._numberSeparatorOfCols},set:function(t){t!==this._numberSeparatorOfCols&&(this._numberSeparatorOfCols=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectionBase",{get:function(){return this._selectionBase},set:function(t){t!=this._selectionBase&&(this._selectionBase=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectBlockPaste",{get:function(){return this._selectBlockPaste},set:function(t){t!=this._selectBlockPaste&&(this._selectBlockPaste=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stopOnError",{get:function(){return this._stopOnError},set:function(t){t!=this._stopOnError&&(this._stopOnError=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noEditEvent",{get:function(){return this._noEditEvent},set:function(t){t!=this._noEditEvent&&(this._noEditEvent=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"noDataEvent",{get:function(){return this._noDataEvent},set:function(t){t!=this._noDataEvent&&(this._noDataEvent=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventEachRow",{get:function(){return this._eventEachRow},set:function(t){t!=this._eventEachRow&&(this._eventEachRow=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkReadOnly",{get:function(){return this._checkReadOnly},set:function(t){t!=this._checkReadOnly&&(this._checkReadOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkDomainOnly",{get:function(){return this._checkDomainOnly},set:function(t){t!=this._checkDomainOnly&&(this._checkDomainOnly=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"convertLookupLabel",{get:function(){return this._convertLookupLabel},set:function(t){t!=this._convertLookupLabel&&(this._convertLookupLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyNumberFormat",{get:function(){return this._applyNumberFormat},set:function(t){t!=this._applyNumberFormat&&(this._applyNumberFormat=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyEditMask",{get:function(){return this._applyEditMask},set:function(t){t!=this._applyEditMask&&(this._applyEditMask=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyMaxLength",{get:function(){return this._applyMaxLength},set:function(t){t!=this._applyMaxLength&&(this._applyMaxLength=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"applyInputChars",{get:function(){return this._applyInputChars},set:function(t){t!=this._applyInputChars&&(this._applyInputChars=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"throwValidationError",{get:function(){return this._throwValidationError},set:function(t){t!=this._throwValidationError&&(this._throwValidationError=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.numberCharExpOfCol=function(t){return t&&this._numberCharExpOfCols&&this._numberCharExpOfCols[t]?this._numberCharExpOfCols[t]:this._numberCharExp},e.prototype.numberSeparatorOfCol=function(t){return t&&this._numberSeparatorOfCols&&this._numberSeparatorOfCols[t]?this._numberSeparatorOfCols[t]:this._numberSeparator},e}(Is),jl=function(t){function e(e){var i=t.call(this,e)||this;return i._longTapDuration=500,i._doubleTapInterval=300,i._tapThreshold=4,i._showEditCommander=!0,i._showTooltip=!1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"longTapDuration",{get:function(){return this._longTapDuration},set:function(t){t!=this._longTapDuration&&(this._longTapDuration=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doubleTapInterval",{get:function(){return this._doubleTapInterval},set:function(t){t!=this._doubleTapInterval&&(this._doubleTapInterval=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tapThreshold",{get:function(){return this._tapThreshold},set:function(t){t!=this._tapThreshold&&(this._tapThreshold=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showEditCommander",{get:function(){return this._showEditCommander},set:function(t){t!=this._showEditCommander&&(this._showEditCommander=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showTooltip",{get:function(){return this._showTooltip},set:function(t){t!=this._showTooltip&&(this._showTooltip=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollOnEditing",{get:function(){return this._scrollOnEditing},set:function(t){this._scrollOnEditing=t},enumerable:!0,configurable:!0}),e}(Is),Hl=function(t){function e(e){var i=t.call(this)||this;return i._grid=e,i}return o(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),e.prototype.canFocus=function(){return!0},e}(Na),Wl=function(t){function e(e,i){var o=t.call(this,e)||this;return o._style=i,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"style",{get:function(){return this._style},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"manager",{get:function(){return this.grid.selections},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selectable",{get:function(){return!0},enumerable:!0,configurable:!0}),e}(function(t){function e(e){var i=t.call(this,e.grid)||this;return i._index=e,i}return o(e,t),e.prototype._doDispose=function(){this._index.dispose(),this._index=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),e}(Hl)),Gl=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){this._layout=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i,o){return this._layout=t,this._x=e,this._y=i,this._offset=o,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"col-resize"},enumerable:!0,configurable:!0}),e}(Hl),Ul=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){this._layout=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i,o){return this._layout=t instanceof Cn?t.source:t,this._x=e,this._y=i,this._offset=o,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"default"},enumerable:!0,configurable:!0}),e}(Hl),zl=function(t){function e(e){var i=t.call(this,e)||this;return i._itemIndex=-1,i._variable=!1,i._rowTop=0,i._offset=0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"variable",{get:function(){return this._variable},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowTop",{get:function(){return this._rowTop},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i,o){return this._itemIndex=t,this._variable=e,this._rowTop=i,this._offset=o,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"row-resize"},enumerable:!0,configurable:!0}),e}(Hl),Yl=function(t){function e(e){var i=t.call(this,e)||this;return i._offset=0,i._top=0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"top",{get:function(){return this._top},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e){return this._top=t,this._offset=e,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"row-resize"},enumerable:!0,configurable:!0}),e}(Hl),ql=function(t){function e(e){var i=t.call(this,e)||this;return i._itemIndex=-1,i._offset=0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._itemIndex},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e){return this._selStyle=t&&t.style,this._selStyle==ls.COLUMNS||this._selStyle==ls.SINGLE_COLUMN?(this._itemIndex=e,this._offset=0):(this._itemIndex=this._selStyle?t.getBounds().top:e,this._offset=e-this._itemIndex),this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"move"},enumerable:!0,configurable:!0}),e.prototype.canFocus=function(){return this._selStyle==ls.COLUMNS||this._selStyle==ls.SINGLE_COLUMN},e}(Hl),Kl=function(t){function e(e,i){var o=t.call(this,e.container,i)||this;return o._grid=e,o}return o(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!0,configurable:!0}),e}(La),Xl=function(t){function e(e,i){var o=t.call(this,e.layout.grid,"columnResizeTracker")||this;o._request=e,o._feedback=i;var r=e.layout;return o._layoutX=e.x+e.offset-r.domWidth,o._offset=e.offset,o}return o(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var r=this.grid.layoutManager,n=r.contentBounds.y,s=r.contentBounds.bottom;return this._feedback.resize(2,s-n),this._feedback.move(e-this._offset,n),this.grid.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i){this._request.layout;var o=this.grid.displayOptions.minCellWidth;return(e-=this._offset)>=this._layoutX+o&&e<this._layoutX+1e6&&(this._feedback.x=e,!0)},e.prototype._doEnded=function(){var t=this._feedback.x-this._layoutX;this.grid.removeFeedbackElement(this._feedback),this._request.layout.changeCellWidth(t,this.grid.layoutManager.isColumnFitted),this.grid.container.setCursor("default")},e}(Kl),Zl=function(t){function e(e,i,o){var r=t.call(this,e.layout.grid,"columnMoveTracker")||this;return r._timer=null,r._colLoop=0,r._colPrevLoop=0,r._interval=0,r._request=e,r._layout=e.layout,r._cellFeedback=i,r._feedback=o,r}return o(e,t),e.prototype._doDispose=function(){this._request=this._layout=this._cellFeedback=this._feedback=this._target=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,i,o,r){var n=this.grid,s=n.layoutManager,a=this._layout.parent,l=s.getHeaderCellRect(this._layout,!0);a.horizontal?(this._offset=i-l.x,this._feedback.setBounds(l.x,l.y,e.WING_SIZE,l.height)):(this._offset=o-l.y,this._feedback.setBounds(l.x,l.y,l.width,e.WING_SIZE)),this._feedback.visible=!1,this._cellFeedback.setBounds(l.x,l.y,l.width,l.height),this._cellFeedback.model=n.header.getCell(this._layout),this._cellFeedback.dragging=!1,n.addFeedbackElement(this._cellFeedback),n.addFeedbackElement(this._feedback);var h=this._feedback._dom.style;return h.borderLeft=h.borderRight=h.borderTop=h.borderBottom="",!0},e.prototype._doDrag=function(t,e,i){var o=this.grid,r=this._layout.parent,n=this.grid.layoutManager;if(i<n.contentBounds.y&&o.canGrouping())return!1;if(e<n.gridBounds.x||e>n.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var s=n.getHeaderCellAt(e,i),a=this.$_findTarget(s);lt.trace("MOVE: ",this._layout.displayText+" => "+(null==a?void 0:a.displayText)),a&&!o.canMoveToLayout(a)&&(a=null),this.$_setTarget(a),this._cellFeedback.dragging=!0,r.horizontal?this._cellFeedback.x=e-this._offset:this._cellFeedback.y=i-this._offset}return!0},e.prototype._doCanceled=function(){this.$_stopTimer()},e.prototype._doCompleted=function(){this.$_stopTimer(),this._target&&(this._layout.vindex=this._target.vindex)},e.prototype._doEnded=function(){this.$_stopTimer(),this.grid.removeFeedbackElement(this._feedback),this.grid.removeFeedbackElement(this._cellFeedback)},e.prototype.getNextRequest=function(t,e){return this.grid.activeTool.getNextRequest(this._request,this._cellFeedback,t,e)},e.prototype.$_startTimer=function(){this._timer||(this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),60))},e.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},e.prototype.$_timerHandler=function(){var t=this._grid,e=this.currentX,i=t.layoutManager,o=0;e>i.clientRect.right?(o=Math.max(0,Math.min(3,(e-i.clientRect.right)/40)),this._interval=4-o,this._colLoop++):e<i.gridBounds.x&&(o=Math.max(0,Math.min(3,(i.gridBounds.x-e)/40)),this._interval=4-o,this._colLoop++),o>0&&(this._interval=4-o),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>i.clientRect.right?t.leftCell+=1:e<i.gridBounds.left&&t.leftPos>0&&(t.leftCell-=1)),this.$_setTarget(null)},e.prototype.$_findTarget=function(t){if(t)for(var e=this._layout.parent;t;){if(t.parent===e)return t;t=t.parent}},e.prototype.$_setTarget=function(t){var e=this._request.layout,i=e.parent,o=this._feedback,r=o._dom.style,n=this.grid.layoutManager;this.currentX,this.currentY;if(this._target=t,o.visible=null!=t&&t.parent===i&&t!==e){var s=n.getHeaderCellRect(t,!0);if(i.horizontal){var a=e.hcol;r.height=s.height+"px",t.hcol<a?(r.borderRight="none",r.borderLeft="",o.x=s.x):t.hcol>a&&(r.borderLeft="none",r.borderRight="",o.x=s.right-o.width),this.grid.makeLayoutVisible(t)}else{var l=e.row;r.width=s.width+"px",t.row<l?(r.borderBottom="none",r.borderTop="",o.y=s.y):t.row>l&&(r.borderTop="none",r.borderBottom="",o.y=s.bottom-o.height)}}},e.WING_SIZE=7,e}(Kl),Jl=function(t){function e(e,i){var o=t.call(this,e.grid,"rowResizeTracker")||this;return o._request=e,o._feedback=i,o}return o(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var r=this.grid.layoutManager,n=r.leftContentBounds.x,s=r.rightContentBounds.right;return this._feedback.resize(s-n,2),this._feedback.move(n,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i){return i-this._request.offset-this._request.rowTop>=this.grid.displayOptions.minRowHeight&&(this._feedback.y=i-this._request.offset,!0)},e.prototype._doCompleted=function(t,e,i){var o=this.grid,r=o.displayOptions,n=Math.max(r.minRowHeight,i-this._request.offset-this._request.rowTop);(n=0===r.maxRowHeight?n:Math.min(r.maxRowHeight,n))>=o.layoutManager.bodyBounds.height&&(n=o.layoutManager.bodyBounds.height-1),this._request.variable?o.setRowHeight(this._request.itemIndex,n):r.rowHeight=n},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(Kl),Ql=function(t){function e(e,i){var o=t.call(this,e.grid,"rowResizeTracker")||this;return o._request=e,o._feedback=i,o}return o(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var r=this.grid.layoutManager,n=r.leftContentBounds.x,s=r.rightContentBounds.right;return this._feedback.resize(s-n,2),this._feedback.move(n,i-this._request.offset),this.grid.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i){return i-this._request.offset-this._request.top>=this.grid.header.minHeight&&(this._feedback.y=i-this._request.offset,!0)},e.prototype._doCompleted=function(t,e,i){var o=this.grid.header,r=Math.max(o.minHeight,i-this._request.offset-this._request.top);o.height=r},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(Kl),th=function(t){function e(e,i,o){var r=t.call(this,e.grid,"rowMoveTracker")||this;return r._targetRow=-1,r._timer=null,r._request=e,r._proxy=i,r._line=o,r}return o(e,t),e.updateLineFeedback=function(t,e,i,o,r,n,s){if(r<0||n<0||r>=t.width||n>=t.height)return o.visible=!1,-1;var a=t.layoutManager;n-=a.contentBounds.y;var l=a.contentBounds.right,h=-1,u=-1;if(n<a.summaryBounds.bottom)u=Math.max(0,a.topIndex-1),h=a.getTableItemTop(0);else if(n>=a.footerBounds.y)u=a.topIndex+a.fullItemCount,h=a.getTableItemBottom(a.fullItemCount);else{var c=n-a.summaryBounds.bottom,d=a.getTableItemIndex(c),p=a.getTableItemHeight(d);(u=d)>=a.fixedItemCount&&(u+=a.topIndex),u!=e&&(c<a.getTableItemTop(d)+p/2?(h=a.getTableItemTop(d),u>e&&(u=Math.max(a.topIndex,u-1))):(h=d>-1?a.getTableItemBottom(d):s?0:-1)>=0&&u<e&&u++)}return h+=a.contentBounds.y+a.summaryBounds.bottom,o.visible=u>e?u>e+i-1:u>=0&&u!=e,o.visible?(o.resize(l-0,2),0==t.itemCount&&(h+=a.defaultItemHeight),o.move(0,h)):u=-1,n<a.summaryBounds.bottom?t.topIndex--:n>=a.footerBounds.y&&t.topIndex++,u},e.prototype._doDispose=function(){this._request=null,this._proxy=null,this._line=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"request",{get:function(){return this._request},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sourceItems",{get:function(){return this._sourceItems},enumerable:!0,configurable:!0}),e.prototype.setEnabled=function(t){this._proxy.setEnabled(t)&&this._proxy.draw()},e.prototype.setLabel=function(t){this._proxy.setLabel(t)&&this._proxy.draw()},Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var r=this.grid,n=nt(t),s=0==r.selections.count;if(!s){var a=r.selections.getItem(0);s=function(t){var e=t&&t.style;return e==ls.COLUMNS||e==ls.SINGLE_COLUMN}(a)||!a.containsItem(this._request.itemIndex)}s&&(r.setFocusedItem(this._request.itemIndex),r.selections.selectRow(this._request.itemIndex));for(var l=this._sourceItems=r.getSelectedItemIndices(),h=r.getItem(l[0]).level,u=1;u<l.length;u++)if(r.getItem(l[u]).level<h){l.splice(u,l.length-u);break}for(u=l.length-1;u>0;u--)if(r.getItem(l[u]).level>h){l.splice(u,1);break}n.body.appendChild(this._proxy._dom),r.addFeedbackElement(this._line);var c=this.$_updateLine(e,i);return this._proxy.setZIndex(r.displayOptions.baseZindex+6),this.$_updateProxy(e,i,c,!1),!0},e.prototype._doDrag=function(t,e,i){var o=this.grid,r=o.layoutManager,n=this.$_updateLine(e,i),s=o.container.findContainer(null,t);return this.$_updateProxy(e,i,n,o.container!==s),(i-=r.contentBounds.y)>r.footerBounds.y||i<r.summaryBounds.bottom?this.$_startTimer():this.$_stopTimer(),!0},e.prototype._doCompleted=function(t,e,i){if(this._targetRow>=0){var o=this.grid;if(o.canMoveRow(!0,!1)&&o.dataDropOptions.getEnabled(o,this._sourceItems,this._targetRow)){var r=this._request.itemIndex,n=o.dataDropOptions.callback;n?n(o.handler,this._sourceItems,o.handler,this._targetRow):this._targetRow>r?o.moveSelection(this._targetRow-(r+this._sourceItems.length-1)):this._targetRow<r&&o.moveSelection(this._targetRow-r)}}},e.prototype._doCanceled=function(t,e){},e.prototype._doEnded=function(){var t=this.grid;this.$_stopTimer(),t.removeFeedbackElement(this._line),t.doc.body.removeChild(this._proxy._dom)},e.prototype.$_updateLine=function(t,i){return this._targetRow=e.updateLineFeedback(this.grid,this._request.itemIndex,this._sourceItems.length,this._line,t,i,!1)},e.prototype.$_updateProxy=function(t,e,i,o){var r=this.grid,n=lt.getOffset(r.container._containerDom);n.y+=e,n.x+=t+20;var s=r.canMoveRow(!0,o)&&(o||r.dataDropOptions.getEnabled(r,this._sourceItems,i)),a=r.dataDropOptions.getLabel(r,this._sourceItems,i);this._proxy.move(n.x,n.y),this._proxy.setEnabled(void 0!==s?s:i>=0),this._proxy.setLabel(a),this._proxy.draw()},e.prototype.$_startTimer=function(){this._timer||(this._timer=setInterval(this.$_timerHandler.bind(this),100))},e.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null)},e.prototype.$_timerHandler=function(){var t=this.currentX,e=this.currentY;this.$_updateLine(t,e)},e}(Kl),eh=function(t){function e(e,i,o,r){var n=t.call(this,e.index.grid,i)||this;return n._request=e,n._currX=o,n._currY=r,n}return o(e,t),e.prototype._doDispose=function(){this._request.dispose(),this._request=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype.getRequest=function(){return this._request},e.prototype._doCanceled=function(){},e.prototype._doEnded=function(){var t=this._getItem();this.grid.selections.$_ended(t)},e.prototype.spanHome=function(t){var e=this.grid;e.displayOptions.spanSelecting&&e.getBodyViewAt(t).spanHead(e.layoutManager,t)},e.prototype.spanRight=function(t){var e=this.grid;e.displayOptions.spanSelecting&&e.getBodyViewAt(t).spanRight(e.layoutManager,t)},e}(Kl),ih=function(t){function e(e,i,o){var r=t.call(this,e,"blockSelectTracker",i,o)||this;return r._timer=null,r._rowPrevLoop=0,r._rowLoop=0,r._colPrevLoop=0,r._colLoop=0,r._interval=0,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getItem=function(){return this._item},e.prototype._doStart=function(t,e,i,o){var r=this.grid,n=r.selections,s=r.layoutManager,a=this._request.index;return!(s.isMergedCell(a)&&!(a=r.pointToIndex(t,e,i,!0)).layout)&&(n.itemStyle=ls.BLOCK,o?this._item=n.count>0&&n.getItem(0):(n.clear(),this._item=n.add(a,a,ls.BLOCK)),null!=this._item)},e.prototype._doDrag=function(t,e,i){if(this._item){var o=this.grid,r=o.layoutManager;if(this._currX=e,this._currY=i,i-r.contentBounds.y>r.footerBounds.y||i<r.gridBounds.y||e<r.gridBounds.x||e>r.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var n=o.pointToIndex(t,e,i,!0);n.column&&n.itemIndex>=0&&(Hn.compareHorz(n,this._item.startIndex)>=0?(this.spanRight(n),this.spanHome(this._item.startIndex)):this.spanRight(this._item.startIndex),this._item.resizeTo(n))}return!0}},e.prototype._doEnded=function(){this.$_stopTimer(),t.prototype._doEnded.call(this)},e.prototype.$_startTimer=function(){this._timer||(this._rowLoop=this._rowPrevLoop=this._colLoop=this._colPrevLoop=0,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},e.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},e.prototype.$_timerHandler=function(){var t=this._grid,e=this._currX,i=this._currY,o=t.layoutManager,r=0,n=0;i>o.footerBounds.y?(n=Math.max(0,Math.min(3,(i-o.footerBounds.y)/40)),this._interval=4-n,this._rowLoop++):i<o.gridBounds.y&&(n=Math.max(0,Math.min(3,(o.gridBounds.y-i)/40)),this._interval=4-n,this._rowLoop++),e>o.clientRect.right?(r=Math.max(0,Math.min(3,(e-o.clientRect.right)/40)),this._interval=4-r,this._colLoop++):e<o.gridBounds.x&&(r=Math.max(0,Math.min(3,(o.gridBounds.x-e)/40)),this._interval=4-r,this._colLoop++);var s=!1;if(Math.max(r,n)>0&&(this._interval=4-Math.max(r,n)),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,i>o.footerBounds.y?t.topItem+o.fullItemCount<t.itemCount&&(t.topIndex=t.topIndex+1,s=!0):i<o.gridBounds.y&&t.topItem>o.fixedItemCount&&(t.topIndex=t.topIndex-1,s=!0)),s||this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,e>o.clientRect.right?(t.leftPos+=e-o.clientRect.right,s=!0):e<o.gridBounds.left&&t.leftPos>0&&(t.leftPos-=o.gridBounds.left-e,s=!0)),s){var a=t.pointToIndex(null,e,i,!1);a.column&&(a.itemIndex=Math.min(Math.max(0,a.itemIndex,t.topIndex),t.itemCount-1),this._item.resizeTo(a))}},e}(eh),oh=function(t){function e(e,i,o){var r=t.call(this,e,"rowsSelectTracker",i,o)||this;return r._timer=null,r._prevLoop=0,r._loop=0,r._colPrevLoop=0,r._colLoop=0,r._interval=0,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getItem=function(){return this._item},e.prototype._doStart=function(t,e,i,o){var r=this.grid,n=r.selections,s=r.layoutManager,a=this._request.index;return s.isMergedCell(a)&&(a=r.pointToIndex(t,e,i,!0)),n.itemStyle=ls.ROWS,o?this._item=n.count>0&&n.getItem(0):(n.clear(),this._item=n.add(a,a,ls.ROWS)),Boolean(this._item)},e.prototype._doDrag=function(t,e,i){if(this._item){var o=this.grid.layoutManager;if(this._currX=e,this._currY=i,i>o.footerBounds.y||i<o.gridBounds.y||e<0||e>o.clientRect.right)this.$_startTimer();else{this.$_stopTimer();var r=this.grid.pointToIndex(t,e,i,!1);r.itemIndex>=0&&this._item.resizeTo(r)}return!0}return!1},e.prototype._doEnded=function(){this.$_stopTimer(),t.prototype._doEnded.call(this)},e.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._colLoop=this._colPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},e.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},e.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,r=this._currY,n=i.layoutManager;(r>n.footerBounds.y?(t=Math.max(0,Math.min(3,(r-n.footerBounds.y)/40)),this._interval=4-t,this._loop++):r<n.gridBounds.y&&(t=Math.max(0,Math.min(3,(n.gridBounds.y-r)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=this._interval)?(this._prevLoop=this._loop,r>n.footerBounds.y?i.topIndex=i.topIndex+1:r<n.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e)):(o>n.clientRect.right?(t=Math.max(0,Math.min(3,(o-n.clientRect.right)/40)),this._interval=4-t,this._colLoop++):o<0&&(t=Math.max(0,Math.min(3,(n.gridBounds.x-o)/40)),this._interval=4-t,this._colLoop++),this._colLoop-this._colPrevLoop>=2*this._interval&&(this._colPrevLoop=this._colLoop,o>n.clientRect.right?i.leftLayout=i.leftLayout+1:o<n.gridBounds.x&&i.leftPos>0&&(i.leftLayout=i.leftLayout-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).itemIndex>=0&&(e.itemIndex=Math.min(Math.max(0,e.itemIndex,i.topIndex),i.itemCount-1),this._item.resizeTo(e))))},e}(eh),rh=function(t){function e(e,i,o){var r=t.call(this,e,"columnsSelectTracker",i,o)||this;return r._timer=null,r._prevLoop=0,r._loop=0,r._rowPrevLoop=0,r._rowLoop=0,r._interval=0,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!0},enumerable:!0,configurable:!0}),e.prototype._getItem=function(){return this._item},e.prototype._doStart=function(t,e,i,o){var r=this.grid,n=r.selections,s=r.layoutManager,a=this._request.index;return s.isMergedCell(a)&&(a=r.pointToIndex(t,e,i,!0)),n.itemStyle=ls.ROWS,o?this._item=n.count>0&&n.getItem(0):(n.clear(),this._item=n.add(a,a,ls.COLUMNS)),Boolean(this._item)},e.prototype._doDrag=function(t,e,i){if(this._item){var o=this.grid.layoutManager;if(this._currX=e,this._currY=i,e<o.gridBounds.x||e>o.clientRect.right||i>o.footerBounds.y||i<0)this.$_startTimer();else{this.$_stopTimer();var r=this.grid.pointToIndex(t,e,i,!0);null!=r.column&&this._item.resizeTo(r)}return!0}return!1},e.prototype._doEnded=function(){this.$_stopTimer(),t.prototype._doEnded.call(this)},e.prototype.$_startTimer=function(){this._timer||(this._loop=this._prevLoop=this._rowLoop=this._rowPrevLoop=0,this._interval=1,this._timer=setInterval(this.$_timerHandler.bind(this),30),this._grid.selections.lock())},e.prototype.$_stopTimer=function(){this._timer&&(clearInterval(this._timer),this._timer=null,this._grid.selections.unlock())},e.prototype.$_timerHandler=function(){var t,e,i=this._grid,o=this._currX,r=this._currY,n=i.layoutManager;(o>n.clientRect.right?(t=Math.max(0,Math.min(3,(o-n.clientRect.right)/40)),this._interval=4-t,this._loop++):o<n.gridBounds.x&&(t=Math.max(0,Math.min(3,(n.gridBounds.x-o)/40)),this._interval=4-t,this._loop++),this._loop-this._prevLoop>=2*this._interval)?(this._prevLoop=this._loop,o>n.clientRect.right?i.leftLayout=i.leftLayout+1:o<n.gridBounds.x&&i.leftPos>0&&(i.leftLayout=i.leftLayout-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)):(r>n.footerBounds.y?(t=Math.max(0,Math.min(3,(r-n.footerBounds.y)/40)),this._interval=4-t,this._rowLoop++):r<0&&(t=Math.max(0,Math.min(3,(n.gridBounds.y-r)/40)),this._interval=4-t,this._rowLoop++),this._rowLoop-this._rowPrevLoop>=this._interval&&(this._rowPrevLoop=this._rowLoop,r>n.footerBounds.y?i.topIndex=i.topIndex+1:r<n.gridBounds.y&&(i.topIndex=i.topIndex-1),(e=i.pointToIndex(null,this._currX,this._currY,!1)).column&&this._item.resizeTo(e)))},e}(eh),nh=function(t){function e(e){var i=t.call(this)||this;return i._visible=!0,e&&i.assignFrom(e),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!0,configurable:!0}),e.prototype.assignFrom=function(e){"string"==typeof e?(this._message=e,this._message&&(this._visible=!0)):"boolean"==typeof e?this._visible=e:e&&t.prototype.assignFrom.call(this,e)},e}(ft),sh=function(t){function e(e){var i=t.call(this)||this;return i._minWidth=0,i._maxWidth=0,i._dropDownCount=8,i._showing=!1,i.$_touchendHandler=null,i._container=e,i._element=i.$_createElement(e.doc),i.$_touchendHandler=function(t){t.preventDefault(),this.hide()}.bind(i),lt.isMobile()&&i._element.addEventListener("touchend",i.$_touchendHandler,!1),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this),this._element&&this._element.removeEventListener("touchend",this.$_touchendHandler),lt.detach(this._element)},Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){this._minWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropDownCount",{get:function(){return this._dropDownCount},set:function(t){this._dropDownCount=t},enumerable:!0,configurable:!0}),e.prototype.show=function(t,e,i,o,r){this._showing=!0;try{this.$_show(t,e,i,o,r)}finally{this._showing=!1}},e.prototype.hide=function(){var t=this._element;t&&t.parentNode&&this._container._container.removeChild(t)},e.prototype.$_createElement=function(t){var e=t.createElement("div");return e.style.pointerEvents="none",e.onkeydown=function(t){27==t.keyCode&&this.hide()}.bind(this),this.$_disableSelection(e),this._span=t.createElement("span"),e.appendChild(this._span),this.$_disableSelection(this._span),e},e.prototype.$_disableSelection=function(t){void 0!==t.onselectstart?t.onselectstart=function(){return!1}:void 0!==t.style.MozUserSelect?t.style.MozUserSelect="none":t.onmousedown=function(){return!1}},e.prototype.$_show=function(t,e,i,o,r){var n=this._container.gridView.displayOptions.baseZindex+4,s=this._element,a=t.message;if(s&&a){this._span.innerHTML=a.replace(/\n/g,"<br>"),lt.setClassName(s,"rg-tooltip");var l=s.style;l.position="absolute",l.left=e+"px",l.top=i+"px",l.overflow="hidden",l.zIndex=String(n),this._container._container.appendChild(s);var h=s.getBoundingClientRect(),u=this._container._container.getBoundingClientRect();l.left=h.right>u.right?Math.max(u.right-h.width-u.left-2,0)+"px":s.style.left,h.bottom>u.bottom&&(s.style.top=r?Math.max(0,i-(h.bottom-u.bottom))+"px":Math.max(i-h.height-o,0)+"px"),l.visibility="visible"}},e}(ft),ah=function(t){function e(e){var i=t.call(this)||this;return i._active=!1,i._pos=new Ss,i._container=e.container,i}return o(e,t),e.prototype._doDispose=function(){this._container=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._active},enumerable:!0,configurable:!0}),e.prototype.show=function(t,e,i,o,r){if(!this._active&&(this.close(),(t=t instanceof nh?t:t?new nh(t):null)&&t.visible)){this._tipView||(this._tipView=new sh(this._container)),this._tipView.show(t,e,i,o,r);var n=this._container.gridView;return n&&this._pos.set(n.mouseX,n.mouseY),this._active=!0,!0}return!1},e.prototype.close=function(t,e){if(this._active&&void 0!==t){var i=this._pos;if(Math.abs(i.x-t)<4&&Math.abs(i.y-e)<4)return!1}return this._timer&&clearTimeout(this._timer),!!this._active&&(this._tipView&&this._tipView.hide(),this._active=!1,!0)},e}(ft),lh=function(t){function e(e){var i=t.call(this)||this;return i._container=e,i}return o(e,t),e.prototype._doDispose=function(){this._container=null,t.prototype._doDispose.call(this)},e.prototype._touchToOffset=function(t,e){var i=t._containerDom.getBoundingClientRect();return e.x=e.clientX-i.left,e.y=e.clientY-i.top,e},e.prototype._toOffset=function(t){return this._touchToOffset(this._container,t)},e}(ft),hh=function(t){function e(e){var i=t.call(this,e)||this;return i._touchId=void 0,i._started=null,i._seconded=null,i._startX=NaN,i._startY=NaN,i._tapped=0,i._dragging=!1,i._prevX=NaN,i._prevY=NaN,i._longTapTimer=void 0,i._tracker=null,i._events=[],i._touches=[],i._longTapDuration=500,i._doubleTapInterval=300,i._tapThreshold=4,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"touchHandler",{get:function(){return this._touchHandler},set:function(t){this._touchHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragHandler",{get:function(){return this._dragHandler},set:function(t){this._dragHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragStartHandler",{get:function(){return this._dragStartHandler},set:function(t){this._dragStartHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dragEndHandler",{get:function(){return this._dragEndHandler},set:function(t){this._dragEndHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"swipeHandler",{get:function(){return this._swipeHandler},set:function(t){this._swipeHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tapHandler",{get:function(){return this._tapHandler},set:function(t){this._tapHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doubleTapHandler",{get:function(){return this._doubleTapHandler},set:function(t){this._doubleTapHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"longTapHandler",{get:function(){return this._longTapHandler},set:function(t){this._longTapHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchEndHandler",{get:function(){return this._touchEndHandler},set:function(t){this._touchEndHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"touchEndt",{get:function(){return this._touchEndt},enumerable:!0,configurable:!0}),e.prototype.isSingleTouch=function(){return 1==this._touches.length},e.prototype.clearTouches=function(){this._touches=[]},e.prototype.removeTouches=function(t){for(var e,i,o=0,r=t.length;o<r;o++)e=t[o],(i=this._touches.indexOf(e.identifier))>-1&&this._touches.splice(i,1)},e.prototype.touchStart=function(t){clearTimeout(this._longTapTimer);var e,i=t.changedTouches;if(t.touches.length>1||this._touches.length>0)for(var o=0,r=i.length;o<r;o++)e=i[o],this._touches.push(e.identifier);else i.length>0?(e=this._toOffset(i[0]),this._tracker&&(this._tracker.stop&&this._tracker.stop(e.x,e.y),this._tracker=null),this._touchId=e.identifier,this._touches.push(e.identifier),this._dragging=!1,this._touchHandler&&(this._tracker=this._touchHandler(t,e.x,e.y)),0==this._tapped?(this._started=lt.getTimer(),this._prevX=this._startX=e.x,this._prevY=this._startY=e.y):(this._seconded=lt.getTimer(),this._prevX=e.x,this._prevY=e.y),this._events=[],this._events.push({x:e.x,y:e.y,t:t.timeStamp}),this._longTapTimer=setTimeout(function(){this._longTapHandler&&this._longTapHandler(t,this._startX,this._startY)&&(this._touchId=void 0,this._tapped=0)}.bind(this),this._longTapDuration)):alert("no touch ?")},e.prototype.touchMove=function(t){var e=this.$_findTouch(t);if(e&&this.isSingleTouch()){var i=!1;this._dragging&&this._tracker?i=this._dragHandler&&this._dragHandler(this._prevX,this._prevY,e.x,e.y):(Math.abs(this._prevX-e.x)>this._tapThreshold||Math.abs(this._prevY-e.y)>this._tapThreshold)&&(clearTimeout(this._longTapTimer),this._tapped=0,this._dragging=!0,i=this._tracker=this._dragStartHandler&&this._dragStartHandler(this._startX,this._startY,e.x,e.y)),i&&t.cancelable&&t.preventDefault(),this._prevX=e.x,this._prevY=e.y,this._events.push({x:e.x,y:e.y,t:t.timeStamp}),this._events.length>30&&this._events.splice(0,15)}},e.prototype.touchEnd=function(t){if(clearTimeout(this._longTapTimer),void 0===this._touchId)return this._touchEndHandler&&this._touchEndHandler(t),void this.clearTouches();var e=this.$_findTouch(t);if(e&&this.isSingleTouch()){var i=this._container,o=i._currentX=e.x,r=i._currentY=e.y;if(this._dragging&&this._tracker)this._touchId=void 0,this._tapped=0,this._swipeHandler&&this.$_checkSwipe(t)||this._dragEndHandler&&this._dragEndHandler(o,r,!1);else if(0==this._tapped)this._tapped=1,this._tapHandler&&this._tapHandler(t,this._startX,this._startY);else if(1==this._tapped){this._touchId=void 0,lt.getTimer()-this._started<this._doubleTapInterval?(this._tapped=0,this._doubleTapHandler&&this._doubleTapHandler(t,this._prevX,this._prevY)):(this._tapped=1,this._started=this._seconded,this._startX=this._prevX,this._startY=this._prevY,this._tapHandler&&this._tapHandler(t,this._prevX,this._prevY))}else alert("touch end")}else this._dragEndHandler&&this._dragEndHandler(null,null,!1);this._tracker=null,t.touches.length<=0&&this.clearTouches(),this.removeTouches(t.changedTouches),lt.isiOS&&(this._touchEndt=lt.getTimer())},e.prototype.touchCancel=function(t){this.clearTouches(),clearTimeout(this._longTapTimer),this._dragEndHandler&&this._dragEndHandler(null,null,!0),this._tracker=null},e.prototype.$_findTouch=function(t){for(var e=t.changedTouches,i=0;i<e.length;i++){var o=e[i];if(o.identifier==this._touchId)return this._toOffset(o)}return null},e.prototype.$_checkSwipe=function(t){var e=this._events,i=e.length;if(!(i<2)){for(var o=e[i-1],r=e[i-2],n=i-3;n>=0&&!(o.t-r.t>100);n--)r=e[n];var s=r.x,a=r.y,l=o.x,h=o.y,u=Math.sqrt(Math.pow(s-l,2)+Math.pow(a-h,2))/Math.max(16,o.t-r.t);if(u>.1){var c=Math.log(.1/u)/Math.log(.998),d=u*(1-Math.pow(.998,c+1))/(1-.998),p="right",_=Math.round(180*Math.atan2(h-a,l-s)/Math.PI);return _<0&&(_=360+_),_>45&&_<=135?p="bottom":_>135&&_<=225?p="left":_>225&&_<=315&&(p="top"),this._swipeHandler(c,d,p,t)}}},e}(lh),uh=(function(t){function e(e){var i=t.call(this)||this;return i._type=e,i}o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0})}(ir),function(t){function e(e,i){var o=t.call(this)||this;return o._inputFocusable=!1,e&&"function"==typeof e.render?(o._impl=e,o._impl.type=i,o.assignFrom(o._impl)):o._impl=null,o._itemClickable=!0,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"inputFocusable",{get:function(){return this._inputFocusable},set:function(t){this._inputFocusable!==t&&(this._inputFocusable=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return this._impl&&this._impl.type},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){this._impl&&this._impl.initContent&&this._impl.initContent.call(this,t)},e.prototype._doClearContent=function(t){this._impl&&this._impl.clearContent&&this._impl.clearContent.call(this,t)},e.prototype._doRenderCell=function(t,e,i,o,r){var n={};n.focused=i.focused,this._impl&&this._impl.render&&this._impl.render.call(this,t.handler,e,o,r,n)},e.prototype.preventDefaultEditClick=function(e){return this._impl&&this._impl.preventEditClick?this._impl.preventEditClick.call(this,e):t.prototype.preventDefaultEditClick.call(this,e)},e.prototype._doEditClick=function(e,i,o){return this._impl&&this._impl.editClick?this._impl.editClick.call(this,e,i,o):t.prototype._doEditClick.call(this,e,i,o)},e.prototype.preventDefaultClick=function(e){return this._impl&&this._impl.preventClick?this._impl.preventClick.call(this,e):t.prototype.preventDefaultClick.call(this,e)},e.prototype._doClick=function(e,i){return this._impl&&this._impl.click?this._impl.click.call(this,i):t.prototype._doClick.call(this,e,i)},e.prototype._doEditKey=function(e,i,o){return this._impl&&this._impl.editKey?this._impl.editKey.call(this,i,o):t.prototype._doEditKey.call(this,e,i,o)},e.prototype.canClick=function(e){return this._impl&&this._impl.canClick?this._impl.canClick.call(this,e):t.prototype.canClick.call(this,e)},e.prototype.canEdit=function(){return this._impl&&this._impl.canEdit?this._impl.canEdit.call(this):t.prototype.canEdit.call(this)},e.prototype.canEditKey=function(e){return this._impl&&this._impl.canEditKey?this._impl.canEditKey.call(this,e):t.prototype.canEditKey.call(this,e)},e}(ir)),ch=function(t){function e(e,i,o,r){var n=t.call(this)||this;return n._row=e,n._field=i,n._value=o,n._column=r,n._oldValue=lt.deepCopy(e.getData(i)),n}return o(e,t),e.prototype.undo=function(){this._row.setData(this._field,this._oldValue),this.$_focusCell()},e.prototype.redo=function(){this._row.setData(this._field,this._value),this.$_focusCell()},e.prototype.$_focusCell=function(){var t=this._column.grid,e=t.focusedIndex.clone();e.layout=this._column.layout,t.setFocusedIndex(e),t.makeCellVisible(e)},e}(Ye),dh=function(t){function e(e){var i=t.call(this)||this;return i._editIndex=new Hn,i._editors=[],i._starting=!1,i._editRow=-1,i._needPrepare=!1,i._modified=!1,i._commiting=!1,i._canceling=!1,i._resetting=!1,i._dirty=!1,i._editable=!1,i._readOnly=!1,i.$_editFocused=!1,i._resetFocused=!1,i._grid=e,i._defaultEditor=e.delegate.getDefaultCellEditor(),i._defaultEditor&&i._defaultEditor.setController(i),i._defaultEditor&&i._internalHideEditor(i._defaultEditor),i}return o(e,t),e.prototype._doDispose=function(){this._grid=null,this._editIndex&&this._editIndex.dispose(),this._editIndex=null,this._editor&&this._editor.dispose(),this._editor=null,this._defaultEditor&&this._defaultEditor.dispose(),this._defaultEditor=null,this._editors=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"readOnly",{get:function(){return this._readOnly},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},enumerable:!0,configurable:!0}),e.prototype.onEditorStart=function(t){if(!t.visible&&!this._commiting&&!this._canceling)return this._activateEditor(!1,!1)},e.prototype.onEditorKeyDown=function(t,e){var i=e.ctrlKey;return this._editor&&(this._editor.textReadOnly||i||e.altKey||!this._isEditKey(e.keyCode)?this._editor.textReadOnly?this._editor._editor.readOnly=this._editor.textReadOnly:229==e.keyCode&&this._editor.setReadOnly(this._readOnly):this._editor.setReadOnly(this._readOnly)),this._grid.activeTool.keyDown(e)},e.prototype.onEditorKeyPress=function(t,e){return this._grid.activeTool.keyPress(e)},e.prototype.onEditorKeyUp=function(t,e){return this._grid.activeTool.keyUp(e)},e.prototype.onEditorChange=function(t){if(this._modified||(this._modified=!0,this._grid._editorStarted(t,this._editIndex)),this.editing){this._grid.makeCellVisible(this._editIndex);var e=t.getEditValue(!1,!1);e=e===aa.Unselected?t.getEditText():e,this._grid._editorChange(t,this._editIndex,e)}},e.prototype.onEditorSearch=function(t,e){this._grid._editorSearch(this._editor,this._editIndex,e)},e.prototype.onSearchCellButtonClick=function(t,e){return this._grid._searchCellButtonClick(this._editor,this._editIndex,e)},e.prototype.onEditorCommit=function(t){return this.commitEditor(!0)},Object.defineProperty(e.prototype,"editIndex",{get:function(){return this._editIndex.clone()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editing",{get:function(){return this._editor&&this._editor.editing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editValue",{get:function(){return this._editor&&this._editor.value},enumerable:!0,configurable:!0}),e.prototype.setFocus=function(t,e){if(e&&(!this._editor||e!==this._editor.editor)){var i=rt(e);if(e instanceof i.HTMLInputElement||e instanceof i.HTMLSelectElement){var o=this._grid.focusedIndex.clone(),r=this._grid.getBodyCellAt(o,!0),n=r&&r.renderer2;if((n instanceof wr||n instanceof uh)&&n.inputFocusable)return}}this.$_focusToEditor(t,e)},e.prototype.resetEditor=function(t){if(this.editing){if(this._grid.isValid(this._editIndex)){if(this._resetBounds(),t&&this.editing){var e=this.getData(this._editIndex);this._resetting=!0;try{this._editor.setEditValue(e),this._editor.beginEdit(!1,!0)}finally{this._resetting=!1}}}else this.hideEditor();return!0}},e.prototype.reprepareEditor=function(t){Hn.areEquals(t,this._editIndex)&&(this.editing?this._editor.selectAll():(this._needPrepare=!0,this._prepareEditor(t)))},e.prototype.invalidateEditor=function(){this._dirty=!0},e.prototype.closeList=function(t){this._editor&&this._editor.closeList(t)},e.prototype.focusedIndexChanging=function(){return!this.editing||(this.closeList(!0),this.commitEditor(!0))},e.prototype.focusedIndexChanged=function(t,e,i){this._hideEditor(),this._grid.isValid(e)&&(i?this._prepareEditor(e):this._needPrepare=!0)},e.prototype.prepareEditor=function(t){this._needPrepare&&(this._needPrepare=!1,this._grid.isValid(t)&&this._prepareEditor(t))},e.prototype.requestPrepareEditor=function(){this._needPrepare=!0},e.prototype.dataColumnChanged=function(t){if(t&&this._editor&&this._editIndex&&this._editIndex.dataColumn===t){var e=!t.isWritable()||t.readOnly;e!=(!this._editable||this._readOnly)&&(this.editing?this._editor.setReadOnly(e):this._prepareEditor(this._editIndex))}},e.prototype.showEditor=function(t,e){var i=this._grid;if(i&&i.isValid(t)&&t.item.canEdit()){if(this._editor&&this._editor.editing)return i.makeCellVisible(t),!0;if(this._editor&&!this._editor.editing&&(!this._showEditorTimer&&this._prepareEditor(t),i.makeCellVisible(t),this._activateEditor(!1,!0,e)))return i.editorLender&&i.editorLender.editorShow(t),!0}},e.prototype.showList=function(t){var e=this._grid,i=this._editor;if(i&&i.editing&&(e.makeCellVisible(t),this.cancelEditor(!0)),e&&e.isValid(t)&&(this._prepareEditor(t),e.makeCellVisible(t),i&&this._editable&&!i.editing))return i.dropDownList(!0),!0},e.prototype.caretToLast=function(){this._editor&&this._editor.caretToLast()},e.prototype.hideEditor=function(){if(this.editing){this._modified=!1,this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}},e.prototype.commitEditor=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!0),!this.editing||this._commiting)return!0;var o=this._editor;if(!o)return!1;var r,n,s=this._grid,a=s.editOptions,l=this._editIndex,h=l.dataColumn,u=!0,c=o._mask;this._commiting=!0;try{if(o.commit(),(this._modified||o.isEdited())&&h&&h.dataIndex>=0)try{try{if((r=c&&!c.checkValid()?aa.InvalidFormat:o.getEditValue(!0,!0))===aa.InvalidFormat)u=!1,a.showInvalidFormatMessage&&c&&c.showInvalidFormatMessage&&alert(c&&c.invalidFormatMessage||a.invalidFormatMessage);else if(r===aa.Unselected)this._modified=!1,u=!0;else{var d={text:o.getEditText(),value:r};this._grid.getEditValue(o,l,d),r=d.value,u=this._grid.editorCommit(l,this._getData(l),r)}}catch(t){u=!1}this._grid.isItemEditing()?u&&r!==aa.Unselected&&(this._setData(l,r),this._grid.isItemEditing(l.item)&&(r=this._getData(l),this._grid.validateCellCommit(l,r)),this._modified=!1):this._modified=!1}catch(t){n=t,u=!1}if(this._resetting=!0,t)try{this._internalHideEditor(o),this._prepareEditor(l,i),o.isEdited()||this._grid.activeTool.resetFocused()}finally{this._resetting=!1}if(n){if(e)throw n;a.showCommitError&&alert(n.message||n)}}finally{this._commiting=!1}if(u&&s.isCellEditing()){var p=s.itemSource,_=p.editingItem.invalidFields,f=s.validationManager.getError(l);if(f)return _.push(h.dataIndex),a.showCommitError&&alert(f.userMessage||f.message||f),!1;if(_.indexOf(h.dataIndex)>=0&&_.splice(_.indexOf(h.dataIndex),1),s.validationManager.clearInvalidCell(l),_.length>0)return!0;if(!p.commit())return p.cancel(),!0}return u},e.prototype.cancelEditor=function(t){if(this.editing){this._canceling=!0;try{try{this._modified=!1,this._grid.editorCancel(this._editor,this._editIndex)}catch(t){throw t}this._resetting=!0;try{this._internalHideEditor(this._editor),this._prepareEditor(this._editIndex)}finally{this._resetting=!1}}finally{this._canceling=!1,this._grid.editorCanceled()}if(this._grid.editOptions.commitByCell){var e=this._grid.itemSource;e.isUpdating&&e.cancel()}}},e.prototype.fillSearchItems=function(t,e,i,o){this.editing&&this._editIndex.column===t&&this._editor instanceof wl&&this._editor.fillItems(e,i,o)},e.prototype.buttonClicked=function(t,e){this._editor&&Hn.areEquals(this._editIndex,t)&&this._editor.hasButton&&(lt.isMobile()&&this._editor.hasList||this._editor.buttonClicked(this._editIndex,e))},e.prototype.buttonDown=function(t,e){this._editor&&this._editor.buttonDown(t,e)},e.prototype.buttonUp=function(t,e){this._editor&&this._editor.buttonUp(t,e)},e.prototype.getData=function(t){},e.prototype.setEditValue=function(t,e){this._editor&&this._editor.setCellEditValue(t,e)},e.prototype._internalHideEditor=function(t){this.closeList(!1),t.setVisible(!1,!1),t.endEdit(),!this._grid._loading&&this._grid._fireHideEditor(t.editIndex),this._grid.editorLender&&this._grid.editorLender.editorHide(this._editIndex)},e.prototype.$_hideEdit=function(t,e){e&&(e.setEditIndex(t),e.setVisible(!1),this.$_focusToEditor())},e.prototype.$_getCellEditor=function(t){var e,i=this._grid;if(i.editorLender)e=i.editorLender.getEditor(t);else{var o=i.getBodyCellAt(t);e=o&&o.editor}if(!e){var r=t.valueColumn;r&&(e=r.editor)}var n=i.delegate.getCellEditor(aa.getEditorType(e));return n&&(n.initOptions(),e&&n.applyOptions(e),n.setController(this)),n},e.prototype.resetEditable=function(t){var e=this._editor;if(!e)return!1;var i=this._grid;if(e.setReadOnly(!1),i.editorLender)return this._editor.setEditIndex(t),this._editable=!0,!0;var o=i.editorOptions,n=t.valueColumn,s=t.item,a=i.canEditAt(t);if(o._titleExprStatement&&this._editor.setEditorTitle(t),!a)return this._editable=!1,this.$_hideEdit(t,this._editor),!1;var l=!i.canWriteAt(t);if(!l){var h=s.dataSource,u=h?h.getField(t.dataField):null;l=!u||u.dataType==r.OBJECT&&null==(n.objectKey||u.objectKey)}return this._readOnly=l,this._editor.setReadOnly(this._readOnly),this._editor.setEditIndex(t),this._editable=!0,!0},e.prototype._prepareEditor=function(t,e){void 0===e&&(e=!0);var i=this._grid,o=i.editOptions;if((i.active||i.editorLender)&&(this._dirty=!1,this._grid.isValid(t)&&t.item.canEdit()&&(this._hideEditor(e),this._editor=this.$_getCellEditor(t),this._editor))){this._editIndex.assign(t);var r=this._getData(t);this.resetEditable(t)?(this._editor.prepare(),this._editor.setEditValue(r),this._editor.selectAll(),o.editWhenFocused&&!this._editor.editing?(this._showEditorTimer&&clearTimeout(this._showEditorTimer),this._canceling||this._resetting||(this._showEditorTimer=setTimeout(function(){i.showEditor(),this._showEditorTimer=null}.bind(this),100))):this._editor.setVisible(!1),e&&this.$_focusToEditor()):this._editor&&(this._editor.editor.value=this._editor._valToStr(r))}},e.prototype._hideEditor=function(t){if(void 0===t&&(t=!0),this._editor)try{this._editor.setVisible(!1)}finally{this._editor.unprepare(),this._editor.endEdit(),this._editor=null,this._editable=!1,t&&this.$_focusToEditor()}},e.prototype._initEditor=function(t,e,i){this._dirty&&(this._dirty=!1,this._starting||this._prepareEditor(this._editIndex));var o=this._editor;o&&(o.endEdit(),this._resetBounds(),o.setVisible(!0,!0),o.beginEdit(t,e),t&&o.clear(),e&&o.selectAll(),i&&o.dropDownList(!1),this.$_focusToEditor(!0))},e.prototype.$_setEditorAttrs=function(t){var e=this._editor;if(e){for(var i in t)"callback"!=i&&e._editor.setAttribute(i,t[i]);"function"==typeof t.callback&&t.callback()}},e.prototype._editorActivated=function(t){this._grid.editorActivated(t)},e.prototype._activateEditor=function(t,e,i){void 0===i&&(i=!1);var o=this._grid,r=this._editor,n=this._editIndex,s={},a={};if(this._editable&&r&&!r.editing&&o.$_canShowEditor(n,s,a)){s.type&&(r=this._editor=o.delegate.getCellEditor(aa.getEditorType(s.type))||r),lt.isEmpty(s)||(r.applyOptions(s),r.setEditIndex(n));var l=r._editor;return r.textReadOnly?r.textReadOnly&&l&&(l.readOnly=r.textReadOnly):r.setReadOnly(this._readOnly),this._initEditor(t,e,i),nt(l).activeElement!==l&&l.focus(),this._modified=!1,this._editorActivated(this._editor),this.$_setEditorAttrs(a),!0}return!1},e.prototype._resetBounds=function(){if(this._editor){var t=this._grid.getEditCellBounds(this._editor,this._editIndex),e=this._grid.getEditBounds(this._editor,this._editIndex).width;t.x--,t.y--,t.width++,t.height++,lt.isMobile()&&(t.y-=1,t.height+=2),this._editor.setBounds(t.x,t.y,t.width,t.height,e),t=this._grid.getEditCellBounds(this._editor,this._editIndex),this._editor.setCellBounds(t.x,t.y,t.width,t.height),t.x<0&&(this._resetFocused=!0)}},e.prototype.$_focusToEditor=function(t,e){var i=this._grid;if(t||i.$_editFocused){var o=this._editor||this._defaultEditor;i.$_showFocusCell=i.$_showFocusCell||e&&o&&e!==o._editor,i.container._setFocusAndScroll(o),this.editing||this._editor&&this._editor.selectAll()}},e.prototype.$_focusToContainer=function(){},e.prototype._getData=function(t){var e=t.dataColumn,i=t.item;if(e&&i&&i.isDataRow){var o=e.dataIndex;if(o>=0)return i.getData(o)}},e.prototype._setData=function(t,e){var i=t.item;if(i){var o=t.dataColumn.dataIndex;o>=0&&(this._grid.undoable?this._grid.execute(new ch(t.item,o,e,t.column)):i.setData(o,e))}},e.prototype._isEditKey=function(t){return 8==t||t>=46&&t<=90||t>=96&&t<=111||t>=186&&t<=222||13==t&&this._grid.editOptions.enterToEdit},e}(ft),ph=function(t){function e(e,i,o){var r=t.call(this,e,i,o)||this;return r._col=-1,r._colChanged=!1,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.getCellIndex=function(t){return t.parentElement.$_row},e.prototype._createDom=function(){return null},e.prototype._prepareContent=function(t,e){var i=nt(t).createElement("div");return this._prepareCellContent(i),i},e.prototype._clearCellContent=function(t){var e=t.firstElementChild;e&&lt.detach(e)},e.prototype._prepareCellContent=function(t){},e.prototype._updateCellContent=function(t,e,i){i[this._textProp]=e.text},e.prototype._doRender=function(t){},e.prototype.$_setCol=function(t){(this._colChanged=t!=this._col)&&(this._col=t)},e.prototype._layoutCell=function(t,e,i){if(this._colChanged){i.removeAttribute("rowspan"),i.style.removeProperty("display");var o=i.firstElementChild;this._clearCellContent(o),this._prepareCellContent(o)}},e.prototype._getTableCell=function(t){return this.parent._tbody.children[t].children[this._col]},e.prototype.$_getCellSelector=function(t,e){var i=this.model.cellStyleCallback,o=this.grid,r=t.parentElement.$_row,n=o.getItem(r),s=o.getCellType(t);if(i){var a=i(this.grid.handler,s,null==n?void 0:n.index);return a?" "+a:""}return""},e}(Gs),_h=function(t){function e(e,i){return t.call(this,e,i,"rowIndicatorView")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.refresh=function(t,e){for(var i=0;i<e;i++){var o=this._getTableCell(i);o.$_foc=t.isFocusedRow(o.parentElement.$_row),lt.setClassName(o,this.$_getCellSelector(o))}},e.prototype._getCssSelector=function(){return"rg-rowindicator"},e.prototype.measureWidth=function(t){var e=this.model,i=e.width;if(0==i&&t.dataSource){var o=t.dataSource.rowCount+"";i=t.container.measureText("rg-rowindicator-cell",o)+1}return i=Math.max(e.minWidth>0?e.minWidth:i,Math.min(e.maxWidth>0?e.maxWidth:i)),e._displayWidth=i,i},e.prototype._layoutCell=function(e,i,o){t.prototype._layoutCell.call(this,e,i,o);var r=this.model.getCell(i);lt.setClassName(o,this.$_getCellSelector(o)),this._updateCellContent(e,r,o.firstElementChild)},e.prototype.$_getCellSelector=function(e,i){var o=this.grid,r=e.parentElement.$_row,n=e.$_foc,s=this.model,a="rg-rowindicator-cell";if(-99===r)return Es.ROW_BAR_CELL_STYLE;if(n){a+=s.showFocus?" rg-rowindicator-focus":"";var l=o.getItem(r);lt.isDebugging();var h=l&&l.itemState;Qi(h)?a+=" rg-rowindicator-inserting":h==wi.UPDATING&&(a+=" rg-rowindicator-editing")}else o.isSelectedItem(r)&&s.showSelection&&(a+=" rg-rowindicator-select");return a+=t.prototype.$_getCellSelector.call(this,e,i)},e}(ph),fh=function(t){function e(e,i){var o=t.call(this,e,i,"stateBarView")||this;return o._textMark=!1,o}return o(e,t),e.prototype.rowOf=function(t){return t.parentElement.$_row},e.prototype._getCssSelector=function(){return"rg-statebar"},e.prototype.measureWidth=function(t){return t.stateBar.width},e.prototype._layoutCell=function(e,i,o){t.prototype._layoutCell.call(this,e,i,o);var r=this.model,n=r.mark,s=n==jn.IMAGE;this._textMark=n==jn.TEXT;var a=r.getCell(i);lt.setClassName(o,this.$_getCellSelector(o,s)),this._updateCellContent(e,a,o.firstElementChild)},e.prototype._updateCellContent=function(t,e,i){i[lt.TextProp]=this._textMark&&e.text||""},e.prototype.$_getCellSelector=function(e,i){var o=this.grid,r=o.getItem(e.parentElement.$_row),n=r.dataRow,s="rg-statebar-cell ";if(o.isItemEditing(r)&&this._error&&this.model.errorVisible)switch(this._error.level){case p.INFO:s+=" rg-statebar-info";break;case p.WARNING:s+=" rg-statebar-warning";break;case p.ERROR:s+=" rg-statebar-error"}else if(n>=0&&i){switch(r.rowState){case at.UPDATED:s+=" rg-statebar-updated";break;case at.CREATED:s+=" rg-statebar-created";break;case at.DELETED:s+=" rg-statebar-deleted";break;case at.CREATE_AND_DELETED:s+=" rg-statebar-create-and-deleted"}}return s+=t.prototype.$_getCellSelector.call(this,e,i)},e}(ph),gh=function(t){function e(e,i){var o=t.call(this,e,i,"checkBarView")||this;return o._fixedCount=0,o._prevChecked=-1,o._exclusive=!1,o._typeChanged=!1,o._useImage=!1,o._imageChanged=!1,o}return o(e,t),e.prototype.rowOf=function(t){return t.parentElement.$_row},e.prototype._getCssSelector=function(){return"rg-checkbar"},e.prototype._doPrepareContent=function(t){var e=t.grid.checkBar;(this._typeChanged=e.exclusive!==this._exclusive)&&(this._exclusive=e.exclusive),(this._imageChanged=e.useImages!==this._useImage)&&(this._useImage=e.useImages)},e.prototype._clearCellContent=function(e){e[this._textProp]="",t.prototype._clearCellContent.call(this,e)},e.prototype._prepareCellContent=function(t){var e=nt(t),i=e.createElement("input"),o=i.style;i.type=this._exclusive?"radio":"checkbox",i.tabIndex=-1,i.className=this._exclusive?"rg-radio":"rg-checkbox",o.display=this._useImage?"none":"inline-block",t.appendChild(i);var r=e.createElement("span");(o=r.style).display=this._useImage?"inline-block":"none",t.appendChild(r)},e.prototype.measureWidth=function(t){return this.model.width},e.prototype._layoutCell=function(e,i,o){t.prototype._layoutCell.call(this,e,i,o);var r=this.model.getCell(i);lt.setClassName(o,this.$_getCellSelector(o)),o.style.display="",o.removeAttribute("rowspan");var n=e.fixedOptions.rowCount,s=e.checkBar;if(s._merged){var a=s._merges,l=i.itemIndex;if(l=l<n?l:l-e.layoutManager.topIndex,a.isMerged(l,n))if(a.isHidden(l,n))o.style.display="none",o.removeAttribute("rowspan");else{var h=a.getMerged(l,n);o.rowSpan=h}else o.removeAttribute("rowspan")}this._updateCellContent(e,r,o.firstElementChild.firstElementChild)},e.prototype._updateCellContent=function(t,e,i){var o=e.item,r=i,n=t.checkBar;r.checked=o&&o.checked,r.disabled=o&&!o.checkable,r.style.visibility=o instanceof io||o instanceof Dr||n.showGroup&&n.fieldIndex<0&&!n.merged?"visible":"hidden";var s=this._useImage;this._typeChanged&&(r.setAttribute("type",this._exclusive?"radio":"checkbox"),r.className=this._exclusive?"rg-radio":"rg-checkbox");var a=r.nextElementSibling;if(this._imageChanged&&a&&(r.style.display=s?"none":"inline-block",a.style.display=s?"inline-block":"none"),s&&a){var l=r.checked?this._exclusive?"rg-checkbar-radio-checked":"rg-checkbar-checked":this._exclusive?"rg-checkbar-radio-unchecked":"rg-checkbar-unchecked";l+=r.disabled?" disabled":"",a.className=l}},e.prototype.getCheckBox=function(t){return t.firstElementChild.firstElementChild},e.prototype.$_getCellSelector=function(i,o){var r=e.CELL_CSS,n=i.parentElement.$_row,s=this.grid.getItem(n);return r+=s&&s.checkable?"":" rg-checkbar-disabled",r+=t.prototype.$_getCellSelector.call(this,i,o)},e.prototype.$_setPrevChecked=function(t){this._prevChecked=t},e.CELL_CSS="rg-checkbar-cell",e}(ph),yh=function(t){function e(e){var i=t.call(this,e.doc,null,"rowBarContainer")||this;i._count=0;var o=e.doc;return i._bars=[e.rowIndicator,e.stateBar,e.checkBar],i.addChild(i._indicatorView=new _h(o,e.rowIndicator)),i.addChild(i._stateView=new fh(o,e.stateBar)),i.addChild(i._checkView=new gh(o,e.checkBar)),i._views=[i._indicatorView,i._stateView,i._checkView],i}return o(e,t),e.prototype._doDispose=function(){this._bars=this._views=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rowIndicator",{get:function(){return this._indicatorView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateBar",{get:function(){return this._stateView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkBar",{get:function(){return this._checkView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateError",{get:function(){return this._stateView._error},set:function(t){this._stateView._error=t},enumerable:!0,configurable:!0}),e.prototype.getCellIndex=function(t){return t.parentElement.$_row},e.prototype.refresh=function(t){this._indicatorView.visible&&this._indicatorView.refresh(t,this._count)},e.prototype.rowOf=function(t){return t.parentElement.$_row},e.prototype.getCheckBox=function(t){return this._checkView.getCheckBox(t)},e.prototype.getCellType=function(t){var e=this._views[t.cellIndex];return e instanceof _h?"indicator":e instanceof fh?"state":e instanceof gh?"check":void 0},e.prototype.isRowIndicator=function(t){return this._views[t.cellIndex]instanceof _h},e.prototype._getCssSelector=function(){return"rg-rowbarcontainer"},e.prototype._isFixedHeight=function(){return!0},e.prototype._doPrepareContent=function(e){for(var i=0,o=this._views;i<o.length;i++){o[i]._doPrepareContent(e)}t.prototype._doPrepareContent.call(this,e)},e.prototype._prepareCellContent=function(t,e){return this._views[e]._prepareContent(t,e)},e.prototype._getTableRowHeight=function(t,e){var i=t.fixedItemCount;return i>0&&e>i?t.getTableItemHeight(e-1):t.getTableItemHeight(e)},e.prototype._doMeasure=function(t,e,i){this.$_prepareBars(t);for(var o=0,r=0,n=this._views;r<n.length;r++){var s=n[r];o+=s.width=s.measureWidth(t)}return new As(o,i)},e.prototype._doLayoutContent=function(t){for(var e=t.grid,i=t.topIndex,o=t.itemCount,r=t.fixedItemCount,n=this._count=r+o,s=this._bars.length,a=e.focusedRow,l=this._views,h=0;h<n;h++){var u=h<r?h:h+i,c=Hn.temp(e,u),d=this._getTableRow(t,h);lt.setClassName(d,this.getStyleName(c.item)),d.$_row=u;for(var p=0;p<s;p++){var _=d.cells[p];_.$_foc=u==a,l[p]._layoutCell(e,c,_)}}r>0&&this._layoutFixedBar(e.fixedOptions,r)},e.prototype._doUpdateCellContent=function(t,e,i){i[this._textProp]=e.text},e.prototype._doRender=function(t){},e.prototype._getCellCount=function(t){return this._bars.length},e.prototype._getCellWidth=function(t,e){return this._views[e].width},e.prototype.$_prepareBars=function(t){var e=this._bars=[],i=this._views=[];t.rowIndicator.visible&&e.push(t.rowIndicator),t.stateBar.visible&&e.push(t.stateBar),t.checkBar.visible&&e.push(t.checkBar),e.length>1&&e.sort((function(t,e){var i=t.displayOrder,o=e.displayOrder;return i==o?t.staticOrder-e.staticOrder:i-o}));for(var o=0,r=e.length;o<r;o++){var n=e[o],s=void 0;(s=n instanceof cs?this._indicatorView:n instanceof ps?this._stateView:this._checkView).$_setCol(o),s._colChanged=s._colChanged||n.visChanged,i.push(s),n.visChanged=!1}this._indicatorView.visible=i.indexOf(this._indicatorView)>=0,this._stateView.visible=i.indexOf(this._stateView)>=0,this._checkView.visible=i.indexOf(this._checkView)>=0},e.prototype._layoutFixedBar=function(t,e){var i=this._tbody.children[e];i.$_idx=e,i.$_row=-99,lt.setClassName(i,Es.ROW_BAR_STYLE);for(var o=0;o<i.childElementCount;o++){var r=i.children[o];r.$_foc=!1,lt.setClassName(r,Es.ROW_BAR_CELL_STYLE)}},e.prototype.getStyleName=function(t){var i=e.ROW_STYLE;return(i+=xs.STATE_ROW_STYLES[t.rowState]||"").trim()},e.ROW_STYLE="rg-row-bar",e}(qs),mh=function(){function t(){}return t.getData=function(e){var i=new t;return i.cellType=e,i},t.getSub=function(e,i){var o=new t;return o.cellType=e,o.subType=i,o},t.getField=function(e,i,o){var r=new t;return r.cellType=e,r.field=r.fieldIndex=i,r.fieldName=o,r},t.getItem=function(e,i,o){var r=new t;return r.cellType=e,r.itemIndex=i,null!=o&&(r.dataRow=o),r},t.getLayout=function(e,i){var o=new t;return o.cellType=e,i instanceof On?(o.subType="layoutHeader",o.column=i.name):(o.column=i.firstColumn&&i.firstColumn.name,i.firstColumn instanceof mn&&(o.field=o.fieldIndex=i.firstColumn.dataIndex,o.fieldName=i.firstColumn.fieldName)),o},t.getCell=function(e,i){var o=new t;"data"===e&&(o.editable=i.editable,o.readOnly=i.readonly);var r=i.layout;return o.cellType=e,o.itemIndex=i.item.index,o.dataRow=i.item.dataRow,o.column=i.layout.firstColumn&&i.layout.firstColumn.name,r.firstColumn instanceof mn&&(o.field=o.fieldIndex=r.firstColumn.dataIndex,o.fieldName=r.firstColumn.fieldName),o},t.getGroupFooter=function(e,i,o){var r=new t,n=o.firstColumn;return r.cellType=e,r.itemIndex=i,r.index=n&&n.grid&&n.grid.getItem(i).footerIndex,r.column=n&&n.name,n instanceof mn&&(r.field=r.fieldIndex=n.dataIndex,r.fieldName=n.fieldName),r},t.getSummary=function(e,i,o){var r=new t;return r.cellType=e,r.index=i,r.column=o.firstColumn&&o.firstColumn.name,o.firstColumn instanceof mn&&(r.field=r.fieldIndex=o.firstColumn.dataIndex,r.fieldName=o.firstColumn.fieldName),r},t.getGroupElt=function(e,i){var o=new t;return o.cellType=e,o.groupLevel=i,o},t}(),bh=function(t){function e(e,i){var o=t.call(this,e,"focusView")||this;return o._editing=!1,o._focusType="layer",o._buttonWidth=0,o._isLeftImageButton=!1,o._inner=i,o}return o(e,t),Object.defineProperty(e.prototype,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this.$_typeChanged(t))},enumerable:!0,configurable:!0}),e.prototype.$_createLine=function(t){function e(t,e,i){var o=t.createElement("div");o.className=e?"rg-focus-inner-line":"rg-focus-line";var r=o.style;return r.display="none",r.position="absolute",r.boxSizing="border-box",r.left="0px",r.top="0px",1!==i&&(r.borderTop="none"),2!==i&&(r.borderBottom="none"),3!==i&&(r.borderLeft="none"),4!==i&&(r.borderRight="none"),o}var i=nt(t);t.appendChild(this._topLine=e(i,this._inner,1)),t.appendChild(this._bottomLine=e(i,this._inner,2)),t.appendChild(this._leftLine=e(i,this._inner,3)),t.appendChild(this._rightLine=e(i,this._inner,4))},e.prototype.$_typeChanged=function(t){var e=this._dom.style;this._topLine||this.$_createLine(this._dom),"line"===t?(e.height="0px",e.width="0px",e.border="none",this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="block",this.invalidate()):(e.removeProperty("border"),this._topLine.style.display=this._bottomLine.style.display=this._leftLine.style.display=this._rightLine.style.display="none")},e.prototype.$_linePosition=function(t,e,i,o){var r=this._topLine.style,n=this._bottomLine.style,s=this._leftLine.style,a=this._rightLine.style,l=this.parent.width,h=this.parent.height;n.left=r.left=-t+"px",n.width=r.width=l+t+"px",n.top=o-2+"px",a.height=s.height=h+"px",a.left=i-2+"px",n.display=h<o?"none":"block",s.display=t<0?"none":"block",a.display=l<i?"none":"block"},e.prototype.setEditing=function(t,e,i){t!=this._editing&&(this._editing=t,this._buttonWidth=e,this._isLeftImageButton=i,this.resetStyleName())},e.prototype._getCssSelector=function(){return this._inner?"rg-focus-inner":this._editing?"rg-focus-editing":"rg-focus"},e.prototype.setBounds=function(e,i,o,r){if("line"===this._focusType){var n=this._dom.style;n.left=e+"px",n.top=i+"px",this.width=o,this.height=r,this.$_linePosition(e,i,o,r)}else this.x++,t.prototype.setBounds.call(this,e,i,o,r)},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e.prototype._beforeDraw=function(e){if("line"===this._focusType){this._setClassName(e);var i=e.style;i.left=this.x+"px",i.top=this.y+"px"}else t.prototype._beforeDraw.call(this,e)},e}(Rs),vh=function(t){function e(e,i){void 0===i&&(i=!1);var o=t.call(this,e,"focusMask")||this;return o._focusType="layer",o._focusView=new bh(e,i),o.addChild(o._focusView),o}return o(e,t),e.prototype._doDispose=function(){this._focusView&&this._focusView.dispose(),this._focusView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"focusType",{get:function(){return this._focusType},set:function(t){t!==this._focusType&&(this._focusType=t,this._focusView.focusType=t,this.$_typeChanged(t))},enumerable:!0,configurable:!0}),e.prototype.$_typeChanged=function(t){var e=this._dom.style;"line"===t?(e.removeProperty("overflow"),e.width="0px",e.height="0px"):(e.overflow="hidden",e.width=this.width+"px",e.height=this.height+"px")},e.prototype.updateElement=function(t,e,i,o,r){this._focusView.setBounds(t,e,i,o),this._focusView.setEditing(r,0,!1)},e.prototype._getCssSelector=function(){return"rg-focus-mask"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),this.setImportantStyle("background","none"),this.setImportantStyle("border","none"),this.setImportantStyle("overflow","hidden")},e.prototype._beforeDraw=function(e){if("line"===this._focusType){this._setClassName(e);var i=e.style;i.left=this.x+"px",i.top=this.y+"px"}else t.prototype._beforeDraw.call(this,e)},e.prototype.setRect=function(e){"line"===this._focusType?e.x==this.x&&e.y==this.y&&e.width==this.width&&e.height==this.height||(this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height):t.prototype.setRect.call(this,e)},e}(Rs),wh=function(t){function e(e){var i=t.call(this,e,"rowBlockView")||this;return i.visible=!1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-rowblock"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(Rs),Ch=function(t){function e(e){return t.call(this,e,"headerCellResizer")||this}return o(e,t),e.prototype._getCssSelector=function(){return"_rg-col-resizer_"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(Rs),xh=function(t){function e(e){var i=t.call(this,e,"headerCellFeedback")||this;return i._modelChanged=!1,i.dragging=!1,i}return o(e,t),e.prototype._doDispose=function(){this._model=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{set:function(t){this._model=t,this._modelChanged=!0},enumerable:!0,configurable:!0}),e.prototype._createDom=function(t){var e=t.createElement("table");e.style.setProperty("table-layout","fixed","important");var i=t.createElement("tbody");e.appendChild(i);var o=t.createElement("tr");i.appendChild(o);var r=this._cell=t.createElement("td");return o.appendChild(r),r.className="rg-header rg-header-cell _rg-header-cell-feedback_",e},e.prototype._getCssSelector=function(){return"rg-table"},e.prototype._doDraw=function(t){this.dragging&&!this._modelChanged||(Ia.renderCell(this._model,this._cell),this._modelChanged=!1)},e}(Rs),Ih=function(t){function e(e){return t.call(this,e,"headerCellMover")||this}return o(e,t),e.prototype._getCssSelector=function(){return"_rg-header-cell-mover_"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e)},e.prototype._doDraw=function(t){},e}(Rs),Eh=function(t){function e(e){return t.call(this,e,"rowMoverLine")||this}return o(e,t),e.prototype._getCssSelector=function(){return"_rg-row-mover-line_"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(Rs),Sh=function(t){function e(e){var i=t.call(this,e,"rowMover")||this;return i._enabled=!0,i._label="1행 이동",i}return o(e,t),e.prototype.setEnabled=function(t){if(t!=this._enabled)return this._enabled=t,this.invalidate(),!0},e.prototype.setLabel=function(t){if(t!=this._label)return this._label=t,this.invalidate(),!0},e.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t)},e.prototype._getCssSelector=function(){var t="_rg-row-mover-proxy_";return this._enabled||(t+=" _rg-row-mover-proxy-disabled_"),t},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none"),e.style.whiteSpace="nowrap"},e.prototype._setSizeStyle=function(t){},e.prototype._doDraw=function(t){t[lt.TextProp]=this._label},e}(Rs),Oh=function(t){function e(e,i){var o=t.call(this,e,i)||this;o._rowBlockStart=-1,o._rowBlockEnd=-1;var r=e.doc,n=o._grid=e.gridView;return o._skipIndex=n.getIndex(),o._tempIndex=n.getIndex(),o._tempInnerIndex=n.getIndex(),n.addFeedbackElement(o._rowBlockMask=new wh(r)),n.addFeedbackElement(o._rowFocusView=new Dh(r)),n.addFeedbackElement(o._focusMask=new vh(r)),n.addFeedbackElement(o._innerFocusMask=new vh(r,!0)),o}return o(e,t),e.prototype._doDispose=function(){this._skipIndex&&this._skipIndex.dispose(),this._skipIndex=null,this._tempInnerIndex=this._tempInnerIndex.dispose(),this._focusMask=this._focusMask.dispose(),this._innerFocusMask=this._innerFocusMask.dispose(),this._rowFocusView&&this._rowFocusView.dispose(),this._rowFocusView=null,this._rowBlockMask&&this._rowBlockMask.dispose(),this._rowBlockMask=null,this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focused",{get:function(){return this._grid.focusedIndex},enumerable:!0,configurable:!0}),e.prototype.setFocused=function(t,e){var i=this._grid;if(i.isValid(t)){var o=i.getItem(t.itemIndex);return!i.isEditing()&&o instanceof ho&&i.append(),this._grid.setFocusedIndex(t,e,!0)}return!1},e.prototype.layoutChanged=function(){this.$_resetFocusView(),this.$_resetRowBlockMask(),this._doLayoutChanged()},e.prototype.resetFocused=function(){this.$_resetFocusView()},e.prototype.focusedIndexChanging=function(t){},e.prototype.focusedIndexChanged=function(t,e){var i=this.grid,o=i.layoutManager,r=o.fixedItemCount,n=e.itemIndex;this.grid.setFocusedClass(t,!1),t.itemIndex!==e.itemIndex&&this.grid.setFocusedRowClass(t,!1),(!this.grid.isValid(e)||r>0&&n<r||n>=o.topIndex+r&&n<=r+o.topIndex+o.fullItemCount)&&this.$_resetFocusView(),!i.isEditing()&&e.item instanceof ho&&i.append()},e.prototype.currentRowChanged=function(t,e){var i=this.grid,o=i.displayOptions;if(this._rowBlockStart=-1,this._rowBlockEnd=-1,o.rowBlockType!=m.NONE){var r=o.rowBlockCallback;if(r){var n;(n=r(i.handler,i.getItemIndexOfRow(e)))?(this._rowBlockStart=n.start,this._rowBlockEnd=n.end):this._rowBlockStart=this._rowBlockEnd=-1}}this.$_resetRowBlockMask()},e.prototype.getNextRequest=function(t,e,i,o){return null},e.prototype.isMouseEventTarget=function(e){if(e instanceof Ks){var i=e.getAncestor(zs);if(i)return i.getContentAt(e.index)==this.mouseEventTarget}return t.prototype.isMouseEventTarget.call(this,e)},e.prototype._doSetFocus=function(t){this.grid.setFocus(t)},e.prototype._doFocusLeave=function(t){if(this.grid.editOptions.commitWhenLeave&&this.grid.isEditing()){for(var e=t.target;e;){if((e.className||"").indexOf("rg-")>=0)return;e=e.parentElement}this.grid.commit(!1,void 0,!1)}},e.prototype._doLayoutChanged=function(){},e.prototype.$_resetFocusView=function(){var t=this._grid,e=t.layoutManager,i=t.displayOptions,o=t.focusedIndex,r=this._tempInnerIndex.assign(o),n=!1,s=!1,a=!1;if(i.focusVisible&&t.isValid(r)&&!t.isEditing()){var l=r.item,h=t.getBodyViewAt(r),u=h.getCellAt(e,r),c=u;if(!u&&r.layout.merged){var d=e.getMergeRoom(r);d&&(r.itemIndex=e.fixedItemCount+e.topIndex,d.contains(r)&&(u=h.getCellAt(e,r)),u||(r.itemIndex=e.fixedItemCount+e.topIndex+e.itemCount-1,d.contains(r)&&(u=h.getCellAt(e,r))))}if(u&&!u.grouped){var p=t.isEditing(),_=h.getCellRectAt(e,r,!0);if((_=h.boundsByContainer(_)).width>0&&_.height>0){var f=0,g=_.width;if(!r.colFixed&&!r.rightFixed){var y=e.fixedContentBounds;f=Math.max(0,y.right-_.x),g=Math.max(0,_.width-f),y=e.rightContentBounds,g-=_.right-y.x}if(g>0){p&&(_.y--,_.height+=1);var b=_.clone();(y=e.footerBounds.clone()).y+=e.contentBounds.y;Math.max(0,_.bottom-y.y);if(_.width=Math.min(_.width,g),_.x+=f,_.bottom=Math.min(_.bottom,y.y),this._focusMask.setRect(_),this._focusMask.focusType=i.focusType,this._focusMask.updateElement(-f,0,b.width,b.height,p),n=!0,c&&c.merged){if(i.showInnerFocus)if((x=h.getCellRectAt(e,r,!1)).height<_.height){this._innerFocusMask.focusType=i.focusType,x.height=Math.min(x.height,_.height);var v=(x=h.boundsByContainer(x)).width-8,w=x.height-8;x.bottom=Math.min(_.bottom+4,x.bottom),this._innerFocusMask.setRect(x.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,v,w,p),a=!0}}else{var C=h.getCellAt(e,r);if(C&&C.renderer2&&C.editable&&C.renderer2.canShowInnerFocus()){var x=h.getCellRectAt(e,r,!1);v=(x=h.boundsByContainer(x)).width-8,w=x.height-8;x.bottom=Math.min(_.bottom+4,x.bottom),this._innerFocusMask.setRect(x.inflate(-4,-4,-4,-4)),this._innerFocusMask.updateElement(0,0,v,w,p),a=!0}}}}}else if(!l.isData){var I=t.getRowView(h,l);if(I){_=I.boundsByContainer();this._focusMask.updateElement(0,0,_.width,_.height,!1),_.x<e.leftContentBounds.right&&(_.x=e.leftContentBounds.right,_.width-=e.leftContentBounds.right-_.x),this._focusMask.setRect(_),n=!0}}}var E=i.rowFocusType;if(E!=m.NONE){var S=e.footerBounds.y+e.contentBounds.y,O=e.fixedItemCount,R=r.itemIndex;if((R=R>=O?R-e.topIndex:R)>=0&&R<=e.itemCount-1){switch((_=e.getTableItemBounds(R)).y+=e.contentBounds.y+e.bodyBounds.y,_.bottom>S&&(_.bottom=S),E){case m.DATA:_.x=t.fixedContentPane.x,_.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right;break;case m.FILL:_.x=0,_.width=t.width;break;case m.ROW:_.x=0,_.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right}this._rowFocusView.setRect(_),s=!0}else s=!1}this._rowFocusView.visible=s,this._focusMask.visible=n,this._innerFocusMask.visible=a,this._focusMask.visible,t.setFocusedClass(o,!0),t.setFocusedRowClass(o,!0)},e.prototype.$_resetRowBlockMask=function(){var t=this.grid,e=t.layoutManager,i=e.fixedItemCount,o=t.topItem,r=this._rowBlockMask,n=t.displayOptions.rowBlockType,s=this._rowBlockStart,a=this._rowBlockEnd,l=Math.max(s-o+i,i),h=Math.min(Math.max(a-o+i),e.itemCount+i-1);if(r.visible=n&&n!=m.NONE&&l>=0&&h>=0&&l<e.itemCount&&l<=h&&s!==a,r.visible){var u=e.footerBounds.y+e.contentBounds.y,c=e.getTableItemBounds(l),d=e.getTableItemBounds(h);switch((c=c.union(d)).y+=e.contentBounds.y+e.bodyBounds.y,c.bottom>u&&(c.bottom=u),n){case m.DATA:c.x=t.fixedContentPane.x,c.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right;break;case m.FILL:c.x=0,c.width=t.width;break;case m.ROW:c.x=0,c.right=t.rightContentPane.width?t.rightContentPane.right:t.contentPane.right}r.setRect(c)}},e.prototype._doCancel=function(t){if(t.closeFilterSelector(),t.isEditing())t.cancelEditor(!0);else if(t.isItemEditing())t.itemEditCancel()&&t.cancel();else if(this.dragging&&this.dragTracker)try{this._stopDragTracker(null,null,!0),this.dragTracker.cancel(),this.dragTracker.linkable&&t.container.cancelOtherContainer(this.dragTracker)}catch(t){throw t}finally{this.dragTracker=null}},e.prototype._doEnter=function(t,e,i){var o=t.isEditing();if(o&&!e.enterToTab)t.commitEditor(!0);else{var r=i.clone(),n=e.skipReadOnly,s=e.skipReadOnlyCell;if(t.isValid(r))if(e.enterToNextRow&&r.itemIndex<t.itemCount-1)r.down(),s&&this._checkReadOnly(r)&&(this._skipReadOnlyCell(r,1)||r.assign(i));else if((!e.enterToEdit||o)&&e.enterToTab&&e.crossWhenExitLast&&(r.isLast||e.skipReadOnly&&r.isEditableLast)&&r.itemIndex<t.itemCount-1)r.down(),r.home(),n&&this._skipReadOnly(r,1);else if((!o||e.enterToTab)&&e.commitWhenExitLast&&r.isLast){try{t.commit(e.commitWhenNoEdit)}catch(i){throw i instanceof Vr&&(i=t._fireValidationFail(r.item.index,i.column,i))&&alert(e.showOnlyValidationMessage&&i.userMessage?i.userMessage:i.toString()),i}e.appendWhenExitLast&&(t.append(),t.isItemEditing()&&(r.down(),r.home()))}else e.enterToTab&&(t.isEditing()||this._checkReadOnly(r))?(t.isEditing()&&t.commitEditor(!0),r.next(),this._getNextVisible(t,r),n&&!this._skipReadOnly(r,1)&&r.assign(i)):e.enterToEdit||(r.next(),this._getNextVisible(t,r),n&&!this._skipReadOnly(r,1)&&r.assign(i));else r.normalize(t);Hn.areEquals(r,i)?t.isValid(r)&&e.enterToEdit&&!o&&!t.isEditing()&&i&&i.dataColumn&&!this._checkReadOnly(i)&&t.showEditor(i):this.setFocused(r,!0)}return!0},e.prototype._doTab=function(t,e,i,o,r,n){var s=i.clone(),a=!1;if(t.isValid(s)){if(e.useTabKey){var l=e.exitGridWhenTab;if(r){if(e.crossWhenExitLast&&(s.isFirst||e.skipReadOnly&&s.isEditableFirst)&&s.itemIndex>0?(s.up(),s.end()):(s.prev(),this._getPrevVisible(t,s)),e.skipReadOnly&&!this._skipReadOnly(s,-1)&&s.assign(i),Hn.areEquals(s,i)&&l){switch(l){case"row":a=!0;break;case"grid":a=s.itemIndex<=0}if(a)return!lt.isMobile()&&t.container._containerDom.setAttribute("tabindex","-1"),!1}}else{if(e.crossWhenExitLast&&(s.isLast||e.skipReadOnly&&s.isEditableLast)&&s.itemIndex<t.itemCount-1)s.down(null,e.skipReadOnly&&s.isEditableLast&&e.crossWhenExitLast),s.home();else if(e.commitWhenExitLast&&s.isLast){try{t.commit(e.commitWhenNoEdit)}catch(i){throw i instanceof Vr&&(i=t._fireValidationFail(s.itemIndex,i.column,i))&&alert(e.showOnlyValidationMessage&&i.userMessage?i.userMessage:i.toString()),i}e.appendWhenExitLast&&(t.append(),t.isItemEditing()&&(s.down(),s.home()))}else s.next(),this._getNextVisible(t,s);if(e.skipReadOnly&&!this._skipReadOnly(s,1)&&s.assign(i),Hn.areEquals(s,i)&&l){switch(l){case"row":a=!0;break;case"grid":a=s.itemIndex>=t.itemCount-1}if(a)return!1}}return Hn.areEquals(s,i)||this.setFocused(s,!0),(lt.isMobile()||t.handler._draggable)&&n&&n.preventDefault&&n.preventDefault(),!0}}else s.normalize(t),this._skipReadOnly(s,1);return r&&!lt.isMobile()&&t.container._containerDom.setAttribute("tabindex","-1"),!1},e.prototype._getNextVisible=function(t,e){t.getBodyViewAt(e).getNextVisibleCell(e)},e.prototype._getPrevVisible=function(t,e){t.getBodyViewAt(e).getPrevVisibleCell(e)},e.prototype._checkReadOnly=function(t){var e=this.grid;if(!e.isValid(t))return!0;var i=e.getWritableAt(t);return null!=i?!i:!t.dataColumn.isWritable()},e.prototype._skipReadOnly=function(t,e){var i=!1;if(this.grid.editOptions.skipReadOnly){var o=this._skipIndex;if(o.assign(t),!(i=!this._checkReadOnly(o)))if(e>0){for(;o.next();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}else for(;o.prev();)if(!this._checkReadOnly(o)){t.assign(o),i=!0;break}}return i},e.prototype._skipReadOnlyCell=function(t,e,i){var o=this.grid,r=!t.dataColumn.isWritable()&&!0;if(!r&&o.editOptions.skipReadOnlyCell){var n=this._skipIndex;n.assign(t),r=!this._checkReadOnly(n)}return r},e.prototype._commitCancel=function(t,e){var i=this.grid;try{switch(t.itemState){case wi.INSERTING:return i.commit(e.forceInsert)||i.cancel(!0),!0;case wi.APPENDING:return i.commit(e.forceAppend)||i.cancel(!0),!0;case wi.UPDATING:return i.commit(e.commitWhenNoEdit)||i.cancel(!0),!0}}catch(o){if(o instanceof Vr)return(o=i._fireValidationFail(t.index,o.column,o))&&alert(e.showOnlyValidationMessage&&o.userMessage?o.userMessage:o.toString()),!1;if(o instanceof Nr)return!1;throw o}return!1},e.prototype._doColumnHeaderClicked=function(t,e){},e.prototype._editButtonClicked=function(t,e){},e}(Fa),Rh=function(t){function e(e){var i=t.call(this,e,"rowHoverView")||this;return i.visible=!1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-rowhover"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(Rs),Dh=function(t){function e(e){var i=t.call(this,e,"rowFocusView")||this;return i.visible=!1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-rowfocus"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("pointer-events","none")},e}(Rs),kh=function(t){function e(e,i){var o=t.call(this,e,i)||this;o._tooltipOptions=new nh,o._checkScroll=Date.now(),o._prevScroll=Date.now(),o._tempRect=new N,o._reqPoint=new Ss,o._swipeTimer=null,o._swipeDistance=0,o._swipeDuration=0,o._swipeStarted=null,o._swipePrev=void 0,o._swipeAmount=0,o._tapX=NaN,o._tapY=NaN;var r=e.doc,n=o.grid;return o._cellResizer=new Ch(r),o._cellMover=new Ih(r),o._cellFeedback=new xh(r),o._rowMoverLine=new Eh(r),o._rowMoverProxy=new Sh(r),o._colResizeReq=new Gl(n),o._colMoveReq=new Ul(n),o._rowResizeReq=new zl(n),o._headerResizeReq=new Yl(n),o._rowMoveReq=new ql(n),o._tooltipIndex=new Hn(n),o._touchManager=o.$_createTouchManager(e),o}return o(e,t),e.prototype._doDispose=function(){this._clickCell=null,this._clickElement=null,this._cellResizer=this._cellResizer.dispose(),this._cellMover=this._cellMover.dispose(),this._cellFeedback=this._cellFeedback.dispose(),this._rowMoverLine=this._rowMoverLine.dispose(),this._rowMoverProxy=this._rowMoverProxy.dispose(),this._colResizeReq=this._colResizeReq.dispose(),this._colMoveReq=this._colMoveReq.dispose(),this._rowMoveReq=this._rowMoveReq.dispose(),this._rowResizeReq=this._rowResizeReq.dispose(),this._headerResizeReq=this._headerResizeReq.dispose(),this._touchManager=this._touchManager&&this._touchManager.dispose(),t.prototype._doDispose.call(this)},e.prototype._doDeactivated=function(){this._clickCell=this._clickElement=null},e.prototype._doDragTrackerFinished=function(t,e){t.clickable||(this._clickCell=this._clickElement=null)},e.prototype.$_getIndexAt=function(t,e,i,o,r){var n=t.getDataCellIndex(o,this._tempIndex),s=i.getCellAt(e,n);if(s&&s.merged){var a=e.getTableRowIndex(r),l=i.getRowIndex(a);n.itemIndex=Math.min(Math.max(s.item.index,l),s.item.index+s.rowSpan-1)}return n},e.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,r=t.shiftKey,n=t.altKey,s="mousedown"===t.type?t.button:0,a=this.grid,l=a.layoutManager,h=a.editOptions,u=a.focusedIndex.clone();this._hideTooltip(),a.closePopups(),a.setEventFrom("mousedown");var c=this._clickCell=null,d=this._clickElement=null;if(0==s||a.displayOptions.rightClickable){var p=this._tempIndex,_=this.mouseEventTarget,f=0==s&&(this._getEditRequest(_,u,e,i,o,r,n)||this._getSelectRequest(_,e,i,o,r,n));if(!(f instanceof Hl)||f.canFocus())if(c=this._clickCell=this._findTableCell(),d=this._clickElement=this.findElementAt(e,i,!1),c){var g=a.getTableView(c),y=g instanceof Ia,m=g instanceof va,b=g instanceof yh&&g.isRowIndicator(c);if(y||m||b){var v=a.getSelection();if(m?p=this.$_getIndexAt(a,l,g,c,i):y?(p.assign(a.focusedIndex),p.layout=g.layoutByCell(c)):(p.assign(a.focusedIndex),p.itemIndex=c.parentElement.$_row),y){if(o&&r)v&&this.$_resizeSelection(v,p,ls.COLUMNS);else if(r)return}else{if(r&&v){var w=y?ls.COLUMNS:b?ls.ROWS:null;return void this.$_resizeSelection(v,p,w)}if(m){if(this.$_checkAppending(a.focusedIndex,!0,p))return this._clickElement=null,void(this._clickCell=null);var C=g.getCellAt(l,p),x=g.bodyCellByCell(this._clickCell);x&&C&&0===s&&x.isEditButton(t.target)?this.setFocused(p,!0)&&C.editable&&!C.readonly&&a.editController.buttonDown(p,t):Hn.areEquals(p,this.focused)&&h.editWhenClickFocused?a.showEditor():this.setFocused(p,!0)}else if(b&&a.rowIndicator.selectable&&!(f instanceof zl)&&(null==p.column&&p.item.isDataRow&&(p.layout=a.getFirstLayout()),this.setFocused(p,!0),f instanceof Wl))try{this.setFocused(p,!0);var I=v&&function(t){var e=t&&t.style;return e==ls.ROWS||e==ls.SINGLE_ROW}(v)?v.getRows():[];(1!==I.length||I[0]!==p.itemIndex)&&a.selections.selectRow(p.itemIndex)}finally{}}}}else Hs(d)&&(p.assign(a.focusedIndex),p.itemIndex=d.itemIndex,this.setFocused(p,!0));!f||a.isItemEditing()&&f.selectable||(this.dragTracker=this._getDragTracker(f,e,i))}a.$_resetHovering(e,i);var E=this.dragTracker;E&&E.startWhenCreated&&(E instanceof eh&&t.shiftKey?this._startDragTracker(e,i,r):this._startDragTracker(e,i,!1))},e.prototype.$_checkOtherGridRowMoving=function(t,e){var i=this.grid,o=i.container,r=o.getMouseContainer();if(r&&r!==o)if(o.findContainer(t)!==o)i.removeFeedbackElement(this._rowMoverLine);else if(e instanceof th){var n=o.eventToContainer(t),s=o.findElementAt(n.x,n.y,!1);if(0==i.itemCount||s instanceof oa||s instanceof ph||s instanceof yh){var a=th.updateLineFeedback(i,Number.MAX_VALUE,1,this._rowMoverLine,n.x,n.y,!0),l=i.canMoveRow(!0,!0)&&i.dataDropOptions.getEnabled(r.gridView,e.sourceItems,a),h=i.dataDropOptions.getLabel(r.gridView,e.sourceItems,a);return e.setEnabled(l),e.setLabel(h),i.addFeedbackElement(this._rowMoverLine),l?a:-1}s?(e.setEnabled(!1),i.removeFeedbackElement(this._rowMoverLine)):i.removeFeedbackElement(this._rowMoverLine)}return-1},e.prototype.dragFrom=function(t,e){e instanceof th&&this.$_checkOtherGridRowMoving(t,e)},e.prototype.dropFrom=function(t,e){if(e instanceof th){var i=this.grid,o=0==i.itemCount?0:this.$_checkOtherGridRowMoving(t,e);i.removeFeedbackElement(this._rowMoverLine),o>=0&&i.$_dropData(e.grid,e.sourceItems,o)}},e.prototype.cancelFrom=function(t){var e=this.grid;t instanceof th&&e.removeFeedbackElement(this._rowMoverLine)},e.prototype._doMouseMove=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,r=t.shiftKey,n=t.altKey,s=this.grid,a=s.layoutManager;s.$_resetHovering(e,i)||this._hideTooltip();var l=this._getEditRequest(this.mouseEventTarget,s.focusedIndex,e,i,o,r,n);if(l&&l.cursor?s.setCursor(this.mouseEventTarget,l.cursor):s.setCursor(this.mouseEventTarget,"default"),!l&&!this.dragging){var h=this._findTableCell(),u=h&&s.getTableView(h);if(u instanceof va){var c=u.bodyCellByCell(h);if(c&&c.merged){var d=c.head||c,p=this.$_getIndexAt(s,a,u,h,i);if(!d.contains(s.focusedIndex)){if(c.buttons){var _=u.getRowView(d.item);_ instanceof oa&&_.moveCellButtons(a,d,p.itemIndex)}if(d.renderer2&&d.renderer2.refreshFocusChanged){var f=u.getCellRectAt(a,p,!1),g=u.getCellRect(a,d,!0),y=d.renderer2,m=f.top-g.top+f.height/2-g.height/2;y.moveClickElement(m,p.itemIndex)}}}}}},e.prototype._doMouseUp=function(t){var e=t.mouseX,i=t.mouseY,o=(this.findElementAt(e,i,!1),this._findTableCell()),r=this.grid;if((r.setCursor(this.mouseEventTarget,"default"),r.editController.buttonUp(null,t),o&&o==this._clickCell)&&("header"===r.getCellType(o)&&!(this._getEditRequest(this.mouseEventTarget,r.focusedIndex,e,i,!1,!1,!1)instanceof Gl))){var n=r.getHeaderView(o).columnByCell(o);n&&this.$_columnHeaderClicked(t,n)}},e.prototype._doClick=function(t,e,i){e=e||t.mouseX,i=i||t.mouseY;var o,r=this.grid,n=this.focused,s=this.findElementAt(e,i,!1),a=this._findTableCell();rt(t.target);if(a&&a==this._clickCell){var l=r.getCellType(a),h=void 0,u=void 0;switch(l){case"head":if(this.$_gridCellClicked(o=mh.getSub(l,r.headView.getCellType(a))),"check"===o.subType){var c=r.headView._checkCell;t.target!==c._check&&t.target!==c._image||this._checkAllClicked()}break;case"foot":this.$_gridCellClicked(mh.getSub(l,r.footView.getCellType(a)));break;case"indicator":case"state":case"check":"check"===l&&this.$_checkCellClicked2(a,t),h=r.rowBarContainer.rowOf(a),u=r.getRowOfItem(h),this.$_gridCellClicked(mh.getItem(l,h,u));break;case"header":var d=r.getHeaderView(a),p=r.headerView.tableCellByCell(a);p&&p.isClickableElt(t.target)||this.$_gridCellClicked(mh.getLayout(l,d.layoutByCell(a)));break;case"data":var _=r.getBodyView(a).bodyCellByCell(a);if(Hn.equalsTo(n,_.item.index,_.layout)||_.contains(n))if(_.grouped)this.$_gridCellClicked(mh.getItem("groupHeader",_.item.index,null));else{if(_.isCellButton(t.target))return this.$_cellButtonClicked(_),void(!r.editOptions.exceptDataClickWhenButton&&this.$_gridCellClicked(mh.getCell(l,_)));var f=r.editController._editor;if(_.isEditButton(t.target)||!_.readonly&&f&&f.dropDownWhenClick)return _.getEditIndex(this._tempIndex),lt.isMobile()&&f.hasList?r.showEditList(this._tempIndex):this._editButtonClicked(this._tempIndex,t),void this.$_gridCellClicked(mh.getCell(l,_));var g=_.renderer2;if(g&&this.$_performRendererClick(_,t))return void((!r.editOptions.exceptDataClickWhenButton||!g.itemClickable)&&this.$_gridCellClicked(mh.getCell(l,_)));this.$_gridCellClicked(mh.getCell(l,_))}break;case"footer":var y=r.getFooterView(a).tableCellByCell(a);this.$_gridCellClicked(mh.getSummary(l,y.summaryIndex,y.layout));break;case"summary":var m=r.getSummaryView(a).tableCellByCell(a);this.$_gridCellClicked(mh.getSummary(l,m.summaryIndex,m.layout));break;case"sum":this.$_gridCellClicked(mh.getSub(l,r.sumView.getCellType(a)));break;case"groupFooter":var b=r.getBodyView(a).bodyCellByCell(a);this.$_gridCellClicked(mh.getGroupFooter(l,b.item.index,b.layout));break;case"groupHead":case"groupFoot":var v=a.$_lev;this.$_gridCellClicked(mh.getGroupElt(l,v));break;case"groupBar":var w=a.$_row;u=this.grid.getRowOfItem(w),this.$_gridCellClicked(mh.getItem(l,w,u))}}else if(s&&s===this._clickElement){if(Hs(s))return void this.$_gridCellClicked(mh.getItem("groupHeader",s.itemIndex,null));var C=this._getClickData(s,t);C&&this.$_gridCellClicked(C)}},e.prototype._getClickData=function(t,e){},e.prototype.$_commitRendererEdit=function(t,e,i){var o=e.item,r=e.dataField,n=e.dataColumn,s=!1;try{(s=t.editorCommit(e,o.getData(r),i))&&(t.undoable?t.execute(new ch(e.item,r,i,e.column)):o.setData(r,i),t.isItemEditing(e.item)&&t.validateCellCommit(e,i))}catch(e){if(!t.editOptions.showCommitError)throw e;alert(e.message||e)}if(s&&t.isCellEditing()){var a=t.itemSource,l=a.editingItem.invalidFields,h=t.validationManager.getError(e);if(h)return l.push(n.dataIndex),void(t.editOptions.showCommitError&&alert(h.userMessage||h.message||h));if(l.indexOf(n.dataIndex)>=0&&l.splice(l.indexOf(n.dataIndex),1),t.validationManager.clearInvalidCell(e),l.length>0)return;a.commit()||a.cancel()}},e.prototype.$_performRendererClick=function(t,e){var i,o=t.renderer2,r=this.grid,n=r.layoutManager;if(o){if(t.merged){e.mouseX;var s=e.mouseY,a=this._findTableCell(),l=a&&r.getTableView(a);i=this.$_getIndexAt(r,n,l,a,s)}else i=o.index;if(r.canWriteAt(i)&&o.canEdit()&&Hn.areEquals(i,r.focusedIndex)&&o.canEditClickAt(e)&&r.edit(i)){var h=o.editClick(i,e);if(h)return h.commit&&this.$_commitRendererEdit(r,i,h.value),!0}if(o.canClick(e)){var u=o.click(i,e);if(u)return!1===r._fireCellItemClicked(i,u)&&o.preventDefaultClick(e),!0}return o.preventDefaultEditClick(e),!1}},e.prototype.$_performRendererKey=function(t,e){var i,o=t.renderer2,r=t.head;if(o)i=o.index;else{if(!r||!(o=r.renderer2))return;var n=t.rowIndex-r.rowIndex;(i=o.index.clone()).incRow(n)}var s=this.grid,a=s.canWriteAt(i)&&o.canEdit();if(Hn.areEquals(i,s.focusedIndex))if(a&&o.canEditKey(e)){if(s.edit(i)){var l=o.editKey(i,e);if(l)return l.commit&&this.$_commitRendererEdit(s,i,l.value),!0}}else if(o.canClickSpaceKey(e)){var h=o.click(i,e);if(h)return!1!==s._fireCellItemClicked(i,h)&&o.itemClick(),!0}else if(32===e.keyCode&&s.editOptions.buttonClickWhenSpace)return t.button===E.ACTION||t.button===E.POPUP?(s.closePopups(),this.$_cellButtonClicked(t),!0):(this.$_gridCellClicked(mh.getCell(s.getCellType(t.cell),t)),!0)},e.prototype._doDblClick=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,r=t.shiftKey,n=t.altKey,s=this.grid,a=s.layoutManager,l=this.focused,h=this.findElementAt(e,i,!1),u=this._findTableCell();if(u&&u==this._clickCell){var c=s.getCellType(u),d=void 0,p=void 0;switch(c){case"head":this.$_gridCellDblClicked(mh.getSub(c,s.headView.getCellType(u)));break;case"foot":this.$_gridCellDblClicked(mh.getSub(c,s.footView.getCellType(u)));break;case"indicator":case"state":case"check":d=s.rowBarContainer.rowOf(u),p=s.getRowOfItem(d),this.$_gridCellDblClicked(mh.getItem(c,d,p));break;case"header":var _=s.getHeaderView(u),f=s.headerView.tableCellByCell(u);f&&f.isClickableElt(t.target)||this.$_gridCellDblClicked(mh.getLayout(c,_.layoutByCell(u)));var g=this._getEditRequest(this.mouseEventTarget,s.focusedIndex,e,i,o,r,n);if(g instanceof Gl){var y=g.layout;y.firstColumn&&s.fitLayoutWidth(y)}break;case"data":var m=s.getBodyView(u),b=m.bodyCellByCell(u),v=this.$_getIndexAt(s,a,m,u,i);b.grouped?this.$_gridCellDblClicked(mh.getItem("groupHeader",b.item.index,null)):(this.$_gridCellDblClicked(mh.getCell(c,b)),Hn.areEquals(v,l)&&s.showEditor(v));break;case"footer":var w=s.getFooterView(u).tableCellByCell(u);this.$_gridCellDblClicked(mh.getSummary(c,w.summaryIndex,w.layout));break;case"summary":var C=s.getSummaryView(u).tableCellByCell(u);this.$_gridCellDblClicked(mh.getSummary(c,C.summaryIndex,C.layout));break;case"sum":this.$_gridCellDblClicked(mh.getSub(c,s.sumView.getCellType(u)));break;case"groupFooter":var x=s.getBodyView(u).bodyCellByCell(u);this.$_gridCellDblClicked(mh.getGroupFooter(c,x.item.index,x.layout));break;case"groupHead":case"groupFoot":var I=u.$_lev;this.$_gridCellDblClicked(mh.getGroupElt(c,I));break;case"groupBar":var E=u.$_row;p=s.getRowOfItem(E),this.$_gridCellDblClicked(mh.getItem(c,E,p))}}else if(h&&h===this._clickElement){if(Hs(h))return void this.$_gridCellDblClicked(mh.getItem("groupHeader",h.itemIndex,null));var S=this._getClickData(h,t);S&&this.$_gridCellDblClicked(S)}},e.prototype._doMouseWheel=function(t){var e=this.grid,i=e.displayOptions;if(i.wheelEnabled&&!t.ctrlKey){if((t.shiftKey||Math.abs(t.deltaX)>Math.abs(t.deltaY))&&0!==i.wheelScrollHorz){var o=e.leftPos,r=Math.abs(i.wheelScrollHorz||16)*((t.deltaX||t.deltaY)>0?1:-1);return e.leftPos=o+r,!0}var n=e.topIndex,s=Date.now(),a=Math.abs(i.wheelScrollLines);if(a=a||3,i.wheelAccelDelay>0)if(s>this._prevScroll+300)this._checkScroll=s;else if(this._checkScroll+i.wheelAccelDelay<s){e.itemCount;var l=i.wheelAccelScroll;if(l&&!isNaN(l))a=parseInt(l);else if("string"==typeof l){var h=l.trim();if(h.indexOf("%")>0){var u=e.itemCount;a=parseInt(h.substr(0,h.length-1))/100*u}}}return this._prevScroll=s,e.topIndex=e.topIndex+(t.deltaY>0?a:-a),!i.wheelEventPropagate||n!=e.topIndex}return!1},e.prototype._doMouseEnter=function(t){},e.prototype._doMouseLeave=function(t){var e=t.mouseX,i=t.mouseY;this._hideTooltip(),this.$_setHoveredHeaderCell(null,e,i),this.$_setHoveredCell(null,e,i)},e.prototype._doMouseOver=function(t){},e.prototype._doContextMenu=function(t){return this.grid.doContextMenu(t)},e.prototype.$_doHome=function(t,e,i){var o=t.clone();if(t.first(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,1,o))return t.assign(e),!0},e.prototype.$_doEnd=function(t,e,i){var o=t.clone();if(t.last(),i&&this._checkReadOnly(t)&&!this._skipReadOnlyCell(t,-1,o))return t.assign(e),!0},e.prototype._doKeyDown=function(e){var i,o=e.keyCode,r=e.ctrlKey,n=lt.isMac,s=n&&e.metaKey||!n&&e.ctrlKey,a=e.shiftKey,l=e.altKey,h=this.grid,u=h.editOptions,c=h.layoutManager,d=h.popupMenuManager,p=u.skipReadOnly,_=u.skipReadOnlyCell,f=h.focusedIndex,g=f.clone(),y=u.verticalMoveStep;if(!h._fireKeyDown(e))return!0;if(f){var m=h.getBodyCellAt(f);if(m&&this.$_performRendererKey(m,e))return!0}if(d.isShow()&&lt.included(o,37,39,38,40,13,32))return d.keyDown(e),!0;if(h.setEventFrom("keydown"),27==o)h.closePopups(),this._doCancel(h);else{if(13==o)return this._doEnter(h,u,g);if(9==o)return this._doTab(h,u,g,r,a,e);if(113==o)!h.isEditing()&&g.dataColumn&&h.showEditor(g,a);else{if(lt.isMac&&e.metaKey&&e.shiftKey&&90===e.keyCode)return h.redo();if(90==o&&s)return h.undo();if(89==o&&s)return h.redo();if(45==o)u.appendWhenInsertKey||0==h.itemCount?h.append():h.insert(g.item,e.shiftKey,r);else{if(46==o)return r&&a?(h.revertSelection(),!0):r?(h.deleteSelection(),!0):!!a&&(h.eraseSelection(),!0);if(l&&a&&40==o)h.moveSelection(1);else if(l&&a&&38==o)h.moveSelection(-1);else if(32==o&&a&&s&&h.rowBarContainer.rowIndicator.visible){var b=h.selections.getItem(0),v=b&&(b.style===ls.BLOCK||b.style===ls.ROWS)&&b.getItems(h.checkBar.merged||h.checkBar.fieldIndex>=0);v||h.checkBar.merged?(v=v||[g.item],h.toggleChecks(v,g.item)):h.toggleCheck(g.itemIndex)}else if(lt.included(o,36,35,39,37,40,38,34,33)){lt.isMobile()&&e&&e.preventDefault&&e.preventDefault();var w=h.itemCount;if(40==o&&0==w)return h.append(),!0;if(!h.isValid(g))return g.normalize(h),this.setFocused(g,!0),!0;if((lt.included(o,40,34)||35==o&&r)&&g.isBottom&&this.$_checkAppending(g))return!0;if((lt.included(o,38,33)||36==o&&r)&&g.isTop&&this.$_checkAppending(g,!0))return!0;var C=h.getBodyViewAt(g);if(!C)return!0;switch(o){case 36:if(r){if(this.$_doHome(g,f,p))break}else g.home(),this._skipReadOnly(g,1);break;case 35:if(r){if(this.$_doEnd(g,f,p))break}else g.end(),this._skipReadOnly(g,-1);break;case 39:if(C.spanRight(c,g),g.right(),p&&this._checkReadOnly(g)&&!this._skipReadOnly(g,1)){g.assign(f);break}break;case 37:if(g.left(),p&&this._checkReadOnly(g)&&!this._skipReadOnly(g,-1)){g.assign(f);break}break;case 38:if(n&&s){this.$_doHome(g,f,p);break}try{if(0==g.itemIndex&&g.isTop){if(this.$_commitCancel(g.item,u))return!0;r&&n?g.first():g.up(y)}else r&&n?g.first():r?h.topIndex--:g.up(y,h.isItemEditing(g.item))}finally{_&&this._checkReadOnly(g)&&(this._skipReadOnlyCell(g,-1)||g.assign(f))}break;case 33:if(r&&!n)return h.topIndex=h.topIndex-c.fullItemCount,!0;if(i=g.clone(),g.incRow(-c.fullItemCount),p&&this._checkReadOnly(g)&&!this._skipReadOnlyCell(g,1,i)){g.assign(f);break}break;case 40:if(n&&s){this.$_doEnd(g,f,p);break}try{if(g.itemIndex!=w-1||!g.isBottom&&y!=In.ROW)if(r&&n)g.last();else{if(r)return h.topIndex=h.topIndex+1,!0;g.down(y,h.isItemEditing(g.item))}else{if(g.isBottom&&this._commitCancel(g.item,u))return!0;h.append(),r&&n?g.last():g.down(y,h.isItemEditing(g.item))}}finally{_&&this._checkReadOnly(g)&&(this._skipReadOnlyCell(g,1)||g.assign(f))}break;case 34:if(g.itemIndex==h.itemCount-1&&g.isBottom&&Qi(g.item.itemState))return h.commit(u.forceAppend),!0;if(r&&!n)return h.topIndex=h.topIndex+c.fullItemCount,!0;if(i=g.clone(),g.incRow(c.fullItemCount),p&&this._checkReadOnly(g)&&!this._skipReadOnlyCell(g,-1,i)){g.assign(f);break}}return C.spanHead(c,g),a&&h.selections.count>0&&!ks(h.displayOptions.selectionStyle)?(this.setFocused(g,!1),h.selections.getItem(0).resizeTo(g)):this.setFocused(g,!0),!0}}}}return t.prototype._doKeyDown.call(this,e)},e.prototype._doKeyPress=function(t){this.grid._fireKeyPress(t)},e.prototype._doKeyUp=function(t){if(lt.isIE){var e=t.ctrlKey,i=t.keyCode,o=this.grid;90===i&&e&&o.undo()}this.grid._fireKeyUp(t)},e.prototype._editButtonClicked=function(e,i){this.grid.makeCellVisible(e),this.grid.showEditor(e)&&this.grid.editorButtonClicked(e,i),t.prototype._editButtonClicked.call(this,e,i)},e.prototype._getSelectRequest=function(t,e,i,o,r,n){var s=this.grid,a=s.displayOptions,l=a.selectionMode,h=a.selectionStyle,u=this._findTableCell(t);if(!u)return null;var c=s.getCellType(u);if("indicator"==c){if(s.rowIndicator.selectable&&l!=as.NONE&&h!=ls.NONE&&!ks(h))return new Wl(s.getIndex(s.rowBarContainer.getCellIndex(u)),ls.ROWS)}else if("header"==c){if(o){var d=s.headerView.columnByCell(u);if(s.rowIndicator.selectable&&l!=as.NONE&&h!=ls.NONE&&!ks(h))return new Wl(s.getIndex(-1,d),ls.COLUMNS)}}else if("data"==c){var p=s.getDataCellIndex(u,this._tempIndex);if(l!=as.NONE&&h!=ls.NONE&&!ks(h)&&!lt.isMobile())return new Wl(p.clone(),h)}return null},e.prototype._getEditRequest=function(t,e,i,o,r,n,s){var a=st(this.grid.doc),l=this.grid,h=l.layoutManager,u=l.displayOptions,c=this._findTableCell(t);if(!c)return null;var d=l.getTableView(c),p=this.$_getRowResizeRequest(d,c,i,o,r,n,s);if(p)return p;if(d instanceof yh&&d.isRowIndicator(c)){if(s&&(lt.isIE||lt.isEdge)&&(s=r),s&&l.canMoveRow(!1,!1)){var _=l.getSelection(),f=l.rowBarContainer.rowOf(c),g=!1;if(_?g=_.containsItem(f):f==e.itemIndex&&(g=!0),g)return this._rowMoveReq.init(_,f)}}else if(d instanceof Ia){if(t instanceof a.HTMLInputElement)return null;if(r);else{var y=d.layoutByCell(c);if(y){var m=l.cellToContainer(c,this._reqPoint.setEmpty());if(u.columnResizable&&y._isResizable()&&(l.fixedOptions.resizable||y.root.vindex>=h.fixedLayoutCount&&y.root.vindex<h.rightFirstLayout)){var b=l.headerView.tableCellByLayout2(h,y);if(m.x+=b?b.width:y.domWidth,i>=m.x-3&&i<=m.x+3)return this._colResizeReq.init(y,i,o,i-m.x)}if(u.columnMovable&&y._isMovable()&&(!y.isRoot||l.canMoveLayout(y)))return this._colMoveReq.init(y,i,o,i-m.x)}}}else if(d instanceof va){var v=l.getDataCellIndex(c,this._tempIndex);f=v&&v.itemIndex;if(l.canMoveRow(!1,!1)&&f>=0){var w=!1;_=l.getSelection();if((b=l.getBodyCellAt(v,!0)).expander===t)return null;if(s&&(lt.isIE||lt.isEdge)&&(s=r),_?(w=_.containsItem(f))&&!s&&(w=_.containsLayout(v.layout)&&this._canMoveRowAt(d,v,i)):e&&f==e.itemIndex&&(w=!!s||Hn.areEquals(v,e)&&this._canMoveRowAt(d,v,i)),w)return this._rowMoveReq.init(l.getSelection(),f)}}else if(d instanceof el){var C=d.boundsByContainer();if(l.header.resizable&&o<=C.bottom+1&&o>=C.bottom-2)return this._headerResizeReq.init(C.top,o-C.bottom-1)}},e.prototype.$_resizeSelection=function(t,e,i){var o=this.grid.selections,r=t?t.runStyle:i;if(!ks(r)&&lt.included(i,ls.ROWS,ls.COLUMNS,ls.SINGLE_COLUMN)&&(r=i),t){if(t.runStyle!=r){this.grid.selections.clear();var n=t.getBounds();t=o.add(n.firstCell,n.lastCell,r)}o.canResize(t)&&t.resizeTo(e)}else t=o.add(e,e,r)},e.prototype._canMoveRowAt=function(t,e,i){return i<t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)).x+20},e.prototype.$_getRowResizeRequest=function(t,e,i,o,r,n,s){var a=-1;if(t instanceof yh&&(a=e.parentElement.$_row),a<0)return null;var l=this.grid,h=l.layoutManager,u=l.displayOptions,c=u.eachRowResizable&&!r,d=h.fixedItemCount,p=h.contentBounds.y,_=t.boundsByContainer(this._tempRect.setWidth(t.width));if(_.width<=0||i<_.x||i>=_.right)return null;if(a<d){if(l.fixedOptions.rowResizable&&(!u.dataHeights||u.dataHeights.length<=0)&&((_=h.getItemRect(a)).y+=p,o<=_.bottom+1&&o>=_.bottom-2))return this._rowResizeReq.init(a,c,_.y,o-_.bottom-1)}else if(u.rowResizable&&(!u.dataHeights||u.dataHeights.length<=0))for(var f=h.itemCount,g=l.topIndex,y=0;y<f;y++){var m=y+g+d;if(m==a&&((_=h.getItemRect(y+d)).y+=p,o<=_.bottom+1&&o>=_.bottom-2))return this._rowResizeReq.init(m,c,_.y,o-_.bottom-1)}return null},e.prototype._getDragTracker=function(t,e,i){if(t instanceof Wl)switch(t.style){case ls.ROWS:return new oh(t,e,i);case ls.COLUMNS:return new rh(t,e,i);case ls.BLOCK:return new ih(t,e,i)}else{if(t instanceof Gl)return new Xl(t,this._cellResizer);if(t instanceof Ul)return new Zl(t,this._cellFeedback,this._cellMover);if(t instanceof zl)return new Jl(t,this._cellResizer);if(t instanceof ql)return new th(t,this._rowMoverProxy,this._rowMoverLine);if(t instanceof Yl)return new Ql(t,this._cellResizer)}return null},e.prototype.$_checkCellClicked2=function(t,e){if(t!==e.target){var i=rt(t),o=this.grid,r=o.rowBarContainer.getCheckBox(t),n=o.getEditItem(),s=o.getItem(t.parentElement.$_row);if(n&&n.dataRow!==s.dataRow){var a=o.editOptions;switch(n.itemState){case wi.APPENDING:o.commit(a.forceAppend);break;case wi.INSERTING:o.commit(a.forceInsert);break;case wi.UPDATING:o.commit(a.commitWhenNoEdit)}}e.target instanceof i.HTMLSpanElement&&(r.checked=!r.checked),this._doCheck(r,s,e.shiftKey)}},e.prototype._doCheck=function(t,e,i){var o=this.grid,r=o.checkBar,n=o.rowBarContainer.checkBar;if(o.editOptions.checkable){var s=o.checkBar;if(e.checkable&&(s.showGroup||e.dataRow>=0)&&t){var a=e.index,l=n._prevChecked,h=void 0,u=void 0,c=[],d=-1,p=-1,_=void 0;if(o.makeItemVisible(a),i&&l>=0&&!r.exclusive||s.merged){i&&l>=0?(h=Hn.temp(o,l,null),u=o.getItem(l).checked,s.merged?(d=(_=s.merges.getRoom(h))?_.head:l,p=_?_.tail:l):(d=l,p=e.index)):(u=t.checked,d=p=e.index,n.$_setPrevChecked(e.index),r.exclusive&&o.itemSource._clearChecked()),s.merged?(h=Hn.temp(o,e.index,null),_=s.merges.getRoom(h),d=Math.min(_?_.head:e.index,d),p=Math.max(_?_.tail:e.index,p)):(d=Math.min(d,e.index),p=Math.max(d,p));for(var f=d;f<=p;f++){var g=o.getItem(f);g.checkable&&g.dataRow>=0&&c.push(g)}c.length>0&&o.itemSource.checkItems(c,u,!0)}else o.itemSource.checkItem(e,t.checked,s.exclusive,!0),n.$_setPrevChecked(e.index)}}},e.prototype._checkAllClicked=function(){var t=this.grid;if(!t.empty&&t.editOptions.checkable){var e=t.checkBar,i=t.headView;e.showAll&&!e.exclusive&&(i.allChecked=!i.allChecked,t.itemSource.checkAll(i.allChecked,e.visibleOnly,e.checkableOnly,!0,e.showGroup&&!e.merged&&e.fieldIndex<0))}},e.prototype._doColumnHeaderClicked=function(e,i){if(t.prototype._doColumnHeaderClicked.call(this,e,i),!(2==e.button)){var o=i,r=this.grid;if(o){var n=r.getHeaderView(this._clickCell).tableCellByCell(this._clickCell);if(e.target===n.check)n.check.checked=o.checked=!o.checked,r._columnCheckedChanged(o);else if(e.target===n.filter&&o.hasFilters)r.selectColumnFilters(n);else if(e.target===n.popup){var s=i.header.popupMenuName,a=r.getCellViewOf(n.cell);s&&a&&r.popupMenuManager.show(s,a,null)}else o.sortable&&r.sortingOptions.enabled&&r.sortColumn(o,e)}}},e.prototype.$_columnHeaderClicked=function(t,e){t.button;this._doColumnHeaderClicked(t,e),t.preventDefault()},e.prototype.$_gridCellClicked=function(t){this.grid._fireCellClicked(t)},e.prototype.$_gridCellDblClicked=function(t){this.grid._fireCellDblClicked(t)},e.prototype.$_setHoveredCell=function(t,e,i){var o=this.grid,r=this._findTableCell();if(t&&r){var n=o.getTableView(r),s=this.$_getIndexAt(o,o.layoutManager,n,r,i);if(t!==this._tooltipCell||!Hn.areEquals(this._tooltipIndex,s)){this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var a=o.displayOptions.hintDelay;if(t)if(a>0){var l=this;this._tooltipShowTimer=setTimeout(function(){l.$_showTooltip2(t,s)}.bind(l),a)}else this.$_showTooltip2(t,s)}}},e.prototype._hideTooltip=function(t,e){this.grid.tooltipManager.close(t,e),this._tooltipCell=null,this._tooltipIndex.reset()},e.prototype.$_showTooltip2=function(t,e){lt.trace("TOOLTIP...");var i=this.grid,o=i.validationManager.getError(e),r=this._tooltipOptions;if(i.editOptions.hintOnError&&o)r.message=o&&o.message,this.$_showTooltip(t,e,r);else{var n=t.renderer2;if((t.item.isDataRow||t.item instanceof zr)&&n&&n.showTooltip&&!Hn.areEquals(e,this._tooltipIndex)){var s=n.getTooltip(t,e);if(s||i.displayOptions.showEmptyTooltip){var a=i._fireShowTooltip(e,s);a&&(this._tooltipOptions.assignFrom(a),this.$_showTooltip(t,e,this._tooltipOptions))}}}},e.prototype.$_showTooltip=function(t,e,i){var o=this.grid,r=o.tooltipManager,n=o.layoutManager;if(!r.visible||this._tooltipCell!=t){this._hideTooltip();var s=o.getBodyView(t.cell),a=s.getCellRectAt(n,e,!1),l=(a=s.boundsByContainer(a)).x,h=a.y+a.height;r.show(i,l,h,a.height,!1),this._tooltipCell=t,this._tooltipIndex.assign(e)}},e.prototype.$_showStateError=function(t,e){var i=this.grid,o=i.tooltipManager,r=i.layoutManager,n=this._tooltipOptions;if(t!==this._tooltipCell){this._hideTooltip(),n.message=e;var s=i.focusedIndex.itemIndex,a=i.rowBarContainer.boundsByContainer(),l=r.getItemBounds(s<r.fixedItemCount?s:s-r.topIndex);o.show(n,a.x,a.y+l.bottom,l.height,!0),this._tooltipCell=t,this._tooltipIndex.assign(null)}},e.prototype.$_setHoveredHeaderCell=function(t,e,i){if(t!=this._tooltipCell){this._hideTooltip(e,i),this._tooltipShowTimer&&clearTimeout(this._tooltipShowTimer);var o=this.grid.displayOptions.hintDelay;if(o>0){var r=this;this._tooltipShowTimer=setTimeout(function(){r.$_showHeaderTooltip2(t)}.bind(r),o)}else this.$_showHeaderTooltip2(t)}},e.prototype.$_showHeaderTooltip2=function(t){var e=this.grid;if(e.header.showTooltip&&this._tooltipCell!=t&&t&&t.showTooltip){var i=t.tooltip||t.text;if(i){var o=e._fireShowHeaderTooltip(t.layout.firstColumn,i);o&&(this._tooltipOptions.assignFrom(o),this.$_showHeaderTooltip(t,this._tooltipOptions))}}},e.prototype.$_showHeaderTooltip=function(t,e){var i=this.grid,o=i.tooltipManager,r=i.layoutManager;if(!o.visible||this._tooltipCell!=t){this._hideTooltip();var n=r.getHeaderCellRect(t.layout,!0),s=n.x,a=n.y+n.height;o.show(e,s,a,0,!0),this._tooltipCell=t}},e.prototype.$_cellButtonClicked=function(t){var e=this.grid,i=t.layout.firstColumn;if(i){var o=e.layoutManager,r=t.getEditIndex(this._tempIndex);o.getMergeRoom(r);switch(i.button){case E.POPUP:var n=i.popupMenuName,s=e.getCellViewOf(t.cell);n&&s&&e.popupMenuManager.show(n,s,r);break;case E.ACTION:e._doCellButtonClicked(r)}}},e.prototype.$_commitCancel=function(t,e){var i=this.grid;try{switch(t.itemState){case wi.INSERTING:return i.commit(e.forceInsert)||i.cancel(!0),!0;case wi.APPENDING:return i.commit(e.forceAppend)||i.cancel(!0),!0;case wi.UPDATING:return i.commit(e.commitWhenNoEdit)||i.cancel(!0),!0}}catch(o){if(o instanceof Vr)return(o=i._fireValidationFail(t.index,o.column,o))&&alert(e.showOnlyValidationMessage&&o.userMessage?o.userMessage:o.toString()),!1;if(o instanceof Nr)return!1;throw o}return!1},e.prototype.$_checkAppending=function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=null);var o=this.grid;if(t.itemIndex==o.itemCount-1&&Qi(t.item.itemState)){var r=t.itemIndex;if(!i||i.itemIndex!=r){try{o.commit(o.editOptions.forceAppend,!0)?((t=t.clone()).itemIndex=r,o.isValid(t)||(t.itemIndex=o.getItemIndexOfRow(o.dataSource.rowCount-1)),this.setFocused(t,!0)):e&&(o.cancel(!0),i&&this.setFocused(i,!0))}catch(t){if(t instanceof Vr)return(t=o._fireValidationFail(r,t.column,t))&&alert(o.editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),!0;if(t instanceof Nr)return!0;throw t}return!0}}return!1},e.prototype._stopTapTracker=function(t){if(this.dragTracker)try{this.dragTracker=null}catch(t){throw t}},e.prototype._getTouchTracker=function(t,e,i){return null},e.prototype.onTouch=function(t,e,i){clearInterval(this._swipeTimer),this.touchManager.swipeHandler=null,this._stopTapTracker(!1);var o=this.grid,r=this._clickCell=o.getCellViewOf(t.target);return r&&o.getCellType(r)&&o.container._containerDom.focus({preventScroll:!0}),o.closePopups(),this._getTouchTracker(t,e,i),this.dragTracker?this.dragTracker:null},e.prototype.onTouchEnd=function(t,e,i){var o=this.grid.cellToIndex(t.target);this.grid.editController.buttonUp(o,t)},e.prototype.onTap=function(t,e,i){if(lt.isiOS&&this.touchManager){var o=lt.getTimer();if(this.touchManager.touchEndt+50>o)return}var r=this.grid,n=this._clickCell=r.getCellViewOf(t.target),s=r.getTableView(n);n&&s instanceof va&&r.cellToIndex(n);this._hideTooltip(),r.closeFilterSelector();r.getCellType(n)},e.prototype.onDoubleTapHandler=function(t,e,i){var o=this.focused,r=this.grid,n=this._clickCell,s=r.getTableView(n);if("data"===r.getCellType(n)){t.mouseX=e,t.mouseY=i,this.dblclick(t);s.bodyCellByCell(n);var a=r.cellToIndex(n);r.isValid(o)&&!r.isEditing()&&Hn.areEquals(a,o)&&r.showEditor(a.clone())}},e.prototype.onLongTapHandler=function(t,e,i){var o=this.grid,r=o.cellToIndex(t.target),n=this.grid.getBodyCellbyCell(t.target);if(n&&n.isEditButton(t.target))return this.setFocused(r,!0),n.editable&&!n.readonly&&o.editController.buttonDown(r,t),!0},e.prototype.onDragStartHandler=function(t,e,i,o){var r=this.dragTracker;return r&&r.start(null,i,o)?r:null},e.prototype.onDragHandler=function(t,e,i,o){var r=this.dragTracker,n=!1;if(r&&r.dragging&&!(n=r.drag(this.mouseEventTarget,i,o))){var s=r.getNextRequest(i,o);if(s)return this._stopDragTracker(i,o,!0),this.dragTracker=this._getDragTracker(s,i,o),this._startDragTracker(i,o,!1),!!this.dragTracker;this._stopDragTracker(i,o,!0),r.cancel()}return n},e.prototype.onDragEndHandler=function(t,e,i){this._stopDragTracker(t,e,i)},e.prototype.onSwipeHandler=function(t,e,i,o){var r=this.grid;r.getCellType(this._clickCell);if(r.getTableView(this._clickCell)instanceof va){var n=1;switch(i){case"right":r.leftPos=r.leftPos-e/20;break;case"left":r.leftPos=r.leftPos+e/20;break;case"bottom":n=-1;case"top":this._swipeDistance=n*e/20,this._swipeDuration=t,this._swipePrev=this._swipeStarted=lt.getTimer(),this._swipeAmount=0,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}}},e.prototype.$_scrollRow=function(){var t=lt.getTimer();if(t-this._swipeStarted<this._swipeDuration){var e=t-this._swipePrev,i=Math.floor((this._swipeDistance-this._swipeAmount)*e/this._swipeDuration);this._swipeAmount-=i,this._swipePrev=t,this.grid.topIndex+=i}else clearInterval(this._swipeTimer)},e.prototype.$_createTouchManager=function(t){if(!lt.isMobile())return null;var e=new hh(t);return e.touchEndHandler=this.onTouchEnd.bind(this),e.touchHandler=this.onTouch.bind(this),e.tapHandler=this.onTap.bind(this),e.doubleTapHandler=this.onDoubleTapHandler.bind(this),e.longTapHandler=this.onLongTapHandler.bind(this),e.dragStartHandler=this.onDragStartHandler.bind(this),e.dragHandler=this.onDragHandler.bind(this),e.dragEndHandler=this.onDragEndHandler.bind(this),e},e}(Oh),Ph=function(t){function e(e){var i=t.call(this)||this;return i._cellEditors={},i._customRenderers={},i._grid=e,i}return o(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),e.prototype.getDefaultCellEditor=function(){if(!this._defaultEditor){var t=this._grid.container._container;this._defaultEditor=new ca(this._grid,t),this._defaultEditor.setController(this._grid.editController)}return this._defaultEditor},e.prototype.getCellEditor=function(t){var e=this._grid.container._container,i=this._cellEditors[t];if(!i){switch(t){case"list":case"dropdown":i=new ml(this._grid,e);break;case"nlist":i=new Cl(this._grid,e);break;case"multiline":i=new pa(this._grid,e);break;case"number":i=new fa(this._grid,e);break;case"date":i=new Tl(this._grid,e);break;case"btdate":i=new Ll(this._grid,e);break;case"search":i=new wl(this._grid,e);break;case"checklist":i=new vl(this._grid,e);break;case"password":i=new da(this._grid,e);break;case"ndate":i=new Fl(this._grid,e);break;case"line":default:i=this.getDefaultCellEditor()}this._cellEditors[t]=i,i&&i.setController(this._grid.editController)}return i},e.prototype.$_checkFlexible=function(t,e){if(!lt.ieOld&&!lt.ieTen)return t&&t.flexible||e&&e.flexible},e.prototype.createRenderer=function(t,e,i){var o=null;if(t){switch(t){case or.TYPE:o=new or;break;case nr.TYPE:o=new nr;break;case sr.TYPE:o=new sr;break;case lr.TYPE:o=this.$_checkFlexible(e,i)?new hr:new lr;break;case ur.TYPE:o=this.$_checkFlexible(e,i)?new cr:new ur;break;case dr.TYPE:o=new dr;break;case _r.TYPE:o=this.$_checkFlexible(e,i)?new fr:new _r;break;case pr.TYPE:o=new pr;break;case gr.TYPE:o=new gr;break;case yr.TYPE:o=new yr;break;case mr.TYPE:o=new mr;break;case Zs.SERIES_TYPE:o=new Zs;break;case Qs.TYPE:o=new Qs;break;case ta.TYPE:o=new ta;break;case ea.TYPE:o=new ea;break;case wr.TYPE:o=new wr}if(!o){var r=this._customRenderers[t];o="function"==typeof r?new r(t):new uh(r,t)}o||(lt.log("Renderer type is invalid: "+t),o=new or),e&&o.assignFrom(e),i&&o.assignFrom(i)}return o},e.prototype.addCustomRenderer=function(t,e){t&&e&&(this._customRenderers[t]=e)},e.prototype.removeCustomRenderer=function(t){delete this._customRenderers[t]},e.prototype.existsCustomRenderer=function(t){return this._customRenderers.hasOwnProperty(t)},e.prototype.clearCustomRenderers=function(){this._customRenderers={}},e}(ft),Th=function(t){function e(e,i,o){void 0===i&&(i=0),void 0===o&&(o=!1);var r=t.call(this,e)||this;if(i<1)throw"LookupTable levels must be equals or greater than 1";return r._levels=i,r._tree={},r._listMap=o?{}:null,r}return o(e,t),e.prototype._doDispose=function(){this._tree=this._listMap=null,t.prototype._doDispose.call(this)},e.prototype.clear=function(){this._tree=this._listMap={},this._changed()},e.prototype.exists=function(t){var e;if((t=lt.makeArray(t))&&(e=t.length)>0&&e<=this._levels){if((e=Math.min(e,this._levels)-1)>0){for(var i=this._tree,o=0;o<e&&(i=i[t[o]]);o++);return null!=i&&i.hasOwnProperty(t[e])}return this._tree.hasOwnProperty(t[0])}return!1},e.prototype.fill=function(t,e){if(t&&t.length>0&&e&&e.length>0){for(var i=Math.min(t.length,e.length),o=0;o<i;o++){var r=lt.makeArray(t[o]);this.$_add(r,e[o])}this._changed()}},e.prototype.fillRows=function(t){if(t&&t.length>0){for(var e=0,i=t.length;e<i;e++)this.$_addRow(t[e]);this._changed()}},e.prototype.add=function(t,e){t&&(this.$_add(t,e),this._changed())},e.prototype.addRow=function(t){t&&(this.$_addRow(t),this._changed())},e.prototype.lookup=function(t,e){var i,o;if(this._levels>1){var r=void 0,n=this._levels-1;for(i=this._tree,r=0;r<n&&(i=i[o=t[r]]);r++);}else i=this._tree;if(o=t[t.length-1],i&&o&&e){for(var s=o.split(e),a=[],l=(r=0,s.length);r<l;r++)a.push(i[s[r]]?i[s[r]]:s[r]);return a.join(e)}return i?i[o]:void 0},e.prototype.getDomain=function(t){if(!t||t.length!=this._levels-1)throw"Keys length must be "+(this._levels-1);var e,i,o=this._tree,r=[],n=[];if(this._levels>1)for(e=0,i=t.length;e<i;e++)if(t[e],!(o=o[t[e]]))return{keys:r,values:n};if(this._listMap){var s=this._listMap[t.slice(0,t.length).join("~!~")];for(i=s?s.length:0,e=0;e<i;e++)r.push(s[e]),n.push(o[s[e]])}else for(var a in o)r.push(a),n.push(o[a]);return{keys:r,values:n}},e.prototype.getTextDomain=function(t){for(var e=this.getDomain(t),i=e.keys,o=e.values,r=0,n=e.keys.length;r<n;r++)i[r]=i[r]?String(i[r]):null,o[r]=o[r]?String(o[r]):null;return e},e.prototype.$_add=function(t,e){if(t){t=lt.makeArray(t);var i,o,r,n,s=this._levels;if(t.length<s)throw Error("Keys length must be equals or greater than "+s);var a=this._tree;for(o=0;o<s-1;o++)(n=a[r=t[o]])||(n={},a[r]=n),a=n;if(a[i=t[s-1]]=e,this._listMap){var l=t.slice(0,t.length-1).join("~!~"),h=this._listMap[l];lt.isArray(h)||(h=[],this._listMap[l]=h),h.push(i)}}},e.prototype.$_addRow=function(t){if(t){if(t.length-1<this._levels)throw Error("Keys length must be equals or greater than "+this._levels);var e=t[this._levels];t=t.slice(0,this._levels),this.$_add(t,e)}},e}(function(t){function e(e){var i=t.call(this)||this;return i._id=e,i}return o(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),e.prototype.exists=function(t){return!1},e.prototype._changed=function(){this.fireEvent(e.CHANGED)},e.CHANGED="onLookupSourceChanged",e}(se)),Mh=function(t){function e(e){void 0===e&&(e=null);var i=t.call(this)||this;return i._sources={},e&&i.load(e),i}return o(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this)},e.prototype.load=function(t){if(t=lt.makeArray(t)){this._sources={};for(var e=0,i=t.length;e<i;e++)this.$_add(t[e]);this._changed()}},e.prototype.add=function(t){var e=this.$_add(t);return e&&this._changed(),e},e.prototype.remove=function(t){this.$_remove(t)&&this._changed()},e.prototype.getSource=function(t){return this._sources[t]},e.prototype.$_createSource=function(t){if(t){var e=new Th(t.id,t.levels,t.ordered);return e.fill(t.keys,t.values),e}return null},e.prototype.$_add=function(t){if(t&&t.id&&this._sources[t.id]!=t){var e=this.$_createSource(t);if(e)return this.$_remove(t.id),this._sources[t.id]=e,e.addListener(this),e}},e.prototype.$_remove=function(t){if(t){var e=this._sources[t];if(e)return e.removeListener(this),delete this._sources[t],!0}return!1},e.prototype.onLookupSourceChanged=function(t){this._changed()},e.CHANGED="onLookupSourceProviderChanged",e}(function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._changed=function(){this.fireEvent(e.CHANGED)},e.CHANGED="onLookupSourceProviderChanged",e}(se)),Lh=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.lastLayout=function(){throw new Error("Method not implemented.")},e.prototype.getText=function(t,e){throw new Error("Method not implemented.")},e.prototype.getCellText=function(t,e){throw new Error("Method not implemented.")},e.prototype.getRows=function(t,e,i){throw new Error("Method not implemented.")},e.prototype.getCell=function(t,e,i){throw new Error("Method not implemented.")},e}(ft),Fh=function(t){function e(e,i){var o=t.call(this)||this;return o._colCount=0,o._blockPaste=!1,o._lines=[],o._colCount=0,o._blockPaste=!1,o._parse(e,i),o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._lines.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"colCount",{get:function(){return this._colCount},set:function(t){this._colCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return 0==this._lines.length||0==this._colCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"single",{get:function(){return 1==this._lines.length&&1==this._colCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blockPaste",{get:function(){return this._blockPaste},set:function(t){this._blockPaste=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startIndex",{get:function(){return this._startIndex},enumerable:!0,configurable:!0}),e.prototype.get=function(t){return this._lines[t]},e.prototype._parse=function(t,e){var i,o,r,n,s,a=this._lines,l=[],h=t.length,u=0,c="";if(""===t)l.push(t),a.push(l),this._colCount=1;else{for(;u<h;)s=!1,i=t.charAt(u),o=u<h-1?t.charAt(u+1):"",'"'==i?n?r&&'"'==o?(c+=i,u++):r?r=!1:c+=i:(n=!0,r=!0):r||"\r"!=i&&"\n"!=i&&"\t"!=i?(n=!0,c+=i):("\t"==i&&(l.push(c),s=!0),"\r"!=i&&"\n"!=i||(l.push(c),this._colCount=Math.max(this._colCount,l.length),a.push(l),l=[],"\r"==i&&"\n"==o&&u++),c="",n=!1),u++;r&&(c='"'+c),(c.length>0||s)&&l.push(c),l.length>0&&(this._colCount=Math.max(this._colCount,l.length),a.push(l))}if(e&&e instanceof Ms&&!e.single){var d=e.startIndex,p=e.endIndex;if(d&&p){var _=e.grid,f=d.layout,g=p.layout,y=d.itemIndex,m=p.itemIndex;if(f.col>g.col){var b=f;f=g,g=b}if(y>m){var v=y;y=m,m=v}f=_.activeCellLayout.getTopOf(f);var w=(g=_.activeCellLayout.getBottomOf(g,!0)).col-f.col+1,C=(g.row-f.row+1)*(m-y+1);u=0;for(var x=0,I=a.length;x<I;x++){for(var E=a[x].slice(),S=E.length;S<w;S++)a[x].push(E[u]),u=u>=E.length?0:u;this._colCount=Math.max(this._colCount,a[x].length)}u=0;for(x=a.length;x<C;x++)a.push(a[u++]),u=u>=a.length?0:u;this._blockPaste=!0,this._startIndex=Hn.temp(_,y,f)}}},e}(ft),Nh=function(t){function e(){var e=t.call(this)||this;return e._lastLayout=null,e}return o(e,t),e.prototype._doDispose=function(){return t.prototype._doDispose.call(this)},e.prototype.lastLayout=function(){return this._lastLayout},e.prototype.getText=function(t,e){var i,o,r,n,s,a,l=t.grid,h=this._rangeToCells(t,null,e),u=[];if(l.copyOptions.includeHeaderText)for(s=0;s<h.length;s++){var c=[];for(a=0;a<h[s].length;a++)(i=lt.cast(h[s][a],mn))?c.push(lt.addQuot(i.header.displayText)):c.push("");u.push(c.join("\t"))}for(r=e.r1,n=e.r2;r<=n;r++){var d=l.getItem(r);if(d.dataRow>=0||Qi(d.itemState))for(s=0;s<h.length;s++){c=[];for(a=0;a<h[s].length;a++)(i=lt.cast(h[s][a],mn))&&!i.blankWhenCopy?(o=Hn.temp(l,r,i).clone(),c.push(t.getData(o))):c.push("");u.push(c.join("\t"))}}return u.join("\r\n")+"\r\n"},e.prototype.getCellText=function(t,e){var i="";return t.grid.copyOptions.includeHeaderText&&(i=e.dataColumn.header.displayText+"\r\n"),i+=t.getData(e)},e.prototype.getRows=function(t,e,i){if(null==e)return null;var o=i.grid,r=o.pasteOptions.selectBlockPaste&&o.getSelection(),n=new Fh(e,r);if(n.empty)return null;if(n.single)return n.get(0)[0];n.blockPaste&&n.startIndex&&i.assign(n.startIndex);for(var s=o.activeCellLayout._dataCells,a=s[0][i.layout.col],l=s[s.length-1][Math.min(s[0].length-1,i.layout.col+n.colCount-1)],h=new Hn(o,i.itemIndex,a),u=new Hn(o,i.itemIndex,l),c=zn.create(h,u),d=this._rangeToCells(t,n,c),p=void 0,_=void 0,f=void 0,g=void 0,y=[],m=0,b=n.rowCount;m<b;){var v={columns:[],values:[]};for(p=0;p<d.length&&m<b;p++,m++){var w=d[p],C=n.get(m);for(v.columns.push(w),v.values.push(g=[]),f=Math.min(C.length,w.length),_=0;_<f;_++)w[_]?g.push(C[_]):g.push("")}y.push(v)}return y},e.prototype.getCell=function(t,e,i){if(!e)return null;var o=new Fh(e);return o.empty?null:o.get(0)[0]},e.prototype._rangeToCells=function(t,e,i){i.normalizeData(),this._lastLayout=null;for(var o=i.c1,r=i.c2,n=t.grid.activeCellLayout._dataCells,s=o===r?o.row:0,a=o===r?o.row:n.length-1,l=[],h=s;h<=a;h++){for(var u=[],c=o.col;c<=r.col;c++){var d=n[h][c];d instanceof xn?u.push(d.firstColumn):u.push(null)}l.push(u)}return this._lastLayout=n[a][r.col],l},e}(Lh),Vh=function(t){function e(){var e=t.call(this)||this;return e._dataSource=null,e._values=null,e._dataRow=-1,e}return o(e,t),Object.defineProperty(e.prototype,"isLeaf",{get:function(){return!0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSource},set:function(t){this._dataSource=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return 0!=(1&this._getExtents())},enumerable:!0,configurable:!0}),e.prototype._getExtents=function(){return 0},e.prototype._setExtents=function(t){},Object.defineProperty(e.prototype,"values",{set:function(t){this._values=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataRow",{get:function(){return this._dataRow},set:function(t){this._dataRow=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataId",{get:function(){return this._dataSource.getRowId(this._dataRow)},enumerable:!0,configurable:!0}),e.prototype.getRowObject=function(){for(var t={},e=this._dataSource,i=0,o=e.fieldCount;i<o;i++){var r=e.getOrgFieldName(i),n=this._values[i];t[r]=n}return t},e.prototype.getData=function(t){return this._values[t]},e.prototype.setIndex=function(t){this._setIndex(t)},e}(eo),Bh=function(t){function e(e,i){var o=t.call(this,e)||this;return o._item=i,o}return o(e,t),e.prototype._doDispose=function(){return t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},enumerable:!0,configurable:!0}),e}(Hn),$h=function(){function t(t){this._grid=t,this._data=new Nh,this._appendingItem=new Vh,this._appendingIndex=new Bh(t,this._appendingItem)}return t.prototype.dispose=function(){return null},Object.defineProperty(t.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"appendingIndex",{get:function(){return this._appendingIndex},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPasting",{get:function(){return this._pasting},enumerable:!0,configurable:!0}),t.prototype.getDataRoots=function(){var t=this._grid._activeCellLayout._dataCells,e=[];if(t.length<0||t[0].length<0)return e;for(var i=0,o=t[0].length;i<o;i++)t[0][i].dataRoot,e.push(t[0][i].dataRoot);return e},t.prototype.getData=function(t){var e,i,o,n=this.grid,s=t.layout.firstColumn,a=n.getItem(t.itemIndex),l=n.copyOptions,h=l.datetimeFormat?xe.getFormatter(l.datetimeFormat):null,u=l.booleanFormat?Ie.getFormatter(l.booleanFormat):null,c=l.copyTextCallback;if(!a||!(Qi(a.itemState)||a.dataRow>=0))return"";if(o=a.getData(s.dataIndex),s&&null!=(e=n.dataSource.getField(s.dataIndex))){if(null==(i=c?c.call(this,n,t.itemIndex,t.dataColumn,o):void 0))if(l.copyDisplayText)i=n.getDisplayText(t);else switch(e.dataType){case r.DATETIME:case r.DATE:i=o?h?h.getText(o):String(o):"";break;case r.BOOLEAN:i=null!=o?u?u.formatValue(o):String(o):"";break;case r.NUMBER:i=o==isNaN(o)?"":String(o);break;case r.OBJECT:i=o&&"object"==typeof o?JSON.stringify(o):"";break;default:i=l.lookupDisplay&&(s.lookupDisplay||s.labelField)?Mo.getText(a,s):null!=o?String(o):""}return lt.addQuot(i)}return""},t.prototype.copyEmtpyToClipboard=function(){return""},t.prototype.copyToClipboard=function(t){return this._data.getText(this,t)},t.prototype.copyCellToClipboard=function(t){return this._data.getCellText(this,t)},t.prototype.pasteCellFromClipboard=function(t,e){if((t=this._correctIndex(t))&&this._grid.isValid(t)&&null!=e){var i=this._data.getCell(this,e,t);this._pasteSingleCell(t,i)}},t.prototype.pasteFromClipboard=function(t,e){var i=this._grid&&this._grid.dataSource;this._appendingItem.dataSource=i;var o=t.clone();if((t=this._correctIndex(t))&&this._grid.isValid(t)){if(null!=e){var r=this._data.getRows(this,e,t);null!=r&&("string"==typeof r?this._pasteSingleCell(t,r):1==r.length?this._pasteSingleLine(t,r[0]):r.length>1&&this._pasteMultiLines(t,r))}Hn.areEquals(t,o)||this._grid.setFocusedIndex(o,!1,!1)}},t.prototype._correctIndex=function(t){if(t){var e=this._grid;if(t.normalize(e),this._grid.isValid(t)&&e.pasteOptions.selectionBase&&e.selections.count>0){var i=e.selections.getItem(0).getBounds().firstCell;t.column=i.column,t.itemIndex=i.itemIndex}}return t},t.prototype._createDate=function(){return new Nh},t.prototype._readValue=function(t,e,i){var o=void 0;switch(t.getField(e.dataIndex).dataType){case r.NUMBER:o=Number(i);break;case r.DATETIME:o=new Date(i);break;case r.BOOLEAN:o=Boolean(i);break;default:o=i}return o},t.prototype._convertValue=function(t,e,i,o,n){var s=void 0,a=i.dataIndex,l=t.getField(a),h=this._grid.delegate.getCellEditor(aa.getEditorType(i.editor));switch(l.dataType){case r.NUMBER:s=NaN;var u=void 0;if(o){var c=i.name;if(e.applyNumberFormat){var d=i.getCellStyle(null),p=h instanceof fa&&h.editFormat||"object"==typeof d&&d.numberFormat;p&&(u=new Se(p))}var _=e.numberCharExpOfCol(c);_&&(o=o.replace(_,""));var f=e.numberSeparatorOfCol(c);if(f&&(o=o.replace(f,".")),s=u?+parseFloat(o).toFixed(u.maxDigits):parseFloat(o),e.applyMaxLength){var g=String(s).split(".");h instanceof fa&&h.maxIntegerLength>0&&(g[0]=g[0].substr(0,h.maxIntegerLength)),o=g.join("."),h instanceof fa&&h.maxLength>0&&(o=o.substr(0,h.maxLength)),s=parseFloat(o)}}else""==o&&(s=null);break;case r.DATETIME:s=null;var y=e.dateReaders;if(o&&y)for(var m=0;m<y.length&&!(s=y[m].toDate(o));m++);null===s&&(s=new Date(o),isNaN(s.getTime())&&(s=null)),null===s&&(s=l.readValue(o));break;case r.BOOLEAN:s=void 0;var v=e.boolReader;o&&v&&(s=v.toBoolStrict(o)),void 0===s&&(s=l.readValue(o));break;default:if(o=String(o))if(h instanceof ml){h.initOptions(),h.applyOptions(i.editor);var w=e.checkDomainOnly&&h.domainOnly,C=e.convertLookupLabel,x=-1,I=[],E=[];if(w||C)if(h.values&&h.values.length>0)E=h.values,I=h.labels;else if(i.lookupSource){var S=i.lookupSource,O=i.lookupKeyFieldIds,R=[];for(m=0;m<O.length-1;m++)R.push(n[O[m]]);var D=S.getTextDomain(R);E=D&&D.keys,I=D&&D.values}else i.values&&i.values.length>0&&(E=i.values,I=i.labels);o=C&&E&&I&&E.indexOf(o)<0&&(x=I.indexOf(o))>=0?E[x]:o,o=E&&E.indexOf(o)>=0?o:w?"":o}else e.applyMaxLength&&h&&h instanceof ua&&h.maxLength>0&&(o=o.substr(0,h.maxLength)),i.textInputCase==b.LOWER?o=o.toLocaleLowerCase():i.textInputCase==b.UPPER&&(o=o.toLocaleUpperCase());s=o}return s},t.prototype._removeChars=function(t,e){if(e)for(;;){var i=t.replace(e,"");if(i.length==t.length)break;t=i}return t},t.prototype._fireRowsPasted=function(t){for(var e=this._grid,i=[],o=0;o<t.length;o++)i.push(e.getItemIndexOfRow(t[o]));i.length>0&&e._fireItemsPasted(i)},t.prototype._cellWritable=function(t,e,i){var o=this._grid,r=o._fireCellPasting(t,i);if("boolean"==typeof r)return r;if(!o.pasteOptions.checkReadOnly)return!0;var n=o.body.getIndexCellStyle(t);if(n&&(null!=n.readOnly||null!=n.editable))return null!=n.editable?n.editable&&!n.readOnly:!n.readOnly;var s=o.body.getRowStyle(t.item,t.itemIndex<o.fixedOptions.rowCount);if("object"==typeof s&&(null!=s.readOnly||null!=s.editable))return null!=s.editable?s.editable&&!s.readOnly:!s.readOnly;var a=o.fixedOptions;if((t.colFixed||t.rightFixed)&&!a.editable||t.rowFixed&&!a.rowEditable)return!1;var l=t.item&&t.item.itemState,h=!0;switch(e||l){case wi.NORMAL:case wi.FOCUSED:case wi.UPDATING:h=o.canUpdate(t.item,t.dataField);break;case wi.INSERTING:case wi.APPENDING:h=!0}var u=this.grid.getBodyCellAt(t,!1);if(u&&u.renderer2&&u.renderer2.canEdit())return h&&!t.dataColumn.readOnly;if(!u){var c=t.dataColumn.renderer;if(c&&"check"===c.type&&null!=c.editable)return h&&c.editable&&!t.dataColumn.readOnly}return h&&t.dataColumn.isWritable()},t.prototype._applyMaskValue=function(t,e){var i,o=this.grid.body.getIndexCellStyle(t);if(o.editor&&o.editor.mask?i=o.editor.mask:o.editor||(i=t.dataColumn.editor&&t.dataColumn.editor.mask),i){var r=new la(null,i);return r.clearBuffer(),r.writeBuffer(e,!0),r.checkValid()?r.getStripValue():null}return e},t.prototype._applyInputChars=function(t,e){if(!this.grid.pasteOptions.applyInputChars)return e;var i,o,r=this.grid.body.getIndexCellStyle(t).editor||t.dataColumn.editor;return r?((o=r.inputCharacters)&&(i=new RegExp("[^"+o+"]","g")).test(e)&&(e=e.replace(i,"")),(o=r.ignoreCharacters)&&(i=new RegExp("["+o+"]","g")).test(e)&&(e=e.replace(i,"")),e):e},t.prototype._pasteSingleCell=function(t,e){var i,o=this._grid,r=o.dataSource,n=t.dataColumn,s=o.pasteOptions;if(null!=e&&r&&n&&n.isWritable()&&!o.editOptions.readOnly&&t.item.canEdit()){e.lastIndexOf("\r\n")==e.length-1&&(e=e.substr(0,e.length-2)),e.lastIndexOf("\n")==e.length-1&&(e=e.substr(0,e.length-1));var a=this._convertValue(r,s,n,e,t.item&&t.item.getRowData());if(a=s.applyEditMask?this._applyMaskValue(t,a):a,a=this._applyInputChars(t,a),this._cellWritable(t,null,a))if(o.isItemEditing()||s.startEdit&&o.edit(t)){i=t.item;var l=[],h=[];h[t.dataField]=a,l[t.dataField]=i.getData(t.dataField),o.setCellUpdateEventLock(s.noEditEvent);try{i.setData(n.dataIndex,a)}finally{o.setCellUpdateEventLock(!1)}o.validateCellCommit(t,t.item.getData(t.dataField)),o._fireEditItemPasted(i,[t.dataField],l,h),o.refreshView()}else{this._pasting=!0;try{var u=o.validationManager,c=s.forceRowValidation,d=s.forceColumnValidation;i=t.item;var p=c||d?i.getRowData():[];p[n.dataIndex]=a,this._appendingItem.values=p;var _=Qi(i.itemState);if(this._appendingItem.dataRow=i.dataRow,this._appendingItem.setIndex(i.index),this._appendingIndex.column=null,this._appendingIndex.itemIndex=t.itemIndex,c&&u.validateRow(this._appendingItem,_,!0,!0),d){this._appendingIndex.column=n;try{u.validateCell(this._appendingIndex,_,!0)}catch(t){if(!(t instanceof Vr))throw t;if(F(t.level,o.editOptions.commitLevel)<0)throw t}}u.clearInvalidCell(this._appendingIndex),o.updatePastedRow(i,p,!c)}finally{this._pasting=!1}}}},t.prototype._pasteSingleLine=function(t,e){var i,o,r,n,s,a,l,h=this._grid,u=h.dataSource,c=h.pasteOptions,d=h.editOptions,p=!1;if(u&&!d.readOnly&&u){if(h.isItemEditing()||c.startEdit&&h.edit(t)){var _=[],f=[],g=[],y=t.column;for(o=t.item,r=Math.min(e.columns.length,e.values.length),n=0;n<r;n++){var m=e.columns[n],b=e.values[n];for(s=0;s<b.length;s++){var v=m[s],w=b[s];if(v){var C=Hn.temp(h,t.itemIndex,v),x=o.getData(v.dataIndex);i=this._convertValue(u,c,v,w,o&&o.getRowData()),i=c.applyEditMask?this._applyMaskValue(C,i):i,i=this._applyInputChars(C,i),h.setCellUpdateEventLock(c.noEditEvent);try{(a=this._cellWritable(C,null,i))&&o.setData(v.dataIndex,i)}finally{h.setCellUpdateEventLock(!1)}a&&(t.column=v,h.validateCellCommit(t,o.getData(v.dataIndex)),_.push(v.dataIndex),f[v.dataIndex]=x,g[v.dataIndex]=i,p=!0)}}}p&&(h._fireEditItemPasted(o,_,f,g),t.column=y,h.refreshView())}else{this._pasting=!0;try{var I=h.validationManager,E=c.forceRowValidation,S=c.forceColumnValidation;o=t.item;g=E||S?o.getRowData():[];r=Math.min(e.columns.length,e.values.length);m=void 0,b=void 0;for(n=0;n<r;n++)for(m=e.columns[n],b=e.values[n],s=0;s<b.length;s++)if(l=m[s]){C=Hn.temp(h,t.itemIndex,l);i=this._convertValue(u,c,l,b[s],o&&o.getRowData()),i=c.applyEditMask?this._applyMaskValue(C,i):i,i=this._applyInputChars(C,i),this._cellWritable(C,null,i)&&(g[l.dataIndex]=i,p=!0)}if(p){var O=Qi(o.itemState);if(this._appendingItem.values=g,this._appendingItem.setIndex(o.index),this._appendingItem.dataRow=o.dataRow,this._appendingIndex.column=null,this._appendingIndex.itemIndex=t.itemIndex,E&&I.validateRow(this._appendingItem,O,!0,!0),S)for(n=0;n<r;n++)for(m=e.columns[n],b=e.values[n],s=0;s<b.length;s++){this._appendingIndex.column=m[s];try{I.validateCell(this._appendingIndex,O,!0)}catch(t){if(!(t instanceof Vr))throw t;if(F(t.level,d.commitLevel)<0)throw t}}I.clearInvalidCells(o.dataId),h.updatePastedRow(o,g,!E)}}finally{this._pasting=!1}}h.selections.clear(),h.selections.add(t,new Hn(h,t.itemIndex,this._data.lastLayout()),ls.BLOCK)}},t.prototype._pasteMultiLines=function(t,e){var i=this._grid,o=i.dataSource;if(o){var r=i.pasteOptions,n=r.checkReadOnly;if(n&&i.editOptions.readOnly)return;var s=r.noDataEvent,a=e.length,l=t.itemIndex,h=o.fieldCount,u=i.getDataColumns(!1),c=u.length,d=i.validationManager,p=r.forceRowValidation,_=r.forceColumnValidation,f=this._appendingItem,g=this._appendingIndex,y=void 0,m=void 0,b=void 0,v=void 0,w=r.eventEachRow,C=[];r.commitEdit&&i.commit(!1)||i.cancel();var x=i.itemCount;f.dataSource=o,s&&o.beginUpdate();try{for(this._pasting=!0,y=0;y<a&&l<x;y++)try{if(($=i.getItem(l)).itemState==wi.APPENDING)break;for(;$&&$.dataRow<0;)l++,$=i.getItem(l);if(null==$)break;var I=e[y],E=p||_?$.getRowData():[],S=p||_?$.getRowData():[],O=!1,R=[];for(b=Math.min(I.columns.length,I.values.length),m=0;m<b;m++){var D=I.columns[m],k=I.values[m];for(v=0;v<k.length;v++){if((L=D[v])&&L instanceof mn){var P=Hn.temp(i,$.index,L),T=this._convertValue(o,r,L,k[v],$&&$.getRowData());T=r.applyEditMask?this._applyMaskValue(P,T):T,T=this._applyInputChars(P,T),(N=this._cellWritable(P,null,T))&&(O=O||N||!n,R.push(L.dataIndex),S[L.dataIndex]=$.getData(L.dataIndex),E[L.dataIndex]=T)}}}if(O)try{f.values=E,f.setIndex($.index),f.dataRow=$.dataRow,g.column=null,g.itemIndex=$.index;var M=Qi($.itemState);if(p&&d.validateRow(f,M,!0,!0),_)for(v=0;v<c;v++){var L=u[v];g.column=L;try{d.validateCell(g,M,!0)}catch(t){if(!(t instanceof Vr))throw t;if(F(t.level,i.editOptions.commitLevel)<0)throw t}}i.updatePastedRow($,E,!p),d.clearInvalidCells(f.dataId),w&&i._fireEditItemPasted($,R,S,E),C.push($.dataRow)}catch(t){if(r.stopOnError)throw t}l++}catch(e){throw l=Math.max(t.itemIndex,l-1),i.setFocusedIndex(t,!1),i.selections.clear(),i.selections.add(t,new Hn(i,l,this._data.lastLayout()),ls.BLOCK),e}if(y<a&&r.enableAppend){for(;y<a;y++){I=e[y],E=f.values=[],S=[];f.dataRow=-1,f.setIndex(-1);try{R=[];for(b=Math.min(I.columns.length,I.values.length),m=0;m<b;m++){D=I.columns[m],k=I.values[m];for(v=0;v<k.length;v++){if(L=D[v]){var N;P=Wn.tempItem(i,f,L),T=this._convertValue(o,r,L,k[v],E);T=r.applyEditMask?this._applyMaskValue(P,T):T,T=this._applyInputChars(P,T),(N=this._cellWritable(P,wi.APPENDING,T))&&(R.push(L.dataIndex),E[L.dataIndex]=T,S[L.dataIndex]=void 0)}}}if(r.fillColumnDefaults)for(v=0;v<c;v++){(L=u[v]).dataIndex>-1&&void 0===E[L.dataIndex]&&void 0!==L.defaultValue&&(E[L.dataIndex]=L.defaultValue)}if(r.fillFieldDefaults)for(v=0;v<h;v++)if(void 0===E[v]){var V=o.getField(v);void 0!==V.defaultValue&&(E[v]=V.defaultValue)}try{if(f.values=E,f.dataRow=-1,f.setIndex(-1),this._appendingIndex.column=null,this._appendingIndex.itemIndex=-1,p&&d.validateRow(f,!0,!0,!0),r.forceColumnValidation)for(v=0;v<c;v++){L=u[v];this._appendingIndex.column=L;try{d.validateCell(this._appendingIndex,!0,!0)}catch(t){if(!(t instanceof Vr))throw t;if(F(t.level,i.editOptions.commitLevel)<0)throw t}}i.appendPastedRow(E);var B=o.rowCount-1;if(w){var $=i.getItem(i.getItemIndexOfRow(B));i._fireEditItemPasted($,R,S,E)}C.push(B)}catch(t){if(r.stopOnError)throw t}}catch(e){throw l=Math.max(t.itemIndex,i.itemCount-1),i.setFocusedIndex(t,!1),i.selections.clear(),i.selections.add(t,new Hn(t.grid,l,this._data.lastLayout()),ls.BLOCK),e}}l=s?-1:i.itemCount}this._fireRowsPasted(C)}catch(t){throw this._fireRowsPasted(C),t}finally{this._pasting=!1,s&&(o.endUpdate(),l<0&&(l=o.rowCount))}i.setFocusedIndex(t,!1),i.selections.clear(),i.selections.add(t,new Hn(t.grid,l-1,this._data.lastLayout()),ls.BLOCK)}},t}(),Ah=function(t){function e(e){var i=t.call(this)||this;return i._visible=!0,i._enabled=!0,e&&i.assignFrom(e),i}return o(e,t),e.prototype._doDispose=function(){return t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){this._visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"label",{get:function(){return this._label},set:function(t){this._label=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"manager",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"type",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.click=function(){},e.prototype.isSeparator=function(){return!1},e}(se),jh=function(t){function e(e,i){var o=t.call(this,i)||this;return o._parent=e,o}return o(e,t),e.prototype._doDispose=function(){this._parent=null,this._callback=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"type",{get:function(){return this._type},set:function(t){this._type=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"group",{get:function(){return this._group},set:function(t){this._group=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){this._checked=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},set:function(t){this._parent=t},enumerable:!0,configurable:!0}),e.prototype.isSeparator=function(){return"-"===this._label||this._type===x.SEPARATOR},e.prototype.getData=function(){return{label:this._label,checked:this._checked,enabled:this._enabled,tag:this.tag}},e.prototype.click=function(){"check"===this._type&&(this._checked=!this._checked),this._parent&&this._parent.itemClicked(this)},Object.defineProperty(e.prototype,"manager",{get:function(){return this._parent.manager},enumerable:!0,configurable:!0}),e.prototype._itemClicked=function(t){},e}(Ah),Hh=function(t){function e(e,i){var o=t.call(this,i)||this;return o._name=i.name,o._parent=e,o._items=o._load(i.children),o}return o(e,t),e.prototype._doDispose=function(){this._items&&this._items.forEach((function(t,e){t.dispose()})),this._items=null,this._parent=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"manager",{get:function(){for(var t=this._parent;t;){if(t.popupMenuManager instanceof Gh)return t.popupMenuManager;if(t instanceof Gh)return t;t=t._parent}return null},enumerable:!0,configurable:!0}),e.prototype.count=function(){return this._items?this._items.length:0},e.prototype.itemClicked=function(t){if(t.parent==this&&t.type===x.RADIO){var e=t.group,i=void 0;if(e){for(var o=0;o<this._items.length;o++)(i=this._items[o])instanceof jh&&i.type===x.RADIO&&i.group===e&&(i.checked=!1);t.checked=!0}}var r=this.manager.grid;"function"==typeof t.callback?t.callback.call(this,r.handler,t.toProxy(),this.manager.clickData):this._parent instanceof Gh?this._parent.doMenuItemClick(t,this.manager.clickData):this._parent.onMenuItemClick?this._parent.onMenuItemClick(t,this.manager.clickData):this._parent.itemClicked(t)},e.prototype._load=function(t){var i=[];if(t)for(var o=0,r=t.length;o<r;o++){var n=t[o];if(lt.isArray(n.children)&&n.children.length>0){var s=new e(this,n);i.push(s)}else{s=new jh(this,n);i.push(s)}}return i},e.CLICKED="onPopupMenuClicked",e}(Ah),Wh=function(t){function e(e){var i=t.call(this)||this;return i._showing=!1,i._viewGridInside=!1,i._container=e,i._element=i._createElement(),i._element.addEventListener("contextmenu",(function(t){t.preventDefault()})),i}return o(e,t),e._borrowView=function(t){var i=e.$_views[t.$_hash]||[];return e.$_views[t.$_hash]=i,i.pop()||new e(t)},e._returnView=function(t){e.$_views[t._container.$_hash].push(t)},e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"parentView",{get:function(){return this._parentView},set:function(t){this._parentView=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"childView",{get:function(){return this._childView},set:function(t){this._childView=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currDiv",{get:function(){return this._currDiv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"manager",{get:function(){return this._menu.manager},enumerable:!0,configurable:!0}),e.prototype.show=function(t,e,i,o,r,n,s,a){if(!this._showing){this._showing=!0;try{var l=i.parent;for(this._containerElement=t._container,this._parentView=e,this._firstItem=null,this._menu=i;l._parent&&!(l instanceof Pu);)l=l.parent;l&&(this._viewGridInside=l instanceof Pu?l.editorOptions.viewGridInside:l instanceof Gh&&l.grid.editorOptions.viewGridInside),this.$_show(t,this._menu,o,r,n,s)}finally{this._showing=!1}}},e.prototype.boundsByContainer=function(){return null},e.prototype.hide=function(t){if(void 0===t&&(t=!0),t&&this._parentView)this._parentView.hide(!0);else{this.$_hideChildView();var e=this._element;e&&e.parentElement&&e.parentElement.removeChild(e)}},e.prototype.hideChild=function(){this.$_hideChildView()},e.prototype.changeItemIndex=function(t){var e,i=this._itemIndex,o=this._menu._items;if(0==t)return this._itemIndex=-1,void this.$_refreshItems(this._itemIndex);if(o&&!(i>=o.length)){for(;(e=o[i+=t])&&!e.enabled;);e&&(this._itemIndex=i,this.$_refreshItems(this._itemIndex))}},e.prototype.menuItemClicked=function(t){this._menuItemClicked(t)},e.prototype.$_show=function(t,e,i,o,r,n){if(this._element){var s=t.doc,a=st(s),l=this._element,h=l.style,u=this.manager,c=t.gridView.displayOptions.baseZindex;this._element.style.zIndex=String(c+4);var d=u.dropdownCount,p=this._viewGridInside?t._container:s.documentElement;this._menu=e,this._itemIndex=-1,lt.clearElements(this._element),this.$_buildItems(e),lt.disableSelection(l),p.appendChild(l);var _=0;if(d&&e.items.length>d)for(var f=0,g=0;f<e.items.length&&g<d;f++){var y=this._element.children[f];y.menuItem.isSeparator()||(_+=y.offsetHeight,g++)}_>0&&_<l.offsetHeight?(h.height=_+2+"px",h.overflow="auto"):(h.removeProperty("height"),h.overflow="hidden");var m=lt.getBrowserSize(),b=lt.ieTen||lt.ieOld?lt.getClientRect(s.body):lt.getClientRect(s.documentElement),v=lt.getClientRect(t._container),w=m.width,C=m.height,x=lt.getClientRect(l),I=a.pageXOffset||s.documentElement.scrollLeft,E=a.pageYOffset||s.documentElement.scrollTop;s.documentElement.scrollWidth>s.documentElement.clientWidth&&(C-=18),s.documentElement.scrollHeight>s.documentElement.clientHeight&&(w-=18),this._viewGridInside?(x.height>=v.height&&(h.height=v.height-4+"px",h.overflow="auto",x=lt.getClientRect(this._element)),o+v.top+x.height>v.bottom&&(o=this._parentView?v.bottom-x.height-v.top-3:o-x.height-n),i+v.left+x.width>v.right&&(i=this._parentView?v.right-x.width-v.left-3:i-x.width-r)):(this._parentView||(i+=v.left-b.left,o+=v.top-b.top),x.height>=C&&(h.height=C-4+"px",h.overflow="auto",x=lt.getClientRect(this._element)),o+x.height>=C+E-3&&(o=o-x.height-3)<0&&(o=Math.max(0,C-x.height-3)),i+x.width>=w+I-3?i=Math.max(0,w-x.width-3):void 0!==r&&x.width<r&&(i+=r-x.width)),lt.move(this._element,Math.max(0,i),Math.max(0,o))}},e.prototype._createElement=function(){var t=function(t){27==t.keyCode&&this.hide()}.bind(this),e=this._container.doc.createElement("div");return e.style.setProperty("position","absolute","important"),e.className="rg-popup-menu",this._container.$_addListener(e,"keydown",t,!1),e},e.prototype._showChild=function(t){if(this==this.manager.showingView&&!(this._childView&&this._childView._menu===t.menuItem||this._currDiv!==t)){this.$_hideChildView();var i=t.menuItem,o=this._element.getBoundingClientRect(),r=this._element.offsetLeft+o.width-4,n=this._element.offsetTop+t.offsetTop-this._element.scrollTop;this._childView=e._borrowView(this._container),this._childView.show(this._container,this,i,r,n)}},e.prototype.$_hideChildView=function(){this.manager.showingView=null,this._childView&&(this._childView.$_hideChildView(),this._childView._element&&this._childView._element.parentElement&&this._childView._element.parentElement.removeChild(this._childView._element),e._returnView(this._childView)),this._childView=null},e.prototype._menuItemActived=function(t){rt(t);this._currDiv=t;var e=t.menuItem,i=this.manager.showingView=this.manager.activeView=t.menuView;e instanceof jh?i.childView&&i.$_hideChildView():e instanceof Hh&&e.enabled&&(this._timer&&clearTimeout(this._timer),this._timer=setTimeout((function(){i._showChild(t)}),200))},e.prototype._menuItemDeactived=function(t){},e.prototype._menuItemClicked=function(t){var e=t.menuItem;e instanceof Hh?e.enabled&&this._showChild(t):e?(this.hide(!0),e.enabled&&e.click(),this.manager.close()):this.$_hideChildView()},e.prototype.$_refreshItems=function(t){for(var e=this._element,i=0,o=e.childElementCount;i<o;i++){var r=e.childNodes[i];if(r.style.background=i===t?"rgba(0,255,0,0.2)":"",i==t){var n=r.offsetTop,s=r.offsetHeight+4,a=e.offsetHeight,l=e.scrollTop;l>n?e.scrollTop=Math.max(0,e.scrollTop+(n-l)):l+a<n+s&&(e.scrollTop=e.scrollTop+n+s-(l+a)),this._menuItemActived(r)}}},e.prototype.$_buildItems=function(t){for(var i=t.items,o=[],r=this._container.doc,n=0,s=i.length;n<s;n++){var a=i[n];if(a.visible){var l=r.createElement("div");if(l.menuView=this,l.menuItem=a,l.style.position="relative",l.style.cssFloat="none",l.style.width="100%",a instanceof jh&&a.isSeparator()){l.className="rg-popup-separator";var h=r.createElement("hr");h.className="rg-popup-separator-hr",l.appendChild(h),l.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this)}else{!this._firstItem&&(this._firstItem=l),o.length=0,o.push("rg-popup-item"),a.group&&o.push("rg-popup-"+a.group),!a.enabled&&o.push("rg-popup-item-disable"),l.className=o.join(" "),l.style.whiteSpace="pre",l.onclick=function(t){this._menuItemClicked(t.currentTarget)}.bind(this),l.onmouseover=function(t){this._menuItemActived(t.currentTarget)}.bind(this),l.onmouseout=function(t){this._menuItemDeactived(t.currentTarget)}.bind(this);var u=r.createElement("span"),c=u.style;o.length=0,c.setProperty("display","inline-block"),c.setProperty("min-width","20px"),c.setProperty("min-height","7px"),c.setProperty("vertical-align","middle"),c.setProperty("pointer-events","none","important"),u.textContent="",lt.included(a.type,[x.CHECK,x.RADIO])&&o.push(a.group?"rg-popup-radio":"rg-popup-check"),a.checked&&o.push(a.group?"rg-popup-radio-checked":"rg-popup-check-checked"),u.className=o.join(" "),u.tabIndex=-1,lt.disableSelection(u),l.appendChild(u);var d=r.createElement("span");if(d.id="$popupMenu_item_"+e.$_menuId++,d.style.paddingRight="24px",d.style.pointerEvents="none",d.style.verticalAlign="middle",d.innerHTML=a.label,d.tabIndex=-1,lt.disableSelection(d),l.appendChild(d),a instanceof Hh){var p=r.createElement("span");p.className="rg-popup-expander",l.appendChild(p),p.style.position="absolute",p.style.right="0px",p.style.width="24px",p.style.height="17px",p.style.verticalAlign="middle",p.style.setProperty("pointer-events","none","important"),p.innerHTML=" ",p.tabIndex=-1,lt.disableSelection(p),l.appendChild(p)}}lt.disableSelection(l),this._element.appendChild(l)}}},e.$_menuId=0,e.$_views={},e}(se),Gh=function(t){function e(e){var i=t.call(this)||this;return i._grolbalMouseHandler=function(t){for(var e=t.target;e;){if(e===this._mainView._element||e.menuItem)return;e=e.parentElement}this.close()}.bind(i),i._container=e,i._containerDom=e._containerDom,i._menus=[],i}return o(e,t),e.prototype._doDispose=function(){this.close(),this._mainView=null,this._showingView=null,this._clickData=null,this._activeView=null,this._container=this._containerDom=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"clickData",{get:function(){return this._clickData},set:function(t){this._clickData=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this._container.gridView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropdownCount",{get:function(){if(this._container&&this._container.gridView)return this._container.gridView.displayOptions.popupDropdownCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showingView",{get:function(){return this._showingView},set:function(t){this._showingView=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"activeView",{get:function(){return this._activeView},set:function(t){this._activeView=t},enumerable:!0,configurable:!0}),e.prototype.popupManager=function(){return this},e.prototype.isShow=function(){return!!this._mainView},e.prototype.indexOf=function(t){for(var e=this._menus.length;e--;)if(lt.compareTextValue(this._menus[e].name,t,!0,!1))return e;return-1},e.prototype.getMenu=function(t){for(var e=this._menus.length;e--;)if(lt.compareTextValue(this._menus[e].name,t,!0,!1))return this._menus[e];return null},e.prototype.addMenu=function(t,e,i,o){if(void 0===i&&(i=!1),void 0===o&&(o=null),lt.isWhiteSpace(t))throw"Menu name is empty.";var r;if((r=this.indexOf(t))>=0&&!i)return this._menus[r];var n=new Hh(o||this,{name:t,children:e});return i&&r>-1?this._menus[r]=n:this._menus.push(n),n},e.prototype.removeMenu=function(t){var e=this.indexOf(t);if(e>-1){var i=this._menus.splice(e,1);for(e=i.length;e>0;e--){i[e-1].dispose()}}},e.prototype.clearMenus=function(){this._menus.length=0},e.prototype.show=function(t,e,i,o,r,n,s){void 0===o&&(o=null),void 0===r&&(r=null),void 0===n&&(n=null),void 0===s&&(s=null);var a=this.grid,l=rt(this._containerDom),h=i&&a.getBodyCellAt(i);if("string"==typeof t)t=this.getMenu(t);else if(!(t instanceof Hh)){t=new Hh(this,{children:t})}if(t){if(null!=o&&null!=r)n=isNaN(n=Math.round(n))?0:n,s=isNaN(s=Math.round(s))?0:s;else{var u=this.grid.container.getBound(),c=void 0;if(h&&h.merged){var d=a.layoutManager;c=(f=a.getBodyViewAt(i)).getCellRect(d,h,!1),c=f.boundsByScreen(c)}else c=e.getBoundingClientRect();var p=c.bottom;o=c.left-u.x,r=p-u.y,n=c.width,s=c.height}if(this._mainView=this._activeView=Wh._borrowView(this._container),e instanceof l.HTMLTableCellElement){var _=a.getCellType(e),f=a.getTableView(e),g=void 0;if("data"===_)g=(h=h||f.bodyCellByCell(e)).grouped?mh.getItem("groupHeader",h.item.index,null):mh.getCell(_,h);else if("header"===_){var y=f.layoutByCell(e);g=mh.getLayout(_,y)}this.clickData=g}this._mainView.show(this._container,null,t,o,r,n,s),l.addEventListener("mousedown",this._grolbalMouseHandler,!1)}},e.prototype.showContext=function(t,e,i,o,r){if(t&&!this._mainView){var n=rt(this._containerDom);this.clickData=r,this._mainView=this._activeView=Wh._borrowView(this._container),this._mainView.show(this._container,null,t,i,o,0,0,e),n.addEventListener("mousedown",this._grolbalMouseHandler,!1)}},e.prototype.close=function(){if(this._mainView){var t=rt(this._containerDom);this._mainView.hide(),Wh._returnView(this._mainView),this._mainView=null,t.removeEventListener("mousedown",this._grolbalMouseHandler,!1)}},e.prototype.keyDown=function(t){this._doKeydown(t)},e.prototype.doMenuItemClick=function(t,i){this.fireEvent(e.MENU_ITEM_CLICKED,t,i)},e.prototype._doKeydown=function(t){var e=this._activeView,i=null==e?void 0:e.currDiv;switch(t.keyCode){case 40:e.changeItemIndex(1);break;case 38:e.changeItemIndex(-1);break;case 37:e.parentView&&(e.changeItemIndex(0),e.hideChild(),this._showingView=this._activeView=e.parentView||this._mainView);break;case 39:e&&e.childView&&(e=this._showingView=this._activeView=e.childView).changeItemIndex(1);break;case 13:case 32:e.menuItemClicked(i)}},e.prototype.$_buildItems=function(t){},e.MENU_ITEM_CLICKED="onPopupMenuManagerMenuItemClicked",e}(se),Uh=function(t){function e(){return t.call(this,"summaryCell")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"summaryIndex",{get:function(){return this._childIndex},set:function(t){this._childIndex=t},enumerable:!0,configurable:!0}),e.prototype._getSummary=function(t,e){return t&&t.headerSummaries.get(e)},e}(ts),zh=function(t){function e(e){return t.call(this,e)||this}return o(e,t),Object.defineProperty(e.prototype,"summaryIndex",{get:function(){return this._childIndex},enumerable:!0,configurable:!0}),e.prototype.getCellStyleName=function(){return e.CELL_CSS},e.prototype._createCell=function(){return new Uh},e.CELL_CSS="rg-header-summary-cell",e}(is),Yh=function(t){function e(e){var i=t.call(this,e)||this;return i.visible=!1,i}return o(e,t),e.prototype._createSummary=function(t){return new zh(t||this._grid)},e}(rs),qh=function(t){function e(e,i){return t.call(this,e,i,"headerSummaryView")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-header-summary"},e.prototype._getRendererStyle=function(){return"rg-header-summary-renderer"},e.prototype._getSummaryRows=function(t){return t.headerSummaryRows},e.prototype._getCollection=function(){return this.model},e.prototype._getSummaryHeight=function(t){return t.summaryHeight},e.prototype._getSummaryCount=function(t){return t.headerSummaryCount},e.prototype._getSpanOf=function(t,e){return t.getSummarySpan(e)},e.prototype._getUserSpanOf=function(t,e){return t.getSummaryUserSpan(e)},e.prototype._getSummaryItem=function(t,e){return t.firstColumn.headerSummaries.get(e)},e.prototype._getTableRowCount=function(t){return t.headerSummaryRows*t.headerSummaryCount},e}(Da),Kh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},e.prototype._getExplicitWidth=function(t){return t.fixedWidth-t.fixedBarWidth},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e.prototype._getCellCount=function(t){return t.fixedCellCount},e.prototype._getCellWidth=function(t,e){return t.getFixedCellWidth(e)},e}(qh),Xh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-fixed-header-summary"},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e.prototype._getCellCount=function(t){return t.rightCellCount},e.prototype._getCellWidth=function(t,e){return t.getRightCellWidth(e)},e}(qh),Zh=function(t){function e(e){var i=t.call(this,e,"gridSumCellView")||this;return i._text="",i._styleName="",i._textChanged=!1,i}return o(e,t),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},set:function(t){t!==this._model&&(this._model=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t||"",this._textChanged=!0,this._changed())},enumerable:!0,configurable:!0}),e.prototype.setStyleName=function(t,e){e!=this._styleName&&(this._styleName=e,this._setClassName(t))},e.prototype._getCssSelector=function(){return this._styleName},e.prototype._doUpdateContent=function(t,e,i){this._textChanged&&(this._textChanged=!1,i[lt.TextProp]=this._text)},e.prototype._doRender=function(t){},e}(Ks),Jh=function(t){function e(e){var i=t.call(this,e,null,"gridSumView")||this;i._cells=[],i._count=0;for(var o=0;o<3;o++)i.addChild(i._cells[o]=new Zh(e));return i}return o(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},e.prototype.getSumModel=function(t){for(var e=0;e<this._cells.length;e++)if(t===this._getTableCell(0,e))return this._cells[e].model},e.prototype.getCellType=function(t){var e=this.getSumModel(t);return e===this.grid.rowIndicator?"indicator":e===this.grid.stateBar?"state":e===this.grid.checkBar?"check":void 0},e.prototype._getCssSelector=function(){return"rg-sum"},e.prototype._doPrepareTableExtents=function(t){var e,i=t.grid.rowBarContainer,o=t.sectionObjects;this._count=0;for(var r=0,n=o;r<n.length;r++){var s=n[r];s.visible&&((e=this._cells[this._count++]).model=s,s instanceof cs?e.width=i.rowIndicator.width:s instanceof ps?e.width=i.stateBar.width:s instanceof fs&&(e.width=i.checkBar.width))}},e.prototype._prepareCellContent=function(t,e){return this.grid.doc.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=t.grid,i=this._count,o=this._getTableRowCount(t);this.childCount<i;)this.addChild(this._cells[this.childCount]);for(;this.childCount>i;)this.removeLast();for(var r=0;r<i;r++){var n=this.getChild(r),s=n.model,a=s.getSumCell(),l=this._getTableCell(0,r),h=l.firstElementChild,u=this.$_getCellSelector()+" "+s.getSumStyleName();if(this._chromium){l.rowSpan=o;for(var c=1;c<o;c++)this._getTableCell(c,r).style.display="none"}n.setStyleName(l,u),n.text=s.sumText,n.updateCell(e,a,h)}},e.prototype._doRender=function(t){},e.prototype._getTableRowCount=function(t){return this._chromium?t.headerSummaryRows*t.headerSummaryCount:1},e.prototype._getTableRowHeight=function(t,e){if(this._chromium){var i=t.grid.headerSummaryView._rowPoints;return i[e+1]-i[e]}return this.height},e.prototype._getCellCount=function(t){return this._count},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e.prototype.$_getCellSelector=function(){return"rg-sum-cell"},e.CELL_CSS="rg-sum-cell",e}(Ys),Qh=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i._handleVisibility=I.VISIBLE,i._commitBeforeFiltering=!0,i._toast=new nl({visible:!1,message:"Filtering..."}),i._includeParentItem=!0,i._selector=new tu(e),i._automating=new eu(e),i}return o(e,t),e.prototype._doDispose=function(){this._selector=this._selector.dispose(),this._automating=this._automating.dispose(),this._toast=this._toast.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handleVisibility",{get:function(){return this._handleVisibility},set:function(t){t!=this._handleVisibility&&(this._handleVisibility=t,this._refreshOwner())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeFiltering",{get:function(){return this._commitBeforeFiltering},set:function(t){t!=this._commitBeforeFiltering&&(this._commitBeforeFiltering=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"includeParentItem",{get:function(){return this._includeParentItem},set:function(t){t!=this._includeParentItem&&(this._includeParentItem=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selector",{get:function(){return this._selector},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"automating",{get:function(){return this._automating},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toast",{get:function(){return this._toast},enumerable:!0,configurable:!0}),e.prototype.assignFrom=function(e){t.prototype.assignFrom.call(this,e),e.selector&&this._selector.assignFrom(e.selector),e.automating&&this._automating.assignFrom(e.automating),e.toast&&this._toast.assignFrom(e.toast)},e}(Is),tu=function(t){function e(e){var i=t.call(this,e)||this;return i._listHeight=170,i._showButtons=!1,i._partialSearch=!0,i._excludeCheck=!1,i._filterReset=!0,i._filtersResetText="필터 초기화",i._acceptText="확인",i._cancelText="취소",i._allCheckText="(전체 선택)",i._searchedCheckText="(조회 전체 선택)",i._showEmptyFilter=!0,i._emptyFilterText="(값 없음)",i._searchPlaceholder="검색...",i._closeWhenClick=!1,i._maxWidth=0,i._width=0,i._minWidth=0,i._style="rg-filter-selector",i}return o(e,t),Object.defineProperty(e.prototype,"listHeight",{get:function(){return this._listHeight},set:function(t){t!=this._listHeight&&(this._listHeight=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showButtons",{get:function(){return this._showButtons},set:function(t){t!=this._showButtons&&(this._showButtons=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"partialSearch",{get:function(){return this._partialSearch},set:function(t){t!=this._partialSearch&&(this._partialSearch=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"acceptText",{get:function(){return this._acceptText},set:function(t){t!=this._acceptText&&(this._acceptText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelText",{get:function(){return this._cancelText},set:function(t){t!=this._cancelText&&(this._cancelText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allCheckText",{get:function(){return this._allCheckText},set:function(t){t!=this._allCheckText&&(this._allCheckText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showEmptyFilter",{get:function(){return this._showEmptyFilter},set:function(t){t!==this._showEmptyFilter&&(this._showEmptyFilter=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptyFilterText",{get:function(){return this._emptyFilterText},set:function(t){t!=this._emptyFilterText&&(this._emptyFilterText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchPlaceholder",{get:function(){return this._searchPlaceholder},set:function(t){t!=this._searchPlaceholder&&(this._searchPlaceholder=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"excludeCheck",{get:function(){return this._excludeCheck},set:function(t){t!=this._excludeCheck&&(this._excludeCheck=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchedCheckText",{get:function(){return this._searchedCheckText},set:function(t){t!=this._searchedCheckText&&(this._searchedCheckText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"userFilterAddCallback",{get:function(){return this._userFilterAddCallback},set:function(t){t!=this._userFilterAddCallback&&(this._userFilterAddCallback=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this._style},set:function(t){t!=this._style&&(this._style=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"closeWhenClick",{get:function(){return this._closeWhenClick},set:function(t){t!=this._closeWhenClick&&(this._closeWhenClick=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterReset",{get:function(){return this._filterReset},set:function(t){t!=this._filterReset&&(this._filterReset=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filtersResetText",{get:function(){return this._filtersResetText},set:function(t){t!=this._filtersResetText&&(this._filtersResetText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxWidth",{get:function(){return this._maxWidth},set:function(t){this._maxWidth=Math.max(t,0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"width",{get:function(){return this._width},set:function(t){t!==this._width&&(this._width=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minWidth",{get:function(){return this._minWidth},set:function(t){t!==this._minWidth&&(this._minWidth=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textToTitle",{get:function(){return!!this._textToTitle},set:function(t){this._textToTitle=!!t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"searchIgnoreCase",{get:function(){return!!this._searchIgnoreCase},set:function(t){this._searchIgnoreCase=t},enumerable:!0,configurable:!0}),e}(Is),eu=function(t){function e(e){var i=t.call(this,e)||this;return i._dateCategorize=!0,i._numberCategorize=!0,i._textCategorize=!1,i._dateYearFormat="YYYY년도",i._dateQuarterFormat="Q사분기",i._dateMonthFormat="M월",i._dateDayFormat="YYYY-MM-DD",i._lookupDisplay=!1,i}return o(e,t),Object.defineProperty(e.prototype,"dateCategorize",{get:function(){return this._dateCategorize},set:function(t){t!=this._dateCategorize&&(this._dateCategorize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberCategorize",{get:function(){return this._numberCategorize},set:function(t){t!=this._numberCategorize&&(this._numberCategorize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textCategorize",{get:function(){return this._textCategorize},set:function(t){t!=this._textCategorize&&(this._textCategorize=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateCategoryCallback",{get:function(){return this._dateCategoryCallback},set:function(t){t!=this._dateCategoryCallback&&(this._dateCategoryCallback=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberCategoryCallback",{get:function(){return this._dateCategoryCallback},set:function(t){t!=this._numberCategoryCallback&&(this._numberCategoryCallback=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textCategoryCallback",{get:function(){return this._textCategoryCallback},set:function(t){t!=this._textCategoryCallback&&(this._textCategoryCallback=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateYearFormat",{get:function(){return this._dateYearFormat},set:function(t){this._dateYearFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateQuarterFormat",{get:function(){return this._dateQuarterFormat},set:function(t){this._dateQuarterFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateMonthFormat",{get:function(){return this._dateMonthFormat},set:function(t){this._dateMonthFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dateDayFormat",{get:function(){return this._dateDayFormat},set:function(t){this._dateDayFormat=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lookupDisplay",{get:function(){return this._lookupDisplay},set:function(t){this._lookupDisplay=t},enumerable:!0,configurable:!0}),e}(Is);!function(t){t[t.ALL=0]="ALL",t[t.YQ=1]="YQ",t[t.YM=2]="YM",t[t.Y=3]="Y",t[t.QM=4]="QM",t[t.Q=5]="Q",t[t.M=6]="M",t[t.NONE=7]="NONE"}(gl||(gl={}));var iu,ou=function(){function t(t){this._options=t}return t.HasPartial=function(t,e,i){if(i&&(t=t&&t.toLowerCase(),e=e&&e.toLowerCase()),t.indexOf(e)>=0)return!0;for(var o=lt.hangulToChosungAll(t),r=lt.hangulToChosungAll(e),n=-1,s=!1;(n=o.indexOf(r,n+1))>=0;){for(var a=0;a<r.length&&a+n<o.length;a++){var l=lt.hangulToChosung(t[a+n]),h=lt.hangulToChosung(e[a]);if(h.org&&h.org!==l.org||!h.cho||h.cho!==l.cho){s=!1;break}s=!0}if(s)return!0}return!1},t.prototype.dispose=function(){return this._filters=null,this._options=null,null},Object.defineProperty(t.prototype,"searched",{get:function(){return this._searched},enumerable:!0,configurable:!0}),t.prototype.buildItems=function(t,e,i,o){void 0===o&&(o=!0);var n=this._options.selector,s=this._options.automating,a=n.emptyFilterText;this._autoFilter=i;var l=this._filters=i?t.autoFilters:t.filters,h=[];if(i){t.autoFilters.activeCount>0&&(h=this._getActivatedFilters(t.autoFilters)),t.autoFilters.clear(!1);var u=!1,c=void 0;this._valueType=t.valueType;var d;switch(d=e.getDistinctValues(t.dataIndex),this._valueType){case r.DATETIME:c=(u=s.dateCategorize)&&s.dateCategoryCallback?s.dateCategoryCallback(t,d):this._categorizeDateValues(d,u,a);break;case r.NUMBER:c=(u=s.numberCategorize)&&s.numberCategoryCallback?s.numberCategoryCallback(t,d):this._categorizeNumberValues(d,u,a);break;case r.BOOLEAN:c=[];for(var p=!1,_=0;_<d.length;_++){var f=d[_];null!=f?c.push({text:f.toString().toUpperCase(),value:f}):p=!0}p&&n.showEmptyFilter&&c.push({text:a,empty:!0});break;case r.TEXT:c=(u=s.textCategorize)&&s.textCategoryCallback?s.textCategoryCallback(t,d):this._categorizeTextValues(d,u,a)}c&&this._createCategories(c,null,t.valueType,l),this._filters.activateItems(h,!0,o)}},t.prototype.search=function(e){var i=[];function o(t,e){if(i.indexOf(t)<0){for(var o=[],r=t;r;)i.indexOf(r)<0&&o.push(r),r=r.category;Array.prototype.push.apply(i,o.reverse())}}for(var r=0,n=this._filters.count;r<n;r++){var s=this._filters.getItem(r);if(!(s instanceof vo)){var a=this._autoFilter?s.tag:s.toString();t.HasPartial(a,e,this._options.selector.searchIgnoreCase)&&o(s)}}return i},t.prototype._getActivatedFilters=function(t){for(var e=[],i=t.count;i--;){var o=t.getItem(i);o instanceof vo||!o.active||e.push(o.name)}return e},t.prototype._createCategories=function(e,i,o,n){var s=n.getOwner(),a=this._options.automating.lookupDisplay&&s.lookupDisplay;function l(t,e,i){if(null==t||i.empty)return"value is empty";if(e==r.DATETIME){var o=i;return"(year(value) = "+o.year+") and (month(value) = "+(o.month+1)+") and (day(value) = "+o.day+")"}return e==r.BOOLEAN?!!i.value?"value":"not(value)":e==r.NUMBER?"value = "+t:"value = '"+t+"'"}function h(t,e,i){return o===r.TEXT&&t&&!e.empty?s.getLookupLabel(t):i}for(var u=lt.pad,c=0,d=e.length;c<d;c++){var p=e[c],_=p.hasOwnProperty("childs"),f=p.hasOwnProperty("values"),g=void 0;(g=_||f?new vo:new bo(l(p.value,o,p))).text=a?h(p.value,p,p.text):p.text;var y="";if(y=p.empty?t.EMPTY_FILTER:o==r.DATETIME&&_&&i?i.name+" "+p.text:p.text,g.name=y,this._filters.add(g,!1),i&&i.addChild(g),g instanceof vo){if(_)this._createCategories(p.childs,g,o,n);else if(lt.isArray(p.values))for(var m=p.values,b=0,v=m.length;b<v;b++){var w=m[b],C=w+"",x=new bo(l(w,o,p));x.name=C,x.text=a?h(w,p,C):C,x.tag=C,g.addChild(x),this._filters.add(x,!1)}}else if(o!=r.DATETIME||p.empty)g.tag=p.text;else{var I=p;g.tag=I.year+"-"+u(I.month+1,2)+"-"+u(I.day,2)}}},t.prototype._categorizeDateValues=function(t,e,i){if(!t)return null;var o=!1,r=!1,n=!1;for(var s=Ge.getDateProperty,a=0,l=0,h=0,u={year:null,quarter:null,month:null,day:null},c=t.length,d=0;d<c;d++){var p=t[d];if(p){var _=s(p,re.YEAR),f=s(p,re.QUARTER),g=s(p,re.MONTH),y=s(p,re.DAY);u?_!=u.year?(a++,l++,h++):f!=u.quarter||g!=u.month?(l++,h++):y!=u.day&&h++:(a++,l++,h++),u.year=_,u.quarter=f,u.month=g,u.day=y}}function m(t,e){var i=e+"";return t?t.replace("YYYY",i).replace("YY",i.slice(-2)):i}function b(t,e){var i=e+1+"";if(!t)return i;var o=("0"+i).slice(-2);return t.replace("QQ",o).replace("Q",i)}function v(t,e){var i=e+1+"";if(!t)return i;var o=("0"+i).slice(-2);return t.replace("MM",o).replace("M",i)}var w=this._options.automating,C=[],x=[];e&&((o=a>1&&l>6)&&(C.push(re.YEAR),x.push((function(t,e,i){return m(w.dateYearFormat,i)}))),(r=l/a>6)&&(C.push(re.QUARTER),x.push(o?function(t,e,i){return b(w.dateQuarterFormat,i)}:function(t,e,i){return m(w.dateYearFormat,t)+" "+b(w.dateQuarterFormat,i)})),(n=h>9&&l>3)&&(C.push(re.MONTH),x.push(o||r?function(t,e,i){return v(w.dateMonthFormat,i)}:function(t,e,i){return m(w.dateYearFormat,t)+" "+v(w.dateMonthFormat,i)}))),C.push(re.DAY),x.push((function(t,e,i){var o=m(w.dateDayFormat,t);return o=function(t,e){var i=e+"";if(!t)return i;var o=("0"+i).slice(-2);return t.replace("DD",o).replace("D",i)}(o=v(o,e),i)}));var I=[];return function t(e,s,a,l,h){void 0===l&&(l=0),void 0===h&&(h=-1),h=-1==h?e.length-1:h;for(var u,c,d=null,p=l,_=!1,f=function(i){var h=e[i],f=function(t,e,i){for(var o=[],r=0;r<=i;r++)o.push(Ge.getDateProperty(t,e[r]));return o}(h,C,s),y=function(t,e,i){if(!t)return null;switch(e[i]){case re.YEAR:return t.getFullYear().toString();case re.HALF:return t.getFullYear().toString()+Math.floor(t.getMonth()/6).toString();case re.QUARTER:return t.getFullYear().toString()+Math.floor(t.getMonth()/3).toString();case re.MONTH:return t.getFullYear().toString()+t.getMonth().toString();case re.DAY:return t.getFullYear().toString()+t.getMonth()+t.getDate()}}(h,C,s);if(i>l&&y!=d){var m=u[s];if(c)if(s===C.length-1){var b={text:"",year:c.getFullYear(),month:c.getMonth(),day:c.getDate(),value:c};b.text=x[s](b.year,b.month,b.day),a.push(b)}else{var v={text:"",childs:[]},w=function(){v.year=c.getFullYear()},I=function(){v.quarter=Math.floor(c.getMonth()/3)},E=function(){v.month=c.getMonth()},S=o&&r&&n?gl.ALL:o&&r?gl.YQ:o&&n?gl.YM:o?gl.Y:r&&n?gl.QM:r?gl.Q:n?gl.M:gl.NONE;S===gl.ALL?0===s?w():1===s?(w(),I()):2===s&&(w(),I(),E()):S===gl.YQ?0===s?w():1===s&&(w(),I()):S===gl.YM?0===s?w():1===s&&(w(),E()):S===gl.Y?w():S===gl.QM?0===s?I():1===s&&(I(),E()):S===gl.Q?I():S===gl.M&&E(),v.text=x[s](c.getFullYear(),c.getMonth(),m),a.push(v),t.call(g,e,s+1,v.childs,p,i-1)}p=i}i>l&&null==c&&(_=!0),d=y,u=f,c=h},g=this,y=l;y<=h+1;y++)f(y);0==s&&_&&this._options.selector.showEmptyFilter&&a.push({text:i,empty:!0})}.call(this,t,0,I),I},t.prototype._categorizeNumberValues=function(t,e,i){if(!t||t.length<0)return null;var o=t.filter((function(t){return null!=t&&null!=t&&!isNaN(t)})).sort((function(t,e){return t-e})),r=o.length,n=o.length!==t.length,s=1,a=[];if(e&&r>15)for(s=Math.round(r/Math.min(Math.max(4,Math.round(r/5)),8));o.length>0;){var l=o.splice(0,s);a.push({text:l[0]+" ~ "+l[l.length-1],values:l})}else for(var h=0;h<r;h++)a.push({text:o[h]+"",value:o[h]});return n&&this._options.selector.showEmptyFilter&&a.push({text:i,empty:!0}),a},t.prototype._categorizeTextValues=function(t,e,i){if(!t)return null;var o=t.length,r=[],n=!1;if(e&&o>15){for(var s=[{},{},{},{}],a=[0,0,0,0],l=[0,0,0,0],h=0;h<o;h++){if(I=t[h]){var u=(w=I[0]).charCodeAt(0),c=!1,d=void 0;s[d=u>=48&&u<=57?0:u>=65&&u<=90||u>=97&&u<=122?1:u>=1e4?2:3][w]?s[d][w].push(I):(s[d][w]=[I],c=!0),a[d]++,c&&l[d]++}else n=!0}for(var p=Math.min(Math.max(4,Math.round(o/5)),8),_=0;_<4;_++){var f=0==a[_]?0:Math.max(1,Math.min(l[_],Math.round(a[_]/o*p))),g=Math.round(l[_]/f),y=g,m=(Object.keys(s[_]),s[_]),b="",v=[];for(var w in m)y===g&&(b=w),Array.prototype.push.apply(v,s[_][w]),0==--y&&(r.push({text:1==g?w:b+" ~ "+w,values:v}),v=[],y=g)}}else{h=0;for(var C=t.length;h<C;h++){var x=t[h];if(x){var I=x.replace(/\\/g,"\\\\").replace(/\'/g,"\\'");r.push({text:x,value:I})}else n=!0}}return n&&this._options.selector.showEmptyFilter&&r.push({text:i,empty:!0}),r},t.EMPTY_FILTER="$$empty",t}(),ru=function(t){function e(e,i,o){var r=t.call(this)||this;r._opened=!1,r._grid=o,r._gridContainer=o.container._containerDom;var n,s=nt(r._gridContainer),a=r._element=s.createElement("div");return a.style.position="absolute",a.style.display="none",a.className=i.selector.style,a.setAttribute("aria-hidden","true"),r._parent=e._containerDiv.parentElement,(n=e._containerDiv.nextSibling)?r._parent.insertBefore(a,n):r._parent.appendChild(a),r._options=i,r._soptions=i.selector,r._manager=new ou(r._options),r._globalMouseDownHandler=r._globalMouseDownHandler.bind(r),r._globalKeyDownHandler=r._globalKeyDownHandler.bind(r),r._scrollHandler=r._scrollHandler.bind(r),r._wheelHandler=r._wheelHandler.bind(r),r._resetClickHandler=r._resetClickHandler.bind(r),r._searchInputHandler=r._searchInputHandler.bind(r),r._searchKeyDownHandler=r._searchKeyDownHandler.bind(r),r._checkAllClickHandler=r._checkAllClickHandler.bind(r),r._confirmClickHandler=r._confirmClickHandler.bind(r),r._cancelClickHandler=r._cancelClickHandler.bind(r),r._itemClickHandler=r._itemClickHandler.bind(r),r}return o(e,t),Object.defineProperty(e.prototype,"opened",{get:function(){return this._opened},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"column",{get:function(){return this._targetColumn},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return nt(this._element)},enumerable:!0,configurable:!0}),e.prototype._doDispose=function(){this._soptions=null,this._manager=this._manager.dispose(),this._grid=null,this._parent.removeChild(this._element),t.prototype._doDispose.call(this)},e.prototype.show=function(t,e,i){this._opened&&this.hide();var o=this._element,r=this._soptions;this._targetColumn=t,o.className=r.style,o.style.display="block",this._autoFiltering=t.autoFilter,this._build(t,i,this._autoFiltering);var n=e.getBoundingClientRect(),s=this._gridContainer.parentElement.clientWidth,a=r.width,l=o.style,h=0;-1===a?h=r.maxWidth<=0?this._viewWidth:Math.min(r.maxWidth,a,s):a>0&&(h=Math.min(a,s)),h>0&&(l.width=Math.max(h,r.minWidth)+"px");var u=rt(this._gridContainer),c=o.getBoundingClientRect(),d=o.offsetParent instanceof u.HTMLBodyElement,p=d?{left:0,top:0}:o.offsetParent.getBoundingClientRect(),_=c.left-p.left+(n.right-c.right)+(d?u.scrollX||u.pageXOffset:o.offsetParent.scrollLeft),f=n.bottom-p.top+(d?u.scrollY||u.pageYOffset:o.offsetParent.scrollTop);l.left=Math.max(0,_)+"px",l.top=f+"px",u.addEventListener("mousedown",this._globalMouseDownHandler,!1),u.addEventListener("keydown",this._globalKeyDownHandler,!1),this._opened=!0},e.prototype.hide=function(){if(this._opened){var t=rt(this._gridContainer);t.removeEventListener("mousedown",this._globalMouseDownHandler,!1),t.removeEventListener("keydown",this._globalKeyDownHandler,!1),this._finalize(),this._element.style.display="none",this._opened=!1}},e.prototype._createItemInfo=function(t){this._items=[],this._roots=[],this._visbleItemMap={};for(var e=t instanceof Co?t.count:t.length,i=[],o=0;o<e;o++){var r=t instanceof Co?t.getItem(o):t[o],n=r instanceof vo,s=r.level,a=void 0;if(a=r instanceof vo?r.activeState:r.active?Zi.ACTIVE:Zi.UNACTIVE,this._autoFiltering||r.visible){var l={text:r.toString(),state:a,index:o,level:s,filter:r};if(n&&(l.expanded=!1),i[s]=l,s>0){var h=i[s-1];l.parent=h,h.childs||(h.childs=[]),h.childs.push(l)}this._items.push(l),0==s&&this._roots.push(l),this._visbleItemMap[o]=l}}this._visibleAllCount=this._items.length,this._visibleCount=this._calcVisibleItems(),i=[],this._dirties=[]},e.prototype._build=function(t,e,i){var o=this._soptions,r=this._applyBatch=o.showButtons,n=this.doc;this._manager.buildItems(t,e,i,!1),this._filters=i?t.autoFilters:t.filters,this._createItemInfo(this._filters),this._headerDiv=n.createElement("div"),this._headerDiv.className="rg-filter-header",o.filterReset&&this._buildReset(this._headerDiv),this._soptions.partialSearch&&this._buildSearchbox(this._headerDiv),this._buildSelectAllBox(),this._element.appendChild(this._headerDiv);var s=this._viewportDiv=n.createElement("div");s.className="rg-filter-list-viewport",s.style.height=o.listHeight+"px",s.addEventListener("scroll",this._scrollHandler),s.addEventListener("wheel",this._wheelHandler),this._listDiv=n.createElement("div"),this._listDiv.className="rg-filter-list",this._listDiv.style.position="relative",s.appendChild(this._listDiv),this._element.appendChild(s),this._calcAllChecked(),this._calcluateStates(),this._buildItems(),r&&this._buildFooter(this._element),this._searched=!1},e.prototype._finalize=function(){var t;this._roots=[],this._visbleItemMap={};for(var e=this._items.length;e--;)this._items[e].filter=null,this._items[e].parent=null,this._items[e].childs=null,this._items[e]=null;this._items=[],(t=this._resetDiv)&&(t.removeEventListener("click",this._resetClickHandler),this._headerDiv.removeChild(t),this._resetDiv=null),(t=this._searchDiv)&&(this._searchInput.removeEventListener("input",this._searchInputHandler),this._searchInput.removeEventListener("keydown",this._searchKeyDownHandler),this._headerDiv.removeChild(this._searchDiv),this._searchInput=null,this._searchDiv=null),this._selectAllDiv.removeEventListener("click",this._checkAllClickHandler),this._headerDiv.removeChild(this._selectAllDiv),this._element.removeChild(this._headerDiv),this._headerDiv=null,this._footerDiv&&(this._confirmButton.removeEventListener("click",this._confirmClickHandler),this._cancelButton.removeEventListener("click",this._cancelClickHandler),this._element.removeChild(this._footerDiv),this._confirmButton=null,this._cancelButton=null,this._footerDiv=null);for(e=this._itemElements.length;e--;)this._removeItem(e);this._itemElements=[];var i=this._viewportDiv;i.removeEventListener("scroll",this._scrollHandler),i.removeEventListener("wheel",this._wheelHandler),this._element.removeChild(i),this._listDiv=null,this._viewportDiv=null},e.prototype._buildSelectAllBox=function(){var t=this._soptions.allCheckText;this._selectAllDiv=this._buildItemElement(t,0,this._allCheck,"rg-filter-select-all"),this._selectAllCheck=this._selectAllDiv.childNodes[e.INDEX_CHECKBOX],this._headerDiv.appendChild(this._selectAllDiv),this._selectAllDiv.addEventListener("click",this._checkAllClickHandler)},e.prototype._buildReset=function(t){var e=this.doc,i=this._resetDiv=e.createElement("div");i.className="rg-filter-reset",i.appendChild(e.createTextNode(this._soptions.filtersResetText)),i.addEventListener("click",this._resetClickHandler),t.appendChild(i)},e.prototype._buildItems=function(){for(var t="temp임시",e=lt.getTextLength(t),i=0,o=this._filters.count;i<o;i++){var r=this._filters.getItem(i).toString();e<lt.getTextLength(r)&&(e=lt.getTextLength(r),t=r)}var n=this._buildItemElement(t,0,void 0,"rg-filter-item");this._element.style.width="unset",this._listDiv.appendChild(n),this._itemHeight=Math.floor(n.getBoundingClientRect().height),this._viewWidth=Math.floor(n.getBoundingClientRect().width)+10,this._listDiv.removeChild(n),this._element.style.width="";var s=this._visibleCount,a=this._viewportDiv.offsetHeight;this._pageCount=Math.min(this._items.length,Math.ceil(a/this._itemHeight));var l=this._pageCount;this._listDiv.style.height=s*this._itemHeight+"px";var h=s<l?s:l;this._itemElements=[];for(i=0;i<h;i++){var u=this._visibleItems[i];this._itemElements.push(this._buildItem(u,i))}},e.prototype._buildSearchbox=function(t){var e=this.doc,i=this._searchDiv=e.createElement("div");i.className="rg-filter-searchbox",this._searchInput=this.doc.createElement("input"),this._searchInput.type="text";var o=this._soptions.searchPlaceholder;this._searchInput.placeholder=o,this._searchInput.className="rg-filter-search-input",this._searchInput.addEventListener("input",this._searchInputHandler),this._searchInput.addEventListener("keydown",this._searchKeyDownHandler),i.appendChild(this._searchInput),t.appendChild(i)},e.prototype._buildFooter=function(t){var e=this.doc;this._footerDiv=e.createElement("div"),this._footerDiv.className="rg-filter-button";var i=this._confirmButton=e.createElement("input");i.type="button",i.className="rg-filter-accept",i.value=this._soptions.acceptText,i.addEventListener("click",this._confirmClickHandler),this._footerDiv.appendChild(i);var o=this._cancelButton=e.createElement("input");o.type="button",o.className="rg-filter-cancel",o.value=this._soptions.cancelText,o.addEventListener("click",this._cancelClickHandler),this._footerDiv.appendChild(o),t.appendChild(this._footerDiv)},e.prototype._buildItem=function(t,e){var i=this._items,o=this._listDiv,r=i[t],n=r.expanded,s=this._buildItemElement(r.text,r.level,r.state,"rg-filter-item",n);return s.filter_id=t+"",s.style.position="absolute",s.style.height=this._itemHeight+"px",s.style.top=e*this._itemHeight+"px",s.addEventListener("click",this._itemClickHandler),o.appendChild(s),s},e.prototype._removeItem=function(t){var e=this._itemElements[t];e.removeEventListener("click",this._itemClickHandler),this._listDiv.removeChild(e),this._itemElements[t]=null,this._itemElements.splice(t,1)},e.prototype._buildItemElement=function(t,e,i,o,r){var n=this.doc,s=n.createElement("div");o&&(s.className=o),this._soptions.textToTitle&&t&&(s.title=t);var a=n.createElement("div");a.className="rg-filter-item-indent-"+e,s.appendChild(a);var l=n.createElement("div"),h="rg-filter-expander";void 0!==r&&(h+=" "+(r?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),l.className=h,s.appendChild(l);var u=n.createElement("input");u.type="checkbox",u.className="rg-filter-checkbox",this._setCheckState(u,i),s.appendChild(u);var c=n.createElement("div");return c.className="rg-filter-text",c.style.position="relative",c.style.display="inline",c.style.pointerEvents="none",c.innerHTML=lt.htmlEncode(t),s.appendChild(c),s},e.prototype._calculateState=function(t){for(var e=void 0,i=0,o=t.length;i<o;i++){var r=t[i];if(e&&r.state!=e)return Zi.INDETERMINATE;e=r.state}return e||Zi.UNACTIVE},e.prototype._calcluateStates=function(){for(var t=this._items.length;t--;){var e=this._items[t];e.childs&&(e.state=this._calculateState(e.childs))}},e.prototype._calcVisibleItems=function(){function t(t){for(var e=t.parent;e;){if(!e.expanded)return!1;e=e.parent}return!0}var e=0;this._visibleItems=[];for(var i=0,o=this._items.length;i<o;i++){var r=this._items[i];r.parent&&!t(r)||(e++,this._visibleItems.push(i))}return e},e.prototype._setCheckState=function(t,e){t.checked=e==Zi.ACTIVE,t.indeterminate=e==Zi.INDETERMINATE},e.prototype._calcAllChecked=function(){this._allCheck=this._calculateState(this._roots),this._setCheckState(this._selectAllCheck,this._allCheck)},e.prototype._redrawCheck=function(){for(var t=this._itemElements.length;t--;){var i=this._itemElements[t],o=parseInt(i.filter_id),r=this._visbleItemMap[o],n=i.childNodes[e.INDEX_CHECKBOX];this._setCheckState(n,r.state)}},e.prototype._doRedraw=function(t){void 0===t&&(t=0);var e=this._itemElements,i=this._pageCount,o=Math.min(i,this._visibleCount),r=Math.max(0,this._visibleItems.indexOf(t));r+i>this._visibleCount&&(r=Math.max(0,this._visibleCount-i));for(var n=0,s=0;s<o;s++){var a=this._visibleItems[s+r];!e[s]&&s<o&&e.push(this._buildItem(a,s)),this._changeItemModel(e[s],a),n++}for(s=e.length-1;s>n-1;s--)this._removeItem(s);var l=this._visibleCount*this._itemHeight;this._listDiv.style.height=l+"px",this._viewportDiv.scrollTop+this._viewportDiv.offsetHeight>l&&(this._viewportDiv.scrollTop=l-this._viewportDiv.offsetHeight)},e.prototype._changeItemModel=function(t,e){var i=rt(t),o=this._items[e];t.filter_id=e+"",this._soptions.textToTitle&&o.text&&(t.title=o.text);for(var r=t.childNodes.length;r--;){var n=t.childNodes.item(r);if(n instanceof i.HTMLElement){var s=n.className;if(s)if(s.indexOf("rg-filter-item-indent-")>-1)n.className="rg-filter-item-indent-"+o.level;else if(s.indexOf("rg-filter-expander")>-1){var a="rg-filter-expander";void 0!==o.expanded&&(a+=" "+(o.expanded?"rg-filter-expander-expanded":"rg-filter-expander-collapsed")),n.className=a}else if(n instanceof i.HTMLInputElement&&"rg-filter-checkbox"==s)this._setCheckState(n,o.state);else if(s.indexOf("rg-filter-text")>=0){var l=lt.htmlEncode(o.text),h=this._searchInput.value,u="g"+(this._soptions.searchIgnoreCase?"i":"");l=h?l.replace(new RegExp(h,u),(function(t,e,i){return'<span class="rg-filter-search-text">'+t+"</span>"})):l,n.innerHTML="<span>"+l+"</span>"}}}},e.prototype._doScroll=function(){for(var t=this._itemElements,e=Math.max(0,Math.floor(Math.min(this._viewportDiv.scrollTop,this._listDiv.offsetHeight-this._viewportDiv.offsetHeight)/this._itemHeight)),i=0,o=t.length;i<o;i++){var r=this._visibleItems[e+i];this._changeItemModel(t[i],r),t[i].style.top=(e+i)*this._itemHeight+"px"}},e.prototype._doSearch=function(t){t?this._createItemInfo(this._manager.search(t)):this._createItemInfo(this._filters),this._selectAllDiv.childNodes[e.INDEX_TEXT].textContent=t?this._soptions.searchedCheckText:this._soptions.allCheckText,this._doRedraw(),this._searched=!!t},e.prototype._resetActive=function(){for(var t=this._items.length;t--;){this._items[t].state=Zi.UNACTIVE}this._filters.activateAll(!1),this._redrawCheck()},e.prototype._activateAll=function(t){var e=!this._applyBatch;if(e&&!this._searched){this._filters.activateAll(t);for(var i=this._items.length;i--;){(o=this._items[i]).childs||(o.state=t?Zi.ACTIVE:Zi.UNACTIVE)}}else for(i=this._items.length;i--;){var o;(o=this._items[i]).childs||(o.state=t?Zi.ACTIVE:Zi.UNACTIVE,e?o.filter.active=t:this._dirties.push(o))}e&&this._searched&&this._doFilterApply(),this._calcluateStates();var r=this._itemElements[0].filter_id,n=Math.max(0,this._visibleItems.indexOf(parseInt(r)));this._doRedraw(n)},e.prototype._doCheck=function(t,e){var i=e?Zi.ACTIVE:Zi.UNACTIVE,o=this._applyBatch||void 0!==t.childs,r=this._applyBatch?this._dirties:[];if(function t(i,o,r,n){if(i.state!=o)if(i.state=o,i.childs)for(var s=i.childs.length;s--;)t(i.childs[s],o,r,n);else r?n.push(i):i.filter.active=e}(t,i,o,r),o&&!this._applyBatch){for(var n=[],s=0,a=r.length;s<a;s++)n.push(r[s].filter.name);n.length>0&&this._filters.activateItems(n,e)}for(var l=t.parent;l;)l.state=this._calculateState(l.childs),l=l.parent;(t.parent||t.childs)&&this._redrawCheck(),this._calcAllChecked()},e.prototype._doFilterApply=function(){for(var t=this._dirties.length;t--;){var e=this._dirties[t];e.filter.active=e.state==Zi.ACTIVE}this._dirties=[]},e.prototype._doExpand=function(t,e){t.expanded=e,this._visibleCount=this._calcVisibleItems();var i=parseInt(this._itemElements[0].filter_id);this._doRedraw(i)},e.prototype._globalMouseDownHandler=function(t){for(var e=t.target;e;){if(e===this._element)return;e=e.parentElement}this.hide()},e.prototype._globalKeyDownHandler=function(t){27==t.keyCode&&this.hide()},e.prototype._wheelHandler=function(t){var e=t.deltaY;0!==e&&(e=(e>0?2:-2)*this._itemHeight,this._viewportDiv.scrollTop+=e,this._doScroll()),t.preventDefault()},e.prototype._scrollHandler=function(t){this._doScroll()},e.prototype._searchInputHandler=function(t){var e=t.target;e instanceof rt(e).HTMLInputElement&&this._doSearch(e.value)},e.prototype._searchKeyDownHandler=function(t){13==t.keyCode&&this._doSearch(this._searchInput.value)},e.prototype._resetClickHandler=function(){var t=this._grid.getFilteredColumns(),e=t.length,i=this._selectAllCheck;this._setCheckState(i,Zi.UNACTIVE),this._resetActive(),this._searched&&this._doSearch(null);for(var o=0;o<e;o++)t[o].activateAllFilters(!1);this._soptions.closeWhenClick&&this.hide()},e.prototype._checkAllClickHandler=function(t){"rg-filter-checkbox"==t.target.className||(this._selectAllCheck.checked=!this._selectAllCheck.indeterminate||!this._selectAllCheck.checked);var e=this._selectAllCheck.checked;this._activateAll(e),this._allCheck=e?Zi.ACTIVE:Zi.UNACTIVE,!this._applyBatch&&this._soptions.closeWhenClick&&this.hide()},e.prototype._itemClickHandler=function(t){var i=t.target,o=i.className.indexOf("rg-filter-expander")>-1,r="rg-filter-checkbox"==i.className,n=i;"rg-filter-item"!==i.className&&(n=n.parentElement);var s=parseInt(n.filter_id),a=this._visbleItemMap[s];if(o)void 0!==a.expanded&&this._doExpand(a,!a.expanded);else{var l=void 0;r?l=i:(l=n.children.item(e.INDEX_CHECKBOX)).checked=!l.checked,this._doCheck(a,l.checked)}},e.prototype._confirmClickHandler=function(){this._doFilterApply(),this.hide()},e.prototype._cancelClickHandler=function(){this.hide()},e.INDEX_PADDING=0,e.INDEX_EXPANDER=1,e.INDEX_CHECKBOX=2,e.INDEX_TEXT=3,e}(se),nu=function(){function t(){}return t.decode=function(e){for(var i=t.CHARACTERS,o=t.SUFFIX,r=e.split(""),n=[],s=r.length;r[--s]==o;);for(var a=0;a<s;){var l=i.indexOf(r[a++])<<18;a<=s&&(l|=i.indexOf(r[a++])<<12),a<=s&&(l|=i.indexOf(r[a++])<<6),a<=s&&(l|=i.indexOf(r[a++])),n.push(l>>>16&255),n.push(l>>>8&255),n.push(255&l)}for(;0==n[n.length-1];)n.pop();return n},t.SUFFIX="=",t.CHARACTERS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t}(),su=function(){function t(){}return t.union=function(t,e){var i=e.s3[255&t];t>>=8;var o=e.s2[255&t];t>>=8;var r=e.s1[255&t];t>>=8;var n=e.s0[255&t],s=(n>>16)+(r>>16)+((65535&n)+(65535&r)>>16)<<16|(65535&n)+(65535&r)&65535;return((s=(s>>16^o>>16)<<16|65535&(65535&s^65535&o))>>16)+(i>>16)+((65535&s)+(65535&i)>>16)<<16|(65535&s)+(65535&i)&65535},t.xor=function(t,e){return(t>>16^e>>16)<<16|65535&(65535&t^65535&e)},t._encryptBlock=function(e,i){var o=e.left,r=e.right,n=t.xor,s=t.union;o=n(o,i.p[0]),r=n(r,n(s(o,i),i.p[1])),o=n(o,n(s(r,i),i.p[2])),r=n(r,n(s(o,i),i.p[3])),o=n(o,n(s(r,i),i.p[4])),r=n(r,n(s(o,i),i.p[5])),o=n(o,n(s(r,i),i.p[6])),r=n(r,n(s(o,i),i.p[7])),o=n(o,n(s(r,i),i.p[8])),r=n(r,n(s(o,i),i.p[9])),o=n(o,n(s(r,i),i.p[10])),r=n(r,n(s(o,i),i.p[11])),o=n(o,n(s(r,i),i.p[12])),r=n(r,n(s(o,i),i.p[13])),o=n(o,n(s(r,i),i.p[14])),r=n(r,n(s(o,i),i.p[15])),o=n(o,n(s(r,i),i.p[16])),e.right=o,e.left=n(r,i.p[17])},t._decryptBlock=function(e,i){var o=e.left,r=e.right,n=t.xor,s=t.union;o=n(o,i.p[17]),r=n(r,n(s(o,i),i.p[16])),o=n(o,n(s(r,i),i.p[15])),r=n(r,n(s(o,i),i.p[14])),o=n(o,n(s(r,i),i.p[13])),r=n(r,n(s(o,i),i.p[12])),o=n(o,n(s(r,i),i.p[11])),r=n(r,n(s(o,i),i.p[10])),o=n(o,n(s(r,i),i.p[9])),r=n(r,n(s(o,i),i.p[8])),o=n(o,n(s(r,i),i.p[7])),r=n(r,n(s(o,i),i.p[6])),o=n(o,n(s(r,i),i.p[5])),r=n(r,n(s(o,i),i.p[4])),o=n(o,n(s(r,i),i.p[3])),r=n(r,n(s(o,i),i.p[2])),o=n(o,n(s(r,i),i.p[1])),e.right=o,e.left=n(r,i.p[0])},t._init=function(e){var i,o,r,n=e.split("").map((function(t){return 255&t.charCodeAt(0)})),s=t.kb,a=t._encryptBlock,l=0,h=0,u={left:0,right:0},c={p:s.p.slice(0).map((function(e){var i,o=n.length;for(i=0;i<4;i++)h=h*t.POW8|n[l++%o];return(e>>16^h>>16)<<16|65535&(65535&e^65535&h)})),s0:s.s0.slice(0),s1:s.s1.slice(0),s2:s.s2.slice(0),s3:s.s3.slice(0)};for(i=0,r=c.p.length;i<r;)a(u,c),c.p[i++]=u.left,c.p[i++]=u.right;for(i=0;i<4;i++)for(o=0,r=c["s"+i].length;o<r;)a(u,c),c["s"+i][o++]=u.left,c["s"+i][o++]=u.right;return c},t.decrypt=function(e,i){for(var o=t._decryptBlock,r=t._init(i),n=[],s=nu.decode(e),a=s.length>>3,l=0,h={left:null,right:null},u=0;u<a;u++){h.left=s[l]*t.POW24|s[l+1]*t.POW16|s[l+2]*t.POW8|s[l+3],h.right=s[l+4]*t.POW24|s[l+5]*t.POW16|s[l+6]*t.POW8|s[l+7],o(h,r);var c=h.left,d=h.right;n.push(c>>24&255),n.push(c>>16&255),n.push(c>>8&255),n.push(255&c),n.push(d>>24&255),n.push(d>>16&255),n.push(d>>8&255),n.push(255&d),l+=8}if(n[n.length-1]==n[n.length-2]||1==n[n.length-1]){var p=n[n.length-1];n.splice(n.length-p,p)}return n.map((function(t){return String.fromCharCode(t)})).join("")},t.POW2=Math.pow(2,2),t.POW3=Math.pow(2,3),t.POW4=Math.pow(2,4),t.POW8=Math.pow(2,8),t.POW16=Math.pow(2,16),t.POW24=Math.pow(2,24),t.kb={p:[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],s0:[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],s1:[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],s2:[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],s3:[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462],k:[202,218,204,100]},t}(),au=function(){function t(){}return t.eqaulsUpperDomain=function(t,e){return t==e||0===t.indexOf("*")&&(t=t.substr(1,t.length-1),e.substr(e.indexOf(t),t.length)==t)},t._getLDKey=function(t){for(var e="",i=0,o=t.length;i<o;i++)e+=String.fromCharCode(t[i]>>1);return e},t.includedDomains=function(t,e,i){for(var o=t.split(","),r=0,n=o.length;r<n;r++){var s=o[r];if(this.eqaulsUpperDomain(s,e))return!0;if(i&&s&&"*"===s[0]&&"*."!==s.substr(0,1)){var a=new RegExp("^/"+s.substr(1)+"/");if(i&&a.exec(i))return!0}}return!1},t.decrypt=function(t){for(var e={},i=su.decrypt(t,"dkdl"+this._getLDKey(su.kb.k)).split(";"),o=0,r=i.length;o<r;o++){var n=i[o].split("="),s=n[0],a=n[1];a&&a.length>0&&(e[s]=a)}return e},t}(),lu=function(t){function e(e){var i=t.call(this,"rowGroupHeaderCell")||this;return i._rowGroup=e,i}return o(e,t),e.prototype._doDispose=function(){this._rowGroup=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return this.item instanceof ro?this._rowGroup.getHeaderText(this.item):""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),e}(ko),hu=function(t){function e(e){var i=t.call(this,"rowGroupFooterCell")||this;return i._footerIndex=0,i._value=NaN,i._rowGroup=e,i}return o(e,t),e.$_getValue=function(t,e){if(e&&e.dataIndex>=0){var i=e.grid,o=t.parent,r=o.getFooterIndex(t),n=e.groupFooters.get(r);if(n&&n.expression){var s=i.rowGroupSummaryRuntime;return s.setColumn(e,e.grid.summarizer),s.setItem(o),n.evaluate(s)}if(n&&n.valueCallback)return(0,n.valueCallback)(i.handler,e,r,o,null);if(o&&e&&i.isGroupedColumn(e)){var a=i.rowGroup.getFooterText(o);return null==a?void 0:a}}else;},e.getValue=function(t,i){try{return e.$_getValue(t,i)}catch(t){return ko.ERROR}},e.$_displayText=function(t,e,i,o){var n="";if(void 0!==i&&e){if(e.valueType==r.DATETIME){var s=void 0;i instanceof Date&&(s=o.datetimeWriter)?n=s.getText(i):i&&(n=i)}else{var a=void 0,l=parseFloat(i);!isNaN(l)&&(a=o.numberFormatter)?n=a.getText(l):isNaN(i)||null==i||(n=i+"")}if(n){var h=o.prefix;h&&(n=h+n),(h=o.suffix)&&(n+=h)}}if(!n){var u=e.grid,c=lt.cast(t.parent,ro),d=u.rowGroup,p=void 0;if(c&&e&&u.isGroupedColumn(e)&&(p=d.getFooterText(c)))n=p;else if(e){var _=e.groupFooters.get(c.getFooterIndex(t));_&&(n=_.text)}}return n||""},e.prototype._doDispose=function(){this._rowGroup=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"footerIndex",{get:function(){return this._footerIndex},enumerable:!0,configurable:!0}),e.prototype.calculate=function(t){this._value=NaN,this._error=null;try{this._value=e.$_getValue(this.index.item||t,this.index.dataColumn)}catch(t){this._error=t,this._errorDetail=t,lt.log("FOOTER ERROR: "+t)}},e.prototype.getDisplayText=function(t){return this._error?ko.ERROR:e.$_displayText(this.index.item,this.index.dataColumn,this._value,t)},e.prototype.getSummary=function(){return this._getSummary(this.valueColumn,this._footerIndex)},e.prototype.getTemplate=function(t){var e=this._getSummary(this.valueColumn,this._footerIndex);return e?e.realizeGroupSummary(this,t):void 0},Object.defineProperty(e.prototype,"value",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this.index.item.level},enumerable:!0,configurable:!0}),e.prototype.setIndex=function(e){t.prototype.setIndex.call(this,e),this._footerIndex=e.item.$_footerIndex},e.prototype._getSummary=function(t,e){return t.groupFooters.get(e)},e}(ko),uu=function(t){function e(){var e=t.call(this,"rowGroupBarCell")||this;return e._level=0,e}return o(e,t),Object.defineProperty(e.prototype,"level",{get:function(){return this.item.level},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"getText",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){},enumerable:!0,configurable:!0}),e}(ko),cu=function(t){function e(e){var i=t.call(this)||this;return i._index=0,i.$_owner=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return this._styleName},set:function(t){t!=this._styleName&&(this._styleName=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exportStyleName",{get:function(){return this._exportStyleName},set:function(t){this._exportStyleName=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleCallback",{get:function(){return this._styleCallback},set:function(t){t!==this._styleCallback&&(this._styleCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellStyleCallback",{get:function(){return this._cellStyleCallback},set:function(t){t!==this._cellStyleCallback&&(this._cellStyleCallback=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._changed=function(){this.$_owner&&this.$_owner.$_itemChanged(this)},e}(ft),du=function(t){function e(e){var i=t.call(this)||this;return i._items=[],i._owner=e,i._items.push(new cu(i)),i}return o(e,t),e.prototype._doDispose=function(){for(var e=0,i=this._items;e<i.length;e++){i[e].dispose()}this._items=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},set:function(t){t=Math.max(t,1);var e=this._items;if(t!==e.length){for(var i=void 0;e.length<t;)(i=new cu(this))._index=e.length,e.push(i);for(;e.length>t;){e.pop().dispose()}this.$_itemChanged(null)}},enumerable:!0,configurable:!0}),e.prototype.get=function(t){return this._items[t]},e.prototype.assignFrom=function(t){var e=this._items;if(lt.isArray(t)){for(var i=t.length;e.length<i;)e.push(null);i>0&&e.length>i&&(e.length=i),i>0&&(e[0].assignFrom(t[0]),e[0]._index=0);for(var o=1;o<i;o++){t[o]?(e[o]||(e[o]=new cu(this)),e[o].assignFrom(t[o]),e[o]._index=o):e[o]=null}}else e[0].assignFrom(t),e[0]._index=0;this.$_itemChanged(null)},e.prototype.$_itemChanged=function(t){this._owner&&this._owner.rowGroupFooterChanged(t)},e}(ft),pu=function(t){function e(e){var i=t.call(this,e)||this;return i._mergeMode=!1,i._sorting=!0,i._expandedAdornments=u.BOTH,i._collapsedAdornments=u.HEADER,i._indentVisible=!0,i._levelIndent=20,i._mergeHeaderIndenting=!0,i._mergeFooterIndenting=!0,i._headerStatement="${groupField}: ${groupValue} - ${rowCount} rows",i._mergeExpanderVisibility=T.DEFAULT,i._headerCell=new lu(i),i._footerCell=new hu(i),i._barCell=new uu,i._headerStatementExpr=new yo(i._headerStatement),i._footerStatementExpr=new yo,i._statementRuntime=new Do,i._footerFormatter={numberFormatter:null,datetimeWriter:null,booleanFormatter:null,textFormatter:null,prefix:"",suffix:""},i._footers=new du(i),i}return o(e,t),e.prototype._doDispose=function(){this._footers=this._footers.dispose(),t.prototype._doDispose.call(this)},e.prototype.rowGroupFooterChanged=function(t){this._counterAware&&this._counterAware.groupfFooterCounterChanged(this)},e.prototype.getGroupFooterCount=function(t){return this._footers.count},e.prototype.setCounterAware=function(t){this._counterAware=t},Object.defineProperty(e.prototype,"mergeMode",{get:function(){return this._mergeMode},set:function(t){t!=this._mergeMode&&(this._mergeMode=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorting",{get:function(){return this._sorting},set:function(t){t!=this._sorting&&(this._sorting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandedAdornments",{get:function(){return this._expandedAdornments},set:function(t){t!=this._expandedAdornments&&(this._expandedAdornments=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapsedAdornments",{get:function(){return this._collapsedAdornments},set:function(t){t!=this._collapsedAdornments&&(this._collapsedAdornments=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"createFooterCallback",{get:function(){return this._createFooterCallback},set:function(t){t!==this._createFooterCallback&&(this._createFooterCallback=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indentVisible",{get:function(){return this._indentVisible},set:function(t){t!=this._indentVisible&&(this._indentVisible=t,this._grid&&this._grid.$_rowGroupAdornmentsChanged(this),this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"levelIndent",{get:function(){return this._levelIndent},set:function(t){(t=Math.max(0,t))!=this._levelIndent&&(this._levelIndent=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergeHeaderIndenting",{get:function(){return this._mergeHeaderIndenting},set:function(t){t!=this._mergeHeaderIndenting&&(this._mergeHeaderIndenting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergeFooterIndenting",{get:function(){return this._mergeFooterIndenting},set:function(t){t!=this._mergeFooterIndenting&&(this._mergeFooterIndenting=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footers",{get:function(){return this._footers},enumerable:!0,configurable:!0}),e.prototype.setFooters=function(t){this._footers.assignFrom(t)},Object.defineProperty(e.prototype,"headerStatement",{get:function(){return this._headerStatement},set:function(t){t!==this._headerStatement&&(this._headerStatement=t,this._headerStatementExpr.source=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerCallback",{get:function(){return this._headerCallback},set:function(t){this._headerCallback=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerStatement",{get:function(){return this._footerStatement},set:function(t){t!=this._footerStatement&&(this._footerStatement=t,this._footerStatementExpr.source=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergeExpanderVisibility",{get:function(){return this._mergeExpanderVisibility},set:function(t){t!=this._mergeExpanderVisibility&&(this._mergeExpanderVisibility=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expanderVisibleCallback",{get:function(){return this._expanderVisibleCallback},set:function(t){this._expanderVisibleCallback=t,this._changed()},enumerable:!0,configurable:!0}),e.prototype.getHeaderCell=function(t){return this._headerCell.setIndex(Hn.temp(this.owner,t.index)),this._headerCell},e.prototype.getFooterCell=function(t){var e=t.item;return this._footerCell.setIndex(t),this._footerCell.calculate(e),this._footerCell},e.prototype.getFooterStyleName=function(t){var e=this._footers.get(t.$_footerIndex),i="rg-rowgroup-footer rg-rowgroup-footer-level-"+String(t.parent.level),o=e.styleName,r=e.styleCallback;return o&&(i+=" "+o),r&&(o=r(this._grid.handler,t.index,e.index))&&(i+=" "+o),i},e.prototype.getFooterCellStyle=function(t,i,o){void 0===o&&(o=!0);var r=t.footerIndex,n=this._footers.get(r).cellStyleCallback,s=t.index.column.groupFooters.get(t.footerIndex);if(n){var a=n(this._grid.handler,t);i.assign(a)}if(s){var l=s.styleCallback;if(l){var h=l(this._grid.handler,t);i.assign(h)}}return!i.styleName&&s&&(i.styleName=s.styleName),o&&(i.styleName?i.styleName=e.FOOTER_CELL_STYLE+" "+i.styleName:i.styleName=e.FOOTER_CELL_STYLE),i},e.prototype.getFooterCellFormatters=function(t,e){return e&&t?(e.numberFormatter=e.numberFormatter||t.numberFormatter,e.datetimeWriter=e.datetimeWriter||t.datetimeWriter,e.booleanFormatter=e.booleanFormatter||t.boolFormatter,e.textFormatter=e.textFormatter||t.textFormatter,e.prefix=e.prefix||t.prefix,e.suffix=e.suffix||t.suffix):t&&((e=this._footerFormatter).numberFormatter=t.numberFormatter,e.datetimeWriter=t.datetimeWriter,e.booleanFormatter=t.boolFormatter,e.textFormatter=t.textFormatter,e.prefix=t.prefix,e.suffix=t.suffix),e},e.prototype.getBarCell=function(t){return this._barCell.setIndex(t),this._barCell},e.prototype.getHeaderText=function(t){return!this._headerStatement&&this._headerCallback?this._headerCallback(this.owner.handler,t):(this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._headerStatementExpr.evaluate(this._statementRuntime))},e.prototype.getFooterText=function(t){return this._footerStatementExpr?(this._statementRuntime.setGrid(this.owner),this._statementRuntime.setGroup(t),this._footerStatementExpr.evaluate(this._statementRuntime)):null},e.prototype._doChanged=function(){this.owner.$_rowGroupChanged(this)},e.prototype.$_isMultiLine=function(t){var e=t.visible?1:0,i=t.footerCount;if((e+=Math.max(t.descendantCount,t.count)-i)>1)return!0;for(var o=0;o<i;o++)if(t.getFooter(o).visible&&++e>1)return!0;return!1},e.prototype.$_isMergeExpanderVisible=function(t){if(this._mergeMode){if(!t.expanded)return!0;if(this._expanderVisibleCallback){var e=this._expanderVisibleCallback.call(this._grid,this._grid.handler,t);return null==e||e}switch(this._mergeExpanderVisibility){case T.NONE:return!1;case T.ALWAYS:return!0;default:return this.$_isMultiLine(t)}}},e.FOOTER_CELL_STYLE="rg-rowgroup-footer-cell",e.FOOTER_CELL_RENDERER="rg-rowgroup-footer-renderer",e}(Eo),_u=function(t){function e(e,i){var o=t.call(this,e.doc,"mobileSelectionHandle")||this;return o._dir=i,o._owner=e,o}return o(e,t),e.prototype._doDispose=function(){this._owner=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"selectionMask",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dir",{get:function(){return this._dir},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return e.STYLE_NAME+this._dir+"-handle"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.background="red"},e.prototype._doDraw=function(){},e.STYLE_NAME="rg-selection-handle",e}(Os),fu=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype._doDispose=function(){},e.prototype.getSelectHandle=function(t){for(var e in this._views){var i=this._views[e];if(i.leftHandle._dom===t)return i.leftHandle;if(i.topHandle._dom===t)return i.topHandle;if(i.bottomHandle._dom===t)return i.bottomHandle;if(i.rightHandle._dom===t)return i.rightHandle}},e.prototype.addView=function(t){var e=t.$_hash,i=this._views[e];return i||(i=this._pool.pop()||new gu(this.doc),this._views[e]=i),i._item=t,this.addChild(i),this.addChild(i.leftHandle),this.addChild(i.topHandle),this.addChild(i.bottomHandle),this.addChild(i.rightHandle),i},e.prototype.clearViews=function(){for(var t in this._views){var e=this._views[t];this.removeChild(e.leftHandle),this.removeChild(e.topHandle),this.removeChild(e.bottomHandle),this.removeChild(e.rightHandle),this.removeChild(e),this._pool.push(e)}this._views={}},e.prototype.layout=function(){var t=this._grid.layoutManager,e=(this._grid.selections,new N);for(var i in this._views){var o=this._views[i],r=o.item,n=!1,s=new N;if(o.prepare(),r instanceof Ls||r instanceof Fs||(n=this.$_getMobileSelectionRangeRect(t,r,o,s,e)),n){var a=t.footerBounds.y+t.contentBounds.y;s.bottom>a&&(o._bottomed=!0,s.bottom=a)}o.visible=n,o.visible&&(o.setRectI(s),o.updateElement(),this._layoutHandle(o,s,e),o.invalidate(!1,!0))}},e.prototype._layoutHandle=function(t,e,i){var o,r,n=13,s=13;t._lefted?t.leftHandle.visible=!1:(t.leftHandle.visible=!0,o=i.x-6.5,r=e.y+(e.height-n)/2,t.leftHandle.setBounds(o,r,s,n)),o=i.x+(i.width-s)/2,r=e.y-6.5,!t._toped&&o>=e.x?(t.topHandle.visible=!0,t.topHandle.setBounds(o,r,s,n)):t.topHandle.visible=!1,r=e.bottom-6.5,!t._bottomed&&o>=e.x?(t.bottomHandle.visible=!0,t.bottomHandle.setBounds(o,r,s,n)):t.bottomHandle.visible=!1,t._righted?t.rightHandle.visible=!1:(t.rightHandle.visible=!0,o=i.right-6.5,r=e.y+(e.height-n)/2,t.rightHandle.setBounds(o,r,s,n))},e.prototype.$_getMobileSelectionRowsRect=function(e,i,o,r){return t.prototype.$_getSelectionRowsRect.call(this,e,i,o,r)},e.prototype.$_getMobileSelectionColumnsRect=function(e,i,o,r){return t.prototype.$_getSelectionColumnsRect.call(this,e,i,o,r)},e.prototype.$_getMobileSelectionRangeRect=function(e,i,o,r,n){return t.prototype.$_getSelectionRangeRect.call(this,e,i,o,r,n)},e}(Bs),gu=function(t){function e(e){var i=t.call(this,e)||this;return i._leftHandle=new _u(i,"left"),i._topHandle=new _u(i,"top"),i._bottomHandle=new _u(i,"bottom"),i._rightHandle=new _u(i,"right"),i}return o(e,t),e.prototype._doDispose=function(){this._leftHandle=this._leftHandle.dispose(),this._topHandle=this._topHandle.dispose(),this._bottomHandle=this._bottomHandle.dispose(),this._rightHandle=this._rightHandle.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"leftHandle",{get:function(){return this._leftHandle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topHandle",{get:function(){return this._topHandle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottomHandle",{get:function(){return this._bottomHandle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rightHandle",{get:function(){return this._rightHandle},enumerable:!0,configurable:!0}),e.prototype.prepare=function(){t.prototype.prepare.call(this)},e.prototype.updateElement=function(){t.prototype.updateElement.call(this)},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.setImportantStyle("overflow","hidden"),this.setImportantStyle("pointer-events","none")},e.prototype._visibleChanged=function(){this._leftHandle.visible=this._topHandle.visible=this._bottomHandle.visible=this._rightHandle.visible=this.visible},e}(Vs);!function(t){t.COPY="copy",t.MOVE="move"}(iu||(iu={}));var yu,mu=function(t){function e(e){var i=t.call(this,e)||this;return i._dropMode=iu.COPY,i._proxyLabel="${rows}행 ${mode}",i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"dragCallback",{get:function(){return this._dragCallback},set:function(t){this._dragCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"callback",{get:function(){return this._callback},set:function(t){this._callback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dropMode",{get:function(){return this._dropMode},set:function(t){this._dropMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldMap",{get:function(){return this._fieldMap},set:function(t){this._fieldMap=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldMapCallback",{get:function(){return this._fieldMapCallback},set:function(t){this._fieldMapCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"proxyLabel",{get:function(){return this._proxyLabel},set:function(t){this._proxyLabel=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelCallback",{get:function(){return this._labelCallback},set:function(t){this._labelCallback=t},enumerable:!0,configurable:!0}),e.prototype.getEnabled=function(t,e,i){var o=this._dragCallback;return!o||!1!==o(t.handler,e,this.grid.handler,i)},e.prototype.getLabel=function(t,e,i){var o=this._labelCallback,r=void 0;return o&&(r=o(t.handler,e,this.grid.handler,i)),void 0===r&&this._proxyLabel&&(r=(r=(r=(r=this._proxyLabel.replace("${rows}",e.length+"")).replace("${mode}",t==this.grid||this.dropMode==iu.MOVE?"이동":"복사")).replace("${from}",e[0]+"")).replace("${to}",i+"")),r},e}(Is),bu=function(t){function e(e){var i=t.call(this,e.doc,"gridDebugLayer")||this;return i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.layout=function(){var t=this._owner.layoutManager;this.$_setBounds(this._grid,t.gridBounds.clone().inflate(-1,-1));var e=t.dataBounds.clone();e.offset(t.contentBounds.x,t.contentBounds.y),this.$_setBounds(this._data,e)},e.prototype._getCssSelector=function(){return"rg-debug-layer"},e.prototype._initDom=function(t){var e=t.style,i=nt(t);e.position="absolute",t.appendChild(this._client=this.$_createElement(i,"Client")),t.appendChild(this._topContent=this.$_createElement(i,"Top Content")),t.appendChild(this._leftContent=this.$_createElement(i,"Left Content")),t.appendChild(this._fixedContent=this.$_createElement(i,"Fixed Content")),t.appendChild(this._content=this.$_createElement(i,"Content")),t.appendChild(this._rightContent=this.$_createElement(i,"Right Content")),t.appendChild(this._grid=this.$_createElement(i,"Grid Bounds","b")),t.appendChild(this._data=this.$_createElement(i,"Data Bounds","g")),t.appendChild(this._nonFixed=this.$_createElement(i,"Non Fixed","g"))},e.prototype.$_createElement=function(t,e,i){void 0===i&&(i="r");var o=t.createElement("span"),r=o.style;return r.display="inline-block",r.position="absolute",r.boxSizing="border-box",r.pointerEvents="none","b"==i?(r.border="2px dashed rgba(0, 0, 255, 0.5)",r.color="blue"):"g"==i?(r.paddingTop="20px",r.border="2px solid rgba(0, 128, 0, 0.5)",r.color="rgb(0, 128, 0)"):(r.border="1px solid rgba(255, 0, 0, 0.7)",r.color="red"),r.fontWeight="bold",r.textAlign="center",r.verticalAlign="middle",r.whiteSpace="normal",o[lt.TextProp]=e,o},e.prototype.$_setBounds=function(t,e){var i=t.style;e.isEmpty?i.display="none":(i.display="inline-block",i.left=e.x+"px",i.top=e.y+"px",i.width=e.width+"px",i.height=e.height+"px",i.lineHeight=e.height+"px")},e}(Rs),vu=(function(t){function e(){var e=t.call(this)||this;return e._min=0,e._max=100,e._step=1,e._next=0,e._completed=!1,e._timer=void 0,e}o(e,t),Object.defineProperty(e.prototype,"min",{get:function(){return this._min},set:function(t){this._min=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"max",{get:function(){return this._max},set:function(t){this._max=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"step",{get:function(){return this._step},set:function(t){this._step=t},enumerable:!0,configurable:!0}),e.prototype.execute=function(t){if(t){this._runner=t,this._next=this._min;var e=rt(t.container);t.container instanceof e.HTMLElement&&(this._view.setProperties(this._min,this._max,this._min),this._view.show(t.container)),this.$_runNext()}},e.prototype.$_runNext=function(){if(this._next<this._max){var t=this._runner.run(this._next);if(this._next+=this._step,this._view.setPosition(this._next,t),this._next<this._max)return void setTimeout(function(){this.$_runNext()}.bind(this),0)}!this._completed&&this.$_complete()},e.prototype.$_complete=function(){try{this._runner.complete&&this._runner.complete()}finally{this._completed=!0,this._view.close()}}}(se),function(t){function e(e){var i=t.call(this)||this;i._message="Load data...",i._min=0,i._max=0,i._pos=0;var o=nt(e);return i._dom=i.$_createElement(o),i}return o(e,t),Object.defineProperty(e.prototype,"message",{get:function(){return this._message},set:function(t){this._message=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"position",{get:function(){return this._pos},enumerable:!0,configurable:!0}),e.prototype.setPosition=function(t,e){(t=Math.max(this._min,Math.min(this._max,t)))!=this._pos&&(this._pos=t,this._message=e,this.$_refreshView())},e.prototype.setProperties=function(t,e,i,o,r){void 0===o&&(o=null),void 0===r&&(r=!1),this._min=t,this._max=Math.max(t,e),this._max==this._min&&(this._max=this._min+1),this._pos=Math.max(this._min,Math.min(this._max,i)),this._message=o,r&&this.$_refreshView()},e.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},e.prototype.show=function(t,e){void 0===e&&(e=null),this._container=t,e&&this.$_setMessage(e),t.appendChild(this._dom);var i=t.getBoundingClientRect(),o=lt.getSize(this._dom);lt.move(this._dom,(i.width-o.width)/2,(i.height-o.height)/3)},e.prototype.close=function(){this._dom.parentElement.removeChild(this._dom)},e.prototype.$_createElement=function(t){var e=t.createElement("div");e.className="rg-progress";var i=e.style;return i.position="absolute",i.zIndex="3001",i.minWidth="250px",i.padding="8px 10px",e.appendChild(e.$_bar=this.$_createBar(t)),e.appendChild(e.$_msg=this.$_createMsg(t)),e},e.prototype.$_createBar=function(t){var e=t.createElement("div");e.className="rg-progress-bar";var i=e.style;i.width="100%",i.height="13px",i.marginBottom="4px";var o=t.createElement("div");return o.className="rg-progress-progress",(i=o.style).height="100%",i.width="0px",e.appendChild(e.$_led=o),e},e.prototype.$_createMsg=function(t){var e=t.createElement("div"),i=t.createElement("span");i.className="rg-progress-message";var o=e.style;return o.width="100%",o.textAlign="center",e.appendChild(e.$_span=i),e},e.prototype.$_refreshView=function(){var t=this._dom,e=t.$_bar,i=e.$_led;t.$_msg.$_span.innerHTML=lt.htmlEncode(this._message);var o=lt.getSize(e);i.style.width=Math.min(o.width-1,Math.floor(o.width*(this._pos-this._min)/(this._max-this._min)))+"px"},e.prototype.$_setMessage=function(t){this._dom.$_msg.$_span.innerHTML=lt.htmlEncode(this._message)},e}(se)),wu=function(t){function e(e){var i=t.call(this)||this;return i._container=e,i}return o(e,t),e.prototype.show=function(t,e,i){this._view||(this._view=new vu(t)),this._view.setZIndex(i),this._view.show(t||this._container,e||"Load data...")},e.prototype.close=function(){this._view&&this._view.close()},e.prototype.setProperties=function(t,e,i,o){this._view&&(o||(o=this._title||"Load data... ",e>t&&(o+=Math.floor(100*(i-t)/(e-t))+"% ("+i+" / "+e+")")),this._view.setProperties(t,e,i,o,!0))},e.prototype.showLoader=function(t,e){this._loaderView||(this._loaderView=new Cu(t)),this._loaderView.setZIndex(e),this._loaderView.show(t||this._container)},e.prototype.closeLoader=function(){this._loaderView&&this._loaderView.close()},e}(se),Cu=function(t){function e(e){var i=t.call(this)||this,o=nt(e);return i._dom=i.$_createElement(o),i}return o(e,t),e.prototype.show=function(t){this._container=t,t.appendChild(this._dom);var e=t.getBoundingClientRect(),i=lt.getSize(this._dom);lt.move(this._dom,(e.width-i.width)/2,(e.height-i.height)/3)},e.prototype.setZIndex=function(t){this._dom.style.zIndex=String(t+5)},e.prototype.close=function(){lt.detach(this._dom)},e.prototype.$_createElement=function(t){var e=t.createElement("div");return e.className="rg-load-indicator",e.style.position="absolute",e},e}(se),xu=function(t){function e(e){var i=t.call(this,e)||this;return i._count=10,i._title="리얼그리드 테이블 (테이블에서 엔터키로 버튼 링크등의 기능이 실행됩니다)",i._description="${columns} 열로 이루어진 데이터 테이블입니다.",i._autoDrawing=!0,i._indicatorTitle="순번",i._checkBarTitle="선택",i._stateBarTitle="행 상태",i._emptyMessage="데이터가 존재하지 않습니다.",i._editButtonText="편집",i._cellButtonTexts={action:"실행",popup:"팝업"},i._stateTexts={created:"추가",updated:"수정",deleted:"삭제",createAndDeleted:"추가 후 삭제"},i._rowText="${index} 행",i._linkText="링크",i._groupSummaryText="${groupText} 부분 합계 행",i._summaryText="합계 행",i._insertButtonText="행 삽입",i._deleteButtonText="행 삭제",i._appendButtonText="행 추가",i._alreadyEditMessage="이미 편집중입니다.",i._editor=new Iu(e),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"count",{get:function(){return this._count},set:function(t){this._count!==t&&(this._count=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"title",{get:function(){return this._title},set:function(t){this._title!==t&&(this._title=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"description",{get:function(){return this._description},set:function(t){this._description!==t&&(this._description=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoDrawing",{get:function(){return this._autoDrawing},set:function(t){this._autoDrawing!==t&&(this._autoDrawing=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indicatorTitle",{get:function(){return this._indicatorTitle},set:function(t){this._indicatorTitle!==t&&(this._indicatorTitle=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkBarTitle",{get:function(){return this._checkBarTitle},set:function(t){this._checkBarTitle!==t&&(this._checkBarTitle=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateBarTitle",{get:function(){return this._stateBarTitle},set:function(t){this._stateBarTitle!==t&&(this._stateBarTitle=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"emptyMessage",{get:function(){return this._emptyMessage},set:function(t){this._emptyMessage!==t&&(this._emptyMessage=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editButtonText",{get:function(){return this._editButtonText},set:function(t){this._editButtonText!==t&&(this._editButtonText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cellButtonTexts",{get:function(){return this._cellButtonTexts},set:function(t){this._cellButtonTexts!==t&&(this._cellButtonTexts=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stateTexts",{get:function(){return this._stateTexts},set:function(t){this._stateTexts!==t&&(this._stateTexts=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowText",{get:function(){return this._rowText},set:function(t){this._rowText!==t&&(this._rowText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linkText",{get:function(){return this._linkText},set:function(t){this._linkText!==t&&(this._linkText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupSummaryText",{get:function(){return this._groupSummaryText},set:function(t){this._groupSummaryText!==t&&(this._groupSummaryText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summaryText",{get:function(){return this._summaryText},set:function(t){this._summaryText!==t&&(this._summaryText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"insertButtonText",{get:function(){return this._insertButtonText},set:function(t){this._insertButtonText!==t&&(this._insertButtonText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"deleteButtonText",{get:function(){return this._deleteButtonText},set:function(t){this._deleteButtonText!==t&&(this._deleteButtonText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"appendButtonText",{get:function(){return this._appendButtonText},set:function(t){this._appendButtonText!==t&&(this._appendButtonText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alreadyEditMessage",{get:function(){return this._alreadyEditMessage},set:function(t){this._alreadyEditMessage!==t&&(this._alreadyEditMessage=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editor",{get:function(){return this._editor},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"beforeEditPopupCallback",{get:function(){return this._beforeEditPopupCallback},set:function(t){this._beforeEditPopupCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"afterEditPopupCallback",{get:function(){return this._afterEditPopupCallback},set:function(t){this._afterEditPopupCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkItemCallback",{get:function(){return this._checkItemCallback},set:function(t){this._checkItemCallback=t},enumerable:!0,configurable:!0}),e}(Is),Iu=function(t){function e(e){var i=t.call(this,e)||this;return i._yearText="년도",i._monthText="월",i._dayText="일자",i._ampmText="오전/오후",i._amText="오전",i._pmText="오후",i._hourText="시",i._minuteText="분",i._secondText="초",i._validationMessage="잘못된 입력입니다.",i}return o(e,t),Object.defineProperty(e.prototype,"yearText",{get:function(){return this._yearText},set:function(t){this._yearText!==t&&(this._yearText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"monthText",{get:function(){return this._monthText},set:function(t){this._monthText!==t&&(this._monthText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dayText",{get:function(){return this._dayText},set:function(t){this._dayText!==t&&(this._dayText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"ampmText",{get:function(){return this._ampmText},set:function(t){this._ampmText!==t&&(this._ampmText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"amText",{get:function(){return this._amText},set:function(t){this._amText!==t&&(this._amText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pmText",{get:function(){return this._pmText},set:function(t){this._pmText!==t&&(this._pmText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hourText",{get:function(){return this._hourText},set:function(t){this._hourText!==t&&(this._hourText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minuteText",{get:function(){return this._minuteText},set:function(t){this._minuteText!==t&&(this._minuteText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"secondText",{get:function(){return this._secondText},set:function(t){this._secondText!==t&&(this._secondText=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"validationMessage",{get:function(){return this._validationMessage},set:function(t){this._validationMessage!==t&&(this._validationMessage=t)},enumerable:!0,configurable:!0}),e}(Is),Eu=function(t){function e(e){var i=t.call(this)||this;return i._renderers={},i._grid=e,i}return o(e,t),e.prototype._doDispose=function(){for(var e in this._grid=null,this._renderers)this._renderers[e].dispose();this._renderers=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),e.prototype.getRenderer=function(t){var e=t.type,i=this._renderers[e];if(!i){switch(e){case sr.TYPE:i=new sr;break;case dr.TYPE:i=new dr;break;case pr.TYPE:i=new pr}i||(i=new or),this._renderers[e]=this._renderers[e]||i}return i},e}(ft),Su=function(t){function e(e,i){var o=t.call(this)||this;o._start=0,o._indicatorVisible=!0,o._checkBarVisible=!0,o._stateBarVisible=!0,o._dataProvider=null,o._itemProvider=null,o._columns=[],o._colCount=0,o._elements=[],o._colTitles=[],o._editing=!1,o._editElement=null,o._rows=0,o._internalSet=!1,o._numberFormatter=null,o._datetimeWriter=null,o._booleanFormatter=null,o._numberFormat=null,o._datetimeFormat=null,o._booleanFormat=null,o._grid=e;var r=o._doc=e.doc,n=e.container,s=n._containerDiv.id;o._container=n;var a=o._containerDiv=r.createElement("div");s&&(a.id=s+"_shadowdom"),a.className="rg-grid-shadow";var l=a.style;l.height="0px",l.overflow=lt.isDebugging()?"":"hidden",l.whiteSpace="nowrap",a.tabIndex=-1,n._containerDiv.parentNode.insertBefore(a,n._containerDiv),o._renders=new Eu(e),o._createTable(a),o._start=0,i instanceof xu?o._options=i:(o._options=new xu(o._grid),o._options.assignFrom(i)),o._autoDrawing=o._options.autoDrawing,o._editor=new Du(e,a,o._options.editor);var h=o;return o._editor.beforeCallback=function(t,e){return h._editing?(alert(h._options.alreadyEditMessage),h._editor.focusEditor(),!1):(h._editing=!0,h._options.beforeEditPopupCallback&&h._options.beforeEditPopupCallback(t.handler,e),!0)},o._editor.afterCallback=function(t,e){h._options.afterEditPopupCallback&&h._options.afterEditPopupCallback(t.handler,e),h._editing=!1},o._editor.editorCommited=function(t,e,i){h.$_editorCommitedHandler(t.handler,e,i)},o}return o(e,t),e.prototype.dispose=function(){return this.$_clearBody(),this._container.$_removeListener(this._prevButton,"click"),this._container.$_removeListener(this._nextButton,"click"),this._editor.dispose(),this._table.parentNode&&this._table.parentNode.removeChild(this._table),this._renders=this._renders.dispose(),this._options=this._options&&this._options.dispose(),this._numberFormatter=null,delete this._numberFormatter,delete this._datetimeWriter,this._booleanFormatter=null,delete this._booleanFormatter,this._columns=[],this._dataProvider=null,this._itemProvider=null,this._containerDiv=null,this._container=null,t.prototype.dispose.call(this)},e.prototype.onGroupedItemProviderGrouped=function(t){this._columns.length>0&&this.$_setItems(0)},e.prototype.onDataProviderDataChanged=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},e.prototype.onDataProviderReset=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},e.prototype.onDataProviderRefresh=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},e.prototype.onDataProviderRefreshClient=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},e.prototype.onDataProviderRowCountChanged=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},e.prototype.onDataProviderRowMoved=function(t,e,i){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},e.prototype.onDataProviderRowsMoved=function(t,e,i,o){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},e.prototype.onDataProviderStateChanged=function(t,e){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},e.prototype.onDataProviderStatesChanged=function(t,e){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},e.prototype.onDataProviderStatesCleared=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},e.prototype.onDataProviderRestoreRows=function(t){this._autoDrawing&&this._itemProvider&&!this._internalSet&&this.$_setItems(this._start)},Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t,this._numberFormatter=t?Se.getFormatter(t):null,this._changed())},enumerable:!0,configurable:!0}),e.prototype._createTable=function(t){var e=this._doc;this._table=e.createElement("table"),this._caption=e.createElement("caption"),this._table.appendChild(this._caption),this._head=e.createElement("thead"),this._table.appendChild(this._head),this._body=e.createElement("tbody"),this._table.appendChild(this._body);var i=e.createElement("tfoot"),o=e.createElement("tr"),r=e.createElement("td");this._prevButton=this.$_addButton(r,"prev page",this.$_prevButtonHandler),this._nextButton=this.$_addButton(r,"next page",this.$_nextButtonHandler),o.appendChild(r),i.appendChild(o),this._table.appendChild(i),t.appendChild(this._table)},e.prototype.setFocus=function(){this._containerDiv.focus({preventScroll:!0})},e.prototype.setColumns=function(t){var e=this._grid,i=this._columns=[];if(this._fields=[],this._editables=[],t)for(var o=e.collectColumns(!0,!0,!0),r=0,n=o.length;r<n;r++)o[r]instanceof mn&&i.push(o[r]);else for(r=0,n=e.columnCount;r<n;r++){var s=e.getColumn(r);s instanceof mn&&s.visible&&i.push(s)}this._options.autoDrawing&&this._itemProvider&&this.reset()},e.prototype.setItemProvider=function(t){var e=this._options;if(t instanceof Fr)throw new Error("TreeView not support Web Accessibility.");var i=t!=this._itemProvider;if(i){var o=void 0;this._itemProvider&&(o=this._itemProvider.dataSource).unregisterClient(this),this._itemProvider=t,(o=this._dataProvider=this._itemProvider.dataSource).registerClient(this),o.addListener(this),this._itemProvider.addListener(this)}e.autoDrawing&&this._columns.length>0&&(i||0==this._rows)&&this.reset()},e.prototype.reset=function(){this._resetTimer&&clearTimeout(this._resetTimer),this._resetTimer=setTimeout(function(){this._grid._loading?this._resetTimer=setTimeout(function(){this.reset()}.bind(this),75):(this.$_setOptions(),this.$_fillHead(),this.$_setItems(0),this._resetTime=null)}.bind(this),75)},e.prototype.$_setOptions=function(){var t=this._grid;this._options;this._indicatorVisible=t.rowIndicator.visible;var e=t.footers;e.count;this._footersVisible=e.visible;var i=t.checkBar;this._checkBarVisible=i.visible,this._checkBarExclusive=i.exclusive,this._stateBarVisible=t.stateBar.visible;var o=t.editOptions;this._insertable=o.insertable,this._appendable=o.appendable,this._deletable=o.deletable},e.prototype.$_setItems=function(t){this._start=t,this.$_clearBody(),this.$_fillBody()},e.prototype.$_fillHead=function(){var t=this._doc,e=this._options,i=this._head.querySelector("tr");i&&this._head.removeChild(i),this._colCount=0;var o,r="";i=t.createElement("tr"),this._indicatorVisible&&((o=t.createElement("th")).scope="col",o.innerText=e.indicatorTitle,i.appendChild(o),r+=e.indicatorTitle+", ",this._colCount++),this._stateBarVisible&&((o=t.createElement("th")).scope="col",o.innerText=e.stateBarTitle,i.appendChild(o),r+=e.stateBarTitle+", ",this._colCount++),this._checkBarVisible&&((o=t.createElement("th")).scope="col",o.innerText=e.checkBarTitle,i.appendChild(o),r+=e.checkBarTitle+", ",this._colCount++),this._colTitles=[];for(var n=0,s=this._columns.length;n<s;n++){var a=this._columns[n];if(a.visible&&a.width>0){var l=a.header,h=l.text?l.text:a.name;(o=t.createElement("th")).scope="col",o.innerText=h,i.appendChild(o),r+=h+", ",this._colTitles.push(h),this._colCount++}else this._colTitles.push(null)}this._head.appendChild(i),o=t.createElement("th"),this._head.appendChild(i);var u="";e.title&&(u+="<strong>"+e.title+"</strong>"),e.description&&(u+="<span>"+e.description.replace("${columns}",r.substr(0,r.length-2))+"</span>"),this._caption.innerHTML=u},e.prototype.$_clearBody=function(){for(var t=this._elements.length;t--;){var e=this._elements[t];e!=this._prevButton&&e!=this._nextButton&&this._container.$_removeListenerAll(this._elements[t])}for(this._elements=[];this._body.childNodes.length>0;)this._body.removeChild(this._body.lastChild)},e.prototype.$_fillBody=function(){var t=this._doc,e=this._options;this._rows=this._itemProvider.rowCount;var i=Math.min(this._rows-this._start,e.count);if(this._prevButton.disabled=0==this._start,this._nextButton.disabled=i<e.count,i>0){for(var o=0;o<i;o++)this.$_buildItem(this._start+o);this._footersVisible}else{var r=t.createElement("tr"),n=t.createElement("td");n.colSpan=this._colCount,n.innerText=e.emptyMessage,r.appendChild(n),this._body.appendChild(r)}},e.prototype.$_buildItem=function(t){var e,i=this._grid,o=this._doc,r=this._options,n=this._itemProvider.getItem(t,!0),s=i.editOptions,a=s.isWritable()&&s.canUpdate(n.rowState===at.CREATED),l=o.createElement("tr");if(l.id=n.index.toString(),this._indicatorVisible&&((e=o.createElement("td")).id="indicator",e.innerText=this.$_getRowText(t+1),l.appendChild(e)),this._stateBarVisible){(e=o.createElement("td")).id="state";var h=n.rowState;e.innerText=r.stateTexts&&h!=at.NONE?r.stateTexts[h]:"",l.appendChild(e)}this._checkBarVisible&&((e=o.createElement("td")).id="checkbox",this.$_addCheckBox(e,n,n.checked,this._checkBarExclusive,this.$_checkboxHandler),l.appendChild(e));for(var u=0,c=this._columns.length;u<c;u++){var d=this._columns[u];if(null!=this._colTitles[u]){(e=o.createElement("td")).id="col_"+u;var p=this.$_getRowText(t+1)+" "+this._colTitles[u]+" ",_=Hn.temp(i,n.index,d),f=i.getDisplayText(_);f=null==f?"":f;var g=i.body.getCell(_,!1),y=this._renders.getRenderer(g.dataColumn.renderer||{});if(y.assignFrom(g.dataColumn.renderer),y instanceof pr)this.$_addLinkRenderer(e,y.$_getUrl(i,g),y.$_getTitle(i,g)||r.linkText,f,this.$_linkClickHandler);else if(y instanceof dr){var m=Mo.getText(n,d);m&&this.$_addButtonRenderer(e,p+m,m,this.$_buttonClickHandler)}else e.innerHTML="<span>"+f+"</span>";var b=d.button;if(b!=E.NONE)this.$_addButton(e,p+r.cellButtonTexts[b],"action"==b?this.$_actionButtonHandler:this.$_popupButtonHandler);else if(y&&y instanceof sr){var v=y.$_getTitle(i,g);v&&this.$_addButton(e,p+v,this.$_imageClickHandler,0)}a&&d.isWritable()&&this.$_addButton(e,p+r.editButtonText,this.$_editButtonHandler),l.appendChild(e)}}(this._insertable||this._appendable||this._deletable)&&(e=o.createElement("td"),this._insertable&&(this.$_addButton(e,r.insertButtonText,this.$_insertRowButtonHandler),t<this._start+r.count-1&&this.$_addButton(e,r.appendButtonText,this.$_appendRowButtonHandler)),this._deletable&&this.$_addButton(e,r.deleteButtonText,this.$_deleteRowButtonHandler),l.appendChild(e)),this._body.appendChild(l)},e.prototype.$_getRowText=function(t){return this._options.rowText?this._options.rowText.replace("${index}",String(t)):String(t)},e.prototype.$_getItemIndex=function(t){var e=t.parentElement,i=e?e.parentElement:null;return i&&i.id?parseInt(i.id):-1},e.prototype.$_getCellIndex=function(t){var e=t.parentElement,i=e?e.parentElement:null;if(i){var o=parseInt(i.id);if(!isNaN(o)){var r=e.id;r=r.substring(4,r.length);var n=this._columns[parseInt(r)];if(n)return Hn.temp(this._grid,o,n)}}return null},e.prototype.$_addCheckBox=function(t,e,i,o,r){var n=this._doc.createElement("input");return n.type=o?"radio":"checkbox",n.name="rg_shadow_item",n.tabIndex=-1,n.title=this.$_getRowText(e.index+1),n.$$value=e.index,n.checked=i,this._container.$_addListener(n,"click",r.bind(this),!1),t.appendChild(n),this._elements.push(n),n},e.prototype.$_addButtonRenderer=function(t,e,i,o){var r=this._doc.createElement("input");return r.type="button",r.title=e,r.value=i,r.tabIndex=-1,this._container.$_addListener(r,"click",o.bind(this),!1),t.appendChild(r),this._elements.push(r),r},e.prototype.$_addLinkRenderer=function(t,e,i,o,r){var n=this._doc.createElement("a");return n.href=e,n.title=i,n.text=o,n.target="_blank",this._container.$_addListener(n,"click",r.bind(this),!1),t.appendChild(n),this._elements.push(n),n},e.prototype.$_addButton=function(t,e,i,o){var r=this._doc.createElement("input");return r.type="button",r.title=e,r.tabIndex=-1,null!=o&&(r.$$value=o.toString()),this._container.$_addListener(r,"click",i.bind(this),!1),t.appendChild(r),this._elements.push(r),r},e.prototype.isDataEditing=function(){return this._editing&&!this._internalSet},e.prototype.cancelDataEditing=function(){return!1},e.prototype.commitDataEditing=function(){return!1},e.prototype.commit=function(){return!1},e.prototype._changed=function(){},e.prototype.$_prevButtonHandler=function(t){this.$_setItems(this._start-this._options.count)},e.prototype.$_nextButtonHandler=function(t){this.$_setItems(this._start+this._options.count)},e.prototype.$_checkboxHandler=function(t){var e=this._grid,i=t.target||t.srcElement||t.originalTarget,o=i.$$value;"radio"==i.type?e.checkItem(o,i.checked,!0,!0):e.checkItem(o,i.checked,!1,!0);var r=this._options.checkItemCallback;r&&r.call(this,e.handler,o,e.isCheckedItem(o))},e.prototype.$_actionButtonHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=this.$_getCellIndex(e);i&&this._grid._fireCellButtonClicked(i)},e.prototype.$_popupButtonHandler=function(t){},e.prototype.$_buttonClickHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=this.$_getCellIndex(e),o={type:"button",value:i.value,accessibility:!0};if(o)return this._grid._fireCellItemClicked(i,o),!0},e.prototype.$_linkClickHandler=function(t){var e=t.target||t.srcElement,i=this.$_getCellIndex(e),o={type:pr.TYPE,url:e.href,value:i.value,accessibility:!0};!1===this._grid._fireCellItemClicked(i,o)&&(t.preventDefault(),t.stopImmediatePropagation())},e.prototype.$_imageClickHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=this.$_getCellIndex(e),o={type:sr.TYPE,value:i.value,accessibility:!0};return this._grid._fireCellItemClicked(i,o),!0},e.prototype.$_editButtonHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=this.$_getCellIndex(e).clone(),o=this.$_getRowText(i.itemIndex+1),r=i.dataColumn.header.text||i.dataColumn.name,n=this._grid,s={itemIndex:i.itemIndex,column:i.column.name};s.column||(s.fieldName=i.column.fieldName);var a=n.focusedIndex.clone();a.assignFrom(s),n.setFocusedIndex(a,!1,!0),this._editElement=e.parentElement,this._editor.popup(i,o,r,e)},e.prototype.$_appendRowButtonHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=this.$_getItemIndex(e);if(-1==i)this._dataProvider.addRow([]);else{var o=this._itemProvider.getItem(i);this._dataProvider.insertRow(o.dataRow+1,[])}},e.prototype.$_insertRowButtonHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=this.$_getItemIndex(e);if(-1!=i){var o=this._itemProvider.getItem(i);this._dataProvider.insertRow(o.dataRow,[])}},e.prototype.$_deleteRowButtonHandler=function(t){var e=t.target||t.srcElement||t.originalTarget,i=this.$_getItemIndex(e);if(-1!=i){var o=this._itemProvider.getItem(i);this._dataProvider.removeRow(o.dataRow,[])}},e.prototype.$_editorCommitedHandler=function(t,e,i){var o=e.dataColumn,r=e.item,n=o.fieldName;this._internalSet=!0;try{r.setData(o.dataIndex,i)}finally{this._internalSet=!1}this.$_setElementText(this._editElement,e,r,o,i);for(var s=this._editElement.parentNode.childNodes,a=s.length;a--;){var l=s[a];if(l!=this._editElement){var h=this.$_getCellIndex(l.firstChild);if(h){var u=h.column;u&&u.fieldName===n&&this.$_setElementText(l,h,r,u,i)}}}},e.prototype.$_setElementText=function(t,e,i,o,r){var n=this._grid,s=n.getDisplayText(e),a=n.getBodyCellAt(e),l=n.body.getCell(e,!1),h=a.renderer2;if(h instanceof pr){var u=h.$_getUrl(n,l),c=t.getElementsByTagName("a")[0];c.text=s,c.href=u}else{t.getElementsByTagName("span")[0].innerText=s}var d=t.parentElement.querySelector("#state");if(d){var p=i.rowState;d.innerText=this._options.stateTexts&&p!=at.NONE?this._options.stateTexts[p]:""}},e}(se);!function(t){t.AM="am",t.PM="pm"}(yu||(yu={}));var Ou,Ru,Du=function(t){function e(e,i,o){var r=t.call(this)||this;r._activeControls=[],r._lineInput=null,r._multiInput=null,r._numberInput=null,r._selector=null,r._yearInput=null,r._monthInput=null,r._dayInput=null,r._ampmSelector=null,r._hourInput=null,r._minuteInput=null,r._secondInput=null,r._defaultInput=null,r._focusControl=null,r._beforeCallback=null,r._afterCallback=null,r._editorCommited=null,r._grid=e;var n=r._doc=e.doc;r._container=e.container,r._options=o,r._valueChanged=!1,r._type=null,r._value=null,r._column=null,r._itemIndex=null;n.createElement("input");r._dialog=n.createElement("div");var s=r._dialog;s.class="popup",s.role="dialog",s.ariaLabelledby="popuptitle",s.style.display="none",s.style.position="absolute",s.style.left="0px",s.style.top="0px";var a=n.createElement("div");a.id=s.ariaLabelledby,a.style.display="none",s.appendChild(a),r._body=n.createElement("div"),s.appendChild(r._body);var l=n.createElement("div"),h=n.createElement("input");h.type="button",h.value="Apply",h.title="Apply",r._container.$_addListener(h,"click",r.$_applyButtonHandler.bind(r),!1),l.appendChild(h);var u=n.createElement("input");return u.type="button",u.value="Cancel",u.title="Cancel",r._container.$_addListener(u,"click",r.$_cancelButtonHandler.bind(r),!1),l.appendChild(u),s.appendChild(l),i.firstElementChild?i.insertBefore(s,i.firstElementChild):i.appendChild(s),r}return o(e,t),Object.defineProperty(e.prototype,"beforeCallback",{get:function(){return this._beforeCallback},set:function(t){this._beforeCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"afterCallback",{get:function(){return this._afterCallback},set:function(t){this._afterCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editorCommited",{get:function(){return this._editorCommited},set:function(t){this._editorCommited!==t&&(this._editorCommited=t)},enumerable:!0,configurable:!0}),e.prototype.popup=function(t,e,i,o){var n=!1;if(this._beforeCallback&&(n=this._beforeCallback(this._grid,t)),n){this._focusControl=o,this._index=t;var s=t.column,a=void 0;if(s instanceof mn)switch(s.valueType){case r.NUMBER:a="number";break;case r.DATETIME:a="date"}if(!a){var l=this._grid.getBodyCellAt(t);(a=aa.getEditorType(l))||(a="line")}this._value=t.item.getData(s.dataIndex),this.$_buildEditor(a,e,i),this.$_setEditValue(a,this._value),this._dialog.style.display="block",this._defaultInput&&this._defaultInput.focus()}},e.prototype.focusEditor=function(){this._defaultInput&&this._defaultInput.focus()},e.prototype.$_closeUp=function(t){if(void 0===t&&(t=!1),t){var e=this.$_getEditValue(this._type);e!=this._value&&this._editorCommited(this._grid,this._index,e)}this._dialog.style.display="none",this._afterCallback&&this._afterCallback(this._grid,this._index),this._focusControl&&this._focusControl.focus()},e.prototype.$_clearControls=function(){for(var t=this._activeControls.length;t--;)this._container.$_removeListenerAll(this._activeControls[t]),this._body.removeChild(this._activeControls[t]),delete this._activeControls[t];this._activeControls=[]},e.prototype.$_buildEditor=function(t,e,i){var o,r=this._doc;this.$_clearControls();var n=e+" "+i;switch(t){case"multiline":(o=this._multiInput=r.createElement("textarea")).title=n,this._body.appendChild(o),this._activeControls.push(o);break;case"number":o=this._numberInput=this.$_addNumberInput(n);break;case"dropDown":(o=this._selector=r.createElement("select")).title=n,this.$_buildSelectOptions(o,this._index),this._body.appendChild(o),this._activeControls.push(o);break;case"date":var s=this._options;o=this._yearInput=this.$_addNumberInput(s.yearText,2e3,4,0,9999),this._monthInput=this.$_addNumberInput(s.monthText,1,2,1,12),this._dayInput=this.$_addNumberInput(s.dayText,1,2,1,31),this._ampmSelector=r.createElement("select"),this._ampmSelector.title=s.ampmText,this._ampmSelector.options[0]=new Option(s.amText,yu.AM),this._ampmSelector.options[1]=new Option(s.pmText,yu.PM),this._body.appendChild(this._ampmSelector),this._activeControls.push(this._ampmSelector),this._hourInput=this.$_addNumberInput(s.hourText,0,2,0,11),this._minuteInput=this.$_addNumberInput(s.minuteText,0,2,0,59),this._secondInput=this.$_addNumberInput(s.secondText,0,2,0,59);break;default:(o=this._lineInput=r.createElement("input")).type="text",o.title=n,this._body.appendChild(o),this._activeControls.push(o)}this._defaultInput=o,this._type=t},e.prototype.$_buildSelectOptions=function(t,e){var i,o,r,n,s=this._doc,a=e.item,l=e.dataColumn,h=!1;if(l.lookupSource){for(var u=l.lookupKeyFieldIds,c=[],d=0;d<u.length-1;d++)c.push(a.getData(u[d]));var p=l.lookupSource.getTextDomain(c);p&&p.values&&p.values.length>0&&(o=p.values,i=p.keys,h=!0)}else(r=l.values)&&r.length>0&&((n=l.labels)&&n.length>=r.length?(o=n,i=r,h=!0):o=r);if(o)for(d=0;d<o.length;d++){var _=s.createElement("option");_.innerText=o[d],_.value=h&&d<i.length?i[d]:o[d],t.appendChild(_)}},e.prototype.$_addNumberInput=function(t,e,i,o,r){var n=this._doc.createElement("input");return n.type="number","number"==n.type?(null!=o&&(n.min=o+""),null!=o&&(n.max=r+"")):(null!=i&&(n.maxLength=i),null!=o&&(n.dataset.min=o+""),null!=r&&(n.dataset.max=r+""),this._container.$_addListener(n,"keypress",this.$_numberEditHandler.bind(this),!1)),n.title=t,null!=e&&(n.value=e),this._body.appendChild(n),this._activeControls.push(n),n},e.prototype.$_setEditValue=function(t,e){switch(t){case"multiline":this._multiInput.value=e||"";break;case"number":isNaN(e)||(this._numberInput.value=e||"");break;case"dropDown":this._selector.value=e||"";break;case"date":var i=e;if(e&&"string"==typeof e&&(i=new Date(e)),i instanceof Date&&!isNaN(i.getTime())){this._yearInput.value=i.getFullYear(),this._monthInput.value=i.getMonth()+1,this._dayInput.value=i.getDate();var o=i.getHours();this._ampmSelector.value=o<12?yu.AM:yu.PM,this._hourInput.value=o%12,this._minuteInput.value=i.getMinutes(),this._secondInput.value=i.getSeconds()}else this._yearInput.value="",this._monthInput.value="",this._dayInput.value="",this._ampmSelector.value=yu.AM,this._hourInput.value="",this._minuteInput.value="",this._secondInput.value="";break;default:this._lineInput.value=e||""}},e.prototype.$_getEditValue=function(t){switch(t){case"multiline":return this._multiInput.value;case"number":var e=Number(this._numberInput.value);return isNaN(e)?null:e;case"dropDown":return this._selector.value;case"date":var i=parseInt(this._yearInput.value),o=parseInt(this._monthInput.value)-1,r=parseInt(this._dayInput.value),n=parseInt(this._hourInput.value)+(this._ampmSelector.value==yu.PM?12:0),s=parseInt(this._minuteInput.value),a=parseInt(this._secondInput.value);return new Date(i,o,r,n,s,a);default:return this._lineInput.value}},e.prototype.$_checkValue=function(t){if("date"==t){var e=parseInt(this._yearInput.value);if(isNaN(e)||e<0)return alert(this._yearInput.title+" "+this._options.validationMessage),this._yearInput.focus(),!1;var i=parseInt(this._monthInput.value);if(isNaN(i)||i<1||i>12)return alert(this._monthInput.title+" "+this._options.validationMessage),this._monthInput.focus(),!1;var o=parseInt(this._dayInput.value);if(isNaN(o)||o<1||o>31)return alert(this._dayInput.title+" "+this._options.validationMessage),this._dayInput.focus(),!1;var r=parseInt(this._hourInput.value);if(isNaN(r)||r<0||r>11)return alert(this._hourInput.title+" "+this._options.validationMessage),this._hourInput.focus(),!1;var n=parseInt(this._minuteInput.value);if(isNaN(n)||n<0||n>59)return alert(this._minuteInput.title+" "+this._options.validationMessage),this._minuteInput.value.focus(),!1;var s=parseInt(this._secondInput.value);if(isNaN(s)||s<0||s>59)return alert(this._secondInput.title+" "+this._options.validationMessage),this._secondInput.value.focus(),!1;var a=new Date(e,i,o,r,n,s);return!(!a||isNaN(a.getTime()))||(alert(this._options.validationMessage),this._monthInput.focus(),!1)}return!0},e.prototype.$_numberEditHandler=function(t){return t.charCode>=48&&t.charCode<=57},e.prototype.$_applyButtonHandler=function(t){this.$_checkValue(this._type)&&this.$_closeUp(!0)},e.prototype.$_cancelButtonHandler=function(t){this.$_closeUp()},e}(se),ku=new N(-1e4,-1e4,100,100),Pu=function(i){function s(o,r,n){void 0===r&&(r=!1),void 0===n&&(n=null);var s=i.call(this,o.doc,!0)||this;s._debugging=!1,s._scrollBarWidth=16,s._scrollBarHeight=16,s._filterRunning=!1,s._keepNullFocus=!0,s._loading=!0,s._dataLoad=!1,s._userMode=!1,s._userModeError=null,s._gridObjects=[],s._tableViews={},s._columnMap={},s._columnLayouts=new vn,s._columnLock=0,s._columnsDirty=!1,s._columnSummaryRuntime=new qn,s._columnValidationRuntime=new jr,s._rowValidationRuntime=new Ar,s._layouted=!1,s._resetting=!1,s._needMerge=!1,s._leftPos=0,s._horzScrolled=!1,s._topIndex=0,s._prevTop=0,s._prevLast=-1,s._updateLock=!1,s._hoveredY=-1,s._focusing=!1,s._dataChanged=!1,s._validations=new $r(!1),s.$_editFocused=!1,s.$_showFocusCell=!1,s._needSyncHeadCheck=!1,s._cellUpdateEventLock=!1,s._currentRowId=-1,s._currentRow=-1,s._scrolledTime=0,s.$_fixedColCount=0,s.$_rfixedColCount=0,s._cellLayoutDirty=!1;var a=o.doc;if(!function(){var i,o=location.hostname;try{i=realGrid2Lic}catch(t){return!1}if(!i)return!1;var r=au.decrypt(i);if("RealGrid2"!=r.name)return!1;var n=r.server.toLowerCase(),s=location.pathname.toLowerCase();if(e.license!=t.Developer&&!au.includedDomains(n,o.toLowerCase(),s))return!1;var a=r.lic.toLowerCase();if(e.code=r.code,e.license=r.lic,a==t.Evaluation||a==t.Limited){var l=r.expire.split(".").map((function(t){return parseInt(t)})),h=new Date(l[0],l[1],l[2],23,59,59,999);if(new Date>h)return!1}return!0}())return s;s._container=o,s._addGridObject(s._header=new Jn(s)),s._addGridObject(s._footers=new ns(s)),s._addGridObject(s._headerSummaries=new Yh(s)),s._addGridObject(s._rowIndicator=new cs(s)),s._addGridObject(s._stateBar=new ps(s)),s._addGridObject(s._checkBar=new fs(s)),s._addGridObject(s._body=new xs(s)),s._rootElement=new Rs(a,"grid root view"),s.addChild(s._rootElement),s._debugView=new bu(s),s._emptyView=new Us(a),s.addChild(s._emptyView),s._contentPane=new cl(a,"contentPane"),s.addElement(s._contentPane),s._rightContentPane=new fl(a,"rightContentPane"),s.addElement(s._rightContentPane),s._fixedContentPane=new pl(a,"fixedContentPane"),s.addElement(s._fixedContentPane),s._doContentPanesCreated(),s._leftContentPane=new ul(a,"leftContentPane"),s.addElement(s._leftContentPane),s._sideContentPane=s._createSidePane(),s._sideContentPane&&s.addElement(s._sideContentPane),s._topContentPane=new hl(a,"topContentPane"),s.addElement(s._topContentPane),s._bodyView=s._createBodyView(s._body),s._fixedBodyView=s._createFixedBodyView(s._body),s._rightBodyView=s._createRightBodyView(s._body),s._headerView=new Ia(a,s._header),s._fixedHeaderView=new Ea(a,s._header),s._rightHeaderView=new Sa(a,s._header),s._headerSummaryView=new qh(a,s._headerSummaries),s._fixedHeaderSummaryView=new Kh(a,s._headerSummaries),s._rightHeaderSummaryView=new Xh(a,s._headerSummaries),s._footerView=new ka(a,s.footers),s._fixedFooterView=new Pa(a,s.footers),s._rightFooterView=new Ta(a,s.footers),s._rowBarContainer=new yh(s),s._headView=new el(s),s._sumView=new Jh(a),s._footView=new ol(a);for(var l=[s._rowBarContainer,s._bodyView,s._fixedBodyView,s._rightBodyView,s._headerView,s._fixedHeaderView,s._rightHeaderView,s._headerSummaryView,s._fixedHeaderSummaryView,s._rightHeaderSummaryView,s._footerView,s._fixedFooterView,s._rightFooterView,s._headView,s._sumView,s._footView],h=l.length-1;h>=0;h--){var u=l[h];s._tableViews[u.$_hash]=u}return s._contentPane.addChild(s._bodyView),s._contentPane.addChild(s._footerView),s._contentPane.addChild(s._headerSummaryView),s._contentPane.addChild(s._headerView),s._fixedContentPane.addChild(s._fixedBodyView),s._fixedContentPane.addChild(s._fixedFooterView),s._fixedContentPane.addChild(s._fixedHeaderSummaryView),s._fixedContentPane.addChild(s._fixedHeaderView),s._rightContentPane.addChild(s._rightBodyView),s._rightContentPane.addChild(s._rightFooterView),s._rightContentPane.addChild(s._rightHeaderSummaryView),s._rightContentPane.addChild(s._rightHeaderView),s._leftContentPane.addChild(s._rowBarContainer),s._leftContentPane.addChild(s._footView),s._leftContentPane.addChild(s._sumView),s._leftContentPane.addChild(s._headView),s._doCreateOtherElements(),s._selectionLayer=s._createSelectionLayer(),s.addElement(s._selectionLayer),s._feedbackLayer=new Rs(a,"feedbackLayer"),s.addElement(s._feedbackLayer),s._rowHoverView=new Rh(a),s.addFeedbackElement(s._rowHoverView),s._hscrollBar=new Ua(o,!1),s._vscrollBar=new Ua(o,!0),s._scrollEdge=new ja(a),s.addElement(s._hscrollBar),s.addElement(s._vscrollBar),s.addElement(s._scrollEdge),s._hscrollBar.addListener(s),s._vscrollBar.addListener(s),s._selections=new Ts(s),s._selections.addListener(s),s._fixedOptions=new Es(s),s._displayOptions=new $s(s),s._formatOptions=new rl(s),s._editOptions=new Nl(s),s._editorOptions=new Bl(s),s._copyOptions=new $l(s),s._pasteOptions=new Al(s),s._dataDropOptions=new mu(s),s._sortingOptions=new ll(s),s._filteringOptions=new Qh(s),s._mobileOptions=new jl(s),s._initStyles(),s._columns=new Xn(s),s._activeCellLayout=s._defaultCellLayout=new $n(s),s._delegate=s._createDelegate(),s._layoutManager=s._createLayoutManager(),s._editController=s._createEditController(),s._validationManager=new Hr(s),s._lookupProvider=new Mh,s._lookupProvider.addListener(s),s._clipboardManager=new $h(s),s._progressManager=new wu(s._container._containerDom),s._popupMenuManager=new Gh(s._container),s._popupMenuManager.addListener(s),s._tooltipManager=new ah(s),s._filterSelector=new ru(s._container,s._filteringOptions,s),s._toastManager=new al(s),s._currentIndex=new Hn(s),s._editorIndex=new Hn(s),s._focusedIndex=new Hn(s),r&&(s._shadowDom=new Su(s,n)),s}return o(s,i),s.createColumn=function(t){if(t){return"series"==t.type?new bn(t):new mn(t)}return null},s.prototype._doDispose=function(){return this.clearListener(),this._container=this._container.dispose(),this._gridObjects.length=0,this._header=this._header.dispose(),this._headerSummaries=this._headerSummaries.dispose(),this._footers=this._footers.dispose(),this._rowIndicator=this._rowIndicator.dispose(),this._stateBar=this._stateBar.dispose(),this._checkBar=this._checkBar.dispose(),this._body=this._body.dispose(),this._rootElement=this._rootElement.dispose(),this._contentPane=this._contentPane.dispose(),this._rightContentPane=this._rightContentPane.dispose(),this._fixedContentPane=this._fixedContentPane.dispose(),this._leftContentPane=this._leftContentPane.dispose(),this._sideContentPane=this._sideContentPane&&this._sideContentPane.dispose(),this._topContentPane=this._topContentPane&&this._topContentPane.dispose(),this._bodyView=this._bodyView.dispose(),this._fixedBodyView=this._fixedBodyView.dispose(),this._rightBodyView=this._rightBodyView.dispose(),this._headerView=this._headerView.dispose(),this._fixedHeaderView=this._fixedHeaderView.dispose(),this._rightHeaderView=this._rightHeaderView.dispose(),this._headerSummaryView=this._headerSummaryView.dispose(),this._fixedHeaderSummaryView=this._fixedHeaderSummaryView.dispose(),this._rightHeaderSummaryView=this._rightHeaderSummaryView.dispose(),this._footerView=this._footerView.dispose(),this._fixedFooterView=this._fixedFooterView.dispose(),this._rightFooterView=this._rightFooterView.dispose(),this._rowBarContainer=this._rowBarContainer.dispose(),this._headView=this._headView.dispose(),this._sumView=this._sumView.dispose(),this._footView=this._footView.dispose(),this._selectionLayer=this._selectionLayer.dispose(),this._feedbackLayer=this._feedbackLayer.dispose(),this._hscrollBar=this._hscrollBar.dispose(),this._vscrollBar=this._vscrollBar.dispose(),this._scrollEdge=this._scrollEdge.dispose(),this._selections=this._selections.dispose(),this._fixedOptions=this._fixedOptions.dispose(),this._displayOptions=this._displayOptions.dispose(),this._formatOptions=this._formatOptions.dispose(),this._editOptions=this._editOptions.dispose(),this._editorOptions=this._editorOptions.dispose(),this._copyOptions=this._copyOptions.dispose(),this._pasteOptions=this._pasteOptions.dispose(),this._sortingOptions=this._sortingOptions.dispose(),this._filteringOptions=this._filteringOptions.dispose(),this._mobileOptions=this._mobileOptions&&this._mobileOptions.dispose(),this._columns=this._columns.dispose(),this._activeCellLayout=null,this._defaultCellLayout=this._defaultCellLayout.dispose(),this._delegate=this._delegate.dispose(),this._layoutManager=this._layoutManager.dispose(),this._editController=this._editController&&this._editController.dispose(),this._filterSelector=this._filterSelector.dispose(),this._toastManager=this._toastManager.dispose(),this._tableViews=null,this._lookupProvider=this._lookupProvider&&this._lookupProvider.dispose(),this._columnSummaryRuntime=this._columnSummaryRuntime&&this._columnSummaryRuntime.dispose(),this._popupMenuManager=this._popupMenuManager&&this._popupMenuManager.dispose(),this._tooltipManager=this._tooltipManager&&this._tooltipManager.dispose(),this._focusedIndex=this._focusedIndex.dispose(),this._scrollTipView=this._scrollTipView&&this._scrollTipView.dispose(),this._shadowDom&&(this._shadowDom=this._shadowDom.dispose()),Hn.clearTemp(),i.prototype._doDispose.call(this)},Object.defineProperty(s.prototype,"debugging",{get:function(){return this._debugging},set:function(t){t!=this._debugging&&(this._debugging=t,t?(this.addChild(this._debugView),this.invalidateLayout()):this.removeChild(this._debugView))},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"activeTool",{get:function(){return this.container.activeTool},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(t){(t=Math.max(0,t))!=this._scrollBarWidth&&(this._scrollBarWidth=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"scrollBarHeight",{get:function(){return this._scrollBarHeight},set:function(t){(t=Math.max(0,t))!=this._scrollBarHeight&&(this._scrollBarHeight=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"editorLender",{get:function(){return this._editorLender},set:function(t){this._editorLender=t},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"footers",{get:function(){return this._footers},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"footer",{get:function(){return this._footers.get(0)},enumerable:!0,configurable:!0}),s.prototype.setFooters=function(t){this._footers.assignFrom(t)},Object.defineProperty(s.prototype,"headerSummaries",{get:function(){return this._headerSummaries},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"headerSummary",{get:function(){return this._headerSummaries.get(0)},enumerable:!0,configurable:!0}),s.prototype.setHeaderSummaries=function(t){this._headerSummaries.assignFrom(t)},Object.defineProperty(s.prototype,"rowIndicator",{get:function(){return this._rowIndicator},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"checkBar",{get:function(){return this._checkBar},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"stateBar",{get:function(){return this._stateBar},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"activeCellLayout",{get:function(){return this._activeCellLayout},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"cellLayout",{set:function(t){this._beforeChangeLayout();var e=this.isValid(this._focusedIndex)&&this._focusedIndex.layout.firstColumn;this._activeCellLayout&&this._activeCellLayout!==this._defaultCellLayout&&this._activeCellLayout.dispose();var i=t&&new Bn(this).load(t),o=this._focusedIndex&&this._focusedIndex.clone();this._activeCellLayout=i||this._defaultCellLayout,this._activeCellLayout.resetColumns(this._columns),this._activeCellLayout.invalidate(),this.refreshView(),o&&e&&setTimeout(function(){o.layout=this._activeCellLayout.layoutByColumn(e),this.setFocusedIndex(o)}.bind(this),10),this._cellLayoutDirty=!0,this.clearRowHeights(),this._populateMerges()},enumerable:!0,configurable:!0}),s.prototype._cellLayoutChanged=function(){this._cellLayoutDirty=!0,this._shadowDom&&this._shadowDom.setColumns(!1)},Object.defineProperty(s.prototype,"layoutCount",{get:function(){return this._activeCellLayout.visibleCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"visibleLayoutCount",{get:function(){return this._activeCellLayout.visibleCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"columnCount",{get:function(){return this._columns.count},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataSource",{get:function(){return this._items?this._items.dataSource:null},set:function(t){this.dataSource;this._items&&(this._items.dataSource=t),this.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"itemSource",{get:function(){return this._items},set:function(t){this._items&&this._items.removeListener(this),this._items=t,this._items&&this._items.addListener(this)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"maxItemCount",{get:function(){return this.itemSource.maxItemCount},set:function(t){this.itemSource.maxItemCount=Math.max(0,t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"itemCount",{get:function(){return this._items?this._items.itemCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowCount",{get:function(){return this._items?this._items.rowCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"visibleRowCount",{get:function(){return this._items?this._items.rowCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataCount",{get:function(){var t=this.dataSource;return t?t.rowCount:0},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"columnSummaryRuntime",{get:function(){return this._columnSummaryRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"columnValidationRuntime",{get:function(){return this._columnValidationRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowValidationRuntime",{get:function(){return this._rowValidationRuntime},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"focusedIndex",{get:function(){return this._focusedIndex},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"focusedLayout",{get:function(){return this._focusedIndex&&this._focusedIndex.layout},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"focusedColumn",{get:function(){return this._focusedIndex&&this._focusedIndex.layout&&this._focusedIndex.layout.firstColumn},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"focusedRow",{get:function(){return this._focusedIndex?this._focusedIndex.itemIndex:-1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"focusedItem",{get:function(){return this._focusedIndex&&this._focusedIndex.item},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rowBarContainer",{get:function(){return this._rowBarContainer},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topContentPane",{get:function(){return this._topContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sideContentPane",{get:function(){return this._sideContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"leftContentPane",{get:function(){return this._leftContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"contentPane",{get:function(){return this._contentPane},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedContentPane",{get:function(){return this._fixedContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightContentPane",{get:function(){return this._rightContentPane},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"bodyView",{get:function(){return this._bodyView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedBodyView",{get:function(){return this._fixedBodyView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightBodyView",{get:function(){return this._rightBodyView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"headerView",{get:function(){return this._headerView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedHeaderView",{get:function(){return this._fixedHeaderView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightHeaderView",{get:function(){return this._rightHeaderView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"headerSummaryView",{get:function(){return this._headerSummaryView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedHeaderSummaryView",{get:function(){return this._fixedHeaderSummaryView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightHeaderSummaryView",{get:function(){return this._rightHeaderSummaryView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"footerView",{get:function(){return this._footerView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedFooterView",{get:function(){return this._fixedFooterView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"rightFooterView",{get:function(){return this._rightFooterView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"headView",{get:function(){return this._headView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sumView",{get:function(){return this._sumView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"footView",{get:function(){return this._footView},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"fixedOptions",{get:function(){return this._fixedOptions},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"displayOptions",{get:function(){return this._displayOptions},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"formatOptions",{get:function(){return this._formatOptions},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"editOptions",{get:function(){return this._editOptions},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"editorOptions",{get:function(){return this._editorOptions},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"copyOptions",{get:function(){return this._copyOptions},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"pasteOptions",{get:function(){return this._pasteOptions},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"dataDropOptions",{get:function(){return this._dataDropOptions},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sortingOptions",{get:function(){return this._sortingOptions},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filteringOptions",{get:function(){return this._filteringOptions},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"mobileOptions",{get:function(){return this._mobileOptions},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"delegate",{get:function(){return this._delegate},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"heightMeasurer",{get:function(){return this.container.heightMeasurer},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"layoutManager",{get:function(){return this._layoutManager},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selections",{get:function(){return this._selections},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"selectionLayer",{get:function(){return this._selectionLayer},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"editController",{get:function(){return this._editController},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"validations",{get:function(){return this._validations},set:function(t){this._validations.assignFrom(t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"validationManager",{get:function(){return this._validationManager},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"popupMenuManager",{get:function(){return this._popupMenuManager},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"tooltipManager",{get:function(){return this._tooltipManager},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"toastManager",{get:function(){return this._toastManager},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topIndex",{get:function(){return this._topIndex},set:function(t){(t=Math.max(0,Math.min(t,this.itemCount-this.layoutManager.fixedItemCount-1,this._vscrollBar?this._vscrollBar.maxPosition:0)))!=this._topIndex&&(this._topIndex=t,this.refreshView(),lt.isMobile()&&this.isEditing()&&!this.isItemEditing()?this.closePopups(!1):this.closePopups())},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"topItem",{get:function(){return this._topIndex+this.layoutManager.fixedItemCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"leftPos",{get:function(){return this._leftPos},set:function(t){(t=Math.max(0,Math.min(t,this._hscrollBar?this._hscrollBar._maxPosition:0)))!=this._leftPos&&(this._leftPos=t,this._displayOptions.refreshMode==R.VISIBLE_ONLY?this.refreshView():(this._horzScrolled=!0,this.invalidate()),this.closePopups()),this._displayOptions.refreshMode!=R.VISIBLE_ONLY&&this._debugging&&this._debugView.layout()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"leftCell",{get:function(){return this._layoutManager.getCellIndex(this.leftPos)},set:function(t){this.leftPos=this._layoutManager.getCellPoint(t)},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"leftLayout",{get:function(){return this._layoutManager.firstLayout},set:function(t){var e=this._layoutManager;t=Math.max(e.fixedLayoutCount,Math.min(t,e.layoutCount-1)),this.leftPos=e.getLayoutBounds(t).x},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"undoable",{get:function(){return!1},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"undoing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"redoing",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filtering",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"lookupProvider",{get:function(){return this._lookupProvider},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"canHovering",{get:function(){return!this.isEditing()},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"hoveredCell",{get:function(){return this._hoveredCell},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"empty",{get:function(){return 0==this.itemCount||0==this.visibleLayoutCount},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"sorted",{get:function(){return this.itemSource.sorted},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"spanned",{get:function(){return this._bodyView.visible&&this._bodyView.spanned||this._fixedBodyView.visible&&this._fixedBodyView.spanned||this._rightBodyView.visible&&this._rightBodyView.spanned},enumerable:!0,configurable:!0}),s.prototype.addFeedbackElement=function(t){if(t&&!this._feedbackLayer.contains(t))return this._feedbackLayer.addChild(t),!0},s.prototype.removeFeedbackElement=function(t){var e=this._feedbackLayer.indexOf(t);return e>=0&&(this._feedbackLayer.removeChildAt(e),!0)},s.prototype.setEventFrom=function(t){this._eventFrom=t},s.prototype.getVisibleLayout=function(t){return this._activeCellLayout.getVisible(t)},s.prototype.getColumn=function(t){return this._columns.getColumn(t)},s.prototype.setColumns=function(t){this._columns.setColumns(t),this._columnMap={};for(var e=this._columns.count-1;e>=0;e--){var i=this._columns.getColumn(e);this._columnMap[i.$_hash]=i}this._columnsReset(),this.dataSource&&this.applyFilters()},s.prototype._checkEditing=function(){if(this.itemSource instanceof co&&this.itemSource.isEditing())throw"Item is editing"},s.prototype.addColumn=function(t,e){this._checkEditing();var i=this._columns.add(t,e);return i&&(this._columnMap[i.$_hash]=i,this._columnsReset(),this.dataSource&&this.applyFilters()),i},s.prototype.removeColumn=function(t){return"string"==typeof t&&(t=this.columnByName(t)),!!t&&(this._checkEditing(),!!this._columns.remove(t)&&(delete this._columnMap[t.$_hash],this._columnsReset(),this.dataSource&&this.applyFilters(),!0))},s.prototype.restoreColumns=function(t){this._columns.restoreColumns(),this._columnsReset()},s.prototype.linearizeColumns=function(t){var e=this._activeCellLayout.collectColumns(!0,!0,!0);if(t=lt.makeArray(t),e&&e.length>0){if(t&&t.length>0)for(var i=function(i){e.sort((function(e,o){var r=e[t[i]],n=o[t[i]];return r<n?1:r>n?-1:0}))},o=0;o<t.length;o++)i(o);var r=[];e.forEach((function(t){r.push(t.name)})),this.cellLayout=r}},s.prototype.registerColumnLayouts=function(t){this._columnLayouts.load(t)},s.prototype.findColumnLayout=function(t){return this._columnLayouts.find(t)},s.prototype.invalidateColumn=function(t){this._columnLock<=0&&this._resetColumnIndices(t),this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},s.prototype.invalidateColumns=function(){this._columnLock,this._columnsDirty||(this._columnsDirty=!0,this.refreshView())},s.prototype.beginUpdate=function(){this._updateLock=!0},s.prototype.endUpdate=function(t){(t||this._updateLock)&&(this._updateLock=!1,this.refreshView())},s.prototype.invalidate=function(){this._container&&this._container.invalidate(!1)},s.prototype.invalidateLayout=function(){this._updateLock||this._loading||(i.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},s.prototype.invalidateCellLayouts=function(){this._updateLock||(this.clearRowHeights(),i.prototype.invalidateLayout.call(this),this._columnsDirty=!0)},s.prototype.refreshView=function(t){if(!this._loading){if(t){var e=this._container;e._layoutNeeded=!0,e._render(Date.now())}else this.invalidateLayout();this.topIndex=this.topIndex,this.leftPos=this.leftPos}},s.prototype.resetGrid=function(){this._resetting=!0,this.topIndex=0,this.leftPos=0,this.refreshView()},s.prototype.getFirstCell=function(){if(this.itemCount>0){for(var t=0,e=0,i=this.itemCount;e<i;e++)if(this.getItem(e)instanceof io){t=e;break}return new Hn(this,t>=0?t:0,this.getFirstColumn())}return null},s.prototype.$_setEditFocused=function(t,e){if(t!=this.$_editFocused){if(this.$_editFocused=t,t&&this.$_showFocusCell){var i=this.focusedIndex;!i||this.isValid(i)}this.$_showFocusCell=!1}t&&"focusin"==e.type&&lt.isAncestorOf(this._container._container,e.target)&&Ja.setActiveGrid(this.container.$_hash)},s.prototype.getItem=function(t){return this._items.getItem(t)},s.prototype.getItemIndexOfRow=function(t){return this._items.getIndexOfRow(t,!1)},s.prototype.getItemOfRow=function(t,e){return this._items.getItemOfRow(t,e)},s.prototype.getItemIndicesOfRows=function(t){return this._items.getIndicesOfRows(t,!1)},s.prototype.getRowOfItem=function(t){var e=this.getItem(t);return e?e.dataRow:-1},s.prototype.getItemOfModel=function(t){return null},s.prototype.getRowsOfItems=function(t,e){void 0===e&&(e=!1);for(var i=[],o=0,r=t;o<r.length;o++){var n=r[o],s=this.getItem(n),a=s?s.dataRow:-1;(e||a>=0)&&i.push(a)}return i},s.prototype.getIndicatorIndex=function(t){return t.index},s.prototype.getAllItems=function(){return this._items.getAllItems()},s.prototype.getImage=function(t){return null},s.prototype.getIndex=function(t,e){return void 0===t&&(t=-1),void 0===e&&(e=null),new Hn(this,t,e)},s.prototype.getDataCellIndex=function(t,e){var i=t.parentElement,o=this._tableViews[i.$_view],r=i.$_row,n=o.layoutByCell(t);return null!=e?e.set(r,n):Hn.temp(this,r,n)},Object.defineProperty(s.prototype,"handler",{get:function(){return this.$_handler},enumerable:!0,configurable:!0}),s.prototype.getDataColumns=function(t){return void 0===t&&(t=!0),this._activeCellLayout.getDataColumns(t)},s.prototype.optionsChanged=function(t){this.refreshView()},s.prototype.scrollRow=function(t){var e=this.topIndex;this.topIndex=e+t,t=this.topIndex-e},s.prototype.selectColumnFilters=function(t){if(this.isItemEditing(null)){if(!this.filteringOptions.commitBeforeFiltering)return;try{this.commit(!1)}catch(t){var e=this.focusedItem;if(e&&t instanceof Vr)return void((t=this._fireValidationFail(e.index,t.column,t))&&alert(this.editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()));throw t}}this._fireFiltering()&&(this.hideEditor(!1),this._filterSelector.show(t.layout.firstColumn,t.cell,this.dataSource))},s.prototype.closeFilterSelector=function(){this._filterSelector.hide()},s.prototype.closePopups=function(t){void 0===t&&(t=!0),this.filtering||this._filterSelector.hide(),this._popupMenuManager.close(),this._tooltipManager.close(),t&&this._editController.closeList(!1)},s.prototype.layoutByDataCell=function(t){var e=t.parentElement;return this._tableViews[e.$_view].layoutByCell(t)},s.prototype.columnByHash=function(t){return this._columnMap[t]},s.prototype.columnByDataCell=function(t){return this._bodyView.columnByCell(t)||this._fixedBodyView.columnByCell(t)||this._rightBodyView.columnByCell(t)},s.prototype.columnByName=function(t){return this._columns.columnByName(t)},s.prototype.columnByField=function(t){return"string"==typeof t&&(t=this.dataSource.getFieldIndex(t)),this._columns.columnByField(t)},s.prototype.getHorzColumns=function(t,e){return this._activeCellLayout.getHorzColumns(t,e)},s.prototype.getGroupLevel=function(t){return-1},s.prototype.isGroupedColumn=function(t){return!1},s.prototype.layoutByColumn=function(t){return t instanceof gn||(t=this.columnByName(t)),t?this._activeCellLayout.layoutByColumn(t):null},s.prototype.layoutByName=function(t){return this._activeCellLayout.layoutByName(t)},s.prototype.setFocus=function(t){function e(t){this.$_showFocusCell=!0;var e=this.focusedIndex.clone();e&&!this.isValid(e)&&(e.set(Math.max(this.topItem,0),this.getFirstColumn(),this),this.setFocusedIndex(e,!0,!0)),lt.isMobile()?this.container.setFocus():this._editController.setFocus(!0,t),Ja.getActiveGrid()!==this&&Ja.setActiveGrid(this.container.$_hash)}this.activeCellLayout.visibleCount>0?e.call(this,t):(this._setFocusTimer&&clearTimeout(this._setFocusTimer),this._setFocusTimer=setTimeout(function(){this._setFocusTimer=null,e.call(this,t)}.bind(this),10))},s.prototype.getFirstLayout=function(){return this._activeCellLayout.first},s.prototype.getFirstColumn=function(){return this._activeCellLayout.firstColumn},s.prototype.collectColumns=function(t,e,i){return this._activeCellLayout.collectColumns(t,e,i)},s.prototype.collectColumnNames=function(t,e){return this._activeCellLayout.collectColumnNames(t,e)},s.prototype.collectGroupNames=function(){return this._activeCellLayout.collectColumnNames(!1,!1,!0)},s.prototype.getChildColumnNames=function(t){return this._activeCellLayout.collectColumnNames(!1,!1,!1,t)},s.prototype.collectDataColumns=function(t,e){return this._activeCellLayout.collectDataColumns(t,e)},s.prototype.isValid=function(t){return t&&t.grid===this&&t.itemIndex>=0&&t.itemIndex<this.itemCount&&t.layout&&t.layout.grid===this},s.prototype.getSelection=function(){return this._selections.count>0?this._selections.getItem(0):null},s.prototype.clearSelection=function(){var t=this.focusedIndex;this._selections.clear(),this.isValid(t)&&this.itemCount>0&&this.visibleLayoutCount>0&&this._selections.add(t,t,this._displayOptions.selectionStyle)},s.prototype.deleteSelection=function(t){void 0===t&&(t=!1),this.$_deleteSelection(null,t)},s.prototype.$_deleteSelection=function(t,e){function i(t,e){try{if(e&&e.length>0){for(var i=[],o=0,r=e.length;o<r;o++){var n=t.getItem(e[o]);n&&n.dataRow>=0&&i.push(n.dataRow)}if(i.length>0&&!t._fireRowsDeleting(i))return!1}}catch(t){return alert(t),!1}return!0}function o(t,o){return!!o&&((e||!t.editOptions.confirmWhenDelete||confirm(t.editOptions.deleteRowsMessage)&&function(t,e){var o=[];return o.push(e),i(t,o)}(t,o.dataRow))&&(t.cancel(),Qi(o.itemState)||t.itemSource.remove(o)),!0)}function r(t,e){for(var i=null,o=e.length;o--;){var r=t.getItem(e[o]),n=r.itemState;if(Ji(n)){i=r,Qi(n)&&e.splice(o,1);break}}var s=null;e.length>0&&(s=t.itemSource.getRemovableRows(e)),i&&t.cancel(),s&&t.itemSource.removeRows(s)}void 0===e&&(e=!1);var n=this.editOptions,s=this.selections,a=this.itemSource;if((e||n.deletable)&&a instanceof co)if(!this.isItemEditing(null)||n.deletableWhenEdit){if(this.commitEditor(!0),o(this,t))return!0;if(!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i,r=-1;return(r=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1)>=0&&t.canDelete(i=t.getItem(r))&&o(t,i),!0}return!1}(this,s)){for(var l=s.count,h=[],u=0;u<l;u++){var c=s.getItem(u);if(c.style==ls.ROWS||c.style==ls.BLOCK)for(var d=c.getBounds(),p=Math.min(d.r1,d.r2),_=Math.max(d.r1,d.r2),f=p;f<=_;f++){var g=this.getItem(f);(g.dataRow>=0||g.editable)&&h.push(f)}}h.sort((function(t,e){return e-e}));var y=-1;for(u=h.length;u--;)h[u]==y?h.splice(u,1):y=h[u];h.length>0&&this.canDelete(this.getItem(h[0]))&&(e||!n.confirmWhenDelete?i(this,h)&&(r(this,h),this.clearSelection()):confirm(n.deleteRowsMessage)&&i(this,h)&&(r(this,h),this.clearSelection()))}}else alert(window.RG_CONST&&window.RG_CONST.COMMITEDITING?window.RG_CONST.COMMITEDITING:"먼저 편집을 완료 하십시오.")},s.prototype.revertSelection=function(t){void 0===t&&(t=!1);var e=this.editOptions,i=this.selections,o=this.itemSource;if((t||e.revertable)&&o instanceof co&&(this.commitEditor(!0),!function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=-1;if((i=0==e.count?t.focusedIndex.itemIndex:e.getItem(0).getBounds().r1)>=0)return t.itemSource.revert(i),!0}return!1}(this,i))){for(var r=i.count,n=[],s=0;s<r;s++){var a=i.getItem(s);if(a.style==ls.ROWS||a.style==ls.BLOCK)for(var l=a.getBounds(),h=Math.min(l.r1,l.r2),u=Math.max(l.r1,l.r2),c=h;c<=u;c++){var d=this.getItem(c);(d.dataRow>=0||d.editable)&&n.push(c)}}n.sort((function(t,e){return e-e}));var p=-1;for(s=n.length;s--;)n[s]==p?n.splice(s,1):p=n[s];n.length>0&&o.revertAll(n)}},s.prototype.eraseSelection=function(){var t=this.editOptions,e=this.selections,i=this.itemSource;if(t.readOnly||!t.erasable||!t.updatable)return!1;if(!(i instanceof co))return!1;if(this.isItemEditing())return!1;if(function(t,e){if(0==e.count||1==e.count&&e.getItem(0).single){var i=t.focusedIndex;return t.setCellValue(i,void 0),!0}return!1}(this,e))return!0;var o=e.count;if(o<1)return!1;for(var r=[],n=0;n<o;n++){var s=e.getItem(n);s.style!=ls.ROWS&&s.style!=ls.BLOCK||(r=r.concat(s.getItems()))}if(r.length>0){for(n=0;n<o;n++)e.getItem(n).setValues(void 0);return!0}},s.prototype.getSelectedItems=function(t){void 0===t&&(t=!1);var e=this._selections.getItem(0);return e&&e.getItems(t)},s.prototype.getSelectedItemIndices=function(t){void 0===t&&(t=!1);var e=this._selections.getItem(0);return e&&e.getItemIndices(t)},s.prototype.getSelectedRows=function(){var t=this._selections.getItem(0);return t&&t.getRows()},s.prototype.setFocusedIndex=function(t,e,i){if(void 0===e&&(e=!0),void 0===i&&(i=!1),!this._focusing&&!this.disposing){this._focusing=!0;try{return this.$_doSetFocusedIndex(t,e,i)}finally{this._focusing=!1}}},s.prototype.setFocusedItem=function(t){t instanceof eo&&(t=t.index),this.setFocusedIndex(this.getIndex(t))},s.prototype.resetFocusedIndex=function(){this.setFocusedIndex(this._focusedIndex)},s.prototype.clearFocusedIndex=function(t){if(void 0===t&&(t=!1),!this._focusing&&!this.disposing){this._focusing=!0;try{var e=void 0;t&&this.focusedRow>=this.itemCount&&((e=this.focusedIndex.clone()).itemIndex=Math.max(-1,this.itemCount-1)),this.$_doSetFocusedIndex(e,!1,!1,!1)}finally{this._focusing=!1}}},s.prototype.getTableCell=function(t){if(!t)return null;for(var e=t,i=rt(e);e&&!(e instanceof i.HTMLTableCellElement);)e=e.parentElement;if(e instanceof i.HTMLTableCellElement&&e.parentElement){var o=e.parentElement.$_view;if(o)return e;for(e=e.parentElement;e;){if(e instanceof i.HTMLTableCellElement&&(o=e.parentElement.$_view))return e;e=e.parentElement}}return null},s.prototype.getTableView=function(t){return this._tableViews[t.parentElement.$_view]},s.prototype.getBodyViewAt=function(t){return this._layoutManager.getBodyView(t)},s.prototype.getBodyView=function(t){return this.getTableView(t)},s.prototype.getRowView=function(t,e){return t.getRowView(e)},s.prototype.getHeaderView=function(t){return this.getTableView(t)},s.prototype.getFooterView=function(t){return this.getTableView(t)},s.prototype.getSummaryView=function(t){return this.getTableView(t)},s.prototype.getCellType=function(t){if(t){var e=t.parentElement;if(-99===e.$_row)return"fixedbar";var i=this._tableViews[e.$_view];if(!(i instanceof va))return i instanceof yh?i.getCellType(t):i instanceof Ia?"header":i instanceof ka?"footer":i instanceof qh?"summary":i instanceof el?"head":i instanceof ol?"foot":i instanceof Jh?"sum":this._getCellTypeOf(i);var o=i.bodyCellByCell(t);if(o)return o.item instanceof no?"groupFooter":"data"}},s.prototype._getCellTypeOf=function(t){},s.prototype.getBodyCellAt=function(t,e){var i=this._layoutManager,o=this._bodyView.visible&&this._bodyView.getCellAt(i,t)||this._fixedBodyView.visible&&this._fixedBodyView.getCellAt(i,t)||this._rightBodyView.visible&&this._rightBodyView.getCellAt(i,t);return o&&e&&o.merged&&o.head?o.head:o},s.prototype.getBodyCellbyCell=function(t){return this.getBodyCellAt(this.cellToIndex(t),!1)},s.prototype.cellToIndex=function(t){var e=Hn.temp(this,-1,null);if((t=this.getCellViewOf(t))instanceof rt(t).HTMLTableCellElement){var i=this.getBodyView(t);i&&(e.layout=i.layoutByCell(t),e.itemIndex=t.parentElement.$_row)}return e},s.prototype.cellToContainer=function(t,e){void 0===e&&(e=null);var i=e||new Ss,o=this.getTableView(t);o.getCellPoint(t,e);var r=o.boundsByContainer(N.Temp.set(e.x,e.y,0,0));return i.set(r.x,r.y),i},s.prototype.pointToIndex=function(t,e,i,o){var r=Hn.temp(this,-1,null);return o?this._layoutManager.mouseToIndex(this.getCellViewOf(t),e,i,r):this._layoutManager.mouseToIndexEx(this.getCellViewOf(t),e,i,r),r},s.prototype.getEditCellBounds=function(t,e){if(this._editorLender)return this._editorLender.getEditBounds(t,e);var i=this.layoutManager,o=i.getBodyView(e);if(o.getCellAt(i,e)){var r=o.getCellRectAt(i,e,!1);return r=o.boundsByContainer(r),!e.colFixed&&r.width>i.nonFixedBounds.width&&(r.width=i.nonFixedBounds.width),r}return ku.clone()},s.prototype.getEditBounds=function(t,e){if(this._editorLender)return this._editorLender.getEditBounds(t,e);var i=e.item;if(!i)return null;var o=this.layoutManager,r=o.fixedItemCount;if(r>0&&i.index>=r&&i.index-r<o.topIndex)return ku.clone();var n=o.getBodyView(e),s=n.getCellAt(o,e);if(s){s=s.merged?s.head:s;var a=n.getCellRectAt(o,e,!1);return(a=n.boundsByContainer(a)).width-=(t.native?0:s.editWidth)+s.buttonWidth+s.errorWidth,a}return ku.clone()},s.prototype.getCellViewOf=function(t){for(var e=rt(t);t;){if(t instanceof e.HTMLTableCellElement)return t;t=t.parentElement}return null},s.prototype.getFocusedCellView=function(t){var e=t.item;if(!e)return null;var i=this.layoutManager,o=i.fixedItemCount;if(o>0&&e.index>=o&&e.index-o<i.topIndex)return null;var r=e.merged,n=t.colFixed,s=t.rightFixed;return e.isData||r?(s?this._rightBodyView:n?this._fixedBodyView:this._bodyView).getCellView(i,t):null},s.prototype.isFocusedCell=function(t){return Hn.areEquals(t,this._focusedIndex)},s.prototype.isFocusedRow=function(t){return this._focusedIndex.itemIndex==t},s.prototype.isFocusedColumn=function(t){return this._focusedIndex.column===t},s.prototype.pasteFromClipboard=function(t,e){var i=this.focusedIndex.clone();if(i.normalize(this),this.isValid(i)&&i.dataColumn&&this.pasteOptions.enabled&&this._firePaste(i,e))try{this._pasteOptions.singleMode?this._clipboardManager.pasteCellFromClipboard(i,t):(this._clipboardManager.pasteFromClipboard(i,t),i.item&&Ji(i.item.itemState)&&this.refreshView()),this.requestPrepareEditor(),this._firePasted()}catch(t){throw t instanceof Vr&&(t=this._fireValidationFail(this._clipboardManager.appendingIndex.itemIndex,t.column,t))&&alert(this._editOptions.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),t}},s.prototype.copyToClipboard=function(t,e,i){void 0===i&&(i=!1);var o,r=!1,n=this.focusedIndex;if(i||this.copyOptions.enabled){if(!i){var s=this.selections;o=(r=this.copyOptions.singleMode||0==s.count||s.single)?new Ms(s,ls.BLOCK,n,n):s.getItem(0),i=this._fireCopy(o,t)}return i?(e=e||o.getBounds(),r?this._clipboardManager.copyCellToClipboard(n):this._clipboardManager.copyToClipboard(e)):null}return this._clipboardManager.copyEmtpyToClipboard()},s.prototype.toClipboard=function(t,e){void 0===e&&(e=!0);var i=function(t){var e;return"string"==typeof t?e=this.columnByName(t):t instanceof gn&&(e=t),e&&e.layout}.bind(this);if(!this.empty){var o;if(!(t&&t instanceof zn)){var r=void 0,n=void 0;if(t?(r=i(t.startColumn),n=i(t.endColumn)):(r=this._activeCellLayout.getVisible(0),n=this._activeCellLayout.getVisible(this._activeCellLayout.visibleCount-1)),!r||!n)return;var s=null==(t=t||{}).startItem?0:Math.max(0,t.startItem),a=null==t.endItem?this.itemCount-1:Math.min(t.endItem,this.itemCount-1);o=zn.createRange(s,r,a,n)}var l=this.copyToClipboard(null,o,!0);if(l=null==l?"":l,!e)return l;if(window.clipboardData)window.clipboardData.setData("text",l);else{var h=this.doc,u=h.createElement("textarea");h.body.appendChild(u),u.value=l,u.select(),h.execCommand("copy"),setTimeout((function(){h.body.removeChild(u),u=null}),100)}}},s.prototype.showToast=function(t,e){this._toastManager.show(t,e,null)},s.prototype.hideToast=function(t){this._toastManager.close(),t&&setTimeout(t,0)},s.prototype.isEditing=function(t){return this._editorLender?this._editController.editing&&this._editorLender.isEditing():this._editController.editing&&(!t||Hn.areEquals(t,this._editController.editIndex))},s.prototype.getEditItem=function(){return this._editorLender?this._editorLender.getEditItem(this):this.itemSource instanceof co&&this.itemSource.editingItem},s.prototype.isItemEditing=function(t){return(t=this._editorLender?this._editorLender.getEditItem(this):t||this.focusedIndex.item)&&this.itemSource instanceof co&&this.itemSource.isEditing(t)},s.prototype.isItemEdited=function(t){return(t=this._editorLender?this._editorLender.getEditItem(this):t||this.focusedIndex.item)&&this.itemSource instanceof co&&this.itemSource.isEdited(t)},s.prototype.getEditValue=function(t,e,i){this._doGetEditValue(e,i)},s.prototype._doGetEditValue=function(t,e){this._fireGetEditValue(t,e)},s.prototype.isCellEditing=function(){return!!this._editOptions.commitByCell&&this._items.isUpdating},s.prototype.editorCommit=function(t,e,i){return this._doCellCommit(t,e,i)},s.prototype._doCellCommit=function(t,e,i){return this._editorLender?this._editorLender.editCellCommit(t,e,i):this._fireEditCommit(t,e,i)},s.prototype.editorActivated=function(t){this._doEditorActivated(t.editIndex,!0)},s.prototype._doEditorActivated=function(t,e){var i=this.getBodyCellAt(t,!1),o=i&&this.getBodyView(i.cell);o&&o.$_buttonZIndexChanged(this,i,e)},s.prototype.setCellUpdateEventLock=function(t){this._cellUpdateEventLock=t},s.prototype.$_validateCellValue=function(t,e){t.dataColumn;try{var i=Qi(t.item.itemState);return this._validationManager.validateCell(t,i,!1),!0}catch(e){if(!(e instanceof Vr))throw e;this._validationManager.addInvalidateCell(t,e)}return!1},s.prototype.$_refreshInvalidList=function(t){this.itemCount<=0||t?this.validationManager.clearInvalidateList():this.validationManager.checkRowIds()},s.prototype.validateCellCommit=function(t,e){this.editOptions.validateOnEdited&&this.$_validateCellValue(t,e)},s.prototype.validateCells=function(t,e){return this._validationManager.validateCells(t,e)},s.prototype.getInvalidCells=function(){return this._validationManager.getInvalidCells()},s.prototype.clearInvalidCells=function(){this._validationManager.clearInvalidCells()},s.prototype.getEditableAt=function(t,e){if(!this._editorLender){var i=t.dataColumn;if(!i)return!1;if(e&&null!=e.editable)return e.editable;if(t.item.isDataRow){var o=t.item;if(null!=o.editable)return o.editable}var r=this.editOptions;if(r.columnEditableFirst){if(!(null!=i.editable?i.editable:r.editable))return!1}else{if(!r.editable)return!1;if(!1===i.editable)return!1}var n=this.fixedOptions;return!(t.colFixed&&!n.editable)&&!(t.rowFixed&&!n.rowEditable)}},s.prototype.getReadOnlyAt=function(t,e){if(!this._editorLender){var i=t.dataColumn;if(!i)return!0;var o,r,n=this._items.getItem(t.itemIndex);return!n||(e&&null!=e.readOnly?e.readOnly:(n=n.merged&&n instanceof oo?n.firstDataItem:n,!this.editOptions.updatable&&(o=n.itemState,r=n.rowState,o!=wi.INSERTING&&o!=wi.APPENDING&&r!=at.CREATED)||(!this._items.canUpdate(n,i.dataIndex)||(!!this._editOptions.readOnly||!!i.readOnly))))}},s.prototype.getWritableAt=function(t){if(!this._editorLender){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t),o=i.merged&&i.head||i;if(i)return(null==i.editable||i.editable||o.renderer2&&o.renderer2.canEdit())&&!i.readonly;var r=t.dataColumn,n=this.body.getCell(t,!1),s=n&&r.getCellStyle(n),a=void 0,l=void 0;return s&&"string"!=typeof s&&(a=null!==s.readOnly?s.readOnly:r.readOnly,l=null!==s.editable?s.editable:r.isWritable()),l&&!a}}},s.prototype.canEditAt=function(t){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);return i&&void 0!==i.editable?i.editable:this.getEditableAt(t,null)}},s.prototype.canWriteAt=function(t){var e=this.getBodyViewAt(t);if(e){var i=e.getCellAt(this._layoutManager,t);return i&&void 0!==i.readonly?!i.readonly:!this.getReadOnlyAt(t,null)}},s.prototype.canUpdate=function(t,e){return this.editOptions.canUpdate(t.rowState===at.CREATED)&&(this._editorLender||this.visibleLayoutCount>0)&&this.itemSource&&this.itemSource.canUpdate(t,e)},s.prototype.canAppend=function(){var t=this.itemSource,e=!this.isEditing()&&this.editOptions.canAppend()&&this.visibleLayoutCount>0&&t&&t.canAppend();if(e)try{if(!this._fireRowInserting(t.itemCount,-1))return!1}catch(t){return alert(t.message||t),!1}return e},s.prototype.canInsert=function(t,e,i){var o=this.itemSource,r=!this.isEditing()&&this._doCanInsert(t,e,i)&&this.editOptions.canInsert()&&this.visibleLayoutCount>0&&o&&o.canInsert(t);if(r)try{if(!this._fireRowInserting(t.index+(e?1:0),-1))return!1}catch(t){return alert(t.message||t),!1}return r},s.prototype._doCanInsert=function(t,e,i){return!0},s.prototype.canDelete=function(t){var e=this.itemSource;return this.editOptions.canDelete()&&this.visibleLayoutCount>0&&e&&(this.isItemEditing(t)||e.canDelete(t))},s.prototype.canCommit=function(t){return this.isItemEditing(t)&&(this.isItemEdited()||this.editOptions.commitWhenNoEdit)},s.prototype.canCancel=function(t){return this.isItemEditing(t)},s.prototype.edit=function(t){return t||(t=this.focusedIndex),!!(this.isValid(t)&&this.itemSource instanceof co)&&(!(t.dataColumn&&!this.canUpdate(t.item,t.dataField))&&(!Ji(t.item.itemState)&&this.validationManager.cloneError(t.dataId,-1),this.itemSource.edit(t.item)))},s.prototype.insertAt=function(t,e){return this.insert(this.getItem(t),e)},s.prototype.insert=function(t,e,i){if(void 0===t&&(t=null),void 0===e&&(e=!1),void 0===i&&(i=!1),t||(t=this.focusedIndex?this.focusedIndex.item:null),!t)return!1;var o=this.itemSource;if(o instanceof co&&this.canInsert(t,e,i)){var r=this.$_getInsertDefaults(null);return this._cancelDummy(),o.insert(t,r,e,i)}return!1},s.prototype.append=function(){var t=this.itemSource;if(t instanceof co&&t.dataSource&&this.canAppend()){var e=this.$_getInsertDefaults(null);return this._cancelDummy(),t.append(e)}return!1},s.prototype._appendDummy=function(){var t=this._editOptions;t.displayEmptyEditRow&&t.appendable&&this._items.appendDummy()},s.prototype._cancelDummy=function(){this._items.cancelDummy()},s.prototype.setValueAt=function(t,e,i){var o=this.getItem(t);if(o&&e>=0)if(o instanceof uo||o instanceof Lr)o.setValue(e,i);else{var r=o.dataRow;r>=0&&this.dataSource.setValue(r,e,i)}},s.prototype.setCellValue=function(t,e){this.isValid(t)&&this.setValueAt(t.itemIndex,t.dataField,e)},s.prototype.$_canShowEditor=function(t,e,i){return!!this.isValid(t)&&this._fireShowEditor(this._editorIndex.assign(t),e,i)},s.prototype.hideEditor=function(t){void 0===t&&(t=!1),this._editController.closeList(!1),this._editController.hideEditor(),t&&this.activeTool.resetFocused()},s.prototype.reprepareEditor=function(){this._editController.reprepareEditor(this.focusedIndex)},s.prototype.requestPrepareEditor=function(){this._editController.requestPrepareEditor()},s.prototype.fillEditSearchItems=function(t,e,i,o){this._editController.fillSearchItems(t,e,i,o)},s.prototype.showEditor=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),t=t||this.focusedIndex,this._editController.showEditor(t,i))return this.activeTool.resetFocused(),e&&this._editController.caretToLast(),!0},s.prototype.showEditList=function(t){if(this._editController.showList(t))return!0},s.prototype.editorButtonClicked=function(t,e){this._editController.buttonClicked(t,e),this._fireEditButtonClicked(t)},Object.defineProperty(s.prototype,"canUndo",{get:function(){var t=this.dataSource;return t&&t.canUndo&&!this.isItemEditing()},enumerable:!0,configurable:!0}),s.prototype.undo=function(){return!!this.canUndo&&(this.dataSource.undo(),!0)},Object.defineProperty(s.prototype,"canRedo",{get:function(){var t=this.dataSource;return t&&t.canRedo&&!this.isItemEditing()},enumerable:!0,configurable:!0}),s.prototype.redo=function(){return!!this.canRedo&&(this.dataSource.redo(),!0)},s.prototype.execute=function(t){},s.prototype.clearCommandStack=function(t){this.dataSource.clearCommandStack()},s.prototype.setLookups=function(t){t&&(this._lookupProvider||(this._lookupProvider=new Mh,this._lookupProvider.addListener(this)),this._lookupProvider.load(t))},s.prototype.addLookupSource=function(t){(this._lookupProvider||(this._lookupProvider=new Mh)).add(t)},s.prototype.removeLookupSource=function(t){this._lookupProvider&&this._lookupProvider.remove(t)},s.prototype.existsLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw"Invalid lookup source id: "+t;return i.exists(lt.makeArray(e))}},s.prototype.fillLookupData=function(t,e){if(t&&e){var i=this._lookupProvider&&this._lookupProvider.getSource(t);if(!i)throw"Invalid lookup source id: "+t;e.rows?i.fillRows(e.rows):i.fill(e.keys,e.values)}},s.prototype.clearLookupData=function(t){if(t){var e=this._lookupProvider&&this._lookupProvider.getSource(t);if(!e)throw"Invalid lookup source id: "+t;e.clear()}},s.prototype.addLookupData=function(t,e,i){if(void 0===i&&(i=null),t&&e){e=lt.makeArray(e);var o=this._lookupProvider&&this._lookupProvider.getSource(t);if(!o)throw"Invalid lookup source id: "+t;i?o.add(e,i):o.addRow(e)}},s.prototype.setOptions=function(t){},s.prototype.doContextMenu=function(t){var e,i,o,r,n,s,a,l=t.mouseX,h=t.mouseY,u=this.activeTool,c=u._findTableCell(),d=u.findElementAt(l,h,!1);if(c){var p=this.getTableView(c),_=this.getCellType(c),f=void 0,g=void 0;switch(_){case"head":e=mh.getSub(_,this.headView.getCellType(c)),s=(i=this.headView.getHeadModel(c))&&i.popupMenuName;break;case"foot":e=mh.getSub(_,this.footView.getCellType(c)),s=(i=this.footView.getFootModel(c))&&i.popupMenuName;break;case"indicator":f=this.rowBarContainer.rowOf(c),g=this.getRowOfItem(f),e=mh.getItem(_,f,g),s=this.rowIndicator.popupMenuName;break;case"state":f=this.rowBarContainer.rowOf(c),g=this.getRowOfItem(f),e=mh.getItem(_,f,g),s=this.stateBar.popupMenuName;break;case"check":f=this.rowBarContainer.rowOf(c),g=this.getRowOfItem(f),e=mh.getItem(_,f,g),s=this.checkBar.popupMenuName;break;case"header":a=p.layoutByCell(c),e=mh.getLayout(_,a),s=a.firstColumn.header.popupMenuName;break;case"data":if((r=p.bodyCellByCell(c)).grouped)e=mh.getItem("groupHeader",r.item.index,null);else{if(r.merged&&r.item!==d._item&&d instanceof oa){var y=Hn.temp(this,d.itemIndex,r.layout);r=p.bodyCellAt(y)}e=mh.getCell(_,r),s=r.dataColumn.popupMenuName}break;case"groupFooter":r=p.bodyCellByCell(c),e=mh.getCell(_,r),n=r.item.$_footerIndex;var m=r.dataColumn.groupFooters.get(n);s=m&&m.popupMenuName;break;case"footer":case"summary":var b=p.tableCellByCell(c);n=b.summaryIndex;var v="footer"===_?b.layout.firstColumn.footers.get(n):b.layout.firstColumn.headerSummaries.get(n);e=mh.getSummary(_,b.summaryIndex,b.layout),s=v&&v.popupMenuName;break;case"groupHead":case"groupFoot":var w=c.$_lev;e=mh.getGroupElt(_,w);break;case"groupBar":var C=c.$_row;g=this.getRowOfItem(C),e=mh.getItem(_,C,g)}}else d&&d===u._clickElement&&(e=Hs(d)?mh.getItem("groupHeader",d.itemIndex,null):u._getClickData(d));if(!1!==(o=this._fireContextMenuPopup(l,h,e))){var x=this._popupMenuManager;if("string"==typeof o?s=o:null!=o&&"object"==typeof o||(s=s||this._contextMenu),s){t.preventDefault();var I=x.getMenu(s);I&&x.showContext(I,t,l,h,e)}}},s.prototype.setContextMenu=function(t){return(t=lt.makeArray(t))?(this._contextMenu="gridContextMenu",this.popupMenuManager.addMenu(this._contextMenu,t,!0,this)):this._contextMenu=null,this.popupMenuManager.getMenu(this._contextMenu)},s.prototype.addPopupMenu=function(t,e,i){void 0===i&&(i=!0),e=lt.makeArray(e),t&&e&&this.popupMenuManager.addMenu(t,e,i)},s.prototype.removePopupMenu=function(t){this.popupMenuManager.removeMenu(t)},s.prototype.setCursor=function(t,e){if(t){var i=this.getTableCell(t);if(i){var o=this.getTableView(i);if(o instanceof Gs)return void o.setCursor(e)}}this._container.setCursor(e)},s.prototype.canMoveLayout=function(t){var e=t.root.vindex,i=this.layoutManager;return!(i.mergedRowGrouped&&e<i.rowGroupLevels)&&(this.fixedOptions.movable||e>=i.fixedLayoutCount&&e<i.rightFirstLayout)},s.prototype.canMoveToLayout=function(t){return this.canMoveLayout(t)},s.prototype.getEditCellValue=function(){return this._editController.editValue},s.prototype.setEditCellValue=function(t,e,i){(this.isEditing()||e)&&this._editController.setEditValue(t,i)},s.prototype.searchItem=function(t){t instanceof Ue||(t=new Ue(t));var e=t.fields,i=t.values,o=this.itemSource,r=t.startIndex,n=-1;if(e&&e.length>0&&i&&i.length>0&&o){var s=void 0,a=void 0,l=void 0,h=void 0,u=e.length,c=[];for(s=0;s<u;s++)a=parseFloat(e[s]),!isNaN(a)&&a>=0?c.push(a):(l=this.dataSource.getFieldIndex(e[s]))>=0&&c.push(l);c.length>0&&(u=o.itemCount,(n=(r=Math.max(0,r))<u?o.findItem(c,i,t,r,u-1):-1)<0&&t.wrap&&r>0&&(n=o.findItem(c,i,t,0,r-1))),n>=0&&t.select&&(h=this.getIndex(n,lt.pick(this.focusedIndex.column,this.getFirstColumn())),this.setFocusedIndex(h,!0,!0))}return n},s.prototype.searchCell=function(t){var e,i,o,r=t instanceof ze?t:new ze(t),n=r.wrap,s=r.select,a=lt.makeArray(r.fields),l=this.itemSource,h=null,u=l&&l.dataSource,c=lt.makeArray(r.columns),d=[],p=r.value;if(u){if(!a&&c)for(e=0,i=c.length;e<i;e++){var _=this.columnByName(c[e]);if(_ instanceof mn){if(_.dataIndex<0)throw new Error("invalid search Column "+c[e]);d.push(_.dataIndex)}}else if(a&&a.length>0)for(e=0,i=a.length;e<i;e++)o=parseFloat(a[e]),!isNaN(o)&&o>=0?d.push(o):d.push(u.getFieldIndex(a[e]));if(d&&d.length>0&&null!=p){if(d.length>0){i=l.itemCount;var f=Math.max(0,r.startIndex),g=Math.max(0,r.startFieldIndex);!(h=f<i?l.findCell(d,p,r,f,i-1,g):null)&&n&&f>0&&(h=l.findCell(d,p,r,0,f,0)),h&&(h.fieldName=u.getOrgFieldName(h.fieldIndex))}if(h&&s){var y=void 0;(y=c?this.getIndex(h.itemIndex,lt.pick(this.columnByName(c[h.searchFieldIndex]),this.focusedIndex.column)):this.getIndex(h.itemIndex,lt.pick(this.columnByField(h.fieldIndex),this.focusedIndex.column)))&&this.setFocusedIndex(y,!0,!0)}}}return h},s.prototype.isCheckable=function(t){var e=this.getItem(t);return e&&e.checkable},s.prototype.isCheckableOfRow=function(t){var e=this.getItemOfRow(t,!0);return e&&e.checkable},s.prototype.setCheckable=function(t,e){var i=this.getItem(t);i&&i.setCheckable(e)},s.prototype.setCheckableOfRow=function(t,e){var i=this.getItemOfRow(t,!0);i&&i.setCheckable(e)},s.prototype.isCheckedItem=function(t){var e=this.getItem(t);return e&&e.checked},s.prototype.isCheckedRow=function(t){var e=this._items.getItemOfRow(t,!0);return e&&e.checked},s.prototype.checkAll=function(t,e,i,o){var r=this._checkBar.showGroup&&!this._checkBar.merged;this._items.checkAll(t,e,i,o,r)},s.prototype.toggleCheck=function(t){var e=this.getItem(t);e&&e.checkable&&this.checkItem(e.index,!e.checked,this.checkBar.exclusive,!0)},s.prototype.toggleChecks=function(t,e){var i=[];if(e&&e.isDataRow&&e.checkable){if(this.checkBar.merged){var o=t[0],r=t[t.length-1],n=o.index,s=r.index,a=this.checkBar.merges,l=a.getRoom(Hn.temp(this,n,null));n=Math.min(n,l?l.head:n),l=a.getRoom(Hn.temp(this,s,null)),s=Math.max(s,l?l.tail:s),t=[];for(var h=n;h<=s;h++){var u=this.getItem(h);u.checkable&&u.isDataRow&&t.push(u)}}for(h=0;h<t.length;h++)t[h].checkable&&t[h].dataRow>=0&&i.push(t[h]);var c=!e.checked;this.checkBar.exclusive&&this.itemSource._clearChecked(),i.length>0&&this._items.checkItems(i,c,!0)}},s.prototype.checkItem=function(t,e,i,o){var r=this.getItem(t);r&&this._items.checkItem(r,e,i,o)},s.prototype.checkRow=function(t,e,i,o){var r,n=this.getItemIndexOfRow(t);n>-1&&(r=this.getItem(n))&&(r=r instanceof uo?r:null),(r=r||this.getItemOfRow(t,!0))&&this._items.checkItem(r,e,i,o)},s.prototype.checkItems=function(t,e,i){var o=this._items.getItemsByIndices(t);this._items.checkItems(o,e,i)},s.prototype.checkRows=function(t,e,i){var o=this._items.getItemsByRows(t,!0);this._items.checkItems(o,e,i)},s.prototype.setAllCheck=function(t,e){if(this._headView.allChecked=t,e){var i=this.checkBar;this.checkAll(t,i.visibleOnly,i.checkableOnly,!1)}},Object.defineProperty(s.prototype,"allChecked",{get:function(){return this._headView.allChecked},enumerable:!0,configurable:!0}),s.prototype.resetCheckables=function(){},s.prototype.applyCheckables=function(){},s.prototype.registerCustomRenderer=function(t,e){this._delegate.addCustomRenderer(t,e)},s.prototype.unregisterCustomRenderer=function(t){this._delegate.removeCustomRenderer(t)},s.prototype.existsCustomRenderer=function(t){return this._delegate.existsCustomRenderer(t)},s.prototype.unregisterAllCustomRenderer=function(){this._delegate.clearCustomRenderers()},s.prototype.getValueAt=function(t,e){var i=this.getItem(e),o=t.firstColumn;if(o instanceof mn)return i&&i.getData(o.dataIndex)},s.prototype.getCellValue=function(t){if(this.isValid(t)){var e=this.getItem(t.itemIndex),i=t.dataColumn;if(e&&i)return e.getData(i.dataIndex)}},s.prototype.getDistinctItemValues=function(t,e,i){void 0===e&&(e=-1),void 0===i&&(i=n.ASCENDING);var o=this.itemCount;e=e<0?o:e;var s=this.columnByField(t);if(!s)return null;if(e>0){for(var a=s.getField().dataType,l=[],h=[],u=0,c=this.itemCount;u<c;u++){var d=this.getItem(u);if(d instanceof io||d instanceof Dr){var p=d.getData(t);switch(a){case r.NUMBER:null!=p&&isNaN(p)||l.indexOf(p)<0&&l.push(p);break;case r.DATE:case r.DATETIME:p?h.indexOf(p.getTime())<0&&(h.push(p.getTime()),l.push(p)):(h.push(p),l.push(p));break;default:l.indexOf(p)<0&&l.push(p)}}}return i!==n.NONE&&(l=lt.included(a,r.DATETIME,r.DATE,r.NUMBER)?l.sort((function(t,e){return t-e})):l.sort(),i===n.DESCENDING&&(l=l.reverse())),l.slice(0,e)}return null},s.prototype.getDisplayText=function(t){var e=t.dataColumn;if(e){var i=e.dataIndex;if(i>=0){var o=t.item;if(o instanceof io||o instanceof Dr){var r=o.getData(i);if(e instanceof bn)return No.getText(r);var n=new fn,s=this._body.getCellFormatters(e,null,t,n);return Mo._getDisplayText(this,o,e,r,s)}if(o instanceof no){var a=e.groupFooters.get(o.$_footerIndex);r=hu.getValue(o,e),s=this._rowGroup.getFooterCellFormatters(a,null);return hu.$_displayText(o,e,r,s)}}}return""},s.prototype._fitLayoutWidth=function(t){if(!t.visible)return 0;var e=this.itemSource,i=this.getIndex(this.topIndex,t.firstColumn),o="",r="",n=0;o=r=t.firstColumn.header.displayText;var s,a=lt.getTextLength(o),l=this.getBodyCellAt(i,!1),h=l&&l.renderer2&&l.renderer2._dom;if(h){var u=rt(h).getComputedStyle(h);if(u){r=u.paddingLeft;var c=parseInt(r.substr(0,r.indexOf("px")));n+=c>0?c:0,r=u.paddingRight,n+=(c=parseInt(r.substr(0,r.indexOf("px"))))>0?c:0,s={fontSize:u.fontSize,fontFamily:u.fontFamily,fontWeight:u.fontWeight,fontStyle:u.fontStyle}}}for(var d=0,p=e.itemCount;d<p;d++)i.itemIndex=d,r=this.getDisplayText(i),lt.getTextLength(r)>a&&(a=lt.getTextLength(r),o=r);if(a>0){n+=this.container.measureText("rg-data-cell",o,s)+6;var _=t.getDataColumn(),f=_.editor,g=this.delegate.getCellEditor(aa.getEditorType(f));g.hasButton(g.native,f)&&(n+=this.body.editButtonWidth*g.buttonCount),_.button!==E.NONE&&(n+=this.body.cellButtonWidth)}return n},s.prototype.fitLayoutWidth=function(t,e,i){var o=0;return t instanceof xn?o=this._fitLayoutWidth(t):t instanceof On&&(o=function t(e){for(var i=e.direction===rr.HORIZONTAL,o=0,r=0,n=e.visibles;r<n.length;r++){var s=n[r],a=0;s instanceof xn?(a=this._fitLayoutWidth(s),1===s._defColSpan&&(s.cellWidth=a)):s instanceof On&&(a=t.call(this,s)),o=i?o+a:Math.max(o,a)}return o}.call(this,t)),i&&i>this.displayOptions.minCellWidth&&(o=Math.max(o,i)),e&&e>this.displayOptions.minCellWidth&&(o=Math.min(o,e)),t.cellWidth=o},s.prototype.canMoveRow=function(t,e){return void 0===e&&(e=!0),!this.isEditing()&&!this.isItemEditing()&&(e||this._editOptions.movable)&&(!t||this.itemSource.movable)},s.prototype.canMoveRows=function(t,e){if(this.canMoveRow(e,!1)&&t){for(var i=!1,o=0;o<t.length;o++){var r=t[o];r&&r.isDataRow&&(i=!0)}return i}},s.prototype.moveRows=function(t,e){if(this.canMoveRows(t,!0))return this._doMoveRows(t,e)},s.prototype.moveSelection=function(t){var e=this.getSelectedItems(!1);if(e&&e.length>0){var i=e[0].index,o=this.itemSource;if((t>0&&i+t<=o.itemCount||t<0&&i>0)&&this.moveRows(e,this.getItem(i+t))){var r=this.getSelection();r.moveRow(t),this._selections.clear(),this._selections.$_addItem(r);var n=this._focusedIndex.clone();n.itemIndex=i+t,this.setFocusedIndex(n,!1,!0)}}},s.prototype.isSelectedItem=function(t){var e=this.getSelection();return e&&e.containsItem(t)},s.prototype.isSelectedLayout=function(t){var e=this.getSelection();return e&&e.containsLayout(t)},s.prototype.getFilteredColumns=function(){for(var t=this.columnCount,e=[],i=0;i<t;i++){var o=this.getColumn(i);o.isFiltered()&&e.push(o)}return e},s.prototype.showProgress=function(){this._progressManager.show(this._container._containerDom,null,this.displayOptions.baseZindex)},s.prototype.setProgress=function(t,e,i,o){this._progressManager.setProperties(t,e,i,o)},s.prototype.closeProgress=function(){this._progressManager.close()},s.prototype.showLoading=function(t){this._progressManager._gridDisabled=this.container.disabled,t&&(this.container.disabled=!0),this._progressManager.showLoader(this._container._containerDom,this._displayOptions.baseZindex)},s.prototype.hideLoading=function(){this._progressManager.closeLoader(),this.container.disabled=this._progressManager._gridDisabled},s.prototype.beginExportProgress=function(t){this._progressManager.show(this._container._containerDom,t,this._displayOptions.baseZindex)},s.prototype.endExportProgress=function(){this._progressManager.close()},s.prototype.setExportProgress=function(t,e,i){this._progressManager.setProperties(0,t,e,i)},s.prototype.setEmptyMessage=function(t){this._emptyView.setMessage(t)},s.prototype.setWatchTimer=function(t){this._container.setWatchTimer(t)},s.prototype._getCssSelector=function(){return""},Object.defineProperty(s.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),s.prototype._createDelegate=function(){return new Ph(this)},s.prototype._createLayoutManager=function(){return new Oa(this)},s.prototype._createEditController=function(){return new dh(this)},s.prototype._createSelectionLayer=function(){return lt.isMobile()?new fu(this,"mobileSelectionLayer"):new Bs(this,"selectionLayer")},s.prototype._initDom=function(t){i.prototype._initDom.call(this,t),t.style.setProperty("overflow","hidden","important")},s.prototype._doActivateView=function(){this._container.activeTool=this._container.defaultTool,this._editController.prepareEditor(this._focusedIndex),this.visible=!0,this._fireViewActivated(!0)},s.prototype._dodDeactivateView=function(){this._fireViewActivated(!1)},s.prototype.setRect=function(t){var e=t.width!=this.width||t.height!=this.height;i.prototype.setRect.call(this,t),e&&(this._dirty=!0)},s.prototype._doDraw=function(t){},s.prototype.$_containerResized=function(){this._layoutManager.requestZoom(),lt.isMobile()&&this.isEditing()&&!this.isItemEditing()&&setTimeout(function(){var t=this.topItem,e=this.layoutManager.fullItemCount,i=this.focusedIndex.itemIndex;t+e<i&&(this.topIndex=i-Math.round(e/2))}.bind(this),10)},s.prototype._doCreateOtherElements=function(){},s.prototype._doContentPanesCreated=function(){},s.prototype._createSidePane=function(){return null},s.prototype.isSidePaneVisible=function(){return!1},s.prototype._createBodyView=function(t){return new va(this.doc,t)},s.prototype._createFixedBodyView=function(t){return new wa(this.doc,t)},s.prototype._createRightBodyView=function(t){return new Ca(this.doc,t)},s.prototype._initStyles=function(){},s.prototype._columnsReset=function(){this._resetColumnIndices(),this._activeCellLayout._columnsChanged(this._columns),this._columnsDirty=!0,this._shadowDom&&this._shadowDom.setColumns(!1)},s.prototype._columnVisibleChanged=function(t){this._activeCellLayout._columnChanged(t)},s.prototype._resetColumnIndices=function(t){void 0===t&&(t=null),t?t._resetIndices(this):this._columns.resetIndices(),!t&&!this._cellLayoutDirty&&this.clearSelection()},s.prototype._resetColumnSortStates=function(){this._columns.resetSortStates()},s.prototype._cleanGridObjects=function(){for(var t=0,e=this._gridObjects.length;t<e;t++)this._gridObjects[t].clean()},s.prototype._visualObjectChanged=function(t){this.invalidateLayout(),this._shadowDom&&this._shadowDom.reset()},s.prototype._addGridObject=function(t){this._gridObjects.push(t)},s.prototype.addElement=function(t){this._rootElement.addChild(t)},s.prototype.$_prepareRender=function(t){this._doPrepareRender(t)},s.prototype._doPrepareRender=function(t){if(this._horzScrolled)try{var e=this._layoutManager;e.setLeftPos(t,this._leftPos),this._leftPos=e.leftPos,this.$_updateScrollBars(e),this._layoutSelectionViews(),this._editController.resetEditor(!1),this.container.defaultTool.layoutChanged()}finally{this._horzScrolled=!1}},s.prototype.$_layout=function(t){this._doLayout(t)},s.prototype.$_afterRender=function(){this._layoutManager.needRelayout()?this.invalidateLayout():(this._topIndexChanged&&(this._topIndexChanged=!1,this._fireTopIndexChanged(this.topIndex)),this._fireDataLoadComplated())},s.prototype._fireDataLoadComplated=function(){this._dataLoad&&this.fireEvent(s.DATA_LOAD_COMPLATED),this._dataLoad=!1},s.prototype._doLayout=function(t){var e=this._layoutManager;this._resetting=!1;try{this.$_doLayout(e,t)}finally{this._loading=!1,this._eventFrom=null}if(this.$_checkFocusedLayout(),this._emptyView.visible=this.empty&&this._displayOptions.showEmptyMessage){var i=e.contentBounds.clone();i.topBy(e.headerBounds.bottom),this._emptyView.setBounds(0,i.y,this.width,i.height)}if(this._debugging&&this._debugView.layout(),this._horzScrolled=!1,this._cleanGridObjects(),this._columnsDirty&&(this._columnsDirty=!1,this._activeCellLayout.cleanColumns()),this.$_resetHovering(this.container._currentX,this.container._currentY,!0),this.$_resetFocusRender(this.container._currentX,this.container._currentY),this.$_resetRowHover(),e.itemCount>0){var o=e.topIndex,r=o+e.itemCount;this._topIndexChanged=o!==this._prevTop,this._prevTop=o,r!=this._prevLast&&r==this.itemCount&&setTimeout(function(){this._fireScrollToBottom()}.bind(this),1),this._prevLast=r}this.$_checkCurrentRow(),this._editController.prepareEditor(this.focusedIndex),this._cellLayoutDirty=!1,this.container.defaultTool.layoutChanged()},s.prototype.$_doLayout=function(t,e){var i=e.clone(),o=this._displayOptions.vscrollBar?this._scrollBarWidth:0,r=this._displayOptions.hscrollBar?this._scrollBarHeight:0,n=this.$_fixedColCount=this._fixedOptions.colCount,s=this.$_rfixedColCount=this._fixedOptions.rightCount;this.setFocusedClass(this._focusedIndex,!1),this.setFocusedRowClass(this._focusedIndex,!1),this._activeCellLayout.$_refresh(this._columns,this._displayOptions.minCellWidth),this._activeCellLayout.$_prepareLayout(this,n,s),this._needMerge&&(this.$_populateMerges(),this._needMerge=!1),this._body._prepareUpdate(),t.measure(i,this._leftPos,this._topIndex,o,r),t.layout(i),this._leftPos=t.leftPos,this._topIndex=t.topIndex,this.$_updateScrollBars(t,i),this._layoutSelectionViews(),this._layouted=!0,!this._editController.resetEditor(!1)&&this.isValid(this._focusedIndex)&&this._editController.resetEditable(this._focusedIndex),this.container.defaultTool.layoutChanged()},s.prototype._columnCheckedChanged=function(t){this._fireColumnCheckedChanged(t)},s.prototype.$_updateScrollBars=function(t,e){if(t.hscrollBar){var i=t.bodyBounds.width,o=Math.min(t.scrollWidth);this._hscrollBar.setProperties(0,i,o),this._hscrollBar.setPosition(t.leftPos),this._hscrollBar.visible=!0}else this._hscrollBar&&(this._hscrollBar.setProperties(0,0,0),this._hscrollBar.setPosition(0),this._hscrollBar.visible=!1);if(t.vscrollBar){var r=this.itemCount,n=r-t.fixedItemCount,s=Math.min(t.fullItemCount,r-t.topIndex);this._vscrollBar.setProperties(0,n,s),this._vscrollBar.setPosition(t.topIndex),this._vscrollBar.visible=!0}else this._vscrollBar&&(this._vscrollBar.setProperties(0,0,0),this._vscrollBar.setPosition(0),this._vscrollBar.visible=!1);e&&this.$_layoutScrollBars(t,e)},s.prototype.$_layoutScrollBars=function(t,e){var i=t.scrollBarWidth,o=t.scrollBarHeight,r=this._hscrollBar,n=this._vscrollBar;t.hscrollBar&&(r.setBounds(e.x,e.bottom-o,e.width-i,o),r.layoutContent()),t.vscrollBar&&(n.setBounds(e.right-i,e.y,i,e.height-o),n.layoutContent()),(this._scrollEdge.visible=t.vscrollBar&&t.hscrollBar)&&this._scrollEdge.setBounds(e.right-i,e.bottom-o,i,o)},s.prototype._columnMergeRuleChanged=function(t){this._populateMerges(),this.refreshView()},s.prototype._canMerge=function(){return!1},s.prototype._populateMerges=function(){this._needMerge=!0},s.prototype.$_populateMerges=function(){if(this._canMerge()){for(var t=this.getHorzColumns(),e=0,i=t.length;e<i;e++){var o,r=t[e],n=r&&r.layout;if(n&&n.canMerge())if((o=n.merges)||(o=new nn(n)),o.clear(),r instanceof mn&&r.mergeGrouped)this.getGroupLevel(r.dataIndex)>0&&o.initialize(Xr.INIT_COUNT);else o.initialize(Xr.INIT_COUNT)}if(this._checkBar.canMerge())(o=this._checkBar.merges||new Cs(this._checkBar)).clear(),o.initialize(Xr.INIT_COUNT)}},s.prototype._doRowGroupMergeModeChanged=function(){},s.prototype._addSelectionView=function(t){this._selectionLayer.addView(t)},s.prototype._clearSelectionViews=function(){this._selectionLayer.clearViews()},s.prototype._layoutSelectionViews=function(){this._layouted&&!this._resetting&&this._selectionLayer.layout()},s.prototype.$_checkCurrentRow=function(t){if(void 0===t&&(t=!1),this._focusedIndex){var e=this._focusedIndex.dataId,i=this._focusedIndex.dataRow;if(t||e!=this._currentRowId){clearTimeout(this._rowChangeTimer);var o=this.container.defaultTool,r=this._currentRow,n=this._displayOptions.rowChangeDelay,s=t||n<=0;return this._currentRowId=e,this._currentRow=i,s?(this._fireCurrentRowChanged(r,i),o.currentRowChanged(r,i)):n>0&&(this._rowChangeTimer=setTimeout(function(){this._fireCurrentRowChanged(r,i),o.currentRowChanged(r,i)}.bind(this),n)),!0}}return!1},s.prototype.$_doSetFocusedIndex=function(t,e,i,o){if(void 0===o&&(o=!0),!t){if(o)return!1;t=this.getIndex(-1,null)}var r,n;if(!this.isValid(t)&&o&&(t=t.clone()).normalize(this),!this.isValid(t)){var s=this.dataSource;if(!s||0==s.rowCount||0==this.itemCount)return this._focusedIndex.itemIndex=-1,this._focusedIndex.layout=null,this.clearSelection(),!1}if(Hn.areEquals(t,this._focusedIndex))return!0;var a=this._editOptions,l=this._focusedIndex.clone(),h=this.itemSource,u=this.container.defaultTool,c=this.layoutManager;if(!this._editController.focusedIndexChanging()||!this._fireCurrentChanging(l,t)){var d=this.activeTool.dragTracker;return d instanceof eh&&(d.dragging?d.cancel():this.activeTool.dragTracker=null),!1}var p=l.item;if(!this.isItemEditing(p)||this.isItemEdited(p)||t.itemIndex==l.itemIndex||p.itemState!==wi.UPDATING||a.commitWhenNoEdit)if(h&&t.itemIndex!=l.itemIndex)try{if(p)switch(p.itemState){case wi.INSERTING:if(!this.commit(a.forceInsert,!0))return this.cancel(!0),!1;break;case wi.APPENDING:if(!this.commit(a.forceAppend,!0))return this.cancel(!0),!1;break;case wi.UPDATING:if(!this.commit(a.commitWhenNoEdit,!0))return this.cancel(!0),!1}}catch(t){if(t instanceof Vr)return(t=this._fireValidationFail(p.index,t.column,t))&&alert(a.showOnlyValidationMessage&&t.userMessage?t.userMessage:t.toString()),this.invalidateLayout(),!1;if(t instanceof Nr)return!1;throw t}else p&&this.isItemEditing(p)&&a.validateOnExit&&this.invalidateLayout();else this.cancel(!0);u.focusedIndexChanging(t),this._focusedIndex.assign(t),this.$_checkFocusedLayout(),this.isValid(l)&&(n=(r=c.getBodyView(l)).getCellAt(c,l),r.$_focusChanged(this,n,!1)),this.isValid(t)&&(n=(r=c.getBodyView(t)).getCellAt(c,t),r.$_focusChanged(this,n,!0)),h instanceof co&&h.setDiffs(this._editOptions.checkDiff,this._editOptions.checkCellDiff,this._editOptions.strictDiff),this._editController.focusedIndexChanged(l,t,!1),u.focusedIndexChanged(l,t);var _=this._focusedIndex,f=this.isValid(_);!e&&f||this.clearSelection(),this._layouted&&this._refreshSideViews();var g=!Hn.areEquals(_,c._prevFocused);if((i||g)&&!this.$_makeFocusedIndexVisible()){var y,m;if(this._editController.resetEditor(!1),this.isValid(_)&&this.getItem(_.itemIndex).canEdit()&&this._editController.prepareEditor(_),this.isValid(l))if(y=this.getBodyViewAt(l))(m=y.getRowView(l.item))instanceof oa&&m.resetButtons(this);if(!this.container.isLayoutNeeded()&&f)if(y=this.getBodyViewAt(_))(m=y.getRowView(_.item))instanceof oa&&m.resetButtons(this)}return this._fireCurrentChanged(this._currentIndex.assign(_)),this.$_checkCurrentRow(),!0},s.prototype._refreshSideViews=function(){this.container.isLayoutNeeded()||(this._rowBarContainer.visible&&this._rowBarContainer.refresh(this),this._headerView.visible&&this._headerView.refresh(this),this._fixedHeaderView.visible&&this._fixedHeaderView.refresh(this),this._rightHeaderView.visible&&this._rightHeaderView.refresh(this))},s.prototype.$_makeFocusedIndexVisible=function(){return this.makeCellVisible(this._focusedIndex)},s.prototype.makeCellVisible=function(t){if(this._editorLender)return this._editorLender.makeCellVisible(t);if(this.isValid(t)||t&&t.column){if(this.layoutManager.makeCellVisible(t),!this.layoutManager.focusIsVisible())return this.invalidateLayout(),!0;this.layoutManager.clearFocusRequest()}return!1},s.prototype.makeColumnVisible=function(t){if(t){var e=this.getIndex(this._focusedIndex?this._focusedIndex.itemIndex:-1,t);this.makeCellVisible(e)}},s.prototype.makeItemVisible=function(t){if(t>=0){var e=this.getIndex(t,this._focusedIndex&&this._focusedIndex.layout);this.makeCellVisible(e)}},s.prototype.makeLayoutVisible=function(t){if(t){var e=this.getIndex(this._focusedIndex?this._focusedIndex.itemIndex:-1,t);this.makeCellVisible(e)}},s.prototype.cancelEditor=function(t){this.isEditing()&&(t=!(arguments.length>0)||t,this._editController.cancelEditor(t))},s.prototype.itemEditCancel=function(){return this._fireItemEditCancel(this.itemSource.editingItem)},s.prototype.$_cancelItem=function(t,e){void 0===e&&(e=!1);var i=lt.cast(this.itemSource,co);return!!(i&&t&&i.isEditing(t))&&(this._validationManager.clearInvalidCells(-1),i.cancel(),e&&this.resetFocusedIndex(),!0)},s.prototype.cancel=function(t){void 0===t&&(t=!1);var e=this.editController;this.isEditing()&&(e.cancelEditor(!0),e.invalidateEditor());var i=this.focusedIndex;this.itemSource;if(this.isValid(i)){i.dataId;if(this.$_cancelItem(i.item))return i=i.clone(),this._rowBarContainer.stateError=void 0,e._prepareEditor(e._editIndex),i.normalize(this),i.item instanceof ho&&i.up(),this.setFocusedIndex(i),t&&this.$_makeFocusedIndexVisible(),!0}return!1},s.prototype.commitEditor=function(t){void 0===t&&(t=!0),this.isEditing()&&this.editController.commitEditor(t,!1)},s.prototype.$_commitItem=function(t,e,i){var o=lt.cast(this.itemSource,co),r=this.validationManager;if(o&&t&&o.isEditing(t)&&(e||o.isEdited(t))){var n=Qi(t.itemState);try{r.validateRow(t,n,!1,!1),this._rowBarContainer.stateError=void 0}catch(t){throw t instanceof Vr&&(t.level=t.level||p.ERROR,!t.column&&(this._rowBarContainer.stateError=t)),t}if(!o.commit()){if(i)throw new Nr("Commit failed.");return!1}return t.dataId>-1&&r.cloneError(-1,t.dataId),r.clearInvalidCells(-1),this.editOptions.removeValidateOnCommit&&t.dataId>-1&&r.clearInvalidCells(t.dataId),!0}},s.prototype.commit=function(t,e,i){void 0===i&&(i=!0);var o=this.focusedIndex;return!!this.isValid(o)&&(this.isEditing()&&(this.editController.commitEditor(!0,!1,i),this.editController.invalidateEditor()),this.$_commitItem(o.item,t,e))},s.prototype.editorCancel=function(t,e){this._doCellCancel(e)},s.prototype._doCellCancel=function(t){return this._fireEditCanceled(t)},s.prototype.editorCanceled=function(){this.activeTool.resetFocused()},s.prototype._editorStarted=function(t,e){if(this.closePopups(!1),this.edit(e))return!0},s.prototype._editorChange=function(t,e,i){this._fireEditChange(e,i)},s.prototype._editorSearch=function(t,e,i){this._fireEditSearch(e,i)},s.prototype._searchCellButtonClick=function(t,e,i){return this._fireSearchCellButtonClick(e,i)},s.prototype.$_getFieldDefaults=function(t){function e(t,e){for(var i=0;i<t.columnCount;i++){var o=t.getColumn(i);if(o instanceof mn&&o.dataIndex==e){var r=o.getField();return r&&r.defaultValue}}}for(var i=this.dataSource.fieldCount,o=[],r=0;r<i;r++)o.push(void 0);for(r=0;r<i;r++){var n=e(this,r);n&&(o[r]=n)}return o},s.prototype.$_getColumnDefaults=function(t){for(var e=0,i=this.columnCount;e<i;e++){var o=this.getColumn(e);if(o instanceof mn)null!=o.defaultValue&&(t[o.dataIndex]=o.defaultValue)}},s.prototype.$_getItemDefaults=function(t,e){},s.prototype.$_readDefaultValues=function(t){},s.prototype.$_getInsertDefaults=function(t){var e=this.$_getFieldDefaults(this.itemSource.dataSource);return this.$_getColumnDefaults(e),this.$_getItemDefaults(null,e),this.$_readDefaultValues(e),e},s.prototype.sortColumn=function(t,e){t&&(this.sortingOptions.style==C.EXCLUSIVE?e&&e.shiftKey?this.sortColumnWithStyle(C.INCLUSIVE,t):this.sortColumnWithStyle(C.EXCLUSIVE,t):this.sortColumnWithStyle(this.sortingOptions.style,t))},s.prototype.sortColumnWithStyle=function(t,e){if(!e)throw new Error("column is null");if(!(this.isItemEditing(null)||e.dataIndex<0)){var i=this._sortingOptions.textCase;t==C.EXCLUSIVE?e.sortOrder<0?this.orderBy([e],[n.ASCENDING],[i]):e.sortDirection==n.ASCENDING?this.orderBy([e],[n.DESCENDING],[i]):this.isGroupedColumn(e)&&this.itemSource._groupSorting?this.orderBy([e],[n.ASCENDING],[i]):this.unsortColumnWithStyle(t,e):t!=C.INCLUSIVE&&t!=C.REVERSE||(e.sortOrder<0?this.$$_addSort(e,n.ASCENDING,i,t==C.REVERSE):e.sortDirection==n.ASCENDING?this.$$_addSort(e,n.DESCENDING,i,t==C.REVERSE):this.isGroupedColumn(e)&&this.itemSource._groupSorting?this.$$_addSort(e,n.ASCENDING,i,t==C.REVERSE):this.unsortColumnWithStyle(t,e))}},s.prototype.orderBy=function(t,e,i){if(!this.isItemEditing(null))if(!t||t.length<1)this._sortItems([],[],[]);else{for(var o=[],r=t.length,n=0;n<r;n++){var s=t[n];o.push(s.dataIndex)}this._sortItems(o,e,i)}},s.prototype.unsortColumnWithStyle=function(t,e){if(!this.isItemEditing()&&e){var i=this.getSortFields(),o=this.getSortDirections(),r=this.getSortCases(),n=i.indexOf(e.dataIndex);n<0||(t==C.EXCLUSIVE?this.orderBy([],[],[]):t!=C.INCLUSIVE&&t!=C.REVERSE||(i.splice(n,1),o.splice(n,1),r.splice(n,1),this._sortItems(i,o,r)))}},s.prototype.$$_addSort=function(t,e,i,o){var r=this.getSortFields(),n=this.getSortDirections(),s=this.getSortCases(),a=t.dataIndex,l=r.indexOf(a);l>=0?(n[l]=e,s[l]=i):o?(r.splice(0,0,a),n.splice(0,0,e),s.splice(0,0,i)):(r.push(a),n.push(e),s.push(i)),this._sortItems(r,n,s)},s.prototype._sortItems=function(t,e,i){var o=t.concat(),r=e?e.concat():[],n=i?i.concat():[];this._fireSorting(o,r)&&this._toastManager.show(this.sortingOptions.toast,!0,function(){var e=this.sortingOptions.keepFocusedRow&&this.focusedIndex?this.focusedIndex.dataRow:-1;if(this._doSortItems(t,r,n),e>=0){var i=Hn.temp(this,this.getItemIndexOfRow(e),this.focusedIndex.column);this.setFocusedIndex(i,!0,!0)}}.bind(this))},s.prototype._doPrepareComparer=function(t){for(var e={},i=0;i<t.length;i++){var o=this.columnByField(t[i]);o.sortByLabel&&(e[t[i]]=r(o))}return e;function r(t){var e=t.grid;return function(i,o,r){var n=e.getItemOfRow(o,!0),s=e.getItemOfRow(r,!0),a=Mo.getText(n,t),l=Mo.getText(s,t);return a==l?0:null==a?null==l?0:-1:null==l||a>l?1:a<l?-1:0}}},s.prototype._doSortItems=function(t,e,i){},s.prototype.getSortFields=function(){return null},s.prototype.getSortDirections=function(){return null},s.prototype.getSortCases=function(){return null},s.prototype.canFiltering=function(){return this._fireFiltering()},Object.defineProperty(s.prototype,"filterSelecting",{get:function(){return this._filterSelector.opened},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"filterSelector",{get:function(){return this._filterSelector},enumerable:!0,configurable:!0}),s.prototype.applyFilters=function(t,e){return!this.isItemEditing(null)&&(!!this._fireFiltering()&&(this._toastManager.show(this.filteringOptions.toast,!0,function(){this.$_doApplyFilters(t,e)}.bind(this)),!0))},s.prototype.$_doApplyFilters=function(t,e){var i=this._items.itemCount;this._items.beginFiltering();try{this._filterRunning=!0,this._items.clearAllFilters(),this.$_addFilters()}finally{this._items.endFiltering(t,e),this._filterRunning=!1}i!==this._items.itemCount&&(this.topIndex=0)},s.prototype.$_addFilters=function(){for(var t=this.columnCount,e=0;e<t;e++){var i=this.getColumn(e),o=i.autoFilter?i.autoFilters:i.filters;if(o&&o.activeCount>0)for(var r=0,n=o.count;r<n;r++){var s=o.getItem(r);s.active&&this._items.addFilter(i.dataIndex,s)}}},s.prototype.columnFilterChanged=function(t,e){this._doColumnFiltersChanged(t,e)},s.prototype.canGrouping=function(){return!1},s.prototype.$_layoutRowHover=function(t,e,i){var o=this._layoutManager,r=o.footerBounds.y+o.contentBounds.y,n=this.getBodyView(t.cell);if(n){var s=o.getTableRowIndex(e);if(!(s<0)){s=n.getViewIndex(s);var a=o.getTableItemBounds(s);switch(a.y+=o.contentBounds.y+o.bodyBounds.y,a.bottom>r&&(a.bottom=r),i){case m.DATA:a.x=this._fixedContentPane.x,a.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right;break;case m.FILL:a.x=0,a.width=this.width;break;case m.CELL:var l=n.pointByContainer(0,0),h=n.getCellRect(o,t,!0);a.x=h.x+l.x,a.width=h.width;break;case m.ROW:a.x=0,a.right=this._rightContentPane.width?this._rightContentPane.right:this._contentPane.right}this._rowHoverView.setRect(a)}}},s.prototype.$_resetHovering=function(t,e,i){void 0===i&&(i=!1);var o=this.activeTool;if(o instanceof kh&&this.canHovering){var r=this.container.getTableCell(o.mouseEventTarget),n=this.getCellType(r),s=!1,a=!1,l=!1;if("data"===n){var h=this.getBodyView(r).bodyCellByCell(r);this.$_setHoveredCell(h,e,i),o.$_setHoveredCell(h,t,e),s=!0}else if("header"===n){h=this.getHeaderView(r).tableCellByCell(r);o.$_setHoveredHeaderCell(h,t,e),a=!0}else if("state"===n&&this._rowBarContainer.stateError&&this._stateBar.errorVisible&&this.editOptions.hintOnError){var u=this._rowBarContainer.rowOf(r);this.isItemEditing(this.getItem(u))&&(l=!0,o.$_showStateError(r,this._rowBarContainer.stateError.message))}return!(s||a||l)&&o._hideTooltip(),s||this.$_setHoveredCell(null,e,!1),!0}},s.prototype.$_setHoveredCell=function(t,e,i){if(void 0===i&&(i=!1),i||t!==this._hoveredCell){if(this._hoveredCell&&this._hoveredCell.cell)this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!1);if(this._hoveredCell=t,this._hoveredCell)this.getBodyView(this._hoveredCell.cell).$_mouseEnteredChanged(this,this._hoveredCell,!0);this._doHoveredCellChanged(t)}(i||e!=this._hoveredY)&&(this._hoveredY=e,this.$_resetRowHover())},s.prototype.$_resetRowHover=function(){var t=this._displayOptions.rowHoverType;this._hoveredCell&&t&&t!=m.NONE?(this._rowHoverView.visible=!0,this.$_layoutRowHover(this._hoveredCell,this._hoveredY,t)):this._rowHoverView.visible=!1},s.prototype.$_resetFocusRender=function(t,e){var i=this.getBodyCellAt(this.focusedIndex,!0),o=i&&i.merged&&(i.renderer2||i.head.renderer2);if(o&&o.refreshFocusChanged){var r=this.layoutManager,n=this.getBodyViewAt(this.focusedIndex),s=n.getCellRectAt(r,this.focusedIndex,!1),a=n.getCellRectAt(r,this.focusedIndex,!0),l=s.top-a.top+s.height/2-a.height/2;o.moveClickElement(l,this.focusedIndex.itemIndex)}},s.prototype._doHoveredCellChanged=function(t){},s.prototype._doCellButtonClicked=function(t){this._fireCellButtonClicked(t)},s.prototype._syncHeadCheck=function(t,e){var i=this.checkBar;if(i.syncHeadCheck){this._needSyncHeadCheck=!1;var o=i.showGroup&&!i.merged;if(!1===e)this._headView.allChecked=e;else if(null==t)this._headView.allChecked=e;else{for(var r=0,n=void 0,s=i.visibleOnly,a=s?this._items.itemCount:(n=this.getAllItems()).length,l=0;l<a;l++){var h=s?this._items.getItem(l):n[l];if((h.isDataRow||o)&&h.checkable){if(!h.checked){r=-1;break}r++}}this._headView.allChecked=r>0}}},s.prototype.getRowHeight=function(t){var e=this.getItem(t);return e?e.height:NaN},s.prototype.setRowHeight=function(t,e,i){void 0===i&&(i=!0);var o=this.getItem(t);o&&(this._items.setRowHeight(o,e,!0),i&&this.refreshView())},s.prototype.clearRowHeights=function(t){void 0===t&&(t=!1),this._items.clearRowHeights(t)&&this.refreshView()},s.prototype.setFocusedClass=function(t,e){if(this.displayOptions.useFocusClass){var i=this.getBodyCellAt(t,!0);i&&i.cell&&(e?lt.addClassName(i.cell,"rg-focused-cell"):lt.removeClassName(i.cell,"rg-focused-cell"))}},s.prototype.setFocusedRowClass=function(t,e){function i(t,i){var o=t.getRowView(i);if(o)for(var r=0,n=o._getTableRows(this.layoutManager);r<n.length;r++){var s=n[r];e?lt.addClassName(s,"rg-focused-row"):lt.removeClassName(s,"rg-focused-row")}}if(this.displayOptions.useFocusClass){var o=t.item;i.call(this,this.bodyView,o),i.call(this,this.fixedBodyView,o),i.call(this,this.rightBodyView,o)}},s.prototype.getSummaryCount=function(t){switch(t){case"summary":return this.headerSummaries.count;case"footer":return this.footers.count;default:return 0}},s.prototype.$_rendererChanged=function(t){var e=this._layoutManager.getBodyView(t);e&&e.$_rendererChanged(t)},s.prototype.$_clearDropData=function(t){var e=this.getRowsOfItems(t,!1);e.length>0&&this.dataSource.removeRows(e)},s.prototype.$_dropData=function(t,e,i){var o=this.dataDropOptions,r=o.callback;if(r)r(t.handler,e,this.handler,i);else if(i>=0){var n=t.getRowsOfItems(e),s=void 0,a=o.fieldMapCallback;if(a&&(s=a(t.handler,e,this.handler,i)),s=s||o.fieldMap,i<this.itemCount){var l=this.getRowOfItem(i);l>=0&&this.dataSource.insertRowsFrom(t.dataSource,s,n,l)}else this.dataSource.appendRowsFrom(t.dataSource,s,n)}o.dropMode==iu.MOVE&&t.$_clearDropData(e)},s.prototype.$_checkFocusedLayout=function(){if(this._focusedIndex){var t=this.getBodyCellAt(this._focusedIndex);if(t&&t.spanned)t=this.getBodyView(t.cell).getCheckedLayout(t),this._focusedIndex.layout=t&&t.layout}},s.prototype.$_isBottomCell=function(t){var e=this.getBodyCellAt(t);if(e)return this.getBodyView(e.cell).isBottomCell(e)},s.prototype.$_getLowerOfCell=function(t){var e=this.getBodyCellAt(t);if(e)return(e=this.getBodyView(e.cell).getLowerOf(e))&&e.layout.source},s.prototype.$_isTopCell=function(t){var e=this.getBodyCellAt(t);if(e)return this.getBodyView(e.cell).isTopCell(e)},s.prototype.$_getUpperOfCell=function(t){var e=this.getBodyCellAt(t);if(e)return(e=this.getBodyView(e.cell).getUpperOf(e))&&e.layout.source},s.prototype._checkFieldIndex=function(t){this._items.setCheckFieldIndex(t)},s.prototype._fireViewActivated=function(t){this.fireEvent(s.VIEW_ACTIVATED,t)},s.prototype._fireCurrentChanging=function(t,e){return this.fireConfirmEvent(s.CURRENT_CHANGING,t,e)},s.prototype._fireCurrentChanged=function(t){this.fireEvent(s.CURRENT_CHANGED,t)},s.prototype._fireCurrentRowChanged=function(t,e){this.fireEvent(s.CURRENT_ROW_CHANGED,t,e)},s.prototype._fireValidateCell=function(t,e,i){this.fireEvent(s.VALIDATE_CELL,t,e,i)},s.prototype._fireValidateRow=function(t,e,i){this.fireEvent(s.VALIDATE_ROW,t,e,i)},s.prototype._fireValidationFail=function(t,e,i){return this.fireObjectEvent(s.VALIDATION_FAIL,t,e,i)},s.prototype._fireCellClicked=function(t){this.fireEvent(s.CELL_CLICKED,t)},s.prototype._fireCellDblClicked=function(t){this.fireEvent(s.CELL_DBL_CLICKED,t)},s.prototype._fireCellItemClicked=function(t,e){return this.fireConfirmEvent(s.CELL_ITEM_CLICKED,t,e)},s.prototype._fireColumnCheckedChanged=function(t){this.fireEvent(s.COLUMN_CHECKED_CHANGED,t,t.checked)},s.prototype._fireMenuItemClicked=function(t,e){this.fireEvent(s.MENU_ITEM_CLICKED,t,e)},s.prototype._fireContextMenuPopup=function(t,e,i){return this.fireObjectEvent(s.CONTEXT_MENU_POPUP,t,e,i)},s.prototype._fireContextMenuItemClicked=function(t,e){this.fireEvent(s.CONTEXT_MENU_ITEM_CLICKED,t,e)},s.prototype._fireCellButtonClicked=function(t){this.fireEvent(s.CELL_BUTTON_CLICKED,t)},s.prototype._fireEditButtonClicked=function(t){this.fireEvent(s.EDIT_BUTTON_CLICKED,t)},s.prototype._fireScrollToBottom=function(){this.fireEvent(s.SCROLL_TO_BOTTOM)},s.prototype._fireTopIndexChanged=function(t){this.fireEvent(s.TOP_INDEX_CHANGED,t)},s.prototype._fireDataCellClicked=function(t){this.fireEvent(s.DATA_CELL_CLICKED,t)},s.prototype._fireDataCellDblClicked=function(t){this.fireEvent(s.DATA_CELL_DBL_CLICKED,t)},s.prototype._fireRowsDeleting=function(t){return this.fireConfirmEvent(s.ROWS_DELETING,t)},s.prototype._fireRowInserting=function(t,e){return this.fireConfirmEvent(s.ROW_INSERTING,t,e)},s.prototype._fireItemCommit=function(t,e){this.fireEvent(s.ITEM_COMMIT)},s.prototype._fireSelectionChanged=function(){return this.fireEvent(s.SELECTION_CHANGED)},s.prototype._fireSelectionAdded=function(t){return this.fireEvent(s.SELECTION_ADDED,t)},s.prototype._fireSelectionRemoved=function(){return this.fireEvent(s.SELECTION_REMOVED)},s.prototype._fireSelectionCleared=function(){return this.fireEvent(s.SELECTION_CLEARED)},s.prototype._fireSelectionResized=function(t){return this.fireEvent(s.SELECTION_RESIZED)},s.prototype._fireSelectionEnded=function(t){return this.fireEvent(s.SELECTION_ENDED,t)},s.prototype._fireUpdateStarted=function(t,e){this.fireEvent(s.UPDATE_STARTED,t)},s.prototype._fireInsertStarted=function(t,e){this.fireEvent(s.INSERT_STARTED,t,e)},s.prototype._fireShowEditor=function(t,e,i){return this.fireConfirmEvent(s.SHOW_EDITOR,t,e,i)},s.prototype._fireHideEditor=function(t){return this._doEditorActivated(t,!1),this.fireEvent(s.HIDE_EDITOR,t)},s.prototype._fireEditChange=function(t,e){this.fireEvent(s.EDIT_CHANGE,t,e)},s.prototype._fireGetEditValue=function(t,e){this.fireEvent(s.GET_EDIT_VALUE,t,e)},s.prototype._fireEditCommit=function(t,e,i){return this.fireConfirmEvent(s.EDIT_COMMIT,t,e,i)},s.prototype._fireEditCanceled=function(t){this.fireEvent(s.EDIT_CANCELED,t)},s.prototype._fireItemEditCancel=function(t){return this.fireConfirmEvent(s.ITEM_EDIT_CANCEL,t)},s.prototype._fireItemEditCanceled=function(t){this.fireEvent(s.ITEM_EDIT_CANCELED,t)},s.prototype._fireEditSearch=function(t,e){this.fireEvent(s.EDIT_SEARCH,t,e)},s.prototype._fireSearchCellButtonClick=function(t,e){return this.fireObjectEvent(s.SEARCH_BUTTON_CLICK,t,e)},s.prototype._fireCellEdited=function(t,e){this.fireEvent(s.CELL_EDITED,t,e)},s.prototype._fireEditRowChanged=function(t,e,i,o){this.fireEvent(s.EDIT_ROW_CHANGED,t,e,i,o)},s.prototype._fireEditItemPasted=function(t,e,i,o){this.fireEvent(s.EDIT_ROW_PASTED,t,e,i,o)},s.prototype._fireItemsPasted=function(t){this.fireEvent(s.ROWS_PASTED,t)},s.prototype._fireCellPasting=function(t,e){return this.fireObjectEvent(s.CELL_PASTING,t,e)},s.prototype._fireItemChecked=function(t){this.fireEvent(s.ITEM_CHECKED,t,t.checked)},s.prototype._fireItemsChecked=function(t,e){this.fireEvent(s.ITEMS_CHECKED,t,e)},s.prototype._fireItemAllChecked=function(t){this.fireEvent(s.ITEM_ALL_CHECKED,t)},s.prototype._fireErrorClicked=function(t,e){this.fireEvent(s.ERROR_CLICKED,e)},s.prototype._fireSorting=function(t,e){return this.fireConfirmEvent(s.SORTING,t,e)},s.prototype._fireFiltering=function(){return this.fireConfirmEvent(s.FILTERING)},s.prototype._fireKeyDown=function(t){return this.fireConfirmEvent(s.KEY_DOWN,t)},s.prototype._fireKeyPress=function(t){this.fireEvent(s.KEY_PRESS,t)},s.prototype._fireKeyUp=function(t){this.fireEvent(s.KEY_UP,t)},s.prototype._fireShowTooltip=function(t,e){return this.fireObjectEvent(s.SHOW_TOOLTIP,t,e)},s.prototype._fireShowHeaderTooltip=function(t,e){return this.fireObjectEvent(s.SHOW_HEADER_TOOLTIP,t,e)},s.prototype._fireColumnPropertyChanged=function(t,e,i,o){this.fireEvent(s.COLUMN_PROPERTY_CHANGED,t,e,i,o)},s.prototype._fireLayoutPropertyChanged=function(t,e,i,o){this.fireEvent(s.LAYOUT_PROPERTY_CHANGED,t,e,i,o)},s.prototype._fireGridActivated=function(){return this.fireEvent(s.GRID_ACTIVATED,this)},s.prototype._fireCopy=function(t,e){return this.fireConfirmEvent(s.COPY,t,e)},s.prototype._firePaste=function(t,e){return this.fireConfirmEvent(s.PASTE,t,e)},s.prototype._firePasted=function(){this.fireEvent(s.PASTED)},s.prototype._fireCommandStackChanged=function(t,e){this.fireEvent(s.COMMAND_STACK_CHANGED,t,e)},s.prototype.onPopupMenuManagerMenuItemClicked=function(t,e,i){this._fireMenuItemClicked(e,i)},s.prototype.onScrollBarScrolled=function(t,e,i,o){var r,n,s,a=this.displayOptions,l=this.fixedOptions,h=(this.layoutManager,a.scrollMessageCallback),u=e===Ws.SCROLL_END;if(t.vertical){var c=-1;switch(e){case Ws.LINE:return void this.scrollRow(i);case Ws.PAGE:c=this.topIndex+i*t._page;break;case Ws.THUMB_TRACK:var d=a.scrollDuration;a.liveScroll||this._scrolledTime>0&&lt.getTimer()-this._scrolledTime>d?(c=o,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new Xa(this.container)),this._vscrollBar.tipView=this._scrollTipView,this._vscrollBar.setPosition(o,!0),n=this._vscrollBar.pos+l.rowCount,r=h?h(this.handler,t.vertical,n):String(n+1),this._vscrollBar.setText(r),d>0&&0==this._scrolledTime&&(this._scrolledTime=lt.getTimer()));break;case Ws.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._vscrollBar.tipView=null,c=o,u=!0;break;default:c=o}c>=0&&(this.topIndex=c)}else{var p=-1;switch(e){case Ws.LINE:p=this.leftPos+8*i;break;case Ws.PAGE:p=i>0?this._layoutManager.scrollToNextCell():this._layoutManager.scrollToPrevCell();break;case Ws.THUMB_TRACK:d=a.hscrollDuration;a.liveScroll||this._scrolledTime>0&&lt.getTimer()-this._scrolledTime>d?(p=o,this._scrolledTime=0):(this._scrollTipView||(this._scrollTipView=new Xa(this.container)),this._hscrollBar.tipView=this._scrollTipView,(s=this._layoutManager.getPositionToVIndex(o))>-1&&(r=h?h(this.handler,t.vertical,s):this.getVisibleLayout(s).getDataColumn().header.displayText,this._hscrollBar.setText(r)),this._hscrollBar.setPosition(o,!0),d>0&&0==this._scrolledTime&&(this._scrolledTime=lt.getTimer()));break;case Ws.THUMB_END:this._scrollTipView&&this._scrollTipView.hide(),this._hscrollBar.tipView=null,p=o,u=!0;break;default:p=o}p>=0&&(this.leftPos=p)}u&&!lt.isMobile()&&this.setFocus()},s.prototype.$_checkFocusedRow=function(t){void 0===t&&(t=!1),this.focusedRow>=this.itemCount&&this.clearFocusedIndex(t)},s.prototype.onItemProviderReset=function(t){this.hideEditor(),this._dataChanged=!0,this.clearRowHeights(),this._columnsReset(),this._populateMerges(),this.$_checkFocusedRow(),this.resetGrid(),this._syncHeadCheck([]),this.$_refreshInvalidList(!0),this._shadowDom&&t&&this._shadowDom.setItemProvider(t),this._editorLender&&this._editorLender.itemsChanged(this)},s.prototype.onItemProviderRefresh=function(t){this.hideEditor(),this._dataChanged=!0,this._resetColumnSortStates(),this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(!0),this.refreshView(),!this._keepNullFocus&&this.setFocusedIndex(this.focusedIndex,!0),this._needSyncHeadCheck&&this._syncHeadCheck([]),this.$_refreshInvalidList(!1),this._shadowDom&&t&&this._shadowDom.setItemProvider(t),this._editorLender&&this._editorLender.itemsChanged(this)},s.prototype.onItemProviderRefreshClient=function(t){this.hideEditor(),this._dataChanged=!0,this._populateMerges(),this.$_checkFocusedRow(),this.refreshView(),this._needSyncHeadCheck&&this._syncHeadCheck([]),this._shadowDom&&t&&this._shadowDom.setItemProvider(t)},s.prototype.onItemProviderItemInserted=function(t,e){if(this.hideEditor(),this._dataChanged=!0,this._needSyncHeadCheck=!0,this.clearRowHeights(),this._populateMerges(),this.refreshView(),t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}this._editorLender&&(this._editorLender.itemInserted(this,e),this._editorLender.itemsChanged(this))},s.prototype.onItemProviderItemDeleted=function(t,e){if(this.hideEditor(),this._dataChanged=!0,this._needSyncHeadCheck=!0,this.clearRowHeights(),this._populateMerges(),this.$_checkFocusedRow(!0),this.refreshView(),t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}this._editorLender&&this._editorLender.itemsChanged(this)},s.prototype.onItemProviderItemUpdated=function(t,e){if(this.hideEditor(),this._dataChanged=!0,this._updateRows?this._updateRows.push(e.dataId):this._updateRows=[e.dataId],this.clearRowHeights(),this._populateMerges(),this.refreshView(),t.dataSource.undoing||t.dataSource.redoing){var i=this._focusedIndex.clone();i.itemIndex=e.index,this.setFocusedIndex(i,!0,!0)}this._editorLender&&this._editorLender.itemsChanged(this)},s.prototype.onItemProviderCheckableChanged=function(t,e){this.refreshView(),this._syncHeadCheck([])},s.prototype.onItemProviderItemChecked=function(t,e){this.refreshView(),this._fireItemChecked(e)},s.prototype.onItemProviderItemsChecked=function(t,e,i){this.refreshView(),this._fireItemsChecked(e,i)},s.prototype.onItemProviderItemAllChecked=function(t,e){this.refreshView(),this._fireItemAllChecked(e)},s.prototype.onItemProviderItemCheckChanged=function(t,e,i){this._syncHeadCheck(e,i),this.checkBar.canMerge()&&this._populateMerges(),this._editorLender&&this._editorLender.itemsChanged(this)},s.prototype.onItemProviderRowStateChanged=function(t,e){this.refreshView()},s.prototype.onItemProviderRowStatesChanged=function(t,e){this.refreshView()},s.prototype.onItemProviderRowStatesCleared=function(t){this.refreshView()},s.prototype.onItemProviderSort=function(t,e,i){this.refreshView()},s.prototype.onItemProviderSorted=function(t){this.refreshView(),this.fireEvent(s.SORTING_CHANGED),this._shadowDom&&t&&this._shadowDom.reset()},s.prototype.onItemProviderFilterAdded=function(t){},s.prototype.onItemProviderFilterRemoved=function(t){},s.prototype.onItemProviderFilterCleared=function(t){},s.prototype.onItemProviderFilterAllCleared=function(t){},s.prototype.onItemProviderFiltered=function(t,e,i){this._populateMerges(),this.$_checkFocusedRow(),this.refreshView(),!this._loading&&this._syncHeadCheck([]),this.fireEvent(s.FILTERING_CHANGED,e,i),this._shadowDom&&t&&this._shadowDom.reset()},s.prototype.onItemProviderCommandStackChanged=function(t,e,i){this._fireCommandStackChanged(e,i)},s.prototype.onItemProviderDataLoadComplated=function(t){this._dataLoad=!0},s.prototype.$_focusEditItem=function(t){if(null==this._editorLender){var e=this.getIndex(t.index,this.focusedIndex?this.focusedIndex.column:null);!e.column&&this.visibleLayoutCount>0&&(e._layout=this.getVisibleLayout(0)),this.setFocusedIndex(e,!0),this.makeCellVisible(this.focusedIndex)}},s.prototype.$_beforeEditing=function(t,e){},s.prototype.onItemEditUpdateStarted=function(t,e){this.$_beforeEditing(t,e),this.refreshView(),this._fireUpdateStarted(e,!1),this._editorLender&&this._editorLender.itemUpdateStarted(this,e)},s.prototype.onItemEditAppendStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!0),this._editorLender&&this._editorLender.itemAppendStarted(this,e)},s.prototype.onItemEditInsertStarted=function(t,e){this.$_beforeEditing(t,e),this.hideEditor(),this._populateMerges(),this.refreshView(),this.$_focusEditItem(e),this.requestPrepareEditor(),this._fireInsertStarted(e,!1),this._editorLender&&this._editorLender.itemInsertStarted(this,e)},s.prototype.onItemEditCellEdited=function(t,e,i){this.refreshView(),!this._cellUpdateEventLock&&this._fireCellEdited(e,i)},s.prototype.onItemEditCellUpdated=function(t,e,i,o,r){this.refreshView(),!this._cellUpdateEventLock&&this._fireEditRowChanged(e,i,o,r)},s.prototype.onItemEditCommitting=function(t,e){},s.prototype.onItemEditCommitted=function(t,e){this._appendDummy(),this.hideEditor(),this.refreshView(),this._editorLender&&this._editorLender.itemCommited(this,e)},s.prototype.onItemEditCanceled=function(t){this._appendDummy(),this.hideEditor(),this._populateMerges(),this.refreshView(),this._fireItemEditCanceled(t._editingItem),this._editorLender&&this._editorLender.itemCanceled(this)},s.prototype.onItemEditCommitRequest=function(t){this.commit(!1)},s.prototype.onItemEditCancelReuqest=function(t){this.cancel()},s.prototype.onLookupSourceProviderChanged=function(t){this._resetColumnIndices(),this.refreshView()},s.prototype.onSelectionChanged=function(t){this._refreshSideViews(),this._fireSelectionChanged()},s.prototype.onSelectionAdded=function(t,e){this._addSelectionView(e),this._layoutSelectionViews(),this._fireSelectionAdded(e)},s.prototype.onSelectionRemoved=function(t){this._fireSelectionRemoved()},s.prototype.onSelectionCleared=function(t){this._clearSelectionViews(),this._fireSelectionCleared()},s.prototype.onSelectionResized=function(t,e){this._layoutSelectionViews(),this._fireSelectionResized(e)},s.prototype.onSelectionEnded=function(t,e){this._fireSelectionEnded(e)},s.prototype.onMenuItemClick=function(t,e){this._fireContextMenuItemClicked(t,e)},s.VIEW_ACTIVATED="onGridBaseViewActivated",s.CURRENT_CHANGING="onGridBaseCurrentChanging",s.CURRENT_CHANGED="onGridBaseCurrentChanged",s.CURRENT_ROW_CHANGED="onGridBaseCurrentRowChanged",s.VALIDATE_CELL="onGridBaseValidateCell",s.VALIDATE_ROW="onGridBaseValidateRow",s.VALIDATION_FAIL="onGridBaseValidationFail",s.CELL_CLICKED="onGridBaseCellClicked",s.CELL_DBL_CLICKED="onGridBaseCellDblClicked",s.CELL_ITEM_CLICKED="onGridBaseCellItemClicked",s.COLUMN_CHECKED_CHANGED="onGridBaseColumnCheckedChanged",s.MENU_ITEM_CLICKED="onGridBaseMenuItemClicked",s.CONTEXT_MENU_POPUP="onGridBaseContextMenuPopup",s.CONTEXT_MENU_ITEM_CLICKED="onGridBaseContextMenuItemClicked",s.CELL_BUTTON_CLICKED="onGridBaseCellButtonClicked",s.EDIT_BUTTON_CLICKED="onGridBaseEditButtonClicked",s.SCROLL_TO_BOTTOM="onGridBaseScrollToBottom",s.TOP_INDEX_CHANGED="onGridBaseTopIndexChanged",s.DATA_CELL_CLICKED="onGridBaseDataCellClicked",s.DATA_CELL_DBL_CLICKED="onGridBaseDataCellDblClicked",s.ROWS_DELETING="onGridBaseRowsDeleting",s.ROW_INSERTING="onGridBaseRowInserting",s.ITEM_COMMIT="onGridBaseItemCommit",s.SELECTION_ADDED="onGridBaseSelectionAdded",s.SELECTION_CHANGED="onGridBaseSelectionChanged",s.SELECTION_REMOVED="onGridBaseSelectionRemoved",s.SELECTION_CLEARED="onGridBaseSelectionCleared",s.SELECTION_RESIZED="onGridBaseSelectionResized",s.SELECTION_ENDED="onGridBaseSelectionEnded",s.INSERT_STARTED="onGridBaseInsertStarted",s.UPDATE_STARTED="onGridBaseUpdateStarted",s.SHOW_EDITOR="onGridBaseShowEditor",s.HIDE_EDITOR="onGridBaseHideEditor",s.EDIT_CHANGE="onGridBaseEditChange",s.GET_EDIT_VALUE="onGridBaseGetEditValue",s.EDIT_COMMIT="onGridBaseEditCommit",s.EDIT_CANCELED="onGridBaseEditCanceled",s.ITEM_EDIT_CANCELED="onGridBaseItemEditCanceled",s.ITEM_EDIT_CANCEL="onGridBaseItemEditCancel",s.EDIT_SEARCH="onGridBaseEditSearch",s.SEARCH_BUTTON_CLICK="onGridBaseSearchCellButtonClick",s.CELL_EDITED="onGridBaseCellEdited",s.EDIT_ROW_CHANGED="onGridBaseEditRowChanged",s.EDIT_ROW_PASTED="onGridBaseEditRowPasted",s.ROWS_PASTED="onGridBaseRowsPasted",s.CELL_PASTING="onGridBaseCellPasting",s.ITEM_CHECKED="onGridBaseItemChecked",s.ITEMS_CHECKED="onGridBaseItemsChecked",s.ITEM_ALL_CHECKED="onGridBaseItemAllChecked",s.ERROR_CLICKED="onGridBaseErrorClicked",s.SORTING="onGridBaseSorting",s.SORTING_CHANGED="onGridBaseSortingChanged",s.FILTERING="onGridBaseFiltering",s.FILTERING_CHANGED="onGridBaseFilteringChanged",s.KEY_PRESS="onGridBaseKeyPress",s.KEY_DOWN="onGridBaseKeyDown",s.KEY_UP="onGridBaseKeyUp",s.SHOW_TOOLTIP="onGridBaseShowTooltip",s.SHOW_HEADER_TOOLTIP="onGridBaseShowHeaderTooltip",s.COLUMN_PROPERTY_CHANGED="onGridBaseColumnPropertyChanged",s.LAYOUT_PROPERTY_CHANGED="onGridBaseLayoutPropertyChanged",s.GRID_ACTIVATED="onGridBaseGridActivated",s.COPY="onGridBaseCopy",s.PASTE="onGridBasePaste",s.PASTED="onGridBasePasted",s.COMMAND_STACK_CHANGED="onGridBaseCommandStackChanged",s.DATA_LOAD_COMPLATED="onGridBaseDataLoadComplated",s}(Ds),Tu=function(t){function e(e){var i=t.call(this)||this;return i._styles=null,i.message="",i.visible=!0,i.spaceTop=0,i.spaceBottom=0,i.height=-1,i.styleName="",e&&i.extend(e),i._styles=e&&e.styles?e.styles:null,i}return o(e,t),e.prototype._doDispose=function(){this._styles=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"cssStyle",{get:function(){return this._styles},enumerable:!0,configurable:!0}),e}(ft);!function(t){t.EXCEL="excel",t.CSV="csv"}(Ou||(Ou={})),function(t){t.LOCAL="local",t.REMOTE="remote",t.STREAM="stream"}(Ru||(Ru={}));var Mu=function(t){function e(e){var i=t.call(this)||this;return i.type=Ou.EXCEL,i.target=Ru.LOCAL,i.url=void 0,i.done=null,i.showProgress=!1,i.progressMessage="Exporting...",i.prepareProgress=10,i.progressCallback=null,i.params=null,i}return o(e,t),Object.defineProperty(e.prototype,"fileName",{get:function(){if(this._fileName){if(this._fileName.indexOf(".")<0){var t=this.type===Ou.CSV?".csv":".xlsx";return this._fileName+t}return this._fileName}return this.type===Ou.CSV?"realgrid.csv":"realgrid.xlsx"},set:function(t){t!=this._fileName&&(this._fileName=t?t.trim():null)},enumerable:!0,configurable:!0}),e}(ft),Lu=function(t){function e(e){var i=t.call(this,e)||this;return i._booleanFormatter=null,i.nullDateText="",i.datetimeCallback=null,i.numberCallback=null,i.booleanCallback=null,i.objectCallback=null,i.textCallback=null,i.start=0,i.count=-1,i.linear=!1,i.allColumns=!1,i.allItems=!0,i.onlyCheckedItems=!1,i.pagingAllItems=!1,i.indicator="default",i.checkBar="hidden",i.header="default",i.footer="default",i.headerSummary="default",i.indicatorValue="default",i.checkMark="v",i.indenting=!0,i.separateRows=!1,i.lookupDisplay=!1,i.showLevelOutline=!1,i.applyFitStyle=!0,i.applyDynamicStyles=!1,i.applyDefaultColumnFormat=!1,i.applyFixed=!1,i.sheetName=null,i.exportSeriesColumn=!1,i.replaceCrText=null,i.replaceLfText=null,i.showColumns=[],i.hideColumns=[],i.hiddenColumns=[],i.exportLink=!1,i.exportTemplate=!1,i.sheetAttrs=null,i.assignFrom(e),i}return o(e,t),e.prototype._doDispose=function(){this._documentTitle&&(this._documentTitle=this._documentTitle.dispose()),this._documentSubtitle&&(this._documentSubtitle=this._documentSubtitle.dispose()),this._documentTail&&(this._documentTail=this._documentTail.dispose()),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"documentTitle",{get:function(){return this._documentTitle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"documentSubtitle",{get:function(){return this._documentSubtitle},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"documentTail",{get:function(){return this._documentTail},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"datetimeFormat",{get:function(){return this._datetimeFormat},set:function(t){t!=this._datetimeFormat&&(this._datetimeFormat=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormat",{get:function(){return this._booleanFormat},set:function(t){t!=this._booleanFormat&&(this._booleanFormat=t,this._booleanFormatter=t?Ie.getFormatter(t):null)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numberFormat",{get:function(){return this._numberFormat},set:function(t){t!=this._numberFormat&&(this._numberFormat=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"booleanFormatter",{get:function(){return this._booleanFormatter},enumerable:!0,configurable:!0}),e.prototype.indicatorVisible=function(t){if(t)switch(this.indicator){case"visible":return!0;case"hidden":return!1;case"default":default:return t.rowIndicator.visible}return!1},e.prototype.checkBarVisible=function(t){if(t)switch(this.checkBar){case"visible":return!0;case"hidden":return!1;case"default":default:return t.checkBar.visible}return!1},e.prototype.headerVisible=function(t){if(t)switch(this.header){case"visible":return!0;case"hidden":return!1;case"default":default:return t.header.visible}return!1},e.prototype.headerSummaryVisible=function(t){if(t)switch(this.headerSummary){case"visible":return!0;case"hidden":return!1;case"default":default:return t.headerSummaries.visibleCount>0}return!1},e.prototype.footerVisible=function(t){if(t)switch(this.footer){case"visible":return!0;case"hidden":return!1;case"default":default:return t.footers.visibleCount>0}return!1},e.prototype.showIndicatorRow=function(t){if(t)switch(this.indicatorValue){case"item":return!1;case"row":return!0;case"default":default:return t.rowIndicator.displayValue==An.ROW}return!1},Object.defineProperty(e.prototype,"yOffset",{get:function(){return null==this._yOffset?0:this._yOffset},set:function(t){this._yOffset=Math.floor(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xOffset",{get:function(){return null==this._xOffset?0:this._xOffset},set:function(t){this._xOffset=Math.floor(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"xOffsetWidth",{get:function(){return null==this._xOffsetWidth?100:this._xOffsetWidth},set:function(t){this._xOffsetWidth=Math.floor(t)},enumerable:!0,configurable:!0}),e.prototype.assignFrom=function(t){var e=Object.getPrototypeOf(this);for(var i in t)if("documentTitle"==i||"documentSubtitle"==i||"documentTail"==i)this["_"+i]=new Tu(t[i]);else if(this.hasOwnProperty(i))this[i]=t[i];else{var o=Object.getOwnPropertyDescriptor(e,i);if(o)o.set&&o.set.call(this,t[i]);else for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,i);n?(n.set&&n.set.call(this,t[i]),r=null):r=Object.getPrototypeOf(r)}}},e}(Mu),Fu=(function(t){function e(e){var i=t.call(this,e)||this;return i.lfText=null,i.crText=null,i.seperator=null,i.exportFields=null,i.hideFields=null,i.includeFieldNames=!1,i}o(e,t),e.prototype.assignFrom=function(t){var e=Object.getPrototypeOf(this);for(var i in t)if("type"==i||"target"==i){t[i];var o=t[i].toUpperCase();"type"!=i||"EXCEL"!=o&&"CSV"!=o||(this.type=Ou[o]),"target"!=i||"LOCAL"!=o&&"REMOTE"!=o||(this.target=Ru[o])}else{var r=Object.getOwnPropertyDescriptor(e,i);r&&r.set&&r.set.call(this,t[i])}}}(Mu),function(t){function e(e,i){var o=t.call(this,i)||this;return o._grids=[],o._parseGrids(e,i),o}return o(e,t),Object.defineProperty(e.prototype,"exportGrids",{get:function(){return this._grids},enumerable:!0,configurable:!0}),e.prototype._doDispose=function(){for(var e=this._grids.length;e--;)delete this._grids[e];this._grids=null,t.prototype._doDispose.call(this)},e.prototype._parseGrids=function(t,e){var i=e.exportGrids;if(i&&Array.isArray(i))for(var o=0,r=i.length;o<r;o++){var n,s=i[o].grid;s=s.$_handler?s:s._view,(n=new Lu(e)).assignFrom(i[o]),n.grid=s;var a={grid:s,sheetName:i[o].sheetName,options:n};this._grids.push(a)}else(n=new Lu(e)).grid=t,this._grids.push({grid:t,sheetName:e.sheetName?String(e.sheetName):"sheet1",options:n})},e}(Lu)),Nu=function(){function t(){this.prepareProgress=10,this.indicatorNo=1}return t.prototype.dispose=function(){return null},t.prototype.export=function(t,e){this.grid=t},t}(),Vu=lt.hex,Bu=function(){function t(e,i){void 0===e&&(e=null),void 0===i&&(i=!1),this._r=0,this._g=0,this._b=0,this._a=0,"string"==typeof e?t._parse(e,this,i,!1):e instanceof t?(this._r=e._r,this._g=e._g,this._b=e._b,this._a=e._a):isNaN(e)?(this._r=this._g=this._b=0,this._a=i?NaN:1):(this._a=(e>>>24)/255,this._r=(16711680&e)>>16,this._g=(65280&e)>>8,this._b=255&e)}return t.createFrom=function(e,i){void 0===i&&(i=!1);var o=t._parse(e,$u,i,!1);return o?o instanceof t?o:$u.clone():null},t.getColorStringArray=function(t){return t.trim().toLowerCase().split(/\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},t.getColorCsvArray=function(t){return t.trim().toLowerCase().split(/\s*,\s*|\s+|(rgba\(.*\))|(rgb\(.*\))|(pal\(.*\))/).filter(Boolean)},t._parse=function(t,e,i,o){if(t){var r=t.length;if("#"==(t=t.trim().toLowerCase()).charAt(0))if(t=t.substr(1),--r>=6&&r<=8)e._b=lt.toInt(t.substr(r-2,2),16),e._g=lt.toInt(t.substr(r-4,2),16),e._r=lt.toInt(t.substr(r-6,2),16),e._a=6==r?i?NaN:1:lt.toInt(t.substr(0,r-6),16)/255;else{if(3!=r){if(o)throw"Invalid color value text: "+t;return!1}e._r=lt.toInt(t.charAt(0)+t.charAt(0),16),e._g=lt.toInt(t.charAt(1)+t.charAt(1),16),e._b=lt.toInt(t.charAt(2)+t.charAt(2),16),e._a=i?NaN:1}else if(0==t.indexOf("rgba(")&&")"==t.charAt(r-1)){var n=(t=t.substring(5,r-1)).split(",");e._r=lt.toInt(n[0]),e._g=lt.toInt(n[1]),e._b=lt.toInt(n[2]),e._a=lt.toFloat(n[3])}else{if(0!=t.indexOf("rgb(")||")"!=t.charAt(r-1)){if(i&&ju.hasOwnProperty(t)){n=ju[t];return e._r=n._r,e._g=n._g,e._b=n._b,e._a=n._a,n}if(!i&&Au.hasOwnProperty(t)){n=Au[t];return e._r=n._r,e._g=n._g,e._b=n._b,e._a=n._a,n}if(o)throw new Error("Invalid color text: "+t);return!1}var n=(t=t.substring(4,r-1)).split(",");e._r=lt.toInt(n[0]),e._g=lt.toInt(n[1]),e._b=lt.toInt(n[2]),e._a=i?NaN:1}return!0}return!1},t.areEqual=function(t,e){return t&&e&&t._r==e._r&&t._g==e._g&&t._b==e._b&&t._a==e._a},t.prototype.clone=function(){return new t(this)},t.prototype.copy=function(t,e){return void 0===t&&(t=null),void 0===e&&(e=1),t?(this._r=t._r,this._g=t._g,this._b=t._b,this._a=isNaN(t._a)?e:t._a):this._a=e,this},t.prototype.value=function(){return"rgba("+this._r+","+this._g+","+this._b+","+this._a+")"},t.prototype.valueWithBrightness=function(t){var e=this._r,i=this._g,o=this._b,r=Number(t);return isNaN(r)||1==r||(e=Math.floor(Math.max(0,Math.min(255,e*r))),i=Math.floor(Math.max(0,Math.min(255,i*r))),o=Math.floor(Math.max(0,Math.min(255,o*r))),255==e&&this._r<255&&(e=Math.floor((255+this._r)/2)),255==i&&this._g<255&&(i=Math.floor((255+this._g)/2)),255==o&&this._b<255&&(o=Math.floor((255+this._b)/2))),"rgba("+e+","+i+","+o+","+this._a+")"},t.prototype.argb=function(){return Math.floor(255*this._a)<<24|this._r<<16|this._g<<8|this._b},t.prototype.rgb=function(){return this._r<<16|this._g<<8|this._b},t.prototype.extractAlpha=function(){var t=this._a;return this._a=NaN,t},t.prototype.toHex=function(){return""+Vu(Math.floor(255*this._a))+Vu(this._r)+Vu(this._g)+Vu(this._b)},t.prototype.toColorHex=function(){return""+Vu(this._r)+Vu(this._g)+Vu(this._b)},t.prototype.toString=function(){return"#"+Vu(Math.floor(255*this._a))+Vu(this._r)+Vu(this._g)+Vu(this._b)},t.prototype.toColorString=function(){return"#"+Vu(this._r)+Vu(this._g)+Vu(this._b)},t}(),$u=new Bu,Au={transparent:new Bu("#00000000"),ltGray:new Bu("#d3d3d3"),ltgray:new Bu("#d3d3d3"),aliceblue:new Bu("#f0f8ff"),antiquewhite:new Bu("#faebd7"),aqua:new Bu("#00ffff"),aquamarine:new Bu("#7fffd4"),azure:new Bu("#f0ffff"),beige:new Bu("#f5f5dc"),bisque:new Bu("#ffe4c4"),black:new Bu("#000000"),blanchedalmond:new Bu("#ffebcd"),blue:new Bu("#0000ff"),blueviolet:new Bu("#8a2be2"),brown:new Bu("#a52a2a"),burlywood:new Bu("#deb887"),cadetblue:new Bu("#5f9ea0"),chartreuse:new Bu("#7fff00"),chocolate:new Bu("#d2691e"),coral:new Bu("#ff7f50"),cornflowerblue:new Bu("#6495ed"),cornsilk:new Bu("#fff8dc"),crimson:new Bu("#dc143c"),cyan:new Bu("#00ffff"),darkblue:new Bu("#00008b"),darkcyan:new Bu("#008b8b"),darkgoldenrod:new Bu("#b8860b"),darkgray:new Bu("#a9a9a9"),darkgreen:new Bu("#006400"),darkgrey:new Bu("#a9a9a9"),darkkhaki:new Bu("#bdb76b"),darkmagenta:new Bu("#8b008b"),darkolivegreen:new Bu("#556b2f"),darkorange:new Bu("#ff8c00"),darkorchid:new Bu("#9932cc"),darkred:new Bu("#8b0000"),darksalmon:new Bu("#e9967a"),darkseagreen:new Bu("#8fbc8f"),darkslateblue:new Bu("#483d8b"),darkslategray:new Bu("#2f4f4f"),darkslategrey:new Bu("#2f4f4f"),darkturquoise:new Bu("#00ced1"),darkviolet:new Bu("#9400d3"),deeppink:new Bu("#ff1493"),deepskyblue:new Bu("#00bfff"),dimgray:new Bu("#696969"),dimGray:new Bu("#696969"),dimgrey:new Bu("#696969"),dodgerblue:new Bu("#1e90ff"),firebrick:new Bu("#b22222"),floralwhite:new Bu("#fffaf0"),forestgreen:new Bu("#228b22"),fuchsia:new Bu("#ff00ff"),gainsboro:new Bu("#dcdcdc"),ghostwhite:new Bu("#f8f8ff"),goldenrod:new Bu("#daa520"),gold:new Bu("#ffd700"),gray:new Bu("#808080"),green:new Bu("#008000"),greenyellow:new Bu("#adff2f"),grey:new Bu("#808080"),honeydew:new Bu("#f0fff0"),hotpink:new Bu("#ff69b4"),indianred:new Bu("#cd5c5c"),indigo:new Bu("#4b0082"),ivory:new Bu("#fffff0"),khaki:new Bu("#f0e68c"),lavenderblush:new Bu("#fff0f5"),lavender:new Bu("#e6e6fa"),lawngreen:new Bu("#7cfc00"),lemonchiffon:new Bu("#fffacd"),lightblue:new Bu("#add8e6"),lightcoral:new Bu("#f08080"),lightcyan:new Bu("#e0ffff"),lightgoldenrodyellow:new Bu("#fafad2"),lightgray:new Bu("#d3d3d3"),lightgreen:new Bu("#90ee90"),lightgrey:new Bu("#d3d3d3"),lightpink:new Bu("#ffb6c1"),lightsalmon:new Bu("#ffa07a"),lightseagreen:new Bu("#20b2aa"),lightskyblue:new Bu("#87cefa"),lightslategray:new Bu("#778899"),lightslategrey:new Bu("#778899"),lightsteelblue:new Bu("#b0c4de"),lightyellow:new Bu("#ffffe0"),lime:new Bu("#00ff00"),limegreen:new Bu("#32cd32"),linen:new Bu("#faf0e6"),magenta:new Bu("#ff00ff"),maroon:new Bu("#800000"),mediumaquamarine:new Bu("#66cdaa"),mediumblue:new Bu("#0000cd"),mediumorchid:new Bu("#ba55d3"),mediumpurple:new Bu("#9370db"),mediumseagreen:new Bu("#3cb371"),mediumslateblue:new Bu("#7b68ee"),mediumspringgreen:new Bu("#00fa9a"),mediumturquoise:new Bu("#48d1cc"),mediumvioletred:new Bu("#c71585"),midnightblue:new Bu("#191970"),mintcream:new Bu("#f5fffa"),mistyrose:new Bu("#ffe4e1"),moccasin:new Bu("#ffe4b5"),navajowhite:new Bu("#ffdead"),navy:new Bu("#000080"),oldlace:new Bu("#fdf5e6"),olive:new Bu("#808000"),olivedrab:new Bu("#6b8e23"),orange:new Bu("#ffa500"),orangered:new Bu("#ff4500"),orchid:new Bu("#da70d6"),palegoldenrod:new Bu("#eee8aa"),palegreen:new Bu("#98fb98"),paleturquoise:new Bu("#afeeee"),palevioletred:new Bu("#db7093"),papayawhip:new Bu("#ffefd5"),peachpuff:new Bu("#ffdab9"),peru:new Bu("#cd853f"),pink:new Bu("#ffc0cb"),plum:new Bu("#dda0dd"),powderblue:new Bu("#b0e0e6"),purple:new Bu("#800080"),rebeccapurple:new Bu("#663399"),red:new Bu("#ff0000"),rosybrown:new Bu("#bc8f8f"),royalblue:new Bu("#4169e1"),saddlebrown:new Bu("#8b4513"),salmon:new Bu("#fa8072"),sandybrown:new Bu("#f4a460"),seagreen:new Bu("#2e8b57"),seashell:new Bu("#fff5ee"),sienna:new Bu("#a0522d"),silver:new Bu("#c0c0c0"),skyblue:new Bu("#87ceeb"),slateblue:new Bu("#6a5acd"),slategray:new Bu("#708090"),slategrey:new Bu("#708090"),snow:new Bu("#fffafa"),springgreen:new Bu("#00ff7f"),steelblue:new Bu("#4682b4"),tan:new Bu("#d2b48c"),teal:new Bu("#008080"),thistle:new Bu("#d8bfd8"),tomato:new Bu("#ff6347"),turquoise:new Bu("#40e0d0"),violet:new Bu("#ee82ee"),wheat:new Bu("#f5deb3"),white:new Bu("#ffffff"),whitesmoke:new Bu("#f5f5f5"),yellow:new Bu("#ffff00"),yellowgreen:new Bu("#9acd32")},ju={transparent:new Bu("#00000000"),ltGray:new Bu("#ffd3d3d3",!0),ltgray:new Bu("#ffd3d3d3",!0),aliceblue:new Bu("#fff0f8ff",!0),antiquewhite:new Bu("#fffaebd7",!0),aqua:new Bu("#ff00ffff",!0),aquamarine:new Bu("#ff7fffd4",!0),azure:new Bu("#fff0ffff",!0),beige:new Bu("#fff5f5dc",!0),bisque:new Bu("#ffffe4c4",!0),black:new Bu("#ff000000",!0),blanchedalmond:new Bu("#ffffebcd",!0),blue:new Bu("#ff0000ff",!0),blueviolet:new Bu("#ff8a2be2",!0),brown:new Bu("#ffa52a2a",!0),burlywood:new Bu("#ffdeb887",!0),cadetblue:new Bu("#ff5f9ea0",!0),chartreuse:new Bu("#ff7fff00",!0),chocolate:new Bu("#ffd2691e",!0),coral:new Bu("#ffff7f50",!0),cornflowerblue:new Bu("#ff6495ed",!0),cornsilk:new Bu("#fffff8dc",!0),crimson:new Bu("#ffdc143c",!0),cyan:new Bu("#ff00ffff",!0),darkblue:new Bu("#ff00008b",!0),darkcyan:new Bu("#ff008b8b",!0),darkgoldenrod:new Bu("#ffb8860b",!0),darkgray:new Bu("#ffa9a9a9",!0),darkgreen:new Bu("#ff006400",!0),darkgrey:new Bu("#ffa9a9a9",!0),darkkhaki:new Bu("#ffbdb76b",!0),darkmagenta:new Bu("#ff8b008b",!0),darkolivegreen:new Bu("#ff556b2f",!0),darkorange:new Bu("#ffff8c00",!0),darkorchid:new Bu("#ff9932cc",!0),darkred:new Bu("#ff8b0000",!0),darksalmon:new Bu("#ffe9967a",!0),darkseagreen:new Bu("#ff8fbc8f",!0),darkslateblue:new Bu("#ff483d8b",!0),darkslategray:new Bu("#ff2f4f4f",!0),darkslategrey:new Bu("#ff2f4f4f",!0),darkturquoise:new Bu("#ff00ced1",!0),darkviolet:new Bu("#ff9400d3",!0),deeppink:new Bu("#ffff1493",!0),deepskyblue:new Bu("#ff00bfff",!0),dimgray:new Bu("#ff696969",!0),dimGray:new Bu("#ff696969",!0),dimgrey:new Bu("#ff696969",!0),dodgerblue:new Bu("#ff1e90ff",!0),firebrick:new Bu("#ffb22222",!0),floralwhite:new Bu("#fffffaf0",!0),forestgreen:new Bu("#ff228b22",!0),fuchsia:new Bu("#ffff00ff",!0),gainsboro:new Bu("#ffdcdcdc",!0),ghostwhite:new Bu("#fff8f8ff",!0),goldenrod:new Bu("#ffdaa520",!0),gold:new Bu("#ffffd700",!0),gray:new Bu("#ff808080",!0),green:new Bu("#ff008000",!0),greenyellow:new Bu("#ffadff2f",!0),grey:new Bu("#ff808080",!0),honeydew:new Bu("#fff0fff0",!0),hotpink:new Bu("#ffff69b4",!0),indianred:new Bu("#ffcd5c5c",!0),indigo:new Bu("#ff4b0082",!0),ivory:new Bu("#fffffff0",!0),khaki:new Bu("#fff0e68c",!0),lavenderblush:new Bu("#fffff0f5",!0),lavender:new Bu("#ffe6e6fa",!0),lawngreen:new Bu("#ff7cfc00",!0),lemonchiffon:new Bu("#fffffacd",!0),lightblue:new Bu("#ffadd8e6",!0),lightcoral:new Bu("#fff08080",!0),lightcyan:new Bu("#ffe0ffff",!0),lightgoldenrodyellow:new Bu("#fffafad2",!0),lightgray:new Bu("#ffd3d3d3",!0),lightgreen:new Bu("#ff90ee90",!0),lightgrey:new Bu("#ffd3d3d3",!0),lightpink:new Bu("#ffffb6c1",!0),lightsalmon:new Bu("#ffffa07a",!0),lightseagreen:new Bu("#ff20b2aa",!0),lightskyblue:new Bu("#ff87cefa",!0),lightslategray:new Bu("#ff778899",!0),lightslategrey:new Bu("#ff778899",!0),lightsteelblue:new Bu("#ffb0c4de",!0),lightyellow:new Bu("#ffffffe0",!0),lime:new Bu("#ff00ff00",!0),limegreen:new Bu("#ff32cd32",!0),linen:new Bu("#fffaf0e6",!0),magenta:new Bu("#ffff00ff",!0),maroon:new Bu("#ff800000",!0),mediumaquamarine:new Bu("#ff66cdaa",!0),mediumblue:new Bu("#ff0000cd",!0),mediumorchid:new Bu("#ffba55d3",!0),mediumpurple:new Bu("#ff9370db",!0),mediumseagreen:new Bu("#ff3cb371",!0),mediumslateblue:new Bu("#ff7b68ee",!0),mediumspringgreen:new Bu("#ff00fa9a",!0),mediumturquoise:new Bu("#ff48d1cc",!0),mediumvioletred:new Bu("#ffc71585",!0),midnightblue:new Bu("#ff191970",!0),mintcream:new Bu("#fff5fffa",!0),mistyrose:new Bu("#ffffe4e1",!0),moccasin:new Bu("#ffffe4b5",!0),navajowhite:new Bu("#ffffdead",!0),navy:new Bu("#ff000080",!0),oldlace:new Bu("#fffdf5e6",!0),olive:new Bu("#ff808000",!0),olivedrab:new Bu("#ff6b8e23",!0),orange:new Bu("#ffffa500",!0),orangered:new Bu("#ffff4500",!0),orchid:new Bu("#ffda70d6",!0),palegoldenrod:new Bu("#ffeee8aa",!0),palegreen:new Bu("#ff98fb98",!0),paleturquoise:new Bu("#ffafeeee",!0),palevioletred:new Bu("#ffdb7093",!0),papayawhip:new Bu("#ffffefd5",!0),peachpuff:new Bu("#ffffdab9",!0),peru:new Bu("#ffcd853f",!0),pink:new Bu("#ffffc0cb",!0),plum:new Bu("#ffdda0dd",!0),powderblue:new Bu("#ffb0e0e6",!0),purple:new Bu("#ff800080",!0),rebeccapurple:new Bu("#ff663399",!0),red:new Bu("#ffff0000",!0),rosybrown:new Bu("#ffbc8f8f",!0),royalblue:new Bu("#ff4169e1",!0),saddlebrown:new Bu("#ff8b4513",!0),salmon:new Bu("#fffa8072",!0),sandybrown:new Bu("#fff4a460",!0),seagreen:new Bu("#ff2e8b57",!0),seashell:new Bu("#fffff5ee",!0),sienna:new Bu("#ffa0522d",!0),silver:new Bu("#ffc0c0c0",!0),skyblue:new Bu("#ff87ceeb",!0),slateblue:new Bu("#ff6a5acd",!0),slategray:new Bu("#ff708090",!0),slategrey:new Bu("#ff708090",!0),snow:new Bu("#fffffafa",!0),springgreen:new Bu("#ff00ff7f",!0),steelblue:new Bu("#ff4682b4",!0),tan:new Bu("#ffd2b48c",!0),teal:new Bu("#ff008080",!0),thistle:new Bu("#ffd8bfd8",!0),tomato:new Bu("#ffff6347",!0),turquoise:new Bu("#ff40e0d0",!0),violet:new Bu("#ffee82ee",!0),wheat:new Bu("#fff5deb3",!0),white:new Bu("#ffffffff",!0),whitesmoke:new Bu("#fff5f5f5",!0),yellow:new Bu("#ffffff00",!0),yellowgreen:new Bu("#ff9acd32",!0)},Hu=function(){function t(){}return t.parseDocumentStyles=function(t){for(var e,i,o,r={},n=t.styleSheets,s=0,a=n.length;s<a;s++){e=n[s];try{e.rules?i=e.rules:e.cssRules&&(i=e.cssRules)}catch(t){continue}if(i)for(var l=i.length;l--;){var h=(o=i[l]).selectorText;if(h)if(h.indexOf(",")>-1)for(var u=h.split(","),c=u.length;c--;){var d=u[c].trim();d&&(r[d]=o.style)}else r[o.selectorText]=o.style}}return r},t.extendCssStyle=function(t,e){for(var i=0,o=t.length;i<o;i++){var r=t[i];"inherit"==t[r]||lt.included(r,"background-color")&&lt.included(t[r],"none","initial","unset")||(e[r]||(e[e.length]=r,e.length++),e[r]=t[r])}},t.getSelectorStyle=function(t,e){return t[e]},t}(),Wu=function(){function t(t,e){this._grid=t,this._exportOptions=e,this._exportLayout=e.exportLayout,this._dataColumns=[],this._sparkColumns={},this.parse()}return t.prototype.dispose=function(){this._headerCells=null,this._dataCells=null,this._dataColumns=null,this._sparkColumns=null,this._exportLayout=null,this._layout=this._layout&&this._layout.dispose()},Object.defineProperty(t.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){var t=this._layout&&this._layout._dataCells;return t&&t.length?t[0].length:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerRowCount",{get:function(){return(this._layout&&this._layout._headerCells).length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataRowCount",{get:function(){return(this._layout&&this._layout._dataCells).length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sparkColumns",{get:function(){return this._sparkColumns},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"documentCssStyles",{get:function(){return this._documentCssStyles},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupModel",{get:function(){return this._groupModel},enumerable:!0,configurable:!0}),t.prototype.getHeader=function(t,e){return this._headerCells[t][e]},t.prototype.getItem=function(t,e){return this._dataCells[t][e]},t.prototype.getFooterItem=function(t,e){return this._footerCells[t][e]},t.prototype.getSummaryItem=function(t,e){return this._summaryCells[t][e]},t.prototype.clearDataSpanned=function(){for(var t=this._dataCells,e=0;e<t.length;e++)for(var i=0;i<t[e].length;i++)t[e][i].spanned=!1},t.prototype.prepareLayout=function(){var t,e=this.grid,i=this._exportOptions,o=e.activeCellLayout;if(i.linear){for(var r=o.getDataColumns(!1),n=[],s=0;s<=r.length-1;s++){var a=r[s],l=a.visible&&a.layout.visible||i.allColumns;(l=l&&i.hideColumns.indexOf(a.name)<0||i.showColumns.indexOf(a.name)>=0)&&n.push({column:a.name,width:a.layout.domWidth})}t=new Bn(e).load(n)}else t=i.exportLayout?new Bn(e).load(i.exportLayout):new Bn(e).load(e.activeCellLayout.getLayout(!0,i.applyFitStyle,i.allColumns,i.showColumns,i.hideColumns));return t},t.prototype.parse=function(){var t=this._grid,e=this._layout=this.prepareLayout();e.$_refresh2(t._columns,t.displayOptions.minCellWidth),e.$_prepareLayout(t,t.fixedOptions.colCount,t.fixedOptions.rightCount),e.$_prepareMerges(t),this._setCellInfo(e._headerCells,this._headerCells=[]),this._setCellInfo(e._dataCells,this._dataCells=[]),this._setFooterInfo(e._dataCells,t.footers.visibleCount,this._footerCells=[]),this._setFooterInfo(e._dataCells,t.headerSummaries.visibleCount,this._summaryCells=[]),this._documentCssStyles=Hu.parseDocumentStyles(t.doc),this._setDataColumns(e._dataCells),this._setSparkInfo(this._dataCells)},t.prototype._setCellInfo=function(t,e){for(var i=0;i<t.length;i++){for(var o=[],r=0;r<t[i].length;r++)o.push({layout:t[i][r],spanned:!1});e.push(o)}},t.prototype._setFooterInfo=function(t,e,i){for(var o=0;o<e;o++)for(var r=0;r<t.length;r++){for(var n=[],s=0;s<t[r].length;s++)n.push({footerIndex:o,layout:t[r][s],spanned:!1});i.push(n)}},t.prototype.setGroupFooterItms=function(t,e,i){this._groupModel=t;var o=this._groupFooterCells=[],r=this._dataCells,n=!1;if(!(t.footerCount>0)){var s=t.provider._expandedAdornments,a=t.provider._collapsedAdornments;n=i?e&&!t.expanded&&lt.included(a,u.SUMMARY,u.FOOTER):(n=t.expanded&&s===u.SUMMARY)||!e&&!t.expanded&&lt.included(a,u.SUMMARY,u.FOOTER)}for(var l=n?t.allFooterCount:t.footerCount,h=0;h<l;h++)for(var c=n?t._allFooters[h]:t.getFooter(h),d=0;d<r.length;d++){for(var p=[],_=0;_<r[d].length;_++)p.push({footerIndex:c.footerIndex,layout:r[d][_].layout,spanned:!1});o.push(p)}},t.prototype.getGroupFooterCells=function(){return this._groupFooterCells},t.prototype._setDataColumns=function(t){var e,i;this._dataColumns=[];for(var o=0,r=t.length;o<r;o++){e=[];for(var n=0,s=t[o].length;n<s;n++)(i=t[o][n]).isProxy&&(i=i.source),e.push(i.firstColumn);this._dataColumns.push(e)}},t.prototype._setSparkInfo=function(t){function e(t,e,i,o){var r={start:void 0,end:void 0,row:void 0},n=e[0],s=e[e.length-1],a=t.columnByField(n),l=t.columnByField(s);if(!a||!l)return null;for(var h=0,u=o.length;h<u;h++)for(var c=0,d=o[h].length;c<d;c++)a==o[h][c]&&(r.start=c,r.row=h-i),l==o[h][c]&&(r.end=c);return r}var i,o,r,n,s,a,l=this.documentCssStyles;this._sparkColumns=[];for(var h=0,u=t.length;h<u;h++)for(var c=0,d=t[h].length;c<d;c++)if((r=(o=(i=t[h][c]).layout)instanceof xn?o.firstColumn:null)instanceof bn&&(n=r.renderer)&&Js.interfaced(n)){s=r.fields,a=r.grid;var p=s.length>0&&e(a,s,h,this._dataColumns);if(p){var _=n.firstStyle,f=n.lastStyle,g=n.highStyle,y=n.lowStyle,m="",b=void 0,v=void 0;if(Qs.interfaced(n)){m="line",!f&&(f=Qs.LAST_STYLE),!g&&(g=Qs.HIGH_STYLE),!y&&(y=Qs.LOW_STYLE);var w=n.pointStyle?Hu.getSelectorStyle(l,"."+n.pointStyle):void 0;b=w?new Bu(w.fill).toHex():void 0,v=(x=Hu.getSelectorStyle(l,"."+Qs.CHART_STYLE))?new Bu(x.stroke).toHex():void 0}else{var C=void 0;ta.interfaced(n)?(m="column",C=ta.CHART_STYLE,!f&&(f=ta.LAST_STYLE),!g&&(g=ta.HIGH_STYLE),!y&&(y=ta.LOW_STYLE)):(m="stacked",C=ea.CHART_STYLE);var x=Hu.getSelectorStyle(l,"."+C);v=new Bu(x.fill).toHex()}var I=g?Hu.getSelectorStyle(l,"."+g):void 0,E=y?Hu.getSelectorStyle(l,"."+y):void 0,S=_?Hu.getSelectorStyle(l,"."+_):void 0,O=f?Hu.getSelectorStyle(l,"."+f):void 0,R={type:m,colors:{colorHigh:I&&I.fill?new Bu(I.fill).toHex():void 0,colorLow:E&&E.fill?new Bu(E.fill).toHex():void 0,colorFirst:S&&S.fill?new Bu(S.fill).toHex():void 0,colorLast:O&&O.fill?new Bu(O.fill).toHex():void 0,colorMarkers:b,colorSeries:v},sparkLines:{},range:p};i.sparkLineGroup=R,this._sparkColumns[r.$_hash]=i}}},t}(),Gu=function(){function t(){}return t.encode=function(e){var i,o,r,n,s,a,l,h="",u=0;for(e=t.utf8_encode(e);u<e.length;)n=(i=e.charCodeAt(u++))>>2,s=(3&i)<<4|(o=e.charCodeAt(u++))>>4,a=(15&o)<<2|(r=e.charCodeAt(u++))>>6,l=63&r,isNaN(o)?a=l=64:isNaN(r)&&(l=64),h=h+this._keyStr.charAt(n)+this._keyStr.charAt(s)+this._keyStr.charAt(a)+this._keyStr.charAt(l);return h},t.decode=function(e){var i,o,r,n,s,a,l="",h=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");h<e.length;)i=t._keyStr.indexOf(e.charAt(h++))<<2|(n=t._keyStr.indexOf(e.charAt(h++)))>>4,o=(15&n)<<4|(s=t._keyStr.indexOf(e.charAt(h++)))>>2,r=(3&s)<<6|(a=t._keyStr.indexOf(e.charAt(h++))),l+=String.fromCharCode(i),64!=s&&(l+=String.fromCharCode(o)),64!=a&&(l+=String.fromCharCode(r));return l=t.utf8_decode(l)},t.utf8_encode=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var o=t.charCodeAt(i);o<128?e+=String.fromCharCode(o):o>127&&o<2048?(e+=String.fromCharCode(o>>6|192),e+=String.fromCharCode(63&o|128)):(e+=String.fromCharCode(o>>12|224),e+=String.fromCharCode(o>>6&63|128),e+=String.fromCharCode(63&o|128))}return e},t.utf8_decode=function(t){for(var e="",i=0,o=0,r=0,n=0,s=t.length;i<s;)(o=t.charCodeAt(i))<128?(e+=String.fromCharCode(o),i++):o>191&&o<224?(r=t.charCodeAt(i+1),e+=String.fromCharCode((31&o)<<6|63&r),i+=2):(r=t.charCodeAt(i+1),n=t.charCodeAt(i+2),e+=String.fromCharCode((15&o)<<12|(63&r)<<6|63&n),i+=3);return e},t}(),Uu=function(){function t(){}return t.convertNumberFormat=function(t){return t.indexOf(";")>0&&(t=t.split(";")[0]),t.indexOf(".#")>0?t.replace(".#",".0"):t},t.convertDateFormat=function(t){for(var e="",i=t.length,o=0;o<i;o++){var r=t.charAt(o);switch(r){case"y":case"d":case"m":case"s":case":":e+=r;break;case"M":e+="m";break;case"a":e+="AM/PM";break;case"H":e+="h",(o>=i-1||"H"!=t.charAt(o+1))&&(e+="h");break;case"h":0!=o&&"h"==t.charAt(o-1)||(e+="h");break;case"S":break;case".":case"/":case"-":case" ":(o>=i-1||"S"!=t.charAt(o+1))&&(e=e+"\\"+r);break;default:e=e+'"'+r+'"'}}return e},t}(),zu=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),null},e.prototype.export=function(e,i){t.prototype.export.call(this,e,i);var o=this._exportOptions=i;this._cols=[];var r=e.collectColumns(!0,!0,!0);this._cols=r.filter((function(t){return t instanceof yn})),this.indicator=o.indicatorVisible(e)?e.rowIndicator:null,this.header=o.headerVisible(e)?e.header:null,this.headerSummary=o.headerSummaryVisible(e)?e.headerSummary:null,this.footer=o.footerVisible(e)?e.footer:null,this.indicatorHead=e.rowIndicator.headText||"No",this.indicatorFoot=e.rowIndicator.footText||"",this.indicatorSummary=e.rowIndicator.sumText,this.done=function(){this.save()},this.buildBook()},e.prototype.prepare=function(){},e.prototype.finallize=function(){},e.prototype.buildBook=function(){this.buildSheet(this.grid)},e.prototype.buildSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1),this.buildItems(t),this.footer&&this.buildSummaryItem(t,!0),this.done()},e.prototype.addQuatation=function(t,e){if(null!=t){if(this._exportOptions){var i=this._exportOptions,o=i.replaceCrText,n=i.replaceLfText;o&&t&&(t=t.replace(/\n/g,o)),n&&t&&(t=t.replace(/\r/g,n))}(e===r.TEXT||t.indexOf("\n")>=0||t.indexOf(",")>=0||t.indexOf('"')>=0)&&(t='"'+t.replace(/\"/g,'""')+'"')}return null===t?"":t},e.prototype.buildHeader=function(t){var e=[],i=this._cols;this.indicator&&e.push(this.indicatorHead);for(var o=i.length,r=0;r<o;r++){var n=i[r];e.push(this.addQuatation(n.header.displayText))}this._rows.push(e.join(","))},e.prototype.buildSummaryItem=function(t,e){var i,o=this._exportOptions,r=e?t.footers:t.headerSummaries;if(r.visible)for(var n=r.visibleCount,s=0;s<n;s++){var a=[];this.indicator&&a.push(0==s?this.indicatorFoot:"");for(var l=r.getVisible(s),h=0,u=this._cols.length;h<u;h++){var c=this._cols[h],d=l.getCell(c.layout),p=d.getSummary(),_=d.value;i="number"==typeof _?isNaN(_)?d.text:String(_):_ instanceof Date?o.datetimeCallback?(_=o.datetimeCallback(-1,c.name,_))instanceof Date?Ge.Default.getText(_):_:Ge.Default.getText(_):null==_?d.text||p.text:String(_),a.push(this.addQuatation(i))}this._rows.push(a.join(","))}},e.prototype.buildItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemSource.itemCount,i=this.allItems,o=0;o<e;o++){var r=i?i[o]:t.getItem(o);this.buildRow(t,r)}},e.prototype.buildRow=function(t,e){var i,o=this._exportOptions,r=[];if(this.indicator){var n=o.showIndicatorRow(t)?e.dataRow:this.indicatorNo++;r.push(n.toString())}for(var s=0,a=this._cols.length;s<a;s++){var l=this._cols[s],h=void 0;if(i=void 0,l instanceof mn)if(h=l.getField()){var u=Wn.tempItem(t,e,l);i=t.getDisplayText(u)}else i="";r.push(this.addQuatation(i,h&&h.dataType))}this._rows.push(r.join(","))},e.prototype.buildGroupHeader=function(t,e){},e.prototype.buildGroupFooter=function(t,e){},e.prototype.buildMergedGroupHeader=function(t,e){},e.prototype.buildMergedGroupFooter=function(t,e){},e.prototype.buildTreeSheet=function(t){this._rows=[],this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1),this.buildTreeItems(t),this.footer&&this.buildSummaryItem(t,!0),this.done()},e.prototype.buildTreeItems=function(t){for(var e=this.allItems?this.allItems.length:t.itemCount,i=this.allItems,o=0;o<e;o++){var r=i?i[o]:t.getItem(o);if(!(r instanceof Dr))throw"Unkonw tree item type";this.buildTreeRow(t,r)}},e.prototype.buildTreeRow=function(t,e){this.buildRow(t,e)},e.prototype.save=function(){var t=this._exportOptions,e=t.fileName,i="\ufeff"+this._rows.join("\n");t.target==Ru.LOCAL?this.saveLocal(e,i):this.saveServer(e,i)},e.prototype.saveLocal=function(t,e){var i=this.grid.doc,o=st(i);e=e;var r=new Blob([e],{type:"text/csv charset=UTF-8"});if(o.navigator.msSaveOrOpenBlob)o.navigator.msSaveOrOpenBlob(r,t);else if(o.navigator.msSaveBlob)o.navigator.msSaveBlob(r,t);else{var n=i.createElement("a");i.body.appendChild(n);var s=URL.createObjectURL(r);n.href=s,n.download=t,n.click(),i.body.removeChild(n)}},e.prototype.saveServer=function(t,e){var i=this.grid.doc,o='<form name="tempForm" action="'+this._exportOptions.url+'" method="post">';o+='<input type="hidden" name="fileName" value = "'+t+'"/>',o+='<input type="hidden" name="data" value = "'+Gu.encode(e)+'"/>',o+='<input id="submitBtn" type="submit"/>',o+="</form>";var r=i.createElement("div");r.innerHTML=o,i.body.appendChild(r),i.getElementById("submitBtn").click(),i.body.removeChild(r)},e}(Nu),Yu=/\<|\>|\&|\"/;function qu(t){return Yu.test(t)?t.replace(/\&/g,"&amp;").replace(/\</g,"&lt;").replace(/\>/g,"&gt;").replace(/\"/g,"&quot;"):t}var Ku,Xu=function(){function t(){}return t.createDocument=function(t,e){var i={name:t,attrs:{}};for(var o in e)i.attrs[o]=e[o];return i},t.removeItem=function(e){if(e.texts=null,e.attrs=null,e.childs)for(var i=e.childs.length;i--;)t.removeItem(e.childs[i]),delete e.childs[i];e.childs=null},t.addChild=function(e,i,o,r){var n={name:i,attrs:o};return r&&t.addText(n,qu(r)),t.addChildElement(e,n),n},t.addChildElement=function(t,e){t.childs||(t.childs=[]),t.childs.push(e)},t.addProperty=function(t,e,i){t.attrs||(t.attrs={}),t.attrs[e]=qu(i)},t.addText=function(t,e){t.texts||(t.texts=[]),t.texts.push(e)},t.toString=function(e){var i="<"+e.name;for(var o in e.attrs)i+=" "+o+'="'+e.attrs[o]+'"';if(e.childs||e.texts){if(i+=">",e.texts)for(var r=0,n=e.texts.length;r<n;r++)i+=e.texts[r];if(e.childs)for(r=0,n=e.childs.length;r<n;r++)i+=t.toString(e.childs[r]);i+="</"+e.name+">"}else i+="/>";return i},t}(),Zu=function(){function t(){}return t.toColCaption=function(t){for(var e="";t>=0;)e=String.fromCharCode(t%26+65)+e,t=Math.floor(t/26)-1;return e},t.toRange=function(e,i,o,r,n){void 0===o&&(o=!1),void 0===r&&(r=1),void 0===n&&(n=1);var s=i+1;return o?t.toColCaption(e)+s+":"+t.toColCaption(e+r-1)+(s+n-1):t.toColCaption(e)+s},t.XML_HEAD_STRING='<?xml version="1.0" encoding="UTF-8" standalone="yes"?>',t}(),Ju=function(){function t(){this._nextId=0,this._count=0,this._stringMap={},this._strings=[]}return t.prototype.dispose=function(){for(var t=this._strings.length;t--;)delete this._strings[t];for(var e in this._strings=null,this._stringMap)delete this._stringMap[e];this._stringMap=null},Object.defineProperty(t.prototype,"count",{get:function(){return this._count},enumerable:!0,configurable:!0}),t.prototype.uniqueCount=function(){return this._nextId},t.prototype.add=function(t){this._count++;var e=this._stringMap[t];return void 0===e&&(e=this._nextId++,this._stringMap[t]=e,this._strings[e]=t),e},t.prototype.getIndex=function(t){return this._stringMap[t]},t.prototype.createPart=function(){var t=Xu.createDocument("sst",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main"});Xu.addProperty(t,"count",this._count.toString()),Xu.addProperty(t,"uniqueCount",this._nextId.toString());for(var e=/^\s|\s$|\r|\n|\r\n/,i=0,o=this._strings.length;i<o;i++){var r=Xu.addChild(t,"si"),n=Xu.addChild(r,"t",null,this._strings[i]);e.test(this._strings[i])&&Xu.addProperty(n,"xml:space","preserve")}var s=Xu.toString(t);return Zu.XML_HEAD_STRING+s},t}(),Qu=function(){function t(t){this._id=t}return t.EqualsById=function(t,e){return!t&&!e||!(!t&&e||t&&!e)&&t._id==e.id},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){},t}(),tc=function(){function t(){this._items=[],this._indexer=0}return t.prototype.dispose=function(){for(var t=this._items.length;t--;)this._items[t].dispose(),this._items[t]=null,delete this._items[t]},t.prototype.getIndexer=function(){return this._indexer++},t.prototype.create=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=this._items.length;i--;){var o=this._items[i];if(o.equals.apply(o,t))return o}var r=this.createInstance.apply(this,t);return this._items.push(r),r},t.prototype.createUnique=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=this.createInstance.apply(this,t);return this._items.push(i),i},t}(),ec=function(t){function e(e,i,o,r,n,s,a){void 0===i&&(i="Tahoma"),void 0===o&&(o=10),void 0===r&&(r="ff000000");var l=t.call(this,e)||this;return l._bold=void 0,l._italic=void 0,l._underline=void 0,l._name=i,l._size=o,l._color=r,l._bold=n,l._italic=s,l._underline=a,l}return o(e,t),e.prototype.assignFrom=function(t){this._name=this._name||t._name,this._size=this._size||t._size,this._color=this._color||t._color,this._bold=null==this._bold?t._bold:this._bold,this._italic=null==this._italic?t._italic:this._italic,this._underline=null==this._underline?t._underline:this._underline},e.prototype.equalsObj=function(t){return this._name==t._name&&this._size==t._size&&this._color==t._color&&this._bold==t._bold&&this._italic==t._italic&&this._underline==t._underline},e.prototype.equals=function(t,e,i,o,r,n){return void 0===t&&(t="Tahoma"),void 0===e&&(e=10),void 0===i&&(i="ff000000"),void 0===o&&(o=!1),void 0===r&&(r=!1),void 0===n&&(n=!1),this._name==t&&this._size==e&&this._color==i&&this._bold==o&&this._italic==r&&this._underline==n},e.prototype.toXml=function(t,e){yi.addChildWithAttr(t,e,"sz","val",this._size||10),yi.addChildWithAttr(t,e,"name","val",this._name||"Calibri"),yi.addChildWithAttr(t,e,"color","rgb",this._color||"ff000000"),yi.addChildWithAttr(t,e,"b","val",this._bold?"true":"false"),yi.addChildWithAttr(t,e,"i","val",this._italic?"true":"false"),this._underline&&yi.addChild(t,e,"u")},e}(Qu),ic=function(t){function e(e){var i=t.call(this)||this,o=rt(e).getComputedStyle(e);return i._defFontSize=i.$_convertUnit(o.fontSize||"16px"),i}return o(e,t),e.prototype.createInstance=function(t,e,i,o,r,n){return new ec(this.getIndexer(),t,e,i,o,r,n)},e.prototype.createFromCss=function(t){var e=t["font-family"];e?(e.indexOf(",")>-1&&(e=e.split(",")[0]),e=e.replace(/\"/g,"")):e=void 0;var i=this.$_convertUnit(t["font-size"]);i=isNaN(i)?void 0:72*i/96;var o=t.color;o&&(o="#"==o.charAt(0)?t.color:new Bu(o).toColorHex());var r="bold"==t["font-weight"],n="italic"==t["font-style"],s="underline"==t["font-decoration"];return this.create(e,i,o,r,n,s)},e.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var r=yi.addChild(t,e,"font");this._items[o].toXml(t,r)}yi.setAttr(e,"count",i)},e.prototype.$_convertUnit=function(t){return null==t?void 0:"string"==typeof t?t.indexOf("px")>0?parseFloat(t):t.indexOf("pt")>0?Math.round(1.3333*parseFloat(t)):t.indexOf("em")>0?parseFloat(t)*this._defFontSize:12:parseInt(t)},e}(tc),oc=function(t){function e(e,i,o,r,n,s,a){void 0===i&&(i="solid"),void 0===r&&(r=0),void 0===n&&(n=!1),void 0===a&&(a=90);var l=t.call(this,e)||this;return l._pattern=i,l._color=o,l._linear=n,l._color2=s,l._degree=a,l._tint=r,l}return o(e,t),e.prototype.assignFrom=function(t){this._pattern=t._pattern||this._pattern,this._color=t._color||this._color,this._tint=t._tint||this._tint,this._linear=null==t._linear?this._linear:t._linear,this._color2=t._color2||this._color2,this._degree=t._degree||this._degree},e.prototype.equalsObj=function(t){return this._pattern==t._pattern&&this._color==t._color&&this._color2==t._color2&&this._linear==t._linear&&this._degree==t._degree&&this._tint==t._tint},e.prototype.equals=function(t,e,i,o,r,n){return void 0===t&&(t="solid"),void 0===i&&(i=0),void 0===o&&(o=!1),void 0===n&&(n=90),this._pattern==t&&this._color==e&&this._color2==r&&this._linear==o&&this._degree==n&&this._tint==i},e.prototype.toXml=function(t,e){var i,o=this._tint||0;if(this._linear){var r=yi.addChildWithAttr(t,e,"gradientFill","degree",this._degree||90),n=yi.addChildWithAttr(t,r,"stop","position","0");i=yi.addChild(t,n,"color"),yi.setAttr(i,"rgb",this._color),yi.setAttr(i,"tint",this._tint||0),n=yi.addChildWithAttr(t,r,"stop","position","1"),i=yi.addChild(t,n,"color"),yi.setAttr(i,"rgb",this._color2),yi.setAttr(i,"tint",o)}else{var s=yi.addChildWithAttr(t,e,"patternFill","patternType",this._pattern.toString());if("none"!=this._pattern&&null!=this._color){var a=yi.addChild(t,s,"fgColor");yi.setAttr(a,"rgb",this._color),yi.setAttr(a,"tint",o)}}},e}(Qu),rc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.createInstance=function(t,e,i,o,r,n){return new oc(this.getIndexer(),t,e,i,o,r,n)},e.prototype.createFromCss=function(t){var e=t["background-image"],i="linear-gradient(",o=e?e.indexOf(i):-1;if(o>-1){var r=this._splitEscape(e.slice(o+i.length,e.length-1)),n=void 0,s=void 0,a=void 0;r.length>2?(n=new Bu(r[1]),s=new Bu(r[2]),a=parseInt(r[0])):(n=new Bu(r[0]),s=new Bu(r[1]),a=180),a=(a+270)%360;var l=1-n._a;return this.create("none",n.toHex(),l,!0,s.toHex(),a)}if(t["background-color"]){var h=new Bu(t["background-color"]);l=1-h._a;return h?this.create("solid",h.toHex(),l):this._items[0]}},e.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var r=yi.addChild(t,e,"fill");this._items[o].toXml(t,r)}yi.setAttr(e,"count",i)},e.prototype._splitEscape=function(t,e){if(void 0===e&&(e=","),t){for(var i=[],o=!1,r="",n=0;n<t.length;n++){var s=t[n];s!=e||o?(" "!=s||o)&&(r+=s):(i.push(r),r=""),"("==s&&(o=!0),")"==s&&(o=!1)}return r&&i.push(r),i}return null},e}(tc),nc=function(t){function e(e,i,o,r){void 0===o&&(o=1),void 0===r&&(r="none");var n=t.call(this,e)||this;return n._color=i,n._width=o,n._type=r,n}return o(e,t),e.equalsObj=function(t,e){return!t&&!e||!(!t&&e||t&&!e)&&(t._color==e._color&&t._type==e._type&&t._width==e._width)},e.prototype.equals=function(t,e,i){return void 0===e&&(e=1),void 0===i&&(i="none"),this._color==t&&this._width==e&&this._type==i},e.prototype.toXml=function(t,e){var i=this._width<=1?"thin":this._width<=2?"medium":"thick";yi.setAttr(e,"style",i),yi.addChildWithAttr(t,e,"color","rgb",this._color)},e}(Qu),sc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.createInstance=function(t,e,i){return new nc(this.getIndexer(),t,e,i)},e.prototype.createFromCss=function(t,e){var i=t[e+"-style"];if(i&&"none"!=i){var o=new Bu(t[e+"-color"]),r=i,n=parseInt(t[e+"-width"]);return!o&&isNaN(n)?this._items[0]:(isNaN(n)&&(n=0),this.create(o.toColorHex(),n,r))}},e}(tc),ac=function(t){function e(e,i,o,r,n){var s=t.call(this,e)||this;return s._left=i,s._top=o,s._right=r,s._bottom=n,s}return o(e,t),e.equalsObj=function(t,e){return nc.equalsObj(t._left,e._left)&&nc.equalsObj(t._top,e._top)&&nc.equalsObj(t._right,e._right)&&nc.equalsObj(t._bottom,e._bottom)},Object.defineProperty(e.prototype,"left",{get:function(){return this._left},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"right",{get:function(){return this._right},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"top",{get:function(){return this._top},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bottom",{get:function(){return this._bottom},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._left=null,this._top=null,this._right=null,this._bottom=null,t.prototype.dispose.call(this)},e.prototype.equals=function(t,e,i,o){return nc.EqualsById(this._left,t)&&nc.EqualsById(this._top,e)&&nc.EqualsById(this._right,i)&&nc.EqualsById(this._bottom,o)},e.prototype.toXml=function(t,e){this.borderToXml(t,e,"left"),this.borderToXml(t,e,"right"),this.borderToXml(t,e,"top"),this.borderToXml(t,e,"bottom")},e.prototype.extend=function(t){return new e(null,t.left||this.left,t.top||this.top,t.right||this.right,t.bottom||this.bottom)},e.prototype.borderToXml=function(t,e,i){var o=yi.addChild(t,e,i),r=this[i];r&&r.toXml(t,o)},e}(Qu),lc=function(t){function e(e){var i=t.call(this)||this;return i._lines=e,i}return o(e,t),e.prototype.dispose=function(){this._lines=null,t.prototype.dispose.call(this)},e.prototype.createInstance=function(t,e,i,o){return new ac(this.getIndexer(),t,e,i,o)},e.prototype.createFromCss=function(t){var e=this._lines,i=e.createFromCss(t,"border-left"),o=e.createFromCss(t,"border-right"),r=e.createFromCss(t,"border-top"),n=e.createFromCss(t,"border-bottom");return i||o||r||n?this.create(i,r,o,n):void 0},e.prototype.extend=function(t,e){t=t||{};for(var i=new ac(null,e.left||t.left,e.top||t.top,e.right||t.right,e.bottom||t.bottom),o=this._items.length;o--;){var r=this._items[o];if(ac.equalsObj(this._items[o],i))return r}return i._id=this.getIndexer(),this._items.push(i),i},e.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var r=yi.addChild(t,e,"border");this._items[o].toXml(t,r)}yi.setAttr(e,"count",i)},e}(tc),hc=function(t){function e(e,i,o,r,n,s,a,l,h){void 0===n&&(n=!1),void 0===s&&(s=0);var u=t.call(this,i)||this;return u._collection=e,u._horzAlign=o,u._vertAlign=r,u._wrapText=n,u._formatId=s,u._font=a,u._fill=l,u._border=h,u}return o(e,t),Object.defineProperty(e.prototype,"horzAlign",{get:function(){return this._horzAlign},set:function(t){this._horzAlign=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vertAlign",{get:function(){return this._vertAlign},set:function(t){this._vertAlign=t},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){this._font=null,this._fill=null,this._border=null,this._collection=null,t.prototype.dispose.call(this)},e.prototype.equals=function(t,e,i,o,r,n,s){return this._horzAlign==t&&this._vertAlign==e&&this._wrapText==i&&this._formatId==o&&ec.EqualsById(this._font,r)&&oc.EqualsById(this._fill,n)&&ac.EqualsById(this._border,s)},e.prototype.toXml=function(t,e){yi.setAttr(e,"borderId",(this._border?this._border.id:0)+""),yi.setAttr(e,"fillId",(this._fill?this._fill.id:0)+""),yi.setAttr(e,"fontId",(this._font?this._font.id:0)+""),yi.setAttr(e,"numFmtId",this._formatId+""),yi.setAttr(e,"xfId","0");var i=yi.addChild(t,e,"alignment");yi.setAttr(i,"horizontal",this._horzAlign||"left"),yi.setAttr(i,"vertical",this._vertAlign||"center"),this._wrapText&&yi.setAttr(i,"wrapText","1")},e.prototype.cloneAsNew=function(t,i,o,r,n,s,a,l,h){return new e(this._collection,t,i||this._horzAlign,o||this._vertAlign,null!=r?r:this._wrapText,null!=n?n:this._formatId,s||this._font,a||this._fill,l||this._border)},e}(Qu),uc=function(t){function e(e,i,o){var r=t.call(this)||this;return r._fonts=e,r._fills=i,r._borders=o,r}return o(e,t),e.prototype.dispose=function(){this._fonts=null,this._fills=null,this._borders=null,t.prototype.dispose.call(this)},e.prototype.addStyle=function(t){for(var e=this._items.length;e--;){var i=this._items[e];if(i.equals(t.horzAlign,t.vertAlign,t._wrapText,t._formatId,t._font,t._fill,t._border))return i}return t._id=this.getIndexer(),t._collection=this,t},e.prototype.changeFormatId=function(t,e){for(var i,o=this._items.length;o--;)if((i=this._items[o]).equals(t.horzAlign,t.vertAlign,t._wrapText,e,t._font,t._fill,t._border))return i;return i=t.cloneAsNew(this.getIndexer(),null,null,null,e,null,null,null),this._items.push(i),i},e.prototype.changeBorder=function(t,e){for(var i,o=this._borders.extend(t._border,e),r=this._items.length;r--;)if((i=this._items[r]).equals(t.horzAlign,t.vertAlign,t._wrapText,t._formatId,t._font,t._fill,o))return i;var n=t.cloneAsNew(this.getIndexer(),null,null,null,null,null,null,o);return this._items.push(n),n},e.prototype.cloneAsNew=function(t,e,i,o,r,n,s,a,l){void 0===l&&(l=!1);var h=t.cloneAsNew(this.getIndexer(),e,i,o,r,n,s,a,l);return this._items.push(h),h},e.prototype.createInstance=function(t,e,i,o,r,n,s){return void 0===i&&(i=!1),void 0===o&&(o=0),void 0===r&&(r=null),void 0===n&&(n=null),void 0===s&&(s=null),new hc(this,this.getIndexer(),t,e,i,o,r,n,s)},e.prototype.createFromCss=function(t,e,i,o,r,n){void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),void 0===r&&(r=!1),void 0===n&&(n=0);var s,a,l=e?this._borders.createFromCss(t):null,h=i?this._fonts.createFromCss(t):null,u=o?this._fills.createFromCss(t):null,c=t["text-align"];c&&("center"==c?s="center":"right"==c?s="right":"left"==c&&(s="left"));var d=t["vertical-align"];return d&&("top"==d?a="top":"bottom"==d&&(a="bottom")),this.create(s,a,r,n,h,u,l)},e.prototype.toXml=function(t,e){for(var i=this._items.length,o=0;o<i;o++){var r=yi.addChild(t,e,"xf");this._items[o].toXml(t,r)}yi.setAttr(e,"count",i)},e}(tc),cc=function(){function t(t){this._numberFmts=[],this._fonts=new ic(t),this._fills=new rc,this._lines=new sc,this._borders=new lc(this._lines),this._styles=new uc(this._fonts,this._fills,this._borders),this._fills.create("none"),this._fills.create("gray125"),this._borders.create(),this._fonts.create(),this._styles.create()}return t.prototype.dispose=function(){this._styles.dispose(),this._borders.dispose(),this._lines.dispose(),this._fills.dispose(),this._fonts.dispose()},t.prototype.addFont=function(t){return t?this._fonts.createFromCss(t):null},t.prototype.addFill=function(t){return t?this._fills.createFromCss(t):null},t.prototype.addBorder=function(t){return t?this._borders.createFromCss(t):null},t.prototype.addNumberFormat=function(e){var i=this._numberFmts.indexOf(e);return i<0&&(this._numberFmts.push(e),i=this._numberFmts.length-1),t.EXCEL_NUMFMT_START+i},t.prototype.addStyle=function(t,e,i,o,r,n){return t?this._styles.createFromCss(t,e,i,o,r,n):null},t.prototype.extendStyle=function(t,e,i,o){var r=this._styles.createFromCss(e,!0,!0,!0,i,o);return r._border=r._border||t._border,r._fill=r._fill||t._fill,r._font=r._font||t._font,r._horzAlign=r._horzAlign||t._horzAlign,r._vertAlign=r._vertAlign||t._vertAlign,r._wrapText=null!=r._wrapText?r._wrapText:t._wrapText,r._formatId=null!=o&&null!=r._formatId?r._formatId:t._formatId,this._styles.addStyle(r)},t.prototype.changeFormatId=function(t,e){return this._styles.changeFormatId(t,e)},t.prototype.changeBorder=function(t,e){return this._styles.changeBorder(t,e)},t.prototype.createPart=function(){var t='<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main"></styleSheet>',e=yi.parse(t),i=e.documentElement;if(this._numberFmts.length>0){var o=yi.addChild(e,i,"numFmts");this._createNumberFormats(e,o)}var r=yi.addChild(e,i,"fonts");this._createFonts(e,r);var n=yi.addChild(e,i,"fills");this._createFills(e,n);var s=yi.addChild(e,i,"borders");this._createBorders(e,s);var a=yi.addChild(e,i,"cellStyleXfs");this._createDefXfs(e,a);var l=yi.addChild(e,i,"cellXfs");return this._createStyles(e,l),t=yi.toString(e),Zu.XML_HEAD_STRING+t},t.prototype._createNumberFormats=function(e,i){for(var o=0,r=this._numberFmts.length;o<r;o++){var n=yi.addChild(e,i,"numFmt");yi.setAttr(n,"formatCode",this._numberFmts[o]),yi.setAttr(n,"numFmtId",t.EXCEL_NUMFMT_START+o)}},t.prototype._createFonts=function(t,e){this._fonts.toXml(t,e)},t.prototype._createFills=function(t,e){this._fills.toXml(t,e)},t.prototype._createBorders=function(t,e){this._borders.toXml(t,e)},t.prototype._createDefXfs=function(t,e){var i=yi.addChildWithAttr(t,e,"xf","count",1);yi.setAttr(i,"borderId",0),yi.setAttr(i,"fillId",0),yi.setAttr(i,"fontId",0),yi.setAttr(i,"numFmtId",0)},t.prototype._createStyles=function(t,e){this._styles.toXml(t,e)},t.EXCEL_NUMFMT_START=200,t}(),dc=function(t){function e(e,i,o,r){var n=t.call(this,e)||this;return n._width=i,n._style=o,n._hidden=r,n}return o(e,t),e.prototype.dispose=function(){this._style=null,t.prototype.dispose.call(this)},e.prototype.equals=function(t){return this.id==t},e.prototype.toXml=function(t,e){yi.setAttr(e,"min",this.id),yi.setAttr(e,"max",this.id),yi.setAttr(e,"width",this._width),this._style&&yi.setAttr(e,"style",this._style.id),this._hidden&&yi.setAttr(e,"hidden","1")},e.prototype.toTextXml=function(t){var e=this.id+1,i={min:e,max:e,width:this._width};this._style&&(i.style=this._style.id),this._hidden&&(i.hidden="1"),Xu.addChild(t,"col",i)},e}(Qu),pc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.createInstance=function(t,e,i){return new dc(this.getIndexer(),t,e,i)},Object.defineProperty(e.prototype,"count",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),e.prototype.toTextXml=function(t){for(var e=Xu.addChild(t,"cols"),i=0,o=this.count;i<o;i++)this._items[i].toTextXml(e)},e}(tc),_c=function(){function t(t,e,i,o,r,n){void 0===r&&(r=""),this._range=Zu.toRange(e,t),this._style=i,this._type=r,this._fomula=n,this._value=o}return t.prototype.dispose=function(){this._style=null},Object.defineProperty(t.prototype,"style",{get:function(){return this._style},set:function(t){this._style=t},enumerable:!0,configurable:!0}),t.prototype.toXmlText=function(){var e=[];e.push("<"+t.ELEMENT_NAME),e.push(' r="'+this._range+'"'),""!=this._type&&e.push(' t="'+this._type+'"'),this._style&&e.push(' s="'+this._style.id+'"'),e.push(">"),this._fomula&&e.push("<f>"+this._fomula+"</f>"),null!=this._value&&e.push("<v>"+this._value+"</v>"),e.push("</"+t.ELEMENT_NAME+">");var i=e.join("");return e=null,i},t.ELEMENT_NAME="c",t}(),fc=function(){function t(t,e,i){this._row=0,this._sheet=t,this._book=t.workbook,this._index=e,this._height=i,this._cells=[]}return Object.defineProperty(t.prototype,"outLineLevel",{get:function(){return this._outlineLevel},set:function(t){this._outlineLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){for(var t=this._cells.length;t--;)this._cells[t].dispose(),this._cells[t]=null,delete this._cells[t]},t.prototype.toXmlText=function(){var e,i=[];i.push("<"+t.ELEMENT_NAME),i.push(' r="'+(this._index+1)+'"'),this._height&&this._height>-1&&(i.push(' ht="'+this._height+'"'),i.push(' customHeight="1"')),null!=this._outlineLevel&&i.push(' outlineLevel="'+this._outlineLevel+'"'),i.push(">");for(var o=0,r=this._cells.length;o<r;o++){var n=this._cells[o];n&&i.push(n.toXmlText())}return i.push("</"+t.ELEMENT_NAME+">"),e=i.join(""),i=null,e},t.prototype.borrowCell=function(t,e,i,o,r){void 0===o&&(o="");var n=this._cells[t];n&&n.dispose(),n=new _c(this._index,t,e,i,o,r),this._cells[t]=n},t.prototype.addBlank=function(t,e){this.borrowCell(t,e)},t.prototype.addCell=function(t,e,i,o,r){this.borrowCell(t,o,i,e,r)},t.prototype.addText=function(t,e,i){var o=e||"",r=this._book.addSharedString(o);this.addCell(t,"s",r,i)},t.prototype.addNumber=function(t,e,i,o){var r=isNaN(e)||null==e?"":String(e);this.addCell(t,"n",r,i,o)},t.prototype.addBool=function(t,e,i){this.addCell(t,"b",null==e?"":e?1:0,i)},t.prototype.addDate=function(t,e,i){if(e){var o=Ge.Default.toExcelDate(e);this.addNumber(t,o,i)}else this.addCell(t,"s","",i)},t.prototype.addLink=function(t,e,i,o){if(i&&""!=i){var r=document.createElement("div");r.innerText=r.textContent=i,i=r.innerHTML.replace(/(<br>|<br\/>)/gi,"&#13;&#10;"),r.innerText=r.textContent=e,i='HYPERLINK("'+i+((e=r.innerHTML.replace(/(<br>|<br\/>)/gi,"\r\n"))?'","'+e+'")':'")'),this.addCell(t,"str",e,o,i),r=null}else this.addText(t,e,o)},t.prototype.addSparkLine=function(t,e,i,o){var r=i.layout.firstColumn,n=this._sheet,s=this._index,a=n.borrowSparkGroup(r.index,i.sparkLineGroup),l=a.range.start,h=a.range.end-l+1,u=a.range.row;u=null==u?0:u;var c=a.sparkLines,d=n.name+"!"+Zu.toRange(e+l,s+u,!0,h);c[Zu.toRange(t,this._index)]=d,this.addBlank(t,o)},t.ELEMENT_NAME="row",t.LINE_REGEX=/\r|\n|\r\n/,t.BR_REGEX=/<br>|<br\/>/,t}(),gc=function(){function t(t,e,i,o){this._mergeCount=0,this._outlineLevel=0,this._dataRows=[],this._sparkGroups={},this._firstRow=-1,this._lastRow=-1,this._fixedCol=0,this._fixedRow=0,this._book=t,this._index=e,this._name=i,this._attrs=o,this._columns=new pc,this._prepare()}return t.prototype.dispose=function(){this._txmerge=null,Xu.removeItem(this._txdoc),this._txdoc=null,this._columns=null,this.clearRows(),this._dataRows=null,this._borderEdges=null},Object.defineProperty(t.prototype,"id",{get:function(){return t.RELATION_ID+this._index},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"colCount",{get:function(){return this._columns.count},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowCount",{get:function(){return this._dataRows.length},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"workbook",{get:function(){return this._book},enumerable:!0,configurable:!0}),t.prototype.setFirstRow=function(t){this._firstRow<0&&(this._firstRow=t)},t.prototype.setLastRow=function(t){this._lastRow=Math.max(this._lastRow,t)},t.prototype.clearRows=function(){for(var t=this._dataRows.length;t--;)this._dataRows[t].dispose(),this._dataRows[t]=null,delete this._dataRows[t];this._dataRows=[]},t.prototype.addColumn=function(t,e,i){return this._columns.createUnique(t,e,i)},t.prototype.addRow=function(t,e){return this._dataRows[t]=new fc(this,t,e)},t.prototype.getRow=function(t){return this._dataRows[t]},t.prototype.borrowRow=function(t,e){var i=this._dataRows[t];return i||(i=this.addRow(t,e)),i},t.prototype.borrowSparkGroup=function(t,e){return this._sparkGroups[t]||(this._sparkGroups[t]=e),this._sparkGroups[t]},t.prototype.setRowLevel=function(t,e){if(e>=0){var i=this._dataRows[t];i&&(i.outLineLevel=e,this._outlineLevel=Math.max(e,this._outlineLevel))}},t.prototype.addMerge=function(t,e,i,o){if(i>1||o>1){var r=Zu.toRange(e,t,!0,o,i);Xu.addChild(this._txmerge,"mergeCell",{ref:r}),this._mergeCount++}},t.prototype.createPart=function(){var t=this._txdoc,e="A1:"+Zu.toRange(this._columns.count-1,this._dataRows.length-1);Xu.addChild(t,"dimension",{ref:e}),this._outlineLevel>0&&Xu.addChild(t,"sheetFormatPtr",{outlineLevelRow:this._outlineLevel});var i=Xu.addChild(t,"sheetViews"),o={workbookViewId:0,showOutlineSymbols:"true"};this._attrs&&lt.extendObj(this._attrs,o),0==this._book.count&&(o.tabSelected=1);var r=Xu.addChild(i,"sheetView",o);(this._fixedCol>0||this._fixedRow>0)&&Xu.addChild(r,"pane",{xSplit:this._fixedCol,ySplit:this._fixedRow,topLeftCell:Zu.toRange(this._fixedCol,this._fixedRow),activePane:"bottomRight",state:"frozen"}),this._columns&&this._columns.toTextXml(t);for(var n=Xu.addChild(t,"sheetData"),s=this._dataRows,a=0,l=s.length;a<l;a++){if(a==this._firstRow){for(var h=0,u=0;u<s[a]._cells.length;u++){(c=s[a]._cells[u])&&(c.style=this._book.changeBorderId(c.style,this._borderEdges[h++?"top":"leftTop"]))}for(u=s[a]._cells.length;u--;){if(c=s[a]._cells[u]){c.style=this._book.changeBorderId(c.style,this._borderEdges.rightTop);break}}}else if(a===this._lastRow){for(h=0,u=0;u<s[a]._cells.length;u++){(c=s[a]._cells[u])&&(c.style=this._book.changeBorderId(c.style,this._borderEdges[h++?"bottom":"leftBottom"]))}for(u=s[a]._cells.length;u--;){if(c=s[a]._cells[u]){c.style=this._book.changeBorderId(c.style,this._borderEdges.rightBottom);break}}}else if(a>this._firstRow&&a<this._lastRow){for(u=0;u<s[a]._cells.length;u++){if(c=s[a]._cells[u]){c.style=this._book.changeBorderId(c.style,this._borderEdges.left);break}}for(u=s[a]._cells.length;u--;){var c;if(c=s[a]._cells[u]){c.style=this._book.changeBorderId(c.style,this._borderEdges.right);break}}}s[a]&&Xu.addText(n,s[a].toXmlText())}if(this._mergeCount>0&&(Xu.addChildElement(this._txdoc,this._txmerge),Xu.addProperty(this._txmerge,"count",this._mergeCount+"")),Object.keys(this._sparkGroups).length>0){var d=Xu.addChild(t,"extLst"),p=Xu.addChild(d,"ext",{uri:"{05C60535-1F16-4fd2-B633-F4F36F0B64E0}","xmlns:x14":"http://schemas.microsoft.com/office/spreadsheetml/2009/9/main"}),_=Xu.addChild(p,"x14:sparklineGroups",{"xmlns:xm":"http://schemas.microsoft.com/office/excel/2006/main"});for(var a in this._sparkGroups){var f=this._sparkGroups[a],g=f.colors,y=f.sparkLines,m=Xu.addChild(_,"x14:sparklineGroup",{type:f.type||"line"});g.colorSeries&&Xu.addChild(m,"x14:colorSeries",{rgb:g.colorSeries}),g.colorMarkers&&(Xu.addProperty(m,"markers","1"),Xu.addChild(m,"x14:colorMarkers",{rgb:g.colorMarkers})),g.colorFirst&&(Xu.addProperty(m,"first","1"),Xu.addChild(m,"x14:colorFirst",{rgb:g.colorFirst})),g.colorLast&&(Xu.addProperty(m,"last","1"),Xu.addChild(m,"x14:colorLast",{rgb:g.colorLast})),g.colorHigh&&(Xu.addProperty(m,"high","1"),Xu.addChild(m,"x14:colorHigh",{rgb:g.colorHigh})),g.colorLow&&(Xu.addProperty(m,"low","1"),Xu.addChild(m,"x14:colorLow",{rgb:g.colorLow}));var b=Xu.addChild(m,"x14:sparklines");for(var v in y){var w=Xu.addChild(b,"x14:sparkline");Xu.addChild(w,"xm:f",void 0,y[v]),Xu.addChild(w,"xm:sqref",void 0,v)}}}return Zu.XML_HEAD_STRING+Xu.toString(t)},t.prototype.createBorderEdges=function(t){function e(e){var i={};return e.forEach((function(e){i["border-"+e+"-style"]=t["border-"+e+"-style"],i["border-"+e+"-color"]=t["border-"+e+"-color"],i["border-"+e+"-width"]=t["border-"+e+"-width"]})),this._book._styles._borders.createFromCss(i)||{}}this._borderEdges={leftTop:e.call(this,["left","top"]),top:e.call(this,["top"]),rightTop:e.call(this,["right","top"]),left:e.call(this,["left"]),right:e.call(this,["right"]),leftBottom:e.call(this,["left","bottom"]),bottom:e.call(this,["bottom"]),rightBottom:e.call(this,["right","bottom"])}},t.prototype.setFixedInfo=function(t,e){this._fixedRow=null==t?this._fixedRow:Math.max(this._fixedRow,t),this._fixedCol=null==e?this._fixedCol:Math.max(this._fixedCol,e)},t.prototype._prepare=function(){this._txdoc=Xu.createDocument("worksheet",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"}),this._txmerge=Xu.createDocument("mergeCells")},t.RELATION_ID="rId",t}(),yc=function(){function t(t){this._sheet_indexer=3,this._parts={},this._parts={},this._strings=new Ju,this._styles=new cc(t),this._sheets=[],this._preapreTemplateParts()}return t.prototype.dispose=function(){if(this._parts={},this._strings.dispose(),this._strings=null,this._styles.dispose(),this._styles=null,this._sheets.length)for(var t=0,e=this._sheets.length;t<e;t++)this._sheets[t].dispose(),delete this._sheets[t];this._sheets=null},Object.defineProperty(t.prototype,"currentSheet",{get:function(){return this._currentSheet},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"count",{get:function(){return this._sheets?this._sheets.length:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"styles",{get:function(){return this._styles},enumerable:!0,configurable:!0}),t.prototype.createSheet=function(t,e){var i=new gc(this,this._sheet_indexer++,t||"Sheet"+(this._sheets.length+1),e);return this._sheets.push(i),this._currentSheet=i,i},t.prototype.addSharedString=function(t){return this._strings.add(t)},t.prototype.addNumberFormat=function(t){return this._styles.addNumberFormat(t)},t.prototype.addStyle=function(t,e,i,o,r,n){if(null==r){var s=t.whiteSpace||t["white-space"];r=null!=s&&"none"!==s&&"nowrap"!==s}return this._styles.addStyle(t,e,i,o,r,n)},t.prototype.changeFormatId=function(t,e){return this._styles.changeFormatId(t,e)},t.prototype.changeBorderId=function(t,e){return this._styles.changeBorder(t,e)},t.prototype.extendStyle=function(t,e,i,o){return this._styles.extendStyle(t,e,i,o)},t.prototype.createParts=function(){var t=this._parts,e=Xu.createDocument("Types",{xmlns:"http://schemas.openxmlformats.org/package/2006/content-types"});Xu.addChild(e,"Default",{Extension:"rels",ContentType:"application/vnd.openxmlformats-package.relationships+xml"}),Xu.addChild(e,"Default",{Extension:"xml",ContentType:"application/xml"}),Xu.addChild(e,"Override",{PartName:"/docProps/app.xml",ContentType:"application/vnd.openxmlformats-officedocument.extended-properties+xml"}),Xu.addChild(e,"Override",{PartName:"/docProps/core.xml",ContentType:"application/vnd.openxmlformats-package.core-properties+xml"}),Xu.addChild(e,"Override",{PartName:"/xl/sharedStrings.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"}),Xu.addChild(e,"Override",{PartName:"/xl/styles.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"}),Xu.addChild(e,"Override",{PartName:"/xl/workbook.xml",ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"});var i=Xu.createDocument("Relationships",{xmlns:"http://schemas.openxmlformats.org/package/2006/relationships"});Xu.addChild(i,"Relationship",{Id:"rId1",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings",Target:"sharedStrings.xml"}),Xu.addChild(i,"Relationship",{Id:"rId2",Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles",Target:"styles.xml"});var o=Xu.createDocument("workbook",{xmlns:"http://schemas.openxmlformats.org/spreadsheetml/2006/main","xmlns:r":"http://schemas.openxmlformats.org/officeDocument/2006/relationships"});Xu.addChild(o,"workbookPr",{date1904:"false"});var r=Xu.addChild(o,"bookViews");Xu.addChild(r,"workbookView",{activeTab:"0"});for(var n=Xu.addChild(o,"sheets"),s=0,a=this._sheets.length;s<a;s++){var l=this._sheets[s],h="worksheets/sheet"+(s+1).toString()+".xml",u="xl/"+h;t[u]=l.createPart(),e&&Xu.addChild(e,"Override",{PartName:"/"+u,ContentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"}),n&&Xu.addChild(n,"sheet",{name:l.name||"Sheet"+(s+1).toString(),sheetId:(s+1).toString(),"r:id":l.id}),i&&Xu.addChild(i,"Relationship",{Id:l.id,Type:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet",Target:h})}var c=Zu.XML_HEAD_STRING;return t["[Content_Types].xml"]=c+Xu.toString(e),t["xl/workbook.xml"]=c+Xu.toString(o),t["xl/_rels/workbook.xml.rels"]=c+Xu.toString(i),t["xl/sharedStrings.xml"]=this._strings.createPart(),t["xl/styles.xml"]=this._styles.createPart(),t},t.prototype._preapreTemplateParts=function(){var t=this._parts,e=Zu.XML_HEAD_STRING,i=(new Date).toISOString();t["_rels/.rels"]=e+'<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships"><Relationship Id="rId1" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument" Target="xl/workbook.xml"/><Relationship Id="rId2" Type="http://schemas.openxmlformats.org/officeDocument/2006/relationships/extended-properties" Target="docProps/app.xml"/><Relationship Id="rId3" Type="http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties" Target="docProps/core.xml"/></Relationships>',t["docProps/app.xml"]=e+'<Properties xmlns="http://schemas.openxmlformats.org/officeDocument/2006/extended-properties"><Application>RealGrid</Application><AppVersion>2.0</AppVersion></Properties>',t["docProps/core.xml"]=e+'<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:cp="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:dcterms="http://purl.org/dc/terms/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><dcterms:created xsi:type="dcterms:W3CDTF">'+i+"</dcterms:created><dc:creator>Wooritech</dc:creator></coreProperties>"},t}(),mc=function(t){function e(e,i){void 0===i&&(i=null);var o=t.call(this,null,e)||this;return o._groupSorting=!0,o._groupSortDirection=n.ASCENDING,o._groupSortCase=s.SENSITIVE,o._rs=new Er(!1),o._rs.addListener(o),o._groupedProvider=new Kr(o._rs,!1),o._groupedProvider.footerCounter=i,o.source=o._groupedProvider,o._summarizer=new Mr(o._rs),o}return o(e,t),e.prototype._doDispose=function(){this.clearListener(),this._rs&&this._rs.dispose(),this._rs=null,this._groupedProvider&&this._groupedProvider.dispose(),this._groupedProvider=null,this._summarizer&&this._summarizer.dispose(),this._summarizer=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"maxRowCount",{get:function(){return this._rs.maxItemCount},set:function(t){this._rs.maxItemCount=Math.max(0,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hideDeleted",{get:function(){return this._rs.hideDeleted},set:function(t){this._rs.hideDeleted=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inclusiveFiltering",{get:function(){return this._rs.isFilterOr},set:function(t){this._rs.isFilterOr=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summaryMode",{get:function(){return this._rs.summaryMode},set:function(t){this._rs.summaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupSummaryMode",{get:function(){return this._groupedProvider.summaryMode},set:function(t){this._groupedProvider.summaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sortMode",{get:function(){return this._rs.sortMode},set:function(t){this._rs.sortMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterMode",{get:function(){return this._rs.filterMode},set:function(t){this._rs.filterMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grouped",{get:function(){return this._groupedProvider.grouped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergedGrouped",{get:function(){return this._groupedProvider.grouped&&this._groupedProvider.mergeMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupLevels",{get:function(){return this._groupedProvider.groupCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupByFieldCount",{get:function(){return this._groupedProvider.groupCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupByFields",{get:function(){return this._groupedProvider.groupedFields},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandWhenGrouping",{set:function(t){this._groupedProvider.expandWhenGrouping=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summarizer",{get:function(){return this._summarizer},enumerable:!0,configurable:!0}),e.prototype.canGrouping=function(t){return this._groupedProvider.canGrouping(t)},e.prototype.getFieldDomain=function(t){return this._rs.getFieldDomain(t)},e.prototype.isFiltered=function(t){return null!=t?this._rs.hasFilter(t):this._rs.hasFilters()},e.prototype.addFilter=function(t,e){this._rs.addFilter(t,e)},e.prototype.removeFilter=function(t,e){this._rs.removeFilter(t,e)},e.prototype.clearFilters=function(t){this._rs.clearFilters(t)},e.prototype.clearAllFilters=function(){this._rs.clearAllFilters()},e.prototype.beginFiltering=function(){this._rs.beginFilter()},e.prototype.endFiltering=function(t,e){this._rs.endFilter(!0,t,e)},e.prototype.setHideDeletedRows=function(t){this._rs.hideDeleted=t},e.prototype.orderBy=function(t,e,i){if(this._groupedProvider.grouped&&this._groupSorting){for(var o=e?e.length:0,r=i?i.length:0,a=this._groupedProvider.groupedFields,l=this._rs.getSortDirections(),h=this._rs.getSortCases(),u=[],c=0,d=a.length;c<d;c++)u.push(a[c]);for(c=0,d=t.length;c<d;c++){var p=t[c],_=u.indexOf(p),f=void 0,g=void 0;f=o>c?e[c]:o>0?e[o-1]:n.ASCENDING,g=r>c?i[c]:r>0?i[r-1]:s.SENSITIVE,_<0?(u.push(p),l[u.length-1]=f,h[u.length-1]=g):(l[_]=f,h[_]=g)}a=u,this._rs.orderBy(a,l,h)}else this._rs.orderBy(t,e,i)},e.prototype.getSortFields=function(){return this._rs.getSortFields()},e.prototype.getSortDirections=function(){return this._rs.getSortDirections()},e.prototype.getSortCases=function(){return this._rs.getSortCases()},e.prototype.setLabelComparer=function(t){this._rs.labelComparer=t},e.prototype.groupBy=function(t,e,i,o){void 0===e&&(e=!0),void 0===i&&(i=n.ASCENDING),void 0===o&&(o=s.SENSITIVE),(t&&!(t.length<1)||this._groupedProvider.grouped)&&this._groupedProvider.canGrouping(t)&&(this._groupSorting=e,this._groupSortDirection=i,e&&this._rs.orderBy(t,[i],[o],!1),this._groupedProvider.groupBy(t))},e.prototype.groupByMode=function(t,e){this._groupSorting&&this._rs.orderBy(t,[this._groupSortDirection],[this._groupSortCase],!1),this._groupedProvider.canGrouping(t)&&this._groupedProvider.groupByMode(t,e)},e.prototype.addGroupBy=function(t,e,i){var o;if(this._groupedProvider.groupCount<1?o=[e]:(o=this._groupedProvider.groupedFields).splice(t,0,e),this._groupSorting=0===t?i:this._groupSorting,this._groupedProvider.canGrouping(o)){if(this._groupSorting){var r=[this._groupSortDirection];this._rs.orderBy(o,r,null,!1)}this._groupedProvider.groupBy(o)}},e.prototype.removeGroupBy=function(t,e){if(this._groupedProvider.grouped){for(var i=this._groupedProvider.groupedFields,o=-1,r=0,n=i.length-1;n>=0;n--)if(r++,i[n]==t){o=n;break}if(o>=0){if(i.splice(o,e?r:1),!this._groupedProvider.canGrouping(i))return;this._groupSorting&&this._rs.orderBy(i,[this._groupSortDirection],null,!1),this._groupedProvider.groupBy(i)}else{if(!this._groupedProvider.canGrouping(null))return;this._groupSorting&&this._rs.orderBy(null,null,null,!1)}}},e.prototype.isGroupedField=function(t){return this._groupedProvider.isGroupedField(t)},e.prototype.getGroupLevel=function(t){return this._groupedProvider.getGroupLevel(t)},Object.defineProperty(e.prototype,"isGroupSorting",{set:function(t){this._groupSorting=t,this._groupedProvider._groupSorting=t},enumerable:!0,configurable:!0}),e.prototype.expand=function(t,e,i,o){this._groupedProvider.expand(t,e,i,o)},e.prototype.collapse=function(t,e,i){this._groupedProvider.collapse(t,e,i)},e.prototype.collapseAll=function(t){this._groupedProvider.collapseAll(t)},e.prototype.expandAll=function(t,e){this._groupedProvider.expandAll(t,e)},e.prototype.setPaging=function(t,e,i,o){this._rs.setPaging(t,e,i,o)},Object.defineProperty(e.prototype,"page",{get:function(){return this._rs.page},enumerable:!0,configurable:!0}),e.prototype.setPage=function(t,e){this._rs.setPage(t,e)},Object.defineProperty(e.prototype,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){this._rs.pageCount=t},enumerable:!0,configurable:!0}),e.prototype.getDisplayItemIndex=function(t){return this._rs.isPaging?t.index+this._rs.pageStartIndex:t.index},e.prototype.getCheckedRows=function(t){return this._rs.getCheckedRows(t)},Object.defineProperty(e.prototype,"checkableExpression",{set:function(t){this._rs.checkableExpression=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkableCallback",{set:function(t){this._rs.checkableCallback=t},enumerable:!0,configurable:!0}),e.prototype.resetCheckables=function(){this._rs.resetCheckables()},e.prototype.applyCheckables=function(){this._rs.applyCheckables()},e.prototype.setCheckFieldIndex=function(t){this._rs.setCheckFieldIndex(t)},e.prototype.getFirstRow=function(){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getFirstRow():this._rs.getItem(0)},e.prototype.getLastRow=function(){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getLastRow():this._rs.getItem(this._rs.itemCount-1)},e.prototype.getPrevRow=function(t){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getPrevRow(t):t&&t.index>0?this._rs.getItem(t.index-1):this._rs.getItem(0)},e.prototype.getNextRow=function(t){if(this.itemCount>0)return this._groupedProvider.grouped?this._groupedProvider.getNextRow(t):t&&t.index<this._rs.itemCount-1?this._rs.getItem(t.index+1):this._rs.getItem(0)},e.prototype.getGroupItem=function(t){if(this._groupedProvider.grouped)return this._groupedProvider.getGroupItem(t)},e.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(e.prototype,"rowCount",{get:function(){return this._rs.rowCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleRowCount",{get:function(){return this.grouped?this._groupedProvider.visibleRowCount:this._rs.rowCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sorted",{get:function(){return this._rs.sorted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"movable",{get:function(){return!this.grouped&&this._rs.movable},enumerable:!0,configurable:!0}),e.prototype.getAllItems=function(){return this._groupedProvider.getAllItems()},e.prototype.getPagingAllItems=function(){var t=this._rs;return t.isSorted?t._sortedItems.slice():t._items.slice()},e.prototype.findItem=function(t,e,i,o,r){return this._groupedProvider.findItem(t,e,i,o,r)},e.prototype.findCell=function(t,e,i,o,r,n){return this._groupedProvider.findCell(t,e,i,o,r,n)},e.prototype.checkItems=function(t,e,i){this._groupedProvider.checkItems(t,e,i)},e.prototype.checkItem=function(t,e,i,o){this._groupedProvider.checkItem(t,e,i,o)},e.prototype.checkAll=function(t,e,i,o,r){this._groupedProvider.checkAll(t,e,i,o,r)},e.prototype.setItemChecked=function(t,e){var i=this._rs._checkFieldIndex;if(i>-1){var o=this.dataSource.getField(i),r=(o._boolParser||o._ownerBoolParser).toText(e);return this.isEditing(t)?t.setValue(i,r):t.setData(i,r),!0}return!1},e.prototype.getItemChecked=function(t,e){var i=this._rs._checkFieldIndex;return i>-1?this.dataSource.getField(i).readBooleanValue(t.getData(i)):e},e.prototype.getItemOfRow=function(t,e){return this._rs.getItemOfRow(t,e)},e.prototype._doBeginUpdate=function(e){var i=t.prototype._doBeginUpdate.call(this,e);return this._groupedProvider.$_setEditItem(i),i},e.prototype._doBeginAppendDummy=function(){var e=t.prototype._doBeginAppendDummy.call(this);return this._groupedProvider.$_setDummyEditItem(e),e},e.prototype._doBeginAppend=function(e){var i=t.prototype._doBeginAppend.call(this,e);return this._groupedProvider.$_setEditItem(i),i},e.prototype._doBeginInsert=function(e,i,o,r){var n=t.prototype._doBeginInsert.call(this,e,i,o,r);return this._groupedProvider.$_setEditItem(n),n},e.prototype._doCancelDummyEdit=function(){t.prototype._doCancelDummyEdit.call(this),this._groupedProvider.$_setDummyEditItem(null)},e.prototype._doCancelEdit=function(e,i){t.prototype._doCancelEdit.call(this,e,i),this._groupedProvider.$_setEditItem(null)},e.prototype._doCommitEdit=function(e,i){return!!t.prototype._doCommitEdit.call(this,e,i)&&(this._groupedProvider.$_setEditItem(null),!0)},e.prototype.onGroupedItemProviderGrouping=function(t,e){return this.fireConfirmEvent(Kr.GROUPING,e)},e.prototype.onGroupedItemProviderGrouped=function(t){this.fireEvent(Kr.GROUPED)},e.prototype.onGroupedItemProviderExpand=function(t,e){return this.fireConfirmEvent(Kr.EXPAND,e)},e.prototype.onGroupedItemProviderExpanded=function(t,e){this.fireEvent(Kr.EXPANDED,e)},e.prototype.onGroupedItemProviderCollapse=function(t,e){return this.fireConfirmEvent(Kr.COLLAPSE,e)},e.prototype.onGroupedItemProviderCollapsed=function(t,e){this.fireEvent(Kr.COLLAPSED,e)},e.prototype.onItemProviderFilterAdded=function(t,e,i){this._fireFilterAdded(e,i)},e.prototype.onItemProviderFilterRemoved=function(t,e,i){this._fireFilterRemoved(e,i)},e.prototype.onItemProviderFilterCleared=function(t,e){this._fireFilterCleared(e)},e.prototype.onItemProviderFilterAllCleared=function(t){this._fireFilterAllCleared()},e.prototype.onItemProviderFiltered=function(t,e,i){this._fireFiltered(e,i)},e.prototype.onItemProviderSort=function(t,e,i){this._fireSort(e,i,null)},e.prototype.onItemProviderSorted=function(t){this._fireSorted()},e.prototype.onItemProviderDataLoadComplated=function(t){this._fireDataLoadComplated()},e}(po),bc=function(t){function e(e,i,o){return void 0===o&&(o=null),t.call(this,e,i,o)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"cellView",{get:function(){return this.owner},enumerable:!0,configurable:!0}),e}(function(t){function e(e,i,o){void 0===o&&(o=null);var r=t.call(this,e,o)||this;return r._clickable=!1,r._owner=i,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"clickable",{get:function(){return this._clickable},set:function(t){t!=this._clickable&&(this._clickable=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return""},e.prototype._doDraw=function(t){},e.prototype._hoverChanged=function(){this.invalidate()},e.prototype._changed=function(){this.invalidate()},e}(Os)),vc=function(t){function e(e){return t.call(this,e,"rowGroupHeadCellView")||this}return o(e,t),e.prototype._doUpdateContent=function(t,e,i){i[lt.TextProp]=""},e.prototype._doRender=function(t){},e}(Ks),wc=function(t){function e(e){var i=t.call(this,e,null,"rowGroupHeadView")||this;return i._cells=[],i._levels=0,i._count=0,i}return o(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},e.prototype.prepare=function(t,e){for(this._levels=t,this._count=e?2*t:t;this._cells.length<this._count;){var i=new vc(this.doc);this._cells.push(i)}},e.prototype._getCssSelector=function(){return"rg-rowgroup-head"},e.prototype._getTableRowHeight=function(t,e){return 1==e?t.summaryBounds.height:t.headBounds.height},e.prototype._doPrepareTableExtents=function(t){if(this._count>0)for(var e=this.width/this._levels,i=0;i<this._count;i++)this._cells[i].width=e},e.prototype._prepareCellContent=function(t,e){var i=nt(t);return t.$_lev=e+1,i.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=this._count;this.childCount<e;)this.addChild(this._cells[this.childCount]);for(;this.childCount>e;)this.removeLast()},e.prototype._doRender=function(t){},e.prototype._getTableRowCount=function(t){return 2},e.prototype._getCellCount=function(t){return this._count},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e}(Ys),Cc=function(t){function e(e){return t.call(this,e,"rowGroupFootCellView")||this}return o(e,t),e.prototype._doUpdateContent=function(t,e,i){i[lt.TextProp]=""},e.prototype._doRender=function(t){},e}(Ks),xc=function(t){function e(e){var i=t.call(this,e,null,"rowGroupFootView")||this;return i._cells=[],i._levels=0,i}return o(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},e.prototype.prepare=function(t){for(this._levels=t;this._cells.length<t;){var e=new Cc(this.doc);this._cells.push(e)}},e.prototype._getCssSelector=function(){return"rg-rowgroup-foot"},e.prototype._getTableRowHeight=function(t,e){return t.footBounds.height},e.prototype._doPrepareTableExtents=function(t){if(this._levels>0)for(var e=this.width/this._levels,i=0;i<this._levels;i++)this._cells[i].width=e},e.prototype._prepareCellContent=function(t,e){var i=nt(t);return t.$_lev=e+1,i.createElement("div")},e.prototype._doLayoutContent=function(t){for(var e=this._levels;this.childCount<e;)this.addChild(this._cells[this.childCount]);for(;this.childCount>e;)this.removeLast()},e.prototype._doRender=function(t){},e.prototype._getTableRowCount=function(t){return 1},e.prototype._getCellCount=function(t){return this._levels},e.prototype._getCellWidth=function(t,e){return this._cells[e].width},e}(Ys),Ic="rg-rowgroup-expander",Ec=function(t){function e(e,i){var o=t.call(this,e,i,"rowGroupExpandHandle")||this;return o._expanded=!1,o.clickable=!0,o}return o(e,t),e.isExpander=function(t){var e=t.className;return e&&e.indexOf(Ic)>=0},Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._createDom=function(t){return t.createElement("span")},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.position="",e.style.display="inline-block"},e.prototype._getCssSelector=function(){return this._expanded?"rg-rowgroup-expander rg-rowgroup-expander-expanded":"rg-rowgroup-expander rg-rowgroup-expander-collapsed"},e.prototype._getCssDisplay=function(){return""},e.prototype._beforeDraw=function(t){this._setClassName(t)},e}(bc),Sc=function(t){function e(e){var i=t.call(this,e,"rowGroupBarCell")||this;return i._level=0,i._expander=new Ec(e,i),i.addChild(i._expander),i}return o(e,t),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(t){this._level=t},enumerable:!0,configurable:!0}),e.prototype.updateCell=function(e,i,o){t.prototype.updateCell.call(this,e,i,o);var r=i.item;if(r instanceof ro&&r.level==this.bar.l||r instanceof no&&r.expandable&&r.displayLevel===this.bar.l){var n=this._expander._dom,s=r instanceof ro?r:r.parent;o.appendChild(n),this._expander.setBounds(1,1,this.width-2,this.width-2),this._expander.expanded=s.expanded;var a=e.rowGroup._expanderVisibleCallback,l=!a||a.call(this.grid,this.grid.handler,s);this._expander.visible=!s.expanded||null==l||l,n.$_row=r.index}else this._expander.visible=!1;o.style.paddingTop="2px"},e.prototype.validate=function(){t.prototype.validate.call(this);var e=this._expander._dom;e&&e.parentElement&&e.parentElement.removeChild(e)},e}(Ks),Oc=function(t){function e(e){var i=t.call(this,e,null,"rowGroupBarContainer")||this;return i._cells=[],i._levels=0,i._bars=[],i}return o(e,t),e.prototype._doDispose=function(){this._cells=null,t.prototype._doDispose.call(this)},e.prototype.prepare=function(t,e){this._levels=e},e.prototype.getLevelIndent=function(t){return t*this.width/this._levels},e.prototype._getCssSelector=function(){return"rg-rowgroup-bar"},e.prototype._prepareCellContent=function(t,e){return nt(t).createElement("div")},e.prototype._doLayoutContent=function(t){for(var e,i=t.grid,o=i.rowGroup,r=this.width/this._levels,n=this._bars,s=n.length,a=t.topIndex,l=t.fixedItemCount,h=l>0;this.childCount<s;)e=this._cells.length>0?this._cells.pop():this._createCell(),this.addChild(e);for(;this.childCount>s;)(e=this.removeLast()).validate(),this._cells.push(e);for(var u=0;u<s;u++){var c=n[u];e=this.getChild(u);var d=c.tr1,p=h?d<l?d:d-1+a:d+a,_=Hn.temp(i,p),f=o.getBarCell(_),g=t.getTableItemBounds(c.r);e.bar=c,e.level=c.c+1,e.updateCell(i,f,this.getCellContent(d,c.c)),g.x=r*c.c,g.width=r,e.setRect(g)}},e.prototype._doRender=function(t){},e.prototype._doPrepareTableRows=function(e,i){t.prototype._doPrepareTableRows.call(this,e,i),this.$_layoutBarCells(e,i)},e.prototype._getTableRowHeight=function(t,e){var i=t.fixedItemCount>0&&e>t.fixedItemCount?1:0;return t.getTableItemHeight(e-i)},e.prototype._getCellCount=function(t){return this._levels},e.prototype._getCellWidth=function(t,e){return this.width/this._levels},e.prototype._createCell=function(){return new Sc(this.doc)},e.prototype.$_calcLevels=function(t,e,i,o){for(var r=new Array,n=i;n<o;n++){var s=t[n];r.push(s instanceof no?s.displayLevel:s.level)}var a=-1,l=0;for(n=0;n<r.length;n++){var h=r[n];h<e?(r[n]=1,a>=0&&(r[a]=l,a=-1,l=0)):h==e?(a>=0&&(r[a]=l),a=n,l=1):(a<0?a=n:r[n]=-1,l++)}return a>=0&&(r[a]=l),r},e.prototype.$_layoutBarCells=function(t,e){var i=t.$_getItems(),o=i.length,r=t.fixedItemCount,n=e.children,s=this._bars=[];if(!(o<1)){for(var a=0,l=this._getCellCount(t);a<l;a++){var h=a+1,u=0,c=0;if(r>0){for(var d=void 0,p=void 0;u<r;u++,c++)(p=(d=n[c]).children[a]).style.display="",p.removeAttribute("rowspan"),lt.setClassName(p,""),0===a&&lt.setClassName(d,""),p.$_row=u;d=n[c++],0===a&&lt.setClassName(d,Es.ROW_BAR_STYLE),(p=d.children[a]).style.display="",p.removeAttribute("rowspan"),lt.setClassName(p,Es.ROW_BAR_CELL_STYLE)}if(u<o)for(var _=this.$_calcLevels(i,h,u,o),f=0;u<o;u++,f++,c++){var g=_[f],y=(p=(d=n[c]).children[a],i[u]);0===a&&lt.setClassName(d,""),g>0?(g>1||y instanceof ro&&y.level==h||1===g&&y instanceof no&&!y.parent.expanded?(s.push({r:u,tr1:c,tr2:c+g-1,c:a,l:h}),p.rowSpan=g):p.removeAttribute("rowspan"),p.style.display="",lt.setClassName(p,"rg-rowgroup-bar-cell rg-rowgroup-bar-level-"+String(h)),p.$_row=y.index):(p.removeAttribute("rowspan"),p.style.display="none",lt.setClassName(p,""))}}s.sort((function(t,e){return t.r-e.r}))}},e}(qs),Rc=function(t){function e(e){var i=t.call(this,e,"rowGroupBarPane")||this;return i._barContainer=new Oc(e),i.addChild(i._barContainer),i._footView=new xc(e),i.addChild(i._footView),i._headView=new wc(e),i.addChild(i._headView),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"levelCount",{get:function(){return this.grid.layoutManager.rowGroupLevels},enumerable:!0,configurable:!0}),e.prototype.getLevelIndent=function(t){return this._barContainer.getLevelIndent(t)},e.prototype._doMeasure=function(t,e,i){var o=this.levelCount;return this._headView.prepare(o,t.headerSummaries.visible),this._footView.prepare(o),this._barContainer.prepare(t,o),new As(this.levelCount*t.rowGroup.levelIndent,i)},e.prototype._doLayoutContent=function(t){var e=this.grid,i=t.headBounds,o=t.summaryBounds;(this._headView.visible=e.header.visible||e.headerSummaries.isVisible())&&(this._headView.setBounds(0,i.y,this.width,i.height+o.height),this._headView.layoutContent(t)),i=t.footBounds,(this._footView.visible=e.footers.isVisible())&&(this._footView.setBounds(0,i.y,this.width,i.height),this._footView.layoutContent(t)),i=t.rowBarBounds,this._barContainer.setBounds(0,i.y,this.width,i.height),this._barContainer.layoutContent(t)},e.prototype._getCssSelector=function(){return"rg-rowgroup-bar-container"},e}(cl),Dc=(function(t){function e(e){return t.call(this,e,"rowGroupPane")||this}o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)}}(cl),function(t){function e(e){var i=t.call(this,e,"rowGroupHeaderCellView")||this;return i._indent=0,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"indent",{get:function(){return this._indent},set:function(t){this._indent=Math.max(0,t)},enumerable:!0,configurable:!0}),e.prototype._createDom=function(t){return t.createElement("div")},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=e.style;i.top="50%",i.msTransform=i.transform="translate(0px, -50%)",i.setProperty("overflow","hidden","important"),i.setProperty("pointer-events","none","important")},e.prototype._beforeDraw=function(t){},e.prototype._doUpdateContent=function(t,e,i){i[lt.TextProp]=e.text,i.style.left=this._indent>0?this._indent+"px":""},e}(Ks)),kc=function(t){function e(e){var i=t.call(this,e,"rowGroupHeaderView")||this;return i._cellView=new Dc(e),i.addChild(i._cellView),i}return o(e,t),e.prototype._doDispose=function(){this._item=null,this._cellView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemIndex",{get:function(){return this._item.index},enumerable:!0,configurable:!0}),e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.setProperty("overflow","hidden","important")},e.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},e.prototype._doLayoutContent=function(t){var e=t.grid,i=e.rowGroup;this._cellView.indent=i.indentVisible?0:e.groupBarPane.getLevelIndent(this._item.level-1),this._cellView.updateCell(e,i.getHeaderCell(this._item),this._cellView._dom)},e}(js),Pc=function(t){function e(e){return t.call(this,e,"rowGroupRightHeaderView")||this}return o(e,t),e.prototype._doDispose=function(){this._item=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"item",{get:function(){return this._item},set:function(t){this._item=t},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-rowgroup-header rg-rowgroup-header-level-"+String(this._item.level)},e}(js),Tc=function(t){function e(e){return t.call(this,e,"rowGroupFooterView")||this}return o(e,t),e.prototype._doLayoutContent=function(t){var e=t.grid,i=e.rowGroup,o=t.cellLayouts._dataCells.length,r=this._getFirstCell(t),n=this._getStartCell(t)-r,s=n,a=this._getEndCell(t)-r;this._item instanceof Ur&&(s=Math.max(n,this._item.parent.level-r)),this.$_refreshSpans(this._item.index,this._item.$_footerIndex,o,s,a);for(var l=0;l<o;l++){var h=this._getTableRow(t,this._domIndex+l),u=this._getBodyCells(this._domIndex+l),c=i.getFooterStyleName(this._item);h.className=c;for(var d=s;d<=a;d++){var p=u[d],_=p.layout;if(p.clearExpander(),p.clearButtons(),p.renderer2&&p.renderer2.clearContent(),p.visible)if(_.isNull)_.isProxy||p.setClassName(pu.FOOTER_CELL_STYLE);else{var f=Hn.temp(e,this._item.index,_),g=i.getFooterCell(f);this._updateCell(e,i,g,p)}}}},e.prototype._getBodyCells=function(t){return this.parent.$_getBodyCells(t)},e.prototype._getTableRow=function(t,e){return this.parent.$_getTableRow(t,e)},e.prototype._getTableCell=function(t){return this.parent.$_getTableCell(this._domIndex,t)},e.prototype._getFirstCell=function(t){return t._firstCell},e.prototype._getLastCell=function(t){return t._lastCell},e.prototype._getStartCell=function(t){return t.getStartCell()},e.prototype._getEndCell=function(t){return t.getEndCell()},e.prototype._getBodyView=function(){return this.parent._bodyView},e.prototype._updateCell=function(t,e,i,o){var r=i.dataColumn.groupFooters.get(i.footerIndex),n=e.getFooterCellStyle(i,o.style.clear()),s=i.getSummary(),a=o.cell.firstElementChild;if(o.setClassName(n.styleName),lt.setClassName(a,pu.FOOTER_CELL_RENDERER),o.refreshFormatters(n),e.getFooterCellFormatters(r,o),s){var l=i.getTemplate(o);void 0===l?a[lt.TextProp]=i.getDisplayText(o):a.innerHTML=l}else a[lt.TextProp]=""},e.prototype.$_refreshSpans=function(t,e,i,o,r){for(var n=0;n<i;n++)for(var s=this._getBodyCells(this._domIndex+n),a=o;a<=r;a++){var l=s[a],h=l.layout,u=h.parent,c=u&&u.vertical;if(l.spanned);else if(h.isProxy)l.clear(!1);else{var d=0,p=0,_=h.getGroupFooterUserSpan(this._item.parent,e),f=_?0:h.getGroupFooterSpan(t,e)-1;if(_){var g=this._item,y=(g.parent.footerCount-g.vindex)*i,m=_.footerCount||0,b=m>0?m*i:_.rowspan||1,v=_.colspan||1;b=Math.min(b,y),l.set(v,b,!0);for(var w=0;w<b;w++)for(var C=this._getBodyCells(this._domIndex+w+n),x=0;x<v;x++){var I=C&&C[x+a];I&&I!==l&&I.span(l)}}else if(f>0){var E=0,S=h.vindex+1;if(c)for(;E++<f&&E<i;){p+=u.getVisible(S++)._dspan,this._getBodyCells(this._domIndex+n+1)[a].span(l)}else for(;E++<f&&a-o+1<s.length&&S<u.visibleCount;){d+=u.getVisible(S++)._cspan,s[a+E].span(l)}}h.isNull&&l.clear(!0),!_&&l.set(h._cspan+d,h._dspan+p,!0)}}},e}(ia),Mc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getBodyCells=function(t){return this.parent.$_getFixedBodyCells(t)},e.prototype._getTableRow=function(t,e){return this.parent.$_getFixedTableRow(e)},e.prototype._getTableCell=function(t){return this.parent.$_getFixedTableCell(this._domIndex,t)},e.prototype._getBodyView=function(){return this.parent._fixedView},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedLayoutCount-1},e}(Tc),Lc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getBodyCells=function(t){return this.parent.$_getRightBodyCells(t)},e.prototype._getTableRow=function(t,e){return this.parent.$_getRightTableRow(e)},e.prototype._getTableCell=function(t){return this.parent.$_getRightTableCell(this._domIndex,t)},e.prototype._getBodyView=function(){return this.parent._rightView},e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.layoutCount-t.rightLayoutCount},e.prototype._getEndCell=function(t){return t.layoutCount-1},e}(Tc),Fc=function(t){function e(e,i){var o=t.call(this,e,i||"rowGroupLayer")||this;return o._headerPool=[],o._headerViews=[],o._rightHeaderPool=[],o._rightHeaderViews=[],o._footerPool=[],o._footerViews=[],o._fixedFooterPool=[],o._fixedFooterViews=[],o._rightFooterPool=[],o._rightFooterViews=[],o._indents=[],o}return o(e,t),e.prototype._doDispose=function(){this._bodyView=this._fixedView=this._rightView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"grid",{get:function(){return this.getAncestor($c)},enumerable:!0,configurable:!0}),e.prototype.layout=function(t){this._doPrepareContent(t),this._doLayoutContent(t)},e.prototype.getHeaderView=function(t){for(var e=0,i=this._headerViews;e<i.length;e++){var o=i[e];if(o.item===t)return o}},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=e.style;i.setProperty("overflow","hidden","important"),i.setProperty("pointer-events","none","important")},e.prototype._getCssSelector=function(){return"rg-rowgroup-layer"},e.prototype._doDraw=function(t){},e.prototype._doPrepareContent=function(t){this.$_prepareHeaders(t)},e.prototype.$_prepareIndents=function(t){for(var e=this._indents,i=t.rowGroupLevels+1,o=0;o<e.length;o++)e[o]=t.getLevelIndent(o);for(;e.length<i;)e.push(t.getLevelIndent(e.length));return e},e.prototype._doLayoutContent=function(t){var e,i=this.$_prepareIndents(t),o=t.$_getItems(),r=o.length,n=t.fixedItemCount,s=n>0,a=this._rightView,l=t.contentBounds.right-t.sideContentBounds.x,h=0,u=0,c=t.trs,d=n,p=s?d*c+1:d*c;for(a&&(e=t.rightContentBounds.clone(),l=Math.min(l,this.width-e.width),e.x-=this.x,e.leftBy(t.rightBarWidth));d<r;d++){var _=o[d];if(_ instanceof ro){var f=this._headerViews[h],g=t.getTableItemBounds(d),y=i[_.level];if(f.item=_,f.setBounds(y,g.y,l-y,g.height),f.layoutContent(t),a){var m=this._rightHeaderViews[h];m.item=_,m.setBounds(e.x,g.y,e.width,g.height),m.layoutContent(t)}h++,p++}else if(_ instanceof no){if(this._fixedView)(f=this._fixedFooterViews[u]).updateItem(_,p,c,!0),f.layoutContent(t);if(this._rightView)(f=this._rightFooterViews[u]).updateItem(_,p,c,!0),f.layoutContent(t);if(this._bodyView){f=this._footerViews[u++];lt.isDebugging(),f.updateItem(_,p,c,!0),f.layoutContent(t)}p+=c}else p+=c}},e.prototype.$_prepareHeaders=function(t){for(var e=t.$_getItems(),i=0,o=t.fixedItemCount,r=e.length;o<r;o++)e[o]instanceof ro&&i++;for(var n=this._headerPool,s=this._headerViews;s.length<i;){(a=n.pop())||(a=new kc(this.doc)),this.addChild(a),s.push(a)}for(;s.length>i;){var a=s.pop();this.removeChild(a),n.push(a)}if(this._rightView){for(var l=this._rightHeaderPool,h=this._rightHeaderViews;h.length<i;){(a=l.pop())||(a=new Pc(this.doc)),this.addChild(a),h.push(a)}for(;h.length>i;){a=h.pop();this.removeChild(a),l.push(a)}}else for(var u=this._rightHeaderPool,c=this._rightHeaderViews;c.length>0;){a=c.pop();this.removeChild(a),u.push(a)}},e.prototype.$_prepareGroupItems=function(t,e,i,o){this._bodyView=e,this._fixedView=i,this._rightView=o},e.prototype.$_prepareGroupFooters=function(t,e){for(var i=0,o=e.fixedItemCount,r=t.length;o<r;o++)t[o]instanceof no&&i++;for(;this._footerViews.length<i;){(n=this._footerPool.pop())||(n=new Tc(this.doc)),this.addChild(n),this._footerViews.push(n)}for(;this._footerViews.length>i;){var n=this._footerViews.pop();this.removeChild(n),this._footerPool.push(n)}if(this._fixedView){for(;this._fixedFooterViews.length<i;){(n=this._fixedFooterPool.pop())||(n=new Mc(this.doc)),this.addChild(n),this._fixedFooterViews.push(n)}for(;this._fixedFooterViews.length>i;){n=this._fixedFooterViews.pop();this.removeChild(n),this._fixedFooterPool.push(n)}}else for(;this._fixedFooterViews.length>0;){n=this._fixedFooterViews.pop();this.removeChild(n),this._fixedFooterPool.push(n)}if(this._rightView){for(;this._rightFooterViews.length<i;){(n=this._rightFooterPool.pop())||(n=new Lc(this.doc)),this.addChild(n),this._rightFooterViews.push(n)}for(;this._rightFooterViews.length>i;){n=this._rightFooterViews.pop();this.removeChild(n),this._rightFooterPool.push(n)}}else for(;this._rightFooterViews.length>0;){n=this._rightFooterViews.pop();this.removeChild(n),this._rightFooterPool.push(n)}},e.prototype.$_getTableRow=function(t,e){return this._bodyView._tbody.children[e]},e.prototype.$_getTableCell=function(t,e){return this._bodyView._tbody.children[t].children[e]},e.prototype.$_getFixedTableRow=function(t){return this._fixedView._tbody.children[t]},e.prototype.$_getFixedTableCell=function(t,e){return this._fixedView._tbody.children[t].children[e]},e.prototype.$_getRightTableRow=function(t){return this._rightView._tbody.children[t]},e.prototype.$_getRightTableCell=function(t,e){return this._rightView._tbody.children[t].children[e]},e.prototype.$_getBodyCells=function(t){return this._bodyView._cells[t]},e.prototype.$_getFixedBodyCells=function(t){return this._fixedView._cells[t]},e.prototype.$_getRightBodyCells=function(t){return this._rightView._cells[t]},e}(Rs),Nc=function(t){function e(e){var i=t.call(this,e)||this;return i._enabled=!0,i._prompt="컬럼 헤더를 이 곳으로 끌어다 놓으면 그 컬럼으로 그룹핑합니다.",i._expandWhenGrouping=!0,i._summarizing=!0,i._commitBeforeGrouping=!0,i._commitBeforeExpand=!0,i._commitBeforeCollapse=!0,i._fixMergedColumns=!0,i._toast=new nl({visible:!1,message:"Grouping..."}),i._headerClickable=!1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"enabled",{get:function(){return this._enabled},set:function(t){t!=this._enabled&&(this._enabled=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"prompt",{get:function(){return this._prompt},set:function(t){t!=this._prompt&&(this._prompt=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandWhenGrouping",{get:function(){return this._expandWhenGrouping},set:function(t){t!=this._expandWhenGrouping&&(this._expandWhenGrouping=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summarizing",{get:function(){return this._summarizing},set:function(t){t!=this._summarizing&&(this._summarizing=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeGrouping",{get:function(){return this._commitBeforeGrouping},set:function(t){this._commitBeforeGrouping=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeExpand",{get:function(){return this._commitBeforeExpand},set:function(t){this._commitBeforeExpand=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitBeforeCollapse",{get:function(){return this._commitBeforeCollapse},set:function(t){this._commitBeforeCollapse=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fixMergedColumns",{get:function(){return this._fixMergedColumns},set:function(t){this._fixMergedColumns=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerClickable",{get:function(){return this._headerClickable},set:function(t){this._headerClickable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"toast",{get:function(){return this._toast},enumerable:!0,configurable:!0}),e.prototype._changed=function(){this.grid._groupingOptionsChanged(this),this._layoutOwner()},e}(Is),Vc=function(t){function e(e){var i=t.call(this,e)||this;return i._field=-1,i._text="",i._textWidth=0,i._textHeight=0,i._closeHeight=0,i._padHorz=5,i._padVert=4,i._itemGap=8,i}return o(e,t),e.prototype._doDispose=function(){lt.detach(this._textView),lt.detach(this._closeView),this._textView=this._closeView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"field",{get:function(){return this._field},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._text},enumerable:!0,configurable:!0}),e.prototype.setColumn=function(t){this._field=t.dataIndex,this._textView[lt.TextProp]=this._text=t.displayText},e.prototype.isCloseButton=function(t){return t===this._closeView},e.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=nt(e);this._textView=i.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",e.appendChild(this._textView),this._closeView=i.createElement("span"),this._closeView.className="rg-group-panel-item-close",e.appendChild(this._closeView)},e.prototype._doMeasure=function(t,e,i){var o=(this._textWidth=this._textView.offsetWidth)+this._itemGap+this._closeView.offsetWidth+2*this._padHorz,r=this._textHeight=this._textView.offsetHeight;return r=Math.max(r,this._closeHeight=this._closeView.offsetHeight),r+=2*this._padVert,new As(o,r)},e.prototype._doLayoutContent=function(t){},e.prototype._doDraw=function(t){var e=this._dom.clientHeight;this._textView.style.left=this._padHorz+"px",this._textView.style.top=Math.floor((e-this._textHeight)/2)+"px",this._closeView.style.left=this._padHorz+this._textWidth+this._itemGap+"px",this._closeView.style.top=Math.floor((e-this._closeHeight)/2)+"px"},e}(js),Bc=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._minHeight=0,o._itemViews=[],o._count=0,o._padHorz=16,o._padVert=10,o._itemGap=20,o.visible=!1,o}return o(e,t),e.prototype._doDispose=function(){this._itemViews&&this._itemViews.forEach((function(t,e){t.dispose()})),this._itemViews=null,lt.detach(this._messageView),this._messageView=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minHeight",{get:function(){return this._minHeight},set:function(t){this._minHeight!==t&&(this._minHeight=t,this._doSizeChanged())},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return"rg-group-panel"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=nt(e);e.style.overflow="hidden";var o=this._messageView=i.createElement("span");o.className="rg-group-panel-message",e.appendChild(o)},e.prototype._doMeasure=function(t,e,i){var o=t.groupingOptions;this._count=t.rowGroupLevels;var r=this.minHeight,n=0,s=this._messageView.style;if(this._count>0?s.display="none":(s.display="",this._messageView[lt.TextProp]=o.prompt,n=this._messageView.offsetHeight,r=Math.max(r,n+2*this._padVert),s.left=this._padHorz+"px",s.top=(r-n)/2+"px"),this.$_prepareItemViews(t,this._count),this._count>0){for(var a=0;a<this._count;a++){var l=(h=this._itemViews[a]).measure(t,e,i);h.width=l.width,n=Math.max(n,l.height)}r=Math.max(r,n+2*this._padVert);for(a=0;a<this._count;a++){var h;(h=this._itemViews[a]).height=n,h.y=(r-n)/2}}return new As(e,r)},e.prototype._doPrepareContent=function(t){},e.prototype._doLayoutContent=function(t){if(this._count>0)for(var e=this._padHorz,i=(this._padVert,0);i<this._count;i++){var o=this._itemViews[i];o.x=e,e+=this._itemGap+o.width}},e.prototype._doDraw=function(t){},e.prototype._visibleChanged=function(){this.grid&&this.grid.invalidateLayout()},e.prototype._doSizeChanged=function(){this.grid&&this.grid.invalidateLayout()},e.prototype.$_prepareItemViews=function(t,e){for(var i=this._itemViews,o=t.rowGroupFields,r=i.length;r<e;r++)i.push(new Vc(t.doc));for(r=0;r<e;r++){var n=i[r];n.setColumn(t.$_getVisibleRootByField(o[r],!0)),n.visible=!0,this.addChild(n)}for(r=e;r<i.length;r++)this.removeChild(i[r])},e}(Gs),$c=function(t){function e(e,i,o){void 0===i&&(i=!1),void 0===o&&(o=null);var r=t.call(this,e,i,o)||this;r._rowGroupSummaryRuntime=new Kn,r._addGridObject(r._rowGroup=new pu(r)),r._rs=r._createItemSource(),r.itemSource=r._rs,r._groupingOptions=new Nc(r),r._groupingOptionsChanged(r._groupingOptions),r._groupPanelView=new Bc(r.doc,r.rowGroup),r.topContentPane.addChild(r._groupPanelView);for(var n=[r._groupBarPane._headView,r._groupBarPane._footView,r._groupBarPane._barContainer],s=n.length-1;s>=0;s--){var a=n[s];r._tableViews[a.$_hash]=a}return r}return o(e,t),e.prototype._doDispose=function(){this._rs.dispose(),this._rs=null,this._groupPanelView=this.groupPanelView.dispose(),this._rowGroup=this._rowGroup.dispose(),this._groupingOptions=this._groupingOptions.dispose(),t.prototype._doDispose.call(this)},e.prototype._doCreateOtherElements=function(){this._groupView=new Fc(this.doc),this.addElement(this._groupView)},Object.defineProperty(e.prototype,"maxRowCount",{get:function(){return this._rs.maxRowCount},set:function(t){this._rs.maxRowCount=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGroup",{get:function(){return this._rowGroup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupPanelView",{get:function(){return this._groupPanelView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupBarPane",{get:function(){return this._groupBarPane},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupView",{get:function(){return this._groupView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupingOptions",{get:function(){return this._groupingOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paged",{get:function(){return this._rs.page>=0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"page",{get:function(){return this._rs.page},set:function(t){this.setPage(t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageCount",{get:function(){return this._rs.pageCount},set:function(t){var e=this._rs.pageCount;this._rs.pageCount=t,this._rs.pageCount!=e&&this.$_firePageCountChanged(this._rs.pageCount)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"pageSorting",{set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGroupLevels",{get:function(){return this._rs.groupLevels},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGroupFields",{get:function(){return this._rs.groupByFields},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGrouped",{get:function(){return this._rs.grouped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergedRowGrouped",{get:function(){return this._rs.mergedGrouped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGroupSummaryRuntime",{get:function(){return this._rowGroupSummaryRuntime},enumerable:!0,configurable:!0}),e.prototype.isTree=function(){return!1},e.prototype._beforeChangeLayout=function(){this.ungroupBy()},e.prototype.isGrouped=function(t){return t&&t.groupLevel>0},e.prototype.isGroupedField=function(t){return this._rs.isGroupedField(t)},e.prototype.isSortByLabelColumn=function(t){return this.columnByField(t).sortByLabel},e.prototype.getGroupLevel=function(t){return this._rs.getGroupLevel(t)},e.prototype.groupByFieldNames=function(t,e,i){void 0===i&&(i=n.ASCENDING);var o=this.dataSource;if(o&&t&&t.length>0){for(var r=[],s=0;s<t.length;s++){var a=t[s],l=o.getFieldIndex(a),h=this.columnByField(a),u=h&&this.layoutByColumn(h);!u||this.rowGroup.mergeMode&&u.parent!=this.activeCellLayout._root||l>=0&&r.push(l)}r.length>0&&(e=void 0===e?this.rowGroup.sorting:e,this.groupBy(r,e,i))}else this.ungroupBy()},e.prototype.groupBy=function(t,e,i){this.isItemEditing(null)||this.toastManager.show(this.groupingOptions.toast,!0,function(){this.$_doGroupBy(t,e,i)}.bind(this))},e.prototype.clearGroupBy=function(){this.isItemEditing(null)||(this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,n.ASCENDING),this.$_doRowGroupFooterMergeChanged(),this.$_clearColumnMergeGrouped())},e.prototype.ungroupBy=function(){this.clearGroupBy()},e.prototype.addGroupBy=function(t,e){e&&(this.isItemEditing(null)||this.isGrouped(e)||e.layout&&e.layout.visible&&(!e.layout.isRoot&&this.rowGroup.mergeMode||e.dataIndex>=0&&this.toastManager.show(this.groupingOptions.toast,!0,function(){this.$_doAddGroupBy(t,e)}.bind(this))))},e.prototype.removeGroupByField=function(t){if(!(t<0)&&!this.isItemEditing(null)&&this.isGroupedField(t)){this._rs.groupByFields;this._rs.removeGroupBy(t,!1),this._rs.groupByFields.length,this.$_doRowGroupFooterMergeChanged()}},e.prototype.removeGroupBy=function(t){this.removeGroupByField(t.dataIndex)},e.prototype.expand=function(t,e,i,o){this.isItemEditing(null)||this._rs.expand(t,e,i,o)},e.prototype.expandAll=function(t,e){this.isItemEditing(null)||this._rs.expandAll(t,e)},e.prototype.collapse=function(t,e,i){this.isItemEditing(null)||this._rs.collapse(t,e,i)},e.prototype.collapseAll=function(t){this.isItemEditing(null)||this._rs.collapseAll(t)},e.prototype.isGroupedColumn=function(t){return t&&t.dataIndex>=0&&this._rs.isGroupedField(t.dataIndex)},e.prototype.getSortFields=function(){return this.itemSource.getSortFields()},e.prototype.getSortDirections=function(){return this.itemSource.getSortDirections()},e.prototype.getSortCases=function(){return this.itemSource.getSortCases()},e.prototype.setPaging=function(t,e,i){void 0===e&&(e=10),void 0===i&&(i=-1),this._rs.setPaging(t,e,i,null)},e.prototype.setPage=function(t,e){if(void 0===e&&(e=-1),(t=Math.max(0,Math.min(t,this._rs.pageCount-1)))!=this._rs.page){var i=!1;this.$_firePageChanging(t)&&(this._rs.setPage(t,e),i=!0),i&&this.$_firePageChanged(this._rs.page)}},Object.defineProperty(e.prototype,"isLayer",{get:function(){return!1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summarizer",{get:function(){return this._rs.summarizer},enumerable:!0,configurable:!0}),e.prototype._createSidePane=function(){return this._groupBarPane=new Rc(this.doc)},e.prototype.isSidePaneVisible=function(){return this.rowGrouped&&!this.mergedRowGrouped&&this._rowGroup.indentVisible},e.prototype._createLayoutManager=function(){return new Ac(this)},e.prototype.canGrouping=function(){return this._groupPanelView.visible},e.prototype._canMerge=function(){return!0},Object.defineProperty(e.prototype,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canUndo",{get:function(){return this._rs.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this._rs.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoing",{get:function(){return this._rs.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redoing",{get:function(){return this._rs.redoing},enumerable:!0,configurable:!0}),e.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},e.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},e.prototype.execute=function(t){this._rs.execute(t)},e.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},e.prototype.getRowView=function(e,i){return i instanceof ro?this._groupView.getHeaderView(i):t.prototype.getRowView.call(this,e,i)},e.prototype._doSortItems=function(t,e,i){var o=this.itemSource;o.setLabelComparer(this._doPrepareComparer(t)),o.orderBy(t,e,i)},e.prototype._doColumnFiltersChanged=function(t,e){this.applyFilters(t,e),this.invalidateLayout()},e.prototype.setOptions=function(e){if(e){var i=this._rs;void 0!==e.hideDeleted&&(i.hideDeleted=e.hideDeleted),void 0!==e.hideDeletedRows&&(i.hideDeleted=e.hideDeletedRows),void 0!==e.inclusiveFiltering&&(i.inclusiveFiltering=e.inclusiveFiltering),void 0!==e.filterOr&&(i.inclusiveFiltering=e.filterOr),void 0!==e.summaryMode&&(i.summaryMode=e.summaryMode),void 0!==e.groupSummaryMode&&(i.groupSummaryMode=e.groupSummaryMode),void 0!==e.sortMode&&(i.sortMode=e.sortMdoe),void 0!==e.filterMode&&(i.filterMode=e.filterMode),t.prototype.setOptions.call(this,e)}},e.prototype._visualObjectChanged=function(e){t.prototype._visualObjectChanged.call(this,e),e instanceof fs&&(this._rs.checkableExpression=e.checkableExpression)},e.prototype.resetCheckables=function(){this._rs.resetCheckables()},e.prototype.applyCheckables=function(){this._rs.applyCheckables()},e.prototype.getCheckedRows=function(t,e,i){var o,r;if(e){o=[];for(var n=0,s=this.itemCount;n<s;n++)(r=this.getItem(n)).checked&&r.dataRow>=0&&o.push(r.dataRow)}else o=this._rs.getCheckedRows(i);return t&&o.sort((function(t,e){return t-e})),o},e.prototype.getCheckedItemIndices=function(t){for(var e=[],i=0,o=this.itemCount;i<o;i++){var r=this.getItem(i);r.checked&&(t||r.dataRow>=0)&&e.push(r.index)}return e},e.prototype.getCheckedItems=function(t){for(var e=[],i=0,o=this.itemCount;i<o;i++){var r=this.getItem(i);r.checked&&(t||r.dataRow>=0)&&e.push(r)}return e},e.prototype.findGroupItem=function(t,e){var i=this.getGroupLevel(e);if(i>0)for(var o=t instanceof oo?t:t.parent;o;){if(o.level==i)return o;o=o.parent}return null},e.prototype.getItemOfModel=function(t){return t.itemIndex>=0?this.getItem(t.itemIndex):t.id>=0?this._rs.getGroupItem(t.id):null},e.prototype.getJsonRows=function(){return this._rs.getJsonRows()},e.prototype.getIndicatorIndex=function(t){return this._rs.getDisplayItemIndex(t)},e.prototype.getFirstRow=function(){return this._rs.getFirstRow()},e.prototype.getLastRow=function(){return this._rs.getLastRow()},e.prototype.getPrevRow=function(t){return this._rs.getPrevRow(t)},e.prototype.getNextRow=function(t){return this._rs.getNextRow(t)},e.prototype._doMoveRows=function(t,e){var i=e&&e.dataRow;if(i>=0){for(var o=[],r=0,n=t;r<n.length;r++){var s=n[r],a=s&&s.dataRow;a>=0&&o.push(a)}if(o.length>0)return this.dataSource.moveRowList(o,i)}},e.prototype._getCellTypeOf=function(t){return t instanceof wc?"groupHead":t instanceof xc?"groupFoot":t instanceof Oc?"groupBar":void 0},e.prototype.updatePastedRow=function(t,e,i){var o=t.dataRow;if(o>=0){var r=this.dataSource;r&&r.updateRow(o,e,i)}},e.prototype.appendPastedRow=function(t){var e=this.dataSource;e&&e.appendRow(t)},e.prototype.getSummaryCount=function(e){return"groupFooter"===e?this.rowGroup.footers.count:t.prototype.getSummaryCount.call(this,e)},e.prototype._createItemSource=function(){return new mc(!0,this._rowGroup)},e.prototype.$_rowGroupChanged=function(t){this._doRowGroupMergeModeChanged()},e.prototype._groupingOptionsChanged=function(t){this._rs.expandWhenGrouping=t.expandWhenGrouping},e.prototype.$_rowGroupAdornmentsChanged=function(t){this._rs._groupedProvider.resetAdornments(t.expandedAdornments,t.collapsedAdornments,this.handler,t.createFooterCallback,t.indentVisible)},e.prototype.$_getVisibleRootByField=function(t,e){for(var i=this.visibleLayoutCount,o=0;o<i;o++){var r=this.getVisibleLayout(o),n=r instanceof xn&&lt.cast(r.firstColumn,mn);if(n&&n.dataIndex==t)return n}return e?this.columnByField(t):null},e.prototype.$_clearColumnMergeGrouped=function(){this._activeCellLayout._clearMergeGrouped()},e.prototype._doRowGroupMergeModeChanged=function(){t.prototype._doRowGroupMergeModeChanged.call(this),this.$_clearColumnMergeGrouped();var e=this._rs.groupByFields;if(this.rowGroup.mergeMode){if(e&&e.length>0)for(var i=e.length-1;i>=0;i--){var o=this.$_getVisibleRootByField(e[i],!1);o?o.$_setMergeGrouped(!0):e.splice(i,1)}this._rs.groupByMode(e,!0)}else this._rs.groupByMode(e,!1)},e.prototype.$_doRowGroupFooterMergeChanged=function(){},e.prototype.$_doGroupBy=function(t,e,i){var o,r=this.dataSource;if(this.$_clearColumnMergeGrouped(),r&&t&&(o=t.length)>0){for(var s=r.fieldCount,a=[],l=0;l<o;l++)t[l]>=0&&t[l]<s&&a.push(t[l]);if(a.length>0){if(this.rowGroup.mergeMode)for(l=a.length-1;l>=0;l--){var h=this.$_getVisibleRootByField(a[l],!1);h?h.$_setMergeGrouped(!0):a.splice(l,1)}a.length>0&&(this._rs.setLabelComparer(this._doPrepareComparer(a)),this._rs.groupBy(a,e,i))}}else this._rs.setLabelComparer(null),this._rs.groupBy(null,!0,n.ASCENDING);this.$_doRowGroupFooterMergeChanged()},e.prototype.$_doAddGroupBy=function(t,e){var i=e.dataIndex;e.$_setMergeGrouped(this.rowGroup.mergeMode);try{var o=this.rowGroupFields?this.rowGroupFields.slice():[];o.push(i),this._rs.setLabelComparer(this._doPrepareComparer(o)),this._rs.addGroupBy(t,i,this.rowGroup.sorting),this.$_doRowGroupFooterMergeChanged()}catch(t){throw e.$_setMergeGrouped(!1),t}},e.prototype.$_clearGroupedIndices=function(){for(var t=this.columnCount-1;t>=0;t--){var e=lt.cast(this.getColumn(t),mn);e&&e.$_setGroupLevel(this._rs.getGroupLevel(-1))}},e.prototype.$_setGroupedIndices=function(){for(var t=this.columnCount-1;t>=0;t--){var e=lt.cast(this.getColumn(t),mn);e&&e.$_setGroupLevel(this._rs.getGroupLevel(e.dataIndex))}},e.prototype.$_firePageChanging=function(t){return this.fireConfirmEvent(e.PAGE_CHANGING,t)},e.prototype.$_firePageChanged=function(t){this.fireEvent(e.PAGE_CHANGED,t)},e.prototype.$_firePageCountChanged=function(t){this.fireEvent(e.PAGE_COUNT_CHANGED,t)},e.prototype.$_fireGrouping=function(t){return this.fireConfirmEvent(e.GROUPING,t)},e.prototype.$_fireGrouped=function(){this.fireEvent(e.GROUPED)},e.prototype.$_fireExpanding=function(t){return this.fireConfirmEvent(e.EXPANDING,t)},e.prototype.$_fireExpanded=function(t){this.fireEvent(e.EXPANDED,t)},e.prototype.$_fireCollapsing=function(t){return this.fireConfirmEvent(e.COLLAPSING,t)},e.prototype.$_fireCollapsed=function(t){this.fireEvent(e.COLLAPSED,t)},e.prototype.onGroupedItemProviderGrouping=function(t,e){return this.$_fireGrouping(e)},e.prototype.onGroupedItemProviderGrouped=function(t){this.selections.clear(),this.$_clearGroupedIndices();var e=this._rs.groupByFields;if(e&&e.length>0&&this.$_setGroupedIndices(),this.rowGroup.mergeMode){for(var i=[],o=this.visibleLayoutCount,r=0;r<o;r++){var n=this.getVisibleLayout(r),s=lt.cast(n.firstColumn,mn),a=n.merges;s&&(s.mergeGrouped&&s.groupLevel<=0?(a&&a.clear(),s.$_setMergeGrouped(!1)):s.mergeGrouped&&(a||(a=new nn(n)),i.push(s)))}if((o=i.length)>0){i=i.sort((function(t,e){return t.groupLevel-e.groupLevel}));for(r=0;r<o;r++){(a=i[r].layout.merges).clear(),a.initialize(Xr.INIT_COUNT),i[r].layout.vindex=r}}o=this.visibleLayoutCount;for(r=0;r<o;r++){if((s=lt.cast(this.getVisibleLayout(r).firstColumn,mn))&&!s.mergeGrouped)(a=s.layout.merges)&&(a.clear(),a.initialize(Xr.INIT_COUNT))}}this.requestPrepareEditor(),this._syncHeadCheck([]),this.$_fireGrouped(),this._cellLayoutChanged(),this.container.defaultTool.layoutChanged()},e.prototype.onGroupedItemProviderExpand=function(t,e){return this.$_fireExpanding(e)},e.prototype.onGroupedItemProviderExpanded=function(t,e){this.$_fireExpanded(e)},e.prototype.onGroupedItemProviderCollapse=function(t,e){return this.$_fireCollapsing(e)},e.prototype.onGroupedItemProviderCollapsed=function(t,e){this.$_fireCollapsed(e)},e.PAGE_CHANGING="onGridViewPageChanging",e.PAGE_CHANGED="onGridViewPageChanged",e.PAGE_COUNT_CHANGED="onGridViewPageCountChanged",e.GROUPING="onGridViewGrouping",e.GROUPED="onGridViewGrouped",e.EXPANDING="onGridViewExpanding",e.EXPANDED="onGridViewExpanded",e.COLLAPSING="onGridViewCollapsing",e.COLLAPSED="onGridViewCollapsed",e}(Pu),Ac=function(t){function e(e){return t.call(this,e)||this}return o(e,t),Object.defineProperty(e.prototype,"panelVisible",{get:function(){return this.grid.groupPanelView.visible},enumerable:!0,configurable:!0}),e.prototype.getLevelIndent=function(t){var e=this.grid;if(this.mergedRowGrouped){for(var i=this.fixedLayoutCount,o=0,r=0;r<t&&r<i;r++)o+=this.getFixedLayoutWidth(r);for(r=i;r<t;r++)o+=this.getLayoutWidth(r-i);return i?t>i?o=Math.max(this.fixedWidth,o+this.fixedBarWidth-this.leftPos):o+=this.fixedBarWidth:o-=this.leftPos,o}return e.rowGroup.indentVisible?e.groupBarPane.getLevelIndent(t):0},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topPanelVisible",{get:function(){return this.panelVisible},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGrouped",{get:function(){return!this.grid.rowGroup.mergeMode&&this.grid.rowGrouped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"mergedRowGrouped",{get:function(){return this.grid.rowGroup.mergeMode&&this.grid.rowGrouped},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGroupLevels",{get:function(){return this.grid.rowGroupLevels},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rowGroupFields",{get:function(){return this.grid.rowGroupFields},enumerable:!0,configurable:!0}),e.prototype.$_groupView=function(t){return this.grid._groupView},e.prototype.setLeftPos=function(e,i){t.prototype.setLeftPos.call(this,e,i);var o=this.grid,r=o.mergedRowGrouped,n=this.$_groupView(r);n.visible&&this.$_layoutRowGroupView(o,n)},e.prototype._prepareItems=function(){t.prototype._prepareItems.call(this);var e=this.grid;if(e.rowGrouped){var i=e.mergedRowGrouped,o=this.$_groupView(i),r=this.contentBounds.isEmpty?null:e.bodyView,n=this.fixedContentBounds.isEmpty?null:e.fixedBodyView,s=this.rightContentBounds.isEmpty?null:e.rightBodyView;o.$_prepareGroupItems(this,r,n,s),o.$_prepareGroupFooters(this._items,this)}},e.prototype._doMeasureTopPane=function(t,e){t.groupingOptions;var i=t.groupPanelView;if(this.panelVisible){var o=i.measure(t,e.width,e.height);e.height=o.height}else e.height=1,e.width=1},e.prototype._doLayoutTopPane=function(t,e){var i=t.groupPanelView;i.setBounds(0,0,e.width,e.height),this.panelVisible&&i.layoutContent(this)},e.prototype._doLayout=function(e,i){t.prototype._doLayout.call(this,e,i)},e.prototype._adjustLayout=function(e,i){t.prototype._adjustLayout.call(this,e,i);var o=e.rowGrouped,r=e.mergedRowGrouped,n=e._sideContentPane;n&&this._layoutSidePane(e,n);var s=this.$_groupView(r);this.$_groupView(!r).visible=!1,(s.visible=o)&&this.$_layoutRowGroupView(e,s)},e.prototype.isMergedCell=function(t){var e=this.grid;if(e.rowGroup.mergeMode&&e.isGroupedColumn(t.dataColumn))return!0;var i=t.layout;if(i&&i.isColumn&&t.layout.merged){var o=i.merges;if(o)return null!=o.getRoom(t)}return!1},e.prototype.$_layoutRowGroupView=function(t,e){var i=this.contentBounds,o=this.sideContentBounds.clone();o.top=i.y+this.bodyBounds.y,o.right=this.rightContentBounds.right,o.bottom=Math.min(this.footBounds.y+i.y,i.bottom),e.setRect(o),e.layout(this)},e}(Oa),jc=function(t){function e(e){var i=t.call(this,e,"gridSelectionTool")||this;return i._panelCellReq=new Hc,i._panelCellFeedback=new Wc(e.doc),i._groupingReq=new Uc,i}return o(e,t),e.prototype._doDispose=function(){this._panelCellReq=null,t.prototype._doDispose.call(this)},e.prototype._doMouseDown=function(e){var i=e.mouseX,o=e.mouseY,r=this.grid,n=(this.findElementAt(i,o,!1),this.mouseEventTarget),s=rt(e.target);if(n instanceof s.HTMLElement&&oa.isExpander(n)){var a=this._findTableCell(n),l=r.getTableView(a);if(l instanceof va){var h=r.getDataCellIndex(a,this._tempIndex),u=l.getCellAt(r.layoutManager,h),c=r.findGroupItem(u.item,u.layout.firstColumn.dataIndex);this.$_toggleExpanded(r,c)}}else if(n instanceof s.HTMLElement&&Ec.isExpander(n)){return(c=r.getItem(n.$_row))instanceof no&&(c=c.parent),void(c instanceof ro&&this.$_toggleExpanded(r,c))}t.prototype._doMouseDown.call(this,e)},e.prototype._doClick=function(e){var i=e.mouseX,o=e.mouseY,r=this.grid,n=this.findElementAt(i,o,!1);n instanceof Vc&&n.isCloseButton(e.target)&&r.removeGroupByField(n.field),t.prototype._doClick.call(this,e)},e.prototype._doDblClick=function(e){var i=e.mouseX,o=e.mouseY,r=this.grid,n=this.findElementAt(i,o,!1);n instanceof kc&&r.groupingOptions.headerClickable?this.$_toggleExpanded(r,n.item):t.prototype._doDblClick.call(this,e)},e.prototype._getEditRequest=function(e,i,o,r,n,s,a){var l=t.prototype._getEditRequest.call(this,e,i,o,r,n,s,a);if(l)return l;var h=this.grid,u=this.findElementAt(o,r,!1),c=this._findTableCell(e),d=c&&h.getTableView(c);if(d instanceof Ia){var p=d.layoutByCell(c),_=p.firstColumn;if(h.groupPanelView.visible&&_&&_.groupable&&h.groupingOptions.enabled){var f=h.layoutManager.getHeaderCellRect(p);return this._groupingReq.init(p,f,o,r)}}return u instanceof Vc?this._panelCellReq.init(u,o,r):void 0},e.prototype._getDragTracker=function(e,i,o){var r=this.grid;return e instanceof Hc?new Gc(r,e,this._panelCellFeedback):e instanceof Uc?new zc(r,e,this._panelCellFeedback):t.prototype._getDragTracker.call(this,e,i,o)},e.prototype.getNextRequest=function(t,e,i,o){if(t instanceof Ul&&t.layout instanceof xn){var r=this.grid,n=t.layout.firstColumn;if(r.groupingOptions.enabled&&r.layoutManager.topPanelVisible&&n instanceof mn&&n.groupable&&o<r.groupPanelView.bottom)return this._groupingReq.init(t.layout,e,i,o)}},e.prototype._getClickData=function(t,e){if(t instanceof Bc)return mh.getData("groupPanel");if(t instanceof Vc){if(t.isCloseButton(e.target))return;var i=this.grid.dataSource.getOrgFieldName(t.field);return mh.getField("groupColumn",t.field,i)}return t instanceof Pu?mh.getData("gridEmpty"):void 0},e.prototype.$_toggleExpanded=function(t,e){e.expanded?t.collapse(e,!1,!1):t.expand(e,!1,!1,0)},e}(kh),Hc=function(t){function e(){var e=t.call(this)||this;return e._field=-1,e}return o(e,t),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"field",{get:function(){return this._field},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i){return this._source=t,this._x=e,this._y=i,this._field=t.field,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"pointer"},enumerable:!0,configurable:!0}),e}(Na),Wc=function(t){function e(e){var i=t.call(this,e)||this;return i._no=!1,i}return o(e,t),e.prototype.setField=function(t,e){void 0===e&&(e=!1),this._textView[lt.TextProp]=t,this._noMark.style.display=(this._no=e)?"inline-block":"none"},e.prototype._getCssSelector=function(){return"rg-header rg-header-cell rg-group-panel-item rg-group-panel-cell-feedback"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=this.doc;this._textView=i.createElement("span"),this._textView.className="rg-group-panel-item-text",this._textView.style.display="inline-block",e.appendChild(this._textView),this._noMark=i.createElement("span"),this._noMark.className="rg-group-panel-no-mark",this._noMark.style.display="none",e.appendChild(this._noMark)},e.prototype._doDraw=function(t){var e=this._textView.offsetWidth,i=this._textView.offsetHeight,o=this._textView.style;if(o.left=Math.max(0,(this.width-e)/2)+"px",o.top=Math.max(0,(this.height-i)/2)+"px",this._no){var r=this._noMark.offsetWidth,n=this._noMark.offsetHeight,s=this._noMark.style;s.left=Math.max(0,(this.width-r)/2)+"px",s.top=Math.max(0,(this.height-n)/2)+"px"}},e}(Os),Gc=function(t){function e(e,i,o){var r=t.call(this,e,"groupPanelCellTracker")||this;return r._request=i,r._feedback=o,r}return o(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var r=this.grid,n=(r.layoutManager,this._request.source.boundsByContainer());return this._feedback.setRect(n),this._feedback.setField(this._request.source.text),this._feedback.visible=!0,r.addFeedbackElement(this._feedback),this._offsetX=e-n.x,this._offsetY=i-n.y,!0},e.prototype._doDrag=function(t,e,i){return e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0},e.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;this.currentY>e.contentBounds.y&&t.removeGroupByField(this._request.field)},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(Kl),Uc=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){this._layout=null,this._source=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"layout",{get:function(){return this._layout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i,o){return this._layout=t,this._source=e,this._x=i,this._y=o,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"pointer"},enumerable:!0,configurable:!0}),e}(Na),zc=function(t){function e(e,i,o){var r=t.call(this,e,"groupingCellTracker")||this;return r._request=i,r._feedback=o,r}return o(e,t),e.prototype._doDispose=function(){this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype.getRequest=function(){return this._request},e.prototype._doStart=function(t,e,i,o){var r=this.grid,n=this._request.source,s=n instanceof Os?n.boundsByContainer():n,a=r.isGroupedField(this._request.layout.firstColumn.dataIndex);return this._feedback.setRect(s),this._feedback.setField(this._request.layout.firstColumn.displayText,a),this._feedback.visible=!0,r.addFeedbackElement(this._feedback),this._offsetX=e-s.x,this._offsetY=s.height/3,!0},e.prototype._doDrag=function(t,e,i){return e-=this._offsetX,i-=this._offsetY,this._feedback.move(e,i),!0},e.prototype._doCompleted=function(){var t=this.grid,e=t.layoutManager;if(this.currentY<e.contentBounds.y){var i=t.$_getVisibleRootByField(this._request.layout.firstColumn.dataIndex,!0);t.addGroupBy(e.rowGroupLevels,i)}},e.prototype._doEnded=function(){this.grid.removeFeedbackElement(this._feedback)},e}(Kl),Yc=function(t){function e(){var e=t.call(this)||this;return e._modal=!1,e._items=[],e._itemChanged=!1,e._visibleChanged=!1,e._visibleItems=[],e._header=new Xc(e),e._footer=new Jc(e),e._body=new Zc(e),e}return o(e,t),e.prototype._doDispose=function(){this._header=this._header.dispose(),this._footer=this._footer.dispose(),this._body=this._body.dispose(),t.prototype._doDispose.call(this)},e.prototype.itemVisibleChanged=function(t){},e.prototype.itemChanged=function(t){},Object.defineProperty(e.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footer",{get:function(){return this._footer},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this._body},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemCount",{get:function(){return this._items.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visibleItemCount",{get:function(){return this._visibleItems.length},enumerable:!0,configurable:!0}),e.prototype.load=function(t){t&&(t.title&&this._header.assignFrom(t.title),t.footer&&this._footer.assignFrom(t.footer),t.body&&this._body.assignFrom(t.body),lt.isArray(t.items)&&this.$_loadItems(t.items,this._items=[]),this._itemChanged=!0,this._changed())},e.prototype.getItem=function(t){return this._items[t]},e.prototype.getVisibleItem=function(t){return this._visibleItems[t]},e.prototype._changed=function(){this.fireEvent(e.CHANGED)},e.prototype.$_loadItems=function(t,e,i){void 0===i&&(i=null);for(var o=0,r=t;o<r.length;o++){var n=r[o];if(n){var s=void 0;if(!i&&lt.isArray(n.items)){var a=s=new id;this.$_loadItems(n.items,a._items,a)}else"string"==typeof n.template?s=new rd:("string"==typeof n.column||"string"==typeof n)&&(s=new od);s.assignFrom(n),s&&(i?(i._items.push(s),s.$_attached(i)):(this._items.push(s),s.$_attached(this)))}}},e.prototype.$_refreshItems=function(){var t=this._items;if(t)for(var e=t.length-1;e>=0;e--){var i=t[e];i._index=e,i._vindex=-1,i.$_refresh(this)}},e.prototype.$_resetvisibles=function(){for(var t=this._visibleItems=[],e=0,i=this._items;e<i.length;e++){var o=i[e];if(o.visible&&(t.push(o),o._vindex=t.length-1,o instanceof id&&o.expanded))for(var r=0,n=o._items;r<n.length;r++){var s=n[r];s.visible&&(t.push(s),s._vindex=t.length-1)}}},e.prototype.$_prepareLayout=function(){this._itemChanged?(this.$_refreshItems(),this._itemChanged=!1,this.$_resetvisibles(),this._visibleChanged=!1):this._visibleItems&&(this.$_resetvisibles(),this._visibleChanged=!1)},e.CHANGED="onFormChanged",e}(se),qc=function(t){function e(){return t.call(this)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._changed=function(){},e}(ft),Kc=function(t){function e(e){var i=t.call(this)||this;return i._visible=!0,i._styleName="",i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){var t=this._getDefaultStyle();return this._styleName&&(t+=" "+this._styleName),t},enumerable:!0,configurable:!0}),e.prototype._changed=function(){t.prototype._changed.call(this)},e}(qc),Xc=function(t){function e(e){var i=t.call(this,e)||this;return i._height=24,i._labelCell={displayText:"Field"},i._valueCell={displayText:"Value"},i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelCell",{get:function(){return this._labelCell},set:function(t){"string"==typeof t&&(t={displayText:t}),this._labelCell=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueCell",{get:function(){return this._valueCell},set:function(t){"string"==typeof t&&(t={displayText:t}),this._valueCell=t},enumerable:!0,configurable:!0}),e.prototype._getDefaultStyle=function(){return e.STYLE_NAME},e.STYLE_NAME="rg-form-header",e}(Kc),Zc=function(t){function e(e){var i=t.call(this,e)||this;return i._minRowHeight=24,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"minRowHeight",{get:function(){return this._minRowHeight},set:function(t){t!=this._minRowHeight&&(this._minRowHeight=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._getDefaultStyle=function(){return e.STYLE_NAME},e.STYLE_NAME="rg-form-body",e}(Kc),Jc=function(t){function e(e){var i=t.call(this,e)||this;return i._height=26,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"height",{get:function(){return this._height},set:function(t){t!=this._height&&(this._height=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"popupMenu",{get:function(){return this._popupMenu},set:function(t){t!=this._popupMenu&&(this._popupMenu=t,this._popupMenuName="string"==typeof t?t:null)},enumerable:!0,configurable:!0}),e.prototype.getPopupMenuName=function(t){return this._popupMenuName?this._popupMenuName:this._popupMenu?(this._popupMenuName="form_footer_menu",t.addPopupMenu(this._popupMenuName,this._popupMenu,!0),this._popupMenuName):null},e.prototype._getDefaultStyle=function(){return e.STYLE_NAME},e.STYLE_NAME="rg-form-footer",e}(Kc),Qc=function(t){function e(){var e=t.call(this)||this;return e._visible=!0,e._height=0,e._vindex=-1,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"visible",{get:function(){return this._visible},set:function(t){t!=this._visible&&(this._visible=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"vindex",{get:function(){return this._vindex},enumerable:!0,configurable:!0}),e.prototype.canEdit=function(){return!1},e.prototype.$_attached=function(t){this._group=t},e.prototype._changed=function(){},e.prototype._headerChanged=function(){this._changed()},e.prototype.$_refresh=function(t){},e.prototype.$_prepareLayout=function(t,e,i){this._doPrepare(t,e,i)},e.prototype._doPrepare=function(t,e,i){},e}(ft),td=function(t){function e(e){var i=t.call(this)||this;return i._text="",i._owner=e,i}return o(e,t),e.prototype._doDispose=function(){this._owner=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"text",{get:function(){return this._text},set:function(t){t!=this._text&&(this._text=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"owner",{get:function(){return this._owner},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayText",{get:function(){return this._text||this._owner.displayLabel},enumerable:!0,configurable:!0}),e.prototype.doAssignSimple=function(t){if("string"==typeof t)return this._text=t,!0},e.prototype._changed=function(){this._owner&&this._owner._headerChanged()},e}(qc),ed=function(t){function e(){var e=t.call(this)||this;return e._header=new td(e),e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"header",{get:function(){return this._header},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"renderer",{get:function(){return this._renderer},set:function(t){this._renderer=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueChanged",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype.assignFrom=function(e){t.prototype.assignFrom.call(this,e),e.header&&this._header.assignFrom(e.header)},e}(Qc),id=function(t){function e(){var e=t.call(this)||this;return e._items=[],e._expanded=!0,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.itemVisibleChanged=function(t){this._group&&this._group.itemVisibleChanged(this)},e.prototype.itemChanged=function(t){this._group&&this._group.itemChanged(this)},Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},enumerable:!0,configurable:!0}),e.prototype.expand=function(){return!this._expanded&&(this._expanded=!0,!0)},e.prototype.collapse=function(){return!!this._expanded&&(this._expanded=!1,!0)},e.prototype._doPrepare=function(t,e,i){},e}(Qc),od=function(t){function e(){var e=t.call(this)||this;return e._editButtonVisibility=S.ALWAYS,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"column",{get:function(){return this._column},set:function(t){t!=this._column&&(this._column=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editor",{get:function(){return this._editor},set:function(t){this._editor=t,this._changed()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"button",{get:function(){return this._button},set:function(t){t!=this._button&&(this._button=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"buttonVisibility",{get:function(){return this._buttonVisibility},set:function(t){t!=this._buttonVisibility&&(this._buttonVisibility=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editButtonVisibility",{get:function(){return this._editButtonVisibility},set:function(t){t!=this._editButtonVisibility&&(this._editButtonVisibility=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.doAssignSimple=function(t){if("string"==typeof t)return this.column=t,!0},Object.defineProperty(e.prototype,"displayLabel",{get:function(){return this._columnObj&&this._columnObj.displayText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return""},enumerable:!0,configurable:!0}),e.prototype._doPrepare=function(t,e,i){this._columnObj=e.getColumnObject(this._column)},e}(ed),rd=function(t){function e(){var e=t.call(this)||this;return e._dirty=!1,e._valueIndex=-1,e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"template",{get:function(){return this._template},set:function(t){t!=this._template&&(this._template=t,this._dirty=!0,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueField",{get:function(){return this._valueField},set:function(t){t!=this._valueField&&(this._valueField=t,this._valueIndex=-99,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"displayLabel",{get:function(){return this._valueField},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return"Template"},enumerable:!0,configurable:!0}),e.prototype._doPrepare=function(t,e,i){this._valueIndex<-1&&(this._valueIndex=e.getDataFieldIndex(this._valueField))},e}(ed),nd=function(t){function e(e){var i=t.call(this)||this;return i._name=e,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),e.prototype.start=function(t,e,i,o){return this._doStart(t,e,i,o)},e.prototype.move=function(t,e){},e.prototype.stop=function(t,e){this._doEnd()},e.prototype.drag=function(t,e,i,o){return this._doDrag(t,e,i,o)},e.prototype.drop=function(t,e){try{this._doDrop(t,e)}finally{this._doEnd()}},e.prototype.cancel=function(){try{this._doCancel()}finally{this._doEnd()}},e.prototype.end=function(t){this._doEnd()},e.prototype._doStart=function(t,e,i,o){},e.prototype._doDrag=function(t,e,i,o){return!1},e.prototype._doDrop=function(t,e){},e.prototype._doCancel=function(){},e.prototype._doEnd=function(){},e}(ft),sd=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"targetElement",{get:function(){return this._targetElement},set:function(t){this._targetElement=t},enumerable:!0,configurable:!0}),e}(Hl),ad=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e}(sd),ld=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"handle",{get:function(){return this._handle},set:function(t){this._handle=t},enumerable:!0,configurable:!0}),e}(sd),hd=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),Object.defineProperty(e.prototype,"request",{get:function(){return this._request},set:function(t){this._request=t},enumerable:!0,configurable:!0}),e.prototype.stop=function(){},e.prototype.end=function(t){this._doEnd(t)},e.prototype._doEnd=function(t){},e.prototype.getRequest=function(){return this._request},e}(Kl),ud=function(t){function e(e){var i=t.call(this,e,"mobileBodyScrollTracker")||this;return i._tapX=NaN,i._tapY=NaN,i._vertical=!0,i}return o(e,t),e.prototype._doDispose=function(){this._grid=null,t.prototype._doDispose.call(this)},e.prototype._doStart=function(t,e,i,o){var r=this._grid;if(r.isEditing())switch(r.mobileOptions.scrollOnEditing){case D.CANCEL:r.cancelEditor(!0);break;case D.COMMIT:r.commitEditor(!0);break;case D.DEFAULT:}return this._tapX=e,this._tapY=i,!0},e.prototype._doDrag=function(t,e,i){var o=this._grid,r=e-this._tapX,n=i-this._tapY,s=Math.abs(n)>=Math.abs(r);if(s!=this._vertical&&(s&&Math.abs(n)>2*Math.abs(r)||!s&&Math.abs(r)>2*Math.abs(n))&&(this._vertical=s),this._vertical){if(Math.abs(n)>5){var a=o.topIndex;if(n=n>0?-1:1,a+o.layoutManager.fullItemCount>=o.itemCount&&1==n||0==a&&-1==n)return!1;o.topIndex=o.topIndex+n,this._tapY=i}}else o.leftPos=o.leftPos-r,this._tapX=e;return!0},e}(hd),cd=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doStart=function(t,e,i,o){return!0},e.prototype._doDrag=function(t,e,i){var o=this._grid.pointToIndex(null,e,i,!1);if(o&&o.itemIndex>=0){var r=this.request.handle,n=r.selectionMask.item;n&&n.inflate(r.dir,o)}return!0},e}(hd),dd=function(t){function e(e){var i=t.call(this,e,"formSelectionTool")||this;i._focusMask=null,i._cellResizer=null,i._tapTracker=null,i._swipeTimer=null,i._swipeDistance=0,i._swipeDelta=0,i._swipeDuration=0,i._swipeStarted=null,i._swipePrev=void 0,i._swipeAmount=0,i._tapX=NaN,i._tapY=NaN;var o=i._form=e.formView;return i._focusMask=new vh(e.doc),i._cellResizer=new Ch(e.doc),o.addBodyElement(i._focusMask),i._colResizeReq=new pd(o),i._touchManager=i.$_createTouchManager(e),i}return o(e,t),e.prototype._doDispose=function(){this._focusMask=this._focusMask.dispose(),this._colResizeReq=this._colResizeReq.dispose(),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"form",{get:function(){return this._form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"grid",{get:function(){return this._form.container.gridView},enumerable:!0,configurable:!0}),e.prototype.focuseIndexChanging=function(t){},e.prototype.focusedChanged=function(t,e){this.$_resetFocusView()},e.prototype.resetFocused=function(){this.$_resetFocusView()},e.prototype._doSetFocus=function(t){this.grid.editController.setFocus(!0,t)},e.prototype._doFocusLeave=function(){},e.prototype._doKeyDown=function(t){var e=t.keyCode,i=t.ctrlKey,o=(t.shiftKey,this._form),r=o.options,n=this.grid;if(27==e)n.closePopups();else if(13==e)n.isEditing()&&(o.$_commitEditor(),r.enterToNextCell&&o.focusedIndex++);else if(9==e);else if(113==e);else if(90==e&&i);else if(89==e&&i);else if(lt.included(e,36,35,39,37,40,38,34,33)){var s=o.model.itemCount;if(0==s)return!0;if(!o.focusedItem)return o.focusedIndex=0,!0;var a=o.focusedIndex;switch(e){case 36:a=0;break;case 35:a=s-1;break;case 37:case 38:case 33:a=Math.max(0,a-1);break;case 39:case 40:case 34:a=Math.min(s-1,a+1)}o.focusedIndex=a}},e.prototype._doMouseDown=function(t){var e=t.mouseX,i=t.mouseY,o=t.ctrlKey||t.metaKey,r=this.form,n=r.container.gridView;if(clearInterval(this._swipeTimer),this._stopTapTracker(!1),n.closePopups(),this.dragTracker&&(this.dragTracker.dispose(),this.dragTracker=null),0==t.button){var s=this._clickTarget=this.mouseEventTarget,a=this._getEditRequest(s,e,i,o,t.shiftKey),l=this._getDragTracker(a,e,i),h=this._findTableCell(s);if(h){r.container._containerDom.focus(),r.focusedIndex=h.parentElement.sectionRowIndex;var u=r.bodyView.bodyCellByCell(h);u&&u.isEditButton(s)&&r.showEditor(r.focusedIndex)&&n.editController.buttonDown(null,t)}else r.$_commitEditor();this.dragTracker=l}},e.prototype._doMouseUp=function(e){this.grid.editController.buttonUp(null,e),t.prototype._doMouseUp.call(this,e)},e.prototype._doMouseMove=function(t){var e=t.mouseX,i=t.mouseY;this.form;if(this.dragTracker);else{this.mouseEventTarget.style.cursor="default";var o=this._getEditRequest(this.mouseEventTarget,e,i,!1,!1);o&&o.cursor&&(this.mouseEventTarget.style.cursor=o.cursor)}},e.prototype._doClick=function(t){var e=t.target,i=this.form;if(e instanceof rt(t.target).HTMLElement){if(i.$_elementClicked(e))return;i.footerView.isCheck(e)&&i.container.gridView.toggleCheck(i.currentRow),i.headerView.isClose(e)&&(i.visible=!1)}var o=this._findTableCell(t.target);if(o){var r=this.form.bodyView.bodyCellByCell(o);if(r&&r.isEditButton(t.target)){var n=i.focusedIndex=o.parentElement.$_row,s=r.editorType,a=this.grid.delegate.getCellEditor(s);lt.isMobile()&&a.hasList?i.showList(n)&&i.editorButtonClicked(n):i.showEditor(n)&&i.editorButtonClicked(n)}}},e.prototype._doDblClick=function(t){t.target;var e=this.form,i=this._findTableCell(t.target);if(i){var o=i.parentElement.$_row;o>=0&&o==e.focusedIndex&&1==i.cellIndex&&(e.showEditor(o),t.preventDefault(),t.stopImmediatePropagation())}},e.prototype._getEditRequest=function(t,e,i,o,r){var n=this.form,s=n._headerView;if(s.visible){var a=n.labelWidth;if(i<s.height&&e>=a-1&&e<=a+1)return this._colResizeReq.init(e,i,e-a)}return null},e.prototype._getDragTracker=function(t,e,i){return t instanceof pd?new _d(t,this._cellResizer):null},e.prototype.$_resetFocusView=function(){var t=this._form,e=t.container.gridView,i=t.options,o=t.focusedItem,r=!1;if(o&&i.focusVisible&&!t.isEditing()){var n=t._bodyView,s=n.getValueCellRect(o);if(s.y+=n.y,s.width>0&&s.height>0){var a=e.isEditing();s.width-=1+t.$_getScrollBarWidth(),a&&(s.y--,s.height+=1),this._focusMask.updateElement(0,0,s.width,s.height,a),this._focusMask.setRect(s),r=!0}}this._focusMask.visible=r},e.prototype._stopTapTracker=function(t){this._tapTracker},e.prototype.onTouch=function(t,e,i){clearInterval(this._swipeTimer),this._stopTapTracker(!1);var o=this.form;return this._clickTarget=t.target,(this._clickCell=this._findTableCell(this._clickTarget))&&o.container._containerDom.focus(),null},e.prototype.onTap=function(t,e,i){if(lt.isiOS&&this.touchManager){var o=lt.getTimer();if(this.touchManager.touchEndt+50>o)return}},e.prototype.onDoubleTapHandler=function(t,e,i){this.form,this._findTableCell(t.target);t.mouseX=e,t.mouseY=i,this._doDblClick(t)},e.prototype.onLongTapHandler=function(t,e,i){},e.prototype.onDragStartHandler=function(t,e,i,o){var r=null;return(r=this.form.$_isScrollBar(this._clickTarget)?new md(this._form):new yd(this._form,this._focusMask))&&r.start(t,e,i,o)&&(this._tapTracker=r),this._tapTracker},e.prototype.onDragHandler=function(t,e,i,o){var r=this._tapTracker,n=!1;return r&&(this._tapTracker,(n=r.drag(t,e,i,o))?this.$_resetFocusView():(r.cancel(),this._tapTracker=null)),n},e.prototype.onDragEndHandler=function(t,e,i){if(this._tapTracker){var o=this._form;if(i||o.canSwipeCommit()||(i=!0),this._tapTracker instanceof yd){var r=this._form._bodyView2;if(r.visible){var n=o.width;this._swipePrev=this._swipeStarted=lt.getTimer(),this._swipeAmount=0,this._swipeDelta=i?0:o.canSwipe(r.x),this._swipeDelta>0||this._swipeDelta<0?(this._swipeDistance=r.x,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50)):r.x>0?(this._swipeDistance=-(n-r.x),this._swipeDuration=120,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50)):r.x<0&&(this._swipeDistance=n+r.x,this._swipeDuration=120,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50))}}this._tapTracker.end(i),this._tapTracker=null}},e.prototype.onSwipeHandler=function(t,e,i,o){var r=this.form,n=(this._form.width,this._form._bodyView2);this._swipePrev=this._swipeStarted=lt.getTimer(),this._swipeAmount=0;var s=this._touchManager._events,a=s[s.length-1],l=o.timeStamp-a.t;if(!r.canSwipeCommit()||!r.canSwipe(n.x)&&l>300)return!1;if("left"===i||"right"===i)for(var h=Math.sign(s[0].x-s[1].x),u=1,c=s.length;u<c-1;u++)if(h!==Math.sign(s[u].x-s[u+1].x))return!1;switch(this._startDragTracker&&(this._tapTracker.end(!0),this._tapTracker=null),this._swipeDelta=1,i){case"right":this._swipeDelta=-1;case"left":this._swipeDistance=n.x,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollBody.bind(this),50);break;case"bottom":this._swipeDelta=-1;case"top":this._swipeDistance=this._swipeDelta*e,this._swipeDuration=200,this._swipeTimer=setInterval(this.$_scrollRow.bind(this),50)}return!0},e.prototype.$_scrollBody=function(){var t=this.form,e=t.container.gridView,i=lt.getTimer();if(i-this._swipeStarted<this._swipeDuration){var o=i-this._swipePrev,r=Math.floor((this._swipeDistance-this._swipeAmount)*o/this._swipeDuration);this._swipeAmount-=Math.abs(r),this._swipePrev=i,t._bodyView2.x-=r}else if(clearInterval(this._swipeTimer),t._bodyView2.visible&&(t._bodyView2.visible=!1,t._bodyView._dom.style.opacity="",this._focusMask._dom.style.opacity="",0!=this._swipeDelta)){var n=e.getItem(t.currentRow),s=this._swipeDelta>0?e.getNextRow(n):e.getPrevRow(n);s.index!=t.currentRow&&(t.container.gridView.commit(!0,!0),t.currentRow=s?s.index:-1)}},e.prototype.$_scrollRow=function(){this.form;var t=lt.getTimer();if(t-this._swipeStarted<this._swipeDuration){var e=t-this._swipePrev,i=Math.floor((this._swipeDistance-this._swipeAmount)*e/this._swipeDuration);this._swipeAmount-=i,this._swipePrev=t,this.form.topPos+=i}else clearInterval(this._swipeTimer)},e.prototype.$_createTouchManager=function(t){var e=new hh(t);return e.touchHandler=this.onTouch.bind(this),e.tapHandler=this.onTap.bind(this),e.doubleTapHandler=this.onDoubleTapHandler.bind(this),e.longTapHandler=this.onLongTapHandler.bind(this),e.dragStartHandler=this.onDragStartHandler.bind(this),e.dragHandler=this.onDragHandler.bind(this),e.dragEndHandler=this.onDragEndHandler.bind(this),e.swipeHandler=this.onSwipeHandler.bind(this),e},e}(Fa),pd=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"x",{get:function(){return this._x},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this._y},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this._offset},enumerable:!0,configurable:!0}),e.prototype.init=function(t,e,i){return this._x=t,this._y=e,this._offset=i,this},Object.defineProperty(e.prototype,"cursor",{get:function(){return"col-resize"},enumerable:!0,configurable:!0}),e}(function(t){function e(e){var i=t.call(this)||this;return i._form=e,i}return o(e,t),e.prototype._doDispose=function(){this._form=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"form",{get:function(){return this._form},enumerable:!0,configurable:!0}),e}(Na)),_d=function(t){function e(e,i){var o=t.call(this,e.form,"formColumnResizeTracker")||this;return o._request=e,o._feedback=i,o._start=e.x+e.offset-o.form.labelWidth,o._offset=e.offset,o}return o(e,t),e.prototype._doDispose=function(){try{this.form.removeFeedbackElement(this._feedback)}catch(t){}this._request=null,this._feedback=null,t.prototype._doDispose.call(this)},e.prototype._doStart=function(t,e,i,o){var r=this._form._footerView.y;return this._feedback.resize(2,r-0),this._feedback.move(e-this._offset,0),this.form.addFeedbackElement(this._feedback),!0},e.prototype._doDrag=function(t,e,i){var o=this._form.options.minLabelWidth;this._form.labelWidth;return(e-=this._offset)>=this._start+o&&e<this._start+1e6&&(this._feedback.x=e,!0)},e.prototype._doEnded=function(){var t=this._feedback.x-this._start;this.form.removeFeedbackElement(this._feedback),this.form.labelWidth=t,this.form.container.setCursor("default")},e}(function(t){function e(e,i){var o=t.call(this,e.container,i)||this;return o._form=e,o}return o(e,t),e.prototype._doDispose=function(){this._form=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"form",{get:function(){return this._form},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"startWhenCreated",{get:function(){return!1},enumerable:!0,configurable:!0}),e}(La)),fd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delta=0,e}return o(e,t),e.prototype._getCssSelector=function(){return this.delta>0?"rg-form-swipe-left":"rg-form-swipe-right"},e}(Rs),gd=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.delta=0,e}return o(e,t),e.prototype._getCssSelector=function(){return this.delta>0?"rg-form-end-right":"rg-form-end-left"},e}(Rs),yd=function(t){function e(e,i){var o=t.call(this)||this;return o._tapX=NaN,o._tapY=NaN,o._vertical=!0,o._moving=!1,o._ending=-1,o._form=e,o._focusMask=i,o._body=e._bodyView,o._body2=e._bodyView2,o._swipeMarker=new fd(i.doc,"swipeMarker"),o._endMakrer=new gd(i.doc,"endMarker"),o}return o(e,t),e.prototype._doDispose=function(){try{this._form.removeFeedbackElement(this._swipeMarker),this._form.removeFeedbackElement(this._endMakrer)}catch(t){}this._form=null,this._focusMask=null,this._body=null,this._body2=null,this._swipeMarker=this._swipeMarker.dispose(),this._endMakrer=this._endMakrer.dispose(),t.prototype._doDispose.call(this)},e.prototype._doStart=function(t,e,i,o){var r=this._form,n=r.container.gridView,s=i-t,a=o-e;if(r.$_commitEditor(),this._vertical=Math.abs(a)>=Math.abs(s),this._moving=!1,this._vertical);else if(0!=s&&r.canSwipeCommit()){var l=r.currentRow,h=n.rowCount;if(s>0&&(0==h||0==l))this._ending=-1;else if(s<0&&(0==h||n.getLastRow().index==l))this._ending=1;else{var u=this._body.x,c=this._body.width;s>0?u-=c-s:u+=c+s,this._body._dom.style.opacity="0.5",this._focusMask._dom.style.opacity="0.1";var d=this._form._layoutInfo,p=n.getItem(l);s>0?(p=n.getPrevRow(p),d.gridRow=p.index):(p=n.getNextRow(p),d.gridRow=p.index),this._body2.setBounds(u,this._body.y,c,this._body.height),this._body2.layoutContent(d),this._body2.visible=!0,d.gridRow=l,this._moving=!0}}return this._tapX=i,this._tapY=o,!0},e.prototype._doDrag=function(t,e,i,o){var r=this._form,n=i-t,s=o-e;if(this._vertical)r.topPos-=s;else if(this._moving){var a=this._swipeMarker,l=r.canSwipe(this._body2.x);if(0!=l){var h=r.width,u=r.height;a.delta=l,a.resetStyleName(),a.setBounds((h-80)/2,(u-80)/2,80,80),a.applyBounds(),r.addFeedbackElement(a)}else r.removeFeedbackElement(a);this._body2.x+=n}else if(0!=this._ending){a=this._endMakrer,h=.12*(u=r.height);var c=this._ending<0?0:r.width-h;a.delta=this._ending,a.resetStyleName(),a.setBounds(c,0,h,u),a.applyBounds(),r.addFeedbackElement(a)}return!0},e.prototype._doEnd=function(){this._moving?this._form.removeFeedbackElement(this._swipeMarker):this._form.removeFeedbackElement(this._endMakrer)},e}(nd),md=function(t){function e(e){var i=t.call(this)||this;return i._form=e,i}return o(e,t),e.prototype._doDispose=function(){this._form=null,t.prototype._doDispose.call(this)},e.prototype._doStart=function(t,e,i,o){var r=this._form;r.container.gridView;return r.$_commitEditor(),!0},e.prototype._doDrag=function(t,e,i,o){var r=o-e;return this._form.topPos+=r,!0},e.prototype._doEnd=function(){},e}(nd),bd=function(t){function e(){var e=t.call(this)||this;return e._output=void 0,e._html="",e._parser=new vr,e.template="<span>${value}</span>",e}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"template",{get:function(){return this._parser.template},set:function(t){t!=this._parser.template&&(this._parser.template=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"output",{get:function(){return this._output},set:function(t){this._output=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueCallback",{get:function(){return this._valueCallback},set:function(t){t!==this._valueCallback&&(this._valueCallback=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype.renderFormCell=function(t,e){this.$_setHtml(this._parser.realizeForm(t,e,this._valueCallback))},Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),e.prototype.$_setHtml=function(t){t!=this._html&&(this._html=t,this._dom.innerHTML=t)},e.TYPE="formHtml",e}(ir),vd=function(t){function e(e){var i=t.call(this)||this;return i._modal=!1,i._modalPadding="10%",i._modalOpacity=.15,i._autoClose=!1,i._editable=!0,i._itemResizable=!0,i._minLabelWidth=60,i._focusVisible=!0,i._scrollBarWidth=9,i._commitWhenSwipe=!1,i._enterToNextCell=!0,i._editWhenFocused=!0,i._checkBarSync=!0,i._saveLabel="Save",i._cancelLabel="Cancel",i._fieldLabel="Field",i._valueLabel="Value",i._padTopP=10,i._padBottomP=10,i._padLeftP=10,i._padRightP=10,i._padTop=NaN,i._padBottom=NaN,i._padLeft=NaN,i._padRight=NaN,i._owner=e,i}return o(e,t),Object.defineProperty(e.prototype,"modal",{get:function(){return this._modal},set:function(t){t!=this._modal&&(this._modal=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modalPadding",{get:function(){return this._modalPadding},set:function(t){if(t!=this._modalPadding){if(this._modalPadding=t,this._padTop=this._padBottom=this._padLeft=this._padRight=0,this._padTopP=this._padBottomP=this._padLeftP=this._padRightP=NaN,t){var e,i=t.split(/\s+/),o=i.length;if(o>0)"%"==(e=i[0]).charAt(e.length-1)?this._padTopP=parseFloat(e):this._padTop=lt.toFloat(e);if(o>1)"%"==(e=i[1]).charAt(e.length-1)?this._padRightP=parseFloat(e):this._padRight=lt.toFloat(e);if(o>2)"%"==(e=i[2]).charAt(e.length-1)?this._padBottomP=parseFloat(e):this._padBottom=lt.toFloat(e);if(i.length>3)"%"==(e=i[3]).charAt(e.length-1)?this._padLeftP=parseFloat(e):this._padLeft=lt.toFloat(e);3==i.length&&(this._padLeftP=this._padRightP,this._padLeft=this._padRight),2==i.length&&(this._padBottomP=this._padTopP,this._padBottom=this._padTop,this._padLeftP=this._padRightP,this._padLeft=this._padRight),1==i.length&&(this._padRightP=this._padBottomP=this._padLeftP=this._padTopP,this._padRight=this._padBottom=this._padLeft=this._padTop)}this._changed()}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"modalOpacity",{get:function(){return this._modalOpacity},set:function(t){this._modalOpacity=Math.max(0,Math.min(1,t))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"autoClose",{get:function(){return this._autoClose},set:function(t){this._autoClose=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editable",{get:function(){return this._editable},set:function(t){this._editable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"itemResizable",{get:function(){return this._itemResizable},set:function(t){t!=this._itemResizable&&(this._itemResizable=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minLabelWidth",{get:function(){return this._minLabelWidth},set:function(t){(t=Math.max(0,t))!=this._minLabelWidth&&(this._minLabelWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusVisible",{get:function(){return this._focusVisible},set:function(t){t!=this._focusVisible&&(this._focusVisible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scrollBarWidth",{get:function(){return this._scrollBarWidth},set:function(t){(t=Math.max(0,t))!=this._scrollBarWidth&&(this._scrollBarWidth=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitWhenSwipe",{get:function(){return this._commitWhenSwipe},set:function(t){this._commitWhenSwipe=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterToNextCell",{get:function(){return this._enterToNextCell},set:function(t){this._enterToNextCell=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"editWhenFocused",{get:function(){return this._editWhenFocused},set:function(t){this._editWhenFocused=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkBarSync",{get:function(){return this._checkBarSync},set:function(t){t!=this._checkBarSync&&(this._checkBarSync=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"saveLabel",{get:function(){return this._saveLabel},set:function(t){t!=this._saveLabel&&(this._saveLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelLabel",{get:function(){return this._cancelLabel},set:function(t){t!=this._cancelLabel&&(this._cancelLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"fieldLabel",{get:function(){return this._fieldLabel},set:function(t){t!==this._fieldLabel&&(this._fieldLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueLabel",{get:function(){return this._valueLabel},set:function(t){t!==this._valueLabel&&(this._valueLabel=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"commitCallback",{get:function(){return this._commitCallback},set:function(t){this._commitCallback=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelCallback",{get:function(){return this._cancelCallback},set:function(t){this._cancelCallback=t},enumerable:!0,configurable:!0}),e.prototype.setModalPadding=function(t,e,i,o){this.modalPadding=t+" "+(e||"")+" "+(i||"")+" "+(o||"")},e.prototype.padRect=function(t){isNaN(this._padLeftP)?t.leftBy(this._padLeft):t.leftBy(Math.floor(this._padLeftP*t.width/100)),isNaN(this._padRightP)?t.rightBy(this._padRight):t.rightBy(-Math.floor(this._padRightP*t.width/100)),isNaN(this._padTopP)?t.topBy(this._padTop):t.topBy(Math.floor(this._padTopP*t.height/100)),isNaN(this._padBottomP)?t.bottomBy(this._padBottom):t.bottomBy(-Math.floor(this._padBottomP*t.height/100))},e.prototype._changed=function(){this._owner&&this._owner.invalidateLayout()},e}(ft),wd=function(){},Cd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return"rg-form-marquee"},e.prototype._doDraw=function(t){},e}(Os),xd=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doDraw=function(t){},e.prototype._changed=function(){},e}(Os),Id=function(t){function e(e){return t.call(this,e,"formScrollBar")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return"rg-form-scrollbar"},e}(xd),Ed=function(t){function e(e,i,o){var r=t.call(this,e,o)||this;return r._model=i,r}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formView",{get:function(){var t=this.parent;do{if(t instanceof Dd)return t;t=t.parent}while(t)},enumerable:!0,configurable:!0}),e.prototype.measure=function(t,e,i){return this.resetStyleName(),this._doMeasure(t,e,i)},e.prototype.layoutContent=function(t){lt.isMobile()?this._doLayoutMobile(t,this.width,this.height):this._doLayoutContent(t,this.width,this.height)},e.prototype._getCssSelector=function(){return this._model.styleName},e.prototype._doLayoutMobile=function(t,e,i){this._doLayoutContent(t,e,i)},e.prototype._changed=function(){},e}(Rs),Sd=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.updateContent=function(t,e){this._doUpdateContent(t,e)},e.prototype._getCssSelector=function(){return"rg-form-cell"},e.prototype._changed=function(){},e.prototype._doUpdateContent=function(t,e){},e.prototype._doDraw=function(t){},e}(Os),Od=(function(t){function e(e){return t.call(this,e)||this}o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._changed=function(){}}(Os),function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.getValue=function(){var t,e=this._column.dataIndex;if(e>=0)return null===(t=this.$_getItem())||void 0===t?void 0:t.getData(e)},e.prototype.getBlankState=function(){return g.NONE},e.prototype.isValueChanged=function(){var t,e=this._column.dataIndex;return e>=0&&(null===(t=this.$_getItem())||void 0===t?void 0:t.isChanged(e))},e.prototype.getDisplayText=function(t,e){return Mo._getDisplayText(t,this.$_getItem(),this._column,this.getValue(),e)},e.prototype.$_getItem=function(){return this._column.grid.getItem(this.index.itemIndex)},e}(Mo)),Rd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(Hn),Dd=function(t){function e(e,i){var o=t.call(this,e.doc)||this;o._topPos=0,o._labelWidth=120,o._currentRow=-1,o._valueWidth=0,o._needEditor=!1,o._layout=new Fd(null),o._editIndex=-1,o._saveRow=-1,o._cellRect=new N;var r=e.doc;o._container=e;var n=o._model=new Yc;return o._options=new vd(o),i&&o._options.assignFrom(i),o.addChild(o._headerView=new Td(r,n.header)),o.addChild(o._bodyContainer=new Rs(r)),o._bodyContainer._dom.style.overflow="hidden",o._bodyContainer.addChild(o._bodyView=o._bodyView1=new Nd(r,n.body)),o._bodyContainer.addChild(o._bodyView2=new Nd(r,n.body)),o._bodyView2.visible=!1,o._bodyView2._dom.style.background="white",o._bodyView2._dom.style.borderLeft="1px solid gray",o._bodyView2._dom.style.borderRight="1px solid gray",o.addChild(o._footerView=new Md(r,n.footer)),o.addChild(o._feedbackLayer=new Rs(r,"feedbackLayer")),o.addChild(o._scrollBar=new Id(r)),o._layoutInfo=new wd,o._dataCell=new Od,o._literalCell=new Fo,o._seriesCell=new No,o._rowRuntime=new So,o._cellRuntime=new Oo,o.visible=!1,o}return o(e,t),e.prototype._doDispose=function(){this._dataCell=this._dataCell.dispose(),this._literalCell=this._literalCell.dispose(),this._seriesCell=this._seriesCell.dispose(),this._rowRuntime=this._rowRuntime.dispose(),this._cellRuntime=this._cellRuntime.dispose(),this._options=this._options.dispose(),t.prototype._doDispose.call(this)},e.prototype.getColumnObject=function(t){var e=this.container.gridView;return e&&e.columnByName(t)},e.prototype.getDataFieldIndex=function(t){var e=this.container.gridView;return e&&e.dataSource?e.dataSource.getFieldIndex(t):-1},e.prototype.getEditItem=function(t){return t.getItem(this._currentRow)},e.prototype.canWrite=function(t){return!0},e.prototype.getEditor=function(t){if(t instanceof Rd)return t.formItem.editor},e.prototype.getEditBounds=function(t,e){var i=this._bodyView,o=this._model.getItem(this._editIndex),r=i.boundsByContainer(i.getValueCellRect(o)),n=i.bodyCellAt(o),s=(t.native?0:n.editWidth)+n.buttonWidth+n.errorWidth;return r.width-=this.$_getScrollBarWidth(),s>0&&r.width>s+10&&(r.width-=s+10,r.width<0&&(r.width+=s+10)),r.width=Math.max(0,r.width),r},e.prototype.isEditing=function(){return this._editIndex>=0},e.prototype.isItemEditing=function(){return this.container.gridView.isItemEditing()},e.prototype.validateCellCommit=function(t,e){},e.prototype.makeCellVisible=function(t){return!0},e.prototype.editCellCommit=function(t,e,i){return this.invalidateLayout(),!0},e.prototype.editorChange=function(t,e,i){},e.prototype.editorShow=function(t){this._selectionTool.resetFocused()},e.prototype.editorHide=function(t){this._editIndex=-1,this._selectionTool.resetFocused()},e.prototype.itemUpdateStarted=function(t,e){this._saveRow=this._currentRow,this.invalidateLayout()},e.prototype.itemAppendStarted=function(t,e){this._saveRow=this._currentRow,this._currentRow=e.index,this.invalidateLayout()},e.prototype.itemInsertStarted=function(t,e){this._saveRow=this._currentRow,this._currentRow=e.index,this.invalidateLayout()},e.prototype.itemCommited=function(t,e){this.invalidateLayout()},e.prototype.itemCanceled=function(t){this._currentRow=this._saveRow,this.invalidateLayout()},e.prototype.itemInserted=function(t,e){this._currentRow=e.index,this.invalidateLayout()},e.prototype.itemsChanged=function(t){this.invalidateLayout()},Object.defineProperty(e.prototype,"container",{get:function(){return this._container},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delegate",{get:function(){return this._delegate},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"model",{get:function(){return this._model},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dataSource",{get:function(){var t=this.container.gridView;return t&&t.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerView",{get:function(){return this._headerView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerView",{get:function(){return this._footerView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"topPos",{get:function(){return this._topPos},set:function(t){(t=Math.max(0,t))!=this._topPos&&(this._topPos=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"labelWidth",{get:function(){return this._labelWidth},set:function(t){(t=Math.max(0,t))!=this._labelWidth&&(this._labelWidth=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueWidth",{get:function(){return this._valueWidth},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentRow",{get:function(){return this._currentRow},set:function(t){t!==this._currentRow&&(this.$_commitEditor(),this._currentRow=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusedItem",{get:function(){return this._focusedItem},set:function(t){if(t!=this._focusedItem){var e=this._focusedItem;this.$_commitEditor();var i=this._focusedItem=t;if(this._selectionTool.focusedChanged(e,t),this.$_focusedChanged(e,t),this.$_makeCellVisible(i),i instanceof od){var o=this.container.gridView,r=this.$_getIndex(i),n=i._columnObj.isWritable();o._editController._needPrepare=!0,o._editController.prepareEditor(r),this._options.editWhenFocused&&n&&(this._editIndex=i.vindex,this._needEditor=!0,this.showEditor(this.focusedIndex))}}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"focusedIndex",{get:function(){return this._focusedItem?this._focusedItem.vindex:-1},set:function(t){var e=this.model;t>=0&&e.itemCount>0?(t=Math.min(t,e.itemCount-1),this.focusedItem=lt.cast(e.getItem(t),ed)):this.focusedItem=null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bodyView",{get:function(){return this._bodyView},enumerable:!0,configurable:!0}),e.prototype.getHandler=function(){return this},e.prototype.invalidateLayout=function(){this.visible&&this._container.invalidateLayout()},e.prototype.addFeedbackElement=function(t){if(t&&!this._feedbackLayer.contains(t))return this._feedbackLayer.addChild(t),!0},e.prototype.removeFeedbackElement=function(t){var e=this._feedbackLayer.indexOf(t);return e>=0&&(this._feedbackLayer.removeChildAt(e),!0)},e.prototype.canSwipeCommit=function(){return!(this.isItemEditing()&&!this._options.commitWhenSwipe)},e.prototype.canSwipe=function(t){var e=this.width;return t>0&&t<.6*e?1:t<0&&t+e>.4*e?-1:0},e.prototype.$_getIndex=function(t){var e=this.container.gridView,i=t._columnObj,o=new Rd;return o.assign(e.getIndex(this.currentRow,i)),o.layout=this._layout.setColumn(e,i),o.formItem=t,o},e.prototype.showEditor=function(t){var e,i=this.container.gridView,o=this._model.getItem(t);if(o instanceof od){var r=this.$_getIndex(o);if(null===(e=o._columnObj)||void 0===e?void 0:e.isWritable())return this._editIndex=t,i.showEditor(r)}},e.prototype.showList=function(t){var e,i=this.container.gridView,o=this._model.getItem(t);if(o instanceof od){var r=this.$_getIndex(o);if(null===(e=o._columnObj)||void 0===e?void 0:e.isWritable())return this._editIndex=t,i.showEditList(r)}},e.prototype.deleteRow=function(){var t=this;setTimeout((function(){t.$_deleteRow()}),0)},e.prototype.appendRow=function(){this.$_appendRow()},e.prototype.addBodyElement=function(t){return this._bodyContainer.addChild(t)},e.prototype.removeBodyElement=function(t){return this._bodyContainer.removeChild(t)},e.prototype.close=function(){this.visible&&(this.visible=!1)},e.prototype.editorButtonClicked=function(t){var e=this.container.gridView,i=this._model.getItem(t);if(i instanceof od){var o=this.$_getIndex(i);this._editIndex=i.vindex,e._editController.buttonClicked(o)}},e.prototype.setModel=function(t){this.model.load(t)},Object.defineProperty(e.prototype,"isLayer",{get:function(){return!1},enumerable:!0,configurable:!0}),e.prototype._getCssSelector=function(){return this._options.modal?e.STYLE_MODAL:e.STYLE_NAME},e.prototype._doActivateView=function(){var t=this._container.gridView.focusedItem;t instanceof oo&&(t=t.firstDataItem),this.currentRow=t?t.index:-1,this._container.activeTool=this._selectionTool,this._container.gridView.editorLender=this},e.prototype._dodDeactivateView=function(){this._container.gridView.hideEditor(),this._container.gridView.editorLender=null},e.prototype._visibleChanged=function(){this.visible,this.container.invalidateLayout()},e.prototype.$_initialzie=function(){this._selectionTool=new dd(this._container)},e.prototype.$_prepareRender=function(t){},e.prototype.$_layout=function(t,e){var i,o,r=e.x,n=e.y,s=e.width,a=e.height,l=this._model,h=this._options,u=this._layoutInfo;if(this._delegate=t,this._model.$_prepareLayout(),u.form=l,u.formView=this,u.columnBinder=this,u.gridRow=this._currentRow,u.items=l._visibleItems,u.labelWidth=this.labelWidth,u.valueWidth=this._valueWidth=e.width-u.labelWidth,((i=this._headerView).visible=i.model.visible)&&(o=i.measure(u,s,a),i.setBounds(r,n,s,o.height),i.layoutContent(u),a-=o.height,n+=o.height),((i=this._footerView).visible=i.model.visible)&&(o=i.measure(u,s,a),i.setBounds(r,e.bottom-o.height,o.width,o.height),i.layoutContent(u),a-=o.height),this._bodyContainer.setBounds(r,n,s,a),this._bodyView2.visible=!1,(i=this._bodyView).visible=u.gridRow>=0){i._dom.style.opacity="",i.measure(u,s,a),i.layoutContent(u);var c=i._dom.offsetHeight,d=this._topPos=Math.max(0,Math.min(c-a,this._topPos));i.setBounds(0,-d,s,c);var p=this._scrollBar;if(p.visible=c>a){var _=h.scrollBarWidth,f=c,g=a,y=Math.max(0,f-g),m=Math.min(a,Math.max(20,a*g/f)),b=Math.min(a-m,Math.max(0,(a-m)*(this._topPos/y)));p.setBoundsI(r+s-_-2,n+b,_,m)}this._selectionTool.$_resetFocusView(),this._needEditor&&(this._needEditor=!1),this.container.gridView._editController.resetEditor(!1)}},e.prototype.$_getScrollBarWidth=function(){return this._scrollBar.visible?this._scrollBar.width:0},e.prototype._changed=function(){},e.prototype.$_getGridCell=function(t,e){var i,o=t._columnObj;return o instanceof mn?(i=this._dataCell)._column=o:i=o instanceof bn?this._seriesCell:o instanceof Fo?this._literalCell:this._dataCell,i.setIndex2(this.container.gridView,e,o),i},e.prototype.$_elementClicked=function(t){return!!this._footerView.$_elementClicked(t)},e.prototype.$_focusedChanged=function(t,e){this._bodyView.$_focusedChanged(t?t.vindex:-1,e?e.vindex:-1)},e.prototype.$_commitEditor=function(){this.container.gridView.isEditing()&&this.container.gridView.commitEditor(!0)},e.prototype.$_deleteRow=function(){var t=this.container.gridView,e=t.getItem(this._currentRow);e&&t.$_deleteSelection(e)},e.prototype.$_appendRow=function(){this.container.gridView.append()},e.prototype.$_isScrollBar=function(t){return this._scrollBar._dom===t},e.prototype.$_makeCellVisible=function(t){var e=this.topPos,i=this._bodyView.getValueCellRect(t,this._cellRect);i.y<e?this.topPos=i.y:i.bottom>=e+this._bodyContainer.height&&(this.topPos+=i.bottom-(e+this._bodyContainer.height))},e.STYLE_NAME="rg-form-root rg-form",e.STYLE_MODAL="rg-form-root rg-form rg-form-modal",e}(Ds),kd=function(t){function e(e,i){void 0===i&&(i=!1);var o=t.call(this,e)||this;return o._right=i,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return this._right?t.prototype._getCssSelector.call(this)+" rg-form-cell-right":t.prototype._getCssSelector.call(this)},e.prototype._createDom=function(i){var o=t.prototype._createDom.call(this,i),r=this._div=i.createElement("div");return this._div.className=e.STYLE_NAME,o.appendChild(r),this._span=i.createElement("span"),r.appendChild(this._span),o},e.prototype._doAttached=function(t){},e.prototype._doUpdateContent=function(t,e){this._span.textContent=e||t.displayText},e.STYLE_NAME="rg-form-header-cell",e}(Sd),Pd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getCssSelector=function(){return""},e.prototype._createDom=function(e){var i=t.prototype._createDom.call(this,e),o=e.createElement("span");return i.appendChild(o),o.className="rg-form-close",i},e.prototype.isDom=function(e){return e===this._dom.firstElementChild||t.prototype.isDom.call(this,e)},e.prototype._doDraw=function(t){},e}(Os),Td=function(t){function e(e,i){var o=t.call(this,e,i,"headerView")||this;return o._labelCell=new kd(e),o.addChild(o._labelCell),o._valueCell=new kd(e,!0),o.addChild(o._valueCell),o._closeView=new Pd(e),o.addChild(o._closeView),o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype.isClose=function(t){return this._closeView.isDom(t)},e.prototype._doMeasure=function(t,e,i){var o=this.model;return As.create(e,o.height)},e.prototype._doLayoutContent=function(t,e,i){var o=this.model,r=t.formView.options;this._labelCell.setBounds(0,0,t.labelWidth,i),this._labelCell.updateContent(o.labelCell,r.fieldLabel),this._valueCell.setBounds(t.labelWidth,0,t.valueWidth,i),this._valueCell.updateContent(o.valueCell,r.valueLabel),this._closeView.setBounds(0,0,i,i),this._closeView.visible=!this.formView.isItemEditing()},e.prototype._doDraw=function(t){},e}(Ed),Md=function(t){function e(e,i){var o=t.call(this,e,i,"footerView")||this;return o._editMode=!1,o._menuEnabled=!0,o._posVisible=!0,o._firstVisible=!0,o._prevVisible=!0,o._nextVisible=!0,o._lastVisible=!0,o._firstEnabled=!0,o._prevEnabled=!0,o._nextEnabled=!0,o._lastEnabled=!0,o._commitVisible=!0,o._cancelVisible=!0,o._checkEnabled=!0,o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"editMode",{get:function(){return this._editMode},set:function(t){t!=this._editMode&&(this._editMode=t,this.invalidateLayout())},enumerable:!0,configurable:!0}),e.prototype.isCheck=function(t){return t==this._checkView},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),this.$_createElements(e)},e.prototype._doMeasure=function(t,e,i){var o=this.model;return As.create(e,o.height)},e.prototype._doLayoutContent=function(t,e,i){var o,r=this.formView,n=r.container.gridView,s=r.options,a=r.currentRow;this._currView.textContent=a+1+"",this._totalView.textContent=n.itemCount+"",this._headView.style.left="0px",this._headView.style.top="0px",this._headView.style.height=i+"px";var l=(i-this._menuView.offsetHeight)/2;this._menuView.style.top=l+"px",this._footView.style.right="0px",this._footView.style.top="0px",this._footView.style.height=i+"px",l=(i-this._checkView.offsetHeight)/2,this._checkView.style.right="0px",this._checkView.style.top=l+"px",r.options.checkBarSync?this._checkView.style.visibility=n.checkBar.visible?"":"hidden":this._checkView.style.visibility="",this._cancelLabel.textContent=s.cancelLabel||"Cancel",this._commitLabel.textContent=s.saveLabel||"Save";var h=this._checkView.offsetWidth+30;l=(i-this._cancelLabel.offsetHeight)/2+1,this._cancelLabel.style.right=h+"px",this._cancelLabel.style.top=l+"px",h+=this._cancelLabel.offsetWidth+5,l=(i-this._cancelView.offsetHeight)/2,this._cancelView.style.right=h+"px",this._cancelView.style.top=l+"px",h+=this._cancelView.offsetWidth+16,l=(i-this._commitLabel.offsetHeight)/2+1,this._commitLabel.style.right=h+"px",this._commitLabel.style.top=l+"px",h+=this._commitLabel.offsetWidth+5,l=(i-this._commitView.offsetHeight)/2,this._commitView.style.right=h+"px",this._commitView.style.top=l+"px",o=this._posView.offsetWidth,l=(i-this._posView.offsetHeight)/2+1;var u=(e-o)/2,c=u+o;this._posView.style.left=u+"px",this._posView.style.top=l+"px",h=u-8,this._leftView.style.top="0px",this._leftView.style.height="100%",this._leftView.style.left=h+"px",h=8,l=(i-this._prevView.offsetHeight)/2,this._prevView.style.right=h+"px",this._prevView.style.top=l+"px",h+=this._prevView.offsetWidth+8,l=(i-this._firstView.offsetHeight)/2,this._firstView.style.right=h+"px",this._firstView.style.top=l+"px",this._rightView.style.top="0px",this._rightView.style.height="100%",c+=8,this._rightView.style.left=c+"px",h=8,l=(i-this._nextView.offsetHeight)/2,this._nextView.style.left=h+"px",this._nextView.style.top=l+"px",h+=this._nextView.offsetWidth+8,l=(i-this._lastView.offsetHeight)/2,this._lastView.style.left=h+"px",this._lastView.style.top=l+"px",this.invalidate()},e.prototype._doDraw=function(t){var e=this.formView,i=e.container.gridView,o=e.currentRow,r=i.getItem(o),n=i.isItemEditing(r),s=i.getFirstRow()!==r;s!=this._firstEnabled&&(this._firstEnabled=s,this._firstView.style.opacity=s?"":"0.3"),s!=this._prevEnabled&&(this._prevEnabled=s,this._prevView.style.opacity=s?"":"0.3"),(s=i.getLastRow()!==r)!=this._lastEnabled&&(this._lastEnabled=s,this._lastView.style.opacity=s?"":"0.3"),s!=this._nextEnabled&&(this._nextEnabled=s,this._nextView.style.opacity=s?"":"0.3");var a=!n;a!=this._firstVisible&&(this._firstVisible=a,this._firstView.style.opacity=a?"":"0"),a!=this._prevVisible&&(this._prevVisible=a,this._prevView.style.opacity=a?"":"0"),a!=this._lastVisible&&(this._lastVisible=a,this._lastView.style.opacity=a?"":"0"),a!=this._nextVisible&&(this._nextVisible=a,this._nextView.style.opacity=a?"":"0"),a!=this._posVisible&&(this._posVisible=a,this._posView.style.opacity=a?"":"0"),(a=n)!=this._commitVisible&&(this._commitVisible=a,this._commitView.style.opacity=a?"":"0",this._commitLabel.style.opacity=a?"":"0",this._commitView.style.pointerEvents=a?"":"none",this._commitLabel.style.pointerEvents=a?"":"none"),a!=this._cancelVisible&&(this._cancelVisible=a,this._cancelView.style.opacity=a?"":"0",this._cancelLabel.style.opacity=a?"":"0",this._cancelView.style.pointerEvents=a?"":"none",this._cancelLabel.style.pointerEvents=a?"":"none"),r&&(s=r.checked)!=this._checkEnabled&&(this._checkEnabled=s,this._checkView.style.opacity=s?"":"0.3")},e.prototype.$_createElements=function(t){var e=nt(t);t.appendChild(this._posView=this.$_createPosition(e)),t.appendChild(this._leftView=this.$_createLeft(e)),t.appendChild(this._rightView=this.$_createRight(e)),t.appendChild(this._headView=this.$_createHead(e)),t.appendChild(this._footView=this.$_createFoot(e))},e.prototype.$_setIconStyle=function(t){var e=t.style;return e.position="absolute",e.display="inline-block",t},e.prototype.$_createHead=function(t){var e=t.createElement("div");return e.className="rg-footer-form-head",e.style.position="absolute",e.appendChild(this._menuView=this.$_setIconStyle(t.createElement("span"))),this._menuView.className="rg-form-menu",e},e.prototype.$_createFoot=function(t){var e=t.createElement("div");return e.className="rg-footer-form-foot",e.style.position="absolute",e.appendChild(this._checkView=this.$_setIconStyle(t.createElement("span"))),this._checkView.className="rg-form-check",e.appendChild(this._cancelView=this.$_setIconStyle(t.createElement("span"))),this._cancelView.className="rg-form-cancel",e.appendChild(this._cancelLabel=this.$_setIconStyle(t.createElement("span"))),this._cancelLabel.className="rg-form-label",this._cancelLabel.textContent="Cancel",e.appendChild(this._commitView=this.$_setIconStyle(t.createElement("span"))),this._commitView.className="rg-form-commit",e.appendChild(this._commitLabel=this.$_setIconStyle(t.createElement("span"))),this._commitLabel.className="rg-form-label",this._commitLabel.textContent="Save",e},e.prototype.$_createPosition=function(t){var e=t.createElement("div");return e.style.position="absolute",e.appendChild(this._currView=t.createElement("span")),this._currView.className="rg-form-position rg-form-position-current",this._currView.textContent="0",e.appendChild(this._slashView=t.createElement("span")),this._slashView.className="rg-form-position rg-form-position-slash",this._slashView.textContent="/",e.appendChild(this._totalView=t.createElement("span")),this._totalView.className="rg-form-position rg-form-position-total",this._totalView.textContent="0",e},e.prototype.$_createLeft=function(t){var e=t.createElement("div");return e.style.position="absolute",e.appendChild(this._firstView=this.$_setIconStyle(t.createElement("span"))),this._firstView.className="rg-form-first",e.appendChild(this._prevView=this.$_setIconStyle(t.createElement("span"))),this._prevView.className="rg-form-prev",e},e.prototype.$_createRight=function(t){var e=t.createElement("div");return e.style.position="absolute",e.appendChild(this._lastView=this.$_setIconStyle(t.createElement("span"))),this._lastView.className="rg-form-last",e.appendChild(this._nextView=this.$_setIconStyle(t.createElement("span"))),this._nextView.className="rg-form-next",e},e.prototype.$_elementClicked=function(t){var e,i=this.formView,o=i.model,r=i.container.gridView,n=i.currentRow;try{if(t===this._menuView&&this._menuEnabled){var s=o.footer.getPopupMenuName(r);s?r.popupMenuManager.show(s,t,null):i.visible=!1}else if(t===this._firstView&&this._firstEnabled)e=r.getFirstRow(),i.currentRow=e.index;else if(t===this._lastView&&this._lastEnabled)e=r.getLastRow(),i.currentRow=e.index;else if(t===this._prevView&&this._prevEnabled)e=r.getPrevRow(r.getItem(n)),i.currentRow=e.index;else if(t===this._nextView&&this._nextEnabled)e=r.getNextRow(r.getItem(n)),i.currentRow=e.index;else if(t!=this._commitLabel&&t!=this._commitView||!this._commitVisible){if(t!=this._cancelLabel&&t!=this._cancelView||!this._cancelVisible)return!1;if(e=r.getItem(n),(a=this.formView.options.cancelCallback)&&!1===a.call(this,r.handler,n,e))return;r.$_cancelItem(e,!0),i.options.autoClose&&i.close()}else{var a;if(e=r.getItem(n),(a=this.formView.options.commitCallback)&&!1===a.call(this,r.handler,n,e))return;r.$_commitItem(e,!0,!0),i.options.autoClose&&i.close()}}catch(t){alert(t)}return!0},e}(Ed),Ld=(function(t){function e(e){return t.call(this,e)||this}o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return""},e.prototype._doDraw=function(t){}}(Sd),function(t){function e(e){return t.call(this,e)||this}o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return""},e.prototype._doDraw=function(t){}}(xd),function(t){function e(e,i){var o=t.call(this,e)||this;return o.tcol=i,o}return o(e,t),e}(ba)),Fd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.setColumn=function(t,e){return this._grid=t,this._columnObj=e,this},Object.defineProperty(e.prototype,"grid",{get:function(){return this._grid},enumerable:!0,configurable:!0}),e}(xn),Nd=function(t){function e(e,i){var o=t.call(this,e,i,"bodyView")||this;return o._cells=[[],[]],o._rowPoints=[],o}return o(e,t),e.prototype._doDispose=function(){this._tbody=this._thead=this._table=null;for(var e=0;e<2;e++)for(var i=this._cells[e],o=0,r=i.length;o<r;o++)i[o].dispose(),i[o]=null;this._cells=null,t.prototype._doDispose.call(this)},e.prototype.bodyCellByCell=function(t){for(var e=0;e<this._cells.length;e++)for(var i=this._cells[e],o=0;o<i.length;o++){var r=i[o];if(r&&r.cell===t)return r}},e.prototype.bodyCellAt=function(t){return this._cells[1][t.vindex]},e.prototype.getValueCellRect=function(t,e){var i=this.formView,o=this._rowPoints,r=t.vindex;return(e=e||new N).set(i.labelWidth,o[r],i.valueWidth,o[r+1]-o[r]),e},e.prototype._createDom=function(t){var e=t.createElement("div"),i=this._table=t.createElement("table"),o=i.style;return o.setProperty("table-layout","fixed","important"),o.setProperty("width","0px","important"),i.className="rg-form-table",e.appendChild(i),this._thead=t.createElement("thead"),i.appendChild(this._thead),this._tbody=t.createElement("tbody"),i.appendChild(this._tbody),this.$_initTable(),e},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e),e.style.overflow="hidden"},e.prototype._doMeasure=function(t,e,i){return As.create(e,i)},e.prototype._doLayoutContent=function(t,e,i){var o=this.model;this.$_prepareRows(t,this._tbody),this.$_refreshCells(t.items,this._tbody),this.$_setCellsDisplay(this._cells,t.items),this.$_updateHead(t),this.$_updateRows(t,o)},e.prototype._doDraw=function(t){},e.prototype.$_initTable=function(){var t=nt(this._thead),e=this._thead,i=t.createElement("tr");e.appendChild(i),i.setAttribute("aria-hidden","true");var o=i.style;o.setProperty("border","0px none","important");for(var r=0;r<2;r++){var n=t.createElement("th");n.scope="col",(o=n.style).setProperty("visibility","hidden","important"),o.setProperty("margin","0px","important"),o.setProperty("padding","0px","important"),o.setProperty("font-size","0px","important"),o.setProperty("line-height","0px","important"),o.height="0px",i.appendChild(n)}},e.prototype.$_prepareRows=function(t,e){for(var i=nt(e),o=t.items.length;e.childElementCount<o;){var r=i.createElement("tr");r.$_view=this.$_hash;for(var n=0;n<2;n++){var s=i.createElement("td");s.className=0==n?"rg-form-label-cell":"rg-form-value-cell",r.appendChild(s);var a=i.createElement("div");s.appendChild(a)}e.appendChild(r)}for(;e.childElementCount>o;)e.removeChild(e.lastChild)},e.prototype.$_refreshCells=function(t,e){for(var i=this.formView.focusedIndex,o=this._cells,r=t.length,n=e.children,s=0;s<r;s++)for(var a=t[s],l=n[s].children,h=0;h<2;h++){var u=o[h][s];u?(u.cell,l[h]):u=o[h][s]=new Ld(l[h],h),u.formItem=a,u.trow=s,u.focused=s==i}for(h=0;h<2;h++){var c=this._cells[h];for(s=r;s<o.length;s++)c[h]=null}o.length=r},e.prototype.$_setCellsDisplay=function(t,e){for(var i=e.length,o=0;o<i;o++)for(var r=e[o],n=0;n<2;n++){var s=t[n][o];s.spanned=!1,r instanceof id?0==n?(s.setColSpan(2),s.setVisible(!0)):s.clear(!1):(s.setColSpan(1),s.setVisible(!0))}},e.prototype.$_updateHead=function(t){var e=this._thead.firstElementChild.children,i=e[0].style;i.width=t.labelWidth+"px",(i=e[1].style).width=t.valueWidth+"px"},e.prototype.$_updateRows=function(t,e){for(var i=t.form,o=this.formView.container.gridView,r=this._tbody.rows,n=e.minRowHeight+"px",s=this._rowPoints=[0],a=0,l=r.length;a<l;a++){var h=i.getVisibleItem(a),u=r[a];u.style.height=n,u.$_row=a,h.$_prepareLayout(i,t.columnBinder,a),this.$_updateRow(t,o,h,a,u),s[a+1]=s[a]+u.getBoundingClientRect().height}},e.prototype.$_setLabelStyle=function(t,e){t.className=e?"rg-form-label-cell rg-form-label-focused":"rg-form-label-cell"},e.prototype.$_updateRow=function(t,e,i,o,r){var n=this._cells,s=r.children[0];r.children[1];i instanceof ed&&(s.firstElementChild.textContent=i.header.displayText,this.$_setLabelStyle(s,n[1][o].focused),this.$_updateValueCell(t,e,t.gridRow,i,this._cells[1][o]))},e.prototype.$_updateValueCell=function(t,e,i,o,r){var n=o instanceof od&&t.formView.$_getGridCell(o,i);if(n){var s=o;e.body.getCellFormatters(s._columnObj,r),this.$_renderColumnCell(t,e,i,s,n,r)}else this.$_renderDataCell(t,o,r)},e.prototype.$_createRenderer=function(t,e,i){if(e===bd.TYPE){var o=new bd;return i&&o.assignFrom(i),o}return t.delegate.createRenderer(e,i,null)},e.prototype.$_getButtonVisible=function(t,e,i){var o=!1;switch(i){case S.ALWAYS:o=!0;break;case S.HIDDEN:o=!1;break;case S.VISIBLE:case S.ROWFOCUSED:o=e.focused;break;case S.DEFAULT:default:o=e.focused||e.mouseEntered}return o},e.prototype.$_buttonWidth=function(t,e,i){var o=0;if((t.button||i.button)!=E.NONE){var r=e.grid,n=e,s=t.buttonVisibility||n.buttonVisibility;this.$_getButtonVisible(r,i,s)&&(o=r.body.cellButtonWidth)}return o},e.prototype.$_editButtonWidth=function(t,e,i,o){var r=0;if(!o.readonly&&e){var n=i.grid,s=o.editorType,a=n.delegate.getCellEditor(s),l=o.editor||i.editor;if(a.hasButton(n.displayOptions.showNativeEditButton,l)){var h=!1;if(Hn.equalsTo(n.focusedIndex,e.index,i.layout)){var u=n.delegate.getCellEditor(s);h=!!u&&u.listing}(h||this.$_getButtonVisible(n,o,t.editButtonVisibility||i.editButtonVisibility))&&(r=n.body.editButtonWidth)}}return r},e.prototype.$_editButtonCount=function(t,e,i,o){var r=o.editorType;return i.grid.delegate.getCellEditor(r).buttonCount},e.prototype.$_editButtonVerti=function(t,e,i){if("number"===e.editorType){var o=e.editor||i.editor||{};return null==o.direction||"horizontal"!==o.direction}},e.prototype.$_errorWidth=function(t,e){return e.error?t.body.errorIconWidth:0},e.prototype.$_renderColumnCell=function(t,e,i,o,r,n){var s,a,l=n.cell,h=o._columnObj,u=o.renderer||h.renderer;n.setEditor(null,o.editor||h.editor),"string"==typeof u?s=u:(s=u&&u.type||(h instanceof bn?Zs.SERIES_TYPE:or.TYPE),a=u);var c=!1;n.renderer2&&!n.rendererChanged&&n.renderer2.type==s||(n.renderer2&&n.renderer2.clearAndDispose(),n.renderer2=this.$_createRenderer(t.formView,s,a),n.rendererChanged=!1,c=!0);var d=l.firstElementChild,p=n.renderer2,_=nt(d);!c&&p&&p._dom!=d&&(p.clearContent(),c=!0);var f,g=e.getItem(i),y=this.$_buttonWidth(o,h,n),m=this.$_editButtonWidth(o,g,h,n),b=m&&this.$_editButtonCount(o,g,h,n),v=m&&this.$_editButtonVerti(e,n,h),w=this.$_errorWidth(e,n),C=6+this.formView.$_getScrollBarWidth(),x=n.cellButton,I=n.editButtons,E=n.errorIcon;if(y>0?(x?f=x.style:(x=_.createElement("span"),n.cellButton=x,(f=x.style).position="absolute",f.display="inline-block",f.height="100%",f.top="0px"),n.buttonWidth<=0&&(l.appendChild(x),n.buttonWidth=y),f.right=C+"px",f.width=y+"px",n.resetButtonClass()):n.buttonWidth>0&&(l.removeChild(x),n.buttonWidth=0),m>0){if(!I||I&&I.length!=b){I&&I.forEach((function(t){l.removeChild(t)})),I=n.editButtons=[];for(var S=0;S<b;S++){var O=_.createElement("span");I.push(O),(f=O.style).position="absolute",f.display="inline-block",f.height="100%",f.top="0px",l.appendChild(O)}}var R=n.editorType,D=e.delegate.getCellEditor(R);I.forEach((function(t,e){D.setButtonStyle(t,e,v,y,m)||((f=t.style).right=C+y+e*m+"px",f.width=m+"px",n.resetEditClass(t,e))})),n.editWidth=m*(v?1:b)}else n.editWidth>0&&(I.forEach((function(t){l.removeChild(t)})),n.editWidth=0);w>0?(E?f=E.style:(E=_.createElement("span"),n.errorIcon=E,(f=E.style).position="absolute",f.display="inline-block",f.top="0px",f.height="100%"),n.errorWidth<=0&&(l.appendChild(E),n.errorWidth=w),f.right=C+y+n.editWidth+"px",f.width=w+"px",n.resetErrorClass()):n.errorWidth>0&&(l.removeChild(E),n.errorWidth=0);var k=p.styleName;c?p.initContent(r._index,d,k):p.checkClassName(k)&&(p.clearContent(),p.initContent(r._index,d,k)),p.renderCell(e,r,n);var P=r.isValueChanged()&&e.body._showChangeMarker;if(P!=n.valueChanged){if(P){var T=n.changedMarker;T||((T=n.changedMarker=_.createElement("div")).className="rg-changed-marker",T.style.position="absolute",T.style.display="block",T.style.top="0px",n.changedMarker=T),l.appendChild(T)}else n.changedMarker&&n.valueChanged&&l.removeChild(n.changedMarker);n.valueChanged=P}},e.prototype.$_renderDataCell=function(t,e,i){var o,r,n=i.cell,s=e.renderer;e instanceof rd?o=bd.TYPE:"string"==typeof s?o=s:(o=s&&s.type||or.TYPE,r=s);var a=!1;i.renderer2&&!i.rendererChanged&&i.renderer2.type==o||(i.renderer2&&i.renderer2.clearAndDispose(),i.renderer2=this.$_createRenderer(t.formView,o,r),i.rendererChanged=!1,a=!0);var l=n.firstElementChild,h=i.renderer2;!a&&h&&h._dom!=l&&(h.clearContent(),a=!0);var u=h.styleName;a?h.initFormContent(l,u):h.checkClassName(u)&&(h.clearContent(),h.initFormContent(l,u)),h instanceof bd&&(h.template=e.template,h.renderFormCell(t.formView,e))},e.prototype.$_focusedChanged=function(t,e){var i=this._tbody.rows;t>=0&&this.$_setLabelStyle(i[t].cells[0],!1),e>=0&&this.$_setLabelStyle(i[e].cells[0],!0)},e}(Ed),Vd=(function(t){function e(e,i){var o=t.call(this,e,i,"groupContainer")||this;return o._headerViews=[],o}o(e,t),e.prototype._doDispose=function(){for(var e=0,i=this._headerViews;e<i.length;e++){i[e].dispose()}this._headerViews=null,t.prototype._doDispose.call(this)},e.prototype._getCssSelector=function(){return""},e.prototype._doMeasure=function(t,e,i){return As.create(e,i)},e.prototype._doLayoutContent=function(t,e,i){},e.prototype._doDraw=function(t){}}(Ed),function(t){function e(e){var i=t.call(this,e)||this;return i._touchScrollRequest=new ad(i.grid),i._touchScrollTracker=new ud(i.grid),i._touchSelectRequest=new ld(i.grid),i._touchSelectTracker=new cd(i.grid),i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._getTouchRequest=function(t){var e=this.grid,i=e.selectionLayer;if(i instanceof fu){var o=i.getSelectHandle(t.target);if(o)return this._touchSelectRequest.handle=o,this._touchSelectRequest}var r=e.getCellViewOf(t.target);switch(e.getCellType(r)){case"data":var n=e.getBodyCellbyCell(t.target);if(n&&n.isEditButton(t.target))return;return this._touchScrollRequest}},e.prototype._getTouchTracker=function(e,i,o){var r=rt(e.target);if(e.target instanceof r.HTMLInputElement)return null;var n=this._getTouchRequest(e);if(n instanceof ad)return this._touchScrollTracker.request=n,this.dragTracker=this._touchScrollTracker,void(this.touchManager.swipeHandler=this.onSwipeHandler.bind(this));if(n instanceof ld)return this._touchSelectTracker.request=n,void(this.dragTracker=this._touchSelectTracker);var s=this.mouseEventTarget;n=this._getEditRequest(s,null,i,o,!1,!1,!1)||this._getSelectRequest(s,i,o,!1,!1,!1);var a=this._getDragTracker(n,i,o);if(a)return this.dragTracker=a,this.dragTracker;t.prototype._getTouchTracker.call(this,e,i,o)},e}(jc)),Bd=function(t){function e(e,i,o,r){void 0===o&&(o=!1),void 0===r&&(r=null);var n=t.call(this,e,o,r)||this;return n._gridView&&(n._gridView.$_handler=i),n}return o(e,t),e.prototype._doDispose=function(){this._gridView=null,this._watchTimer&&clearInterval(this._watchTimer),t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"gridView",{get:function(){return this._gridView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"formView",{get:function(){return this._formView||(this._formMarquee=new Cd(this.doc),this.addElement(this._formMarquee),this._formView=new Dd(this),this._formView.$_initialzie(),this.addElement(this._formView)),this._formView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"heightMeasurer",{get:function(){return this._heightMeasurer},enumerable:!0,configurable:!0}),e.prototype.setWatchTimer=function(t){this._watchTimer&&clearInterval(this._watchTimer),this._watchTimer=null,this._displayOberver=this.$_displayOberver.bind(this),t&&(this._watchTimer=setInterval(this._displayOberver,100))},e.prototype.getTableCell=function(t){return this._gridView.getTableCell(t)},e.prototype._doResized=function(e){t.prototype._doResized.call(this,e),this._gridView.$_containerResized()},e.prototype._doPrepareContainer=function(t,e,i){t.className="rg-root rg-grid",lt.isMobile()&&(t.style.touchAction="manipulation"),e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"),this._gridView=this._createGridView(e,i),this.addElement(this._gridView),this._activeView=this._gridView,this._heightMeasurer=new $d(this.measurer),this._sizeInfo=new N(0,0,t.clientWidth,t.clientHeight)},e.prototype._createDefaultTool=function(){return lt.isMobile()?new Vd(this):new jc(this)},e.prototype._doLayout=function(t){var e=this._gridView,i=this._formView,o=this._formMarquee;if(i&&i.visible){if(this._activeView!==i){if(e.$_deactivateView(),i.$_activateView(),e.focusedRow>=0){var r=e.focusedItem;!r||r instanceof io||(r=e.getNextRow(r)),r||(r=e.getFirstRow()),i.currentRow=r?r.index:-1}this._activeView=i}}else this._activeView===i&&(i&&i.$_deactivateView(),e.$_activateView(),i&&i.currentRow>=0&&e.setFocusedItem(i.currentRow),this._activeView=e);if(o&&(o.visible=i.visible),this._activeView==e||i.options.modal){var n=t.clone();e.setRect(n),n.x=n.y=0,e.$_layout(n)}if(e._dom.style.opacity=this._activeView!=e&&i.options.modal?i.options.modalOpacity+"":"",this._activeView===i){var s=t.clone();this._formView.options.padRect(s),this._formView.setRect(s),s.x=s.y=0,i.$_layout(e.delegate,s),o.setRect(t)}},e.prototype._layoutChildren=function(e){t.prototype._layoutChildren.call(this,e),this._sizeInfo.width=e.width,this._sizeInfo.height=e.height},e.prototype._doAfterRender=function(){this._gridView.visible&&this._gridView.$_afterRender()},e.prototype.$_displayOberver=function(){var t=this._containerDom,e=t.clientWidth,i=t.clientHeight,o=this._sizeInfo;e>0&&i>0&&(Math.abs(this._sizeInfo.width-e)>1||Math.abs(this._sizeInfo.height-i)>1)&&(o.width=e,o.height=i,this.invalidateLayout(),this._doResized(null))},e.prototype._doPrepareRender=function(t){var e=t.clone();this._gridView.visible&&(this._gridView.setRect(e),e.x=e.y=0,this._gridView.$_prepareRender(e)),this._formView&&this._formView.visible&&(this._formView.options.padRect(e),this._formView.setRect(e),e.x=e.y=0,this._formView.$_prepareRender(e))},e.prototype._createGridView=function(t,e){return void 0===t&&(t=!1),void 0===e&&(e=null),new $c(this,t,e)},e}(Ja),$d=function(t){function e(e){var i=t.call(this)||this;return i._bodyStyle="rg-body",i._headerStyle="rg-header",i._summaryStyle="rg-header-summary",i._footerStyle="rg-footer",i._dataRowStyle="rg-data-row",i._headerRowStyle="",i._summaryRowStyle="",i._footerRowStyle="",i._groupFooterStyle="rg-rowgroup-footer",i._dataCellStyle="rg-data-cell",i._headerCellStyle="rg-header-cell",i._summaryCellStyle="rg-header-summary-cell",i._footerCellStyle="rg-footer-cell",i._groupFooterCellStyle="rg-rowgroup-footer-cell",i._rowHeight=0,i._headerHeight=0,i._summaryHeight=0,i._footerHeight=0,i._gfooterHeight=0,i._dirty=!0,i._container=e,i.$_prepareElements(e),i}return o(e,t),e.prototype._doDispose=function(){this._container=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"rowHeight",{get:function(){return this._rowHeight||(this._rowHeight=this.$_measure(this._bodyStyle,this._dataRowStyle,this._dataCellStyle))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headerHeight",{get:function(){return this._headerHeight||(this._headerHeight=this.$_measure(this._headerStyle,this._headerRowStyle,this._headerCellStyle))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summaryHeight",{get:function(){return this._summaryHeight||(this._summaryHeight=this.$_measure(this._summaryStyle,this._summaryRowStyle,this._summaryCellStyle))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"footerHeight",{get:function(){return this._footerHeight||(this._footerHeight=this.$_measure(this._footerStyle,this._footerRowStyle,this._footerCellStyle))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupFooterHeight",{get:function(){return this._gfooterHeight||this.$_measure(this._bodyStyle,this._groupFooterStyle,this._groupFooterCellStyle)},enumerable:!0,configurable:!0}),e.prototype.measure=function(t){this._dirty&&(this._dirty=!1)},e.prototype.invalidate=function(){this._dirty=!0},e.prototype.$_prepareElements=function(t){var e=nt(t),i=e.createElement("table");t.appendChild(i);var o=i.style;o.width="1000px",o.height="1px",o.left="-10000px",o.position="absolute",i.className="rg-table";var r=e.createElement("tbody");i.appendChild(r);var n=e.createElement("tr");r.appendChild(n);var s=e.createElement("td");s.className="rg-data-cell",n.appendChild(s);var a=e.createElement("div");s.appendChild(a),a[lt.TextProp]="AYwyhi우리테크"},e.prototype.$_measure=function(t,e,i){var o=this._container,r=this._container.firstElementChild.tBodies[0].rows[0],n=r.cells[0];return o.className=t,r.className=e,n.className=i,r.offsetHeight},e}(ft),Ad=function(t){function e(e){var i=t.call(this,e)||this;return i._levelIndent=16,i._lineVisible=!0,i._showCheckBox=!1,i._iconImagesRoot="",i._defaultIcon=-1,i._collapseWhenLeftKey=!0,i._collapseWhenCtrlKey=!0,i._expandWhenRightKey=!0,i._expandWhenCtrlKey=!0,i._iconVisible=!0,i._expandedIcon=-1,i._collapsedIcon=-1,i}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"levelIndent",{get:function(){return this._levelIndent},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lineVisible",{get:function(){return this._lineVisible},set:function(t){t!=this._lineVisible&&(this._lineVisible=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showCheckBox",{get:function(){return this._showCheckBox},set:function(t){t!=this._showCheckBox&&(this._showCheckBox=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconImagesRoot",{get:function(){return this._iconImagesRoot},set:function(t){t!==this._iconImagesRoot&&(this._iconImagesRoot=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconImages",{get:function(){return this._iconImages},set:function(t){t!==this._iconImages&&(this._iconImages=t?t.slice():[],this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"defaultIcon",{get:function(){return this._defaultIcon},set:function(t){t!=this._defaultIcon&&(this._defaultIcon=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandedIcon",{get:function(){return this._expandedIcon},set:function(t){t!=this._expandedIcon&&(this._expandedIcon=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapsedIcon",{get:function(){return this._collapsedIcon},set:function(t){t!=this._collapsedIcon&&(this._collapsedIcon=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconCallback",{get:function(){return this._iconCallback},set:function(t){t!=this._iconCallback&&(this._iconCallback=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapseWhenLeftKey",{get:function(){return this._collapseWhenLeftKey},set:function(t){t!=this._collapseWhenLeftKey&&(this._collapseWhenLeftKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"collapseWhenCtrlKey",{get:function(){return this._collapseWhenCtrlKey},set:function(t){t!=this._collapseWhenCtrlKey&&(this._collapseWhenCtrlKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandWhenRightKey",{get:function(){return this._expandWhenRightKey},set:function(t){t!=this._expandWhenRightKey&&(this._expandWhenRightKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"expandWhenCtrlKey",{get:function(){return this._expandWhenCtrlKey},set:function(t){t!=this._expandWhenCtrlKey&&(this._expandWhenCtrlKey=t,this._changed())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"iconVisible",{get:function(){return this._iconVisible},set:function(t){t!=this._iconVisible&&(this._iconVisible=t,this._changed())},enumerable:!0,configurable:!0}),e}(Is),jd=(function(t){function e(e,i){var o=t.call(this,e,i,"treeExpandHandle")||this;return o._expanded=!1,o.clickable=!0,o}o(e,t),Object.defineProperty(e.prototype,"expanded",{get:function(){return this._expanded},set:function(t){t!=this._expanded&&(this._expanded=t,this._changed())},enumerable:!0,configurable:!0}),e.prototype._createDom=function(){return null}}(bc),function(t){function e(){var e=t.call(this)||this;return e._exclusive=!1,e}return o(e,t),e.prototype._doDispose=function(){this._expander=this._check=this._icon=this._span=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"type",{get:function(){return e.TYPE},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"styleName",{get:function(){return e.STYLE_NAME},enumerable:!0,configurable:!0}),e.prototype._doInitContent=function(t){var e=nt(t),i=this._expander=e.createElement("span");t.appendChild(i);var o=this._check=e.createElement("input");o.type="checkbox",o.className="rg-tree-checkbox",o.style.display="inline-block",t.appendChild(o);var r=this._icon=e.createElement("img");r.className="rg-tree-icon",t.appendChild(r);var n=this._span=e.createElement("span");t.appendChild(n)},e.prototype._doRenderCell=function(t,e,i,o,r){var n=t.treeOptions,s=n.showCheckBox,a=n.levelIndent,l=this._expander,h=this._dom,u=this._check,c=this._icon,d=this._span,p=e.item;l.className=p.isLeaf?"rg-tree-leaf":p.expanded?"rg-tree-expanded":"rg-tree-collapsed",this._exclusive!=t.checkBar.exclusive&&(this._exclusive=t.checkBar.exclusive,u.setAttribute("type",this._exclusive?"radio":"checkbox"),u.className=this._exclusive?"rg-tree-radio":"rg-tree-checkebox"),s?(u.parentElement||h.insertBefore(u,this._span),u.checked=p.checked):u.parentElement&&h.removeChild(u),n.iconVisible?(c.parentElement||h.insertBefore(c,this._span),c.src=t.getTreeIcon(p)||""):c.parentElement&&h.removeChild(c),d[lt.TextProp]=this._makeText(t,e,i),h.style.setProperty("padding-left",3+(p.level-1)*a+"px","important")},e.TYPE="tree",e.STYLE="rg-tree-renderer",e.STYLE_NAME="rg-renderer "+e.STYLE,e}(ir)),Hd=function(t){function e(e){return t.call(this,e,"treeItemView")||this}return o(e,t),e.prototype.isTreeExpander=function(t){var e=t.className;return"rg-tree-expanded"==e||"rg-tree-collapsed"==e},e.prototype.isCheckBox=function(t){var e=t.className;return"rg-tree-checkbox"==e||"rg-tree-radio"==e},e.prototype._doLayoutContent=function(e){t.prototype._doLayoutContent.call(this,e)},e.prototype._createRenderer=function(e,i,o,r,n){var s=e.layoutManager,a=i.dataColumn.layout;return 0===s.getHorzColumnIndex(a)?new jd:t.prototype._createRenderer.call(this,e,i,o,r,n)},e.prototype.$_getDefaultRenderer=function(t,e){var i=t.layoutManager,o=e.dataColumn.layout;return 0===i.getHorzColumnIndex(o)?jd.TYPE:or.TYPE},e}(oa),Wd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return 0},e.prototype._getEndCell=function(t){return t.fixedCellCount-1},e}(Hd),Gd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype._getFirstCell=function(t){return this._getStartCell(t)},e.prototype._getLastCell=function(t){return this._getEndCell(t)},e.prototype._getStartCell=function(t){return t.cellCount-t.rightCellCount},e.prototype._getEndCell=function(t){return t.cellCount-1},e}(Hd),Ud=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof jd},e.prototype.createRowElement=function(){return new Hd(this.doc)},e}(va),zd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof jd},e.prototype.createRowElement=function(){return new Wd(this.doc)},e}(wa),Yd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e.prototype.isTreeCell=function(t){var e=this.bodyCellAt(t);return e&&e.renderer2 instanceof jd},e.prototype.createRowElement=function(){return new Gd(this.doc)},e}(Ca),qd=function(t){function e(e){var i=t.call(this,e.doc)||this;return i._levelWidth=16,i._handleWidth=9,i._handleHeight=9,i._stroke="gray",i._linePool=[],i._lines=[],i._startIndex=-1,i._endIndex=-1,i._treeView=e,i}return o(e,t),e.prototype._doDispose=function(){this._linePool=null,this._lines=null,t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"levelWidth",{get:function(){return this._levelWidth},set:function(t){t!=this._levelWidth&&(this._levelWidth=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handleWidth",{get:function(){return this._handleWidth},set:function(t){t!=this._handleWidth&&(this._handleWidth=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"handleHeight",{get:function(){return this._handleHeight},set:function(t){t!=this._handleHeight&&(this._handleHeight=t,this.invalidate())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stroke",{get:function(){return this._stroke},set:function(t){t!=this._stroke&&(this._stroke=t,this.invalidate())},enumerable:!0,configurable:!0}),e.prototype.setRange=function(t,e,i){e==this._startIndex&&i==this._endIndex||(this._startIndex=e,this._endIndex=i,this.invalidate())},e.prototype.layout=function(t){var e=this._treeView;if(this.$_hideAll(),!(!e||this._startIndex<0||this._endIndex<0||this._startIndex>this._endIndex)){var i,o=null;for(i=this._startIndex;i<=this._endIndex&&!(o=e.getItem(i));i++);if(o){var r=o.level;if(r>1||o.childIndex>0){for(var n=0;n<r;n++){var s=o.getAncestor(n);(a=s.last)&&a.index>=i&&(a=this.$_findLevelItem(n+1,i),this.$_drawVertLine(t,this.$_borrowLine(),null,a,s.level))}o.childIndex>0&&this.$_drawVertLine(t,this.$_borrowLine(),null,o,o.parent.level)}for(;i<=this._endIndex;i++){var a,l=e.getItem(i),h=l.parent;if((n=l.childIndex)<h.count-1)(a=h.getItem(n+1)).index>this._endIndex&&(a=null),this.$_drawVertLine(t,this.$_borrowLine(),l,a,h.level);if((h=l)&&h.expanded&&h.count>0)(a=h.getItem(0)).index>this._endIndex&&(a=null),this.$_drawChildLine(t,this.$_borrowLine(),l,a);this.$_drawHorzLine(t,this.$_borrowLine(),l)}}}},e.prototype._getCssSelector=function(){return"rg-tree-lines"},e.prototype._initDom=function(e){t.prototype._initDom.call(this,e);var i=e.style;i.setProperty("pointer-events","none","important"),i.setProperty("overflow","hidden")},e.prototype._doDraw=function(t){},e.prototype.$_borrowLine=function(){var t=this._linePool.pop();t||((t=this._treeView.doc.createElement("div")).className="rg-tree-line",t.style.position="absolute",this._dom.appendChild(t));return t.style.display="inline-block",this._lines.push(t),t},e.prototype.$_hideAll=function(){for(var t=this._lines.length-1;t>=0;t--)"none"!=this._lines[t].style.display&&(this._lines[t].style.display="none");this._linePool=this._linePool.concat(this._lines.splice(0,this._lines.length))},e.prototype.$_findLevelItem=function(t,e){for(var i=e;i<=this._endIndex;i++){var o=this._treeView.getItem(i);if(o&&o.level==t)return o}return null},e.prototype.$_setBounds=function(t,e,i,o,r){var n=t.style;n.left=3+e+"px",n.top=i+"px",n.width=1==o?"1px":o+"px",n.height=1==r?"1px":r+"px"},e.prototype.$_drawVertLine=function(t,e,i,o,r){var n=t.topIndex,s=r*this._levelWidth+this._levelWidth/2,a=0,l=this.height;if(i){var h=t.getItemBounds(i.index-n),u=i instanceof Dr&&i.hasChildren?this._handleHeight:0;a=h.y+h.height/2+u/2}if(o){h=t.getItemBounds(o.index-n),u=o instanceof Dr&&o.hasChildren?this._handleHeight:0;l=h.y+h.height/2-u/2}this.$_setBounds(e,s,a,1,l-a)},e.prototype.$_drawHorzLine=function(t,e,i){var o,r=t.topIndex,n=i.parent.level*this._levelWidth+this._levelWidth/2,s=i.level*this._levelWidth;i.hasChildren&&(n+=this._handleWidth/2);var a=t.getItemBounds(i.index-r);o=a.y+a.height/2,this.$_setBounds(e,n,o,s-n,1)},e.prototype.$_drawChildLine=function(t,e,i,o){var r,n=t.topIndex,s=i.level*this._levelWidth+this._levelWidth/2,a=this.height,l=t.getItemBounds(i.index-n);if(2,r=l.y+l.height/2+5,o){l=t.getItemBounds(o.index-n);var h=o.hasChildren?this._handleHeight:0;a=l.y+l.height/2-h/2}this.$_setBounds(e,s,r,1,a-r)},e}(Rs),Kd=function(t){function e(e){return t.call(this,e,"treeViewSelectionTool")||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},e.prototype._doKeyDown=function(e){var i,o=this.focused.clone(),r=this.grid.treeOptions,n=e.which,s=e.ctrlKey||e.metaKey;if(o&&(i=o.item))switch(n){case 39:if(!s&&1==this.grid.visibleLayoutCount&&o.isRight&&r.expandWhenRightKey||s&&r.expandWhenCtrlKey){if(!i.expanded)return i.setExpanded(!0,!1,!1),!0;if(i.count>0)return o.down(),this.setFocused(o,!0),!0}break;case 37:if(!s&&o.isLeft&&r.collapseWhenLeftKey||s&&r.collapseWhenCtrlKey){if(i.expanded)return i.setExpanded(!1,!1,!1),!0;if(!(i.parent instanceof kr))return o.itemIndex=i.parent.index,this.setFocused(o,!0),!0}}return t.prototype._doKeyDown.call(this,e)},e.prototype._doMouseDown=function(e){var i=e.mouseX,o=e.mouseY,r=(e.ctrlKey||e.metaKey,e.shiftKey,e.altKey),n=this.grid,s=this.findElementAt(i,o,!1),a=this.mouseEventTarget;if(s instanceof Hd&&s.isTreeExpander(a)&&!r){var l=s._item;l instanceof Dr&&(l.expanded?n.collapse(l,!1):n.expand(l,!1,!1))}else t.prototype._doMouseDown.call(this,e)},e.prototype._doClick=function(e,i,o){i=i||e.mouseX,o=o||e.mouseY;var r=e.shiftKey,n=this.grid,s=(this.focused,this.findElementAt(i,o,!1)),a=this.mouseEventTarget;if(s instanceof Hd&&s.isCheckBox(a)){var l=n.getItem(s.itemIndex);this._doCheck(a,l,r)}t.prototype._doClick.call(this,e,i,o)},e.prototype._canMoveRowAt=function(t,e,i){var o=t.boundsByContainer(t.getCellRectAt(this.grid.layoutManager,e,!1)),r=3+(e.item.level-1)*this.grid.treeOptions.levelIndent;if(i<o.x+(t.isTreeCell(e)?r:20)){var n=this.grid.getSelectedItems();if(n.length>1)for(var s=n[0].level,a=1;a<n.length;a++)if(n[a].level<s)return!1;return!0}},e}(kh),Xd=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"treeView",{get:function(){return this.gridView},enumerable:!0,configurable:!0}),e.prototype._createGridView=function(){return new Qd(this)},e.prototype._createDefaultTool=function(){return new Kd(this)},e}(Bd),Zd=function(t){function e(){return t.call(this,"treeItemExpanderCell")||this}return o(e,t),Object.defineProperty(e.prototype,"getText",{get:function(){return null},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),e}(ko),Jd=function(t){function e(){return t.call(this,"treeItemFooterCell")||this}return o(e,t),Object.defineProperty(e.prototype,"getText",{get:function(){var t=String(this.value());if(!t){var e=this.index;e.dataColumn&&(t=e.column.footer.text)}return t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return null},enumerable:!0,configurable:!0}),e}(ko),Qd=function(t){function e(e,i){void 0===i&&(i=!1);var o=t.call(this,e,i)||this;return o._expanderCell=new Zd,o._footerCell=new Jd,o._focusedRow=-1,o.itemSource=o._rs=o._createItemSource(),o}return o(e,t),e.prototype._doDispose=function(){t.prototype._doDispose.call(this)},Object.defineProperty(e.prototype,"treeOptions",{get:function(){return this._treeOptions},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"linesView",{get:function(){return this._linesView},enumerable:!0,configurable:!0}),e.prototype.isTree=function(){return!0},e.prototype._beforeChangeLayout=function(){},e.prototype.getLevels=function(t){return this._rs.getLevels(t)},e.prototype.getExpanderCell=function(t){return this._expanderCell.setIndex(Hn.temp(this,t)),this._expanderCell},e.prototype.getFooterCell=function(t){return this._footerCell.setIndex(t),this._footerCell},e.prototype.expand=function(t,e,i,o){this.isItemEditing(null)||this._rs.expand(t,e,i,o)},e.prototype.collapse=function(t,e){this.isItemEditing(null)||this._rs.collapse(t,e)},e.prototype.expandAll=function(t){void 0===t&&(t=0),this.isItemEditing(null)||this._rs.expandAll(t)},e.prototype.collapseAll=function(){this.isItemEditing(null)||this._rs.collapseAll()},e.prototype.getTreeIcon=function(t){var e=this.treeOptions,i=e.iconImages;if(i){var o=void 0;o=t.hasChildren&&t.expanded&&e.expandedIcon>-1?e.expandedIcon:t.hasChildren&&t.collapsed&&e.collapsedIcon>-1?e.collapsedIcon:t.iconIndex;var r=e.iconCallback;if(r){var n=r(this.handler,t.index,t.dataRow,o);isNaN(n)||(o=n)}if((o<0||o>=i.length)&&(o=e.defaultIcon),o>=0&&o<i.length)return e.iconImagesRoot+i[o]}},e.prototype.getCheckedItems=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o)}return t},e.prototype.getCheckedItemIndices=function(){for(var t=[],e=0,i=this.itemCount;e<i;e++){var o=this.getItem(e);o.checked&&t.push(o.index)}return t},e.prototype.getCheckedRows=function(t){var e=null;if(t){e=[];for(var i=0,o=this.itemCount;i<o;i++){var r=this.getItem(i);r.checked&&e.push(r.row)}}else e=this._rs.getCheckedRows();return e},e.prototype.getCheckedRowIds=function(t){var e=null;if(t){e=[];for(var i=0,o=this.itemCount;i<o;i++){var r=this.getItem(i);r.checked&&e.push(r.dataRow)}}else e=this._rs.getCheckedRowIds();return e},e.prototype.checkChildren=function(t,e,i,o,r,n){if(void 0===r&&(r=!0),void 0===n&&(n=!1),t)for(var s=0,a=t.count;s<a;s++){var l=t.getItem(s);r?l.checkable&&l.setChecked(e,n):l.setChecked(e,n),!i||!l.expanded&&o||this.checkChildren(l,e,!0,o,r,n)}},e.prototype.resetCheckables=function(){this._rs.resetCheckables()},e.prototype.applyCheckables=function(){this._rs.applyCheckables()},e.prototype.getItemOfModel=function(t){return t.itemIndex>=0?this.getItem(t.itemIndex):t.dataRow>=0?this.getItemOfRow(t.dataRow,!1):null},e.prototype.getJsonRows=function(){return this._rs.getJsonRows()},Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._rs&&this._rs.dataSource},set:function(t){this._rs&&(this._rs.dataSource=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxItemCount",{get:function(){return this._rs?this._rs.maxItemCount:0},set:function(t){this._rs&&(this._rs.maxItemCount=t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"summarizer",{get:function(){return this._rs.summarizer},enumerable:!0,configurable:!0}),e.prototype._initStyles=function(){t.prototype._initStyles.call(this),this._treeOptions=new Ad(this)},e.prototype._createItemSource=function(){return new Fr(!0)},e.prototype._doContentPanesCreated=function(){this._linesView=new qd(this),this.addElement(this._linesView)},e.prototype._createSidePane=function(){return t.prototype._createSidePane.call(this)},e.prototype._createLayoutManager=function(){return new tp(this)},e.prototype._createBodyView=function(t){return new Ud(this.doc,t)},e.prototype._createFixedBodyView=function(t){return new zd(this.doc,t)},e.prototype._createRightBodyView=function(t){return new Yd(this.doc,t)},e.prototype._visualObjectChanged=function(e){t.prototype._visualObjectChanged.call(this,e)},e.prototype.append=function(){return this.insert(this._rs.rootItem,!1,!0)},e.prototype._doCanInsert=function(t,e,i){return t&&(t.count>0||!i||0==t.level||this.editOptions.appendable)},e.prototype._doMaxRowCountChanged=function(){this._rs.maxItemCount=this.maxItemCount},e.prototype.getSortFields=function(){return this._rs.getSortFields()},e.prototype.getSortDirections=function(){return this._rs.getSortDirections()},e.prototype.getSortCases=function(){return this._rs.getSortCases()},e.prototype._doSortItems=function(t,e,i){this._rs.setLabelComparer(this._doPrepareComparer(t)),this._rs.orderBy(t,e,i)},e.prototype._doColumnFiltersChanged=function(t,e){this._rs.includeParentItem=this.filteringOptions.includeParentItem,this.applyFilters(t,e)},e.prototype.setOptions=function(e){if(e){var i=this._rs;void 0!==e.hideDeleted&&(i.hideDeleted=e.hideDeleted),void 0!==e.hideDeletedRows&&(i.hideDeleted=e.hideDeletedRows),void 0!==e.summaryMode&&(i.summaryMode=e.summaryMode),void 0!==e.sortMode&&(i.sortMode=e.sortMdoe),t.prototype.setOptions.call(this,e)}},e.prototype._doPrepareRender=function(e){var i=this._horzScrolled;t.prototype._doPrepareRender.call(this,e),i&&this.layoutManager.$_layoutLines()},e.prototype.$_doLayout=function(e,i){this._treeOptions;t.prototype.$_doLayout.call(this,e,i)},e.prototype.assignImageList=function(t){},e.prototype.refreshView=function(){t.prototype.refreshView.call(this)},e.prototype.getEditBounds=function(e,i){return t.prototype.getEditBounds.call(this,e,i)},e.prototype.updatePastedRow=function(t,e,i){if(t instanceof Dr){var o=t.row;o&&o.update(e,i)}},e.prototype.appendPastedRow=function(t){var e=this.dataSource;if(e){var i=e.createRow(t,-1,!1);e.rootRow.addChild(i,!1)}},Object.defineProperty(e.prototype,"undoable",{get:function(){return this._rs.undoable},set:function(t){this._rs.undoable=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canUndo",{get:function(){return this._rs.canUndo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canRedo",{get:function(){return this._rs.canRedo},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"undoing",{get:function(){return this._rs.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redoing",{get:function(){return this._rs.redoing},enumerable:!0,configurable:!0}),e.prototype.undo=function(){return!!this._rs.canUndo&&(this._rs.cancelWhenLastUndo=this.editOptions.cancelWhenLastUndo,this.editController.cancelEditor(!0),this._rs.undo(),!0)},e.prototype.redo=function(){return!!this._rs.canRedo&&(this._rs.redo(),!0)},e.prototype.execute=function(t){this._rs.execute(t)},e.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._rs.clearCommandStack(t)},e.prototype.getFirstRow=function(){return null},e.prototype.getLastRow=function(){return null},e.prototype.getPrevRow=function(t){return null},e.prototype.getNextRow=function(t){return null},e.prototype._doMoveRows=function(t,e){var i=e&&e.dataId;if(i>=0){for(var o=[],r=0,n=t;r<n.length;r++){var s=n[r],a=s&&s.dataId;a>=0&&o.push(a)}if(o.length>0){var l=this.dataSource,h=l.rowsByIds(o,!1);h.length>0&&l.moveRows(h,l.rowById(i))}}return!1},e.prototype._fitLayoutWidth=function(t){if(!t.visible)return 0;var e,i=this.itemSource,o=this.getIndex(this.topIndex,t.firstColumn),r="",n=0;e=r=t.firstColumn.header.displayText;var s,a=this.getBodyCellAt(o,!1),l=a&&a.renderer2&&a.renderer2._dom,h=a&&a.renderer2 instanceof jd,u={0:lt.getTextLength(e)},c={0:e};if(l){var d=rt(l).getComputedStyle(l);if(d){r=d.paddingLeft;var p=parseInt(r.substr(0,r.indexOf("px")));n+=p>0?p:0,r=d.paddingRight,n+=(p=parseInt(r.substr(0,r.indexOf("px"))))>0?p:0,s={fontSize:d.fontSize,fontFamily:d.fontFamily,fontWeight:d.fontWeight,fontStyle:d.fontStyle}}}for(var _=0,f=i.itemCount;_<f;_++){o.itemIndex=_,u[v=h?o.item.level:0]=u[v]||0,r=this.getDisplayText(o),lt.getTextLength(r)>u[v]&&(u[v]=lt.getTextLength(r),c[v]=r)}for(var g=0,y=0,m=0,b=Object.keys(u);m<b.length;m++){var v=b[m];g=h?parseInt(v)*this.linesView.levelWidth+6+(this.treeOptions.iconVisible?24:0):6,g+=this.container.measureText("rg-data-cell",c[v],s),y=Math.max(y,g)}n+=y;var w=t.firstColumn,C=w.editor,x=this.delegate.getCellEditor(aa.getEditorType(C));return x.hasButton(x.native,C)&&(n+=this.body.editButtonWidth*x.buttonCount),w.button!==E.NONE&&(n+=this.body.cellButtonWidth),n},e.prototype.$_getVisibleAncestor=function(t){var e=this._rs.getItemOfRow(t);if(e){for(;e&&!e.visible;)e=e.parent;return e}return null},e.prototype.onItemProviderReset=function(e){this._currentRowId=-1,t.prototype.onItemProviderReset.call(this,e)},e.prototype.onTreeItemProviderItemChanged=function(t,i){this.invalidateLayout(),this.fireEvent(e.CHANGED,i)},e.prototype.onTreeItemProviderExpanding=function(t,i){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(e.EXPANDING,i)},e.prototype.onTreeItemProviderExpanded=function(t,i){if(i&&i.index>=0){var o=this.focusedIndex.clone();o.itemIndex=i?i.index:-1,this.setFocusedIndex(o,!0)}this.fireEvent(e.EXPANDED,i)},e.prototype.onTreeItemProviderCollapsing=function(t,i){return this._focusedRow=this.focusedIndex?this.focusedIndex.dataRow:-1,this.editController.editing&&!t.isEditing()&&this.editController.cancelEditor(!0),!this.editController.editing&&!t.isEditing()&&this.fireConfirmEvent(e.COLLAPSING,i)},e.prototype.onTreeItemProviderCollapsed=function(t,i){if(i&&i.index>=0){var o=this.focusedIndex.clone();o.itemIndex=i?i.index:-1,this.setFocusedIndex(o,!0)}this.fireEvent(e.COLLAPSED,i)},e.EXPANDING="onTreeViewExpanding",e.EXPANDED="onTreeViewExpanded",e.COLLAPSING="onTreeViewCollapsing",e.COLLAPSED="onTreeViewCollapsed",e.CHANGED="onTreeViewChanged",e}(Pu),tp=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.layout=function(e){t.prototype.layout.call(this,e),this.$_layoutLines()},e.prototype.$_layoutLines=function(){var t=this.grid,e=t.linesView;if(e.visible=t.treeOptions.lineVisible){var i=this.fixedLayoutCount>0,o=(i?this.fixedBodyBounds:this.bodyBounds).clone();i?(o.y+=this.fixedContentBounds.y,o.x+=this.fixedContentBounds.x):(o.y+=this.contentBounds.y,o.x+=this.contentBounds.x),this.layoutCount>0?o.width=Math.max(0,this.getLayoutWidth(0)):o.width=0,e.setRect(o),e.levelWidth=16,e.setRange(t,this.topIndex,Math.min(t.itemCount,this.topIndex+this.itemCount)-1),e.layout(this)}},e}(Oa),ep=function(t){function e(){var e=t.call(this)||this;return e._columns=null,e}return o(e,t),e.prototype._doDispose=function(){this._columns=null,t.prototype._doDispose.call(this)},e.prototype.setColumns=function(t){this._columns=[];for(var e=0;e<t.length;e++)t[e].layout instanceof xn&&this._columns.push(t[e].layout.firstColumn.name)},e.prototype.setItemIndex=function(t,e){this._itemIndex=t,this._startCol=e},e.prototype.isIdentifier=function(i){return i=i.toLowerCase(),e.IDENTS.hasOwnProperty(i)?e.IDENTS[i]:t.prototype.isIdentifier.call(this,i)},e.prototype.evaluateIdentifier=function(t){switch(t){case e.ID_ROW:return String(this._itemIndex+1)}throw new yt("Invalid identifier key: "+t)},e.prototype.evaluateIndexerI=function(t,i){if(t==e.ID_EXCELCOLUMN){if(i<0||i>=this._columns.length)throw new yt("Data field index out of bounds:"+i);return this._columns[i]}throw new yt("Invalid identifier indexer: "+t)},e.prototype.evaluateIndexerS=function(t,i,o){if(t!=e.ID_EXCELCOLUMN)throw new yt("Invalid identifier indexer: "+t);if(this._columns){var r=this._columns.indexOf(i);if(r<0||r>=this._columns.length)throw new yt("Column is not exists:"+i);return Zu.toColCaption(r+this._startCol)}},e.ID_EXCELCOLUMN=0,e.ID_ROW=1,e.IDENTS={excelcolumn:e.ID_EXCELCOLUMN,row:e.ID_ROW},e}(It),ip=function(t){function e(){var e=t.call(this)||this;return e._gridIndex=0,e._numberFormatId=0,e._textFormatId=49,e._dateFormatId=14,e._rowLevels=0,e._indents=0,e._indentWidth=3,e._seriesCell=new No,e._excelFormulaRuntime=new ep,e}return o(e,t),e.prototype.dispose=function(){return t.prototype.dispose.call(this),this._seriesCell=this._seriesCell.dispose(),this._linkRenderer&&(this._linkRenderer=this._linkRenderer.dispose()),this._templateRenderer&&(this._templateRenderer=this._templateRenderer.dispose()),this._excelFormulaRuntime=this._excelFormulaRuntime.dispose(),null},e.prototype._progressCallback=function(t,e,i,o){var r=this._progressGrid,n=this._multiOptions;r&&r.setExportProgress(i,o+n.prepareProgress,n.progressMessage)},e.prototype.export=function(e,i){if(t.prototype.export.call(this,e,i),this._progressGrid=e,i){var o=this._multiOptions=i,r=this._multiOptions.exportGrids;if(r&&!(r.length<=0)){var n=nt(e.container._containerDiv).documentElement,s=new yc(n);if(this._mergeHeads=[],o.showProgress)this._allCount=this._prepareCount(o,r),this._progressMax=this._allCount+o.prepareProgress,this._progressPos=0,this._progressStep=Math.max(this._allCount/10|0,1),o.progressCallback?this.setProgress=o.progressCallback:(this._progressGrid&&this._progressGrid.beginExportProgress(o.progressMessage),this.setProgress=this._progressCallback),this._exportGridAsync(s,o,this._gridIndex=0,function t(){var e=++this._gridIndex;e<o.exportGrids.length?this._exportGridAsync(s,o,e,t.bind(this)):(!i.progressCallback&&this._progressGrid&&this._progressGrid.endExportProgress(),this.save())}.bind(this));else{for(var a=0,l=r.length;a<l;a++)this._exportGrid(s,r[a].options);this.save()}}}},e.prototype.buildBook=function(t){var e=this._exportOptions.grid;e.isTree()?this.buildTreeSheet(e,t):this.buildSheet(e,t)},e.prototype.buildSheet=function(t,e){var i=this._exportOptions,o=this._workbook,r=o.createSheet(this._sheetName,i.sheetAttrs),n=t.displayOptions;if(this._defaultHeight=n.rowHeight||n.minRowHeight,this._rowGrouped=t.rowGrouped,this._mergedGrouped=t.mergedRowGrouped,this._rowGrouped&&(this._rowLevels=t.rowGroupLevels),this._startItem=0,i.allItems&&this._rowGrouped){this.allItems=t.itemSource.getAllItems();var s=t.layoutManager.fixedItemCount;if(s>0)for(var a=0;a<s;a++)this.allItems.splice(a,0,t.getItem(a))}else if(i.pagingAllItems&&t.paged){var l=t.itemSource;l instanceof mc&&(this.allItems=l.getPagingAllItems())}else i.onlyCheckedItems&&!t.rowGrouped&&(this.allItems=t.getCheckedItems(!1));var h=this.allItems,u=h?h.length:t.itemCount;if(!this._rowGrouped){this._startItem=i.start>0?i.start:0;var c=i.count>0?i.count:u;u=c>0?this._startItem+c>u?u-this._startItem:c:u-this._startItem}this._indexItem=this._startItem,this._lastItem=this._startItem+u,this._currentRow=i.yOffset,this._startCol=i.xOffset,this._prepareCommonStyles(t),this._buildColumns(t),r.createBorderEdges(Hu.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(o),this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1),this.buildItems(t,function(){this.footer&&this.buildSummaryItem(t,!0),this._buildDocumentTail(o),e&&e()}.bind(this))},e.prototype.buildHeader=function(t){for(var i=this._workbook,o=i.currentSheet,r=this._preparer,n=r.colCount,s=r.headerRowCount,a=t.header.heights||[],l=a&&a.length>0?t.header.minRowHeight:Math.max(t.header.height,t.header.minRowHeight*s)/s,h=[],u=0;u<s;u++)h.push(Math.max(a[u]||l,l)*e.LINE_HEIGHT);var c=this._indents,d=this._currentRow;o.setFirstRow(this._currentRow);var p,_=this._startCol,f=this._headerCellStyle,g=[];for(p=0;p<s;p++)g.push(o.borrowRow(d+p,h[p]));if(this.indicator){if(g[0].addText(_,this.indicatorHead,f),s>1){for(p=1;p<s;p++)g[p].addBlank(_,f);o.addMerge(d,_,s,1)}_++}if(this.checkBar){if(g[0].addText(_,this.checkBarHead,f),s>1){for(p=1;p<s;p++)g[p].addBlank(_,f);o.addMerge(d,_,s,1)}_++}if(c>0){for(var y=0;y<c;y++){for(p=0;p<s;p++)g[p].addBlank(y+_,this._indentHeadStyle);o.addMerge(d,y+_,s,1)}_+=c}for(p=0;p<s;p++){var m=d+p,b=g[p];for(y=0;y<n;y++){var v=r.getHeader(p,y),w=v&&v.layout,C=y+_;if(w.isProxy||v.spanned)b.addBlank(C,f);else{var x=w.displayText,I=this._preparer.documentCssStyles,E=w instanceof xn?w.firstColumn.header:w.header,S=E.exportStyleName||E.styleName;f=this._headerCellStyle,S&&(f=this._parseStyles(i,this._inheritStyles([this._headerCssStyle,Hu.getSelectorStyle(I,"."+S)]),!0)),b.addText(C,x,f);var O=0,R=w.getHeaderSpan()-1,D=w.parent,k=D&&D.vertical;if(R>0){var P=0,T=w.vindex+1;if(k)for(;P++<R&&P<s;){O+=D.getVisible(T++)._hspan,r.getHeader(p+P,y).spanned=!0}else for(;P++<R&&y+P<n&&T<D.visibleCount;){O+=D.getVisible(T++)._cspan,r.getHeader(p,y+P).spanned=!0}}k?o.addMerge(m,C,w.hspan+O,w.cspan):o.addMerge(m,C,w.hspan,w.cspan+O)}}}this._currentRow+=s,o.setLastRow(this._currentRow-1)},e.prototype.buildSummaryItem=function(t,i){function o(t,e,o,r,n){var s=l.getCell(o.layout),a=this._exportOptions,h=s.value;if(h instanceof Date)a.datetimeCallback?(h=a.datetimeCallback(-1,o.name,h))instanceof Date?t.addDate(e,h,n):t.addText(e,h,n):t.addDate(e,h,n);else if(isNaN(h)){var u=i?o.getFooter(l._childIndex):o.getHeaderSummary(l._childIndex),c=u&&l.getCellFormatters(u,null),d=c?s.getDisplayText(c):h;t.addText(e,d||"",n)}else t.addNumber(e,h,n)}var r,n,s,a,l,h=this._workbook.currentSheet,u=this._preparer,c=u.colCount,d=u.dataRowCount,p=this._indents,_=i?t.footers:t.headerSummaries;if(_.visible){var f=_.visibleCount,g=f*d,y=this._currentRow;h.setFirstRow(this._currentRow);var m,b=this._startCol,v=t.layoutManager.getDataRowHeights(d),w=v.reduce((function(t,e){return t+e}),0),C=[];for(r=0;r<f;r++){var x=(l=_.getVisible(r)).height;for(x=-1===x?-1:x>0?x/d:Math.max(l.minHeight,t.heightMeasurer.summaryHeight,x),s=0;s<d;s++)w>0&&v[s]>0?C.push(v[s]*l.height/w*e.LINE_HEIGHT):C.push(x*e.LINE_HEIGHT)}if(this.indicator){for(var I=0,E=0;I<f;I++)for(var S=0;S<d;S++)m=h.borrowRow(y+E,C[E]),i?0===E?m.addText(b,this.indicatorFoot,this._indicatorFootStyle):m.addBlank(b,this._indicatorFootStyle):0===E?m.addText(b,this.indicatorSummary,this._indicatorSumStyle):m.addBlank(b,this._indicatorSumStyle),E++;h.addMerge(y,b++,g,1)}if(this.checkBar){var O=0;for(E=0;O<f;O++)for(S=0;S<d;S++)m=h.borrowRow(y+E,C[E]),i?0===E?m.addText(b,this.checkBarSummary,this._checkBarSumStyle):m.addBlank(b,this._checkBarSumStyle):0===E?m.addText(b,this.checkBarFoot,this._checkBarFootStyle):m.addBlank(b,this._checkBarFootStyle),E++;h.addMerge(y,b++,g,1)}if(p>0){for(var R=0;R<p;R++){var D=0;for(E=0;D<f;D++)for(S=0;S<d;S++)(m=h.borrowRow(y+E,C[E])).addBlank(b+R,this._indentFootStyle),E++;h.addMerge(y,b+R,f*d,1)}b+=p}var k=y,P=(i?u.getFooterItem:u.getSummaryItem).bind(u);for(s=0,a=0;s<f;s++)for(l=_.getVisible(s),r=0;r<d;r++,a++){for(m=h.borrowRow(k,C[a]),n=0;n<c;n++){var T=P(s*d+r,n),M=T.layout,L=M.firstColumn,F=n+b,N=M.firstColumn.$_hash,V=(i?this._columnFooterStyles:this._columnSummaryStyles)[N][s];if(M.isProxy||T.spanned)m.addBlank(F,V);else{var B=0,$=i?M.getFooterSpan(s)-1:M.getSummarySpan(s)-1,A=i?M.getFooterUserSpan(l._childIndex):M.getSummaryUserSpan(l._childIndex),j=M.parent,H=j&&j.vertical;if(A){var W=A.footerCount||0,G=W>0?W*d:A.rowspan||1,U=A.colspan||1;o.call(this,m,F,L,s,V);for(var z=0,Y=0,q=0;q<G;q++){var K=(i?u._footerCells:u._summaryCells)[s*d+r+q];K&&z++;for(var X=0;K&&X<U;X++){var Z=K[n+X];Z&&(Y=Math.max(Y,X+1),Z.spanned=!0)}}(G>1||U>1)&&h.addMerge(k,F,z,Y)}else{if($>0){var J=0,Q=M.vindex+1;if(H)for(;J++<$&&J<d;){B+=j.getVisible(Q++)._dspan,P(s*d+r+J,n).spanned=!0}else for(;J++<$&&n+J<c&&Q<j.visibleCount;){B+=j.getVisible(Q++)._cspan,P(s*d+r,n+J).spanned=!0}}o.call(this,m,F,L,s,V),H?h.addMerge(k,F,M._dspan+B,M._cspan):h.addMerge(k,F,M._dspan,M._cspan+B)}}}k++}this._rowGrouped&&this._exportOptions.showLevelOutline&&h.setRowLevel(k,1),this._currentRow+=g,h.setLastRow(this._currentRow-1)}},e.prototype.buildItems=function(t,e){for(var i=this._exportOptions,o=i.showIndicatorRow(t),r=this.allItems,n=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,s=this._indexItem;s<n;s++){var a=r?r[s]:t.getItem(s);if(this._indicatorNo=o?a.isDataRow?a.dataRow+1:void 0:s+1,a instanceof io)this.buildRow(t,a);else if(a instanceof zr)this.buildMergedGroupHeader(t,a);else if(a instanceof Ur||a instanceof no)this._preparer.groupModel!=a.parent&&this._preparer.setGroupFooterItms(a.parent,i.allItems,t.rowGroup.mergeMode),a instanceof Ur?this.buildMergedGroupFooter(t,a):this.buildGroupFooter(t,a);else{if(!(a instanceof ro))throw"Unkown item type";this.buildGroupHeader(t,a)}this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(t.handler,"process",this._progressMax,this._progressPos),this._indexItem=n,this._indexItem>=this._lastItem?e&&e():setTimeout(function(){this.buildItems(t,e)}.bind(this),0)},e.prototype.buildRow=function(t,i){var o,r,n=t.rowGroup,s=this._preparer,a=s.dataRowCount,l=s.colCount,h=t.layoutManager,c=this._columnMerged,d=this._mergeHeads,p=this._indents,_=this._workbook.currentSheet,f=this._currentRow;_.setFirstRow(this._currentRow);var g=this._startCol,y=t.displayOptions,m=h.getDataRowHeights(a),b=m.reduce((function(t,e){return t+e}),0)||i.height;isNaN(b)&&(b=-1===y.rowHeight?-1:Math.max(y.rowHeight||0,y.minRowHeight*a)),b=-1===b?-1:b>0?b/a:b;for(var v=n.expandedAdornments===u.SUMMARY&&n.mergeMode,w=[],C=0;C<a;C++)w.push(_.borrowRow(f+C,-1===b?-1:(m[C]||b)*e.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(t,_,w,this._indicatorNo,f,g++,a),this.checkBar&&this._buildCheckBarCell(t,_,w,i.checked,f,g++,a);for(C=0;C<a;C++){var x=w[C];x._row=C;var I=f+C,E=g;for(o=0;o<p;o++)x.addBlank(E,this._indentBarStyle),E++;for(o=0;o<l;o++){var S=o+E,O=s.getItem(C,o),R=O.layout,D=R.firstColumn,k=D.$_hash,P=this._columnStyles[k];if(R.isProxy||O.spanned)x.addBlank(S,P);else{var T=R._dspan,M=!1;if(c){var L=Wn.tempItem(t,i,R),F=h.getMergeRoom(L);if(F)F.isHead(L)&&0==C||this._startItem>0&&i.index==this._startItem&&!v?(this._buildValueCell(t,_,x,i,R,S,E),d[k]=I,M=!0):(x.addBlank(S,P),(F.isTail(L)||this._lastItem>0&&i.index==this._lastItem-1)&&(T=I-d[k]+a,_.addMerge(d[k],S,T,1),delete d[k]),M=!0);else if(this.allItems&&!i.visible&&t.isGroupedColumn(D)&&this._mergedGrouped){x.addBlank(S,P),M=!0,r=i.parent;for(;D.groupLevel!=r.level&&r;)r=r.parent;switch(t.rowGroup.expandedAdornments){case u.NONE:i==r.firstItem&&i==r.lastDataItem?M=!1:i==r.firstItem?(this._buildValueCell(t,_,x,i,R,S,E),d[k]=I):i==r.lastDataItem&&(T=I-d[k]+a,_.addMerge(d[k],S,T,1));break;case u.BOTH:i==r.lastDataItem&&0==r.footerCount&&(T=I-d[k]+a,_.addMerge(d[k],S,T,1));break;case u.HEADER:case u.SUMMARY:i==r.firstItem&&i==r.lastDataItem?d[k]?(T=I-d[k]+a,_.addMerge(d[k],S,T,1),delete d[k]):M=!1:i==r.lastDataItem?(T=I-d[k]+a,_.addMerge(d[k],S,T,1),delete d[k]):r.firstDataItem;break;case u.FOOTER:i==r.firstItem&&(this._buildValueCell(t,_,x,i,R,S,E),d[k]=I),i==r.lastDataItem&&(r.footerCount>0||(T=I-d[k]+a,_.addMerge(d[k],S,T,1),delete d[k]))}}}if(!M){var N=R.parent,V=N&&N.vertical,B=R.spanCallback,$=B?B(t.handler,R,i.index)-1:void 0;void 0===$&&($=R.getDataSpan()-1);var A=0;if($>0){var j=0,H=R.vindex+1;if(V)for(;j++<$&&j<a;){A+=N.getVisible(H++)._dspan,s.getItem(C+j,o).spanned=!0}else for(;j++<$&&o+j<l&&H<N.visibleCount;){A+=N.getVisible(H++)._cspan,s.getItem(C,o+j).spanned=!0}}this._buildValueCell(t,_,x,i,R,S,E),V?_.addMerge(I,S,R._dspan+A,R._cspan):_.addMerge(I,S,R._dspan,R._cspan+A)}}}this._rowGrouped&&this._exportOptions.showLevelOutline&&_.setRowLevel(I,i.level)}this._currentRow+=a,_.setLastRow(this._currentRow-1),i.index},e.prototype.buildGroupHeader=function(t,i){var o=this._workbook,r=o.currentSheet,n=this._preparer,s=i.level-1,a=this._indentBarStyle,l=n.colCount,h=this._currentRow;r.setFirstRow(this._currentRow);var u=this._startCol,c=t.layoutManager.getDataRowHeights(n.dataRowCount).reduce((function(t,e){return t+e}),0);c=c||this._defaultHeight*n.dataRowCount;var d=this._exportOptions,p=r.borrowRow(h,c*e.LINE_HEIGHT);if(this.indicator&&this._buildIndicatorCell(t,r,p,this._indicatorNo,h,u++,1),this.checkBar&&this._buildCheckBarCell(t,r,p,i.checked,h,u++,1),d.indenting)for(var _=0;_<s;_++)p.addBlank(u,a),u++;var f=t.rowGroup.getHeaderText(i),g=this._groupHeaderStyle,y=this._preparer.documentCssStyles,m=this._dynamicStyles,b="groupheader-style=.rg-rowgroup-header-level-"+i.level;if(m[b])g=m[b];else{var v=Hu.getSelectorStyle(y,".rg-rowgroup-header-level-"+i.level);v&&(g=this._extendStyles(o,g,v)),this._dynamicStyles[b]=g}p.addText(u,f,g),this._indents>0&&(l+=this._indents-(i.level-1));for(var w=1;w<l;w++)p.addBlank(w+u,g);r.addMerge(h,u,1,l),this._rowGrouped&&d.showLevelOutline&&r.setRowLevel(h,i.level),this._currentRow++,r.setLastRow(this._currentRow-1)},e.prototype.buildGroupFooter=function(t,i){function o(e,o,r,n){var s=hu.getValue(i,r),a=this._exportOptions;if(s instanceof Date)a.datetimeCallback?(s=a.datetimeCallback(i.index,r.name,s))instanceof Date?e.addDate(o,s,n):e.addText(o,s,n):e.addDate(o,s,n);else if("string"==typeof s)e.addText(o,s,n);else if(isNaN(s)){var l=s,h=void 0;if(i){var u=Wn.tempItem(t,i,r);l=void 0===s||"number"==typeof s?t.getDisplayText(u)||"":s}else(h=r.groupFooter.text)&&(l=h);e.addText(o,l,n)}else e.addNumber(o,s,n)}var r,n,s,a,l=this._workbook.currentSheet,h=this._exportOptions,c=this._preparer,d=c.dataRowCount,p=c.colCount,_=this._groupFooterCellStyle,f=this._indentBarStyle,g=this._indents,y=i.level,m=this._currentRow;l.setFirstRow(this._currentRow);for(var b=this._startCol,v=t.rowGroup.expandedAdornments==u.SUMMARY,w=this._defaultHeight,C=t.layoutManager.getDataRowHeights(d),x=[],I=0;I<d;I++)x.push(l.borrowRow(m+I,(C[I]||w)*e.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(t,l,x,this._indicatorNo,m,b++,d),this.checkBar&&this._buildCheckBarCell(t,l,x,i.checked,m,b++,d);var E=c.getGroupFooterCells(),S=i.vindex*d;for(I=0;I<d;I++){var O=m+I,R=b,D=x[I];if(g>0)for(r=0;r<g;r++)v?r<y-2?D.addBlank(R,f):D.addBlank(R,_):D.addBlank(R,f),0==I&&d>1&&l.addMerge(O,R,d,1),R++;for(var k=0;k<p;k++){n=k+R;var P=E[S+I][k],T=P.layout;if(s=T.firstColumn,a=this._columnGroupFooterStyles[s.$_hash][i.footerIndex],h.applyDynamicStyles){var M=Wn.tempItem(t,i,T),L=t.rowGroup.getFooterCell(M),F=L.getSummary();a=this.$_summaryStyleSet(L,F,a)}if(T.isProxy||P.spanned)D.addBlank(n,a);else{var N=T.parent,V=N&&N.vertical,B=0,$=0,A=T.getGroupFooterUserSpan(i.parent,i.footerIndex),j=A?0:T.getGroupFooterSpan(i.index,i.footerIndex)-1;if(A){var H=A.footerCount||0;B=H>0?H*d:A.rowspan||1,$=A.colspan||1,B=Math.min((i.parent.footerCount-i.vindex)*d,B),l.addMerge(O,n,B,$);for(var W=0;W<B;W++)for(var G=0;G<$;G++)E[S+W+I][k+G].spanned=!0}else if(j>0){var U=0;M=T.vindex+1;if(V)for(;U++<j&&U<d;){B+=N.getVisible(M++)._dspan,E[S+U][k].spanned=!0}else for(;U++<j&&M<Math.min(p,N.visibleCount);){$+=N.getVisible(M++)._cspan,E[S+I][k+U].spanned=!0}}o.call(this,D,n,s,a),!A&&l.addMerge(O,n,T._dspan+B,T._cspan+$)}this._rowGrouped&&h.showLevelOutline&&l.setRowLevel(O,i.level)}}this._currentRow+=d,l.setLastRow(this._currentRow-1)},e.prototype.buildMergedGroupHeader=function(t,i){var o=this._workbook.currentSheet,r=this._preparer,n=i.level,s=this._defaultHeight,a=r.colCount,l=this._currentRow;o.setFirstRow(this._currentRow);var h=this._startCol,u=o.borrowRow(l,s*e.LINE_HEIGHT);this.indicator&&this._buildIndicatorCell(t,o,u,this._indicatorNo,l,h++,1),this.checkBar&&this._buildCheckBarCell(t,o,u,i.checked,l,h++,1);for(var c=0;c<n-1;c++){var d=r.getItem(0,h+c).layout.firstColumn;u.addBlank(h+c,this._columnStyles[d.$_hash])}var p=n-1,_=r.getItem(0,p).layout,f=_.firstColumn;this._buildValueCell(t,o,u,i.firstItem,_,h+p),this._mergeHeads[f.$_hash]=l;var g=t.rowGroup.getHeaderText(i);c=h+n;var y=this._groupHeaderStyle;for(n<r.colCount&&u.addText(c++,g,y);c<a+h;c++)u.addBlank(c,y);a-n>1&&o.addMerge(l,n+h,1,a-n),this._currentRow++,o.setLastRow(this._currentRow-1)},e.prototype.buildMergedGroupFooter=function(t,i){function o(e,o,r,n){var s=hu.getValue(i,r),a=this._exportOptions;if(s instanceof Date)a.datetimeCallback?(s=a.datetimeCallback(i.index,r.name,s))instanceof Date?e.addDate(o,s,n):e.addText(o,s,n):e.addDate(o,s,n);else if(isNaN(s)){var l=Wn.tempItem(t,i,r),h=t.getDisplayText(l)||"";e.addText(o,h,n)}else e.addNumber(o,s,n)}var r,n,s,a,l=this._workbook.currentSheet,h=this._exportOptions,c=this._preparer,d=c.dataRowCount,p=c.colCount,_=i.level-1,f=this._currentRow;l.setFirstRow(this._currentRow);for(var g=this._startCol,y=t.rowGroup.expandedAdornments==u.SUMMARY,m=this._defaultHeight,b=t.layoutManager.getDataRowHeights(d),v=[],w=t.layoutManager,C=0;C<d;C++){var x=l.borrowRow(f+C,(b[C]||m)*e.LINE_HEIGHT);x._row=C,v.push(x)}for(this.indicator&&this._buildIndicatorCell(t,l,v,this._indicatorNo,f,g++,d),this.checkBar&&this._buildCheckBarCell(t,l,v,i.checked,f,g++,d),r=0;r<_;r++){s=(P=c.getItem(0,r).layout).firstColumn,a=this._columnStyles[s.$_hash];for(var I=i.parent;I&&s.groupLevel!==I.level;)I=I.parent;if(this.allItems||i.parent.expanded){for(C=0;C<d;C++)y&&0===C&&I&&I.getFooter(0)===i?this._buildValueCell(t,l,v[C],i.parent.firstItem,P,g+r):v[C].addBlank(g+r,a);if(this._columnMerged)if(y)!this._mergeHeads[s.$_hash]||s.groupLevel===_&&I&&I.getFooter(0)===i?this._mergeHeads[s.$_hash]=f:s.groupLevel;else if(i.visible){var E=Wn.tempItem(t,i,P),S=w.getMergeRoom(E);if(S&&S.isTail(E)){var O=this._mergeHeads[s.$_hash];l.addMerge(O,r+g,f+d-O,P._defColSpan)}}else if(I&&I.last===i){O=this._mergeHeads[s.$_hash];l.addMerge(O,r+g,f+d-O,P._defColSpan)}}else for(C=0;C<d;C++)this._buildValueCell(t,l,v[C],i.parent.firstItem,P,g+r)}var R=c.getGroupFooterCells(),D=i.vindex*d;for(C=0;C<d;C++){var k=f+C;for(r=_;r<p;r++){n=r+g;var P,T=R[D+C][r];if(s=(P=T.layout).firstColumn,P.isProxy||T.spanned)a=this._columnStyles[s.$_hash],v[C].addBlank(n,a);else{var M=P.parent,L=M&&M.vertical,F=0,N=0,V=P.getGroupFooterUserSpan(i.parent,i.footerIndex),B=V?0:P.getGroupFooterSpan(i.index,i.footerIndex)-1;if(V){var $=V.footerCount||0;F=$>0?$*d:V.rowspan||1,N=V.colspan||1,F=Math.min((i.parent.footerCount-i.vindex)*d,F),l.addMerge(k,n,F,N);for(var A=0;A<F;A++)for(var j=0;j<N;j++)R[D+A+C][j+r].spanned=!0}else if(B>0){var H=0,W=P.vindex+1;if(L)for(;H++<B&&H<d;){F+=M.getVisible(W++)._dspan,R[D+H][r].spanned=!0}else for(;H++<B&&W<Math.min(p-1,M.visibleCount);){N+=M.getVisible(W++)._cspan,R[D+C][r+H].spanned=!0}}if(a=this._columnGroupFooterStyles[s.$_hash][i.footerIndex],h.applyDynamicStyles){W=Wn.tempItem(t,i,P);var G=t.rowGroup.getFooterCell(W),U=G.getSummary();a=this.$_summaryStyleSet(G,U,a)}o.call(this,v[C],n,s,a),!V&&l.addMerge(k,n,P._dspan+F,P._cspan+N)}this._rowGrouped&&h.showLevelOutline&&l.setRowLevel(k,_)}}this._currentRow+=d,l.setLastRow(this._currentRow-1)},e.prototype.buildTreeSheet=function(t,e){var i=this._exportOptions,o=this._workbook;i.allItems&&(this.allItems=t.getAllItems());var r=this.allItems,n=r?r.length:t.itemCount,s=o.createSheet(this._sheetName,i.sheetAttrs),a=t.displayOptions;if(this._defaultHeight=a.rowHeight||a.minRowHeight,this._rowLevels=t.getLevels(!1),this._startItem=this._indexItem=0,!this._rowGrouped){this._startItem=i.start>0?i.start:0;var l=i.count>0?i.count:n;n=l>0?this._startItem+l>n?n-this._startItem:l:n-this._startItem}this._lastItem=this._startItem+n,this._prepareCommonStyles(t),this._currentRow=i.yOffset,this._startCol=i.xOffset,this._buildColumns(t),s.createBorderEdges(Hu.getSelectorStyle(this._preparer.documentCssStyles,".rg-grid")),this._buildDocumentTitle(o),this.header&&this.buildHeader(t),this.headerSummary&&this.buildSummaryItem(t,!1),this.buildTreeItems(t,function(){this.footer&&this.buildSummaryItem(t,!0),this._buildDocumentTail(o),e&&e()}.bind(this))},e.prototype.buildTreeItems=function(t,e){for(var i=this._exportOptions.showIndicatorRow(t),o=this.allItems,r=this._progressStep?this._indexItem+Math.min(this._progressStep,this._lastItem-this._indexItem):this._lastItem,n=this._indexItem;n<r;n++){var s=o?o[n]:t.getItem(n);if(this._indicatorNo=s instanceof io&&i?s.dataRow:n+1,!(s instanceof Dr))throw"Unkown tree item type";this.buildTreeRow(t,s),this._progressPos+=1,this._preparer.clearDataSpanned()}this.setProgress&&this.setProgress(t.handler,"process",this._progressMax,this._progressPos),this._indexItem=r,this._indexItem>=this._lastItem?e&&e():setTimeout(function(){this.buildTreeItems(t,e)}.bind(this),0)},e.prototype.buildTreeRow=function(t,i){var o,r=this._workbook.currentSheet,n=this._preparer,s=n.dataRowCount,a=n.colCount,l=this._indents,h=i.level,u=this._currentRow;r.setFirstRow(this._currentRow);var c=this._startCol,d=t.displayOptions,p=t.layoutManager.getDataRowHeights(s),_=i.height;isNaN(_)&&(_=(d.rowHeight||d.minRowHeight)*s),_=-1===_?-1:_>0?_/s:_;for(var f=[],g=0;g<s;g++)f.push(r.borrowRow(u+g,(p[g]||_)*e.LINE_HEIGHT));this.indicator&&this._buildIndicatorCell(t,r,f,this._indicatorNo,u,c++,s),this.checkBar&&this._buildCheckBarCell(t,r,f,i.checked,u,c++,s);var y=this._bodyCellStyle;for(g=0;g<s;g++){var m=f[g];m._row=g;var b=u+g,v=l>0?c+h-1:c,w=n.getItem(g,0),C=w.layout,x=C.firstColumn,I=this._columnStyles[x.$_hash],E=l>0?l-h+1:0;for(o=0;o<h-1;o++)m.addBlank(o+c,y);for(C.isProxy||w.spanned?m.addBlank(v,I):(this._buildValueCell(t,r,m,i,C,v,v),r.addMerge(b,v,C._dspan,C._defColSpan+E)),o=0;o<E;o++)m.addBlank(1+o+v,I);for(v=l>0?c+l:c,o=1;o<a;o++){var S=o+v;if(x=(C=(w=n.getItem(g,o)).layout).firstColumn,I=this._columnStyles[x.$_hash],C.isProxy||w.spanned)m.addBlank(S,I);else{var O=C.parent,R=O&&O.vertical,D=C.spanCallback,k=D?D(t.handler,C,i.index)-1:void 0;void 0===k&&(k=C.getDataSpan()-1);var P=0;if(k>0){var T=0,M=C.vindex+1;if(R)for(;T++<k&&T<s;){P+=O.getVisible(M++)._dspan,n.getItem(g+T,o).spanned=!0}else for(;T++<k&&o+T<a&&M<O.visibleCount;){P+=O.getVisible(M++)._cspan,n.getItem(g,o+T).spanned=!0}}this._buildValueCell(t,r,m,i,C,S,v),R?r.addMerge(b,S,C._dspan+P,C._cspan):r.addMerge(b,S,C._dspan,C._cspan+P)}}this._exportOptions.showLevelOutline&&r.setRowLevel(u,i.level)}this._currentRow+=s,r.setLastRow(this._currentRow-1)},e.prototype.prepare=function(){},e.prototype.finallize=function(){},e.prototype.save=function(){var t=this.grid.doc,e=st(t),i=this._multiOptions;function o(i){if(e.navigator.msSaveOrOpenBlob)e.navigator.msSaveOrOpenBlob(i,n);else if(e.navigator.msSaveBlob)e.navigator.msSaveBlob(i,n);else{var o=t.createElement("a");t.body.appendChild(o);var r=URL.createObjectURL(i);o.href=r,o.download=n,o.click(),t.body.removeChild(o)}}function r(e){var o='<form name="tempForm" action="'+i.url+'" method="post">';if(o+='<input type="hidden" name="fileName" value = "'+n+'"/>',o+='<input type="hidden" name="data" value = "'+e+'"/>',s)for(var r in s)o+='<input type="hidden" name="'+r+'" value = "'+s[r]+'"/>';o+='<input id="submitBtn" type="submit"/>',o+="</form>";var a=t.createElement("div");a.innerHTML=o,t.body.appendChild(a),t.getElementById("submitBtn").click(),t.body.removeChild(a)}var n=i.fileName,s=i.params,a="local"==i.target;if(JSZip.support.blob||!a){var l=new JSZip,h=this._workbook.createParts();for(var u in h){var c=h[u];c.indexOf('xmlns=""')>=0&&(c=c.replace(/ xmlns=""/g,"").replace(/xmlns=""/g,"")),l.file(u,c)}if(a)l.generateAsync?l.generateAsync({type:"blob",compression:"DEFLATE",streamFiles:!0},(function(t){i.progressCallback&&i.progressCallback(null,"zip",100,t.percent)})).then((function(t){i.done&&"function"==typeof i.done&&i.done(),o(t)})):(i.done&&"function"==typeof i.done&&i.done(),o(l.generate({type:"blob",compression:"DEFLATE"})));else if(i.target===Ru.STREAM)if(l.generateAsync)l.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},(function(t){i.progressCallback&&i.progressCallback(null,"zip",100,t.percent)})).then((function(t){i.done&&"function"==typeof i.done&&i.done(t)}));else{var d=l.generate({type:"base64",compression:"DEFLATE"});i.done&&"function"==typeof i.done&&i.done(d)}else l.generateAsync?l.generateAsync({type:"base64",compression:"DEFLATE",streamFiles:!0},(function(t){i.progressCallback&&i.progressCallback(null,"zip",100,t.percent)})).then((function(t){i.done&&"function"==typeof i.done&&i.done(),r(t)})):(i.done&&"function"==typeof i.done&&i.done(),r(l.generate({type:"base64",compression:"DEFLATE"})))}else alert("not supported on this browser")},e.prototype._prepareCount=function(t,e){for(var i=0,o=0,r=e.length;o<r;o++){var n=void 0,s=e[o].grid;if(s instanceof $c)if(t.allItems&&this._rowGrouped){n=s.itemSource.getAllItems();var a=s.layoutManager.fixedItemCount;if(a>0)for(var l=0;l<a;l++)n.splice(l,0,s.getItem(l))}else t.pagingAllItems&&s.paged?n=s.itemSource.getPagingAllItems():t.onlyCheckedItems&&!s.rowGrouped&&(n=s.getCheckedItems(!1));else s instanceof Qd&&t.allItems&&(n=s.getAllItems());i+=n?n.length:s.itemCount}return i},e.prototype._inheritStyles=function(t){for(var e={length:0},i=0,o=t.length;i<o;i++)t[i]&&Hu.extendCssStyle(t[i],e);return e},e.prototype._prepareCommonStyles=function(t){var e,i,o=this._preparer.documentCssStyles,r=Hu.getSelectorStyle(o,"table"),n=Hu.getSelectorStyle(o,"tr"),s=Hu.getSelectorStyle(o,"td"),a=this._inheritStyles([r,n,s]),l=this._inheritStyles([Hu.getSelectorStyle(o,".rg-root"),Hu.getSelectorStyle(o,"html")]),h=Hu.getSelectorStyle(o,".rg-header"),u=Hu.getSelectorStyle(o,".rg-footer"),c=Hu.getSelectorStyle(o,".rg-header-summary"),d=Hu.getSelectorStyle(o,".rg-body"),p=Hu.getSelectorStyle(o,".rg-fixed-body"),_=this._inheritStyles([Hu.getSelectorStyle(o,".rg-root table"),Hu.getSelectorStyle(o,".rg-root .rg-table"),Hu.getSelectorStyle(o,".rg-root table tr"),Hu.getSelectorStyle(o,".rg-root .rg-table tr"),Hu.getSelectorStyle(o,".rg-root table tr td"),Hu.getSelectorStyle(o,".rg-root .rg-table tr td"),Hu.getSelectorStyle(o,".rg-root .rg-table td")]),f=this._inheritStyles([_,Hu.getSelectorStyle(o,".rg-header table"),Hu.getSelectorStyle(o,".rg-header .rg-table"),Hu.getSelectorStyle(o,".rg-header table tr"),Hu.getSelectorStyle(o,".rg-header .rg-table tr"),Hu.getSelectorStyle(o,".rg-header table tr td"),Hu.getSelectorStyle(o,".rg-header .rg-table tr td")]),g=this._inheritStyles([_,Hu.getSelectorStyle(o,".rg-footer table"),Hu.getSelectorStyle(o,".rg-footer .rg-table"),Hu.getSelectorStyle(o,".rg-footer table tr"),Hu.getSelectorStyle(o,".rg-footer .rg-table tr"),Hu.getSelectorStyle(o,".rg-footer table tr td"),Hu.getSelectorStyle(o,".rg-footer .rg-table tr td")]),y=this._inheritStyles([_,Hu.getSelectorStyle(o,".rg-header-summary table"),Hu.getSelectorStyle(o,".rg-header-summary .rg-table"),Hu.getSelectorStyle(o,".rg-header-summary table tr"),Hu.getSelectorStyle(o,".rg-header-summary .rg-table tr"),Hu.getSelectorStyle(o,".rg-header-summary table tr td"),Hu.getSelectorStyle(o,".rg-header-summary .rg-table tr td")]),m=this._inheritStyles([_,Hu.getSelectorStyle(o,".rg-body table"),Hu.getSelectorStyle(o,".rg-body .rg-table"),Hu.getSelectorStyle(o,".rg-body table tr"),Hu.getSelectorStyle(o,".rg-body .rg-table tr"),Hu.getSelectorStyle(o,".rg-body table tr td"),Hu.getSelectorStyle(o,".rg-body .rg-table tr td")]),b=this._inheritStyles([_,Hu.getSelectorStyle(o,".rg-fixed-body .rg-table"),Hu.getSelectorStyle(o,".rg-fixed-body .rg-table tr"),Hu.getSelectorStyle(o,".rg-fixed-body table tr"),Hu.getSelectorStyle(o,".rg-fixed-body .rg-table tr td"),Hu.getSelectorStyle(o,".rg-fixed-body table tr td"),Hu.getSelectorStyle(o,".rg-fixed-body .rg-data-row")]),v=this._inheritStyles([_,Hu.getSelectorStyle(o,".rg-rowgroup-bar .rg-table"),Hu.getSelectorStyle(o,".rg-rowgroup-bar .rg-table tr"),Hu.getSelectorStyle(o,".rg-rowgroup-bar table tr"),Hu.getSelectorStyle(o,".rg-rowgroup-bar .rg-table tr td"),Hu.getSelectorStyle(o,".rg-rowgroup-bar table tr td")]),w=this._inheritStyles([_,Hu.getSelectorStyle(o,".rg-rowgroup-head .rg-table"),Hu.getSelectorStyle(o,".rg-rowgroup-head .rg-table tr"),Hu.getSelectorStyle(o,".rg-rowgroup-head table tr"),Hu.getSelectorStyle(o,".rg-rowgroup-head .rg-table tr td"),Hu.getSelectorStyle(o,".rg-rowgroup-head table tr td")]),C=this._inheritStyles([_,Hu.getSelectorStyle(o,".rg-rowgroup-foot .rg-table"),Hu.getSelectorStyle(o,".rg-rowgroup-foot .rg-table tr"),Hu.getSelectorStyle(o,".rg-rowgroup-foot table tr"),Hu.getSelectorStyle(o,".rg-rowgroup-foot .rg-table tr td"),Hu.getSelectorStyle(o,".rg-rowgroup-foot table tr td")]),x=this._inheritStyles([_,m]),I=Hu.getSelectorStyle(o,".rg-header-cell"),E=Hu.getSelectorStyle(o,".rg-footer-cell"),S=Hu.getSelectorStyle(o,".rg-header-summary-cell"),O=Hu.getSelectorStyle(o,".rg-data-cell"),R=Hu.getSelectorStyle(o,".rg-rowgroup-header"),D=Hu.getSelectorStyle(o,".rg-rowgroup-footer"),k=Hu.getSelectorStyle(o,".rg-rowgroup-footer-cell"),P=this._inheritStyles([l,Hu.getSelectorStyle(o,".rg-rowgroup-head"),a,w]),T=this._inheritStyles([l,Hu.getSelectorStyle(o,".rg-rowgroup-foot"),a,C]),M=this._inheritStyles([l,Hu.getSelectorStyle(o,".rg-rowgroup-bar"),a,Hu.getSelectorStyle(o,".rg-rowgroup-bar-cell"),v]),L=Hu.getSelectorStyle(o,".rg-data-row"),F=Hu.getSelectorStyle(o,".rg-fixed-row"),N=this._inheritStyles([l,Hu.getSelectorStyle(o,".rg-rowbarcontainer"),a,_,Hu.getSelectorStyle(o,".rg-rowbarcontainer .rg-table tr"),Hu.getSelectorStyle(o,".rg-rowbarcontainer table tr"),Hu.getSelectorStyle(o,".rg-rowbarcontainer .rg-table tr td"),Hu.getSelectorStyle(o,".rg-rowbarcontainer table tr td"),Hu.getSelectorStyle(o,".rg-rowbarcontainer .rg-table tr td.rg-rowindicator-cell")]),V=this._inheritStyles([l,Hu.getSelectorStyle(o,".rg-foot"),a,_,Hu.getSelectorStyle(o,".rg-foot .rg-table tr td"),Hu.getSelectorStyle(o,".rg-rowindicator-foot")]),B=this._inheritStyles([l,Hu.getSelectorStyle(o,".rg-sum"),a,_,Hu.getSelectorStyle(o,".rg-sum .rg-table tr td"),Hu.getSelectorStyle(o,".rg-rowindicator-sum")]);this._indicatorCellStyle=this._parseStyles(this._workbook,N),this._indicatorFootStyle=this._parseStyles(this._workbook,V),this._indicatorSumStyle=this._parseStyles(this._workbook,B);var $=this._inheritStyles([l,Hu.getSelectorStyle(o,".rg-rowbarcontainer"),a,_,Hu.getSelectorStyle(o,".rg-rowbarcontainer .rg-table tr"),Hu.getSelectorStyle(o,".rg-rowbarcontainer table tr"),Hu.getSelectorStyle(o,".rg-rowbarcontainer .rg-table tr td"),Hu.getSelectorStyle(o,".rg-rowbarcontainer table tr td.rg-checkbar-cell")]),A=this._inheritStyles([l,Hu.getSelectorStyle(o,".rg-foot"),a,_,Hu.getSelectorStyle(o,".rg-foot .rg-table tr td"),Hu.getSelectorStyle(o,".rg-checkbar-foot")]),j=this._inheritStyles([l,Hu.getSelectorStyle(o,".rg-sum"),a,_,Hu.getSelectorStyle(o,".rg-sum .rg-table tr td"),Hu.getSelectorStyle(o,".rg-checkbar-sum")]);this._checkBarCellStyle=this._parseStyles(this._workbook,$),this._checkBarFootStyle=this._parseStyles(this._workbook,A),this._checkBarSumStyle=this._parseStyles(this._workbook,j),i=(e=t.header.exportStyleName||t.header.styleName)?Hu.getSelectorStyle(o,"."+e):null,i=this._headerCssStyle=this._inheritStyles([l,h,i,a,I,f]),this._headerCellStyle=this._parseStyles(this._workbook,i,!0),this._footerCellStyles=[];for(var H=0;H<t.footers.visibleCount;H++)i=(e=t.footers.getVisible(H).styleName)?Hu.getSelectorStyle(o,"."+e):null,i=this._inheritStyles([l,u,i,a,E,g]),this._footerCellStyles.push(this._parseStyles(this._workbook,i,!0));this._summaryCellStyles=[];for(H=0;H<t.headerSummaries.visibleCount;H++)i=(e=t.headerSummaries.getVisible(H).styleName)?Hu.getSelectorStyle(o,"."+e):null,i=this._inheritStyles([l,c,i,a,S,y]),this._summaryCellStyles.push(this._parseStyles(this._workbook,i,!0));if(this._groupFooterCellStyles=[],t instanceof $c)for(H=0;H<t.rowGroup.footers.count;H++){var W=t.rowGroup.footers.get(H);i=(e=W.exportStyleName||W.styleName)?Hu.getSelectorStyle(o,"."+e):null,i=this._inheritStyles([l,D,i,a,k,x]),this._groupFooterCellStyles.push(this._parseStyles(this._workbook,i,!0))}i=this._cellCssStyle=this._inheritStyles([l,d,r,m,L,O]),this._bodyCellStyle=this._parseStyles(this._workbook,i,!1),i=this._inheritStyles([l,d,r,F,m,O]),this._bodyFixedCellStyle=this._parseStyles(this._workbook,i,!1),i=this._fixedCellCssStyle=this._inheritStyles([l,p,r,L,b,O]),this._fixedCellStyle=this._parseStyles(this._workbook,i,!1),this._groupHeaderStyle=this._parseStyles(this._workbook,this._inheritStyles([l,R])),this._groupFooterCellStyle=this._parseStyles(this._workbook,this._inheritStyles([l,r,D,k,m])),this._indentHeadStyle=this._parseStyles(this._workbook,P),this._indentFootStyle=this._parseStyles(this._workbook,T),this._indentBarStyle=this._parseStyles(this._workbook,M),this._dynamicStyles={}},e.prototype._exportGridAsync=function(t,e,i,o){if(void 0===o&&(o=null),i<e.exportGrids.length){var r=e.exportGrids[i];setTimeout(function(){this._exportGrid(t,r.options,function(){o()}.bind(this))}.bind(this))}},e.prototype._exportGrid=function(t,e,i){var o=e.grid;this._preparer=new Wu(o,e),this._exportOptions=e,this.indicator=e.indicatorVisible(o)?o.rowIndicator:null,this.checkBar=e.checkBarVisible(o)?o.checkBar:null,this.header=e.headerVisible(o)?o.header:null,this.headerSummary=e.headerSummaryVisible(o)?o.headerSummary:null,this.footer=e.footerVisible(o)?o.footer:null,this.indicatorHead=this.indicator&&this.indicator.headText||"No",this.indicatorFoot=this.indicator&&this.indicator.footText||"",this.indicatorSummary=this.indicator&&this.indicator.sumText||"",this.checkBarHead=this.checkBar&&this.checkBar.headText||"",this.checkBarFoot=this.checkBar&&this.checkBar.footText||"",this.checkBarSummary=this.checkBar&&this.checkBar.sumText||"",this._sheetName=e.sheetName,this._workbook=t,this.buildBook(function(){this._preparer&&this._preparer.dispose(),i&&i()}.bind(this))},e.prototype._changeFormatId=function(t,e,i){return t.changeFormatId(e,i)},e.prototype._parseStyles=function(t,e,i){return t.addStyle(e,!0,!0,!0,i)},e.prototype._extendStyles=function(t,e,i,o,r){return void 0===o&&(o=!0),t.extendStyle(e,i,o,r)},e.prototype.$_summaryStyleSet=function(t,e,i){var o=this._exportOptions,r=this._workbook,n=void 0;if(e){var s=e.exportStyleName||e.styleName,a=void 0;if(o.applyDynamicStyles)if(t instanceof is){var l=new an;s=(a=t.getCellStyle(t.getCell(e.column.layout),l,!1)).exportStyleName||a.styleName||s}else if(t instanceof hu){l=new fn;s=(a=this.grid.rowGroup.getFooterCellStyle(t,l,!1)).exportStyleName||a.styleName||s}var h=void 0,u=void 0;if(((h=a&&a.numberFormat||e.numberFormat)||(h=a&&a.datetimeFormat||e.datetimeFormat))&&(h=Uu.convertNumberFormat(h)),h&&((u=e.prefix)&&(h='"'+u+'"'+h),(u=e.suffix)&&(h=h+'"'+u+'"'),n=r.addNumberFormat(h)),s||void 0!==n){for(var c=this._preparer.documentCssStyles,d=s?s.trim().split(" "):[],p=[],_=0,f=d.length;_<f;_++)p.push(Hu.getSelectorStyle(c,"."+d[_]));if(e.$_owner.type){var g=e.$_owner.type+"=styleName="+s+"formatId="+n,y=this._dynamicStyles;return y[g]||(y[g]=this._extendStyles(r,i,this._inheritStyles(p),!0,n)),y[g]}return this._extendStyles(r,i,this._inheritStyles(p),!0,n)}}return i},e.prototype._buildColumns=function(t){for(var i,o,n,s,a,l=this._exportOptions,h=this._workbook,c=h.currentSheet,d=this._preparer,p=0;p<this._startCol;p++)c.addColumn(l.xOffsetWidth/e.PIXELS_PER_CHAR,null);if(this.indicator&&(a=Math.round(t.rowIndicator.minWidth/e.PIXELS_PER_CHAR),c.addColumn(a,null)),this.checkBar&&(a=Math.round(t.checkBar.width/e.PIXELS_PER_CHAR),c.addColumn(a,null)),l.indenting&&(t instanceof $c&&this._rowGrouped&&!this._mergedGrouped?this._indents=this._rowLevels-(t.rowGroup.expandedAdornments===u.SUMMARY?0:1):t instanceof Qd&&(this._indents=this._rowLevels-1),this._indents>0))for(i=0;i<this._indents;i++)a=Math.max(this._indentWidth,1),c.addColumn(a,null);var _=t.formatOptions;this._columnStyles={},this._columnFixedStyles={},this._columnFooterStyles={},this._columnSummaryStyles={},this._columnGroupFooterStyles={};var f=d.colCount,g=d.dataRowCount,y=!1;for(i=0;i<g;i++)for(o=0;o<f;o++){var m=d.getItem(i,o).layout;if(n=m.firstColumn,0===i&&(a=Math.round(m._cellWidth/e.PIXELS_PER_CHAR),c.addColumn(a,null,l.hiddenColumns.indexOf(n.name)>=0)),s=n.$_hash,!this._columnStyles[s]){var b=t.dataSource;if(n instanceof mn){var v=l.exportLink&&n.renderer&&n.renderer.type==pr.TYPE&&!n.excelFormat,w=b.getField(n.dataIndex),C=this._textFormatId,x=w?w.dataType:r.TEXT;x===r.NUMBER?C=this._numberFormatId:x===r.DATETIME&&(C=this._dateFormatId);var I=n.excelFormat,E=void 0;null!=I?C="number"==typeof I||parseInt(I)>0?parseInt(I):h.addNumberFormat(I):v?C=0:(x==r.NUMBER?"string"==typeof(I=null===n.numberFormat?void 0:n.numberFormat||l.numberFormat||_.numberFormat)&&(I=Uu.convertNumberFormat(I)):x==r.DATETIME&&"string"==typeof(I=n.datetimeFormat||l.datetimeFormat||_.datetimeFormat)&&(I=Uu.convertDateFormat(I)),I&&((E=n.prefix)&&(I='"'+E+'"'+I),(E=n.suffix)&&(I=I+'"'+E+'"'),C=h.addNumberFormat(I))),this._columnStyles[s]=this._changeFormatId(h,m.isFixed?this._fixedCellStyle:this._bodyCellStyle,C),this._columnFixedStyles[s]=this._changeFormatId(h,this._bodyFixedCellStyle,C),this._columnFooterStyles[s]=[],this._columnSummaryStyles[s]=[],this._columnGroupFooterStyles[s]=[];for(var S=0;S<t.footers.visibleCount;S++){var O=t.footers.getVisible(S),R=n.footers.get(O._childIndex);this._columnFooterStyles[s][S]=this.$_summaryStyleSet(O,R,this._footerCellStyles[S])}for(var D=0;D<t.headerSummaries.visibleCount;D++){var k=t.headerSummaries.getVisible(D),P=n.headerSummaries.get(k._childIndex);this._columnSummaryStyles[s][D]=this.$_summaryStyleSet(k,P,this._summaryCellStyles[D])}if(t instanceof $c)for(var T=0;T<t.rowGroup.footers.count;T++){var M=t.rowGroup.footers.get(T),L=n.groupFooters.get(M.index);this._columnGroupFooterStyles[s][T]=this.$_summaryStyleSet(null,L,this._groupFooterCellStyles[T])}}t instanceof $c&&(l.separateRows||l.onlyCheckedItems&&!t.rowGrouped||n instanceof mn&&(n.mergeRule||t.rowGroup.mergeMode&&t.isGroupedColumn(n))&&(y=!0))}}this._columnMerged=y},e.prototype._buildTitleCommon=function(t,e,i){if(e&&e.visible){var o=this._currentRow,r=this._startCol,n=void 0,s=t.currentSheet,a=void 0;for(a=0;a<e.spaceTop;a++)for(n=s.addRow(o+a,void 0),0;a<i;a++)n.addBlank(r+a,void 0);o+=e.spaceTop;var l=e.message,h=void 0;if(e.styleName){var u=this._preparer.documentCssStyles,c=[];e.styleName.split(" ").forEach((function(t){c.push(Hu.getSelectorStyle(u,"."+t))})),h=this._parseStyles(t,this._inheritStyles(c),!0)}else h=this._parseStyles(t,e.cssStyle,!0);for(n=s.addRow(o,e.height),a=0;a<i;a++)0==a?(n.addText(r,l,h),s.addMerge(o,r,1,i)):n.addBlank(r+a,h);for(o++,a=0;a<e.spaceBottom;a++)for(n=s.addRow(o+a,void 0),0;a<i;a++)n.addBlank(r+a,void 0);o+=e.spaceBottom,this._currentRow=o}},e.prototype._buildDocumentTitle=function(t){var e=this._exportOptions,i=t,o=this._preparer.colCount;this.indicator&&o++,this.checkBar&&o++,this._buildTitleCommon(i,e.documentTitle,o),this._buildTitleCommon(i,e.documentSubtitle,o)},e.prototype._buildDocumentTail=function(t){var e=this._exportOptions,i=t,o=this._preparer.colCount;this.indicator&&o++,this.checkBar&&o++,this._buildTitleCommon(i,e.documentTail,o)},e.prototype._buildIndicatorCell=function(t,e,i,o,r,n,s){var a=this._indicatorCellStyle;if((Array.isArray(i)?i[0]:i).addNumber(n,o,a),s>1){for(var l=1;l<s;l++)i[l].addBlank(n,a);e.addMerge(r,n,s,1)}},e.prototype._buildCheckBarCell=function(t,e,i,o,r,n,s){var a=this._checkBarCellStyle,l=Array.isArray(i)?i[0]:i,h=this._exportOptions.checkMark;if(l.addText(n,o?h:"",a),s>1){for(var u=1;u<s;u++)i[u].addBlank(n,a);e.addMerge(r,n,s,1)}},e.prototype._buildValueCell=function(t,e,i,o,n,s,a){void 0===a&&(a=0);var l,h,u,c=this._workbook,d=o.index>=0&&o.index<t.fixedOptions.rowCount,p=t.body,_=this._exportOptions,f=Wn.tempItem(t,o,n),g=n.firstColumn,y=p.getRowStyle(o,d,_.applyDynamicStyles),m=y.exportStyleName||y.styleName,b=g.exportStyleName||g.styleName;_.applyDynamicStyles&&(h=p.getIndexCellStyle(f,!1));var v=(!n.isFixed&&d?this._columnFixedStyles[g.$_hash]:this._columnStyles[g.$_hash])||this._bodyCellStyle;if(_.applyFixed&&(!t.isTree()&&d&&e.setFixedInfo(i.index+1,void 0),n.$_fixed&&e.setFixedInfo(void 0,s+1)),g.blankWhenExport)i.addBlank(s,v);else if(g instanceof mn){var w=g.dataIndex,C=t.dataSource.getField(w),x=_.exportLink&&!g.excelFormat&&g.renderer&&g.renderer.type==pr.TYPE,I=_.exportTemplate&&g.renderer&&g.renderer.type===wr.TYPE,E=void 0;if(C){var S=o.getData(w);if(E=g.displayCallback,m&&!n.isFixed||b||h){var O=void 0,R=void 0,D=[n.isFixed?this._fixedCellCssStyle:this._cellCssStyle];if(h&&"object"==typeof h){var k=h;O="string"==typeof(O=h.exportStyleName||h.styleName||b)?O:void 0;var P=t.dataSource.getField(g.dataIndex),T=void 0;if(R=h.excelFormat);else if(P.dataType==r.NUMBER?R=(T=k.numberFormat)?Uu.convertNumberFormat(T):void 0:P.dataType==r.DATETIME&&(R=(T=k.datetimeFormat)?Uu.convertDateFormat(T):void 0),R){var M=k.prefix;M&&(R='"'+M+'"'+R);var L=k.suffix;L&&(R=R+'"'+L+'"')}}else O="string"==typeof h?h:void 0;var F=this._preparer.documentCssStyles,N=this._dynamicStyles;if(N[Y=g.$_hash+"="+m+"="+b+"="+JSON.stringify(h)+"="+!0])v=N[Y];else{var V=[];m&&!n.isFixed&&Array.prototype.push.apply(V,m.trim().split(" ")),b&&Array.prototype.push.apply(V,b.trim().split(" ")),O&&Array.prototype.push.apply(V,O.trim().split(" "));for(var B=0,$=V.length;B<$;B++)D.push(Hu.getSelectorStyle(F,"."+V[B]));var A=void 0;R&&(A=c.addNumberFormat(R)),u=this._inheritStyles(D),x&&(u["font-decoration"]="underline",u.color="blue");var j=u.whiteSpace||u["white-space"],H=null!=j&&"none"!=j&&"nowrap"!=j;v=this._extendStyles(c,v,u,H,A),this._dynamicStyles[Y]=v}}switch(C.dataType){case"number":(_.numberCallback||E)&&(S=_.numberCallback?_.numberCallback(o.index,g.name,S):E(t.handler,f.proxy(),S));var W=g.excelFormulaExprStatement,G=void 0;if(W){var U=this._excelFormulaRuntime;U.setItemIndex(i.index,a),U.setColumns(this._preparer._dataCells[i._row]),G=W.evaluate(U)}null!=S||G?"number"==typeof S?i.addNumber(s,S,v,G):i.addText(s,S,v):i.addBlank(s,v);break;case"datetime":case"date":S?_.datetimeCallback||E?(S=_.datetimeCallback?_.datetimeCallback(o.index,g.name,S):E(t.handler,f.proxy(),S))instanceof Date?i.addDate(s,S,v):i.addText(s,S,v):i.addDate(s,S,v):_.nullDateText?i.addText(s,_.nullDateText,v):i.addBlank(s,v);break;case"boolean":_.booleanCallback||E?(S=_.booleanCallback?_.booleanCallback(o.index,g.name,S):E(t.handler,f.proxy(),S),i.addText(s,S,v)):_.booleanFormatter?(S=_.booleanFormatter.formatValue(S),i.addText(s,S,v)):i.addBool(s,S,v);break;default:if(l=S||"",_.lookupDisplay&&(g.labelField||g.lookupDisplay))l=Mo.getText(o,g);else if(C.dataType===r.OBJECT&&"object"==typeof S){var z=g.objectKey||g.objectCallback,Y=z?g.objectKey:C.objectKey,q=z?g.objectCallback:C.objectCallback;l=q&&"function"==typeof q?q(C.orgFieldName,o.dataRow,S):Y&&S.hasOwnProperty(Y)?S[Y]:JSON.stringify(S)}else if(I){this._templateRenderer?this._templateRenderer.clearAndAssignFrom(g.renderer):this._templateRenderer=t.delegate.createRenderer(wr.TYPE,g.renderer,null);var K=this._templateRenderer._parser,X=g.renderer.callback,Z=t.body.getCell(f,!1),J=X?X.call(this,t.handler,Z,-1,-1):K.realize(t,Z,null,this._templateRenderer.valueCallback);l=J?J.replace(/<br[\s/]*>/gi,"\n").replace(/(<([^>]+)>)/gi,""):""}else null!=S&&(l=g.textFormatter?g.textFormatter.getText(S):l);if("number"==typeof(l=_.textCallback?_.textCallback(o.index,g.name,l):E&&!g.textFormatter?E(t.handler,f.proxy(),S):l))i.addNumber(s,l,v);else if(l&&x){Z=t.body.getCell(f,!1),t.getBodyCellAt(f);this._linkRenderer?this._linkRenderer.assignFrom(g.renderer):this._linkRenderer=t.delegate.createRenderer(pr.TYPE,g.renderer,null);var Q=this._linkRenderer;if(Q){var tt=Q.$_getUrl(t,Z);i.addLink(s,l,tt,v)}else i.addText(s,l,v)}else l?i.addText(s,l,v):i.addBlank(s,v)}}else i.addBlank(s,v)}else if(g instanceof bn){var et=g.renderer;if(et&&et.type&&et.type!=Zs.TYPE){var it=this._preparer;_.exportSeriesColumn&&Js.interfaced(et)&&it.sparkColumns[g.$_hash]?i.addSparkLine(s,a,it.sparkColumns[g.$_hash],v):i.addBlank(s,v)}else{this._seriesCell.setIndex(f);var ot=this._seriesCell.value;if(ot){T=No.getText(ot,",");i.addText(s,T,v)}else i.addBlank(s,v)}}},e.CSS_HEAD="rg-header",e.CSS_FOOT="rg-footer",e.CSS_BODY="rg-body",e.CSS_FIXED="rg-fixed-body",e.CSS_TABLE="rg-table",e.CSS_ROWGROUP_BAR="rg-rowgroup-bar",e.CSS_ROWGROUP_HEAD="rg-rowgroup-head",e.CSS_ROWGROUP_FOOT="rg-rowgroup-foot",e.CSS_HEAD_CELL="rg-header-cell",e.CSS_INDICATOR="rg-rowindicator-cell",e.CSS_CHECK="rg-checkbar-cell",e.CSS_DATA_ROW="rg-data-row",e.PIXELS_PER_CHAR=7,e.LINE_HEIGHT=.75,e}(Nu),op=function(){function t(){}return t.getColumn=function(t,e){if(e){if("string"==typeof e)return t.columnByName(e);if(e instanceof gn)return e;if(e.$_hash)return t.columnByHash(e.$_hash);if(e.name)return t.columnByName(e.name)}return null},t.getItemProxy=function(e,i){var o=e.parent,r={type:void 0,id:e.id,parentId:null==o?-1:o.id,itemIndex:e.index,index:e.index,dataRow:-1,checked:e.checked};return i&&(r.childIndex=e.childIndex,r.level=e.level),e instanceof io?(r.type="row",r.dataRow=e.dataRow):e instanceof oo?(r.count=e.children.length,r.expanded=e.expanded,e instanceof ro||e instanceof zr?(r.type="group",r.footerId=e.footer?e.footer.id:-1,i&&(r.firstItem=t.getItemProxy(e.firstItem),r.firstDataItem=t.getItemProxy(e.firstDataItem),r.dataRows=e.getRows())):e instanceof Dr&&(r.type="tree",r.dataRow=e.dataRow?e.dataRow:-1)):e instanceof no&&(r.type="footer"),r},t.getItemIndices=function(t){for(var e=[],i=0,o=t.length;i<o;i++)e.push(t[i].index);return e},t.getValues=function(t,e){var i={},o=e.dataSource;if(t.isItemEditing(e))return(i=e.getRowObject()).__rowId=e.dataRow,i;if(e.dataRow>=0){if(e instanceof Dr){var r=e.row,n=r.values;i.__rowId=r.rowId;for(var s=0,a=o.fieldCount;s<a;s++){i[o.getOrgFieldName(s)]=n[s]}}else(i=o.getRowObject(e.dataRow)).__rowId=e.dataRow;return i}return null},t.getDisplayValues=function(t,e){var i=t.getDataColumns();if(e){for(var o=e.getRowObject(),r=new fn,n=0,s=i.length;n<s;n++){var a=e.index>=0?Hn.temp(t,e.index,i[n]):Wn.tempItem(t,e,i[n]),l=t.body.getCell(a,!1);l._index=a,r.clear(),r.assign(i[n]),t.body.getCellStyle(l,r);var h=r.toFormatter(null);o[i[n].fieldName]=Mo._getDisplayText(t,e,i[n],o[i[n].fieldName],h)}return o}},t.setValues=function(t,e,i,o){var r,n,s=e.dataSource,a=s.fieldCount,l=!1;if(t.isItemEditing(e)){if(e)e.values=i;else for(var h=0;h<a;h++){var u=s.getOrgFieldName(h);i.hasOwnProperty(u)&&e.setData(h,i[u])}}else if((n=e.dataRow)>=0)if(s instanceof Ai){var c=s.rowById(n);if(c){if(l=!1,r=c.values||[],Array.isArray(i)){h=0;for(var d=i.length;h<d&&!(l=!s.getField(h).equalValues(r[h],i[h]));h++);}else for(h=0;h<a;h++){u=s.getOrgFieldName(h);if(i.hasOwnProperty(u)&&(l=!s.getField(h).equalValues(r[h],i[u])))break}if(!l)return;c.update(i,o)}}else if(s instanceof fi){if(l=!1,r=s.getRow(n),Array.isArray(i))for(h=0,d=i.length;h<d&&!(l=!s.getField(h).equalValues(r[h],i[h]));h++);else for(h=0;h<a;h++){u=s.getOrgFieldName(h);if(i.hasOwnProperty(u)&&(l=!s.getField(h).equalValues(r[h],i[u])))break}if(!l)return;s.updateRow(n,i,o)}},t}(),rp=function(){function t(t,e,i){this.onViewActivated=null,this.onCurrentChanging=null,this.onCurrentChanged=null,this.onCurrentRowChanged=null,this.onValidateColumn=null,this.onValidateRow=null,this.onValidationFail=null,this.onColumnCheckedChanged=null,this.onMenuItemClicked=null,this.onContextMenuPopup=null,this.onContextMenuItemClicked=null,this.onCellButtonClicked=null,this.onScrollToBottom=null,this.onTopIndexChanged=null,this.onRowsDeleting=null,this.onRowInserting=null,this.onSelectionChanged=null,this.onSelectionAdded=null,this.onSelectionEnded=null,this.onShowEditor=null,this.onHideEditor=null,this.onEditChange=null,this.onGetEditValue=null,this.onEditCommit=null,this.onEditCanceled=null,this.onItemEditCanceled=null,this.onItemEditCancel=null,this.onEditSearch=null,this.onSearchCellButtonClick=null,this.onCellEdited=null,this.onEditRowChanged=null,this.onEditRowPasted=null,this.onRowsPasted=null,this.onCellPasting=null,this.onItemChecked=null,this.onItemAllChecked=null,this.onErrorClicked=null,this.onSorting=null,this.onSortingChanged=null,this.onFiltering=null,this.onFilteringChanged=null,this.onKeyDown=null,this.onKeyPress=null,this.onKeyUp=null,this.onShowTooltip=null,this.onShowHeaderTooltip=null,this.onColumnPropertyChanged=null,this.onLayoutPropertyChanged=null,this.onGridActivated=null,this.onCopy=null,this.onPaste=null,this.onPasted=null,this.onItemsChecked=null,this.onCellClicked=null,this.onCellDblClicked=null,this.onCellItemClicked=null,this.onCommandStackChanged=null,this.onDataLoadComplated=null,this._view=this._createView(t,e,i),this._listener=this._createListener(this._view)}return t.prototype.dispose=function(){this._view.dispose(),this._view=null,this._container&&this._container.dispose(),this._container=null},Object.defineProperty(t.prototype,"summaryMode",{get:function(){return this._view.itemSource.summaryMode},set:function(t){this._view.itemSource.summaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hideDeletedRows",{get:function(){return this._view.itemSource.hideDeleted},set:function(t){this._view.itemSource.hideDeleted=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortMode",{get:function(){return this._view.itemSource.sortMode},set:function(t){this._view.itemSource.sortMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"undoable",{get:function(){return this._view.undoable},set:function(t){this._view.undoable=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"undoing",{get:function(){return this._view.undoing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"redoing",{get:function(){return this._view.redoing},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"disabled",{get:function(){return this._view.container.disabled},set:function(t){this._view.container.disabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollBarWidth",{get:function(){return this._view.scrollBarWidth},set:function(t){this._view.scrollBarWidth=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"scrollBarHeight",{get:function(){return this._view.scrollBarHeight},set:function(t){this._view.scrollBarHeight=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fixedOptions",{get:function(){return this._view.fixedOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"displayOptions",{get:function(){return this._view.displayOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formatOptions",{get:function(){return this._view.formatOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editOptions",{get:function(){return this._view.editOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"editorOptions",{get:function(){return this._view.editorOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"copyOptions",{get:function(){return this._view.copyOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pasteOptions",{get:function(){return this._view.pasteOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sortingOptions",{get:function(){return this._view.sortingOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filteringOptions",{get:function(){return this._view.filteringOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mobileOptions",{get:function(){return this._view.mobileOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataDropOptions",{get:function(){return this._view.dataDropOptions},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formOptions",{get:function(){return this.formView.options},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rowIndicator",{get:function(){return this._view.rowIndicator},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"stateBar",{get:function(){return this._view.stateBar},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkBar",{get:function(){return this._view.checkBar},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"header",{get:function(){return this._view.header},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"footer",{get:function(){return this._view.footer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"footers",{get:function(){return this._view.footers},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerSummary",{get:function(){return this._view.headerSummary},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"headerSummaries",{get:function(){return this._view.headerSummaries},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"formView",{get:function(){return this._view.container.formView},enumerable:!0,configurable:!0}),t.prototype.ping=function(t){this._view instanceof Pu&&alert(t)},t.prototype.refresh=function(t){this._view.refreshView(t)},t.prototype.beginUpdate=function(){this._view.beginUpdate()},t.prototype.endUpdate=function(t){this._view.endUpdate(t)},t.prototype.isVisible=function(){return this._view.visible},t.prototype.setVisible=function(t){this._view.visible=t},t.prototype.getItemCount=function(){return this._view.itemCount},t.prototype.getDataRow=function(t){var e=this._view.getItem(t);return e?e.dataRow:-1},t.prototype.getRowsOfItems=function(t){var e=[];if(t)for(var i=0,o=t.length;i<o;i++){var r=this._view.getItem(t[i]);r&&e.push(r.dataRow)}return e},t.prototype.getItemIndex=function(t){return this._view.getItemIndexOfRow(t)},t.prototype.getItemsOfRows=function(t){return this._view.getItemIndicesOfRows(t)},t.prototype.removeColumn=function(t){return this._view.removeColumn(t)},t.prototype.restoreColumns=function(){this._view.restoreColumns()},t.prototype.getDataSource=function(){return this._dataDelegator},t.prototype.setDataSource=function(t){this._dataDelegator=t,this._dataProvider=t?t.getProvider():null,this._view.dataSource=this._dataProvider},t.prototype.getOptions=function(){return{summaryMode:this._view.itemSource.summaryMode.toString(),fixed:this.fixedOptions,display:this.displayOptions,format:this.formatOptions,edit:this.editOptions,editor:this.editorOptions,copy:this.copyOptions,paste:this.pasteOptions,sorting:this.sortingOptions,filtering:this.filteringOptions,dataDrop:this.dataDropOptions,rowIndicator:this.rowIndicator,checkBar:this.checkBar,stateBar:this.stateBar,header:this.header,footer:this.footer,footers:this.footers,headerSummary:this.headerSummary,headerSummaries:this.headerSummaries}},t.prototype.setOptions=function(t){t&&(this._view.setOptions(t),t.fixed&&this.setFixedOptions(t.fixed),t.display&&this.setDisplayOptions(t.display),t.format&&this.setFormatOptions(t.format),t.edit&&this.setEditOptions(t.edit),t.editor&&this.setEditorOptions(t.editor),t.copy&&this.setCopyOptions(t.copy),t.paste&&this.setPasteOptions(t.paste),t.sorting&&this.setSortingOptions(t.sorting),t.filtering&&this.setFilteringOptions(t.filtering),t.dataDrop&&this.setDataDropOptions(t.dataDrop),t.rowIndicator&&this.setRowIndicator(t.rowIndicator),t.checkBar&&this.setCheckBar(t.checkBar),t.stateBar&&this.setStateBar(t.stateBar),t.header&&this.setHeader(t.header),t.footer&&this.setFooter(t.footer),t.footers&&this.setFooters(t.footers),t.headerSummary&&this.setHeaderSummary(t.headerSummary),t.headerSummaries&&this.setHeaderSummaries(t.headerSummaries))},t.prototype.getFixedOptions=function(){return this._view.fixedOptions.toProxy()},t.prototype.setFixedOptions=function(t){this._view.fixedOptions.assignFrom(t)},t.prototype.getDisplayOptions=function(){return this._view.displayOptions.toProxy()},t.prototype.setDisplayOptions=function(t){this._view.displayOptions.assignFrom(t)},t.prototype.getFormatOptions=function(){return this._view.formatOptions.toProxy()},t.prototype.setFormatOptions=function(t){this._view.formatOptions.assignFrom(t)},t.prototype.getEditOptions=function(){return this._view.editOptions.toProxy()},t.prototype.setEditOptions=function(t){this._view.editOptions.assignFrom(t)},t.prototype.getEditorOptions=function(){return this._view.editorOptions.toProxy()},t.prototype.setEditorOptions=function(t){this._view.editorOptions.assignFrom(t)},t.prototype.getCopyOptions=function(){return this._view.copyOptions.toProxy()},t.prototype.setCopyOptions=function(t){this._view.copyOptions.assignFrom(t)},t.prototype.getPasteOptions=function(){return this._view.pasteOptions.toProxy()},t.prototype.setPasteOptions=function(t){this._view.pasteOptions.assignFrom(t)},t.prototype.getSortingOptions=function(){return this._view.sortingOptions.toProxy()},t.prototype.setSortingOptions=function(t){this._view.sortingOptions.assignFrom(t)},t.prototype.getFilteringOptions=function(){return this._view.filteringOptions.toProxy()},t.prototype.setFilteringOptions=function(t){this._view.filteringOptions.assignFrom(t)},t.prototype.getMobileOptions=function(){return this._view.mobileOptions.toProxy()},t.prototype.setMobileOptions=function(t){this._view.mobileOptions.assignFrom(t)},t.prototype.getDataDropOptions=function(){return this._view.dataDropOptions.toProxy()},t.prototype.setDataDropOptions=function(t){this._view.dataDropOptions.assignFrom(t)},t.prototype.getFormOptions=function(){return this.formView.options.toProxy()},t.prototype.setFormOptions=function(t){this.formView.options.assignFrom(t)},t.prototype.getRowIndicator=function(){return this._view.rowIndicator.toProxy()},t.prototype.setRowIndicator=function(t){this._view.rowIndicator.assignFrom(t)},t.prototype.getStateBar=function(){return this._view.stateBar.toProxy()},t.prototype.setStateBar=function(t){this._view.stateBar.assignFrom(t)},t.prototype.getCheckBar=function(){return this._view.checkBar.toProxy()},t.prototype.setCheckBar=function(t){this._view.checkBar.assignFrom(t)},t.prototype.getHeader=function(){return this._view.header.toProxy()},t.prototype.setHeader=function(t){this._view.header.assignFrom(t)},t.prototype.getFooter=function(){return this._view.footer.toProxy()},t.prototype.setFooter=function(t){this._view.footer.assignFrom(t)},t.prototype.getFooters=function(){return this._view.footers.toProxy()},t.prototype.setFooters=function(t){this._view.footers.assignFrom(t)},t.prototype.getHeaderSummary=function(){return this._view.headerSummary.toProxy()},t.prototype.setHeaderSummary=function(t){this._view.headerSummary.assignFrom(t)},t.prototype.getHeaderSummaries=function(){return this._view.headerSummaries.toProxy()},t.prototype.setHeaderSummaries=function(t){this._view.headerSummaries.assignFrom(t)},t.prototype.setCellStyleCallback=function(t){this._view.body.cellStyleCallback=t},t.prototype.setRowStyleCallback=function(t){this._view.body.rowStyleCallback=t},t.prototype.orderBy=function(t,e,i){if(t){var o=[],r=[],a=[],l=this._dataProvider;if(e)for(var h=0,u=t.length;h<u;h++)o.push(this._view.columnByField(l.getFieldIndex(t[h]))),r.push(e&&h<e.length&&e[h]||n.ASCENDING),a.push(i&&h<i.length&&i[h]||s.SENSITIVE);this._view.orderBy(o,r,a)}},t.prototype.getSortedFields=function(){var t,e=this._view,i=e.getSortFields(),o=e.getSortDirections();if(i&&(t=i.length)>0){for(var r=this._dataProvider,n=[],s=0;s<t;s++)n.push({fieldName:r.getFieldName(i[s]),orgFieldName:r.getOrgFieldName(i[s]),direction:o[s]});return n}return null},t.prototype.setFocus=function(){this._view.setFocus()},t.prototype.getColumn=function(t){return this._view.getColumn(t)},t.prototype.getColumns=function(){for(var t=this._view.columnCount,e=[],i=0;i<t;i++)e.push(this._view.getColumn(i));return e},t.prototype.setColumns=function(t){this._view.setColumns(t)},t.prototype.addColumn=function(t,e){this._view.addColumn(t,e)},t.prototype.layoutByColumn=function(t){return this._view.layoutByColumn(t)},t.prototype.layoutByName=function(t){return this._view.layoutByName(t)},t.prototype.getColumnNames=function(t,e){return this._view.collectColumnNames(t,e)},t.prototype.columnByName=function(t){return this._view.columnByName(t)},t.prototype.columnByField=function(t){return this._view.columnByField(t)},t.prototype.getColumnProperty=function(t,e){var i=op.getColumn(this._view,t);if(i&&e)return i[e]instanceof ft?i[e].toProxy():i[e]},t.prototype.setColumnProperty=function(t,e,i){var o=op.getColumn(this._view,t);o&&e&&(o[e]instanceof ft?o[e].assignFrom(i):o[e]=i)},t.prototype.setColumn=function(t){var e=op.getColumn(this._view,t);e&&e.assignFrom(t)},t.prototype.getDisplayColumns=function(){return this._view.collectColumns(!0,!0,!0)},t.prototype.setColumnLayout=function(t){("string"!=typeof t||(t=this._view.findColumnLayout(t)))&&(this._view.cellLayout=t)},t.prototype.getLayoutByColumn=function(t){var e=this._view.layoutByColumn(t);return e?e.toProxy():null},t.prototype.saveColumnLayout=function(){return this._view.activeCellLayout.getLayout.apply(this._view.activeCellLayout,arguments)},t.prototype.linearizeColumns=function(t){this._view.linearizeColumns(t)},t.prototype.registerColumnLayouts=function(t){this._view.registerColumnLayouts(t)},t.prototype.fitLayoutWidth=function(t,e,i){var o;if(t){if("string"==typeof t?o=this.layoutByName(t):t.name&&(o=this.layoutByColumn(t.name)),o instanceof wn)return this._view.fitLayoutWidth(o,e,i)}else if(null==t)return this._view.fitLayoutWidth(this._view.activeCellLayout._root,e,i)},t.prototype.setRowHeight=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=!0),this._view.setRowHeight(t,e,i)},t.prototype.getRowHeight=function(t){var e=this._view.getRowHeight(t);if(isNaN(e)){var i=this._view.getItem(t);e=this._view.layoutManager.getItemHeight(i)}return e},t.prototype.clearRowHeights=function(t){this._view.clearRowHeights(t)},t.prototype.getCurrent=function(){var t=this._view.focusedIndex;return t?t.proxy():null},t.prototype.setCurrent=function(t,e){void 0===e&&(e=!0);var i=this._view.focusedIndex.clone();i.assignFrom(t),this._view.setFocusedIndex(i,e,!0)},t.prototype.resetCurrent=function(){this._view.setFocusedIndex(this._view.focusedIndex.clone().reset())},t.prototype.clearCurrent=function(){this._view.clearFocusedIndex()},t.prototype.mouseToIndex=function(t,e){var i=this._view.pointToIndex(null,t,e,!1);return i?i.proxy():null},t.prototype.getCellBounds=function(t,e,i){void 0===i&&(i=!0);var o=op.getColumn(this._view,e),r=new Hn(this._view,t,o);if(o&&r){var n=this._view.layoutManager,s=n.getBodyView(r),a=s.getCellRectAt(n,r,!0);if(a=a&&(i?s.boundsByScreen(a):s.boundsByContainer(a)))return{x:a.x,y:a.y,width:a.width,height:a.height}}return null},t.prototype.getIndexOfElement=function(t){var e=this._view.getCellViewOf(t),i=this._view.getDataCellIndex(e);return i?i.proxy():null},t.prototype.setColumnFilters=function(t,e){var i=op.getColumn(this._view,t);i instanceof mn&&i.setFilters(e)},t.prototype.clearColumnFilters=function(t){var e=op.getColumn(this._view,t);e instanceof mn&&e.clearFilters()},t.prototype.addColumnFilters=function(t,e,i){var o=op.getColumn(this._view,t);o instanceof mn&&o.addFilters(e,i)},t.prototype.removeColumnFilters=function(t,e){var i=op.getColumn(this._view,t);i instanceof mn&&i.removeFilters(e)},t.prototype.activateColumnFilters=function(t,e,i){var o=op.getColumn(this._view,t);o instanceof mn&&o.activateFilters(e,i)},t.prototype.activateAllColumnFilters=function(t,e){var i=op.getColumn(this._view,t);i instanceof mn&&i.activateAllFilters(e)},t.prototype.hideColumnFilters=function(t,e,i){void 0===i&&(i=!0);var o=op.getColumn(this._view,t);o instanceof mn&&(o.hideColumnFilters(e,i),this._view.closePopups())},t.prototype.hideAllColumnFilters=function(t,e){void 0===e&&(e=!0);var i=op.getColumn(this._view,t);i instanceof mn&&(i.hideAllColumnFilters(e),this._view.closePopups())},t.prototype.toggleColumnFilters=function(t,e){var i=op.getColumn(this._view,t);i instanceof mn&&i.toggleFilters(e)},t.prototype.toggleAllColumnFilters=function(t){var e=op.getColumn(this._view,t);e instanceof mn&&e.toggleAllFilters()},t.prototype.getColumnFilter=function(t,e){var i=op.getColumn(this._view,t);return i instanceof mn&&i.getFilter(e)?i.getFilter(e).toProxy():null},t.prototype.getColumnFilters=function(t){var e=op.getColumn(this._view,t);if(e instanceof mn){for(var i=e.autoFilter?e.autoFilters.items:e.filters.items,o=[],r=0,n=i.length;r<n;r++)o.push(i[r].toProxy());return o}return null},t.prototype.getActiveColumnFilters=function(t,e){void 0===e&&(e=!0);var i=op.getColumn(this._view,t);if(i instanceof mn){for(var o=i.getActiveFilters(e),r=[],n=0,s=o.length;n<s;n++)r.push(o[n].toProxy());return r}return null},t.prototype.isFiltered=function(t){if(t){var e=op.getColumn(this._view,t);return e instanceof mn&&e.isFiltered()}var i=this._view.getFilteredColumns();return i&&i.length>0},t.prototype.autoFiltersRefresh=function(t,e){t=t?lt.makeArray(t):this._view.getChildColumnNames(null);for(var i=0;i<t.length;i++){var o=op.getColumn(this._view,t[i]);o instanceof mn&&o.autoFilterRefresh(e)}},t.prototype.getValues=function(t){var e=this._view.getItem(t);return e?op.getValues(this._view,e):null},t.prototype.getDisplayValues=function(t){var e=this._view.getItem(t);if(e)return op.getDisplayValues(this._view,e)},t.prototype.getDisplayValuesOfRow=function(t){var e=this._view.getItemOfRow(t,!0);if(e)return op.getDisplayValues(this._view,e)},t.prototype.getJsonRows=function(){return this._view.getJsonRows()},t.prototype.setValues=function(t,e,i){var o=this._view.getItem(t);o&&op.setValues(this._view,o,e,i)},t.prototype.getValue=function(t,e){var i;if(i=this._view._clipboardManager.isPasting?this._view._clipboardManager.appendingIndex.item:this._view.getItem(t)){var o="string"==typeof e?this._dataProvider.getFieldIndex(e):e;return i.getData(o)}return null},t.prototype.setValue=function(t,e,i){e=this._dataProvider.getFieldIndex(e),this._view.setValueAt(t,e,i)},t.prototype.getEditValue=function(){return this._view.getEditCellValue()},t.prototype.setEditValue=function(t,e,i){void 0===i&&(i=!0),this._view.setEditCellValue(t,e,i)},t.prototype.registerCustomRenderer=function(t,e){this._view.registerCustomRenderer(t,e)},t.prototype.unregisterCustomRenderer=function(t){this._view.unregisterCustomRenderer(t)},t.prototype.existsCustomRenderer=function(t){return this._view.existsCustomRenderer(t)},t.prototype.unregisterAllCustomRenderer=function(){this._view.unregisterAllCustomRenderer()},t.prototype.addPopupMenu=function(t,e){this._view.addPopupMenu(t,e)},t.prototype.removePopupMenu=function(t){this._view.removePopupMenu(t)},t.prototype.setContextMenu=function(t){this._view.setContextMenu(t)},t.prototype.getSelection=function(){var t=this._view.getSelection();return t?t.toProxy():null},t.prototype.setSelection=function(t){if(t.style&&"string"==typeof t.style){var e,i,o=ls[t.style.toUpperCase()]||ls.BLOCK,r=0,n=0;if(t.hasOwnProperty("startItem"))r=t.startItem;else if(t.hasOwnProperty("startRow"))r=this._view.getItemIndexOfRow(t.startRow);else if("singleColumn"!=o&&"columns"!=o)return;if(t.hasOwnProperty("endItem"))n=t.endItem;else if(t.hasOwnProperty("endRow"))n=this._view.getItemIndexOfRow(t.endRow);else if("singleColumn"!=o&&"columns"!=o)return;e=op.getColumn(this._view,t.startColumn),i=op.getColumn(this._view,t.endColumn);var s=new Hn(this._view,r,e),a=new Hn(this._view,n,i);this._view.clearSelection(),this._view.selections.add(s,a,o)}},t.prototype.clearSelection=function(){this._view.clearSelection()},t.prototype.getSelectedItems=function(t){return this._view.getSelectedItemIndices(t)},t.prototype.getSelectedRows=function(){return this._view.getSelectedRows()},t.prototype.deleteSelection=function(t){this._view.deleteSelection(t)},t.prototype.eraseSelection=function(){this._view.eraseSelection()},t.prototype.getSelectionData=function(t){return void 0===t&&(t=-1),this._view.selections.count>0?this._view.selections.getItem(0).getData(t):null},t.prototype.copyToClipboard=function(t,e){return void 0===e&&(e=!0),this._view.toClipboard(t,e)},t.prototype.commitEditor=function(t){void 0===t&&(t=!0),this._view.commitEditor(t)},t.prototype.commit=function(t){return this._view.commit(t)},t.prototype.cancel=function(){return this._view.cancel()},t.prototype.fillEditSearchItems=function(t,e,i,o){var r=op.getColumn(this._view,t);this._view.fillEditSearchItems(r,e,i,o)},t.prototype.isItemEditing=function(){return this._view.isItemEditing()},t.prototype.isEditing=function(){return this._view.isEditing()},t.prototype.showEditor=function(t){void 0===t&&(t=!1),this._view.showEditor(null,null,t)},t.prototype.hideEditor=function(){this._view.hideEditor(!0)},t.prototype.cancelEditor=function(){this._view.cancelEditor(!0)},t.prototype.setValidations=function(t){this._view.validations=t},t.prototype.validateCells=function(t,e){return void 0===e&&(e=!0),this._view.validateCells(t,e)},t.prototype.getInvalidCells=function(){return this._view.getInvalidCells()},t.prototype.clearInvalidCells=function(){return this._view.clearInvalidCells()},t.prototype.getEditingItem=function(){var t=this._view.getEditItem();return t?(t.getRowObject(),{itemIndex:t.index,dataRow:t.dataRow,values:t.getRowObject()}):null},t.prototype.getItemState=function(t){var e=this._view.getItem(t);if(e){var i=e.itemState;return i==wi.NORMAL&&this._view.focusedIndex.itemIndex==e.index&&(i=wi.FOCUSED),i}return null},t.prototype.showToast=function(t,e){this._view.showToast(t,e)},t.prototype.hideToast=function(t){this._view.hideToast(t)},t.prototype.setLookups=function(t){this._view.setLookups(t)},t.prototype.addLookupSource=function(t){this._view.addLookupSource(t)},t.prototype.removeLookupSource=function(t){this._view.removeLookupSource(t)},t.prototype.existsLookupData=function(t,e){return this._view.existsLookupData(t,e)},t.prototype.fillLookupData=function(t,e){this._view.fillLookupData(t,e)},t.prototype.clearLookupData=function(t){this._view.clearLookupData(t)},t.prototype.isCheckable=function(t){return this._view.isCheckable(t)},t.prototype.isCheckableOfRow=function(t){return this._view.isCheckableOfRow(t)},t.prototype.setCheckable=function(t,e){this._view.setCheckable(t,e)},t.prototype.setCheckableOfRow=function(t,e){this._view.setCheckableOfRow(t,e)},t.prototype.isCheckedItem=function(t){return this._view.isCheckedItem(t)},t.prototype.isCheckedRow=function(t){return this._view.isCheckedRow(t)},t.prototype.checkItem=function(t,e,i,o){void 0===e&&(e=!0),void 0===o&&(o=!0),this._view.checkItem(t,e,i,o)},t.prototype.checkRow=function(t,e,i,o){void 0===e&&(e=!0),void 0===o&&(o=!0),this._view.checkRow(t,e,i,o)},t.prototype.checkItems=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this._view.checkItems(t,e,i)},t.prototype.checkRows=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),this._view.checkRows(t,e,i)},t.prototype.checkAll=function(t,e,i,o){void 0===t&&(t=!0),void 0===i&&(i=!0),void 0===o&&(o=!0),this._view.checkAll(t,e,i,o)},t.prototype.setAllCheck=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0),this._view.setAllCheck(t,e)},t.prototype.isAllChecked=function(){return this._view.allChecked},t.prototype.resetCheckables=function(t){this._view.resetCheckables(),t&&(this._view.checkBar.checkableExpression=null,this._view.checkBar.checkableCallback=null)},t.prototype.applyCheckables=function(){this._view.applyCheckables()},t.prototype.setCheckableExpression=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableExpression=t,e&&this._view.applyCheckables()},t.prototype.setCheckableCallback=function(t,e){void 0===e&&(e=!0),this._view.checkBar.checkableCallback=t,e&&this._view.applyCheckables()},t.prototype.getSummary=function(t,e){var i=this._view.summarizer,o="string"==typeof t?this._dataProvider.getFieldIndex(t):t;if(-1==o)return null;switch(e){case"count":return i.getCount(o);case"sum":return i.getSum(o);case"max":return i.getMax(o);case"min":return i.getMin(o);case"avg":return i.getAvg(o);case"var":return i.getVar(o);case"varp":return i.getVarp(o);case"stdev":return i.getStdev(o);case"stdevp":return i.getStdevp(o);case"datacount":return i.getDataCount(o);case"dataavg":return i.getDataAvg(o)}},t.prototype.getModel=function(t,e){var i=this._view.getItem(t);return i&&op.getItemProxy(i,e)},t.prototype.getModelAs=function(t,e,i){var o=this._view.getItem(t);switch(e){case"row":o=lt.cast(o,io);break;case"group":o=lt.cast(o,oo);break;case"footer":o=lt.cast(o,no);break;case"tree":o=lt.cast(o,Dr)}return o?op.getItemProxy(o,i):null},t.prototype.getGroupModel=function(t,e){var i=this._view.getItem(t);return!i||i instanceof oo||(i=i.parent),i?op.getItemProxy(i,e):null},t.prototype.getRootModel=function(t,e){if(t){var i=this._view.getItem(t.index);if(i)return i.root?op.getItemProxy(i.root,e):null}},t.prototype.getModels=function(t,e){if(t=lt.makeArray(t)){for(var i=[],o=0,r=t.length;o<r;o++){var n=this._view.getItem(t[o]);n&&i.push(op.getItemProxy(n,e))}return i}},t.prototype.getModelOfRow=function(t,e){var i=this._view.getItemOfRow(t,!1);return i?op.getItemProxy(i,e):null},t.prototype.getModelsOfRows=function(t,e){if(t=lt.makeArray(t)){for(var i=[],o=0,r=t.length;o<r;o++){var n=this._view.getItemOfRow(t[o],!1);n&&i.push(op.getItemProxy(n,e))}return i}},t.prototype.getParentModel=function(t,e){var i;return t&&(i=this._view.getItemOfModel(t)),i&&i instanceof uo?null:i?op.getItemProxy(i.parent,e):null},t.prototype.getChildModel=function(t,e,i){var o=t&&this._view.getItemOfModel(t);if(o instanceof oo){var r=o.getItem(e);return r?op.getItemProxy(r,i):null}},t.prototype.getChildModels=function(t,e){var i=t&&this._view.getItemOfModel(t);if(i instanceof oo){for(var o=[],r=0,n=i.count;r<n;r++)o.push(op.getItemProxy(i.children[r],e));return o}return null},t.prototype.getDescendantModels=function(t,e){var i=t&&this._view.getItemOfModel(t);if(i instanceof oo){var o=i.getDescendants(!1),r=[];if(o)for(var n=0,s=o.length;n<s;n++)r.push(op.getItemProxy(o[n],e));return r}return null},t.prototype.getGroupSummary=function(t,e,i){if(t){var o=this._view.getItemOfModel(t),r="string"==typeof e?this._dataProvider.getFieldIndex(e):e;if(o instanceof oo&&r>=0){var n={count:o.getNumber(r),sum:o.getSum(r),max:o.getMax(r),min:o.getMin(r),avg:o.getAvg(r),datacount:o.getDataCount(r),dataavg:o.getSum(r)/o.getDataCount(r)};return i&&(n.var=o.getVar(r,1),n.varp=o.getVar(r,0),n.stdev=o.getStdev(r,1),n.stdevp=o.getStdev(r,0)),n}}},t.prototype.showProgress=function(){this._view.showProgress()},t.prototype.setProgress=function(t,e,i,o){this._view.setProgress(t,e,i,o)},t.prototype.closeProgress=function(){this._view.closeProgress()},t.prototype.showLoading=function(t){this._view.showLoading(t)},t.prototype.closeLoading=function(){this._view.hideLoading()},t.prototype.searchItem=function(t){return t?this._view.searchItem(t):-1},t.prototype.searchCell=function(t){return t?this._view.searchCell(t):null},t.prototype.resetSize=function(t){this._view.container.resetSize(t)},t.prototype.closeList=function(){this._view.closePopups()},t.prototype.exportGrid=function(t){if("csv"===t.type){var e=new Lu(t);(new zu).export(this._view,e)}else if("excel"===t.type){e=new Fu(this._view,t);(new ip).export(this._view,e)}},t.prototype.scrollPage=function(t){this._view._vscrollBar._doScroll(Ws.PAGE,t,0)},t.prototype.getTopItem=function(){return this._view.topIndex},t.prototype.setTopItem=function(t){void 0===t&&(t=0),this._view.topIndex=t},t.prototype.getLeftPos=function(){return this._view.leftPos},t.prototype.setLeftPos=function(t){this._view.leftPos=t},t.prototype.setLeftCol=function(t){this._view.leftCell=t},t.prototype.getContainer=function(){return this._view.container._containerDiv},t.prototype.destroy=function(){this.dispose()},t.prototype.fullItemCount=function(){return this._view.layoutManager.fullItemCount},t.prototype.undo=function(){return this._view.undo()},t.prototype.redo=function(){return this._view.redo()},t.prototype.clearCommandStack=function(t){void 0===t&&(t=!0),this._view.clearCommandStack(t)},t.prototype._getView=function(){return this._view},t}(),np=function(t){function e(e,i,o){var r=t.call(this,e,i,o)||this;return r.onPageChanging=null,r.onPageChanged=null,r.onPageCountChanged=null,r.onGrouping=null,r.onGrouped=null,r.onExpanding=null,r.onExpanded=null,r.onCollapsing=null,r.onCollapsed=null,i&&(r.shadowDom=r._view._shadowDom),r}return o(e,t),Object.defineProperty(e.prototype,"rowGroup",{get:function(){return this._view.rowGroup},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupPanel",{get:function(){return this._view.groupPanelView},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterMode",{get:function(){return this._view._rs.filterMode},set:function(t){this._view._rs.filterMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filterOr",{get:function(){return this._view._rs.inclusiveFiltering},set:function(t){this._view._rs.inclusiveFiltering=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupSummaryMode",{get:function(){return this._view._rs.groupSummaryMode},set:function(t){this._view._rs.groupSummaryMode=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"groupingOptions",{get:function(){return this._view.groupingOptions},enumerable:!0,configurable:!0}),e.prototype.getRowGroup=function(){return this._view.rowGroup.toProxy()},e.prototype.setRowGroup=function(t){this._view.rowGroup.assignFrom(t)},e.prototype.getGroupPanel=function(){return{visible:this._view.groupPanelView.visible,height:this._view.groupPanelView.height,minHeight:this._view.groupPanelView.minHeight}},e.prototype.setGroupPanel=function(t){this._view.groupPanelView.assignFrom(t)},e.prototype.getOptions=function(){var e=t.prototype.getOptions.call(this);return e.grouping=this.groupingOptions,e.groupPanel=this.groupPanel,e},e.prototype.setOptions=function(e){t.prototype.setOptions.call(this,e),e.grouping&&this._view.groupingOptions.assignFrom(e.grouping),e.groupPanel&&this._view.groupPanelView.assignFrom(e.groupPanel)},e.prototype.getGroupingOptions=function(){return this._view.groupingOptions.toProxy()},e.prototype.setGroupingOptions=function(t){this._view.groupingOptions.assignFrom(t)},e.prototype.groupBy=function(t,e,i){this._view.groupByFieldNames(t,e,i)},e.prototype.isGrouped=function(){return this._view.rowGrouped},e.prototype.isMergedGrouped=function(){return this._view.mergedRowGrouped},e.prototype.getGroupFields=function(){return this._view.rowGroupFields},e.prototype.getGroupFieldNames=function(t){void 0===t&&(t=!0);var e=this._view.rowGroupFields;if(e){var i=this._dataProvider;if(i){for(var o=[],r=0,n=e.length;r<n;r++)o.push(t?i.getOrgFieldName(e[r]):i.getFieldName(e[r]));return o}return e}return null},e.prototype.getGroupLevels=function(){return this._view.rowGroupLevels},e.prototype.getGroupLevel=function(t){return(t=this._dataProvider.getFieldIndex(t))>-1?this._view.getGroupLevel(t):-1},e.prototype.getGroupIndex=function(t){var e=this._view.getItem(t);if(e){var i=e.parent;return i?i.index:-1}return-1},e.prototype.isGroupItem=function(t){return this._view.getItem(t)instanceof oo},e.prototype.isParentVisible=function(t){var e=this._view.getItem(t);return e&&e.parent&&e.parent.visible},e.prototype.expandGroup=function(t,e,i,o){void 0===o&&(o=0);var r=this._view.getItem(t);r&&r instanceof oo&&this._view.expand(r,e,i,o)},e.prototype.collapseGroup=function(t,e,i){var o=this._view.getItem(t);o&&o instanceof oo&&this._view.collapse(o,e,i)},e.prototype.expandParent=function(t,e,i,o){void 0===o&&(o=0);var r=this._view.getItem(t);if(r){var n=r.parent;n&&n.expandable&&(n.collapsed||i)&&this._view.expand(n,e,i,o)}},e.prototype.collapseParent=function(t,e,i){var o=this._view.getItem(t);if(o){var r=o.parent;r&&r instanceof oo&&this._view.collapse(r,e,i)}},e.prototype.expandAll=function(t,e){void 0===t&&(t=!0),this._view.itemCount>0&&this._view.expandAll(t,e)},e.prototype.collapseAll=function(t){this._view.itemCount>0&&this._view.collapseAll(t)},e.prototype.beginInsertRow=function(t,e){void 0===t&&(t=-1),this._view.insertAt(t,e)},e.prototype.beginAppendRow=function(){this._view.append()},e.prototype.beginUpdateRow=function(t){if(this._view.focusedIndex){var e=this._view.focusedIndex.clone();void 0!==t&&(e.itemIndex=t),this._view.edit(e)}},e.prototype.setPaging=function(t,e,i){void 0===e&&(e=10),void 0===i&&(i=-1),this._view.setPaging(t,e,i)},e.prototype.getPage=function(){return this._view.page},e.prototype.setPage=function(t,e){void 0===e&&(e=-1),this._view.setPage(t,e)},e.prototype.getPageCount=function(){return this._view.pageCount},e.prototype.setPageCount=function(t){this._view.pageCount=t},e.prototype.getCheckedItems=function(t){return void 0===t&&(t=!0),this._view.getCheckedItemIndices(!t)},e.prototype.getCheckedRows=function(t,e,i){return void 0===t&&(t=!0),this._view.getCheckedRows(t,e,i)},e.prototype._createView=function(t,e,i){return(this._container=new Bd(t,this,e,i)).gridView},e.prototype._createListener=function(t){return new lp(this,t)},e}(rp),sp=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.onTreeItemExpanding=null,e.onTreeItemExpanded=null,e.onTreeItemCollapsing=null,e.onTreeItemCollapsed=null,e.onTreeItemChanged=null,e}return o(e,t),Object.defineProperty(e.prototype,"treeOptions",{get:function(){return this._view.treeOptions},enumerable:!0,configurable:!0}),e.prototype.getTreeOptions=function(){return this._view.treeOptions.toProxy()},e.prototype.setTreeOptions=function(t){this._view.treeOptions.assignFrom(t)},e.prototype.getParent=function(t){var e=this._view.getItem(t);return e?e.parentIndex:-1},e.prototype.getChildren=function(t){var e=this._view.getItem(t);if(e){for(var i=[],o=0,r=e.count;o<r;o++)i.push(e.getItem(o).index);return i}return null},e.prototype.getDescendants=function(t){var e=this._view.getItem(t);if(e){for(var i=[],o=e.getDescendants(!1),r=0,n=o.length;r<n;r++)i.push(o[r].index);return i}return null},e.prototype.getAncestors=function(t,e){void 0===e&&(e=!0);var i=this._view.getItem(t);if(i){for(var o=[],r=i.getAncestors(),n=0,s=r.length;n<s;n++)!e&&r[n]instanceof kr||o.push(r[n].index);return o}return null},e.prototype.expand=function(t,e,i,o){void 0===o&&(o=0);var r=this._view.getItem(t);r&&this._view.expand(r,e,i,o)},e.prototype.expandModel=function(t,e,i,o){void 0===o&&(o=0);var r=this._view.getItemOfModel(t);r&&this._view.expand(r,e,i,o)},e.prototype.collapse=function(t,e){var i=this._view.getItem(t);i&&this._view.collapse(i,e)},e.prototype.collapseModel=function(t,e){var i=this._view.getItemOfModel(t);i&&this._view.collapse(i,e)},e.prototype.expandAll=function(t){void 0===t&&(t=0),this._view.expandAll(t)},e.prototype.collapseAll=function(){this._view.collapseAll()},e.prototype.getCheckedItems=function(){return this._view.getCheckedItemIndices()},e.prototype.getCheckedRows=function(t){return this._view.getCheckedRowIds(t)},e.prototype.checkChildren=function(t,e,i,o,r,n){void 0===n&&(n=!0);var s=this._view.getItem(t);s&&this._view.checkChildren(s,e,i,o,r,n)},e.prototype._createView=function(t){return(this._container=new Xd(t,this)).gridView},e.prototype._createListener=function(t){return new hp(this,t)},e}(rp),ap=function(t){function e(e,i){var o=t.call(this)||this;return o._del=e,o._view=i,o._view.addListener(o),o}return o(e,t),e.prototype.dispose=function(){this._view.removeListener(this),this._view=null,this._del=null},e.prototype.onGridBaseViewActivated=function(t,e){this._del.onViewActivated?this._del.onViewActivated(this._del,e):lt.log("onViewActivated",e)},e.prototype.onGridBaseCurrentChanging=function(t,e,i){return this._del.onCurrentChanging?this._del.onCurrentChanging(this._del,e.proxy(),i.proxy()):(lt.log("onCurrentChanging",e,i),!0)},e.prototype.onGridBaseCurrentChanged=function(t,e){this._del.onCurrentChanged?this._del.onCurrentChanged(this._del,e.proxy()):lt.log("onCurrentChanged",e)},e.prototype.onGridBaseCurrentRowChanged=function(t,e,i){this._del.onCurrentRowChanged?this._del.onCurrentRowChanged(this._del,e,i):lt.log("onCurrentRowChanged",e,i)},e.prototype.onGridBaseValidateCell=function(t,e,i,o){if(this._del.onValidateColumn){var r=e.itemIndex,n=e.item&&e.item.dataRow,s=this._del.onValidateColumn(this._del,e.column,i,o,r,n);if(s&&s.level&&s.message)throw new Vr(s.level,s.message,e.column&&e.column,s.message);if("string"==typeof s||"number"==typeof s)throw new Vr(p.ERROR,s,e.column&&e.column,s)}},e.prototype.onGridBaseValidateRow=function(t,e,i,o){if(this._del.onValidateRow){var r=this._del.onValidateRow(this._del,e.index,e.dataRow,i,o);if(r&&r.level&&r.message)throw new Vr(r.level,r.message,null,r.message);if("string"==typeof r||"number"==typeof r)throw new Vr(p.ERROR,r,null,r)}},e.prototype.onGridBaseValidationFail=function(t,e,i,o){if(!this._del.onValidationFail)return o;var r=this._del.onValidationFail(this._del,e,i,{level:o.level,message:o.message});return r&&r.level&&r.message?(o.level=r.level,o.message=r.message,o.userMessage=r.message,o):"string"==typeof r||"number"==typeof r?(o.message=r,o.userMessage=r,o):void 0},e.prototype.onGridBaseCellClicked=function(t,e){this._del.onCellClicked?this._del.onCellClicked(this._del,e):lt.log("onCellClicked: ",e)},e.prototype.onGridBaseCellDblClicked=function(t,e){this._del.onCellDblClicked?this._del.onCellDblClicked(this._del,e):lt.log("onCellDblClicked: ",e)},e.prototype.onGridBaseCellItemClicked=function(t,e,i){return this._del.onCellItemClicked?this._del.onCellItemClicked(this._del,e.toProxy(),i):lt.log("onCellItemClicked: ",i)},e.prototype.onGridBaseColumnCheckedChanged=function(t,e,i){this._del.onColumnCheckedChanged?this._del.onColumnCheckedChanged(this._del,e,i):lt.log("onColumnCheckedChanged: ("+e.name+", "+i+")")},e.prototype.onGridBaseMenuItemClicked=function(t,e,i){this._del.onMenuItemClicked?this._del.onMenuItemClicked(this._del,e.toProxy(),i):lt.log("onMenuItemClicked: ",e.toProxy(),i)},e.prototype.onGridBaseContextMenuPopup=function(t,e,i,o){return this._del.onContextMenuPopup?this._del.onContextMenuPopup(this._del,e,i,o):lt.log("onContextMenuPopup: x = ",e,", y = ",i,", clickData =",o)},e.prototype.onGridBaseContextMenuItemClicked=function(t,e,i){this._del.onContextMenuItemClicked?this._del.onContextMenuItemClicked(this._del,e.toProxy(),i):lt.log("onContextMenuItemClicked: ",e.toProxy(),i)},e.prototype.onGridBaseCellButtonClicked=function(t,e){this._del.onCellButtonClicked?this._del.onCellButtonClicked(this._del,e.proxy(),e.column):lt.log("onCellButtonClicked: ",e)},e.prototype.onGridBaseScrollToBottom=function(t){this._del.onScrollToBottom?this._del.onScrollToBottom(this._del):lt.log("onScrollToBottom")},e.prototype.onGridBaseTopIndexChanged=function(t,e){this._del.onTopIndexChanged?this._del.onTopIndexChanged(this._del,e):lt.log("onTopItemIndexChanged: "+e)},e.prototype.onGridBaseRowsDeleting=function(t,e){return this._del.onRowsDeleting?this._del.onRowsDeleting(this._del,e):(lt.log("onRowsDeleting:",e),!0)},e.prototype.onGridBaseRowInserting=function(t,e,i){if(this._del.onRowInserting)return this._del.onRowInserting(this._del,e,i);lt.log("onRowInserting: "+e,i)},e.prototype.onGridBaseSelectionChanged=function(t){this._del.onSelectionChanged?this._del.onSelectionChanged(this._del):lt.keyLog("onSelectionChanged")},e.prototype.onGridBaseSelectionAdded=function(t,e){this._del.onSelectionAdded?this._del.onSelectionAdded(this._del,e):lt.keyLog("onSelectionAdded: ",e)},e.prototype.onGridBaseSelectionEnded=function(t){this._del.onSelectionEnded?this._del.onSelectionEnded(this._del):lt.keyLog("onSelectionEnded")},e.prototype.onGridBaseShowEditor=function(t,e,i,o){return this._del.onShowEditor?this._del.onShowEditor(this._del,e.proxy(),i,o):lt.log("onShowEditor",e.proxy(),i,o)},e.prototype.onGridBaseHideEditor=function(t,e){this._del.onHideEditor?this._del.onHideEditor(this._del,e.proxy()):lt.log("onHideEditor: ",e.proxy())},e.prototype.onGridBaseEditChange=function(t,e,i){this._del.onEditChange?this._del.onEditChange(this._del,e.proxy(),i):lt.log("onEditChange: "+i,e.proxy())},e.prototype.onGridBaseGetEditValue=function(t,e,i){this._del.onGetEditValue?this._del.onGetEditValue(this._del,e.proxy(),i):lt.log("onGetEditValue: ",e,i)},e.prototype.onGridBaseEditCommit=function(t,e,i,o){return this._del.onEditCommit?this._del.onEditCommit(this._del,e.proxy(),i,o):(lt.log("onEditCommit",e.proxy(),i,o),!0)},e.prototype.onGridBaseEditCanceled=function(t,e){this._del.onEditCanceled?this._del.onEditCanceled(this._del,e.proxy()):lt.log("onEditCanceled",e.proxy())},e.prototype.onGridBaseItemEditCanceled=function(t,e){this._del.onItemEditCanceled?this._del.onItemEditCanceled(this._del,e.index,e.itemState):lt.log("onItemEditCanceled: "+e.index+", "+e.itemState)},e.prototype.onGridBaseItemEditCancel=function(t,e){return this._del.onItemEditCancel?this._del.onItemEditCancel(this._del,e.index,e.itemState):(lt.log("onItemEditCancel: "+e.index+", "+e.itemState),!0)},e.prototype.onGridBaseEditSearch=function(t,e,i){this._del.onEditSearch?this._del.onEditSearch(this._del,e.proxy(),i):lt.log("onEditSearch: "+i,e.proxy())},e.prototype.onGridBaseSearchCellButtonClick=function(t,e,i){return this._del.onSearchCellButtonClick?this._del.onSearchCellButtonClick(this._del,e.proxy(),i):(lt.log("onSearchCellButtonClick: "+i,e.proxy()),null)},e.prototype.onGridBaseCellEdited=function(t,e,i){return this._del.onCellEdited?this._del.onCellEdited(this._del,e.index,e.dataRow,i):lt.log("onCellEdited: "+e.index+", "+e.dataRow+", "+i)},e.prototype.onGridBaseEditRowChanged=function(t,e,i,o,r){return this._del.onEditRowChanged?this._del.onEditRowChanged(this._del,e.index,e.dataRow,i,o,r):lt.log("onEditRowChanged: "+e.index+", "+e.dataRow+", "+i+", "+o+" => "+r)},e.prototype.onGridBaseEditRowPasted=function(t,e,i,o,r){return this._del.onEditRowPasted?this._del.onEditRowPasted(this._del,e.index,e.dataRow,i,o,r):lt.log("onEditRowPasted: "+e.index+", "+e.dataRow,i,o,r)},e.prototype.onGridBaseRowsPasted=function(t,e){return this._del.onRowsPasted?this._del.onRowsPasted(this._del,e):lt.log("onRowsPasted: ",e)},e.prototype.onGridBaseCellPasting=function(t,e,i){return this._del.onCellPasting?this._del.onCellPasting(this._del,e.proxy(),i):lt.log("onCellPasting: ",e,i)},e.prototype.onGridBaseItemChecked=function(t,e,i){return this._del.onItemChecked?this._del.onItemChecked(this._del,e.index,i):lt.log("onItemChecked",e.index,i)},e.prototype.onGridBaseItemsChecked=function(t,e,i){var o=op.getItemIndices(e);return this._del.onItemsChecked?this._del.onItemsChecked(this._del,o,i):lt.log("onItemsChecked: "+i,o)},e.prototype.onGridBaseItemAllChecked=function(t,e){return this._del.onItemAllChecked?this._del.onItemAllChecked(this._del,e):lt.log("onItemAllChecked: "+e)},e.prototype.onGridBaseErrorClicked=function(t,e){this._del.onErrorClicked?this._del.onErrorClicked(this._del,e):lt.log("onErrorClicked: "+e)},e.prototype.onGridBaseSorting=function(t,e,i){for(var o=[],r=0,n=i.length;r<n;r++)o.push(i[r]?i[r].toString():"ascending");return this._del.onSorting?this._del.onSorting(this._del,e,i):lt.log("onSorting: ",e,o)},e.prototype.onGridBaseSortingChanged=function(t){this._del.onSortingChanged?this._del.onSortingChanged(this._del):lt.log("onSortingChanged")},e.prototype.onGridBaseFiltering=function(t){return this._del.onFiltering?this._del.onFiltering(this._del):lt.log("onFiltering")},e.prototype.onGridBaseFilteringChanged=function(t,e,i){var o=e?e.getOwner():null,r=i?i.toProxy():null,n=o?o.name:"",s=i?i.name:"";return this._del.onFilteringChanged?this._del.onFilteringChanged(this._del,o,r):lt.log("onFilteringChanged: "+n+", "+s)},e.prototype.onGridBaseKeyDown=function(t,e){return this._del.onKeyDown?this._del.onKeyDown(this._del,e):lt.keyLog("onKeyDown: "+e)},e.prototype.onGridBaseKeyPress=function(t,e){this._del.onKeyPress?this._del.onKeyPress(this._del,e):lt.keyLog("onKeyPress: "+e)},e.prototype.onGridBaseKeyUp=function(t,e){this._del.onKeyUp?this._del.onKeyUp(this._del,e):lt.keyLog("onKeyUp: "+e)},e.prototype.onGridBaseShowTooltip=function(t,e,i){return this._del.onShowTooltip?this._del.onShowTooltip(this._del,e.proxy(),i):(lt.log("onShowTooltip: "+i,e.proxy()),i)},e.prototype.onGridBaseShowHeaderTooltip=function(t,e,i){return this._del.onShowHeaderTooltip?this._del.onShowHeaderTooltip(this._del,e,i):(lt.log("onShowHeaderTooltip: "+e.name+", "+i),i)},e.prototype.onGridBaseColumnPropertyChanged=function(t,e,i,o,r){this._del.onColumnPropertyChanged?this._del.onColumnPropertyChanged(this._del,e,i,o,r):lt.log("onColumnPropertyChanged: "+e.name+", "+i+", "+o+", "+r)},e.prototype.onGridBaseLayoutPropertyChanged=function(t,e,i,o,r){this._del.onLayoutPropertyChanged?this._del.onLayoutPropertyChanged(this._del,e,i,o,r):lt.log("onLayoutPropertyChanged: "+e.name+", "+i+", "+o+", "+r)},e.prototype.onGridBaseGridActivated=function(t){this._del.onGridActivated?this._del.onGridActivated(this._del):lt.log("onGridActivated")},e.prototype.onGridBasePaste=function(t,e,i){if(this._del.onPaste)return this._del.onPaste(this._del,e.proxy(),i);lt.log("onPaste: ",e)},e.prototype.onGridBaseCopy=function(t,e,i){if(this._del.onCopy)return this._del.onCopy(this._del,e.toProxy(),i);lt.log("onCopy: ",e.toProxy())},e.prototype.onGridBasePasted=function(t){return this._del.onPasted?this._del.onPasted(this._del):lt.log("onPasted")},e.prototype.onGridBaseCommandStackChanged=function(t,e,i){this._del.onCommandStackChanged?this._del.onCommandStackChanged(t.handler,e,i):lt.log("onCommandStackChanged: undoable "+e+", redoable "+i)},e.prototype.onGridBaseDataLoadComplated=function(t){this._del.onDataLoadComplated?this._del.onDataLoadComplated(t.handler):lt.log("onDataLoadComplated: ")},e}(Wi),lp=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.onGridViewPageChanging=function(t,e){return this._del.onPageChanging?this._del.onPageChanging(this._del,e):(lt.log("onPageChanging:"+e),!0)},e.prototype.onGridViewPageChanged=function(t,e){this._del.onPageChanged?this._del.onPageChanged(this._del,e):lt.log("onPageChanged:"+e)},e.prototype.onGridViewPageCountChanged=function(t,e){this._del.onPageCountChanged?this._del.onPageCountChanged(this._del,e):lt.log("onPageCountChanged:"+e)},e.prototype.onGridViewGrouping=function(t,e){return this._del.onGrouping?this._del.onGrouping(this._del,e):(lt.log("onGrouping",e),!0)},e.prototype.onGridViewGrouped=function(t){this._del.onGrouped?this._del.onGrouped(this._del):lt.log("onGrouped")},e.prototype.onGridViewExpanding=function(t,e){return this._del.onExpanding?this._del.onExpanding(this._del,e.index):(lt.log("onExpanding: "+e.index),!0)},e.prototype.onGridViewExpanded=function(t,e){this._del.onExpanded?this._del.onExpanded(this._del,e.index):lt.log("onExpanded: "+e.index)},e.prototype.onGridViewCollapsing=function(t,e){return this._del.onCollapsing?this._del.onCollapsing(this._del,e.index):(lt.log("onCollapsing: "+e.index),!0)},e.prototype.onGridViewCollapsed=function(t,e){this._del.onCollapsed?this._del.onCollapsed(this._del,e.index):lt.log("onCollapsed: "+e.index)},e}(ap),hp=function(t){function e(e,i){return t.call(this,e,i)||this}return o(e,t),e.prototype.dispose=function(){t.prototype.dispose.call(this)},e.prototype.onTreeViewExpanding=function(t,e){return this._del.onTreeItemExpanding?this._del.onTreeItemExpanding(this._del,e.index,e.rowId):(lt.log("TreeItem expanding: "+e),!0)},e.prototype.onTreeViewExpanded=function(t,e){this._del.onTreeItemExpanded?this._del.onTreeItemExpanded(this._del,e.index,e.rowId):lt.log("TreeItem expanded: "+e)},e.prototype.onTreeViewCollapsing=function(t,e){return this._del.onTreeItemCollapsing?this._del.onTreeItemCollapsing(this._del,e.index,e.rowId):(lt.log("TreeItem collapsing: "+e),!0)},e.prototype.onTreeViewCollapsed=function(t,e){this._del.onTreeItemCollapsed?this._del.onTreeItemCollapsed(this._del,e.index,e.rowId):lt.log("TreeItem collapsed: "+e)},e.prototype.onTreeViewChanged=function(t,e){this._del.onTreeItemChanged?this._del.onTreeItemChanged(this._del,e.index,e.rowId):lt.log("TreeItem item changed: "+e)},e}(ap),up=function(){function t(){}return t.getVersion=function(){return e.version},t.getLicenseType=function(){return e.license},t.getLicenseCode=function(){return e.code},t.getActiveGrid=function(){var t=Ja.getActiveGrid();return t&&t.handler},t.getGridInstance=function(t){var e=Ja.getGridInstance(t);return e&&e.handler},t.exportGrid=function(t){var e=t&&t.exportGrids;if(e){for(var i=this.getActiveGrid(),o=void 0,r=0;r<e.length;r++){var n=e[r].grid;if(n===i){o=n;break}o=o||n}if(o)return void o.exportGrid(t)}throw new Error("multiExport must have exportGrids.")},t.setDebug=function(t,e,i){lt.setDebugging(t,e,i)},t.setMobile=function(t){lt.setMobile(t)},Object.defineProperty(t,"ImageList",{get:function(){return Ki},enumerable:!0,configurable:!0}),Object.defineProperty(t,"GridView",{get:function(){return np},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TreeView",{get:function(){return sp},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LocalDataProvider",{get:function(){return Ui},enumerable:!0,configurable:!0}),Object.defineProperty(t,"LocalTreeDataProvider",{get:function(){return zi},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ValueType",{get:function(){return r},enumerable:!0,configurable:!0}),t}();!function(t){t.RECTANGLE="rectangle",t.TRIANLGE="triangle",t.INVERTED_TRIANLGE="itriangle",t.DIAMOND="diamond",t.UP_ARROW="uparrow",t.DOWN_ARROW="downarrow",t.LEFT_ARROW="leftarrow",t.RIGHT_ARROW="rightarrow",t.PLUS="plus",t.MINUS="minus",t.EQUAL="equal",t.STAR="star"}(Ku||(Ku={}));var cp=e.version,dp=e.license,pp=e.code;export default up;export{mo as BarOrigin,S as ButtonVisibility,E as CellButton,f as ColumnHeaderItemLocation,rr as ColumnLayoutDirection,iu as DataDropMode,bi as DataFillMode,Gi as DataProviderBase,w as DefaultShowDate,Va as DropDownPosition,Ba as DropDownSortStyle,$a as DropDownValueLabel,M as ExitGridWhenTab,T as ExpanderVisibility,Ru as ExportTarget,Ou as ExportType,h as FilterMode,rp as GridBase,y as GridFitStyle,np as GridView,I as HandleVisibility,O as IconLocation,Ki as ImageList,An as IndicatorValue,wi as ItemState,k as ItemType,Ui as LocalDataProvider,zi as LocalTreeDataProvider,x as MenuItemType,Ku as PolygonShape,R as RefreshMode,pt as RestoreMode,u as RowGroupAdornments,m as RowMaskType,at as RowState,D as ScrollOnEditing,hs as SelectionDisplay,as as SelectionMode,ls as SelectionStyle,s as SortCase,n as SortDirection,l as SortMode,C as SortStyle,jn as StateMark,_ as SummaryMode,P as SummaryType,b as TextInputCase,sp as TreeView,p as ValidationLevel,d as ValidationMode,r as ValueType,In as VerticalMoveStep,Eo as VisualObject,pp as gridLicenseCode,dp as gridLicenseType,cp as gridVersion};
