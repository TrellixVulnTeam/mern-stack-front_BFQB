{"ast":null,"code":"import _toConsumableArray from\"C:/Users/bitcamp/Desktop/1228/mern-stack-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"C:/Users/bitcamp/Desktop/1228/mern-stack-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/bitcamp/Desktop/1228/mern-stack-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/bitcamp/Desktop/1228/mern-stack-front/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{Button,Col,Form,Row}from\"react-bootstrap\";import\"../styles/CommentList.scss\";// import api from \"../utils/api\";\nimport AlertModal from\"./AlertModal\";import{StringUtils}from\"../utils/StringUtils\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var CommentList=function CommentList(props){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showModal=_useState2[0],setShowModal=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),comments=_useState4[0],setComments=_useState4[1];// const token = useSelector((state: any) => state.Auth.token);\nuseEffect(function(){console.log(props.history);if(!props.board_id){return;}getComments(props.board_id);},[props.board_id]);var getComments=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(board_id){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:case\"end\":return _context.stop();}}},_callee);}));return function getComments(_x){return _ref.apply(this,arguments);};}();var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var form,comment,newComments;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();event.stopPropagation();form=event.currentTarget;comment={board_id:props.board_id,content:form.commentText.value// user_id: jwtUtils.getId(token)\n};// let res = await api.post('/api/comment', comment);\n// console.log(res);\n// res = await api.get(`/api/comment?id=${res.data.id}`);\nnewComments=_toConsumableArray(comments);// newComments.unshift(res.data);\nsetComments(newComments);form.commentText.value='';case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSubmit(_x2){return _ref2.apply(this,arguments);};}();// const handleFocus = () => {\n//   if (!jwtUtils.isAuth(token)) {\n//     setShowModal(true);\n//   }\n// }\nvar onCancel=function onCancel(){setShowModal(false);};var onOk=function onOk(){setShowModal(false);// 로그인후 돌아올수 있게 현재경로를 세팅한다.\nprops.history.push(\"/login?redirectUrl=\".concat(props.history.location.pathname));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Form,{className:\"mb-4\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"commentText\",children:[/*#__PURE__*/_jsx(Form.Label,{children:\"\\uB313\\uAE00\"}),/*#__PURE__*/_jsx(Form.Control,{required:true,as:\"textarea\",rows:4})]}),/*#__PURE__*/_jsx(Button,{variant:\"primary\",type:\"submit\",children:\"\\uB4F1\\uB85D\"})]}),comments.map(function(comment){var _comment$user;return/*#__PURE__*/ (// <Row className=\"comment\" key={comment.id}>\n_jsxs(Row,{className:\"comment\",children:[/*#__PURE__*/_jsx(Col,{xs:12,children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-between\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"date\",children:(_comment$user=comment.user)===null||_comment$user===void 0?void 0:_comment$user.username}),/*#__PURE__*/_jsx(\"span\",{className:\"date\",children:StringUtils.getRecentDate(comment.created)})]})}),/*#__PURE__*/_jsx(Col,{xs:12,children:comment.content})]},\"서수완\"));}),/*#__PURE__*/_jsx(AlertModal,{show:showModal,header:\"\\uB313\\uAE00 \\uB4F1\\uB85D\",body:\"\\uB85C\\uADF8\\uC778\\uD558\\uC2DC\\uACA0\\uC2B5\\uB2C8\\uAE4C?\",centered:true,onOk:onOk,onCancel:onCancel})]});};export default CommentList;","map":null,"metadata":{},"sourceType":"module"}